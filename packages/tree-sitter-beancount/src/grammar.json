{
  "name": "beancount",
  "word": "identifier",
  "rules": {
    "file": {
      "type": "PREC_RIGHT",
      "value": 2,
      "content": {
        "type": "REPEAT",
        "content": {
          "type": "CHOICE",
          "members": [
            {
              "type": "SYMBOL",
              "name": "directive"
            },
            {
              "type": "SYMBOL",
              "name": "_new_line"
            },
            {
              "type": "SYMBOL",
              "name": "comment"
            }
          ]
        }
      }
    },
    "directive": {
      "type": "PREC_RIGHT",
      "value": 3,
      "content": {
        "type": "SEQ",
        "members": [
          {
            "type": "CHOICE",
            "members": [
              {
                "type": "SYMBOL",
                "name": "open_directive"
              },
              {
                "type": "SYMBOL",
                "name": "close_directive"
              },
              {
                "type": "SYMBOL",
                "name": "event_directive"
              },
              {
                "type": "SYMBOL",
                "name": "price_directive"
              },
              {
                "type": "SYMBOL",
                "name": "note_directive"
              },
              {
                "type": "SYMBOL",
                "name": "document_directive"
              },
              {
                "type": "SYMBOL",
                "name": "option_directive"
              },
              {
                "type": "SYMBOL",
                "name": "plugin_directive"
              },
              {
                "type": "SYMBOL",
                "name": "include_directive"
              },
              {
                "type": "SYMBOL",
                "name": "balance_directive"
              }
            ]
          },
          {
            "type": "REPEAT",
            "content": {
              "type": "CHOICE",
              "members": [
                {
                  "type": "SYMBOL",
                  "name": "metadata"
                },
                {
                  "type": "SYMBOL",
                  "name": "_new_line"
                }
              ]
            }
          }
        ]
      }
    },
    "_directive_type": {
      "type": "CHOICE",
      "members": [
        {
          "type": "TOKEN",
          "content": {
            "type": "STRING",
            "value": "open"
          }
        },
        {
          "type": "TOKEN",
          "content": {
            "type": "STRING",
            "value": "event"
          }
        },
        {
          "type": "TOKEN",
          "content": {
            "type": "STRING",
            "value": "close"
          }
        },
        {
          "type": "TOKEN",
          "content": {
            "type": "STRING",
            "value": "price"
          }
        },
        {
          "type": "TOKEN",
          "content": {
            "type": "STRING",
            "value": "note"
          }
        },
        {
          "type": "TOKEN",
          "content": {
            "type": "STRING",
            "value": "document"
          }
        },
        {
          "type": "TOKEN",
          "content": {
            "type": "STRING",
            "value": "balance"
          }
        }
      ]
    },
    "balance_directive": {
      "type": "SEQ",
      "members": [
        {
          "type": "FIELD",
          "name": "date",
          "content": {
            "type": "SYMBOL",
            "name": "date"
          }
        },
        {
          "type": "FIELD",
          "name": "directive_type",
          "content": {
            "type": "TOKEN",
            "content": {
              "type": "STRING",
              "value": "balance"
            }
          }
        },
        {
          "type": "FIELD",
          "name": "account_name",
          "content": {
            "type": "SYMBOL",
            "name": "account_name"
          }
        },
        {
          "type": "FIELD",
          "name": "amount",
          "content": {
            "type": "SYMBOL",
            "name": "_num_expr"
          }
        },
        {
          "type": "FIELD",
          "name": "currency",
          "content": {
            "type": "SYMBOL",
            "name": "currency"
          }
        }
      ]
    },
    "open_directive": {
      "type": "SEQ",
      "members": [
        {
          "type": "FIELD",
          "name": "date",
          "content": {
            "type": "SYMBOL",
            "name": "date"
          }
        },
        {
          "type": "FIELD",
          "name": "directive_type",
          "content": {
            "type": "TOKEN",
            "content": {
              "type": "STRING",
              "value": "open"
            }
          }
        },
        {
          "type": "FIELD",
          "name": "account_name",
          "content": {
            "type": "SYMBOL",
            "name": "account_name"
          }
        },
        {
          "type": "FIELD",
          "name": "currencies",
          "content": {
            "type": "CHOICE",
            "members": [
              {
                "type": "SEQ",
                "members": [
                  {
                    "type": "SYMBOL",
                    "name": "currency"
                  },
                  {
                    "type": "REPEAT",
                    "content": {
                      "type": "SEQ",
                      "members": [
                        {
                          "type": "STRING",
                          "value": ","
                        },
                        {
                          "type": "SYMBOL",
                          "name": "currency"
                        }
                      ]
                    }
                  }
                ]
              },
              {
                "type": "BLANK"
              }
            ]
          }
        }
      ]
    },
    "close_directive": {
      "type": "SEQ",
      "members": [
        {
          "type": "FIELD",
          "name": "date",
          "content": {
            "type": "SYMBOL",
            "name": "date"
          }
        },
        {
          "type": "FIELD",
          "name": "directive_type",
          "content": {
            "type": "TOKEN",
            "content": {
              "type": "STRING",
              "value": "close"
            }
          }
        },
        {
          "type": "FIELD",
          "name": "account_name",
          "content": {
            "type": "SYMBOL",
            "name": "account_name"
          }
        }
      ]
    },
    "price_directive": {
      "type": "SEQ",
      "members": [
        {
          "type": "FIELD",
          "name": "date",
          "content": {
            "type": "SYMBOL",
            "name": "date"
          }
        },
        {
          "type": "FIELD",
          "name": "directive_type",
          "content": {
            "type": "TOKEN",
            "content": {
              "type": "STRING",
              "value": "price"
            }
          }
        },
        {
          "type": "FIELD",
          "name": "commodity",
          "content": {
            "type": "SYMBOL",
            "name": "currency"
          }
        },
        {
          "type": "FIELD",
          "name": "price",
          "content": {
            "type": "SYMBOL",
            "name": "_num_expr"
          }
        },
        {
          "type": "FIELD",
          "name": "currency",
          "content": {
            "type": "SYMBOL",
            "name": "currency"
          }
        }
      ]
    },
    "note_directive": {
      "type": "SEQ",
      "members": [
        {
          "type": "FIELD",
          "name": "date",
          "content": {
            "type": "SYMBOL",
            "name": "date"
          }
        },
        {
          "type": "FIELD",
          "name": "directive_type",
          "content": {
            "type": "TOKEN",
            "content": {
              "type": "STRING",
              "value": "note"
            }
          }
        },
        {
          "type": "FIELD",
          "name": "account_name",
          "content": {
            "type": "SYMBOL",
            "name": "account_name"
          }
        },
        {
          "type": "FIELD",
          "name": "note",
          "content": {
            "type": "SYMBOL",
            "name": "str"
          }
        }
      ]
    },
    "document_directive": {
      "type": "SEQ",
      "members": [
        {
          "type": "FIELD",
          "name": "date",
          "content": {
            "type": "SYMBOL",
            "name": "date"
          }
        },
        {
          "type": "FIELD",
          "name": "directive_type",
          "content": {
            "type": "TOKEN",
            "content": {
              "type": "STRING",
              "value": "document"
            }
          }
        },
        {
          "type": "FIELD",
          "name": "account_name",
          "content": {
            "type": "SYMBOL",
            "name": "account_name"
          }
        },
        {
          "type": "FIELD",
          "name": "document_path",
          "content": {
            "type": "SYMBOL",
            "name": "str"
          }
        }
      ]
    },
    "event_directive": {
      "type": "SEQ",
      "members": [
        {
          "type": "FIELD",
          "name": "date",
          "content": {
            "type": "SYMBOL",
            "name": "date"
          }
        },
        {
          "type": "FIELD",
          "name": "directive_type",
          "content": {
            "type": "TOKEN",
            "content": {
              "type": "STRING",
              "value": "event"
            }
          }
        },
        {
          "type": "FIELD",
          "name": "event_name",
          "content": {
            "type": "SYMBOL",
            "name": "str"
          }
        },
        {
          "type": "FIELD",
          "name": "event_value",
          "content": {
            "type": "SYMBOL",
            "name": "str"
          }
        }
      ]
    },
    "option_directive": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "option"
        },
        {
          "type": "FIELD",
          "name": "option_name",
          "content": {
            "type": "SYMBOL",
            "name": "str"
          }
        },
        {
          "type": "FIELD",
          "name": "option_value",
          "content": {
            "type": "SYMBOL",
            "name": "str"
          }
        }
      ]
    },
    "plugin_directive": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "plugin"
        },
        {
          "type": "FIELD",
          "name": "module_name",
          "content": {
            "type": "SYMBOL",
            "name": "str"
          }
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "FIELD",
              "name": "plugin_config",
              "content": {
                "type": "SYMBOL",
                "name": "str"
              }
            },
            {
              "type": "BLANK"
            }
          ]
        }
      ]
    },
    "include_directive": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "include"
        },
        {
          "type": "FIELD",
          "name": "file_name",
          "content": {
            "type": "SYMBOL",
            "name": "str"
          }
        }
      ]
    },
    "account_name": {
      "type": "SEQ",
      "members": [
        {
          "type": "SYMBOL",
          "name": "account_type"
        },
        {
          "type": "REPEAT1",
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "STRING",
                "value": ":"
              },
              {
                "type": "PATTERN",
                "value": "[A-Z][A-Za-z0-9-]*"
              }
            ]
          }
        }
      ]
    },
    "account_type": {
      "type": "CHOICE",
      "members": [
        {
          "type": "STRING",
          "value": "Assets"
        },
        {
          "type": "STRING",
          "value": "Expenses"
        },
        {
          "type": "STRING",
          "value": "Liabilities"
        },
        {
          "type": "STRING",
          "value": "Equity"
        },
        {
          "type": "STRING",
          "value": "Income"
        }
      ]
    },
    "transaction": {
      "type": "SEQ",
      "members": [
        {
          "type": "FIELD",
          "name": "date",
          "content": {
            "type": "SYMBOL",
            "name": "date"
          }
        },
        {
          "type": "FIELD",
          "name": "txn",
          "content": {
            "type": "SYMBOL",
            "name": "txn"
          }
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SYMBOL",
              "name": "_txn_strings"
            },
            {
              "type": "BLANK"
            }
          ]
        },
        {
          "type": "SYMBOL",
          "name": "account_name"
        },
        {
          "type": "SYMBOL",
          "name": "_num_expr"
        }
      ]
    },
    "_txn_strings": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SEQ",
          "members": [
            {
              "type": "ALIAS",
              "content": {
                "type": "SYMBOL",
                "name": "str"
              },
              "named": true,
              "value": "payee"
            },
            {
              "type": "ALIAS",
              "content": {
                "type": "SYMBOL",
                "name": "str"
              },
              "named": true,
              "value": "narration"
            }
          ]
        },
        {
          "type": "ALIAS",
          "content": {
            "type": "SYMBOL",
            "name": "str"
          },
          "named": true,
          "value": "narration"
        }
      ]
    },
    "txn": {
      "type": "CHOICE",
      "members": [
        {
          "type": "STRING",
          "value": "txn"
        },
        {
          "type": "STRING",
          "value": "!"
        },
        {
          "type": "STRING",
          "value": "*"
        }
      ]
    },
    "metadata": {
      "type": "PREC_LEFT",
      "value": 0,
      "content": {
        "type": "SEQ",
        "members": [
          {
            "type": "SYMBOL",
            "name": "metadata_key"
          },
          {
            "type": "FIELD",
            "name": "colon",
            "content": {
              "type": "SYMBOL",
              "name": "colon"
            }
          },
          {
            "type": "CHOICE",
            "members": [
              {
                "type": "SYMBOL",
                "name": "str"
              },
              {
                "type": "SYMBOL",
                "name": "_num_expr"
              },
              {
                "type": "SYMBOL",
                "name": "date"
              },
              {
                "type": "SYMBOL",
                "name": "currency"
              },
              {
                "type": "SYMBOL",
                "name": "account_name"
              },
              {
                "type": "SYMBOL",
                "name": "tag"
              }
            ]
          }
        ]
      }
    },
    "_num_expr": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SYMBOL",
          "name": "number"
        },
        {
          "type": "SYMBOL",
          "name": "paren_num_expr"
        },
        {
          "type": "SYMBOL",
          "name": "unary_num_expr"
        },
        {
          "type": "SYMBOL",
          "name": "binary_num_expr"
        }
      ]
    },
    "paren_num_expr": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "("
        },
        {
          "type": "SYMBOL",
          "name": "_num_expr"
        },
        {
          "type": "STRING",
          "value": ")"
        }
      ]
    },
    "unary_num_expr": {
      "type": "PREC",
      "value": 3,
      "content": {
        "type": "CHOICE",
        "members": [
          {
            "type": "SEQ",
            "members": [
              {
                "type": "STRING",
                "value": "-"
              },
              {
                "type": "SYMBOL",
                "name": "_num_expr"
              }
            ]
          },
          {
            "type": "SEQ",
            "members": [
              {
                "type": "STRING",
                "value": "+"
              },
              {
                "type": "SYMBOL",
                "name": "_num_expr"
              }
            ]
          }
        ]
      }
    },
    "binary_num_expr": {
      "type": "CHOICE",
      "members": [
        {
          "type": "PREC_LEFT",
          "value": 2,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "_num_expr"
              },
              {
                "type": "STRING",
                "value": "*"
              },
              {
                "type": "SYMBOL",
                "name": "_num_expr"
              }
            ]
          }
        },
        {
          "type": "PREC_LEFT",
          "value": 2,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "_num_expr"
              },
              {
                "type": "STRING",
                "value": "/"
              },
              {
                "type": "SYMBOL",
                "name": "_num_expr"
              }
            ]
          }
        },
        {
          "type": "PREC_LEFT",
          "value": 1,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "_num_expr"
              },
              {
                "type": "STRING",
                "value": "+"
              },
              {
                "type": "SYMBOL",
                "name": "_num_expr"
              }
            ]
          }
        },
        {
          "type": "PREC_LEFT",
          "value": 1,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "_num_expr"
              },
              {
                "type": "STRING",
                "value": "-"
              },
              {
                "type": "SYMBOL",
                "name": "_num_expr"
              }
            ]
          }
        }
      ]
    },
    "date": {
      "type": "PATTERN",
      "value": "\\d{4}-\\d{2}-\\d{2}"
    },
    "currency": {
      "type": "TOKEN",
      "content": {
        "type": "PATTERN",
        "value": "[A-Z][A-Z0-9'._-]{0,22}[A-Z0-9]"
      }
    },
    "number": {
      "type": "PATTERN",
      "value": "-?\\d+(\\.\\d+)?"
    },
    "metadata_key": {
      "type": "SEQ",
      "members": [
        {
          "type": "FIELD",
          "name": "data_key",
          "content": {
            "type": "PATTERN",
            "value": "[a-z][A-Za-z0-9-_]*"
          }
        }
      ]
    },
    "str": {
      "type": "PATTERN",
      "value": "\"[^\"]*\""
    },
    "tag": {
      "type": "TOKEN",
      "content": {
        "type": "PATTERN",
        "value": "#[A-Za-z0-9\\-_/.]+"
      }
    },
    "link": {
      "type": "TOKEN",
      "content": {
        "type": "PATTERN",
        "value": "\\^[A-Za-z0-9\\-_/.]+"
      }
    },
    "comment": {
      "type": "PATTERN",
      "value": ";[^\\n]*"
    },
    "_new_line": {
      "type": "CHOICE",
      "members": [
        {
          "type": "STRING",
          "value": "\n"
        },
        {
          "type": "STRING",
          "value": "\r"
        }
      ]
    },
    "colon": {
      "type": "STRING",
      "value": ":"
    },
    "identifier": {
      "type": "PATTERN",
      "value": "[a-z]+"
    }
  },
  "extras": [
    {
      "type": "PATTERN",
      "value": "( |\\r|\\t)+"
    }
  ],
  "conflicts": [],
  "precedences": [],
  "externals": [],
  "inline": [],
  "supertypes": []
}

