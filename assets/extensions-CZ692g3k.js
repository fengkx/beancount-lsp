const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/iconv-lite-umd-JNytzGrV.js","assets/chunk-CcOgqciO.js","assets/jschardet-BRWYG3x_.js"])))=>i.map(i=>d[i]);
import{n as e}from"./chunk-CcOgqciO.js";function t(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function n(e,t){return function(n,r){t(n,r,e)}}function r(e,t){let n=e;typeof n.vscodeWindowId!=`number`&&Object.defineProperty(n,`vscodeWindowId`,{get:()=>t})}var i=window.vscodeWindow??window;function a(e){return e===i?!1:typeof e?.vscodeWindowId==`number`}var o=[];function s(e){let t=e?.default,n;if(typeof t==`string`?(n=new i.CSSStyleSheet,n.replaceSync(t)):t instanceof CSSStyleSheet&&(n=new i.CSSStyleSheet,n.replaceSync(Array.from(t.cssRules).map(e=>e.cssText).join(`
`))),n!=null){let e=Array.from(n.cssRules).filter(e=>e instanceof i.CSSFontFaceRule).map(e=>e.cssText);if(e.length>0){let t=new i.CSSStyleSheet;for(let n of e)t.insertRule(n);i.document.adoptedStyleSheets=[...i.document.adoptedStyleSheets,t]}o.push(n)}}function c(e){let t=e.getRootNode();return t instanceof i.ShadowRoot?t:e.ownerDocument}function l(e){let t=c(e);t instanceof i.ShadowRoot&&o.length===0&&console.error(`@codingame/monaco-vscode-api was loaded inside a shadow dom, but it's unable to load the css into it because the bundler configuration wasn't applied properly: imported css files should export their content as default`),t.adoptedStyleSheets=[...t.adoptedStyleSheets,...o]}var u=new class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?le.isErrorNoTelemetry(e)?new le(e.message+`

`+e.stack):Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}};function d(e){u.setUnexpectedErrorHandler(e)}function f(e){u.onUnexpectedError(e)}function p(e){v(e)||u.onUnexpectedError(e)}function m(e){v(e)||u.onUnexpectedExternalError(e)}function h(e){if(e instanceof Error){let{name:t,message:n,cause:r}=e;return{$isError:!0,name:t,message:n,stack:e.stacktrace||e.stack,noTelemetry:le.isErrorNoTelemetry(e),cause:r?h(r):void 0,code:e.code}}return e}function g(e){let t;return e.noTelemetry?t=new le:(t=Error(),t.name=e.name),t.message=e.message,t.stack=e.stack,e.code&&(t.code=e.code),e.cause&&(t.cause=g(e.cause)),t}var _=`Canceled`;function v(e){return e instanceof ee?!0:e instanceof Error&&e.name===`Canceled`&&e.message===`Canceled`}var ee=class extends Error{constructor(){super(_),this.name=this.message}},te=class e extends Error{static#e=this._name=`PendingMigrationError`;static is(t){return t instanceof e||t instanceof Error&&t.name===e._name}constructor(t){super(t),this.name=e._name}};function ne(){let e=Error(_);return e.name=e.message,e}function re(e){return e?Error(`Illegal argument: ${e}`):Error(`Illegal argument`)}function ie(e){return e?Error(`Illegal state: ${e}`):Error(`Illegal state`)}var ae=class extends TypeError{constructor(e){super(e?`${e} is read-only and cannot be changed`:`Cannot change read-only property`)}};function oe(e){return e?e.message?e.message:e.stack?e.stack.split(`
`)[0]:String(e):`Error`}var se=class extends Error{constructor(e){super(`NotImplemented`),e&&(this.message=e)}},ce=class extends Error{constructor(e){super(`NotSupported`),e&&(this.message=e)}},le=class e extends Error{constructor(e){super(e),this.name=`CodeExpectedError`}static fromError(t){if(t instanceof e)return t;let n=new e;return n.message=t.message,n.stack=t.stack,n}static isErrorNoTelemetry(e){return e.name===`CodeExpectedError`}},y=class e extends Error{constructor(t){super(t||`An unexpected bug occurred.`),Object.setPrototypeOf(this,e.prototype)}};function ue(e,t){if(!e)throw Error(t?`Assertion failed (${t})`:`Assertion Failed`)}function de(e,t=`Unreachable`){throw Error(t)}function fe(e,t=`unexpected state`){if(!e)throw typeof t==`string`?new y(`Assertion Failed: ${t}`):t}function pe(e,t=`Soft Assertion Failed`){e||p(new y(t))}function me(e){e()||(e(),p(new y(`Assertion Failed`)))}function he(e,t){let n=0;for(;n<e.length-1;){let r=e[n],i=e[n+1];if(!t(r,i))return!1;n++}return!0}function ge(e){return typeof e==`string`}function _e(e){return ve(e,ge)}function ve(e,t){return Array.isArray(e)&&e.every(t)}function ye(e){return typeof e==`object`&&!!e&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}function be(e){let t=Object.getPrototypeOf(Uint8Array);return typeof e==`object`&&e instanceof t}function xe(e){return typeof e==`number`&&!isNaN(e)}function Se(e){return!!e&&typeof e[Symbol.iterator]==`function`}function Ce(e){return e===!0||e===!1}function we(e){return e===void 0}function Te(e){return!Ee(e)}function Ee(e){return we(e)||e===null}function De(e,t){if(!e)throw Error(t?`Unexpected type, expected '${t}'`:`Unexpected type`)}function Oe(e){return fe(e!=null,"Argument is `undefined` or `null`."),e}function ke(...e){let t=[];for(let n=0;n<e.length;n++){let r=e[n];if(Ee(r))throw Error(`Assertion Failed: argument at index ${n} is undefined or null`);t.push(r)}return t}var Ae=Object.prototype.hasOwnProperty;function je(e){if(!ye(e))return!1;for(let t in e)if(Ae.call(e,t))return!1;return!0}function Me(e){return typeof e==`function`}function Ne(...e){return e.length>0&&e.every(Me)}function Pe(e,t){let n=Math.min(e.length,t.length);for(let r=0;r<n;r++)Fe(e[r],t[r])}function Fe(e,t){if(ge(t)){if(typeof e!==t)throw Error(`argument does not match constraint: typeof ${t}`)}else if(Me(t)){try{if(e instanceof t)return}catch{}if(!Ee(e)&&e.constructor===t||t.length===1&&t.call(void 0,e)===!0)return;throw Error(`argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true`)}}function Ie(e){return e}function Le(e,t){for(let n in t)if(!(n in e))return!1;return!0}var Re=Object.create(null);function b(e,t){if(ge(t)){let n=Re[t];if(n===void 0)throw Error(`${e} references an unknown codicon: ${t}`);t=n}return Re[e]=t,{id:e}}function ze(){return Re}var Be={add:b(`add`,6e4),plus:b(`plus`,6e4),gistNew:b(`gist-new`,6e4),repoCreate:b(`repo-create`,6e4),lightbulb:b(`lightbulb`,60001),lightBulb:b(`light-bulb`,60001),repo:b(`repo`,60002),repoDelete:b(`repo-delete`,60002),gistFork:b(`gist-fork`,60003),repoForked:b(`repo-forked`,60003),gitPullRequest:b(`git-pull-request`,60004),gitPullRequestAbandoned:b(`git-pull-request-abandoned`,60004),recordKeys:b(`record-keys`,60005),keyboard:b(`keyboard`,60005),tag:b(`tag`,60006),gitPullRequestLabel:b(`git-pull-request-label`,60006),tagAdd:b(`tag-add`,60006),tagRemove:b(`tag-remove`,60006),person:b(`person`,60007),personFollow:b(`person-follow`,60007),personOutline:b(`person-outline`,60007),personFilled:b(`person-filled`,60007),sourceControl:b(`source-control`,60008),mirror:b(`mirror`,60009),mirrorPublic:b(`mirror-public`,60009),star:b(`star`,60010),starAdd:b(`star-add`,60010),starDelete:b(`star-delete`,60010),starEmpty:b(`star-empty`,60010),comment:b(`comment`,60011),commentAdd:b(`comment-add`,60011),alert:b(`alert`,60012),warning:b(`warning`,60012),search:b(`search`,60013),searchSave:b(`search-save`,60013),logOut:b(`log-out`,60014),signOut:b(`sign-out`,60014),logIn:b(`log-in`,60015),signIn:b(`sign-in`,60015),eye:b(`eye`,60016),eyeUnwatch:b(`eye-unwatch`,60016),eyeWatch:b(`eye-watch`,60016),circleFilled:b(`circle-filled`,60017),primitiveDot:b(`primitive-dot`,60017),closeDirty:b(`close-dirty`,60017),debugBreakpoint:b(`debug-breakpoint`,60017),debugBreakpointDisabled:b(`debug-breakpoint-disabled`,60017),debugHint:b(`debug-hint`,60017),terminalDecorationSuccess:b(`terminal-decoration-success`,60017),primitiveSquare:b(`primitive-square`,60018),edit:b(`edit`,60019),pencil:b(`pencil`,60019),info:b(`info`,60020),issueOpened:b(`issue-opened`,60020),gistPrivate:b(`gist-private`,60021),gitForkPrivate:b(`git-fork-private`,60021),lock:b(`lock`,60021),mirrorPrivate:b(`mirror-private`,60021),close:b(`close`,60022),removeClose:b(`remove-close`,60022),x:b(`x`,60022),repoSync:b(`repo-sync`,60023),sync:b(`sync`,60023),clone:b(`clone`,60024),desktopDownload:b(`desktop-download`,60024),beaker:b(`beaker`,60025),microscope:b(`microscope`,60025),vm:b(`vm`,60026),deviceDesktop:b(`device-desktop`,60026),file:b(`file`,60027),more:b(`more`,60028),ellipsis:b(`ellipsis`,60028),kebabHorizontal:b(`kebab-horizontal`,60028),mailReply:b(`mail-reply`,60029),reply:b(`reply`,60029),organization:b(`organization`,60030),organizationFilled:b(`organization-filled`,60030),organizationOutline:b(`organization-outline`,60030),newFile:b(`new-file`,60031),fileAdd:b(`file-add`,60031),newFolder:b(`new-folder`,60032),fileDirectoryCreate:b(`file-directory-create`,60032),trash:b(`trash`,60033),trashcan:b(`trashcan`,60033),history:b(`history`,60034),clock:b(`clock`,60034),folder:b(`folder`,60035),fileDirectory:b(`file-directory`,60035),symbolFolder:b(`symbol-folder`,60035),logoGithub:b(`logo-github`,60036),markGithub:b(`mark-github`,60036),github:b(`github`,60036),terminal:b(`terminal`,60037),console:b(`console`,60037),repl:b(`repl`,60037),zap:b(`zap`,60038),symbolEvent:b(`symbol-event`,60038),error:b(`error`,60039),stop:b(`stop`,60039),variable:b(`variable`,60040),symbolVariable:b(`symbol-variable`,60040),array:b(`array`,60042),symbolArray:b(`symbol-array`,60042),symbolModule:b(`symbol-module`,60043),symbolPackage:b(`symbol-package`,60043),symbolNamespace:b(`symbol-namespace`,60043),symbolObject:b(`symbol-object`,60043),symbolMethod:b(`symbol-method`,60044),symbolFunction:b(`symbol-function`,60044),symbolConstructor:b(`symbol-constructor`,60044),symbolBoolean:b(`symbol-boolean`,60047),symbolNull:b(`symbol-null`,60047),symbolNumeric:b(`symbol-numeric`,60048),symbolNumber:b(`symbol-number`,60048),symbolStructure:b(`symbol-structure`,60049),symbolStruct:b(`symbol-struct`,60049),symbolParameter:b(`symbol-parameter`,60050),symbolTypeParameter:b(`symbol-type-parameter`,60050),symbolKey:b(`symbol-key`,60051),symbolText:b(`symbol-text`,60051),symbolReference:b(`symbol-reference`,60052),goToFile:b(`go-to-file`,60052),symbolEnum:b(`symbol-enum`,60053),symbolValue:b(`symbol-value`,60053),symbolRuler:b(`symbol-ruler`,60054),symbolUnit:b(`symbol-unit`,60054),activateBreakpoints:b(`activate-breakpoints`,60055),archive:b(`archive`,60056),arrowBoth:b(`arrow-both`,60057),arrowDown:b(`arrow-down`,60058),arrowLeft:b(`arrow-left`,60059),arrowRight:b(`arrow-right`,60060),arrowSmallDown:b(`arrow-small-down`,60061),arrowSmallLeft:b(`arrow-small-left`,60062),arrowSmallRight:b(`arrow-small-right`,60063),arrowSmallUp:b(`arrow-small-up`,60064),arrowUp:b(`arrow-up`,60065),bell:b(`bell`,60066),bold:b(`bold`,60067),book:b(`book`,60068),bookmark:b(`bookmark`,60069),debugBreakpointConditionalUnverified:b(`debug-breakpoint-conditional-unverified`,60070),debugBreakpointConditional:b(`debug-breakpoint-conditional`,60071),debugBreakpointConditionalDisabled:b(`debug-breakpoint-conditional-disabled`,60071),debugBreakpointDataUnverified:b(`debug-breakpoint-data-unverified`,60072),debugBreakpointData:b(`debug-breakpoint-data`,60073),debugBreakpointDataDisabled:b(`debug-breakpoint-data-disabled`,60073),debugBreakpointLogUnverified:b(`debug-breakpoint-log-unverified`,60074),debugBreakpointLog:b(`debug-breakpoint-log`,60075),debugBreakpointLogDisabled:b(`debug-breakpoint-log-disabled`,60075),briefcase:b(`briefcase`,60076),broadcast:b(`broadcast`,60077),browser:b(`browser`,60078),bug:b(`bug`,60079),calendar:b(`calendar`,60080),caseSensitive:b(`case-sensitive`,60081),check:b(`check`,60082),checklist:b(`checklist`,60083),chevronDown:b(`chevron-down`,60084),chevronLeft:b(`chevron-left`,60085),chevronRight:b(`chevron-right`,60086),chevronUp:b(`chevron-up`,60087),chromeClose:b(`chrome-close`,60088),chromeMaximize:b(`chrome-maximize`,60089),chromeMinimize:b(`chrome-minimize`,60090),chromeRestore:b(`chrome-restore`,60091),circleOutline:b(`circle-outline`,60092),circle:b(`circle`,60092),debugBreakpointUnverified:b(`debug-breakpoint-unverified`,60092),terminalDecorationIncomplete:b(`terminal-decoration-incomplete`,60092),circleSlash:b(`circle-slash`,60093),circuitBoard:b(`circuit-board`,60094),clearAll:b(`clear-all`,60095),clippy:b(`clippy`,60096),closeAll:b(`close-all`,60097),cloudDownload:b(`cloud-download`,60098),cloudUpload:b(`cloud-upload`,60099),code:b(`code`,60100),collapseAll:b(`collapse-all`,60101),colorMode:b(`color-mode`,60102),commentDiscussion:b(`comment-discussion`,60103),creditCard:b(`credit-card`,60105),dash:b(`dash`,60108),dashboard:b(`dashboard`,60109),database:b(`database`,60110),debugContinue:b(`debug-continue`,60111),debugDisconnect:b(`debug-disconnect`,60112),debugPause:b(`debug-pause`,60113),debugRestart:b(`debug-restart`,60114),debugStart:b(`debug-start`,60115),debugStepInto:b(`debug-step-into`,60116),debugStepOut:b(`debug-step-out`,60117),debugStepOver:b(`debug-step-over`,60118),debugStop:b(`debug-stop`,60119),debug:b(`debug`,60120),deviceCameraVideo:b(`device-camera-video`,60121),deviceCamera:b(`device-camera`,60122),deviceMobile:b(`device-mobile`,60123),diffAdded:b(`diff-added`,60124),diffIgnored:b(`diff-ignored`,60125),diffModified:b(`diff-modified`,60126),diffRemoved:b(`diff-removed`,60127),diffRenamed:b(`diff-renamed`,60128),diff:b(`diff`,60129),diffSidebyside:b(`diff-sidebyside`,60129),discard:b(`discard`,60130),editorLayout:b(`editor-layout`,60131),emptyWindow:b(`empty-window`,60132),exclude:b(`exclude`,60133),extensions:b(`extensions`,60134),eyeClosed:b(`eye-closed`,60135),fileBinary:b(`file-binary`,60136),fileCode:b(`file-code`,60137),fileMedia:b(`file-media`,60138),filePdf:b(`file-pdf`,60139),fileSubmodule:b(`file-submodule`,60140),fileSymlinkDirectory:b(`file-symlink-directory`,60141),fileSymlinkFile:b(`file-symlink-file`,60142),fileZip:b(`file-zip`,60143),files:b(`files`,60144),filter:b(`filter`,60145),flame:b(`flame`,60146),foldDown:b(`fold-down`,60147),foldUp:b(`fold-up`,60148),fold:b(`fold`,60149),folderActive:b(`folder-active`,60150),folderOpened:b(`folder-opened`,60151),gear:b(`gear`,60152),gift:b(`gift`,60153),gistSecret:b(`gist-secret`,60154),gist:b(`gist`,60155),gitCommit:b(`git-commit`,60156),gitCompare:b(`git-compare`,60157),compareChanges:b(`compare-changes`,60157),gitMerge:b(`git-merge`,60158),githubAction:b(`github-action`,60159),githubAlt:b(`github-alt`,60160),globe:b(`globe`,60161),grabber:b(`grabber`,60162),graph:b(`graph`,60163),gripper:b(`gripper`,60164),heart:b(`heart`,60165),home:b(`home`,60166),horizontalRule:b(`horizontal-rule`,60167),hubot:b(`hubot`,60168),inbox:b(`inbox`,60169),issueReopened:b(`issue-reopened`,60171),issues:b(`issues`,60172),italic:b(`italic`,60173),jersey:b(`jersey`,60174),json:b(`json`,60175),bracket:b(`bracket`,60175),kebabVertical:b(`kebab-vertical`,60176),key:b(`key`,60177),law:b(`law`,60178),lightbulbAutofix:b(`lightbulb-autofix`,60179),linkExternal:b(`link-external`,60180),link:b(`link`,60181),listOrdered:b(`list-ordered`,60182),listUnordered:b(`list-unordered`,60183),liveShare:b(`live-share`,60184),loading:b(`loading`,60185),location:b(`location`,60186),mailRead:b(`mail-read`,60187),mail:b(`mail`,60188),markdown:b(`markdown`,60189),megaphone:b(`megaphone`,60190),mention:b(`mention`,60191),milestone:b(`milestone`,60192),gitPullRequestMilestone:b(`git-pull-request-milestone`,60192),mortarBoard:b(`mortar-board`,60193),move:b(`move`,60194),multipleWindows:b(`multiple-windows`,60195),mute:b(`mute`,60196),noNewline:b(`no-newline`,60197),note:b(`note`,60198),octoface:b(`octoface`,60199),openPreview:b(`open-preview`,60200),package:b(`package`,60201),paintcan:b(`paintcan`,60202),pin:b(`pin`,60203),play:b(`play`,60204),run:b(`run`,60204),plug:b(`plug`,60205),preserveCase:b(`preserve-case`,60206),preview:b(`preview`,60207),project:b(`project`,60208),pulse:b(`pulse`,60209),question:b(`question`,60210),quote:b(`quote`,60211),radioTower:b(`radio-tower`,60212),reactions:b(`reactions`,60213),references:b(`references`,60214),refresh:b(`refresh`,60215),regex:b(`regex`,60216),remoteExplorer:b(`remote-explorer`,60217),remote:b(`remote`,60218),remove:b(`remove`,60219),replaceAll:b(`replace-all`,60220),replace:b(`replace`,60221),repoClone:b(`repo-clone`,60222),repoForcePush:b(`repo-force-push`,60223),repoPull:b(`repo-pull`,60224),repoPush:b(`repo-push`,60225),report:b(`report`,60226),requestChanges:b(`request-changes`,60227),rocket:b(`rocket`,60228),rootFolderOpened:b(`root-folder-opened`,60229),rootFolder:b(`root-folder`,60230),rss:b(`rss`,60231),ruby:b(`ruby`,60232),saveAll:b(`save-all`,60233),saveAs:b(`save-as`,60234),save:b(`save`,60235),screenFull:b(`screen-full`,60236),screenNormal:b(`screen-normal`,60237),searchStop:b(`search-stop`,60238),server:b(`server`,60240),settingsGear:b(`settings-gear`,60241),settings:b(`settings`,60242),shield:b(`shield`,60243),smiley:b(`smiley`,60244),sortPrecedence:b(`sort-precedence`,60245),splitHorizontal:b(`split-horizontal`,60246),splitVertical:b(`split-vertical`,60247),squirrel:b(`squirrel`,60248),starFull:b(`star-full`,60249),starHalf:b(`star-half`,60250),symbolClass:b(`symbol-class`,60251),symbolColor:b(`symbol-color`,60252),symbolConstant:b(`symbol-constant`,60253),symbolEnumMember:b(`symbol-enum-member`,60254),symbolField:b(`symbol-field`,60255),symbolFile:b(`symbol-file`,60256),symbolInterface:b(`symbol-interface`,60257),symbolKeyword:b(`symbol-keyword`,60258),symbolMisc:b(`symbol-misc`,60259),symbolOperator:b(`symbol-operator`,60260),symbolProperty:b(`symbol-property`,60261),wrench:b(`wrench`,60261),wrenchSubaction:b(`wrench-subaction`,60261),symbolSnippet:b(`symbol-snippet`,60262),tasklist:b(`tasklist`,60263),telescope:b(`telescope`,60264),textSize:b(`text-size`,60265),threeBars:b(`three-bars`,60266),thumbsdown:b(`thumbsdown`,60267),thumbsup:b(`thumbsup`,60268),tools:b(`tools`,60269),triangleDown:b(`triangle-down`,60270),triangleLeft:b(`triangle-left`,60271),triangleRight:b(`triangle-right`,60272),triangleUp:b(`triangle-up`,60273),twitter:b(`twitter`,60274),unfold:b(`unfold`,60275),unlock:b(`unlock`,60276),unmute:b(`unmute`,60277),unverified:b(`unverified`,60278),verified:b(`verified`,60279),versions:b(`versions`,60280),vmActive:b(`vm-active`,60281),vmOutline:b(`vm-outline`,60282),vmRunning:b(`vm-running`,60283),watch:b(`watch`,60284),whitespace:b(`whitespace`,60285),wholeWord:b(`whole-word`,60286),window:b(`window`,60287),wordWrap:b(`word-wrap`,60288),zoomIn:b(`zoom-in`,60289),zoomOut:b(`zoom-out`,60290),listFilter:b(`list-filter`,60291),listFlat:b(`list-flat`,60292),listSelection:b(`list-selection`,60293),selection:b(`selection`,60293),listTree:b(`list-tree`,60294),debugBreakpointFunctionUnverified:b(`debug-breakpoint-function-unverified`,60295),debugBreakpointFunction:b(`debug-breakpoint-function`,60296),debugBreakpointFunctionDisabled:b(`debug-breakpoint-function-disabled`,60296),debugStackframeActive:b(`debug-stackframe-active`,60297),circleSmallFilled:b(`circle-small-filled`,60298),debugStackframeDot:b(`debug-stackframe-dot`,60298),terminalDecorationMark:b(`terminal-decoration-mark`,60298),debugStackframe:b(`debug-stackframe`,60299),debugStackframeFocused:b(`debug-stackframe-focused`,60299),debugBreakpointUnsupported:b(`debug-breakpoint-unsupported`,60300),symbolString:b(`symbol-string`,60301),debugReverseContinue:b(`debug-reverse-continue`,60302),debugStepBack:b(`debug-step-back`,60303),debugRestartFrame:b(`debug-restart-frame`,60304),debugAlt:b(`debug-alt`,60305),callIncoming:b(`call-incoming`,60306),callOutgoing:b(`call-outgoing`,60307),menu:b(`menu`,60308),expandAll:b(`expand-all`,60309),feedback:b(`feedback`,60310),gitPullRequestReviewer:b(`git-pull-request-reviewer`,60310),groupByRefType:b(`group-by-ref-type`,60311),ungroupByRefType:b(`ungroup-by-ref-type`,60312),account:b(`account`,60313),gitPullRequestAssignee:b(`git-pull-request-assignee`,60313),bellDot:b(`bell-dot`,60314),debugConsole:b(`debug-console`,60315),library:b(`library`,60316),output:b(`output`,60317),runAll:b(`run-all`,60318),syncIgnored:b(`sync-ignored`,60319),pinned:b(`pinned`,60320),githubInverted:b(`github-inverted`,60321),serverProcess:b(`server-process`,60322),serverEnvironment:b(`server-environment`,60323),pass:b(`pass`,60324),issueClosed:b(`issue-closed`,60324),stopCircle:b(`stop-circle`,60325),playCircle:b(`play-circle`,60326),record:b(`record`,60327),debugAltSmall:b(`debug-alt-small`,60328),vmConnect:b(`vm-connect`,60329),cloud:b(`cloud`,60330),merge:b(`merge`,60331),export:b(`export`,60332),graphLeft:b(`graph-left`,60333),magnet:b(`magnet`,60334),notebook:b(`notebook`,60335),redo:b(`redo`,60336),checkAll:b(`check-all`,60337),pinnedDirty:b(`pinned-dirty`,60338),passFilled:b(`pass-filled`,60339),circleLargeFilled:b(`circle-large-filled`,60340),circleLarge:b(`circle-large`,60341),circleLargeOutline:b(`circle-large-outline`,60341),combine:b(`combine`,60342),gather:b(`gather`,60342),table:b(`table`,60343),variableGroup:b(`variable-group`,60344),typeHierarchy:b(`type-hierarchy`,60345),typeHierarchySub:b(`type-hierarchy-sub`,60346),typeHierarchySuper:b(`type-hierarchy-super`,60347),gitPullRequestCreate:b(`git-pull-request-create`,60348),runAbove:b(`run-above`,60349),runBelow:b(`run-below`,60350),notebookTemplate:b(`notebook-template`,60351),debugRerun:b(`debug-rerun`,60352),workspaceTrusted:b(`workspace-trusted`,60353),workspaceUntrusted:b(`workspace-untrusted`,60354),workspaceUnknown:b(`workspace-unknown`,60355),terminalCmd:b(`terminal-cmd`,60356),terminalDebian:b(`terminal-debian`,60357),terminalLinux:b(`terminal-linux`,60358),terminalPowershell:b(`terminal-powershell`,60359),terminalTmux:b(`terminal-tmux`,60360),terminalUbuntu:b(`terminal-ubuntu`,60361),terminalBash:b(`terminal-bash`,60362),arrowSwap:b(`arrow-swap`,60363),copy:b(`copy`,60364),personAdd:b(`person-add`,60365),filterFilled:b(`filter-filled`,60366),wand:b(`wand`,60367),debugLineByLine:b(`debug-line-by-line`,60368),inspect:b(`inspect`,60369),layers:b(`layers`,60370),layersDot:b(`layers-dot`,60371),layersActive:b(`layers-active`,60372),compass:b(`compass`,60373),compassDot:b(`compass-dot`,60374),compassActive:b(`compass-active`,60375),azure:b(`azure`,60376),issueDraft:b(`issue-draft`,60377),gitPullRequestClosed:b(`git-pull-request-closed`,60378),gitPullRequestDraft:b(`git-pull-request-draft`,60379),debugAll:b(`debug-all`,60380),debugCoverage:b(`debug-coverage`,60381),runErrors:b(`run-errors`,60382),folderLibrary:b(`folder-library`,60383),debugContinueSmall:b(`debug-continue-small`,60384),beakerStop:b(`beaker-stop`,60385),graphLine:b(`graph-line`,60386),graphScatter:b(`graph-scatter`,60387),pieChart:b(`pie-chart`,60388),bracketDot:b(`bracket-dot`,60389),bracketError:b(`bracket-error`,60390),lockSmall:b(`lock-small`,60391),azureDevops:b(`azure-devops`,60392),verifiedFilled:b(`verified-filled`,60393),newline:b(`newline`,60394),layout:b(`layout`,60395),layoutActivitybarLeft:b(`layout-activitybar-left`,60396),layoutActivitybarRight:b(`layout-activitybar-right`,60397),layoutPanelLeft:b(`layout-panel-left`,60398),layoutPanelCenter:b(`layout-panel-center`,60399),layoutPanelJustify:b(`layout-panel-justify`,60400),layoutPanelRight:b(`layout-panel-right`,60401),layoutPanel:b(`layout-panel`,60402),layoutSidebarLeft:b(`layout-sidebar-left`,60403),layoutSidebarRight:b(`layout-sidebar-right`,60404),layoutStatusbar:b(`layout-statusbar`,60405),layoutMenubar:b(`layout-menubar`,60406),layoutCentered:b(`layout-centered`,60407),target:b(`target`,60408),indent:b(`indent`,60409),recordSmall:b(`record-small`,60410),errorSmall:b(`error-small`,60411),terminalDecorationError:b(`terminal-decoration-error`,60411),arrowCircleDown:b(`arrow-circle-down`,60412),arrowCircleLeft:b(`arrow-circle-left`,60413),arrowCircleRight:b(`arrow-circle-right`,60414),arrowCircleUp:b(`arrow-circle-up`,60415),layoutSidebarRightOff:b(`layout-sidebar-right-off`,60416),layoutPanelOff:b(`layout-panel-off`,60417),layoutSidebarLeftOff:b(`layout-sidebar-left-off`,60418),blank:b(`blank`,60419),heartFilled:b(`heart-filled`,60420),map:b(`map`,60421),mapHorizontal:b(`map-horizontal`,60421),foldHorizontal:b(`fold-horizontal`,60421),mapFilled:b(`map-filled`,60422),mapHorizontalFilled:b(`map-horizontal-filled`,60422),foldHorizontalFilled:b(`fold-horizontal-filled`,60422),circleSmall:b(`circle-small`,60423),bellSlash:b(`bell-slash`,60424),bellSlashDot:b(`bell-slash-dot`,60425),commentUnresolved:b(`comment-unresolved`,60426),gitPullRequestGoToChanges:b(`git-pull-request-go-to-changes`,60427),gitPullRequestNewChanges:b(`git-pull-request-new-changes`,60428),searchFuzzy:b(`search-fuzzy`,60429),commentDraft:b(`comment-draft`,60430),send:b(`send`,60431),sparkle:b(`sparkle`,60432),insert:b(`insert`,60433),mic:b(`mic`,60434),thumbsdownFilled:b(`thumbsdown-filled`,60435),thumbsupFilled:b(`thumbsup-filled`,60436),coffee:b(`coffee`,60437),snake:b(`snake`,60438),game:b(`game`,60439),vr:b(`vr`,60440),chip:b(`chip`,60441),piano:b(`piano`,60442),music:b(`music`,60443),micFilled:b(`mic-filled`,60444),repoFetch:b(`repo-fetch`,60445),copilot:b(`copilot`,60446),lightbulbSparkle:b(`lightbulb-sparkle`,60447),robot:b(`robot`,60448),sparkleFilled:b(`sparkle-filled`,60449),diffSingle:b(`diff-single`,60450),diffMultiple:b(`diff-multiple`,60451),surroundWith:b(`surround-with`,60452),share:b(`share`,60453),gitStash:b(`git-stash`,60454),gitStashApply:b(`git-stash-apply`,60455),gitStashPop:b(`git-stash-pop`,60456),vscode:b(`vscode`,60457),vscodeInsiders:b(`vscode-insiders`,60458),codeOss:b(`code-oss`,60459),runCoverage:b(`run-coverage`,60460),runAllCoverage:b(`run-all-coverage`,60461),coverage:b(`coverage`,60462),githubProject:b(`github-project`,60463),mapVertical:b(`map-vertical`,60464),foldVertical:b(`fold-vertical`,60464),mapVerticalFilled:b(`map-vertical-filled`,60465),foldVerticalFilled:b(`fold-vertical-filled`,60465),goToSearch:b(`go-to-search`,60466),percentage:b(`percentage`,60467),sortPercentage:b(`sort-percentage`,60467),attach:b(`attach`,60468),goToEditingSession:b(`go-to-editing-session`,60469),editSession:b(`edit-session`,60470),codeReview:b(`code-review`,60471),copilotWarning:b(`copilot-warning`,60472),python:b(`python`,60473),copilotLarge:b(`copilot-large`,60474),copilotWarningLarge:b(`copilot-warning-large`,60475),keyboardTab:b(`keyboard-tab`,60476),copilotBlocked:b(`copilot-blocked`,60477),copilotNotConnected:b(`copilot-not-connected`,60478),flag:b(`flag`,60479),lightbulbEmpty:b(`lightbulb-empty`,60480),symbolMethodArrow:b(`symbol-method-arrow`,60481),copilotUnavailable:b(`copilot-unavailable`,60482),repoPinned:b(`repo-pinned`,60483),keyboardTabAbove:b(`keyboard-tab-above`,60484),keyboardTabBelow:b(`keyboard-tab-below`,60485),gitPullRequestDone:b(`git-pull-request-done`,60486),mcp:b(`mcp`,60487),extensionsLarge:b(`extensions-large`,60488),layoutPanelDock:b(`layout-panel-dock`,60489),layoutSidebarLeftDock:b(`layout-sidebar-left-dock`,60490),layoutSidebarRightDock:b(`layout-sidebar-right-dock`,60491),copilotInProgress:b(`copilot-in-progress`,60492),copilotError:b(`copilot-error`,60493),copilotSuccess:b(`copilot-success`,60494),chatSparkle:b(`chat-sparkle`,60495),searchSparkle:b(`search-sparkle`,60496),editSparkle:b(`edit-sparkle`,60497),copilotSnooze:b(`copilot-snooze`,60498),sendToRemoteAgent:b(`send-to-remote-agent`,60499),commentDiscussionSparkle:b(`comment-discussion-sparkle`,60500),chatSparkleWarning:b(`chat-sparkle-warning`,60501),chatSparkleError:b(`chat-sparkle-error`,60502),collection:b(`collection`,60503),newCollection:b(`new-collection`,60504),thinking:b(`thinking`,60505),build:b(`build`,60506),commentDiscussionQuote:b(`comment-discussion-quote`,60507),cursor:b(`cursor`,60508),eraser:b(`eraser`,60509),fileText:b(`file-text`,60510),quotes:b(`quotes`,60512),rename:b(`rename`,60513),runWithDeps:b(`run-with-deps`,60514),debugConnected:b(`debug-connected`,60515),strikethrough:b(`strikethrough`,60516),openInProduct:b(`open-in-product`,60517),indexZero:b(`index-zero`,60518),agent:b(`agent`,60519),editCode:b(`edit-code`,60520),repoSelected:b(`repo-selected`,60521),skip:b(`skip`,60522),mergeInto:b(`merge-into`,60523),gitBranchChanges:b(`git-branch-changes`,60524),gitBranchStagedChanges:b(`git-branch-staged-changes`,60525),gitBranchConflicts:b(`git-branch-conflicts`,60526),gitBranch:b(`git-branch`,60527),gitBranchCreate:b(`git-branch-create`,60527),gitBranchDelete:b(`git-branch-delete`,60527),searchLarge:b(`search-large`,60528),terminalGitBash:b(`terminal-git-bash`,60529),windowActive:b(`window-active`,60530),forward:b(`forward`,60531),download:b(`download`,60532),clockface:b(`clockface`,60533),unarchive:b(`unarchive`,60534),sessionInProgress:b(`session-in-progress`,60535),collectionSmall:b(`collection-small`,60536),vmSmall:b(`vm-small`,60537),cloudSmall:b(`cloud-small`,60538),addSmall:b(`add-small`,60539),removeSmall:b(`remove-small`,60540),worktreeSmall:b(`worktree-small`,60541),worktree:b(`worktree`,60542),screenCut:b(`screen-cut`,60543),ask:b(`ask`,60544),openai:b(`openai`,60545),claude:b(`claude`,60546)};function Ve(){return Object.values(x)}var He={dialogError:b(`dialog-error`,`error`),dialogWarning:b(`dialog-warning`,`warning`),dialogInfo:b(`dialog-info`,`info`),dialogClose:b(`dialog-close`,`close`),treeItemExpanded:b(`tree-item-expanded`,`chevron-down`),treeFilterOnTypeOn:b(`tree-filter-on-type-on`,`list-filter`),treeFilterOnTypeOff:b(`tree-filter-on-type-off`,`list-selection`),treeFilterClear:b(`tree-filter-clear`,`close`),treeItemLoading:b(`tree-item-loading`,`loading`),menuSelection:b(`menu-selection`,`check`),menuSubmenu:b(`menu-submenu`,`chevron-right`),menuBarMore:b(`menubar-more`,`more`),scrollbarButtonLeft:b(`scrollbar-button-left`,`triangle-left`),scrollbarButtonRight:b(`scrollbar-button-right`,`triangle-right`),scrollbarButtonUp:b(`scrollbar-button-up`,`triangle-up`),scrollbarButtonDown:b(`scrollbar-button-down`,`triangle-down`),toolBarMore:b(`toolbar-more`,`more`),quickInputBack:b(`quick-input-back`,`arrow-left`),dropDownButton:b(`drop-down-button`,60084),symbolCustomColor:b(`symbol-customcolor`,60252),exportIcon:b(`export`,60332),workspaceUnspecified:b(`workspace-unspecified`,60355),newLine:b(`newline`,60394),thumbsDownFilled:b(`thumbsdown-filled`,60435),thumbsUpFilled:b(`thumbsup-filled`,60436),gitFetch:b(`git-fetch`,60445),lightbulbSparkleAutofix:b(`lightbulb-sparkle-autofix`,60447),debugBreakpointPending:b(`debug-breakpoint-pending`,60377)},x={...Be,...He},Ue;function We(e,t){let n=Object.create(null);for(let r of e){let e=t(r),i=n[e];i||=n[e]=[],i.push(r)}return n}function Ge(e,t){let n=new Map;for(let r of e){let e=t(r),i=n.get(e);i||(i=[],n.set(e,i)),i.push(r)}return n}function Ke(e,t){let n=[],r=[];for(let r of e)t.has(r)||n.push(r);for(let n of t)e.has(n)||r.push(n);return{removed:n,added:r}}function qe(e,t){let n=[],r=[];for(let[r,i]of e)t.has(r)||n.push(i);for(let[n,i]of t)e.has(n)||r.push(i);return{removed:n,added:r}}function Je(e,t){let n=new Set;for(let r of t)e.has(r)&&n.add(r);return n}var Ye=class{static#e=Ue=Symbol.toStringTag;constructor(e,t){this.toKey=t,this._map=new Map,this[Ue]=`SetWithKey`;for(let t of e)this.add(t)}get size(){return this._map.size}add(e){let t=this.toKey(e);return this._map.set(t,e),this}delete(e){return this._map.delete(this.toKey(e))}has(e){return this._map.has(this.toKey(e))}*entries(){for(let e of this._map.values())yield[e,e]}keys(){return this.values()}*values(){for(let e of this._map.values())yield e}clear(){this._map.clear()}forEach(e,t){this._map.forEach(n=>e.call(t,n,n,this))}[Symbol.iterator](){return this.values()}};function Xe(e,t){let n=this,r=!1,i;return function(){if(r)return i;if(r=!0,t)try{i=e.apply(n,arguments)}finally{t()}else i=e.apply(n,arguments);return i}}function Ze(e,t,n=e.length-1){let r=Qe(e,t,n);if(r!==-1)return e[r]}function Qe(e,t,n=e.length-1){for(let r=n;r>=0;r--){let n=e[r];if(t(n,r))return r}return-1}function $e(e,t){let n=et(e,t);return n===-1?void 0:e[n]}function et(e,t,n=0,r=e.length){let i=n,a=r;for(;i<a;){let n=Math.floor((i+a)/2);t(e[n])?i=n+1:a=n}return i-1}function tt(e,t){let n=nt(e,t);return n===e.length?void 0:e[n]}function nt(e,t,n=0,r=e.length){let i=n,a=r;for(;i<a;){let n=Math.floor((i+a)/2);t(e[n])?a=n:i=n+1}return i}var rt=class e{static#e=this.assertInvariants=!1;constructor(e){this._array=e,this._findLastMonotonousLastIdx=0}findLastMonotonous(t){if(e.assertInvariants){if(this._prevFindLastPredicate){for(let e of this._array)if(this._prevFindLastPredicate(e)&&!t(e))throw Error(`MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.`)}this._prevFindLastPredicate=t}let n=et(this._array,t,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=n+1,n===-1?void 0:this._array[n]}};function it(e,t){if(e.length===0)return;let n=e[0];for(let r=1;r<e.length;r++){let i=e[r];t(i,n)>0&&(n=i)}return n}function at(e,t){if(e.length===0)return;let n=e[0];for(let r=1;r<e.length;r++){let i=e[r];t(i,n)>=0&&(n=i)}return n}function ot(e,t){return it(e,(e,n)=>-t(e,n))}function st(e,t){if(e.length===0)return-1;let n=0;for(let r=1;r<e.length;r++){let i=e[r];t(i,e[n])>0&&(n=r)}return n}function ct(e,t){for(let n of e){let e=t(n);if(e!==void 0)return e}}function lt(e){if(e.length===0)throw Error(`Invalid tail call`);return[e.slice(0,e.length-1),e[e.length-1]]}function ut(e,t,n=(e,t)=>e===t){if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(let r=0,i=e.length;r<i;r++)if(!n(e[r],t[r]))return!1;return!0}function dt(e,t){let n=e.length-1;t<n&&(e[t]=e[n]),e.pop()}function ft(e,t,n){return pt(e.length,r=>n(e[r],t))}function pt(e,t){let n=0,r=e-1;for(;n<=r;){let e=(n+r)/2|0,i=t(e);if(i<0)n=e+1;else if(i>0)r=e-1;else return e}return-(n+1)}function mt(e,t,n){if(e|=0,e>=t.length)throw TypeError(`invalid index`);let r=t[Math.floor(t.length*Math.random())],i=[],a=[],o=[];for(let e of t){let t=n(e,r);t<0?i.push(e):t>0?a.push(e):o.push(e)}return e<i.length?mt(e,i,n):e<i.length+o.length?o[0]:mt(e-(i.length+o.length),a,n)}function ht(e,t){let n=[],r;for(let i of e.slice(0).sort(t))!r||t(r[0],i)!==0?(r=[i],n.push(r)):r.push(i);return n}function*gt(e,t){let n,r;for(let i of e)r!==void 0&&t(r,i)?n.push(i):(n&&(yield n),n=[i]),r=i;n&&(yield n)}function _t(e,t){for(let n=0;n<=e.length;n++)t(n===0?void 0:e[n-1],n===e.length?void 0:e[n])}function vt(e,t){for(let n=0;n<e.length;n++)t(n===0?void 0:e[n-1],e[n],n+1===e.length?void 0:e[n+1])}function yt(...e){return[].concat(...e)}function bt(e,t,n){let r=[];function i(e,t,n){if(t===0&&n.length===0)return;let i=r[r.length-1];i&&i.start+i.deleteCount===e?(i.deleteCount+=t,i.toInsert.push(...n)):r.push({start:e,deleteCount:t,toInsert:n})}let a=0,o=0;for(;;){if(a===e.length){i(a,0,t.slice(o));break}if(o===t.length){i(a,e.length-a,[]);break}let r=e[a],s=t[o],c=n(r,s);c===0?(a+=1,o+=1):c<0?(i(a,1,[]),a+=1):c>0&&(i(a,0,[s]),o+=1)}return r}function xt(e,t,n){let r=bt(e,t,n),i=[],a=[];for(let t of r)i.push(...e.slice(t.start,t.start+t.deleteCount)),a.push(...t.toInsert);return{removed:i,added:a}}function St(e,t,n){if(n===0)return[];let r=e.slice(0,n).sort(t);return Ct(e,t,r,n,e.length),r}function Ct(e,t,n,r,i){for(let a=n.length;r<i;r++){let i=e[r];if(t(i,n[a-1])<0){n.pop();let e=nt(n,e=>t(i,e)<0);n.splice(e,0,i)}}}function wt(e){return e.filter(e=>!!e)}function Tt(e){let t=0;for(let n=0;n<e.length;n++)e[n]&&(e[t]=e[n],t+=1);e.length=t}function Et(e,t,n){e.splice(n,0,e.splice(t,1)[0])}function Dt(e){return!Array.isArray(e)||e.length===0}function Ot(e){return Array.isArray(e)&&e.length>0}function kt(e,t=e=>e){let n=new Set;return e.filter(e=>{let r=t(e);return n.has(r)?!1:(n.add(r),!0)})}function At(e){let t=new Set;return n=>{let r=e(n);return t.has(r)?!1:(t.add(r),!0)}}function jt(e,t,n=(e,t)=>e===t){let r=0;for(let i=0,a=Math.min(e.length,t.length);i<a&&n(e[i],t[i]);i++)r++;return r}function Mt(e,t){let n=typeof t==`number`?e:0;typeof t==`number`?n=e:(n=0,t=e);let r=[];if(n<=t)for(let e=n;e<t;e++)r.push(e);else for(let e=n;e>t;e--)r.push(e);return r}function Nt(e,t,n){return e.reduce((e,r)=>(e[t(r)]=n?n(r):r,e),Object.create(null))}function Pt(e,t){return e.push(t),()=>Ft(e,t)}function Ft(e,t){let n=e.indexOf(t);if(n>-1)return e.splice(n,1),t}function It(e,t,n){let r=e.slice(0,t),i=e.slice(t);return r.concat(n,i)}function Lt(e,t){let n;if(typeof t==`number`){let e=t;n=()=>{let t=Math.sin(e++)*179426549;return t-Math.floor(t)}}else n=Math.random;for(let t=e.length-1;t>0;--t){let r=Math.floor(n()*(t+1)),i=e[t];e[t]=e[r],e[r]=i}}function Rt(e,t){let n=e.indexOf(t);n>-1&&(e.splice(n,1),e.unshift(t))}function zt(e,t){let n=e.indexOf(t);n>-1&&(e.splice(n,1),e.push(t))}function Bt(e,t){for(let n of t)e.push(n)}function eee(e,t){return Array.isArray(e)?e.map(t):t(e)}function Vt(e,t){let n=[];for(let r of e){let e=t(r);e!==void 0&&n.push(e)}return n}function Ht(e){return Array.isArray(e)?e:[e]}function Ut(e,t,n){let r=Gt(e,t),i=e.length,a=n.length;e.length=i+a;for(let t=i-1;t>=r;t--)e[t+a]=e[t];for(let t=0;t<a;t++)e[t+r]=n[t]}function Wt(e,t,n,r){let i=Gt(e,t),a=e.splice(i,n);return a===void 0&&(a=[]),Ut(e,i,r),a}function Gt(e,t){return t<0?Math.max(t+e.length,0):Math.min(t,e.length)}var Kt;(function(e){function t(e){return e<0}e.isLessThan=t;function n(e){return e<=0}e.isLessThanOrEqual=n;function r(e){return e>0}e.isGreaterThan=r;function i(e){return e===0}e.isNeitherLessOrGreaterThan=i,e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0})(Kt||={});function qt(e,t){return(n,r)=>t(e(n),e(r))}function Jt(...e){return(t,n)=>{for(let r of e){let e=r(t,n);if(!Kt.isNeitherLessOrGreaterThan(e))return e}return Kt.neitherLessOrGreaterThan}}var Yt=(e,t)=>e-t,Xt=(e,t)=>Yt(e?1:0,t?1:0);function Zt(e){return(t,n)=>-e(t,n)}function Qt(e){return(t,n)=>t===void 0?n===void 0?Kt.neitherLessOrGreaterThan:Kt.lessThan:n===void 0?Kt.greaterThan:e(t,n)}var $t=class{constructor(e){this.firstIdx=0,this.items=e,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;let n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;let n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}peekLast(){if(this.length!==0)return this.items[this.lastIdx]}dequeue(){let e=this.items[this.firstIdx];return this.firstIdx++,e}removeLast(){let e=this.items[this.lastIdx];return this.lastIdx--,e}takeCount(e){let t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}},en=class e{static#e=this.empty=new e(e=>{});constructor(e){this.iterate=e}forEach(e){this.iterate(t=>(e(t),!0))}toArray(){let e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(t){return new e(e=>this.iterate(n=>t(n)?e(n):!0))}map(t){return new e(e=>this.iterate(n=>e(t(n))))}some(e){let t=!1;return this.iterate(n=>(t=e(n),!t)),t}findFirst(e){let t;return this.iterate(n=>e(n)?(t=n,!1):!0),t}findLast(e){let t;return this.iterate(n=>(e(n)&&(t=n),!0)),t}findLastMaxBy(e){let t,n=!0;return this.iterate(r=>((n||Kt.isGreaterThan(e(r,t)))&&(n=!1,t=r),!0)),t}},tn=class e{constructor(e){this._indexMap=e}static createSortPermutation(t,n){return new e(Array.from(t.keys()).sort((e,r)=>n(t[e],t[r])))}apply(e){return e.map((t,n)=>e[this._indexMap[n]])}inverse(){let t=this._indexMap.slice();for(let e=0;e<this._indexMap.length;e++)t[this._indexMap[e]]=e;return new e(t)}};function nn(e){return e.reduce((e,t)=>e+t,0)}function rn(e,t){return e.reduce((e,n)=>e+t(n),0)}var an,on,sn;function cn(e,t,n){let r=e.get(t);return r===void 0&&(r=n,e.set(t,r)),r}var ln=class{constructor(e,t){this.uri=e,this.value=t}};function un(e){return Array.isArray(e)}var dn=class e{static#e=this.defaultToKey=e=>e.toString();constructor(t,n){if(this[an]=`ResourceMap`,t instanceof e)this.map=new Map(t.map),this.toKey=n??e.defaultToKey;else if(un(t)){this.map=new Map,this.toKey=n??e.defaultToKey;for(let[e,n]of t)this.set(e,n)}else this.map=new Map,this.toKey=t??e.defaultToKey}set(e,t){return this.map.set(this.toKey(e),new ln(e,t)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){t!==void 0&&(e=e.bind(t));for(let[t,n]of this.map)e(n.value,n.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(an=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}},fn=class{constructor(e,t){this[on]=`ResourceSet`,!e||typeof e==`function`?this._map=new dn(e):(this._map=new dn(t),e.forEach(this.add,this))}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,t){this._map.forEach((n,r)=>e.call(t,r,r,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(on=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}},pn;(function(e){e[e.None=0]=`None`,e[e.AsOld=1]=`AsOld`,e[e.AsNew=2]=`AsNew`})(pn||={});var mn=class{constructor(){this[sn]=`LinkedMap`,this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=pn.None){let n=this._map.get(e);if(n)return t!==pn.None&&this.touch(n,t),n.value}set(e,t,n=pn.None){let r=this._map.get(e);if(r)r.value=t,n!==pn.None&&this.touch(r,n);else{switch(r={key:e,value:t,next:void 0,previous:void 0},n){case pn.None:this.addItemLast(r);break;case pn.AsOld:this.addItemFirst(r);break;case pn.AsNew:this.addItemLast(r);break;default:this.addItemLast(r);break}this._map.set(e,r),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw Error(`Invalid list`);let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let n=this._state,r=this._head;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this._state!==n)throw Error(`LinkedMap got modified during iteration.`);r=r.next}}keys(){let e=this,t=this._state,n=this._head,r={[Symbol.iterator](){return r},next(){if(e._state!==t)throw Error(`LinkedMap got modified during iteration.`);if(n){let e={value:n.key,done:!1};return n=n.next,e}else return{value:void 0,done:!0}}};return r}values(){let e=this,t=this._state,n=this._head,r={[Symbol.iterator](){return r},next(){if(e._state!==t)throw Error(`LinkedMap got modified during iteration.`);if(n){let e={value:n.value,done:!1};return n=n.next,e}else return{value:void 0,done:!0}}};return r}entries(){let e=this,t=this._state,n=this._head,r={[Symbol.iterator](){return r},next(){if(e._state!==t)throw Error(`LinkedMap got modified during iteration.`);if(n){let e={value:[n.key,n.value],done:!1};return n=n.next,e}else return{value:void 0,done:!0}}};return r}[(sn=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._tail,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.previous,n--;this._tail=t,this._size=n,t&&(t.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw Error(`Invalid list`);this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw Error(`Invalid list`);this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw Error(`Invalid list`);e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw Error(`Invalid list`);e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,n=e.previous;if(!t||!n)throw Error(`Invalid list`);t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw Error(`Invalid list`);if(!(t!==pn.AsOld&&t!==pn.AsNew)){if(t===pn.AsOld){if(e===this._head)return;let t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===pn.AsNew){if(e===this._tail)return;let t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(let[t,n]of e)this.set(t,n)}},hn=class extends mn{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=pn.AsNew){return super.get(e,t)}peek(e){return super.get(e,pn.None)}set(e,t){return super.set(e,t,pn.AsNew),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}},gn=class extends hn{constructor(e,t=1){super(e,t)}trim(e){this.trimOld(e)}set(e,t){return super.set(e,t),this.checkTrim(),this}},_n=class extends hn{constructor(e,t=1){super(e,t)}trim(e){this.trimNew(e)}set(e,t){return this._limit<=this.size&&!this.has(e)&&this.trim(Math.round(this._limit*this._ratio)-1),super.set(e,t),this}},vn=class{constructor(){this.map=new Map}add(e){return this.map.set(e,(this.map.get(e)||0)+1),this}delete(e){let t=this.map.get(e)||0;return t===0?!1:(t--,t===0?this.map.delete(e):this.map.set(e,t),!0)}has(e){return this.map.has(e)}},yn=class{constructor(e){if(this._m1=new Map,this._m2=new Map,e)for(let[t,n]of e)this.set(t,n)}clear(){this._m1.clear(),this._m2.clear()}set(e,t){this._m1.set(e,t),this._m2.set(t,e)}get(e){return this._m1.get(e)}getKey(e){return this._m2.get(e)}delete(e){let t=this._m1.get(e);return t===void 0?!1:(this._m1.delete(e),this._m2.delete(t),!0)}forEach(e,t){this._m1.forEach((n,r)=>{e.call(t,n,r,this)})}keys(){return this._m1.keys()}values(){return this._m1.values()}},bn=class{constructor(){this.map=new Map}add(e,t){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}delete(e,t){let n=this.map.get(e);n&&(n.delete(t),n.size===0&&this.map.delete(e))}forEach(e,t){let n=this.map.get(e);n&&n.forEach(t)}get(e){return this.map.get(e)||new Set}};function xn(e,t){if(e===t)return!0;if(e.size!==t.size)return!1;for(let[n,r]of e)if(!t.has(n)||t.get(n)!==r)return!1;for(let[n]of t)if(!e.has(n))return!1;return!0}var Sn=class{constructor(){this._data=new Map}set(e,...t){let n=this._data;for(let e=0;e<t.length-1;e++){let r=n.get(t[e]);r===void 0&&(r=new Map,n.set(t[e],r)),n=r}n.set(t[t.length-1],e)}get(...e){let t=this._data;for(let n=0;n<e.length-1;n++){let r=t.get(e[n]);if(r===void 0)return;t=r}return t.get(e[e.length-1])}clear(){this._data.clear()}*values(){function*e(t){for(let n of t.values())n instanceof Map?yield*e(n):yield n}yield*e(this._data)}toString(){let e=(t,n)=>{let r=``;for(let[i,a]of t)r+=`${`  `.repeat(n)}${i}: `,a instanceof Map?r+=`
`+e(a,n+1):r+=`${a}\n`;return r};return e(this._data,0)}},Cn;(function(e){function t(e){return!!e&&typeof e==`object`&&typeof e[Symbol.iterator]==`function`}e.is=t;let n=Object.freeze([]);function r(){return n}e.empty=r;function*i(e){yield e}e.single=i;function a(e){return t(e)?e:i(e)}e.wrap=a;function o(e){return e??n}e.from=o;function*s(e){for(let t=e.length-1;t>=0;t--)yield e[t]}e.reverse=s;function c(e){return!e||e[Symbol.iterator]().next().done===!0}e.isEmpty=c;function l(e){return e[Symbol.iterator]().next().value}e.first=l;function u(e,t){let n=0;for(let r of e)if(t(r,n++))return!0;return!1}e.some=u;function d(e,t){let n=0;for(let r of e)if(!t(r,n++))return!1;return!0}e.every=d;function f(e,t){for(let n of e)if(t(n))return n}e.find=f;function*p(e,t){for(let n of e)t(n)&&(yield n)}e.filter=p;function*m(e,t){let n=0;for(let r of e)yield t(r,n++)}e.map=m;function*h(e,t){let n=0;for(let r of e)yield*t(r,n++)}e.flatMap=h;function*g(...e){for(let t of e)Se(t)?yield*t:yield t}e.concat=g;function _(e,t,n){let r=n;for(let n of e)r=t(r,n);return r}e.reduce=_;function v(e){let t=0;for(let n of e)t++;return t}e.length=v;function*ee(e,t,n=e.length){for(t<-e.length&&(t=0),t<0&&(t+=e.length),n<0?n+=e.length:n>e.length&&(n=e.length);t<n;t++)yield e[t]}e.slice=ee;function te(t,n=1/0){let r=[];if(n===0)return[r,t];let i=t[Symbol.iterator]();for(let t=0;t<n;t++){let t=i.next();if(t.done)return[r,e.empty()];r.push(t.value)}return[r,{[Symbol.iterator](){return i}}]}e.consume=te;async function ne(e){let t=[];for await(let n of e)t.push(n);return t}e.asyncToArray=ne;async function re(e){let t=[];for await(let n of e)t=t.concat(n);return t}e.asyncToArrayFlat=re})(Cn||={});var wn=null,Tn=class e{constructor(){this.livingDisposables=new Map}static#e=this.idx=0;getDisposableData(t){let n=this.livingDisposables.get(t);return n||(n={parent:null,source:null,isSingleton:!1,value:t,idx:e.idx++},this.livingDisposables.set(t,n)),n}trackDisposable(e){let t=this.getDisposableData(e);t.source||=Error().stack}setParent(e,t){let n=this.getDisposableData(e);n.parent=t}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,t){let n=t.get(e);if(n)return n;let r=e.parent?this.getRootParent(this.getDisposableData(e.parent),t):e;return t.set(e,r),r}getTrackedDisposables(){let e=new Map;return[...this.livingDisposables.entries()].filter(([,t])=>t.source!==null&&!this.getRootParent(t,e).isSingleton).flatMap(([e])=>e)}computeLeakingDisposables(e=10,t){let n;if(t)n=t;else{let e=new Map,t=[...this.livingDisposables.values()].filter(t=>t.source!==null&&!this.getRootParent(t,e).isSingleton);if(t.length===0)return;let r=new Set(t.map(e=>e.value));if(n=t.filter(e=>!(e.parent&&r.has(e.parent))),n.length===0)throw Error(`There are cyclic diposable chains!`)}if(!n)return;function r(e){function t(e,t){for(;e.length>0&&t.some(t=>typeof t==`string`?t===e[0]:e[0].match(t));)e.shift()}let n=e.source.split(`
`).map(e=>e.trim().replace(`at `,``)).filter(e=>e!==``);return t(n,[`Error`,/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),n.reverse()}let i=new bn;for(let e of n){let t=r(e);for(let n=0;n<=t.length;n++)i.add(t.slice(0,n).join(`
`),e)}n.sort(qt(e=>e.idx,Yt));let a=``,o=0;for(let t of n.slice(0,e)){o++;let e=r(t),s=[];for(let t=0;t<e.length;t++){let a=e[t];a=`(shared with ${i.get(e.slice(0,t+1).join(`
`)).size}/${n.length} leaks) at ${a}`;let o=We([...i.get(e.slice(0,t).join(`
`))].map(e=>r(e)[t]),e=>e);delete o[e[t]];for(let[e,t]of Object.entries(o))t&&s.unshift(`    - stacktraces of ${t.length} other leaks continue with ${e}`);s.unshift(a)}a+=`\n\n\n==================== Leaking disposable ${o}/${n.length}: ${t.value.constructor.name} ====================\n${s.join(`
`)}\n============================================================\n\n`}return n.length>e&&(a+=`\n\n\n... and ${n.length-e} more leaking disposables\n\n`),{leaks:n,details:a}}};function En(e){wn=e}function Dn(e){return wn?.trackDisposable(e),e}function On(e){wn?.markAsDisposed(e)}function kn(e,t){wn?.setParent(e,t)}function An(e,t){if(wn)for(let n of e)wn.setParent(n,t)}function jn(e){return wn?.markAsSingleton(e),e}function Mn(e){return typeof e==`object`&&!!e&&typeof e.dispose==`function`&&e.dispose.length===0}function Nn(e){if(Cn.is(e)){let t=[];for(let n of e)if(n)try{n.dispose()}catch(e){t.push(e)}if(t.length===1)throw t[0];if(t.length>1)throw AggregateError(t,`Encountered errors while disposing of store`);return Array.isArray(e)?[]:e}else if(e)return e.dispose(),e}function Pn(e){for(let t of e)Mn(t)&&t.dispose();return[]}function Fn(...e){let t=S(()=>Nn(e));return An(e,t),t}var In=class{constructor(e){this._isDisposed=!1,this._fn=e,Dn(this)}dispose(){if(!this._isDisposed){if(!this._fn)throw Error(`Unbound disposable context: Need to use an arrow function to preserve the value of this`);this._isDisposed=!0,On(this),this._fn()}}};function S(e){return new In(e)}var C=class e{static#e=this.DISABLE_DISPOSED_WARNING=!1;constructor(){this._toDispose=new Set,this._isDisposed=!1,Dn(this)}dispose(){this._isDisposed||(On(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{Nn(this._toDispose)}finally{this._toDispose.clear()}}add(t){if(!t||t===w.None)return t;if(t===this)throw Error(`Cannot register a disposable on itself!`);return kn(t,this),this._isDisposed?e.DISABLE_DISPOSED_WARNING||console.warn(Error(`Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!`).stack):this._toDispose.add(t),t}delete(e){if(e){if(e===this)throw Error(`Cannot dispose a disposable on itself!`);this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.delete(e)&&kn(e,null)}assertNotDisposed(){this._isDisposed&&p(new y(`Object disposed`))}},w=class{static#e=this.None=Object.freeze({dispose(){}});constructor(){this._store=new C,Dn(this),kn(this._store,this)}dispose(){On(this),this._store.dispose()}_register(e){if(e===this)throw Error(`Cannot register a disposable on itself!`);return this._store.add(e)}},Ln=class{constructor(){this._isDisposed=!1,Dn(this)}get value(){return this._isDisposed?void 0:this._value}set value(e){this._isDisposed||e===this._value||(this._value?.dispose(),e&&kn(e,this),this._value=e)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,On(this),this._value?.dispose(),this._value=void 0}clearAndLeak(){let e=this._value;return this._value=void 0,e&&kn(e,null),e}},Rn=class{constructor(e){this._disposable=e,this._counter=1}acquire(){return this._counter++,this}release(){return--this._counter===0&&this._disposable.dispose(),this}},zn=class{constructor(){this.references=new Map}acquire(e,...t){let n=this.references.get(e);n||(n={counter:0,object:this.createReferencedObject(e,...t)},this.references.set(e,n));let{object:r}=n,i=Xe(()=>{--n.counter===0&&(this.destroyReferencedObject(e,n.object),this.references.delete(e))});return n.counter++,{object:r,dispose:i}}},Bn=class{constructor(e){this.referenceCollection=e}async acquire(e,...t){let n=this.referenceCollection.acquire(e,...t);try{return{object:await n.object,dispose:()=>n.dispose()}}catch(e){throw n.dispose(),e}}},Vn=class{constructor(e){this.object=e}dispose(){}},Hn=class{constructor(e=new Map){this._isDisposed=!1,this._store=e,Dn(this)}dispose(){On(this),this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{Nn(this._store.values())}finally{this._store.clear()}}has(e){return this._store.has(e)}get size(){return this._store.size}get(e){return this._store.get(e)}set(e,t,n=!1){this._isDisposed&&console.warn(Error(`Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!`).stack),n||this._store.get(e)?.dispose(),this._store.set(e,t),kn(t,this)}deleteAndDispose(e){this._store.get(e)?.dispose(),this._store.delete(e)}deleteAndLeak(e){let t=this._store.get(e);return t&&kn(t,null),this._store.delete(e),t}keys(){return this._store.keys()}values(){return this._store.values()}[Symbol.iterator](){return this._store[Symbol.iterator]()}};function Un(e,t){let n=!1;return e.then(e=>{n||t(e)}),S(()=>{n=!0})}var Wn=class extends Hn{constructor(){super(new dn)}},Gn=class e{static#e=this.Undefined=new e(void 0);constructor(t){this.element=t,this.next=e.Undefined,this.prev=e.Undefined}},Kn=class{constructor(){this._first=Gn.Undefined,this._last=Gn.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Gn.Undefined}clear(){let e=this._first;for(;e!==Gn.Undefined;){let t=e.next;e.prev=Gn.Undefined,e.next=Gn.Undefined,e=t}this._first=Gn.Undefined,this._last=Gn.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){let n=new Gn(e);if(this._first===Gn.Undefined)this._first=n,this._last=n;else if(t){let e=this._last;this._last=n,n.prev=e,e.next=n}else{let e=this._first;this._first=n,n.next=e,e.prev=n}this._size+=1;let r=!1;return()=>{r||(r=!0,this._remove(n))}}shift(){if(this._first!==Gn.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Gn.Undefined){let e=this._last.element;return this._remove(this._last),e}}peek(){if(this._last!==Gn.Undefined)return this._last.element}_remove(e){if(e.prev!==Gn.Undefined&&e.next!==Gn.Undefined){let t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Gn.Undefined&&e.next===Gn.Undefined?(this._first=Gn.Undefined,this._last=Gn.Undefined):e.next===Gn.Undefined?(this._last=this._last.prev,this._last.next=Gn.Undefined):e.prev===Gn.Undefined&&(this._first=this._first.next,this._first.prev=Gn.Undefined);--this._size}*[Symbol.iterator](){let e=this._first;for(;e!==Gn.Undefined;)yield e.element,e=e.next}},qn=globalThis.performance.now.bind(globalThis.performance),Jn=class e{static create(t){return new e(t)}constructor(e){this._now=e===!1?Date.now:qn,this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime===-1?this._now()-this._startTime:this._stopTime-this._startTime}},T;(function(e){e.None=()=>w.None;function t(e,t,n){return f(e,()=>void 0,0,void 0,t??!0,void 0,n)}e.defer=t;function n(e){return(t,n=null,r)=>{let i=!1,a;return a=e(e=>{if(!i)return a?a.dispose():i=!0,t.call(n,e)},null,r),i&&a.dispose(),a}}e.once=n;function r(t,n){return e.once(e.filter(t,n))}e.onceIf=r;function i(e,t,n){return u((n,r=null,i)=>e(e=>n.call(r,t(e)),null,i),n)}e.map=i;function a(e,t,n){return u((n,r=null,i)=>e(e=>{t(e),n.call(r,e)},null,i),n)}e.forEach=a;function o(e,t,n){return u((n,r=null,i)=>e(e=>t(e)&&n.call(r,e),null,i),n)}e.filter=o;function s(e){return e}e.signal=s;function c(...e){return(t,n=null,r)=>d(Fn(...e.map(e=>e(e=>t.call(n,e)))),r)}e.any=c;function l(e,t,n,r){let a=n;return i(e,e=>(a=t(a,e),a),r)}e.reduce=l;function u(e,t){let n,r=new E({onWillAddFirstListener(){n=e(r.fire,r)},onDidRemoveLastListener(){n?.dispose()}});return t?.add(r),r.event}function d(e,t){return t instanceof Array?t.push(e):t&&t.add(e),e}function f(e,t,n=100,r=!1,i=!1,a,o){let s,c,l,u=0,d,f=new E({leakWarningThreshold:a,onWillAddFirstListener(){s=e(e=>{u++,c=t(c,e),r&&!l&&(f.fire(c),c=void 0),d=()=>{let e=c;c=void 0,l=void 0,(!r||u>1)&&f.fire(e),u=0},typeof n==`number`?(l&&clearTimeout(l),l=setTimeout(d,n)):l===void 0&&(l=null,queueMicrotask(d))})},onWillRemoveListener(){i&&u>0&&d?.()},onDidRemoveLastListener(){d=void 0,s.dispose()}});return o?.add(f),f.event}e.debounce=f;function p(t,n=0,r,i){return e.debounce(t,(e,t)=>e?(e.push(t),e):[t],n,void 0,r??!0,void 0,i)}e.accumulate=p;function m(e,t,n=100,r=!0,i=!0,a,o){let s,c,l,u=0,d=new E({leakWarningThreshold:a,onWillAddFirstListener(){s=e(e=>{u++,c=t(c,e),l===void 0&&(r&&(d.fire(c),c=void 0,u=0),typeof n==`number`?l=setTimeout(()=>{i&&u>0&&d.fire(c),c=void 0,l=void 0,u=0},n):(l=0,queueMicrotask(()=>{i&&u>0&&d.fire(c),c=void 0,l=void 0,u=0})))})},onDidRemoveLastListener(){s.dispose()}});return o?.add(d),d.event}e.throttle=m;function h(e,t=(e,t)=>e===t,n){let r=!0,i;return o(e,e=>{let n=r||!t(e,i);return r=!1,i=e,n},n)}e.latch=h;function g(t,n,r){return[e.filter(t,n,r),e.filter(t,e=>!n(e),r)]}e.split=g;function _(e,t=!1,n=[],r){let i=n.slice(),a=e(e=>{i?i.push(e):s.fire(e)});r&&r.add(a);let o=()=>{i?.forEach(e=>s.fire(e)),i=null},s=new E({onWillAddFirstListener(){a||(a=e(e=>s.fire(e)),r&&r.add(a))},onDidAddFirstListener(){i&&(t?setTimeout(o):o())},onDidRemoveLastListener(){a&&a.dispose(),a=null}});return r&&r.add(s),s.event}e.buffer=_;function v(e,t){return(n,r,i)=>{let a=t(new te);return e(function(e){let t=a.evaluate(e);t!==ee&&n.call(r,t)},void 0,i)}}e.chain=v;let ee=Symbol(`HaltChainable`);class te{constructor(){this.steps=[]}map(e){return this.steps.push(e),this}forEach(e){return this.steps.push(t=>(e(t),t)),this}filter(e){return this.steps.push(t=>e(t)?t:ee),this}reduce(e,t){let n=t;return this.steps.push(t=>(n=e(n,t),n)),this}latch(e=(e,t)=>e===t){let t=!0,n;return this.steps.push(r=>{let i=t||!e(r,n);return t=!1,n=r,i?r:ee}),this}evaluate(e){for(let t of this.steps)if(e=t(e),e===ee)break;return e}}function ne(e,t,n=e=>e){let r=(...e)=>i.fire(n(...e)),i=new E({onWillAddFirstListener:()=>e.on(t,r),onDidRemoveLastListener:()=>e.removeListener(t,r)});return i.event}e.fromNodeEventEmitter=ne;function re(e,t,n=e=>e){let r=(...e)=>i.fire(n(...e)),i=new E({onWillAddFirstListener:()=>e.addEventListener(t,r),onDidRemoveLastListener:()=>e.removeEventListener(t,r)});return i.event}e.fromDOMEventEmitter=re;function ie(e,t){let r,i,a=new Promise(a=>{i=n(e)(a),pr(i,t),r=()=>{mr(i,t)}});return a.cancel=r,t&&a.finally(()=>mr(i,t)),a}e.toPromise=ie;function ae(e,t){return e(e=>t.fire(e))}e.forward=ae;function oe(e,t,n){return t(n),e(e=>t(e))}e.runAndSubscribe=oe;class se{constructor(e,t){this._observable=e,this._counter=0,this._hasChanged=!1,this.emitter=new E({onWillAddFirstListener:()=>{e.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{e.removeObserver(this)}}),t&&t.add(this.emitter)}beginUpdate(e){this._counter++}handlePossibleChange(e){}handleChange(e,t){this._hasChanged=!0}endUpdate(e){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function ce(e,t){return new se(e,t).emitter.event}e.fromObservable=ce;function le(e){return(t,n,r)=>{let i=0,a=!1,o={beginUpdate(){i++},endUpdate(){i--,i===0&&(e.reportChanges(),a&&(a=!1,t.call(n)))},handlePossibleChange(){},handleChange(){a=!0}};e.addObserver(o),e.reportChanges();let s={dispose(){e.removeObserver(o)}};return pr(s,r),s}}e.fromObservableLight=le})(T||={});var Yn=class e{static#e=this.all=new Set;static#t=this._idPool=0;constructor(t){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${t}_${e._idPool++}`,e.all.add(this)}start(e){this._stopWatch=new Jn,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},Xn=-1;function Zn(e){let t=Xn;return Xn=e,{dispose(){Xn=t}}}var tee=class e{static#e=this._idPool=1;constructor(t,n,r=(e._idPool++).toString(16).padStart(3,`0`)){this._errorHandler=t,this.threshold=n,this.name=r,this._warnCountdown=0}dispose(){this._stacks?.clear()}check(e,t){let n=this.threshold;if(n<=0||t<n)return;this._stacks||=new Map;let r=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,r+1),--this._warnCountdown,this._warnCountdown<=0){this._warnCountdown=n*.5;let[e,r]=this.getMostFrequentStack(),i=`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${r}):`;console.warn(i),console.warn(e);let a=new ree(i,e);this._errorHandler(a)}return()=>{let t=this._stacks.get(e.value)||0;this._stacks.set(e.value,t-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,t=0;for(let[n,r]of this._stacks)(!e||t<r)&&(e=[n,r],t=r);return e}},nee=class e{static create(){return new e(Error().stack??``)}constructor(e){this.value=e}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},ree=class extends Error{constructor(e,t){super(e),this.name=`ListenerLeakError`,this.stack=t}},iee=class extends Error{constructor(e,t){super(e),this.name=`ListenerRefusalError`,this.stack=t}},aee=0,Qn=class{constructor(e){this.value=e,this.id=aee++}},$n=2,er=(e,t)=>{if(e instanceof Qn)t(e);else for(let n=0;n<e.length;n++){let r=e[n];r&&t(r)}},E=class{constructor(e){this._size=0,this._options=e,this._leakageMon=Xn>0||this._options?.leakWarningThreshold?new tee(e?.onListenerError??p,this._options?.leakWarningThreshold??Xn):void 0,this._perfMon=this._options?._profName?new Yn(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){this._disposed||(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose())}get event(){return this._event??=(e,t,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let e=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(e);let t=this._leakageMon.getMostFrequentStack()??[`UNKNOWN stack`,-1],n=new iee(`${e}. HINT: Stack shows most frequent listener (${t[1]}-times)`,t[0]);return(this._options?.onListenerError||p)(n),w.None}if(this._disposed)return w.None;t&&(e=e.bind(t));let r=new Qn(e),i;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(r.stack=nee.create(),i=this._leakageMon.check(r.stack,this._size+1)),this._listeners?this._listeners instanceof Qn?(this._deliveryQueue??=new nr,this._listeners=[this._listeners,r]):this._listeners.push(r):(this._options?.onWillAddFirstListener?.(this),this._listeners=r,this._options?.onDidAddFirstListener?.(this)),this._options?.onDidAddListener?.(this),this._size++;let a=S(()=>{i?.(),this._removeListener(r)});return pr(a,n),a},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let t=this._listeners,n=t.indexOf(e);if(n===-1)throw console.log(`disposed?`,this._disposed),console.log(`size?`,this._size),console.log(`arr?`,JSON.stringify(this._listeners)),Error(`Attempted to dispose unknown listener`);this._size--,t[n]=void 0;let r=this._deliveryQueue.current===this;if(this._size*$n<=t.length){let e=0;for(let n=0;n<t.length;n++)t[n]?t[e++]=t[n]:r&&e<this._deliveryQueue.end&&(this._deliveryQueue.end--,e<this._deliveryQueue.i&&this._deliveryQueue.i--);t.length=e}}_deliver(e,t){if(!e)return;let n=this._options?.onListenerError||p;if(!n){e.value(t);return}try{e.value(t)}catch(e){n(e)}}_deliverQueue(e){let t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof Qn)this._deliver(this._listeners,e);else{let t=this._deliveryQueue;t.enqueue(this,e,this._listeners.length),this._deliverQueue(t)}this._perfMon?.stop()}hasListeners(){return this._size>0}},tr=()=>new nr,nr=class{constructor(){this.i=-1,this.end=0}enqueue(e,t,n){this.i=0,this.end=n,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},rr=class extends E{async fireAsync(e,t,n){if(this._listeners)for(this._asyncDeliveryQueue||=new Kn,er(this._listeners,t=>this._asyncDeliveryQueue.push([t.value,e]));this._asyncDeliveryQueue.size>0&&!t.isCancellationRequested;){let[e,r]=this._asyncDeliveryQueue.shift(),i=[],a={...r,token:t,waitUntil:t=>{if(Object.isFrozen(i))throw Error(`waitUntil can NOT be called asynchronous`);n&&(t=n(t,e)),i.push(t)}};try{e(a)}catch(e){p(e);continue}await Promise.allSettled(i).then(e=>{for(let t of e)t.status===`rejected`&&p(t.reason)})}}},ir=class extends E{get isPaused(){return this._isPaused!==0}constructor(e){super(e),this._isPaused=0,this._eventQueue=new Kn,this._mergeFn=e?.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){let e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(this._isPaused===0?super.fire(e):this._eventQueue.push(e))}},ar=class extends ir{constructor(e){super(e),this._delay=e.delay??100}fire(e){this._handle||=(this.pause(),setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}},or=class extends E{constructor(e){super(e),this._queuedEvents=[],this._mergeFn=e?.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(e=>super.fire(e)),this._queuedEvents=[]}))}},sr=class{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new E({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(e){let t={event:e,listener:null};return this.events.push(t),this.hasListeners&&this.hook(t),S(Xe(()=>{this.hasListeners&&this.unhook(t);let e=this.events.indexOf(t);this.events.splice(e,1)}))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(e=>this.hook(e))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(e=>this.unhook(e))}hook(e){e.listener=e.event(e=>this.emitter.fire(e))}unhook(e){e.listener?.dispose(),e.listener=null}dispose(){this.emitter.dispose();for(let e of this.events)e.listener?.dispose();this.events=[]}},cr=class{constructor(e,t,n,r){this._store=new C;let i=this._store.add(new sr),a=this._store.add(new Hn);function o(e){a.set(e,i.add(r(e)))}for(let t of e)o(t);this._store.add(t(e=>{o(e)})),this._store.add(n(e=>{a.deleteAndDispose(e)})),this.event=i.event}dispose(){this._store.dispose()}},lr=class{constructor(){this.data=[]}wrapEvent(e,t,n){return(r,i,a)=>e(e=>{let a=this.data[this.data.length-1];if(!t){a?a.buffers.push(()=>r.call(i,e)):r.call(i,e);return}let o=a;if(!o){r.call(i,t(n,e));return}o.items??=[],o.items.push(e),o.buffers.length===0&&a.buffers.push(()=>{o.reducedResult??=n?o.items.reduce(t,n):o.items.reduce(t),r.call(i,o.reducedResult)})},void 0,a)}bufferEvents(e){let t={buffers:[]};this.data.push(t);let n=e();return this.data.pop(),t.buffers.forEach(e=>e()),n}},ur=class{constructor(){this.listening=!1,this.inputEvent=T.None,this.inputEventListener=w.None,this.emitter=new E({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}},dr=class{static const(e){return new fr(e)}constructor(e){this._value=e,this._onDidChange=new E,this.onDidChange=this._onDidChange.event}get value(){return this._value}set value(e){e!==this._value&&(this._value=e,this._onDidChange.fire(void 0))}},fr=class{constructor(e){this.value=e,this.onDidChange=T.None}};function pr(e,t){t instanceof C?t.add(e):Array.isArray(t)&&t.push(e)}function mr(e,t){if(t instanceof C)t.delete(e);else if(Array.isArray(t)){let n=t.indexOf(e);n!==-1&&t.splice(n,1)}e.dispose()}var hr=new class{constructor(){this.data=new Map}add(e,t){ue(ge(e)),ue(ye(t)),ue(!this.data.has(e),`There is already an extension with this id`),this.data.set(e,t)}knows(e){return this.data.has(e)}as(e){return this.data.get(e)||null}dispose(){this.data.forEach(e=>{Me(e.dispose)&&e.dispose()}),this.data.clear()}},gr;(function(e){e.DARK=`dark`,e.LIGHT=`light`,e.HIGH_CONTRAST_DARK=`hcDark`,e.HIGH_CONTRAST_LIGHT=`hcLight`})(gr||={});var _r;(function(e){e.VS=`vs`,e.VS_DARK=`vs-dark`,e.HC_BLACK=`hc-black`,e.HC_LIGHT=`hc-light`})(_r||={});function vr(e){return e===gr.HIGH_CONTRAST_DARK||e===gr.HIGH_CONTRAST_LIGHT}function yr(e){return e===gr.DARK||e===gr.HIGH_CONTRAST_DARK}function br(e){return{id:e}}var xr=x.file,Sr=x.folder;function Cr(e){switch(e){case gr.DARK:return _r.VS_DARK;case gr.HIGH_CONTRAST_DARK:return _r.HC_BLACK;case gr.HIGH_CONTRAST_LIGHT:return _r.HC_LIGHT;default:return _r.VS}}var wr={ThemingContribution:`base.contributions.theming`},Tr=new class extends w{constructor(){super(),this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=this._register(new E)}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),S(()=>{let t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}get onThemingParticipantAdded(){return this.onThemingParticipantAddedEmitter.event}getThemingParticipants(){return this.themingParticipants}};hr.add(wr.ThemingContribution,Tr);function Er(e){return Tr.onColorThemeChange(e)}var Dr=class extends w{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(e=>this.onThemeChange(e)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}getColor(e,t){let n=this.theme.getColor(e);return n&&t&&(n=t(n,this.theme)),n?n.toString():null}};function Or(){return globalThis._VSCODE_NLS_MESSAGES}function kr(){return globalThis._VSCODE_NLS_LANGUAGE}var Ar=kr()===`pseudo`||typeof document<`u`&&document.location&&typeof document.location.hash==`string`&&document.location.hash.indexOf(`pseudo=true`)>=0;function jr(e,t){let n;return n=t.length===0?e:e.replace(/\{(\d+)\}/g,(e,n)=>{let r=t[n[0]],i=e;return typeof r==`string`?i=r:(typeof r==`number`||typeof r==`boolean`||r==null)&&(i=String(r)),i}),Ar&&(n=``+n.replace(/[aouei]/g,`$&$&`)+``),n}function D(e,t,...n){return jr(typeof e==`number`?Mr(e,t):t,n)}function Mr(e,t){let n=Or()?.[e];if(typeof n!=`string`){if(typeof t==`string`)return t;throw Error(`!!! NLS MISSING: ${e} !!!`)}return n}function Nr(e,t,...n){let r;r=typeof e==`number`?Mr(e,t):t;let i=jr(r,n);return{value:i,original:t===r?i:jr(t,n)}}var Pr=Object.freeze(function(e,t){let n=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(n)}}}),Fr;(function(e){function t(t){return t===e.None||t===e.Cancelled||t instanceof Ir?!0:!t||typeof t!=`object`?!1:typeof t.isCancellationRequested==`boolean`&&typeof t.onCancellationRequested==`function`}e.isCancellationToken=t,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:T.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Pr})})(Fr||={});var Ir=class{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Pr:(this._emitter||=new E,this._emitter.event)}dispose(){this._emitter&&=(this._emitter.dispose(),null)}},Lr=class{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||=new Ir,this._token}cancel(){this._token?this._token instanceof Ir&&this._token.cancel():this._token=Fr.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof Ir&&this._token.dispose():this._token=Fr.None}};function Rr(e){let t=new Lr;return e.add({dispose(){t.cancel()}}),t.token}var O;(function(e){e[e.Null=0]=`Null`,e[e.Backspace=8]=`Backspace`,e[e.Tab=9]=`Tab`,e[e.LineFeed=10]=`LineFeed`,e[e.CarriageReturn=13]=`CarriageReturn`,e[e.Space=32]=`Space`,e[e.ExclamationMark=33]=`ExclamationMark`,e[e.DoubleQuote=34]=`DoubleQuote`,e[e.Hash=35]=`Hash`,e[e.DollarSign=36]=`DollarSign`,e[e.PercentSign=37]=`PercentSign`,e[e.Ampersand=38]=`Ampersand`,e[e.SingleQuote=39]=`SingleQuote`,e[e.OpenParen=40]=`OpenParen`,e[e.CloseParen=41]=`CloseParen`,e[e.Asterisk=42]=`Asterisk`,e[e.Plus=43]=`Plus`,e[e.Comma=44]=`Comma`,e[e.Dash=45]=`Dash`,e[e.Period=46]=`Period`,e[e.Slash=47]=`Slash`,e[e.Digit0=48]=`Digit0`,e[e.Digit1=49]=`Digit1`,e[e.Digit2=50]=`Digit2`,e[e.Digit3=51]=`Digit3`,e[e.Digit4=52]=`Digit4`,e[e.Digit5=53]=`Digit5`,e[e.Digit6=54]=`Digit6`,e[e.Digit7=55]=`Digit7`,e[e.Digit8=56]=`Digit8`,e[e.Digit9=57]=`Digit9`,e[e.Colon=58]=`Colon`,e[e.Semicolon=59]=`Semicolon`,e[e.LessThan=60]=`LessThan`,e[e.Equals=61]=`Equals`,e[e.GreaterThan=62]=`GreaterThan`,e[e.QuestionMark=63]=`QuestionMark`,e[e.AtSign=64]=`AtSign`,e[e.A=65]=`A`,e[e.B=66]=`B`,e[e.C=67]=`C`,e[e.D=68]=`D`,e[e.E=69]=`E`,e[e.F=70]=`F`,e[e.G=71]=`G`,e[e.H=72]=`H`,e[e.I=73]=`I`,e[e.J=74]=`J`,e[e.K=75]=`K`,e[e.L=76]=`L`,e[e.M=77]=`M`,e[e.N=78]=`N`,e[e.O=79]=`O`,e[e.P=80]=`P`,e[e.Q=81]=`Q`,e[e.R=82]=`R`,e[e.S=83]=`S`,e[e.T=84]=`T`,e[e.U=85]=`U`,e[e.V=86]=`V`,e[e.W=87]=`W`,e[e.X=88]=`X`,e[e.Y=89]=`Y`,e[e.Z=90]=`Z`,e[e.OpenSquareBracket=91]=`OpenSquareBracket`,e[e.Backslash=92]=`Backslash`,e[e.CloseSquareBracket=93]=`CloseSquareBracket`,e[e.Caret=94]=`Caret`,e[e.Underline=95]=`Underline`,e[e.BackTick=96]=`BackTick`,e[e.a=97]=`a`,e[e.b=98]=`b`,e[e.c=99]=`c`,e[e.d=100]=`d`,e[e.e=101]=`e`,e[e.f=102]=`f`,e[e.g=103]=`g`,e[e.h=104]=`h`,e[e.i=105]=`i`,e[e.j=106]=`j`,e[e.k=107]=`k`,e[e.l=108]=`l`,e[e.m=109]=`m`,e[e.n=110]=`n`,e[e.o=111]=`o`,e[e.p=112]=`p`,e[e.q=113]=`q`,e[e.r=114]=`r`,e[e.s=115]=`s`,e[e.t=116]=`t`,e[e.u=117]=`u`,e[e.v=118]=`v`,e[e.w=119]=`w`,e[e.x=120]=`x`,e[e.y=121]=`y`,e[e.z=122]=`z`,e[e.OpenCurlyBrace=123]=`OpenCurlyBrace`,e[e.Pipe=124]=`Pipe`,e[e.CloseCurlyBrace=125]=`CloseCurlyBrace`,e[e.Tilde=126]=`Tilde`,e[e.NoBreakSpace=160]=`NoBreakSpace`,e[e.U_Combining_Grave_Accent=768]=`U_Combining_Grave_Accent`,e[e.U_Combining_Acute_Accent=769]=`U_Combining_Acute_Accent`,e[e.U_Combining_Circumflex_Accent=770]=`U_Combining_Circumflex_Accent`,e[e.U_Combining_Tilde=771]=`U_Combining_Tilde`,e[e.U_Combining_Macron=772]=`U_Combining_Macron`,e[e.U_Combining_Overline=773]=`U_Combining_Overline`,e[e.U_Combining_Breve=774]=`U_Combining_Breve`,e[e.U_Combining_Dot_Above=775]=`U_Combining_Dot_Above`,e[e.U_Combining_Diaeresis=776]=`U_Combining_Diaeresis`,e[e.U_Combining_Hook_Above=777]=`U_Combining_Hook_Above`,e[e.U_Combining_Ring_Above=778]=`U_Combining_Ring_Above`,e[e.U_Combining_Double_Acute_Accent=779]=`U_Combining_Double_Acute_Accent`,e[e.U_Combining_Caron=780]=`U_Combining_Caron`,e[e.U_Combining_Vertical_Line_Above=781]=`U_Combining_Vertical_Line_Above`,e[e.U_Combining_Double_Vertical_Line_Above=782]=`U_Combining_Double_Vertical_Line_Above`,e[e.U_Combining_Double_Grave_Accent=783]=`U_Combining_Double_Grave_Accent`,e[e.U_Combining_Candrabindu=784]=`U_Combining_Candrabindu`,e[e.U_Combining_Inverted_Breve=785]=`U_Combining_Inverted_Breve`,e[e.U_Combining_Turned_Comma_Above=786]=`U_Combining_Turned_Comma_Above`,e[e.U_Combining_Comma_Above=787]=`U_Combining_Comma_Above`,e[e.U_Combining_Reversed_Comma_Above=788]=`U_Combining_Reversed_Comma_Above`,e[e.U_Combining_Comma_Above_Right=789]=`U_Combining_Comma_Above_Right`,e[e.U_Combining_Grave_Accent_Below=790]=`U_Combining_Grave_Accent_Below`,e[e.U_Combining_Acute_Accent_Below=791]=`U_Combining_Acute_Accent_Below`,e[e.U_Combining_Left_Tack_Below=792]=`U_Combining_Left_Tack_Below`,e[e.U_Combining_Right_Tack_Below=793]=`U_Combining_Right_Tack_Below`,e[e.U_Combining_Left_Angle_Above=794]=`U_Combining_Left_Angle_Above`,e[e.U_Combining_Horn=795]=`U_Combining_Horn`,e[e.U_Combining_Left_Half_Ring_Below=796]=`U_Combining_Left_Half_Ring_Below`,e[e.U_Combining_Up_Tack_Below=797]=`U_Combining_Up_Tack_Below`,e[e.U_Combining_Down_Tack_Below=798]=`U_Combining_Down_Tack_Below`,e[e.U_Combining_Plus_Sign_Below=799]=`U_Combining_Plus_Sign_Below`,e[e.U_Combining_Minus_Sign_Below=800]=`U_Combining_Minus_Sign_Below`,e[e.U_Combining_Palatalized_Hook_Below=801]=`U_Combining_Palatalized_Hook_Below`,e[e.U_Combining_Retroflex_Hook_Below=802]=`U_Combining_Retroflex_Hook_Below`,e[e.U_Combining_Dot_Below=803]=`U_Combining_Dot_Below`,e[e.U_Combining_Diaeresis_Below=804]=`U_Combining_Diaeresis_Below`,e[e.U_Combining_Ring_Below=805]=`U_Combining_Ring_Below`,e[e.U_Combining_Comma_Below=806]=`U_Combining_Comma_Below`,e[e.U_Combining_Cedilla=807]=`U_Combining_Cedilla`,e[e.U_Combining_Ogonek=808]=`U_Combining_Ogonek`,e[e.U_Combining_Vertical_Line_Below=809]=`U_Combining_Vertical_Line_Below`,e[e.U_Combining_Bridge_Below=810]=`U_Combining_Bridge_Below`,e[e.U_Combining_Inverted_Double_Arch_Below=811]=`U_Combining_Inverted_Double_Arch_Below`,e[e.U_Combining_Caron_Below=812]=`U_Combining_Caron_Below`,e[e.U_Combining_Circumflex_Accent_Below=813]=`U_Combining_Circumflex_Accent_Below`,e[e.U_Combining_Breve_Below=814]=`U_Combining_Breve_Below`,e[e.U_Combining_Inverted_Breve_Below=815]=`U_Combining_Inverted_Breve_Below`,e[e.U_Combining_Tilde_Below=816]=`U_Combining_Tilde_Below`,e[e.U_Combining_Macron_Below=817]=`U_Combining_Macron_Below`,e[e.U_Combining_Low_Line=818]=`U_Combining_Low_Line`,e[e.U_Combining_Double_Low_Line=819]=`U_Combining_Double_Low_Line`,e[e.U_Combining_Tilde_Overlay=820]=`U_Combining_Tilde_Overlay`,e[e.U_Combining_Short_Stroke_Overlay=821]=`U_Combining_Short_Stroke_Overlay`,e[e.U_Combining_Long_Stroke_Overlay=822]=`U_Combining_Long_Stroke_Overlay`,e[e.U_Combining_Short_Solidus_Overlay=823]=`U_Combining_Short_Solidus_Overlay`,e[e.U_Combining_Long_Solidus_Overlay=824]=`U_Combining_Long_Solidus_Overlay`,e[e.U_Combining_Right_Half_Ring_Below=825]=`U_Combining_Right_Half_Ring_Below`,e[e.U_Combining_Inverted_Bridge_Below=826]=`U_Combining_Inverted_Bridge_Below`,e[e.U_Combining_Square_Below=827]=`U_Combining_Square_Below`,e[e.U_Combining_Seagull_Below=828]=`U_Combining_Seagull_Below`,e[e.U_Combining_X_Above=829]=`U_Combining_X_Above`,e[e.U_Combining_Vertical_Tilde=830]=`U_Combining_Vertical_Tilde`,e[e.U_Combining_Double_Overline=831]=`U_Combining_Double_Overline`,e[e.U_Combining_Grave_Tone_Mark=832]=`U_Combining_Grave_Tone_Mark`,e[e.U_Combining_Acute_Tone_Mark=833]=`U_Combining_Acute_Tone_Mark`,e[e.U_Combining_Greek_Perispomeni=834]=`U_Combining_Greek_Perispomeni`,e[e.U_Combining_Greek_Koronis=835]=`U_Combining_Greek_Koronis`,e[e.U_Combining_Greek_Dialytika_Tonos=836]=`U_Combining_Greek_Dialytika_Tonos`,e[e.U_Combining_Greek_Ypogegrammeni=837]=`U_Combining_Greek_Ypogegrammeni`,e[e.U_Combining_Bridge_Above=838]=`U_Combining_Bridge_Above`,e[e.U_Combining_Equals_Sign_Below=839]=`U_Combining_Equals_Sign_Below`,e[e.U_Combining_Double_Vertical_Line_Below=840]=`U_Combining_Double_Vertical_Line_Below`,e[e.U_Combining_Left_Angle_Below=841]=`U_Combining_Left_Angle_Below`,e[e.U_Combining_Not_Tilde_Above=842]=`U_Combining_Not_Tilde_Above`,e[e.U_Combining_Homothetic_Above=843]=`U_Combining_Homothetic_Above`,e[e.U_Combining_Almost_Equal_To_Above=844]=`U_Combining_Almost_Equal_To_Above`,e[e.U_Combining_Left_Right_Arrow_Below=845]=`U_Combining_Left_Right_Arrow_Below`,e[e.U_Combining_Upwards_Arrow_Below=846]=`U_Combining_Upwards_Arrow_Below`,e[e.U_Combining_Grapheme_Joiner=847]=`U_Combining_Grapheme_Joiner`,e[e.U_Combining_Right_Arrowhead_Above=848]=`U_Combining_Right_Arrowhead_Above`,e[e.U_Combining_Left_Half_Ring_Above=849]=`U_Combining_Left_Half_Ring_Above`,e[e.U_Combining_Fermata=850]=`U_Combining_Fermata`,e[e.U_Combining_X_Below=851]=`U_Combining_X_Below`,e[e.U_Combining_Left_Arrowhead_Below=852]=`U_Combining_Left_Arrowhead_Below`,e[e.U_Combining_Right_Arrowhead_Below=853]=`U_Combining_Right_Arrowhead_Below`,e[e.U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below=854]=`U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below`,e[e.U_Combining_Right_Half_Ring_Above=855]=`U_Combining_Right_Half_Ring_Above`,e[e.U_Combining_Dot_Above_Right=856]=`U_Combining_Dot_Above_Right`,e[e.U_Combining_Asterisk_Below=857]=`U_Combining_Asterisk_Below`,e[e.U_Combining_Double_Ring_Below=858]=`U_Combining_Double_Ring_Below`,e[e.U_Combining_Zigzag_Above=859]=`U_Combining_Zigzag_Above`,e[e.U_Combining_Double_Breve_Below=860]=`U_Combining_Double_Breve_Below`,e[e.U_Combining_Double_Breve=861]=`U_Combining_Double_Breve`,e[e.U_Combining_Double_Macron=862]=`U_Combining_Double_Macron`,e[e.U_Combining_Double_Macron_Below=863]=`U_Combining_Double_Macron_Below`,e[e.U_Combining_Double_Tilde=864]=`U_Combining_Double_Tilde`,e[e.U_Combining_Double_Inverted_Breve=865]=`U_Combining_Double_Inverted_Breve`,e[e.U_Combining_Double_Rightwards_Arrow_Below=866]=`U_Combining_Double_Rightwards_Arrow_Below`,e[e.U_Combining_Latin_Small_Letter_A=867]=`U_Combining_Latin_Small_Letter_A`,e[e.U_Combining_Latin_Small_Letter_E=868]=`U_Combining_Latin_Small_Letter_E`,e[e.U_Combining_Latin_Small_Letter_I=869]=`U_Combining_Latin_Small_Letter_I`,e[e.U_Combining_Latin_Small_Letter_O=870]=`U_Combining_Latin_Small_Letter_O`,e[e.U_Combining_Latin_Small_Letter_U=871]=`U_Combining_Latin_Small_Letter_U`,e[e.U_Combining_Latin_Small_Letter_C=872]=`U_Combining_Latin_Small_Letter_C`,e[e.U_Combining_Latin_Small_Letter_D=873]=`U_Combining_Latin_Small_Letter_D`,e[e.U_Combining_Latin_Small_Letter_H=874]=`U_Combining_Latin_Small_Letter_H`,e[e.U_Combining_Latin_Small_Letter_M=875]=`U_Combining_Latin_Small_Letter_M`,e[e.U_Combining_Latin_Small_Letter_R=876]=`U_Combining_Latin_Small_Letter_R`,e[e.U_Combining_Latin_Small_Letter_T=877]=`U_Combining_Latin_Small_Letter_T`,e[e.U_Combining_Latin_Small_Letter_V=878]=`U_Combining_Latin_Small_Letter_V`,e[e.U_Combining_Latin_Small_Letter_X=879]=`U_Combining_Latin_Small_Letter_X`,e[e.LINE_SEPARATOR=8232]=`LINE_SEPARATOR`,e[e.PARAGRAPH_SEPARATOR=8233]=`PARAGRAPH_SEPARATOR`,e[e.NEXT_LINE=133]=`NEXT_LINE`,e[e.U_CIRCUMFLEX=94]=`U_CIRCUMFLEX`,e[e.U_GRAVE_ACCENT=96]=`U_GRAVE_ACCENT`,e[e.U_DIAERESIS=168]=`U_DIAERESIS`,e[e.U_MACRON=175]=`U_MACRON`,e[e.U_ACUTE_ACCENT=180]=`U_ACUTE_ACCENT`,e[e.U_CEDILLA=184]=`U_CEDILLA`,e[e.U_MODIFIER_LETTER_LEFT_ARROWHEAD=706]=`U_MODIFIER_LETTER_LEFT_ARROWHEAD`,e[e.U_MODIFIER_LETTER_RIGHT_ARROWHEAD=707]=`U_MODIFIER_LETTER_RIGHT_ARROWHEAD`,e[e.U_MODIFIER_LETTER_UP_ARROWHEAD=708]=`U_MODIFIER_LETTER_UP_ARROWHEAD`,e[e.U_MODIFIER_LETTER_DOWN_ARROWHEAD=709]=`U_MODIFIER_LETTER_DOWN_ARROWHEAD`,e[e.U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING=722]=`U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING`,e[e.U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING=723]=`U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING`,e[e.U_MODIFIER_LETTER_UP_TACK=724]=`U_MODIFIER_LETTER_UP_TACK`,e[e.U_MODIFIER_LETTER_DOWN_TACK=725]=`U_MODIFIER_LETTER_DOWN_TACK`,e[e.U_MODIFIER_LETTER_PLUS_SIGN=726]=`U_MODIFIER_LETTER_PLUS_SIGN`,e[e.U_MODIFIER_LETTER_MINUS_SIGN=727]=`U_MODIFIER_LETTER_MINUS_SIGN`,e[e.U_BREVE=728]=`U_BREVE`,e[e.U_DOT_ABOVE=729]=`U_DOT_ABOVE`,e[e.U_RING_ABOVE=730]=`U_RING_ABOVE`,e[e.U_OGONEK=731]=`U_OGONEK`,e[e.U_SMALL_TILDE=732]=`U_SMALL_TILDE`,e[e.U_DOUBLE_ACUTE_ACCENT=733]=`U_DOUBLE_ACUTE_ACCENT`,e[e.U_MODIFIER_LETTER_RHOTIC_HOOK=734]=`U_MODIFIER_LETTER_RHOTIC_HOOK`,e[e.U_MODIFIER_LETTER_CROSS_ACCENT=735]=`U_MODIFIER_LETTER_CROSS_ACCENT`,e[e.U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR=741]=`U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR`,e[e.U_MODIFIER_LETTER_HIGH_TONE_BAR=742]=`U_MODIFIER_LETTER_HIGH_TONE_BAR`,e[e.U_MODIFIER_LETTER_MID_TONE_BAR=743]=`U_MODIFIER_LETTER_MID_TONE_BAR`,e[e.U_MODIFIER_LETTER_LOW_TONE_BAR=744]=`U_MODIFIER_LETTER_LOW_TONE_BAR`,e[e.U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR=745]=`U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR`,e[e.U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK=746]=`U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK`,e[e.U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK=747]=`U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK`,e[e.U_MODIFIER_LETTER_UNASPIRATED=749]=`U_MODIFIER_LETTER_UNASPIRATED`,e[e.U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD=751]=`U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD`,e[e.U_MODIFIER_LETTER_LOW_UP_ARROWHEAD=752]=`U_MODIFIER_LETTER_LOW_UP_ARROWHEAD`,e[e.U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD=753]=`U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD`,e[e.U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD=754]=`U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD`,e[e.U_MODIFIER_LETTER_LOW_RING=755]=`U_MODIFIER_LETTER_LOW_RING`,e[e.U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT=756]=`U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT`,e[e.U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT=757]=`U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT`,e[e.U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT=758]=`U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT`,e[e.U_MODIFIER_LETTER_LOW_TILDE=759]=`U_MODIFIER_LETTER_LOW_TILDE`,e[e.U_MODIFIER_LETTER_RAISED_COLON=760]=`U_MODIFIER_LETTER_RAISED_COLON`,e[e.U_MODIFIER_LETTER_BEGIN_HIGH_TONE=761]=`U_MODIFIER_LETTER_BEGIN_HIGH_TONE`,e[e.U_MODIFIER_LETTER_END_HIGH_TONE=762]=`U_MODIFIER_LETTER_END_HIGH_TONE`,e[e.U_MODIFIER_LETTER_BEGIN_LOW_TONE=763]=`U_MODIFIER_LETTER_BEGIN_LOW_TONE`,e[e.U_MODIFIER_LETTER_END_LOW_TONE=764]=`U_MODIFIER_LETTER_END_LOW_TONE`,e[e.U_MODIFIER_LETTER_SHELF=765]=`U_MODIFIER_LETTER_SHELF`,e[e.U_MODIFIER_LETTER_OPEN_SHELF=766]=`U_MODIFIER_LETTER_OPEN_SHELF`,e[e.U_MODIFIER_LETTER_LOW_LEFT_ARROW=767]=`U_MODIFIER_LETTER_LOW_LEFT_ARROW`,e[e.U_GREEK_LOWER_NUMERAL_SIGN=885]=`U_GREEK_LOWER_NUMERAL_SIGN`,e[e.U_GREEK_TONOS=900]=`U_GREEK_TONOS`,e[e.U_GREEK_DIALYTIKA_TONOS=901]=`U_GREEK_DIALYTIKA_TONOS`,e[e.U_GREEK_KORONIS=8125]=`U_GREEK_KORONIS`,e[e.U_GREEK_PSILI=8127]=`U_GREEK_PSILI`,e[e.U_GREEK_PERISPOMENI=8128]=`U_GREEK_PERISPOMENI`,e[e.U_GREEK_DIALYTIKA_AND_PERISPOMENI=8129]=`U_GREEK_DIALYTIKA_AND_PERISPOMENI`,e[e.U_GREEK_PSILI_AND_VARIA=8141]=`U_GREEK_PSILI_AND_VARIA`,e[e.U_GREEK_PSILI_AND_OXIA=8142]=`U_GREEK_PSILI_AND_OXIA`,e[e.U_GREEK_PSILI_AND_PERISPOMENI=8143]=`U_GREEK_PSILI_AND_PERISPOMENI`,e[e.U_GREEK_DASIA_AND_VARIA=8157]=`U_GREEK_DASIA_AND_VARIA`,e[e.U_GREEK_DASIA_AND_OXIA=8158]=`U_GREEK_DASIA_AND_OXIA`,e[e.U_GREEK_DASIA_AND_PERISPOMENI=8159]=`U_GREEK_DASIA_AND_PERISPOMENI`,e[e.U_GREEK_DIALYTIKA_AND_VARIA=8173]=`U_GREEK_DIALYTIKA_AND_VARIA`,e[e.U_GREEK_DIALYTIKA_AND_OXIA=8174]=`U_GREEK_DIALYTIKA_AND_OXIA`,e[e.U_GREEK_VARIA=8175]=`U_GREEK_VARIA`,e[e.U_GREEK_OXIA=8189]=`U_GREEK_OXIA`,e[e.U_GREEK_DASIA=8190]=`U_GREEK_DASIA`,e[e.U_IDEOGRAPHIC_FULL_STOP=12290]=`U_IDEOGRAPHIC_FULL_STOP`,e[e.U_LEFT_CORNER_BRACKET=12300]=`U_LEFT_CORNER_BRACKET`,e[e.U_RIGHT_CORNER_BRACKET=12301]=`U_RIGHT_CORNER_BRACKET`,e[e.U_LEFT_BLACK_LENTICULAR_BRACKET=12304]=`U_LEFT_BLACK_LENTICULAR_BRACKET`,e[e.U_RIGHT_BLACK_LENTICULAR_BRACKET=12305]=`U_RIGHT_BLACK_LENTICULAR_BRACKET`,e[e.U_OVERLINE=8254]=`U_OVERLINE`,e[e.UTF8_BOM=65279]=`UTF8_BOM`,e[e.U_FULLWIDTH_SEMICOLON=65307]=`U_FULLWIDTH_SEMICOLON`,e[e.U_FULLWIDTH_COMMA=65292]=`U_FULLWIDTH_COMMA`})(O||={});var zr=`en`,Br=!1,Vr=!1,Hr=!1,Ur=!1,Wr=!1,Gr=!1,Kr=!1,qr=!1,Jr=!1,Yr=void 0,Xr=`en`,Zr=`en`,Qr=void 0,$r=globalThis,ei=void 0;$r.vscode!==void 0&&$r.vscode.process!==void 0?ei=$r.vscode.process:typeof process<`u`&&typeof process?.versions?.node==`string`&&(ei=process);var ti=typeof ei?.versions?.electron==`string`,ni=ti&&ei?.type===`renderer`;if(typeof ei==`object`){Br=ei.platform===`win32`,Vr=ei.platform===`darwin`,Hr=ei.platform===`linux`,Hr&&ei.env.SNAP&&ei.env.SNAP_REVISION,Gr=ti,qr=!!ei.env.CI||!!ei.env.BUILD_ARTIFACTSTAGINGDIRECTORY||!!ei.env.GITHUB_WORKSPACE,Yr=`en`,Xr=`en`;let e=ei.env.VSCODE_NLS_CONFIG;if(e)try{let t=JSON.parse(e);Yr=t.userLocale,Zr=t.osLocale,Xr=t.resolvedLanguage||`en`,t.languagePack?.translationsConfigFile}catch{}Ur=!0}else typeof navigator==`object`&&!ni?(Qr=navigator.userAgent,Br=Qr.indexOf(`Windows`)>=0,Vr=Qr.indexOf(`Macintosh`)>=0,Kr=(Qr.indexOf(`Macintosh`)>=0||Qr.indexOf(`iPad`)>=0||Qr.indexOf(`iPhone`)>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Hr=Qr.indexOf(`Linux`)>=0,Jr=Qr?.indexOf(`Mobi`)>=0,Wr=!0,Xr=kr()||`en`,Yr=navigator.language.toLowerCase(),Zr=Yr):console.error(`Unable to resolve platform.`);var ri;(function(e){e[e.Web=0]=`Web`,e[e.Mac=1]=`Mac`,e[e.Linux=2]=`Linux`,e[e.Windows=3]=`Windows`})(ri||={});function ii(e){switch(e){case ri.Web:return`Web`;case ri.Mac:return`Mac`;case ri.Linux:return`Linux`;case ri.Windows:return`Windows`}}var ai=ri.Web;Vr?ai=ri.Mac:Br?ai=ri.Windows:Hr&&(ai=ri.Linux);var oi=Br,si=Vr,ci=Hr,li=Ur,ui=Gr,di=Wr,fi=Wr&&typeof $r.importScripts==`function`,pi=fi?$r.origin:void 0,mi=Kr,hi=Jr,gi=qr,_i=ai,vi=Qr,yi=Xr,bi;(function(e){function t(){return yi}e.value=t;function n(){return yi.length===2?yi===`en`:yi.length>=3?yi[0]===`e`&&yi[1]===`n`&&yi[2]===`-`:!1}e.isDefaultVariant=n;function r(){return yi===`en`}e.isDefault=r})(bi||={});var xi=Yr,Si=Zr,Ci=typeof $r.postMessage==`function`&&!$r.importScripts,wi=(()=>{if(Ci){let e=[];$r.addEventListener(`message`,t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,r=e.length;n<r;n++){let r=e[n];if(r.id===t.data.vscodeScheduleAsyncWork){e.splice(n,1),r.callback();return}}});let t=0;return n=>{let r=++t;e.push({id:r,callback:n}),$r.postMessage({vscodeScheduleAsyncWork:r},`*`)}}return e=>setTimeout(e)})(),Ti;(function(e){e[e.Windows=1]=`Windows`,e[e.Macintosh=2]=`Macintosh`,e[e.Linux=3]=`Linux`})(Ti||={});var Ei=Vr||Kr?Ti.Macintosh:Br?Ti.Windows:Ti.Linux,Di=!0,Oi=!1;function ki(){if(!Oi){Oi=!0;let e=new Uint8Array(2);e[0]=1,e[1]=2,Di=new Uint16Array(e.buffer)[0]===513}return Di}var Ai=!!(vi&&vi.indexOf(`Chrome`)>=0),ji=!!(vi&&vi.indexOf(`Firefox`)>=0),Mi=!!(!Ai&&vi&&vi.indexOf(`Safari`)>=0),Ni=!!(vi&&vi.indexOf(`Edg/`)>=0),Pi=!!(vi&&vi.indexOf(`Android`)>=0),Fi,Ii=globalThis.vscode;if(Ii!==void 0&&Ii.process!==void 0){let e=Ii.process;Fi={get platform(){return e.platform},get arch(){return e.arch},get env(){return e.env},cwd(){return e.cwd()}}}else Fi=typeof process<`u`&&typeof process?.versions?.node==`string`?{get platform(){return process.platform},get arch(){return process.arch},get env(){return{}},cwd(){return{}.VSCODE_CWD||process.cwd()}}:{get platform(){return oi?`win32`:si?`darwin`:`linux`},get arch(){},get env(){return{}},cwd(){return`/`}};var Li=Fi.cwd,Ri=Fi.env,zi=Fi.platform,Bi=Fi.arch,Vi=65,Hi=97,Ui=90,Wi=122,Gi=46,Ki=47,qi=92,Ji=58,Yi=63,Xi=class extends Error{constructor(e,t,n){let r;typeof t==`string`&&t.indexOf(`not `)===0?(r=`must not be`,t=t.replace(/^not /,``)):r=`must be`;let i=`The "${e}" ${e.indexOf(`.`)===-1?`argument`:`property`} ${r} of type ${t}`;i+=`. Received type ${typeof n}`,super(i),this.code=`ERR_INVALID_ARG_TYPE`}};function Zi(e,t){if(typeof e!=`object`||!e)throw new Xi(t,`Object`,e)}function Qi(e,t){if(typeof e!=`string`)throw new Xi(t,`string`,e)}var $i=zi===`win32`;function ea(e){return e===Ki||e===qi}function ta(e){return e===Ki}function na(e){return e>=Vi&&e<=Ui||e>=Hi&&e<=Wi}function ra(e,t,n,r){let i=``,a=0,o=-1,s=0,c=0;for(let l=0;l<=e.length;++l){if(l<e.length)c=e.charCodeAt(l);else if(r(c))break;else c=Ki;if(r(c)){if(!(o===l-1||s===1))if(s===2){if(i.length<2||a!==2||i.charCodeAt(i.length-1)!==Gi||i.charCodeAt(i.length-2)!==Gi){if(i.length>2){let e=i.lastIndexOf(n);e===-1?(i=``,a=0):(i=i.slice(0,e),a=i.length-1-i.lastIndexOf(n)),o=l,s=0;continue}else if(i.length!==0){i=``,a=0,o=l,s=0;continue}}t&&(i+=i.length>0?`${n}..`:`..`,a=2)}else i.length>0?i+=`${n}${e.slice(o+1,l)}`:i=e.slice(o+1,l),a=l-o-1;o=l,s=0}else c===Gi&&s!==-1?++s:s=-1}return i}function oee(e){return e?`${e[0]===`.`?``:`.`}${e}`:``}function ia(e,t){Zi(t,`pathObject`);let n=t.dir||t.root,r=t.base||`${t.name||``}${oee(t.ext)}`;return n?n===t.root?`${n}${r}`:`${n}${e}${r}`:r}var aa={resolve(...e){let t=``,n=``,r=!1;for(let i=e.length-1;i>=-1;i--){let a;if(i>=0){if(a=e[i],Qi(a,`paths[${i}]`),a.length===0)continue}else t.length===0?a=Li():(a=Ri[`=${t}`]||Li(),(a===void 0||a.slice(0,2).toLowerCase()!==t.toLowerCase()&&a.charCodeAt(2)===qi)&&(a=`${t}\\`));let o=a.length,s=0,c=``,l=!1,u=a.charCodeAt(0);if(o===1)ea(u)&&(s=1,l=!0);else if(ea(u))if(l=!0,ea(a.charCodeAt(1))){let e=2,t=e;for(;e<o&&!ea(a.charCodeAt(e));)e++;if(e<o&&e!==t){let n=a.slice(t,e);for(t=e;e<o&&ea(a.charCodeAt(e));)e++;if(e<o&&e!==t){for(t=e;e<o&&!ea(a.charCodeAt(e));)e++;(e===o||e!==t)&&(c=`\\\\${n}\\${a.slice(t,e)}`,s=e)}}}else s=1;else na(u)&&a.charCodeAt(1)===Ji&&(c=a.slice(0,2),s=2,o>2&&ea(a.charCodeAt(2))&&(l=!0,s=3));if(c.length>0)if(t.length>0){if(c.toLowerCase()!==t.toLowerCase())continue}else t=c;if(r){if(t.length>0)break}else if(n=`${a.slice(s)}\\${n}`,r=l,l&&t.length>0)break}return n=ra(n,!r,`\\`,ea),r?`${t}\\${n}`:`${t}${n}`||`.`},normalize(e){Qi(e,`path`);let t=e.length;if(t===0)return`.`;let n=0,r,i=!1,a=e.charCodeAt(0);if(t===1)return ta(a)?`\\`:e;if(ea(a))if(i=!0,ea(e.charCodeAt(1))){let i=2,a=i;for(;i<t&&!ea(e.charCodeAt(i));)i++;if(i<t&&i!==a){let o=e.slice(a,i);for(a=i;i<t&&ea(e.charCodeAt(i));)i++;if(i<t&&i!==a){for(a=i;i<t&&!ea(e.charCodeAt(i));)i++;if(i===t)return`\\\\${o}\\${e.slice(a)}\\`;i!==a&&(r=`\\\\${o}\\${e.slice(a,i)}`,n=i)}}}else n=1;else na(a)&&e.charCodeAt(1)===Ji&&(r=e.slice(0,2),n=2,t>2&&ea(e.charCodeAt(2))&&(i=!0,n=3));let o=n<t?ra(e.slice(n),!i,`\\`,ea):``;if(o.length===0&&!i&&(o=`.`),o.length>0&&ea(e.charCodeAt(t-1))&&(o+=`\\`),!i&&r===void 0&&e.includes(`:`)){if(o.length>=2&&na(o.charCodeAt(0))&&o.charCodeAt(1)===Ji)return`.\\${o}`;let n=e.indexOf(`:`);do if(n===t-1||ea(e.charCodeAt(n+1)))return`.\\${o}`;while((n=e.indexOf(`:`,n+1))!==-1)}return r===void 0?i?`\\${o}`:o:i?`${r}\\${o}`:`${r}${o}`},isAbsolute(e){Qi(e,`path`);let t=e.length;if(t===0)return!1;let n=e.charCodeAt(0);return ea(n)||t>2&&na(n)&&e.charCodeAt(1)===Ji&&ea(e.charCodeAt(2))},join(...e){if(e.length===0)return`.`;let t,n;for(let r=0;r<e.length;++r){let i=e[r];Qi(i,`path`),i.length>0&&(t===void 0?t=n=i:t+=`\\${i}`)}if(t===void 0)return`.`;let r=!0,i=0;if(typeof n==`string`&&ea(n.charCodeAt(0))){++i;let e=n.length;e>1&&ea(n.charCodeAt(1))&&(++i,e>2&&(ea(n.charCodeAt(2))?++i:r=!1))}if(r){for(;i<t.length&&ea(t.charCodeAt(i));)i++;i>=2&&(t=`\\${t.slice(i)}`)}return aa.normalize(t)},relative(e,t){if(Qi(e,`from`),Qi(t,`to`),e===t)return``;let n=aa.resolve(e),r=aa.resolve(t);if(n===r||(e=n.toLowerCase(),t=r.toLowerCase(),e===t))return``;if(n.length!==e.length||r.length!==t.length){let e=n.split(`\\`),t=r.split(`\\`);e[e.length-1]===``&&e.pop(),t[t.length-1]===``&&t.pop();let i=e.length,a=t.length,o=i<a?i:a,s;for(s=0;s<o&&e[s].toLowerCase()===t[s].toLowerCase();s++);return s===0?r:s===o?a>o?t.slice(s).join(`\\`):i>o?`..\\`.repeat(i-1-s)+`..`:``:`..\\`.repeat(i-s)+t.slice(s).join(`\\`)}let i=0;for(;i<e.length&&e.charCodeAt(i)===qi;)i++;let a=e.length;for(;a-1>i&&e.charCodeAt(a-1)===qi;)a--;let o=a-i,s=0;for(;s<t.length&&t.charCodeAt(s)===qi;)s++;let c=t.length;for(;c-1>s&&t.charCodeAt(c-1)===qi;)c--;let l=c-s,u=o<l?o:l,d=-1,f=0;for(;f<u;f++){let n=e.charCodeAt(i+f);if(n!==t.charCodeAt(s+f))break;n===qi&&(d=f)}if(f!==u){if(d===-1)return r}else{if(l>u){if(t.charCodeAt(s+f)===qi)return r.slice(s+f+1);if(f===2)return r.slice(s+f)}o>u&&(e.charCodeAt(i+f)===qi?d=f:f===2&&(d=3)),d===-1&&(d=0)}let p=``;for(f=i+d+1;f<=a;++f)(f===a||e.charCodeAt(f)===qi)&&(p+=p.length===0?`..`:`\\..`);return s+=d,p.length>0?`${p}${r.slice(s,c)}`:(r.charCodeAt(s)===qi&&++s,r.slice(s,c))},toNamespacedPath(e){if(typeof e!=`string`||e.length===0)return e;let t=aa.resolve(e);if(t.length<=2)return e;if(t.charCodeAt(0)===qi){if(t.charCodeAt(1)===qi){let e=t.charCodeAt(2);if(e!==Yi&&e!==Gi)return`\\\\?\\UNC\\${t.slice(2)}`}}else if(na(t.charCodeAt(0))&&t.charCodeAt(1)===Ji&&t.charCodeAt(2)===qi)return`\\\\?\\${t}`;return t},dirname(e){Qi(e,`path`);let t=e.length;if(t===0)return`.`;let n=-1,r=0,i=e.charCodeAt(0);if(t===1)return ea(i)?e:`.`;if(ea(i)){if(n=r=1,ea(e.charCodeAt(1))){let i=2,a=i;for(;i<t&&!ea(e.charCodeAt(i));)i++;if(i<t&&i!==a){for(a=i;i<t&&ea(e.charCodeAt(i));)i++;if(i<t&&i!==a){for(a=i;i<t&&!ea(e.charCodeAt(i));)i++;if(i===t)return e;i!==a&&(n=r=i+1)}}}}else na(i)&&e.charCodeAt(1)===Ji&&(n=t>2&&ea(e.charCodeAt(2))?3:2,r=n);let a=-1,o=!0;for(let n=t-1;n>=r;--n)if(ea(e.charCodeAt(n))){if(!o){a=n;break}}else o=!1;if(a===-1){if(n===-1)return`.`;a=n}return e.slice(0,a)},basename(e,t){t!==void 0&&Qi(t,`suffix`),Qi(e,`path`);let n=0,r=-1,i=!0,a;if(e.length>=2&&na(e.charCodeAt(0))&&e.charCodeAt(1)===Ji&&(n=2),t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return``;let o=t.length-1,s=-1;for(a=e.length-1;a>=n;--a){let c=e.charCodeAt(a);if(ea(c)){if(!i){n=a+1;break}}else s===-1&&(i=!1,s=a+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(r=a):(o=-1,r=s))}return n===r?r=s:r===-1&&(r=e.length),e.slice(n,r)}for(a=e.length-1;a>=n;--a)if(ea(e.charCodeAt(a))){if(!i){n=a+1;break}}else r===-1&&(i=!1,r=a+1);return r===-1?``:e.slice(n,r)},extname(e){Qi(e,`path`);let t=0,n=-1,r=0,i=-1,a=!0,o=0;e.length>=2&&e.charCodeAt(1)===Ji&&na(e.charCodeAt(0))&&(t=r=2);for(let s=e.length-1;s>=t;--s){let t=e.charCodeAt(s);if(ea(t)){if(!a){r=s+1;break}continue}i===-1&&(a=!1,i=s+1),t===Gi?n===-1?n=s:o!==1&&(o=1):n!==-1&&(o=-1)}return n===-1||i===-1||o===0||o===1&&n===i-1&&n===r+1?``:e.slice(n,i)},format:ia.bind(null,`\\`),parse(e){Qi(e,`path`);let t={root:``,dir:``,base:``,ext:``,name:``};if(e.length===0)return t;let n=e.length,r=0,i=e.charCodeAt(0);if(n===1)return ea(i)?(t.root=t.dir=e,t):(t.base=t.name=e,t);if(ea(i)){if(r=1,ea(e.charCodeAt(1))){let t=2,i=t;for(;t<n&&!ea(e.charCodeAt(t));)t++;if(t<n&&t!==i){for(i=t;t<n&&ea(e.charCodeAt(t));)t++;if(t<n&&t!==i){for(i=t;t<n&&!ea(e.charCodeAt(t));)t++;t===n?r=t:t!==i&&(r=t+1)}}}}else if(na(i)&&e.charCodeAt(1)===Ji){if(n<=2)return t.root=t.dir=e,t;if(r=2,ea(e.charCodeAt(2))){if(n===3)return t.root=t.dir=e,t;r=3}}r>0&&(t.root=e.slice(0,r));let a=-1,o=r,s=-1,c=!0,l=e.length-1,u=0;for(;l>=r;--l){if(i=e.charCodeAt(l),ea(i)){if(!c){o=l+1;break}continue}s===-1&&(c=!1,s=l+1),i===Gi?a===-1?a=l:u!==1&&(u=1):a!==-1&&(u=-1)}return s!==-1&&(a===-1||u===0||u===1&&a===s-1&&a===o+1?t.base=t.name=e.slice(o,s):(t.name=e.slice(o,a),t.base=e.slice(o,s),t.ext=e.slice(a,s))),o>0&&o!==r?t.dir=e.slice(0,o-1):t.dir=t.root,t},sep:`\\`,delimiter:`;`,win32:null,posix:null},see=(()=>{if($i){let e=/\\/g;return()=>{let t=Li().replace(e,`/`);return t.slice(t.indexOf(`/`))}}return()=>Li()})(),oa={resolve(...e){let t=``,n=!1;for(let r=e.length-1;r>=0&&!n;r--){let i=e[r];Qi(i,`paths[${r}]`),i.length!==0&&(t=`${i}/${t}`,n=i.charCodeAt(0)===Ki)}if(!n){let e=see();t=`${e}/${t}`,n=e.charCodeAt(0)===Ki}return t=ra(t,!n,`/`,ta),n?`/${t}`:t.length>0?t:`.`},normalize(e){if(Qi(e,`path`),e.length===0)return`.`;let t=e.charCodeAt(0)===Ki,n=e.charCodeAt(e.length-1)===Ki;return e=ra(e,!t,`/`,ta),e.length===0?t?`/`:n?`./`:`.`:(n&&(e+=`/`),t?`/${e}`:e)},isAbsolute(e){return Qi(e,`path`),e.length>0&&e.charCodeAt(0)===Ki},join(...e){if(e.length===0)return`.`;let t=[];for(let n=0;n<e.length;++n){let r=e[n];Qi(r,`path`),r.length>0&&t.push(r)}return t.length===0?`.`:oa.normalize(t.join(`/`))},relative(e,t){if(Qi(e,`from`),Qi(t,`to`),e===t||(e=oa.resolve(e),t=oa.resolve(t),e===t))return``;let n=e.length,r=n-1,i=t.length-1,a=r<i?r:i,o=-1,s=0;for(;s<a;s++){let n=e.charCodeAt(1+s);if(n!==t.charCodeAt(1+s))break;n===Ki&&(o=s)}if(s===a)if(i>a){if(t.charCodeAt(1+s)===Ki)return t.slice(1+s+1);if(s===0)return t.slice(1+s)}else r>a&&(e.charCodeAt(1+s)===Ki?o=s:s===0&&(o=0));let c=``;for(s=1+o+1;s<=n;++s)(s===n||e.charCodeAt(s)===Ki)&&(c+=c.length===0?`..`:`/..`);return`${c}${t.slice(1+o)}`},toNamespacedPath(e){return e},dirname(e){if(Qi(e,`path`),e.length===0)return`.`;let t=e.charCodeAt(0)===Ki,n=-1,r=!0;for(let t=e.length-1;t>=1;--t)if(e.charCodeAt(t)===Ki){if(!r){n=t;break}}else r=!1;return n===-1?t?`/`:`.`:t&&n===1?`//`:e.slice(0,n)},basename(e,t){t!==void 0&&Qi(t,`suffix`),Qi(e,`path`);let n=0,r=-1,i=!0,a;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return``;let o=t.length-1,s=-1;for(a=e.length-1;a>=0;--a){let c=e.charCodeAt(a);if(c===Ki){if(!i){n=a+1;break}}else s===-1&&(i=!1,s=a+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(r=a):(o=-1,r=s))}return n===r?r=s:r===-1&&(r=e.length),e.slice(n,r)}for(a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===Ki){if(!i){n=a+1;break}}else r===-1&&(i=!1,r=a+1);return r===-1?``:e.slice(n,r)},extname(e){Qi(e,`path`);let t=-1,n=0,r=-1,i=!0,a=0;for(let o=e.length-1;o>=0;--o){let s=e[o];if(s===`/`){if(!i){n=o+1;break}continue}r===-1&&(i=!1,r=o+1),s===`.`?t===-1?t=o:a!==1&&(a=1):t!==-1&&(a=-1)}return t===-1||r===-1||a===0||a===1&&t===r-1&&t===n+1?``:e.slice(t,r)},format:ia.bind(null,`/`),parse(e){Qi(e,`path`);let t={root:``,dir:``,base:``,ext:``,name:``};if(e.length===0)return t;let n=e.charCodeAt(0)===Ki,r;n?(t.root=`/`,r=1):r=0;let i=-1,a=0,o=-1,s=!0,c=e.length-1,l=0;for(;c>=r;--c){let t=e.charCodeAt(c);if(t===Ki){if(!s){a=c+1;break}continue}o===-1&&(s=!1,o=c+1),t===Gi?i===-1?i=c:l!==1&&(l=1):i!==-1&&(l=-1)}if(o!==-1){let r=a===0&&n?1:a;i===-1||l===0||l===1&&i===o-1&&i===a+1?t.base=t.name=e.slice(r,o):(t.name=e.slice(r,i),t.base=e.slice(r,o),t.ext=e.slice(i,o))}return a>0?t.dir=e.slice(0,a-1):n&&(t.dir=`/`),t},sep:`/`,delimiter:`:`,win32:null,posix:null};oa.win32=aa.win32=aa,oa.posix=aa.posix=oa;var sa=$i?aa.normalize:oa.normalize,ca=$i?aa.isAbsolute:oa.isAbsolute,la=$i?aa.join:oa.join,ua=$i?aa.resolve:oa.resolve,da=$i?aa.relative:oa.relative,fa=$i?aa.dirname:oa.dirname,pa=$i?aa.basename:oa.basename,ma=$i?aa.extname:oa.extname,ha=$i?aa.parse:oa.parse,ga=$i?aa.sep:oa.sep,_a=class{constructor(e){this.task=e,this.result=null}get(){if(this.result)return this.result;let e=new Lr;return this.result={promise:this.task(e.token),dispose:()=>{this.result=null,e.cancel(),e.dispose()}},this.result}};function va(e){return e}var ya=class{constructor(e,t){this.lastCache=void 0,this.lastArgKey=void 0,typeof e==`function`?(this._fn=e,this._computeKey=va):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){let t=this._computeKey(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this._fn(e)),this.lastCache}},ba=class{get cachedValues(){return this._map}constructor(e,t){this._map=new Map,this._map2=new Map,typeof e==`function`?(this._fn=e,this._computeKey=va):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){let t=this._computeKey(e);if(this._map2.has(t))return this._map2.get(t);let n=this._fn(e);return this._map.set(e,n),this._map2.set(t,n),n}},xa;(function(e){e[e.Uninitialized=0]=`Uninitialized`,e[e.Running=1]=`Running`,e[e.Completed=2]=`Completed`})(xa||={});var Sa=class{constructor(e){this.executor=e,this._state=xa.Uninitialized}get hasValue(){return this._state===xa.Completed}get value(){if(this._state===xa.Uninitialized){this._state=xa.Running;try{this._value=this.executor()}catch(e){this._error=e}finally{this._state=xa.Completed}}else if(this._state===xa.Running)throw Error(`Cannot read the value of a lazy that is being initialized`);if(this._error)throw this._error;return this._value}get rawValue(){return this._value}},Ca;(function(e){e[e.MAX_SAFE_SMALL_INTEGER=1073741824]=`MAX_SAFE_SMALL_INTEGER`,e[e.MIN_SAFE_SMALL_INTEGER=-1073741824]=`MIN_SAFE_SMALL_INTEGER`,e[e.MAX_UINT_8=255]=`MAX_UINT_8`,e[e.MAX_UINT_16=65535]=`MAX_UINT_16`,e[e.MAX_UINT_32=4294967295]=`MAX_UINT_32`,e[e.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]=`UNICODE_SUPPLEMENTARY_PLANE_BEGIN`})(Ca||={});function wa(e){return e<0?0:e>Ca.MAX_UINT_8?Ca.MAX_UINT_8:e|0}function Ta(e){return e<0?0:e>Ca.MAX_UINT_32?Ca.MAX_UINT_32:e|0}function Ea(e){return!e||typeof e!=`string`?!0:e.trim().length===0}var Da=/{(\d+)}/g;function Oa(e,...t){return t.length===0?e:e.replace(Da,function(e,n){let r=parseInt(n,10);return isNaN(r)||r<0||r>=t.length?e:t[r]})}var ka=/{([^}]+)}/g;function Aa(e,t){return Object.keys(t).length===0?e:e.replace(ka,(e,n)=>t[n]??e)}function ja(e){return e.replace(/[<>"'&]/g,e=>{switch(e){case`<`:return`&lt;`;case`>`:return`&gt;`;case`"`:return`&quot;`;case`'`:return`&apos;`;case`&`:return`&amp;`}return e})}function Ma(e){return e.replace(/[<>&]/g,function(e){switch(e){case`<`:return`&lt;`;case`>`:return`&gt;`;case`&`:return`&amp;`;default:return e}})}function Na(e){return e.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,`\\$&`)}function Pa(e,t){let n=0,r=e.indexOf(t);for(;r!==-1;)n++,r=e.indexOf(t,r+t.length);return n}function Fa(e,t,n=``){return e.length<=t?e:`${e.substr(0,t)}${n}`}function Ia(e,t=` `){return Ra(La(e,t),t)}function La(e,t){if(!e||!t)return e;let n=t.length,r=0;if(n===1){let n=t.charCodeAt(0);for(;r<e.length&&e.charCodeAt(r)===n;)r++}else for(;e.startsWith(t,r);)r+=n;return e.substring(r)}function Ra(e,t){if(!e||!t)return e;let n=t.length,r=e.length;if(n===1){let n=r,i=t.charCodeAt(0);for(;n>0&&e.charCodeAt(n-1)===i;)n--;return e.substring(0,n)}let i=r;for(;i>0&&e.endsWith(t,i);)i-=n;return e.substring(0,i)}function za(e){return e.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,`\\$&`).replace(/[\*]/g,`.*`)}function Ba(e,t,n={}){if(!e)throw Error(`Cannot create regex from empty string`);t||(e=Na(e)),n.wholeWord&&(/\B/.test(e.charAt(0))||(e=`\\b`+e),/\B/.test(e.charAt(e.length-1))||(e+=`\\b`));let r=``;return n.global&&(r+=`g`),n.matchCase||(r+=`i`),n.multiline&&(r+=`m`),n.unicode&&(r+=`u`),new RegExp(e,r)}function Va(e){return e.source===`^`||e.source===`^$`||e.source===`$`||e.source===`^\\s*$`?!1:!!(e.exec(``)&&e.lastIndex===0)}function Ha(e,t){return e.filter(e=>e!=null&&e!==!1).join(t)}function Ua(e){return e.split(/\r\n|\r|\n/)}function Wa(e){for(let t=0,n=e.length;t<n;t++){let n=e.charCodeAt(t);if(n!==O.Space&&n!==O.Tab)return t}return-1}function Ga(e,t=0,n=e.length){for(let r=t;r<n;r++){let n=e.charCodeAt(r);if(n!==O.Space&&n!==O.Tab)return e.substring(t,r)}return e.substring(t,n)}function Ka(e,t=e.length-1){for(let n=t;n>=0;n--){let t=e.charCodeAt(n);if(t!==O.Space&&t!==O.Tab)return n}return-1}function qa(e,t){return e<t?-1:e>t?1:0}function Ja(e,t,n=0,r=e.length,i=0,a=t.length){for(;n<r&&i<a;n++,i++){let r=e.charCodeAt(n),a=t.charCodeAt(i);if(r<a)return-1;if(r>a)return 1}let o=r-n,s=a-i;return o<s?-1:o>s?1:0}function Ya(e,t){return Xa(e,t,0,e.length,0,t.length)}function Xa(e,t,n=0,r=e.length,i=0,a=t.length){for(;n<r&&i<a;n++,i++){let o=e.charCodeAt(n),s=t.charCodeAt(i);if(o===s)continue;if(o>=128||s>=128)return Ja(e.toLowerCase(),t.toLowerCase(),n,r,i,a);Qa(o)&&(o-=32),Qa(s)&&(s-=32);let c=o-s;if(c!==0)return c}let o=r-n,s=a-i;return o<s?-1:o>s?1:0}function Za(e){return e>=O.Digit0&&e<=O.Digit9}function Qa(e){return e>=O.a&&e<=O.z}function $a(e){return e>=O.A&&e<=O.Z}function eo(e,t){return e.length===t.length&&Xa(e,t)===0}function to(e,t,n){return e===t||!!n&&e!==void 0&&t!==void 0&&eo(e,t)}function no(e,t){let n=t.length;return n<=e.length&&Xa(e,t,0,n)===0}function ro(e,t){let n=e.length,r=n-t.length;return r>=0&&Xa(e,t,r,n)===0}function io(e,t){let n=Math.min(e.length,t.length),r;for(r=0;r<n;r++)if(e.charCodeAt(r)!==t.charCodeAt(r))return r;return n}function ao(e,t){let n=Math.min(e.length,t.length),r,i=e.length-1,a=t.length-1;for(r=0;r<n;r++)if(e.charCodeAt(i-r)!==t.charCodeAt(a-r))return r;return n}function oo(e){return 55296<=e&&e<=56319}function so(e){return 56320<=e&&e<=57343}function co(e,t){return(e-55296<<10)+(t-56320)+65536}function lo(e,t,n){let r=e.charCodeAt(n);if(oo(r)&&n+1<t){let t=e.charCodeAt(n+1);if(so(t))return co(r,t)}return r}function uo(e,t){let n=e.charCodeAt(t-1);if(so(n)&&t>1){let r=e.charCodeAt(t-2);if(oo(r))return co(r,n)}return n}var fo=class{get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){let e=uo(this._str,this._offset);return this._offset-=e>=Ca.UNICODE_SUPPLEMENTARY_PLANE_BEGIN?2:1,e}nextCodePoint(){let e=lo(this._str,this._len,this._offset);return this._offset+=e>=Ca.UNICODE_SUPPLEMENTARY_PLANE_BEGIN?2:1,e}eol(){return this._offset>=this._len}},po=class{get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new fo(e,t)}nextGraphemeLength(){let e=Ro.getInstance(),t=this._iterator,n=t.offset,r=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){let n=t.offset,i=e.getGraphemeBreakType(t.nextCodePoint());if(Io(r,i)){t.setOffset(n);break}r=i}return t.offset-n}prevGraphemeLength(){let e=Ro.getInstance(),t=this._iterator,n=t.offset,r=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){let n=t.offset,i=e.getGraphemeBreakType(t.prevCodePoint());if(Io(i,r)){t.setOffset(n);break}r=i}return n-t.offset}eol(){return this._iterator.eol()}};function mo(e,t){return new po(e,t).nextGraphemeLength()}function ho(e,t){return new po(e,t).prevGraphemeLength()}function go(e,t){t>0&&so(e.charCodeAt(t))&&t--;let n=t+mo(e,t);return[n-ho(e,n),n]}var _o=void 0;function vo(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function yo(e){return _o||=vo(),_o.test(e)}var bo=/^[\t\n\r\x20-\x7E]*$/;function xo(e){return bo.test(e)}var So=/[\u2028\u2029]/;function Co(e){return So.test(e)}function wo(e){return e>=11904&&e<=55215||e>=63744&&e<=64255||e>=65281&&e<=65374||e>=65504&&e<=65510}function To(e){return e>=127462&&e<=127487||e===8986||e===8987||e===9200||e===9203||e>=9728&&e<=10175||e===11088||e===11093||e>=127744&&e<=128591||e>=128640&&e<=128764||e>=128992&&e<=129008||e>=129280&&e<=129535||e>=129648&&e<=129782}function Eo(e,t,n=``){let r=e.trimStart();if(r.length<t)return r;let i=/\b/g,a=0;for(;i.test(r)&&!(r.length-i.lastIndex<t);)a=i.lastIndex,i.lastIndex+=1;return a===0?r:n+r.substring(a).trimStart()}var Do=RegExp(`(?:`+[`(?:\\x1b\\[|\\x9b)[=?>!]?[\\d;:]*["$#'* ]?[a-zA-Z@^\`{}|~]`,`(?:\\x1b\\]|\\x9d).*?(?:\\x1b\\\\|\\x07|\\x9c)`,`\\x1b(?:[ #%\\(\\)\\*\\+\\-\\.\\/]?[a-zA-Z0-9\\|}~@])`].join(`|`)+`)`,`g`);function Oo(e){return e&&=e.replace(Do,``),e}var ko=String.fromCharCode(O.UTF8_BOM);function Ao(e){return!!(e&&e.length>0&&e.charCodeAt(0)===O.UTF8_BOM)}function jo(e,t){if(!e||!t||e.length<t.length)return!1;let n=t.length,r=e.toLowerCase(),i=0,a=-1;for(;i<n;){let e=r.indexOf(t[i],a+1);if(e<0)return!1;a=e,i++}return!0}function Mo(e,t=!1){return e?(t&&(e=e.replace(/\\./g,``)),e.toLowerCase()!==e):!1}function No(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Po(e,t=1){if(t===0)return``;let n=-1;do n=e.indexOf(`
`,n+1),t--;while(t>0&&n>=0);return n===-1?e:(e[n-1]===`\r`&&n--,e.substr(0,n))}function Fo(e){let t=O.Z-O.A+1;return e%=2*t,e<t?String.fromCharCode(O.a+e):String.fromCharCode(O.A+e-t)}function Io(e,t){return e===Lo.Other?t!==Lo.Extend&&t!==Lo.SpacingMark:e===Lo.CR&&t===Lo.LF?!1:e===Lo.Control||e===Lo.CR||e===Lo.LF||t===Lo.Control||t===Lo.CR||t===Lo.LF?!0:!(e===Lo.L&&(t===Lo.L||t===Lo.V||t===Lo.LV||t===Lo.LVT)||(e===Lo.LV||e===Lo.V)&&(t===Lo.V||t===Lo.T)||(e===Lo.LVT||e===Lo.T)&&t===Lo.T||t===Lo.Extend||t===Lo.ZWJ||t===Lo.SpacingMark||e===Lo.Prepend||e===Lo.ZWJ&&t===Lo.Extended_Pictographic||e===Lo.Regional_Indicator&&t===Lo.Regional_Indicator)}var Lo;(function(e){e[e.Other=0]=`Other`,e[e.Prepend=1]=`Prepend`,e[e.CR=2]=`CR`,e[e.LF=3]=`LF`,e[e.Control=4]=`Control`,e[e.Extend=5]=`Extend`,e[e.Regional_Indicator=6]=`Regional_Indicator`,e[e.SpacingMark=7]=`SpacingMark`,e[e.L=8]=`L`,e[e.V=9]=`V`,e[e.T=10]=`T`,e[e.LV=11]=`LV`,e[e.LVT=12]=`LVT`,e[e.ZWJ=13]=`ZWJ`,e[e.Extended_Pictographic=14]=`Extended_Pictographic`})(Lo||={});var Ro=class e{static#e=this._INSTANCE=null;static getInstance(){return e._INSTANCE||=new e,e._INSTANCE}constructor(){this._data=zo()}getGraphemeBreakType(e){if(e<32)return e===O.LineFeed?Lo.LF:e===O.CarriageReturn?Lo.CR:Lo.Control;if(e<127)return Lo.Other;let t=this._data,n=t.length/3,r=1;for(;r<=n;)if(e<t[3*r])r=2*r;else if(e>t[3*r+1])r=2*r+1;else return t[3*r+2];return Lo.Other}};function zo(){return JSON.parse(`[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]`)}function Bo(e,t){if(e===0)return 0;let n=Vo(e,t);if(n!==void 0)return n;let r=new fo(t,e);return r.prevCodePoint(),r.offset}function Vo(e,t){let n=new fo(t,e),r=n.prevCodePoint();for(;Ho(r)||r===Uo.emojiVariantSelector||r===Uo.enclosingKeyCap;){if(n.offset===0)return;r=n.prevCodePoint()}if(!To(r))return;let i=n.offset;return i>0&&n.prevCodePoint()===Uo.zwj&&(i=n.offset),i}function Ho(e){return 127995<=e&&e<=127999}var Uo;(function(e){e[e.zwj=8205]=`zwj`,e[e.emojiVariantSelector=65039]=`emojiVariantSelector`,e[e.enclosingKeyCap=8419]=`enclosingKeyCap`,e[e.space=32]=`space`})(Uo||={});var Wo=`\xA0`,Go=class e{static#e=this.ambiguousCharacterData=new Sa(()=>JSON.parse(`{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,1523,96,8242,96,1370,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,118002,50,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,118003,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,118004,52,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,118005,53,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,118006,54,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,118007,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,118008,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,118009,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,117974,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,117975,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71913,67,71922,67,65315,67,8557,67,8450,67,8493,67,117976,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,117977,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,117978,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,117979,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,117980,71,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,117981,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,117983,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,117984,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,118001,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,117982,108,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,117985,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,117986,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,117987,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,118000,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,117988,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,117989,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,117990,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,117991,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,117992,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,117993,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,117994,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,117995,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71910,87,71919,87,117996,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,117997,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,117998,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,71909,90,66293,90,65338,90,8484,90,8488,90,117999,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65283,35,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"cs":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"es":[8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"fr":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"it":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"ja":[8211,45,8218,44,65281,33,8216,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65292,44,65297,49,65307,59],"ko":[8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"pt-BR":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"ru":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"zh-hans":[160,32,65374,126,8218,44,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65297,49],"zh-hant":[8211,45,65374,126,8218,44,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89]}`));static#t=this.cache=new ya(t=>{let n=t.split(`,`);function r(e){let t=new Map;for(let n=0;n<e.length;n+=2)t.set(e[n],e[n+1]);return t}function i(e,t){let n=new Map(e);for(let[e,r]of t)n.set(e,r);return n}function a(e,t){if(!e)return t;let n=new Map;for(let[r,i]of e)t.has(r)&&n.set(r,i);return n}let o=this.ambiguousCharacterData.value,s=n.filter(e=>!e.startsWith(`_`)&&Object.hasOwn(o,e));s.length===0&&(s=[`_default`]);let c;for(let e of s){let t=r(o[e]);c=a(c,t)}return new e(i(r(o._common),c))});static getInstance(t){return e.cache.get(Array.from(t).join(`,`))}static#n=this._locales=new Sa(()=>Object.keys(e.ambiguousCharacterData.value).filter(e=>!e.startsWith(`_`)));static getLocales(){return e._locales.value}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}containsAmbiguousCharacter(e){for(let t=0;t<e.length;t++){let n=e.codePointAt(t);if(typeof n==`number`&&this.isAmbiguous(n))return!0}return!1}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}},Ko=class e{static getRawData(){return JSON.parse(`{"_common":[11,12,13,127,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999],"cs":[173,8203,12288],"de":[173,8203,12288],"es":[8203,12288],"fr":[173,8203,12288],"it":[160,173,12288],"ja":[173],"ko":[173,12288],"pl":[173,8203,12288],"pt-BR":[173,8203,12288],"qps-ploc":[160,173,8203,12288],"ru":[173,12288],"tr":[160,173,8203,12288],"zh-hans":[160,173,8203,12288],"zh-hant":[173,12288]}`)}static#e=this._data=void 0;static getData(){return this._data||=new Set([...Object.values(e.getRawData())].flat()),this._data}static isInvisibleCharacter(t){return e.getData().has(t)}static containsInvisibleCharacter(t){for(let n=0;n<t.length;n++){let r=t.codePointAt(n);if(typeof r==`number`&&(e.isInvisibleCharacter(r)||r===Uo.space))return!0}return!1}static get codePoints(){return e.getData()}};function qo(e){let t=new Uint16Array(e.length);for(let n=0;n<t.length;n++)t[n]=e.charCodeAt(n);let n=``,r=new Uint8Array(t.buffer);for(let e=0;e<r.length;e++)n+=String.fromCharCode(r[e]);return n}function Jo(e){return btoa(qo(e))}var Yo;(function(e){e[e.BASE=36]=`BASE`,e[e.TMIN=1]=`TMIN`,e[e.TMAX=26]=`TMAX`,e[e.SKEW=38]=`SKEW`,e[e.DAMP=700]=`DAMP`,e[e.INITIAL_BIAS=72]=`INITIAL_BIAS`,e[e.INITIAL_N=128]=`INITIAL_N`,e[e.DELIMITER=45]=`DELIMITER`})(Yo||={});function Xo(e){return e===O.Slash||e===O.Backslash}function Zo(e){return e.replace(/[\\/]/g,oa.sep)}function cee(e){return e.indexOf(`/`)===-1&&(e=Zo(e)),/^[a-zA-Z]:(\/|$)/.test(e)&&(e=`/`+e),e}function Qo(e,t=oa.sep){if(!e)return``;let n=e.length,r=e.charCodeAt(0);if(Xo(r)){if(Xo(e.charCodeAt(1))&&!Xo(e.charCodeAt(2))){let r=3,i=r;for(;r<n&&!Xo(e.charCodeAt(r));r++);if(i!==r&&!Xo(e.charCodeAt(r+1))){for(r+=1;r<n;r++)if(Xo(e.charCodeAt(r)))return e.slice(0,r+1).replace(/[\\/]/g,t)}}return t}else if(es(r)&&e.charCodeAt(1)===O.Colon)return Xo(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let i=e.indexOf(`://`);if(i!==-1){for(i+=3;i<n;i++)if(Xo(e.charCodeAt(i)))return e.slice(0,i+1)}return``}function lee(e){if(!oi||!e||e.length<5)return!1;let t=e.charCodeAt(0);if(t!==O.Backslash||(t=e.charCodeAt(1),t!==O.Backslash))return!1;let n=2,r=n;for(;n<e.length&&(t=e.charCodeAt(n),t!==O.Backslash);n++);return!(r===n||(t=e.charCodeAt(n+1),isNaN(t)||t===O.Backslash))}var uee=/[\\/:\*\?"<>\|]/g,dee=/[/]/g,fee=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function pee(e,t=oi){let n=t?uee:dee;return!(!e||e.length===0||/^\s+$/.test(e)||(n.lastIndex=0,n.test(e))||t&&fee.test(e)||e===`.`||e===`..`||t&&e[e.length-1]===`.`||t&&e.length!==e.trim().length||e.length>255)}function mee(e,t,n){let r=e===t;return!n||r?r:!e||!t?!1:eo(e,t)}function $o(e,t,n,r=ga){if(e===t)return!0;if(!e||!t||t.length>e.length)return!1;if(n){if(!no(e,t))return!1;if(t.length===e.length)return!0;let n=t.length;return t.charAt(t.length-1)===r&&n--,e.charAt(n)===r}return t.charAt(t.length-1)!==r&&(t+=r),e.indexOf(t)===0}function es(e){return e>=O.A&&e<=O.Z||e>=O.a&&e<=O.z}function ts(e,t=oi){return t?es(e.charCodeAt(0))&&e.charCodeAt(1)===O.Colon:!1}function hee(e,t=oi){return ts(e,t)?e[0]:void 0}function gee(e,t,n){return t.length>e.length?-1:e===t?0:(n&&(e=e.toLowerCase(),t=t.toLowerCase()),e.indexOf(t))}function _ee(e){let t=e.split(`:`),n,r,i;for(let e of t){let t=Number(e);xe(t)?r===void 0?r=t:i===void 0&&(i=t):n=n?[n,e].join(`:`):e}if(!n)throw Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:n,line:r===void 0?void 0:r,column:i===void 0?r===void 0?void 0:1:i}}var vee=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`,yee=`BDEFGHIJKMOQRSTUVWXYZbdefghijkmoqrstuvwxyz0123456789`;function bee(e,t,n=8){let r=``;for(let e=0;e<n;e++){let t;t=e===0&&oi&&(n===3||n===4)?yee:vee,r+=t.charAt(Math.floor(Math.random()*t.length))}let i;return i=r,i}var ns;(function(e){e[e.Uri=1]=`Uri`,e[e.Regexp=2]=`Regexp`,e[e.ScmResource=3]=`ScmResource`,e[e.ScmResourceGroup=4]=`ScmResourceGroup`,e[e.ScmProvider=5]=`ScmProvider`,e[e.CommentController=6]=`CommentController`,e[e.CommentThread=7]=`CommentThread`,e[e.CommentThreadInstance=8]=`CommentThreadInstance`,e[e.CommentThreadReply=9]=`CommentThreadReply`,e[e.CommentNode=10]=`CommentNode`,e[e.CommentThreadNode=11]=`CommentThreadNode`,e[e.TimelineActionContext=12]=`TimelineActionContext`,e[e.NotebookCellActionContext=13]=`NotebookCellActionContext`,e[e.NotebookActionContext=14]=`NotebookActionContext`,e[e.TerminalContext=15]=`TerminalContext`,e[e.TestItemContext=16]=`TestItemContext`,e[e.Date=17]=`Date`,e[e.TestMessageMenuArgs=18]=`TestMessageMenuArgs`,e[e.ChatViewContext=19]=`ChatViewContext`,e[e.LanguageModelToolResult=20]=`LanguageModelToolResult`,e[e.LanguageModelTextPart=21]=`LanguageModelTextPart`,e[e.LanguageModelThinkingPart=22]=`LanguageModelThinkingPart`,e[e.LanguageModelPromptTsxPart=23]=`LanguageModelPromptTsxPart`,e[e.LanguageModelDataPart=24]=`LanguageModelDataPart`,e[e.AgentSessionContext=25]=`AgentSessionContext`,e[e.ChatResponsePullRequestPart=26]=`ChatResponsePullRequestPart`})(ns||={});var xee=/^\w[\w\d+.-]*$/,See=/^\//,Cee=/^\/\//;function wee(e,t){if(!e.scheme&&t)throw Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!xee.test(e.scheme))throw Error(`[UriError]: Scheme contains illegal characters.`);if(e.path){if(e.authority){if(!See.test(e.path))throw Error(`[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character`)}else if(Cee.test(e.path))throw Error(`[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")`)}}function Tee(e,t){return!e&&!t?`file`:e}function Eee(e,t){switch(e){case`https`:case`http`:case`file`:t?t[0]!==is&&(t=is+t):t=is;break}return t}var rs=``,is=`/`,Dee=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,k=class e{static isUri(t){return t instanceof e?!0:!t||typeof t!=`object`?!1:typeof t.authority==`string`&&typeof t.fragment==`string`&&typeof t.path==`string`&&typeof t.query==`string`&&typeof t.scheme==`string`&&typeof t.fsPath==`string`&&typeof t.with==`function`&&typeof t.toString==`function`}constructor(e,t,n,r,i,a=!1){typeof e==`object`?(this.scheme=e.scheme||rs,this.authority=e.authority||rs,this.path=e.path||rs,this.query=e.query||rs,this.fragment=e.fragment||rs):(this.scheme=Tee(e,a),this.authority=t||rs,this.path=Eee(this.scheme,n||rs),this.query=r||rs,this.fragment=i||rs,wee(this,a))}get fsPath(){return ds(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:n,path:r,query:i,fragment:a}=e;return t===void 0?t=this.scheme:t===null&&(t=rs),n===void 0?n=this.authority:n===null&&(n=rs),r===void 0?r=this.path:r===null&&(r=rs),i===void 0?i=this.query:i===null&&(i=rs),a===void 0?a=this.fragment:a===null&&(a=rs),t===this.scheme&&n===this.authority&&r===this.path&&i===this.query&&a===this.fragment?this:new ss(t,n,r,i,a)}static parse(e,t=!1){let n=Dee.exec(e);return n?new ss(n[2]||rs,hs(n[4]||rs),hs(n[5]||rs),hs(n[7]||rs),hs(n[9]||rs),t):new ss(rs,rs,rs,rs,rs)}static file(e){let t=rs;if(oi&&(e=e.replace(/\\/g,is)),e[0]===is&&e[1]===is){let n=e.indexOf(is,2);n===-1?(t=e.substring(2),e=is):(t=e.substring(2,n),e=e.substring(n)||is)}return new ss(`file`,t,e,rs,rs)}static from(e,t){return new ss(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(t,...n){if(!t.path)throw Error(`[UriError]: cannot call joinPath on URI without path`);let r;return r=oi&&t.scheme===`file`?e.file(aa.join(ds(t,!0),...n)).path:oa.join(t.path,...n),t.with({path:r})}toString(e=!1){return fs(this,e)}toJSON(){return this}static revive(t){if(t){if(t instanceof e)return t;{let e=new ss(t);return e._formatted=t.external??null,e._fsPath=t._sep===os?t.fsPath??null:null,e}}else return t}[Symbol.for(`debug.description`)](){return`URI(${this.toString()})`}};function as(e){return!e||typeof e!=`object`?!1:typeof e.scheme==`string`&&(typeof e.authority==`string`||e.authority===void 0)&&(typeof e.path==`string`||e.path===void 0)&&(typeof e.query==`string`||e.query===void 0)&&(typeof e.fragment==`string`||e.fragment===void 0)}var os=oi?1:void 0,ss=class extends k{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||=ds(this,!1),this._fsPath}toString(e=!1){return e?fs(this,!0):(this._formatted||=fs(this,!1),this._formatted)}toJSON(){let e={$mid:ns.Uri};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=os),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},cs={[O.Colon]:`%3A`,[O.Slash]:`%2F`,[O.QuestionMark]:`%3F`,[O.Hash]:`%23`,[O.OpenSquareBracket]:`%5B`,[O.CloseSquareBracket]:`%5D`,[O.AtSign]:`%40`,[O.ExclamationMark]:`%21`,[O.DollarSign]:`%24`,[O.Ampersand]:`%26`,[O.SingleQuote]:`%27`,[O.OpenParen]:`%28`,[O.CloseParen]:`%29`,[O.Asterisk]:`%2A`,[O.Plus]:`%2B`,[O.Comma]:`%2C`,[O.Semicolon]:`%3B`,[O.Equals]:`%3D`,[O.Space]:`%20`};function ls(e,t,n){let r,i=-1;for(let a=0;a<e.length;a++){let o=e.charCodeAt(a);if(o>=O.a&&o<=O.z||o>=O.A&&o<=O.Z||o>=O.Digit0&&o<=O.Digit9||o===O.Dash||o===O.Period||o===O.Underline||o===O.Tilde||t&&o===O.Slash||n&&o===O.OpenSquareBracket||n&&o===O.CloseSquareBracket||n&&o===O.Colon)i!==-1&&(r+=encodeURIComponent(e.substring(i,a)),i=-1),r!==void 0&&(r+=e.charAt(a));else{r===void 0&&(r=e.substr(0,a));let t=cs[o];t===void 0?i===-1&&(i=a):(i!==-1&&(r+=encodeURIComponent(e.substring(i,a)),i=-1),r+=t)}}return i!==-1&&(r+=encodeURIComponent(e.substring(i))),r===void 0?e:r}function us(e){let t;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r===O.Hash||r===O.QuestionMark?(t===void 0&&(t=e.substr(0,n)),t+=cs[r]):t!==void 0&&(t+=e[n])}return t===void 0?e:t}function ds(e,t){let n;return n=e.authority&&e.path.length>1&&e.scheme===`file`?`//${e.authority}${e.path}`:e.path.charCodeAt(0)===O.Slash&&(e.path.charCodeAt(1)>=O.A&&e.path.charCodeAt(1)<=O.Z||e.path.charCodeAt(1)>=O.a&&e.path.charCodeAt(1)<=O.z)&&e.path.charCodeAt(2)===O.Colon?t?e.path.substr(1):e.path[1].toLowerCase()+e.path.substr(2):e.path,oi&&(n=n.replace(/\//g,`\\`)),n}function fs(e,t){let n=t?us:ls,r=``,{scheme:i,authority:a,path:o,query:s,fragment:c}=e;if(i&&(r+=i,r+=`:`),(a||i===`file`)&&(r+=is,r+=is),a){let e=a.indexOf(`@`);if(e!==-1){let t=a.substr(0,e);a=a.substr(e+1),e=t.lastIndexOf(`:`),e===-1?r+=n(t,!1,!1):(r+=n(t.substr(0,e),!1,!1),r+=`:`,r+=n(t.substr(e+1),!1,!0)),r+=`@`}a=a.toLowerCase(),e=a.lastIndexOf(`:`),e===-1?r+=n(a,!1,!0):(r+=n(a.substr(0,e),!1,!0),r+=a.substr(e))}if(o){if(o.length>=3&&o.charCodeAt(0)===O.Slash&&o.charCodeAt(2)===O.Colon){let e=o.charCodeAt(1);e>=O.A&&e<=O.Z&&(o=`/${String.fromCharCode(e+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===O.Colon){let e=o.charCodeAt(0);e>=O.A&&e<=O.Z&&(o=`${String.fromCharCode(e+32)}:${o.substr(2)}`)}r+=n(o,!0,!1)}return s&&(r+=`?`,r+=n(s,!1,!1)),c&&(r+=`#`,r+=t?c:ls(c,!1,!1)),r}function ps(e){try{return decodeURIComponent(e)}catch{return e.length>3?e.substr(0,3)+ps(e.substr(3)):e}}var ms=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function hs(e){return e.match(ms)?e.replace(ms,e=>ps(e)):e}var A;(function(e){e.inMemory=`inmemory`,e.vscode=`vscode`,e.internal=`private`,e.walkThrough=`walkThrough`,e.walkThroughSnippet=`walkThroughSnippet`,e.http=`http`,e.https=`https`,e.file=`file`,e.mailto=`mailto`,e.untitled=`untitled`,e.data=`data`,e.command=`command`,e.vscodeRemote=`vscode-remote`,e.vscodeRemoteResource=`vscode-remote-resource`,e.vscodeManagedRemoteResource=`vscode-managed-remote-resource`,e.vscodeUserData=`vscode-userdata`,e.vscodeCustomEditor=`vscode-custom-editor`,e.vscodeNotebookCell=`vscode-notebook-cell`,e.vscodeNotebookCellMetadata=`vscode-notebook-cell-metadata`,e.vscodeNotebookCellMetadataDiff=`vscode-notebook-cell-metadata-diff`,e.vscodeNotebookCellOutput=`vscode-notebook-cell-output`,e.vscodeNotebookCellOutputDiff=`vscode-notebook-cell-output-diff`,e.vscodeNotebookMetadata=`vscode-notebook-metadata`,e.vscodeInteractiveInput=`vscode-interactive-input`,e.vscodeSettings=`vscode-settings`,e.vscodeWorkspaceTrust=`vscode-workspace-trust`,e.vscodeTerminal=`vscode-terminal`,e.vscodeChatCodeBlock=`vscode-chat-code-block`,e.vscodeChatCodeCompareBlock=`vscode-chat-code-compare-block`,e.vscodeChatEditor=`vscode-chat-editor`,e.vscodeChatInput=`chatSessionInput`,e.vscodeLocalChatSession=`vscode-chat-session`,e.webviewPanel=`webview-panel`,e.vscodeWebview=`vscode-webview`,e.vscodeBrowser=`vscode-browser`,e.extension=`extension`,e.vscodeFileResource=`vscode-file`,e.tmp=`tmp`,e.vsls=`vsls`,e.vscodeSourceControl=`vscode-scm`,e.commentsInput=`comment`,e.codeSetting=`code-setting`,e.outputChannel=`output`,e.accessibleView=`accessible-view`,e.chatEditingSnapshotScheme=`chat-editing-snapshot-text-model`,e.chatEditingModel=`chat-editing-text-model`,e.copilotPr=`copilot-pr`})(A||={});function gs(e,t){return k.isUri(e)?eo(e.scheme,t):no(e,t+`:`)}function _s(e,...t){return t.some(t=>gs(e,t))}var vs=new class{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema=`http`,this._delegate=null,this._serverRootPath=`/`}setPreferredWebSchema(e){this._preferredWebSchema=e}setDelegate(e){this._delegate=e}setServerRootPath(e,t){this._serverRootPath=oa.join(t??`/`,ys(e))}getServerRootPath(){return this._serverRootPath}get _remoteResourcesPath(){return oa.join(this._serverRootPath,A.vscodeRemoteResource)}set(e,t,n){this._hosts[e]=t,this._ports[e]=n}setConnectionToken(e,t){this._connectionTokens[e]=t}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(t){return p(t),e}let t=e.authority,n=this._hosts[t];n&&n.indexOf(`:`)!==-1&&n.indexOf(`[`)===-1&&(n=`[${n}]`);let r=this._ports[t],i=this._connectionTokens[t],a=`path=${encodeURIComponent(e.path)}`;return typeof i==`string`&&(a+=`&tkn=${encodeURIComponent(i)}`),k.from({scheme:di?this._preferredWebSchema:A.vscodeRemoteResource,authority:`${n}:${r}`,path:this._remoteResourcesPath,query:a})}};function ys(e){return`${e.quality??`oss`}-${e.commit??`dev`}`}var bs=`vs/../../node_modules`,xs=`vscode-app`,Ss=new class e{constructor(){this.staticBrowserUris=new dn,this.appResourcePathUrls=new Map,this.appResourceUrlMapper=[]}static#e=this.FALLBACK_AUTHORITY=xs;registerAppResourcePathUrl(e,t){this.appResourcePathUrls.set(e,t)}registerAppResourceLoader(e){this.appResourceUrlMapper.push(e)}toUrl(e){let t=this.appResourcePathUrls.get(e);typeof t==`function`&&(t=t());for(let t of this.appResourceUrlMapper){let n=t(e);if(n)return n}return new URL(t??e,globalThis.location?.href??import.meta.url).toString()}asBrowserUri(e){let t=this.toUri(e);return this.uriToBrowserUri(t)}uriToBrowserUri(t){return t.scheme===A.vscodeRemote?vs.rewrite(t):t.scheme===A.file&&(li||pi===`${A.vscodeFileResource}://${e.FALLBACK_AUTHORITY}`)?t.with({scheme:A.vscodeFileResource,authority:t.authority||e.FALLBACK_AUTHORITY,query:null,fragment:null}):this.staticBrowserUris.get(t)??t}asFileUri(e){let t=this.toUri(e);return this.uriToFileUri(t)}uriToFileUri(t){return t.scheme===A.vscodeFileResource?t.with({scheme:A.file,authority:t.authority===e.FALLBACK_AUTHORITY?null:t.authority,query:null,fragment:null}):t}toUri(e){if(k.isUri(e))return e;if(globalThis._VSCODE_FILE_ROOT){let t=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(t))return k.joinPath(k.parse(t,!0),e);let n=la(t,e);return k.file(n)}return k.parse(this.toUrl(e))}registerStaticBrowserUri(e,t){return this.staticBrowserUris.set(e,t),S(()=>{this.staticBrowserUris.get(e)===t&&this.staticBrowserUris.delete(e)})}getRegisteredBrowserUris(){return this.staticBrowserUris.keys()}},Cs;(function(e){let t=new Map([[`1`,{"Cross-Origin-Opener-Policy":`same-origin`}],[`2`,{"Cross-Origin-Embedder-Policy":`require-corp`}],[`3`,{"Cross-Origin-Opener-Policy":`same-origin`,"Cross-Origin-Embedder-Policy":`require-corp`}]]);e.CoopAndCoep=Object.freeze(t.get(`3`));let n=`vscode-coi`;function r(e){let r;typeof e==`string`?r=new URL(e).searchParams:e instanceof URL?r=e.searchParams:k.isUri(e)&&(r=new URL(e.toString(!0)).searchParams);let i=r?.get(n);if(i)return t.get(i)}e.getHeadersFromQuery=r;function i(e,t,r){if(!globalThis.crossOriginIsolated)return;let i=t&&r?`3`:r?`2`:`1`;e instanceof URLSearchParams?e.set(n,i):e[n]=i}e.addSearchParam=i})(Cs||={});function ws(e){return ds(e,!0)}var Ts=class{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:qa(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this._ignorePathCasing(e)}isEqualOrParent(e,t,n=!1){if(e.scheme===t.scheme){if(e.scheme===A.file)return $o(ws(e),ws(t),this._ignorePathCasing(e))&&e.query===t.query&&(n||e.fragment===t.fragment);if(Bs(e.authority,t.authority))return $o(e.path,t.path,this._ignorePathCasing(e),`/`)&&e.query===t.query&&(n||e.fragment===t.fragment)}return!1}joinPath(e,...t){return k.joinPath(e,...t)}basenameOrAuthority(e){return Ms(e)||e.authority}basename(e){return oa.basename(e.path)}extname(e){return oa.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===A.file?t=k.file(fa(ws(e))).path:(t=oa.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==O.Slash&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t=`/`)),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return t=e.scheme===A.file?k.file(sa(ws(e))).path:oa.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!Bs(e.authority,t.authority))return;if(e.scheme===A.file){let n=da(ws(e),ws(t));return oi?Zo(n):n}let n=e.path||`/`,r=t.path||`/`;if(this._ignorePathCasing(e)){let e=0;for(let t=Math.min(n.length,r.length);e<t&&!(n.charCodeAt(e)!==r.charCodeAt(e)&&n.charAt(e).toLowerCase()!==r.charAt(e).toLowerCase());e++);n=r.substr(0,e)+n.substr(e)}return oa.relative(n,r)}resolvePath(e,t){if(e.scheme===A.file){let n=k.file(ua(ws(e),t));return e.with({authority:n.authority,path:n.path})}return t=cee(t),e.with({path:oa.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]===`/`}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&eo(e,t)}hasTrailingPathSeparator(e,t=ga){if(e.scheme===A.file){let n=ws(e);return n.length>Qo(n).length&&n[n.length-1]===t}else{let t=e.path;return t.length>1&&t.charCodeAt(t.length-1)===O.Slash&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=ga){return Vs(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=ga){let n=!1;if(e.scheme===A.file){let r=ws(e);n=r!==void 0&&r.length===Qo(r).length&&r[r.length-1]===t}else{t=`/`;let r=e.path;n=r.length===1&&r.charCodeAt(r.length-1)===O.Slash}return!n&&!Vs(e,t)?e.with({path:e.path+`/`}):e}},Es=new Ts(()=>!1),Ds=new Ts(e=>e.scheme===A.file?!ci:!0),Os=new Ts(e=>!0),ks=Es.isEqual.bind(Es),As=Es.isEqualOrParent.bind(Es);Es.getComparisonKey.bind(Es);var js=Es.basenameOrAuthority.bind(Es),Ms=Es.basename.bind(Es),Ns=Es.extname.bind(Es),Ps=Es.dirname.bind(Es),Fs=Es.joinPath.bind(Es),Is=Es.normalizePath.bind(Es),Ls=Es.relativePath.bind(Es),Rs=Es.resolvePath.bind(Es),zs=Es.isAbsolutePath.bind(Es),Bs=Es.isEqualAuthority.bind(Es),Vs=Es.hasTrailingPathSeparator.bind(Es),Hs=Es.removeTrailingPathSeparator.bind(Es),Us=Es.addTrailingPathSeparator.bind(Es);function Ws(e,t){let n=[];for(let r=0;r<e.length;r++){let i=t(e[r]);e.some((e,n)=>n===r?!1:As(i,t(e)))||n.push(e[r])}return n}var Gs;(function(e){e.META_DATA_LABEL=`label`,e.META_DATA_DESCRIPTION=`description`,e.META_DATA_SIZE=`size`,e.META_DATA_MIME=`mime`;function t(t){let n=new Map;t.path.substring(t.path.indexOf(`;`)+1,t.path.lastIndexOf(`;`)).split(`;`).forEach(e=>{let[t,r]=e.split(`:`);t&&r&&n.set(t,r)});let r=t.path.substring(0,t.path.indexOf(`;`));return r&&n.set(e.META_DATA_MIME,r),n}e.parseMetaData=t})(Gs||={});function Ks(e,t,n){if(t){let r=e.path;return r&&r[0]!==oa.sep&&(r=oa.sep+r),e.with({scheme:n,authority:t,path:r})}return e.with({scheme:n})}var qs=Symbol(`MicrotaskDelay`);function Js(e){return!!e&&typeof e.then==`function`}function Ys(e){let t=new Lr,n=e(t.token),r=!1,i=new Promise((e,i)=>{let a=t.token.onCancellationRequested(()=>{r=!0,a.dispose(),i(new ee)});Promise.resolve(n).then(n=>{a.dispose(),t.dispose(),r?Mn(n)&&n.dispose():e(n)},e=>{a.dispose(),t.dispose(),i(e)})});return new class{cancel(){t.cancel(),t.dispose()}then(e,t){return i.then(e,t)}catch(e){return this.then(void 0,e)}finally(e){return i.finally(e)}}}function Xs(e,t,n){return new Promise((r,i)=>{let a=t.onCancellationRequested(()=>{a.dispose(),r(n)});e.then(r,i).finally(()=>a.dispose())})}function Zs(e,t){return new Promise((n,r)=>{let i=t.onCancellationRequested(()=>{i.dispose(),r(new ee)});e.then(n,r).finally(()=>i.dispose())})}function Qs(e){return new Promise((t,n)=>{e.then(t,n)})}function $s(e){let t=-1,n=e.map((e,n)=>e.then(e=>(t=n,e))),r=Promise.race(n);return r.cancel=()=>{e.forEach((e,n)=>{n!==t&&e.cancel&&e.cancel()})},r.finally(()=>{r.cancel()}),r}function ec(e,t,n){let r,i=setTimeout(()=>{r?.(void 0),n?.()},t);return Promise.race([e.finally(()=>clearTimeout(i)),new Promise(e=>r=e)])}function tc(e){return new Promise((t,n)=>{let r=e();Js(r)?r.then(t,n):t(r)})}function nc(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}var rc=class{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null,this.cancellationTokenSource=new Lr}queue(e){if(this.cancellationTokenSource.token.isCancellationRequested)return Promise.reject(Error(`Throttler is disposed`));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){let e=()=>{if(this.queuedPromise=null,this.cancellationTokenSource.token.isCancellationRequested)return;let e=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,e};this.queuedPromise=new Promise(t=>{this.activePromise.then(e,e).then(t)})}return new Promise((e,t)=>{this.queuedPromise.then(e,t)})}return this.activePromise=e(this.cancellationTokenSource.token),new Promise((e,t)=>{this.activePromise.then(t=>{this.activePromise=null,e(t)},e=>{this.activePromise=null,t(e)})})}dispose(){this.cancellationTokenSource.cancel()}},ic=class{constructor(){this.current=Promise.resolve(null)}queue(e){return this.current=this.current.then(()=>e(),()=>e())}},ac=class{constructor(){this.promiseMap=new Map}queue(e,t){let n=(this.promiseMap.get(e)??Promise.resolve()).catch(()=>{}).then(t).finally(()=>{this.promiseMap.get(e)===n&&this.promiseMap.delete(e)});return this.promiseMap.set(e,n),n}peek(e){return this.promiseMap.get(e)||void 0}keys(){return this.promiseMap.keys()}},oc=(e,t)=>{let n=!0,r=setTimeout(()=>{n=!1,t()},e);return{isTriggered:()=>n,dispose:()=>{clearTimeout(r),n=!1}}},sc=e=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,e())}),{isTriggered:()=>t,dispose:()=>{t=!1}}},cc=class{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||=new Promise((e,t)=>{this.doResolve=e,this.doReject=t}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){let e=this.task;return this.task=null,e()}});let n=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=t===qs?sc(n):oc(t,n),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&=(this.doReject?.(new ee),null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}},lc=class{constructor(e){this.delayer=new cc(e),this.throttler=new rc}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}},uc=class{constructor(){this._isOpen=!1,this._promise=new Promise((e,t)=>{this._completePromise=e})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}};function dc(e,t){return t?new Promise((n,r)=>{let i=setTimeout(()=>{a.dispose(),n()},e),a=t.onCancellationRequested(()=>{clearTimeout(i),a.dispose(),r(new ee)})}):Ys(t=>dc(e,t))}function fc(e,t=0,n){let r=setTimeout(()=>{e(),n&&i.dispose()},t),i=S(()=>{clearTimeout(r),n?.delete(i)});return n?.add(i),i}function pc(e,t=e=>!!e,n=null){let r=0,i=e.length,a=()=>{if(r>=i)return Promise.resolve(n);let o=e[r++];return Promise.resolve(o()).then(e=>t(e)?Promise.resolve(e):a())};return a()}var mc=class{constructor(e){this._size=0,this._isDisposed=!1,this.maxDegreeOfParalellism=e,this.outstandingPromises=[],this.runningPromises=0,this._onDrained=new E}whenIdle(){return this.size>0?T.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this._onDrained.event}get size(){return this._size}queue(e){if(this._isDisposed)throw Error(`Object has been disposed`);return this._size++,new Promise((t,n)=>{this.outstandingPromises.push({factory:e,c:t,e:n}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){let e=this.outstandingPromises.shift();this.runningPromises++;let t=e.factory();t.then(e.c,e.e),t.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._isDisposed||(this.runningPromises--,--this._size===0&&this._onDrained.fire(),this.outstandingPromises.length>0&&this.consume())}clear(){if(this._isDisposed)throw Error(`Object has been disposed`);this.outstandingPromises.length=0,this._size=this.runningPromises}dispose(){this._isDisposed=!0,this.outstandingPromises.length=0,this._size=0,this._onDrained.dispose()}},hc=class extends mc{constructor(){super(1)}},gc=class{constructor(){this.queues=new Map,this.drainers=new Set,this.drainListeners=void 0,this.drainListenerCount=0}async whenDrained(){if(this.isDrained())return;let e=new kc;return this.drainers.add(e),e.p}isDrained(){for(let[,e]of this.queues)if(e.size>0)return!1;return!0}queueSize(e,t=Es){let n=t.getComparisonKey(e);return this.queues.get(n)?.size??0}queueFor(e,t,n=Es){let r=n.getComparisonKey(e),i=this.queues.get(r);if(!i){i=new hc;let e=this.drainListenerCount++,t=T.once(i.onDrained)(()=>{i?.dispose(),this.queues.delete(r),this.onDidQueueDrain(),this.drainListeners?.deleteAndDispose(e),this.drainListeners?.size===0&&(this.drainListeners.dispose(),this.drainListeners=void 0)});this.drainListeners||=new Hn,this.drainListeners.set(e,t),this.queues.set(r,i)}return i.queue(t)}onDidQueueDrain(){this.isDrained()&&this.releaseDrainers()}releaseDrainers(){for(let e of this.drainers)e.complete();this.drainers.clear()}dispose(){for(let[,e]of this.queues)e.dispose();this.queues.clear(),this.releaseDrainers(),this.drainListeners?.dispose()}},_c=class{constructor(){this._runningTask=void 0,this._pendingTasks=[]}schedule(e){let t=new kc;return this._pendingTasks.push({task:e,deferred:t,setUndefinedWhenCleared:!1}),this._runIfNotRunning(),t.p}scheduleSkipIfCleared(e){let t=new kc;return this._pendingTasks.push({task:e,deferred:t,setUndefinedWhenCleared:!0}),this._runIfNotRunning(),t.p}_runIfNotRunning(){this._runningTask===void 0&&this._processQueue()}async _processQueue(){if(this._pendingTasks.length===0)return;let e=this._pendingTasks.shift();if(e){if(this._runningTask)throw new y;this._runningTask=e.task;try{let t=await e.task();e.deferred.complete(t)}catch(t){e.deferred.error(t)}finally{this._runningTask=void 0,this._processQueue()}}}clearPending(){let e=this._pendingTasks;this._pendingTasks=[];for(let t of e)t.setUndefinedWhenCleared?t.deferred.complete(void 0):t.deferred.error(new ee)}},vc=class{constructor(e,t){this._isDisposed=!1,this._token=void 0,typeof e==`function`&&typeof t==`number`&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==void 0&&(clearTimeout(this._token),this._token=void 0)}cancelAndSet(e,t){if(this._isDisposed)throw new y(`Calling 'cancelAndSet' on a disposed TimeoutTimer`);this.cancel(),this._token=setTimeout(()=>{this._token=void 0,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new y(`Calling 'setIfNotSet' on a disposed TimeoutTimer`);this._token===void 0&&(this._token=setTimeout(()=>{this._token=void 0,e()},t))}},yc=class{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(e,t,n=globalThis){if(this.isDisposed)throw new y(`Calling 'cancelAndSet' on a disposed IntervalTimer`);this.cancel();let r=n.setInterval(()=>{e()},t);this.disposable=S(()=>{n.clearInterval(r),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}},bc=class{constructor(e,t){this.timeoutToken=void 0,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=void 0)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==void 0}flush(){this.isScheduled()&&(this.cancel(),this.doRun())}onTimeout(){this.timeoutToken=void 0,this.runner&&this.doRun()}doRun(){this.runner?.()}},xc=class extends bc{constructor(e,t){super(e,t),this.units=[]}work(e){this.units.push(e),this.isScheduled()||this.schedule()}doRun(){let e=this.units;this.units=[],this.runner?.(e)}dispose(){this.units=[],super.dispose()}},Sc,Cc;(function(){let e=globalThis;Cc=typeof e.requestIdleCallback!=`function`||typeof e.cancelIdleCallback!=`function`?(e,t,n)=>{wi(()=>{if(r)return;let e=Date.now()+15;t(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,e-Date.now())}}))});let r=!1;return{dispose(){r||=!0}}}:(e,t,n)=>{let r=e.requestIdleCallback(t,typeof n==`number`?{timeout:n}:void 0),i=!1;return{dispose(){i||(i=!0,e.cancelIdleCallback(r))}}},Sc=(e,t)=>Cc(globalThis,e,t)})();var wc=class{constructor(e,t){this._didRun=!1,this._executor=()=>{try{this._value=t()}catch(e){this._error=e}finally{this._didRun=!0}},this._handle=Cc(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}},Tc=class extends wc{constructor(e){super(globalThis,e)}},Ec=class{isRunning(e){return typeof e==`number`?this._running?.taskId===e:!!this._running}get running(){return this._running?.promise}cancelRunning(){this._running?.cancel()}run(e,t,n){return this._running={taskId:e,cancel:()=>n?.(),promise:t},t.then(()=>this.doneRunning(e),()=>this.doneRunning(e)),t}doneRunning(e){this._running&&e===this._running.taskId&&(this._running=void 0,this.runQueued())}runQueued(){if(this._queued){let e=this._queued;this._queued=void 0,e.run().then(e.promiseResolve,e.promiseReject)}}queue(e){if(this._queued)this._queued.run=e;else{let{promise:t,resolve:n,reject:r}=nc();this._queued={run:e,promise:t,promiseResolve:n,promiseReject:r}}return this._queued.promise}hasQueued(){return!!this._queued}async join(){return this._queued?.promise??this._running?.promise}},Dc=class{constructor(e,t=()=>Date.now()){this.interval=e,this.nowFn=t,this.lastIncrementTime=0,this.value=0}increment(){let e=this.nowFn();return e-this.lastIncrementTime>this.interval&&(this.lastIncrementTime=e,this.value=0),this.value++,this.value}},Oc;(function(e){e[e.Resolved=0]=`Resolved`,e[e.Rejected=1]=`Rejected`})(Oc||={});var kc=class e{static fromPromise(t){let n=new e;return n.settleWith(t),n}get isRejected(){return this.outcome?.outcome===Oc.Rejected}get isResolved(){return this.outcome?.outcome===Oc.Resolved}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===Oc.Resolved?this.outcome?.value:void 0}constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return this.isSettled?Promise.resolve():new Promise(t=>{this.completeCallback(e),this.outcome={outcome:Oc.Resolved,value:e},t()})}error(e){return this.isSettled?Promise.resolve():new Promise(t=>{this.errorCallback(e),this.outcome={outcome:Oc.Rejected,value:e},t()})}settleWith(e){return e.then(e=>this.complete(e),e=>this.error(e))}cancel(){return this.error(new ee)}},Ac;(function(e){async function t(e){let t,n=await Promise.all(e.map(e=>e.then(e=>e,e=>{t||=e})));if(t!==void 0)throw t;return n}e.settled=t;function n(e){return new Promise(async(t,n)=>{try{await e(t,n)}catch(e){n(e)}})}e.withAsyncBody=n})(Ac||={});var jc=class{get value(){return this._value}get error(){return this._error}get isResolved(){return this._isResolved}constructor(e){this._value=void 0,this._error=void 0,this._isResolved=!1,this.promise=e.then(e=>(this._value=e,this._isResolved=!0,e),e=>{throw this._error=e,this._isResolved=!0,e})}requireValue(){if(!this._isResolved)throw new y(`Promise is not resolved yet`);if(this._error)throw this._error;return this._value}},Mc=class{constructor(e){this._compute=e,this._promise=new Sa(()=>new jc(this._compute()))}requireValue(){return this._promise.value.requireValue()}getPromise(){return this._promise.value.promise}get currentValue(){return this._promise.rawValue?.value}},Nc;(function(e){e[e.Initial=0]=`Initial`,e[e.DoneOK=1]=`DoneOK`,e[e.DoneError=2]=`DoneError`})(Nc||={});var Pc=class e{static fromArray(t){return new e(e=>{e.emitMany(t)})}static fromPromise(t){return new e(async e=>{e.emitMany(await t)})}static fromPromisesResolveOrder(t){return new e(async e=>{await Promise.all(t.map(async t=>e.emitOne(await t)))})}static merge(t){return new e(async e=>{await Promise.all(t.map(async t=>{for await(let n of t)e.emitOne(n)}))})}static#e=this.EMPTY=e.fromArray([]);constructor(e,t){this._state=Nc.Initial,this._results=[],this._error=null,this._onReturn=t,this._onStateChanged=new E,queueMicrotask(async()=>{let t={emitOne:e=>this.emitOne(e),emitMany:e=>this.emitMany(e),reject:e=>this.reject(e)};try{await Promise.resolve(e(t)),this.resolve()}catch(e){this.reject(e)}finally{t.emitOne=void 0,t.emitMany=void 0,t.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===Nc.DoneError)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===Nc.DoneOK)return{done:!0,value:void 0};await T.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map(t,n){return new e(async e=>{for await(let r of t)e.emitOne(n(r))})}map(t){return e.map(this,t)}static filter(t,n){return new e(async e=>{for await(let r of t)n(r)&&e.emitOne(r)})}filter(t){return e.filter(this,t)}static coalesce(t){return e.filter(t,e=>!!e)}coalesce(){return e.coalesce(this)}static async toPromise(e){let t=[];for await(let n of e)t.push(n);return t}toPromise(){return e.toPromise(this)}emitOne(e){this._state===Nc.Initial&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===Nc.Initial&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===Nc.Initial&&(this._state=Nc.DoneOK,this._onStateChanged.fire())}reject(e){this._state===Nc.Initial&&(this._state=Nc.DoneError,this._error=e,this._onStateChanged.fire())}};function Fc(e){let t=new Lr,n=e(t.token);return new zc(t,async e=>{let r=t.token.onCancellationRequested(()=>{r.dispose(),t.dispose(),e.reject(new ee)});try{for await(let r of n){if(t.token.isCancellationRequested)return;e.emitOne(r)}r.dispose(),t.dispose()}catch(n){r.dispose(),t.dispose(),e.reject(n)}})}var Ic=class{constructor(e){this._deferred=new kc,this._asyncIterable=new Pc(e=>{if(t){e.reject(t);return}return n&&e.emitMany(n),this._errorFn=t=>e.reject(t),this._emitOneFn=t=>e.emitOne(t),this._emitManyFn=t=>e.emitMany(t),this._deferred.p},e);let t,n;this._errorFn=e=>{t||=e},this._emitOneFn=e=>{n||=[],n.push(e)},this._emitManyFn=e=>{n?e.forEach(e=>n.push(e)):n=e.slice()}}get asyncIterable(){return this._asyncIterable}resolve(){this._deferred.complete()}reject(e){this._errorFn(e),this._deferred.complete()}emitOne(e){this._emitOneFn(e)}emitMany(e){this._emitManyFn(e)}},Lc=class{constructor(){this._unsatisfiedConsumers=[],this._unconsumedValues=[]}get hasFinalValue(){return!!this._finalValue}produce(e){if(this._ensureNoFinalValue(),this._unsatisfiedConsumers.length>0){let t=this._unsatisfiedConsumers.shift();this._resolveOrRejectDeferred(t,e)}else this._unconsumedValues.push(e)}produceFinal(e){this._ensureNoFinalValue(),this._finalValue=e;for(let t of this._unsatisfiedConsumers)this._resolveOrRejectDeferred(t,e);this._unsatisfiedConsumers.length=0}_ensureNoFinalValue(){if(this._finalValue)throw new y(`ProducerConsumer: cannot produce after final value has been set`)}_resolveOrRejectDeferred(e,t){t.ok?e.complete(t.value):e.error(t.error)}consume(){if(this._unconsumedValues.length>0||this._finalValue){let e=this._unconsumedValues.length>0?this._unconsumedValues.shift():this._finalValue;return e.ok?Promise.resolve(e.value):Promise.reject(e.error)}else{let e=new kc;return this._unsatisfiedConsumers.push(e),e.p}}},Rc=class e{constructor(e,t){this._onReturn=t,this._producerConsumer=new Lc,this._iterator={next:()=>this._producerConsumer.consume(),return:()=>(this._onReturn?.(),Promise.resolve({done:!0,value:void 0})),throw:async e=>(this._finishError(e),{done:!0,value:void 0})},queueMicrotask(async()=>{let t=e({emitOne:e=>this._producerConsumer.produce({ok:!0,value:{done:!1,value:e}}),emitMany:e=>{for(let t of e)this._producerConsumer.produce({ok:!0,value:{done:!1,value:t}})},reject:e=>this._finishError(e)});if(!this._producerConsumer.hasFinalValue)try{await t,this._finishOk()}catch(e){this._finishError(e)}})}static fromArray(t){return new e(e=>{e.emitMany(t)})}static fromPromise(t){return new e(async e=>{e.emitMany(await t)})}static fromPromisesResolveOrder(t){return new e(async e=>{await Promise.all(t.map(async t=>e.emitOne(await t)))})}static merge(t){return new e(async e=>{await Promise.all(t.map(async t=>{for await(let n of t)e.emitOne(n)}))})}static#e=this.EMPTY=e.fromArray([]);static map(t,n){return new e(async e=>{for await(let r of t)e.emitOne(n(r))})}static tee(t){let n,r,i=new kc,a=async()=>{if(!(!n||!r))try{for await(let e of t)n.emitOne(e),r.emitOne(e)}catch(e){n.reject(e),r.reject(e)}finally{i.complete()}};return[new e(async e=>(n=e,a(),i.p)),new e(async e=>(r=e,a(),i.p))]}map(t){return e.map(this,t)}static coalesce(t){return e.filter(t,e=>!!e)}coalesce(){return e.coalesce(this)}static filter(t,n){return new e(async e=>{for await(let r of t)n(r)&&e.emitOne(r)})}filter(t){return e.filter(this,t)}_finishOk(){this._producerConsumer.hasFinalValue||this._producerConsumer.produceFinal({ok:!0,value:{done:!0,value:void 0}})}_finishError(e){this._producerConsumer.hasFinalValue||this._producerConsumer.produceFinal({ok:!1,error:e})}[Symbol.asyncIterator](){return this._iterator}},zc=class extends Rc{constructor(e,t){super(t),this._source=e}cancel(){this._source.cancel()}};function Bc(e,t){let n=10**t;return Math.round(e*n)/n}var j=class{constructor(e,t,n,r=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,n))|0,this.a=Bc(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}},Vc=class e{constructor(e,t,n,r){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=Bc(Math.max(Math.min(1,t),0),3),this.l=Bc(Math.max(Math.min(1,n),0),3),this.a=Bc(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(t){let n=t.r/255,r=t.g/255,i=t.b/255,a=t.a,o=Math.max(n,r,i),s=Math.min(n,r,i),c=0,l=0,u=(s+o)/2,d=o-s;if(d>0){switch(l=Math.min(u<=.5?d/(2*u):d/(2-2*u),1),o){case n:c=(r-i)/d+(r<i?6:0);break;case r:c=(i-n)/d+2;break;case i:c=(n-r)/d+4;break}c*=60,c=Math.round(c)}return new e(c,l,u,a)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&--n,n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(t){let n=t.h/360,{s:r,l:i,a}=t,o,s,c;if(r===0)o=s=c=i;else{let t=i<.5?i*(1+r):i+r-i*r,a=2*i-t;o=e._hue2rgb(a,t,n+1/3),s=e._hue2rgb(a,t,n),c=e._hue2rgb(a,t,n-1/3)}return new j(Math.round(o*255),Math.round(s*255),Math.round(c*255),a)}},Hc=class e{constructor(e,t,n,r){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=Bc(Math.max(Math.min(1,t),0),3),this.v=Bc(Math.max(Math.min(1,n),0),3),this.a=Bc(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(t){let n=t.r/255,r=t.g/255,i=t.b/255,a=Math.max(n,r,i),o=a-Math.min(n,r,i),s=a===0?0:o/a,c;return c=o===0?0:a===n?((r-i)/o%6+6)%6:a===r?(i-n)/o+2:(n-r)/o+4,new e(Math.round(c*60),s,a,t.a)}static toRGBA(e){let{h:t,s:n,v:r,a:i}=e,a=r*n,o=a*(1-Math.abs(t/60%2-1)),s=r-a,[c,l,u]=[0,0,0];return t<60?(c=a,l=o):t<120?(c=o,l=a):t<180?(l=a,u=o):t<240?(l=o,u=a):t<300?(c=o,u=a):t<=360&&(c=a,u=o),c=Math.round((c+s)*255),l=Math.round((l+s)*255),u=Math.round((u+s)*255),new j(c,l,u,i)}},M=class e{static fromHex(t){return e.Format.CSS.parseHex(t)||e.red}static equals(e,t){return!e&&!t?!0:!e||!t?!1:e.equals(t)}get hsla(){return this._hsla?this._hsla:Vc.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:Hc.fromRGBA(this.rgba)}constructor(e){if(e)if(e instanceof j)this.rgba=e;else if(e instanceof Vc)this._hsla=e,this.rgba=Vc.toRGBA(e);else if(e instanceof Hc)this._hsva=e,this.rgba=Hc.toRGBA(e);else throw Error(`Invalid color ctor argument`);else throw Error(`Color needs a value`)}equals(e){return!!e&&j.equals(this.rgba,e.rgba)&&Vc.equals(this.hsla,e.hsla)&&Hc.equals(this.hsva,e.hsva)}getRelativeLuminance(){let t=e._relativeLuminanceForComponent(this.rgba.r),n=e._relativeLuminanceForComponent(this.rgba.g),r=e._relativeLuminanceForComponent(this.rgba.b);return Bc(.2126*t+.7152*n+.0722*r,4)}reduceRelativeLuminace(t,n){let{r,g:i,b:a}=t.rgba,o=this.getContrastRatio(t);for(;o<n&&(r>0||i>0||a>0);)r-=Math.max(0,Math.ceil(r*.1)),i-=Math.max(0,Math.ceil(i*.1)),a-=Math.max(0,Math.ceil(a*.1)),o=this.getContrastRatio(new e(new j(r,i,a)));return new e(new j(r,i,a))}increaseRelativeLuminace(t,n){let{r,g:i,b:a}=t.rgba,o=this.getContrastRatio(t);for(;o<n&&(r<255||i<255||a<255);)r=Math.min(255,r+Math.ceil((255-r)*.1)),i=Math.min(255,i+Math.ceil((255-i)*.1)),a=Math.min(255,a+Math.ceil((255-a)*.1)),o=this.getContrastRatio(new e(new j(r,i,a)));return new e(new j(r,i,a))}static _relativeLuminanceForComponent(e){let t=e/255;return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}getContrastRatio(e){let t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)}isDarker(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3<128}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){return this.getRelativeLuminance()>e.getRelativeLuminance()}isDarkerThan(e){return this.getRelativeLuminance()<e.getRelativeLuminance()}ensureConstrast(e,t){let n=this.getRelativeLuminance(),r=e.getRelativeLuminance();if(this.getContrastRatio(e)<t){if(r<n){let n=this.reduceRelativeLuminace(e,t),r=this.getContrastRatio(n);if(r<t){let i=this.increaseRelativeLuminace(e,t);return r>this.getContrastRatio(i)?n:i}return n}let i=this.increaseRelativeLuminace(e,t),a=this.getContrastRatio(i);if(a<t){let n=this.reduceRelativeLuminace(e,t);return a>this.getContrastRatio(n)?i:n}return i}return e}lighten(t){return new e(new Vc(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*t,this.hsla.a))}darken(t){return new e(new Vc(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*t,this.hsla.a))}transparent(t){let{r:n,g:r,b:i,a}=this.rgba;return new e(new j(n,r,i,a*t))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new e(new j(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}blend(t){let n=t.rgba,r=this.rgba.a,i=n.a,a=r+i*(1-r);return a<1e-6?e.transparent:new e(new j(this.rgba.r*r/a+n.r*i*(1-r)/a,this.rgba.g*r/a+n.g*i*(1-r)/a,this.rgba.b*r/a+n.b*i*(1-r)/a,a))}mix(t,n=.5){let r=Math.min(Math.max(n,0),1),i=this.rgba,a=t.rgba;return new e(new j(i.r+(a.r-i.r)*r,i.g+(a.g-i.g)*r,i.b+(a.b-i.b)*r,i.a+(a.a-i.a)*r))}makeOpaque(t){if(this.isOpaque()||t.rgba.a!==1)return this;let{r:n,g:r,b:i,a}=this.rgba;return new e(new j(t.rgba.r-a*(t.rgba.r-n),t.rgba.g-a*(t.rgba.g-r),t.rgba.b-a*(t.rgba.b-i),1))}flatten(...t){let n=t.reduceRight((t,n)=>e._flatten(n,t));return e._flatten(this,n)}static _flatten(t,n){let r=1-t.rgba.a;return new e(new j(r*n.rgba.r+t.rgba.a*t.rgba.r,r*n.rgba.g+t.rgba.a*t.rgba.g,r*n.rgba.b+t.rgba.a*t.rgba.b))}toString(){return this._toString||=e.Format.CSS.format(this),this._toString}toNumber32Bit(){return this._toNumber32Bit||=(this.rgba.r<<24|this.rgba.g<<16|this.rgba.b<<8|this.rgba.a*255<<0)>>>0,this._toNumber32Bit}static getLighterColor(e,t,n){if(e.isLighterThan(t))return e;n||=.5;let r=e.getRelativeLuminance(),i=t.getRelativeLuminance();return n=n*(i-r)/i,e.lighten(n)}static getDarkerColor(e,t,n){if(e.isDarkerThan(t))return e;n||=.5;let r=e.getRelativeLuminance(),i=t.getRelativeLuminance();return n=n*(r-i)/r,e.darken(n)}static#e=this.white=new e(new j(255,255,255,1));static#t=this.black=new e(new j(0,0,0,1));static#n=this.red=new e(new j(255,0,0,1));static#r=this.blue=new e(new j(0,0,255,1));static#i=this.green=new e(new j(0,255,0,1));static#a=this.cyan=new e(new j(0,255,255,1));static#o=this.lightgrey=new e(new j(211,211,211,1));static#s=this.transparent=new e(new j(0,0,0,0))};(function(e){(function(t){(function(t){function n(t){return t.rgba.a===1?`rgb(${t.rgba.r}, ${t.rgba.g}, ${t.rgba.b})`:e.Format.CSS.formatRGBA(t)}t.formatRGB=n;function r(e){return`rgba(${e.rgba.r}, ${e.rgba.g}, ${e.rgba.b}, ${+e.rgba.a.toFixed(2)})`}t.formatRGBA=r;function i(t){return t.hsla.a===1?`hsl(${t.hsla.h}, ${Math.round(t.hsla.s*100)}%, ${Math.round(t.hsla.l*100)}%)`:e.Format.CSS.formatHSLA(t)}t.formatHSL=i;function a(e){return`hsla(${e.hsla.h}, ${Math.round(e.hsla.s*100)}%, ${Math.round(e.hsla.l*100)}%, ${e.hsla.a.toFixed(2)})`}t.formatHSLA=a;function o(e){let t=e.toString(16);return t.length===2?t:`0`+t}function s(e){return`#${o(e.rgba.r)}${o(e.rgba.g)}${o(e.rgba.b)}`}t.formatHex=s;function c(t,n=!1){return n&&t.rgba.a===1?e.Format.CSS.formatHex(t):`#${o(t.rgba.r)}${o(t.rgba.g)}${o(t.rgba.b)}${o(Math.round(t.rgba.a*255))}`}t.formatHexA=c;function l(t){return t.isOpaque()?e.Format.CSS.formatHex(t):e.Format.CSS.formatRGBA(t)}t.format=l;function u(t){if(t===`transparent`)return e.transparent;if(t.startsWith(`#`))return f(t);if(t.startsWith(`rgba(`)){let n=t.match(/rgba\((?<r>(?:\+|-)?\d+), *(?<g>(?:\+|-)?\d+), *(?<b>(?:\+|-)?\d+), *(?<a>(?:\+|-)?\d+(\.\d+)?)\)/);if(!n)throw Error(`Invalid color format `+t);return new e(new j(parseInt(n.groups?.r??`0`),parseInt(n.groups?.g??`0`),parseInt(n.groups?.b??`0`),parseFloat(n.groups?.a??`0`)))}if(t.startsWith(`rgb(`)){let n=t.match(/rgb\((?<r>(?:\+|-)?\d+), *(?<g>(?:\+|-)?\d+), *(?<b>(?:\+|-)?\d+)\)/);if(!n)throw Error(`Invalid color format `+t);return new e(new j(parseInt(n.groups?.r??`0`),parseInt(n.groups?.g??`0`),parseInt(n.groups?.b??`0`)))}return d(t)}t.parse=u;function d(t){switch(t){case`aliceblue`:return new e(new j(240,248,255,1));case`antiquewhite`:return new e(new j(250,235,215,1));case`aqua`:return new e(new j(0,255,255,1));case`aquamarine`:return new e(new j(127,255,212,1));case`azure`:return new e(new j(240,255,255,1));case`beige`:return new e(new j(245,245,220,1));case`bisque`:return new e(new j(255,228,196,1));case`black`:return new e(new j(0,0,0,1));case`blanchedalmond`:return new e(new j(255,235,205,1));case`blue`:return new e(new j(0,0,255,1));case`blueviolet`:return new e(new j(138,43,226,1));case`brown`:return new e(new j(165,42,42,1));case`burlywood`:return new e(new j(222,184,135,1));case`cadetblue`:return new e(new j(95,158,160,1));case`chartreuse`:return new e(new j(127,255,0,1));case`chocolate`:return new e(new j(210,105,30,1));case`coral`:return new e(new j(255,127,80,1));case`cornflowerblue`:return new e(new j(100,149,237,1));case`cornsilk`:return new e(new j(255,248,220,1));case`crimson`:return new e(new j(220,20,60,1));case`cyan`:return new e(new j(0,255,255,1));case`darkblue`:return new e(new j(0,0,139,1));case`darkcyan`:return new e(new j(0,139,139,1));case`darkgoldenrod`:return new e(new j(184,134,11,1));case`darkgray`:return new e(new j(169,169,169,1));case`darkgreen`:return new e(new j(0,100,0,1));case`darkgrey`:return new e(new j(169,169,169,1));case`darkkhaki`:return new e(new j(189,183,107,1));case`darkmagenta`:return new e(new j(139,0,139,1));case`darkolivegreen`:return new e(new j(85,107,47,1));case`darkorange`:return new e(new j(255,140,0,1));case`darkorchid`:return new e(new j(153,50,204,1));case`darkred`:return new e(new j(139,0,0,1));case`darksalmon`:return new e(new j(233,150,122,1));case`darkseagreen`:return new e(new j(143,188,143,1));case`darkslateblue`:return new e(new j(72,61,139,1));case`darkslategray`:return new e(new j(47,79,79,1));case`darkslategrey`:return new e(new j(47,79,79,1));case`darkturquoise`:return new e(new j(0,206,209,1));case`darkviolet`:return new e(new j(148,0,211,1));case`deeppink`:return new e(new j(255,20,147,1));case`deepskyblue`:return new e(new j(0,191,255,1));case`dimgray`:return new e(new j(105,105,105,1));case`dimgrey`:return new e(new j(105,105,105,1));case`dodgerblue`:return new e(new j(30,144,255,1));case`firebrick`:return new e(new j(178,34,34,1));case`floralwhite`:return new e(new j(255,250,240,1));case`forestgreen`:return new e(new j(34,139,34,1));case`fuchsia`:return new e(new j(255,0,255,1));case`gainsboro`:return new e(new j(220,220,220,1));case`ghostwhite`:return new e(new j(248,248,255,1));case`gold`:return new e(new j(255,215,0,1));case`goldenrod`:return new e(new j(218,165,32,1));case`gray`:return new e(new j(128,128,128,1));case`green`:return new e(new j(0,128,0,1));case`greenyellow`:return new e(new j(173,255,47,1));case`grey`:return new e(new j(128,128,128,1));case`honeydew`:return new e(new j(240,255,240,1));case`hotpink`:return new e(new j(255,105,180,1));case`indianred`:return new e(new j(205,92,92,1));case`indigo`:return new e(new j(75,0,130,1));case`ivory`:return new e(new j(255,255,240,1));case`khaki`:return new e(new j(240,230,140,1));case`lavender`:return new e(new j(230,230,250,1));case`lavenderblush`:return new e(new j(255,240,245,1));case`lawngreen`:return new e(new j(124,252,0,1));case`lemonchiffon`:return new e(new j(255,250,205,1));case`lightblue`:return new e(new j(173,216,230,1));case`lightcoral`:return new e(new j(240,128,128,1));case`lightcyan`:return new e(new j(224,255,255,1));case`lightgoldenrodyellow`:return new e(new j(250,250,210,1));case`lightgray`:return new e(new j(211,211,211,1));case`lightgreen`:return new e(new j(144,238,144,1));case`lightgrey`:return new e(new j(211,211,211,1));case`lightpink`:return new e(new j(255,182,193,1));case`lightsalmon`:return new e(new j(255,160,122,1));case`lightseagreen`:return new e(new j(32,178,170,1));case`lightskyblue`:return new e(new j(135,206,250,1));case`lightslategray`:return new e(new j(119,136,153,1));case`lightslategrey`:return new e(new j(119,136,153,1));case`lightsteelblue`:return new e(new j(176,196,222,1));case`lightyellow`:return new e(new j(255,255,224,1));case`lime`:return new e(new j(0,255,0,1));case`limegreen`:return new e(new j(50,205,50,1));case`linen`:return new e(new j(250,240,230,1));case`magenta`:return new e(new j(255,0,255,1));case`maroon`:return new e(new j(128,0,0,1));case`mediumaquamarine`:return new e(new j(102,205,170,1));case`mediumblue`:return new e(new j(0,0,205,1));case`mediumorchid`:return new e(new j(186,85,211,1));case`mediumpurple`:return new e(new j(147,112,219,1));case`mediumseagreen`:return new e(new j(60,179,113,1));case`mediumslateblue`:return new e(new j(123,104,238,1));case`mediumspringgreen`:return new e(new j(0,250,154,1));case`mediumturquoise`:return new e(new j(72,209,204,1));case`mediumvioletred`:return new e(new j(199,21,133,1));case`midnightblue`:return new e(new j(25,25,112,1));case`mintcream`:return new e(new j(245,255,250,1));case`mistyrose`:return new e(new j(255,228,225,1));case`moccasin`:return new e(new j(255,228,181,1));case`navajowhite`:return new e(new j(255,222,173,1));case`navy`:return new e(new j(0,0,128,1));case`oldlace`:return new e(new j(253,245,230,1));case`olive`:return new e(new j(128,128,0,1));case`olivedrab`:return new e(new j(107,142,35,1));case`orange`:return new e(new j(255,165,0,1));case`orangered`:return new e(new j(255,69,0,1));case`orchid`:return new e(new j(218,112,214,1));case`palegoldenrod`:return new e(new j(238,232,170,1));case`palegreen`:return new e(new j(152,251,152,1));case`paleturquoise`:return new e(new j(175,238,238,1));case`palevioletred`:return new e(new j(219,112,147,1));case`papayawhip`:return new e(new j(255,239,213,1));case`peachpuff`:return new e(new j(255,218,185,1));case`peru`:return new e(new j(205,133,63,1));case`pink`:return new e(new j(255,192,203,1));case`plum`:return new e(new j(221,160,221,1));case`powderblue`:return new e(new j(176,224,230,1));case`purple`:return new e(new j(128,0,128,1));case`rebeccapurple`:return new e(new j(102,51,153,1));case`red`:return new e(new j(255,0,0,1));case`rosybrown`:return new e(new j(188,143,143,1));case`royalblue`:return new e(new j(65,105,225,1));case`saddlebrown`:return new e(new j(139,69,19,1));case`salmon`:return new e(new j(250,128,114,1));case`sandybrown`:return new e(new j(244,164,96,1));case`seagreen`:return new e(new j(46,139,87,1));case`seashell`:return new e(new j(255,245,238,1));case`sienna`:return new e(new j(160,82,45,1));case`silver`:return new e(new j(192,192,192,1));case`skyblue`:return new e(new j(135,206,235,1));case`slateblue`:return new e(new j(106,90,205,1));case`slategray`:return new e(new j(112,128,144,1));case`slategrey`:return new e(new j(112,128,144,1));case`snow`:return new e(new j(255,250,250,1));case`springgreen`:return new e(new j(0,255,127,1));case`steelblue`:return new e(new j(70,130,180,1));case`tan`:return new e(new j(210,180,140,1));case`teal`:return new e(new j(0,128,128,1));case`thistle`:return new e(new j(216,191,216,1));case`tomato`:return new e(new j(255,99,71,1));case`turquoise`:return new e(new j(64,224,208,1));case`violet`:return new e(new j(238,130,238,1));case`wheat`:return new e(new j(245,222,179,1));case`white`:return new e(new j(255,255,255,1));case`whitesmoke`:return new e(new j(245,245,245,1));case`yellow`:return new e(new j(255,255,0,1));case`yellowgreen`:return new e(new j(154,205,50,1));default:return null}}function f(t){let n=t.length;if(n===0||t.charCodeAt(0)!==O.Hash)return null;if(n===7)return new e(new j(16*p(t.charCodeAt(1))+p(t.charCodeAt(2)),16*p(t.charCodeAt(3))+p(t.charCodeAt(4)),16*p(t.charCodeAt(5))+p(t.charCodeAt(6)),1));if(n===9)return new e(new j(16*p(t.charCodeAt(1))+p(t.charCodeAt(2)),16*p(t.charCodeAt(3))+p(t.charCodeAt(4)),16*p(t.charCodeAt(5))+p(t.charCodeAt(6)),(16*p(t.charCodeAt(7))+p(t.charCodeAt(8)))/255));if(n===4){let n=p(t.charCodeAt(1)),r=p(t.charCodeAt(2)),i=p(t.charCodeAt(3));return new e(new j(16*n+n,16*r+r,16*i+i))}if(n===5){let n=p(t.charCodeAt(1)),r=p(t.charCodeAt(2)),i=p(t.charCodeAt(3)),a=p(t.charCodeAt(4));return new e(new j(16*n+n,16*r+r,16*i+i,(16*a+a)/255))}return null}t.parseHex=f;function p(e){switch(e){case O.Digit0:return 0;case O.Digit1:return 1;case O.Digit2:return 2;case O.Digit3:return 3;case O.Digit4:return 4;case O.Digit5:return 5;case O.Digit6:return 6;case O.Digit7:return 7;case O.Digit8:return 8;case O.Digit9:return 9;case O.a:return 10;case O.A:return 10;case O.b:return 11;case O.B:return 11;case O.c:return 12;case O.C:return 12;case O.d:return 13;case O.D:return 13;case O.e:return 14;case O.E:return 14;case O.f:return 15;case O.F:return 15}return 0}})(t.CSS||={})})(e.Format||={})})(M||={});function Uc(e){let t=!1,n=new Map,r=new Map;if(Gc(e,i=>{if(e===i)return!0;let a=JSON.stringify(i);if(a.length<30)return!0;let o=n.get(a);if(!o){let e={schemas:[i]};return n.set(a,e),r.set(i,e),!0}return o.schemas.push(i),r.set(i,o),t=!0,!1}),n.clear(),!t)return JSON.stringify(e);let i=`$defs`;for(;e.hasOwnProperty(i);)i+=`_`;let a=[];function o(e){return JSON.stringify(e,(t,n)=>{if(n!==e){let e=r.get(n);if(e&&e.schemas.length>1)return e.id||(e.id=`_${a.length}`,a.push(e.schemas[0])),{$ref:`#/${i}/${e.id}`}}return n})}let s=o(e),c=[];for(let e=0;e<a.length;e++)c.push(`"_${e}":${o(a[e])}`);return c.length?`${s.substring(0,s.length-1)},"${i}":{${c.join(`,`)}}}`:s}function Wc(e){return typeof e==`object`&&!!e}function Gc(e,t){if(!e||typeof e!=`object`)return;let n=(...e)=>{for(let t of e)Wc(t)&&o.push(t)},r=(...e)=>{for(let t of e)if(Wc(t))for(let e in t){let n=t[e];Wc(n)&&o.push(n)}},i=(...e)=>{for(let t of e)if(Array.isArray(t))for(let e of t)Wc(e)&&o.push(e)},a=e=>{if(Array.isArray(e))for(let t of e)Wc(t)&&o.push(t);else Wc(e)&&o.push(e)},o=[e],s=o.pop();for(;s;)t(s)&&(n(s.additionalItems,s.additionalProperties,s.not,s.contains,s.propertyNames,s.if,s.then,s.else,s.unevaluatedItems,s.unevaluatedProperties),r(s.definitions,s.$defs,s.properties,s.patternProperties,s.dependencies,s.dependentSchemas),i(s.anyOf,s.allOf,s.oneOf,s.prefixItems),a(s.items)),s=o.pop()}var Kc={JSONContribution:`base.contributions.json`};function qc(e){return e.length>0&&e.charAt(e.length-1)===`#`?e.substring(0,e.length-1):e}var Jc=new class extends w{constructor(){super(...arguments),this.schemasById={},this.schemaAssociations={},this._onDidChangeSchema=this._register(new E),this.onDidChangeSchema=this._onDidChangeSchema.event,this._onDidChangeSchemaAssociations=this._register(new E),this.onDidChangeSchemaAssociations=this._onDidChangeSchemaAssociations.event}registerSchema(e,t,n){let r=qc(e);this.schemasById[r]=t,this._onDidChangeSchema.fire(e),n&&n.add(S(()=>{delete this.schemasById[r],this._onDidChangeSchema.fire(e)}))}registerSchemaAssociation(e,t){let n=qc(e);return this.schemaAssociations[n]||(this.schemaAssociations[n]=[]),this.schemaAssociations[n].includes(t)||(this.schemaAssociations[n].push(t),this._onDidChangeSchemaAssociations.fire()),S(()=>{let e=this.schemaAssociations[n];if(e){let r=e.indexOf(t);r!==-1&&(e.splice(r,1),e.length===0&&delete this.schemaAssociations[n],this._onDidChangeSchemaAssociations.fire())}})}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}getSchemaContributions(){return{schemas:this.schemasById}}getSchemaContent(e){let t=this.schemasById[e];return t?Uc(t):void 0}hasSchemaContent(e){return!!this.schemasById[e]}getSchemaAssociations(){return this.schemaAssociations}};hr.add(Kc.JSONContribution,Jc);function Yc(e){return`--vscode-${e.replace(/\./g,`-`)}`}function N(e){return`var(${Yc(e)})`}function Xc(e,t){return`var(${Yc(e)}, ${t})`}var Zc;(function(e){e[e.Darken=0]=`Darken`,e[e.Lighten=1]=`Lighten`,e[e.Transparent=2]=`Transparent`,e[e.Opaque=3]=`Opaque`,e[e.OneOf=4]=`OneOf`,e[e.LessProminent=5]=`LessProminent`,e[e.IfDefinedThenElse=6]=`IfDefinedThenElse`,e[e.Mix=7]=`Mix`})(Zc||={});function Qc(e){return typeof e==`object`&&!!e&&`light`in e&&`dark`in e}var $c={ColorContribution:`base.contributions.colors`},el=`default`,tl=new class extends w{constructor(){super(),this._onDidChangeSchema=this._register(new E),this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:`object`,properties:{}},this.colorReferenceSchema={type:`string`,enum:[],enumDescriptions:[]},this.colorsById={}}notifyThemeUpdate(e){for(let t of Object.keys(this.colorsById)){let n=e.getColor(t);n&&(this.colorSchema.properties[t].oneOf[0].defaultSnippets[0].body=`\${1:${M.Format.CSS.formatHexA(n,!0)}}`)}this._onDidChangeSchema.fire()}registerColor(e,t,n,r=!1,i){let a={id:e,description:n,defaults:t,needsTransparency:r,deprecationMessage:i};this.colorsById[e]=a;let o={type:`string`,format:`color-hex`,defaultSnippets:[{body:"${1:#ff0000}"}]};return i&&(o.deprecationMessage=i),r&&(o.pattern=`^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$`,o.patternErrorMessage=D(2117,`This color must be transparent or it will obscure content`)),this.colorSchema.properties[e]={description:n,oneOf:[o,{type:`string`,const:el,description:D(2118,`Use the default color.`)}]},this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}deregisterColor(e){delete this.colorsById[e],delete this.colorSchema.properties[e];let t=this.colorReferenceSchema.enum.indexOf(e);t!==-1&&(this.colorReferenceSchema.enum.splice(t,1),this.colorReferenceSchema.enumDescriptions.splice(t,1)),this._onDidChangeSchema.fire()}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){let n=this.colorsById[e];if(n?.defaults)return dl(Qc(n.defaults)?n.defaults[t.type]:n.defaults,t)}getColorSchema(){return this.colorSchema}getColorReferenceSchema(){return this.colorReferenceSchema}toString(){return Object.keys(this.colorsById).sort((e,t)=>{let n=e.indexOf(`.`)===-1?0:1,r=t.indexOf(`.`)===-1?0:1;return n===r?e.localeCompare(t):n-r}).map(e=>`- \`${e}\`: ${this.colorsById[e].description}`).join(`
`)}};hr.add($c.ColorContribution,tl);function P(e,t,n,r,i){return tl.registerColor(e,t,n,r,i)}function nl(){return tl}function rl(e,t){switch(e.op){case Zc.Darken:return dl(e.value,t)?.darken(e.factor);case Zc.Lighten:return dl(e.value,t)?.lighten(e.factor);case Zc.Transparent:return dl(e.value,t)?.transparent(e.factor);case Zc.Mix:{let n=dl(e.color,t)||M.transparent,r=dl(e.with,t)||M.transparent;return n.mix(r,e.ratio)}case Zc.Opaque:{let n=dl(e.background,t);return n?dl(e.value,t)?.makeOpaque(n):dl(e.value,t)}case Zc.OneOf:for(let n of e.values){let e=dl(n,t);if(e)return e}return;case Zc.IfDefinedThenElse:return dl(t.defines(e.if)?e.then:e.else,t);case Zc.LessProminent:{let n=dl(e.value,t);if(!n)return;let r=dl(e.background,t);return r?n.isDarkerThan(r)?M.getLighterColor(n,r,e.factor).transparent(e.transparency):M.getDarkerColor(n,r,e.factor).transparent(e.transparency):n.transparent(e.factor*e.transparency)}default:throw de()}}function il(e,t){return{op:Zc.Darken,value:e,factor:t}}function al(e,t){return{op:Zc.Lighten,value:e,factor:t}}function ol(e,t){return{op:Zc.Transparent,value:e,factor:t}}function sl(e,t){return{op:Zc.Opaque,value:e,background:t}}function cl(...e){return{op:Zc.OneOf,values:e}}function ll(e,t,n){return{op:Zc.IfDefinedThenElse,if:e,then:t,else:n}}function ul(e,t,n,r){return{op:Zc.LessProminent,value:e,background:t,factor:n,transparency:r}}function dl(e,t){if(e!==null){if(typeof e==`string`)return e[0]===`#`?M.fromHex(e):t.getColor(e);if(e instanceof M)return e;if(typeof e==`object`)return rl(e,t)}}var fl=`vscode://schemas/workbench-colors`,pl=hr.as(Kc.JSONContribution);pl.registerSchema(fl,tl.getColorSchema());var ml=new bc(()=>pl.notifySchemaChanged(fl),200);tl.onDidChangeSchema(()=>{ml.isScheduled()||ml.schedule()});var hl=P(`foreground`,{dark:`#CCCCCC`,light:`#616161`,hcDark:`#FFFFFF`,hcLight:`#292929`},D(2119,`Overall foreground color. This color is only used if not overridden by a component.`)),gl=P(`disabledForeground`,{dark:`#CCCCCC80`,light:`#61616180`,hcDark:`#A5A5A5`,hcLight:`#7F7F7F`},D(2120,`Overall foreground for disabled elements. This color is only used if not overridden by a component.`)),_l=P(`errorForeground`,{dark:`#F48771`,light:`#A1260D`,hcDark:`#F48771`,hcLight:`#B5200D`},D(2121,`Overall foreground color for error messages. This color is only used if not overridden by a component.`)),vl=P(`descriptionForeground`,{light:`#717171`,dark:ol(hl,.7),hcDark:ol(hl,.7),hcLight:ol(hl,.7)},D(2122,`Foreground color for description text providing additional information, for example for a label.`)),yl=P(`icon.foreground`,{dark:`#C5C5C5`,light:`#424242`,hcDark:`#FFFFFF`,hcLight:`#292929`},D(2123,`The default color for icons in the workbench.`)),bl=P(`focusBorder`,{dark:`#007FD4`,light:`#0090F1`,hcDark:`#F38518`,hcLight:`#006BBD`},D(2124,`Overall border color for focused elements. This color is only used if not overridden by a component.`)),xl=P(`contrastBorder`,{light:null,dark:null,hcDark:`#6FC3DF`,hcLight:`#0F4A85`},D(2125,`An extra border around elements to separate them from others for greater contrast.`)),Sl=P(`contrastActiveBorder`,{light:null,dark:null,hcDark:bl,hcLight:bl},D(2126,`An extra border around active elements to separate them from others for greater contrast.`)),Cl=P(`selection.background`,null,D(2127,`The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor.`)),wl=P(`textLink.foreground`,{light:`#006AB1`,dark:`#3794FF`,hcDark:`#21A6FF`,hcLight:`#0F4A85`},D(2128,`Foreground color for links in text.`)),Tl=P(`textLink.activeForeground`,{light:`#006AB1`,dark:`#3794FF`,hcDark:`#21A6FF`,hcLight:`#0F4A85`},D(2129,`Foreground color for links in text when clicked on and on mouse hover.`));P(`textSeparator.foreground`,{light:`#0000002e`,dark:`#ffffff2e`,hcDark:M.black,hcLight:`#292929`},D(2130,`Color for text separators.`)),P(`textPreformat.foreground`,{light:`#A31515`,dark:`#D7BA7D`,hcDark:`#FFFFFF`,hcLight:`#FFFFFF`},D(2131,`Foreground color for preformatted text segments.`)),P(`textPreformat.background`,{light:`#0000001A`,dark:`#FFFFFF1A`,hcDark:null,hcLight:`#09345f`},D(2132,`Background color for preformatted text segments.`)),P(`textPreformat.border`,{light:null,dark:null,hcDark:xl,hcLight:null},D(2133,`Border color for preformatted text segments.`)),P(`textBlockQuote.background`,{light:`#f2f2f2`,dark:`#222222`,hcDark:null,hcLight:`#F2F2F2`},D(2134,`Background color for block quotes in text.`)),P(`textBlockQuote.border`,{light:`#007acc80`,dark:`#007acc80`,hcDark:M.white,hcLight:`#292929`},D(2135,`Border color for block quotes in text.`)),P(`textCodeBlock.background`,{light:`#dcdcdc66`,dark:`#0a0a0a66`,hcDark:M.black,hcLight:`#F2F2F2`},D(2136,`Background color for code blocks in text.`)),P(`sash.hoverBorder`,bl,D(2341,`Border color of active sashes.`));var El=P(`badge.background`,{dark:`#4D4D4D`,light:`#C4C4C4`,hcDark:M.black,hcLight:`#0F4A85`},D(2342,`Badge background color. Badges are small information labels, e.g. for search results count.`)),Dl=P(`badge.foreground`,{dark:M.white,light:`#333`,hcDark:M.white,hcLight:M.white},D(2343,`Badge foreground color. Badges are small information labels, e.g. for search results count.`)),Ol=P(`activityWarningBadge.foreground`,{dark:M.white,light:M.white,hcDark:M.white,hcLight:M.white},D(2344,`Foreground color of the warning activity badge`)),kl=P(`activityWarningBadge.background`,{dark:`#B27C00`,light:`#B27C00`,hcDark:null,hcLight:`#B27C00`},D(2345,`Background color of the warning activity badge`));P(`activityErrorBadge.foreground`,{dark:M.black.lighten(.2),light:M.white,hcDark:null,hcLight:M.black.lighten(.2)},D(2346,`Foreground color of the error activity badge`)),P(`activityErrorBadge.background`,{dark:`#F14C4C`,light:`#E51400`,hcDark:null,hcLight:`#F14C4C`},D(2347,`Background color of the error activity badge`));var Al=P(`scrollbar.shadow`,{dark:`#000000`,light:`#DDDDDD`,hcDark:null,hcLight:null},D(2348,`Scrollbar shadow to indicate that the view is scrolled.`)),jl=P(`scrollbarSlider.background`,{dark:M.fromHex(`#797979`).transparent(.4),light:M.fromHex(`#646464`).transparent(.4),hcDark:ol(xl,.6),hcLight:ol(xl,.4)},D(2349,`Scrollbar slider background color.`)),Ml=P(`scrollbarSlider.hoverBackground`,{dark:M.fromHex(`#646464`).transparent(.7),light:M.fromHex(`#646464`).transparent(.7),hcDark:ol(xl,.8),hcLight:ol(xl,.8)},D(2350,`Scrollbar slider background color when hovering.`)),Nl=P(`scrollbarSlider.activeBackground`,{dark:M.fromHex(`#BFBFBF`).transparent(.4),light:M.fromHex(`#000000`).transparent(.6),hcDark:xl,hcLight:xl},D(2351,`Scrollbar slider background color when clicked on.`));P(`scrollbar.background`,null,D(2352,`Scrollbar track background color.`));var Oee=P(`progressBar.background`,{dark:M.fromHex(`#0E70C0`),light:M.fromHex(`#0E70C0`),hcDark:xl,hcLight:xl},D(2353,`Background color of the progress bar that can show for long running operations.`)),kee=P(`chart.line`,{dark:`#236B8E`,light:`#236B8E`,hcDark:`#236B8E`,hcLight:`#236B8E`},D(2354,`Line color for the chart.`)),Aee=P(`chart.axis`,{dark:M.fromHex(`#BFBFBF`).transparent(.4),light:M.fromHex(`#000000`).transparent(.6),hcDark:xl,hcLight:xl},D(2355,`Axis color for the chart.`)),jee=P(`chart.guide`,{dark:M.fromHex(`#BFBFBF`).transparent(.2),light:M.fromHex(`#000000`).transparent(.2),hcDark:xl,hcLight:xl},D(2356,`Guide line for the chart.`)),Pl=P(`editor.background`,{light:`#ffffff`,dark:`#1E1E1E`,hcDark:M.black,hcLight:M.white},D(2145,`Editor background color.`)),Fl=P(`editor.foreground`,{light:`#333333`,dark:`#BBBBBB`,hcDark:M.white,hcLight:hl},D(2146,`Editor default foreground color.`));P(`editorStickyScroll.background`,Pl,D(2147,`Background color of sticky scroll in the editor`)),P(`editorStickyScrollGutter.background`,Pl,D(2148,`Background color of the gutter part of sticky scroll in the editor`)),P(`editorStickyScrollHover.background`,{dark:`#2A2D2E`,light:`#F0F0F0`,hcDark:null,hcLight:M.fromHex(`#0F4A85`).transparent(.1)},D(2149,`Background color of sticky scroll on hover in the editor`)),P(`editorStickyScroll.border`,{dark:null,light:null,hcDark:xl,hcLight:xl},D(2150,`Border color of sticky scroll in the editor`)),P(`editorStickyScroll.shadow`,Al,D(2151,` Shadow color of sticky scroll in the editor`));var Il=P(`editorWidget.background`,{dark:`#252526`,light:`#F3F3F3`,hcDark:`#0C141F`,hcLight:M.white},D(2152,`Background color of editor widgets, such as find/replace.`)),Ll=P(`editorWidget.foreground`,hl,D(2153,`Foreground color of editor widgets, such as find/replace.`)),Rl=P(`editorWidget.border`,{dark:`#454545`,light:`#C8C8C8`,hcDark:xl,hcLight:xl},D(2154,`Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.`));P(`editorWidget.resizeBorder`,null,D(2155,`Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.`)),P(`editorError.background`,null,D(2156,`Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations.`),!0);var zl=P(`editorError.foreground`,{dark:`#F14C4C`,light:`#E51400`,hcDark:`#F48771`,hcLight:`#B5200D`},D(2157,`Foreground color of error squigglies in the editor.`)),Mee=P(`editorError.border`,{dark:null,light:null,hcDark:M.fromHex(`#E47777`).transparent(.8),hcLight:`#B5200D`},D(2158,`If set, color of double underlines for errors in the editor.`)),Nee=P(`editorWarning.background`,null,D(2159,`Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations.`),!0),Bl=P(`editorWarning.foreground`,{dark:`#CCA700`,light:`#BF8803`,hcDark:`#FFD370`,hcLight:`#895503`},D(2160,`Foreground color of warning squigglies in the editor.`)),Vl=P(`editorWarning.border`,{dark:null,light:null,hcDark:M.fromHex(`#FFCC00`).transparent(.8),hcLight:M.fromHex(`#FFCC00`).transparent(.8)},D(2161,`If set, color of double underlines for warnings in the editor.`));P(`editorInfo.background`,null,D(2162,`Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations.`),!0);var Hl=P(`editorInfo.foreground`,{dark:`#59a4f9`,light:`#0063d3`,hcDark:`#59a4f9`,hcLight:`#0063d3`},D(2163,`Foreground color of info squigglies in the editor.`)),Ul=P(`editorInfo.border`,{dark:null,light:null,hcDark:M.fromHex(`#59a4f9`).transparent(.8),hcLight:`#292929`},D(2164,`If set, color of double underlines for infos in the editor.`)),Pee=P(`editorHint.foreground`,{dark:M.fromHex(`#eeeeee`).transparent(.7),light:`#6c6c6c`,hcDark:null,hcLight:null},D(2165,`Foreground color of hint squigglies in the editor.`));P(`editorHint.border`,{dark:null,light:null,hcDark:M.fromHex(`#eeeeee`).transparent(.8),hcLight:`#292929`},D(2166,`If set, color of double underlines for hints in the editor.`));var Fee=P(`editorLink.activeForeground`,{dark:`#4E94CE`,light:M.blue,hcDark:M.cyan,hcLight:`#292929`},D(2167,`Color of active links.`)),Wl=P(`editor.selectionBackground`,{light:`#ADD6FF`,dark:`#264F78`,hcDark:`#f3f518`,hcLight:`#0F4A85`},D(2168,`Color of the editor selection.`)),Iee=P(`editor.selectionForeground`,{light:null,dark:null,hcDark:`#000000`,hcLight:M.white},D(2169,`Color of the selected text for high contrast.`)),Gl=P(`editor.inactiveSelectionBackground`,{light:ol(Wl,.5),dark:ol(Wl,.5),hcDark:ol(Wl,.7),hcLight:ol(Wl,.5)},D(2170,`Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations.`),!0),Kl=P(`editor.selectionHighlightBackground`,{light:ul(Wl,Pl,.3,.6),dark:ul(Wl,Pl,.3,.6),hcDark:null,hcLight:null},D(2171,`Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations.`),!0);P(`editor.selectionHighlightBorder`,{light:null,dark:null,hcDark:Sl,hcLight:Sl},D(2172,`Border color for regions with the same content as the selection.`)),P(`editor.compositionBorder`,{light:`#000000`,dark:`#ffffff`,hcLight:`#000000`,hcDark:`#ffffff`},D(2173,`The border color for an IME composition.`));var Lee=P(`editor.findMatchBackground`,{light:`#A8AC94`,dark:`#515C6A`,hcDark:null,hcLight:null},D(2174,`Color of the current search match.`)),Ree=P(`editor.findMatchForeground`,null,D(2175,`Text color of the current search match.`)),ql=P(`editor.findMatchHighlightBackground`,{light:`#EA5C0055`,dark:`#EA5C0055`,hcDark:null,hcLight:null},D(2176,`Color of the other search matches. The color must not be opaque so as not to hide underlying decorations.`),!0),zee=P(`editor.findMatchHighlightForeground`,null,D(2177,`Foreground color of the other search matches.`),!0),Bee=P(`editor.findRangeHighlightBackground`,{dark:`#3a3d4166`,light:`#b4b4b44d`,hcDark:null,hcLight:null},D(2178,`Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations.`),!0);P(`editor.findMatchBorder`,{light:null,dark:null,hcDark:Sl,hcLight:Sl},D(2179,`Border color of the current search match.`));var Jl=P(`editor.findMatchHighlightBorder`,{light:null,dark:null,hcDark:Sl,hcLight:Sl},D(2180,`Border color of the other search matches.`)),Vee=P(`editor.findRangeHighlightBorder`,{dark:null,light:null,hcDark:ol(Sl,.4),hcLight:ol(Sl,.4)},D(2181,`Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations.`),!0),Hee=P(`editor.hoverHighlightBackground`,{light:`#ADD6FF26`,dark:`#264f7840`,hcDark:`#ADD6FF26`,hcLight:null},D(2182,`Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations.`),!0),Yl=P(`editorHoverWidget.background`,Il,D(2183,`Background color of the editor hover.`)),Uee=P(`editorHoverWidget.foreground`,Ll,D(2184,`Foreground color of the editor hover.`)),Xl=P(`editorHoverWidget.border`,Rl,D(2185,`Border color of the editor hover.`));P(`editorHoverWidget.statusBarBackground`,{dark:al(Yl,.2),light:il(Yl,.05),hcDark:Il,hcLight:Il},D(2186,`Background color of the editor hover status bar.`));var Zl=P(`editorInlayHint.foreground`,{dark:`#969696`,light:`#969696`,hcDark:M.white,hcLight:M.black},D(2187,`Foreground color of inline hints`)),Ql=P(`editorInlayHint.background`,{dark:ol(El,.1),light:ol(El,.1),hcDark:ol(M.white,.1),hcLight:ol(El,.1)},D(2188,`Background color of inline hints`)),Wee=P(`editorInlayHint.typeForeground`,Zl,D(2189,`Foreground color of inline hints for types`)),Gee=P(`editorInlayHint.typeBackground`,Ql,D(2190,`Background color of inline hints for types`)),Kee=P(`editorInlayHint.parameterForeground`,Zl,D(2191,`Foreground color of inline hints for parameters`)),qee=P(`editorInlayHint.parameterBackground`,Ql,D(2192,`Background color of inline hints for parameters`)),Jee=P(`editorLightBulb.foreground`,{dark:`#FFCC00`,light:`#DDB100`,hcDark:`#FFCC00`,hcLight:`#007ACC`},D(2193,`The color used for the lightbulb actions icon.`));P(`editorLightBulbAutoFix.foreground`,{dark:`#75BEFF`,light:`#007ACC`,hcDark:`#75BEFF`,hcLight:`#007ACC`},D(2194,`The color used for the lightbulb auto fix actions icon.`)),P(`editorLightBulbAi.foreground`,Jee,D(2195,`The color used for the lightbulb AI icon.`)),P(`editor.snippetTabstopHighlightBackground`,{dark:new M(new j(124,124,124,.3)),light:new M(new j(10,50,100,.2)),hcDark:new M(new j(124,124,124,.3)),hcLight:new M(new j(10,50,100,.2))},D(2196,`Highlight background color of a snippet tabstop.`)),P(`editor.snippetTabstopHighlightBorder`,null,D(2197,`Highlight border color of a snippet tabstop.`)),P(`editor.snippetFinalTabstopHighlightBackground`,null,D(2198,`Highlight background color of the final tabstop of a snippet.`)),P(`editor.snippetFinalTabstopHighlightBorder`,{dark:`#525252`,light:new M(new j(10,50,100,.5)),hcDark:`#525252`,hcLight:`#292929`},D(2199,`Highlight border color of the final tabstop of a snippet.`));var $l=new M(new j(155,185,85,.2)),eu=new M(new j(255,0,0,.2)),Yee=P(`diffEditor.insertedTextBackground`,{dark:`#9ccc2c33`,light:`#9ccc2c40`,hcDark:null,hcLight:null},D(2200,`Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations.`),!0),Xee=P(`diffEditor.removedTextBackground`,{dark:`#ff000033`,light:`#ff000033`,hcDark:null,hcLight:null},D(2201,`Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations.`),!0),Zee=P(`diffEditor.insertedLineBackground`,{dark:$l,light:$l,hcDark:null,hcLight:null},D(2202,`Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations.`),!0);P(`diffEditor.removedLineBackground`,{dark:eu,light:eu,hcDark:null,hcLight:null},D(2203,`Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations.`),!0),P(`diffEditorGutter.insertedLineBackground`,null,D(2204,`Background color for the margin where lines got inserted.`)),P(`diffEditorGutter.removedLineBackground`,null,D(2205,`Background color for the margin where lines got removed.`));var Qee=P(`diffEditorOverview.insertedForeground`,null,D(2206,`Diff overview ruler foreground for inserted content.`)),$ee=P(`diffEditorOverview.removedForeground`,null,D(2207,`Diff overview ruler foreground for removed content.`));P(`diffEditor.insertedTextBorder`,{dark:null,light:null,hcDark:`#33ff2eff`,hcLight:`#374E06`},D(2208,`Outline color for the text that got inserted.`)),P(`diffEditor.removedTextBorder`,{dark:null,light:null,hcDark:`#FF008F`,hcLight:`#AD0707`},D(2209,`Outline color for text that got removed.`)),P(`diffEditor.border`,{dark:null,light:null,hcDark:xl,hcLight:xl},D(2210,`Border color between the two text editors.`)),P(`diffEditor.diagonalFill`,{dark:`#cccccc33`,light:`#22222233`,hcDark:null,hcLight:null},D(2211,`Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.`)),P(`diffEditor.unchangedRegionBackground`,`sideBar.background`,D(2212,`The background color of unchanged blocks in the diff editor.`)),P(`diffEditor.unchangedRegionForeground`,`foreground`,D(2213,`The foreground color of unchanged blocks in the diff editor.`)),P(`diffEditor.unchangedCodeBackground`,{dark:`#74747429`,light:`#b8b8b829`,hcDark:null,hcLight:null},D(2214,`The background color of unchanged code in the diff editor.`));var tu=P(`widget.shadow`,{dark:ol(M.black,.36),light:ol(M.black,.16),hcDark:null,hcLight:null},D(2215,`Shadow color of widgets such as find/replace inside the editor.`)),nu=P(`widget.border`,{dark:null,light:null,hcDark:xl,hcLight:xl},D(2216,`Border color of widgets such as find/replace inside the editor.`)),ru=P(`toolbar.hoverBackground`,{dark:`#5a5d5e50`,light:`#b8b8b850`,hcDark:null,hcLight:null},D(2217,`Toolbar background when hovering over actions using the mouse`));P(`toolbar.hoverOutline`,{dark:null,light:null,hcDark:Sl,hcLight:Sl},D(2218,`Toolbar outline when hovering over actions using the mouse`)),P(`toolbar.activeBackground`,{dark:al(ru,.1),light:il(ru,.1),hcDark:null,hcLight:null},D(2219,`Toolbar background when holding the mouse over actions`));var ete=P(`breadcrumb.foreground`,ol(hl,.8),D(2220,`Color of focused breadcrumb items.`)),tte=P(`breadcrumb.background`,Pl,D(2221,`Background color of breadcrumb items.`)),iu=P(`breadcrumb.focusForeground`,{light:il(hl,.2),dark:al(hl,.1),hcDark:al(hl,.1),hcLight:al(hl,.1)},D(2220,`Color of focused breadcrumb items.`)),nte=P(`breadcrumb.activeSelectionForeground`,{light:il(hl,.2),dark:al(hl,.1),hcDark:al(hl,.1),hcLight:al(hl,.1)},D(2222,`Color of selected breadcrumb items.`)),rte=P(`breadcrumbPicker.background`,Il,D(2223,`Background color of breadcrumb item picker.`)),au=.5,ou=M.fromHex(`#40C8AE`).transparent(au),su=M.fromHex(`#40A6FF`).transparent(au),cu=M.fromHex(`#606060`).transparent(.4),lu=.4,uu=1,du=P(`merge.currentHeaderBackground`,{dark:ou,light:ou,hcDark:null,hcLight:null},D(2224,`Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations.`),!0);P(`merge.currentContentBackground`,ol(du,lu),D(2225,`Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations.`),!0);var fu=P(`merge.incomingHeaderBackground`,{dark:su,light:su,hcDark:null,hcLight:null},D(2226,`Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations.`),!0);P(`merge.incomingContentBackground`,ol(fu,lu),D(2227,`Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations.`),!0);var pu=P(`merge.commonHeaderBackground`,{dark:cu,light:cu,hcDark:null,hcLight:null},D(2228,`Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations.`),!0);P(`merge.commonContentBackground`,ol(pu,lu),D(2229,`Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations.`),!0);var mu=P(`merge.border`,{dark:null,light:null,hcDark:`#C3DF6F`,hcLight:`#007ACC`},D(2230,`Border color on headers and the splitter in inline merge-conflicts.`));P(`editorOverviewRuler.currentContentForeground`,{dark:ol(du,uu),light:ol(du,uu),hcDark:mu,hcLight:mu},D(2231,`Current overview ruler foreground for inline merge-conflicts.`)),P(`editorOverviewRuler.incomingContentForeground`,{dark:ol(fu,uu),light:ol(fu,uu),hcDark:mu,hcLight:mu},D(2232,`Incoming overview ruler foreground for inline merge-conflicts.`)),P(`editorOverviewRuler.commonContentForeground`,{dark:ol(pu,uu),light:ol(pu,uu),hcDark:mu,hcLight:mu},D(2233,`Common ancestor overview ruler foreground for inline merge-conflicts.`));var hu=P(`editorOverviewRuler.findMatchForeground`,{dark:`#d186167e`,light:`#d186167e`,hcDark:`#AB5A00`,hcLight:`#AB5A00`},D(2234,`Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations.`),!0),gu=P(`editorOverviewRuler.selectionHighlightForeground`,`#A0A0A0CC`,D(2235,`Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations.`),!0),_u=P(`problemsErrorIcon.foreground`,zl,D(2236,`The color used for the problems error icon.`)),vu=P(`problemsWarningIcon.foreground`,Bl,D(2237,`The color used for the problems warning icon.`)),yu=P(`problemsInfoIcon.foreground`,Hl,D(2238,`The color used for the problems info icon.`)),bu=P(`minimap.findMatchHighlight`,ql,D(2330,`Minimap marker color for find matches.`),!0),xu=P(`minimap.selectionOccurrenceHighlight`,Kl,D(2331,`Minimap marker color for repeating editor selections.`),!0),Su=P(`minimap.selectionHighlight`,Wl,D(2332,`Minimap marker color for the editor selection.`),!0),Cu=P(`minimap.infoHighlight`,{dark:Hl,light:Hl,hcDark:Ul,hcLight:Ul},D(2333,`Minimap marker color for infos.`)),wu=P(`minimap.warningHighlight`,{dark:Bl,light:Bl,hcDark:Vl,hcLight:Vl},D(2334,`Minimap marker color for warnings.`)),Tu=P(`minimap.errorHighlight`,{dark:new M(new j(255,18,18,.7)),light:new M(new j(255,18,18,.7)),hcDark:new M(new j(255,50,50,1)),hcLight:`#B5200D`},D(2335,`Minimap marker color for errors.`)),Eu=P(`minimap.background`,null,D(2336,`Minimap background color.`)),Du=P(`minimap.foregroundOpacity`,M.fromHex(`#000f`),D(2337,`Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.`));P(`minimapSlider.background`,ol(jl,.5),D(2338,`Minimap slider background color.`)),P(`minimapSlider.hoverBackground`,ol(Ml,.5),D(2339,`Minimap slider background color when hovering.`)),P(`minimapSlider.activeBackground`,ol(Nl,.5),D(2340,`Minimap slider background color when clicked on.`)),P(`charts.foreground`,hl,D(2137,`The foreground color used in charts.`)),P(`charts.lines`,ol(hl,.5),D(2138,`The color used for horizontal lines in charts.`)),P(`charts.red`,zl,D(2139,`The red color used in chart visualizations.`));var Ou=P(`charts.blue`,Hl,D(2140,`The blue color used in chart visualizations.`));P(`charts.yellow`,Bl,D(2141,`The yellow color used in chart visualizations.`)),P(`charts.orange`,bu,D(2142,`The orange color used in chart visualizations.`)),P(`charts.green`,{dark:`#89D185`,light:`#388A34`,hcDark:`#89D185`,hcLight:`#374e06`},D(2143,`The green color used in chart visualizations.`));var ku=P(`charts.purple`,{dark:`#B180D7`,light:`#652D90`,hcDark:`#B180D7`,hcLight:`#652D90`},D(2144,`The purple color used in chart visualizations.`)),Au=P(`list.focusBackground`,null,D(2287,`List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.`)),ju=P(`list.focusForeground`,null,D(2288,`List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.`)),Mu=P(`list.focusOutline`,{dark:bl,light:bl,hcDark:Sl,hcLight:Sl},D(2289,`List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.`)),Nu=P(`list.focusAndSelectionOutline`,null,D(2290,`List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.`)),Pu=P(`list.activeSelectionBackground`,{dark:`#04395E`,light:`#0060C0`,hcDark:null,hcLight:M.fromHex(`#0F4A85`).transparent(.1)},D(2291,`List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.`)),Fu=P(`list.activeSelectionForeground`,{dark:M.white,light:M.white,hcDark:null,hcLight:null},D(2292,`List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.`)),Iu=P(`list.activeSelectionIconForeground`,null,D(2293,`List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.`)),Lu=P(`list.inactiveSelectionBackground`,{dark:`#37373D`,light:`#E4E6F1`,hcDark:null,hcLight:M.fromHex(`#0F4A85`).transparent(.1)},D(2294,`List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.`)),Ru=P(`list.inactiveSelectionForeground`,null,D(2295,`List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.`)),zu=P(`list.inactiveSelectionIconForeground`,null,D(2296,`List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.`)),Bu=P(`list.inactiveFocusBackground`,null,D(2297,`List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.`)),Vu=P(`list.inactiveFocusOutline`,null,D(2298,`List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.`)),Hu=P(`list.hoverBackground`,{dark:`#2A2D2E`,light:`#F0F0F0`,hcDark:M.white.transparent(.1),hcLight:M.fromHex(`#0F4A85`).transparent(.1)},D(2299,`List/Tree background when hovering over items using the mouse.`)),Uu=P(`list.hoverForeground`,null,D(2300,`List/Tree foreground when hovering over items using the mouse.`)),Wu=P(`list.dropBackground`,{dark:`#062F4A`,light:`#D6EBFF`,hcDark:null,hcLight:null},D(2301,`List/Tree drag and drop background when moving items over other items when using the mouse.`)),Gu=P(`list.dropBetweenBackground`,{dark:yl,light:yl,hcDark:null,hcLight:null},D(2302,`List/Tree drag and drop border color when moving items between items when using the mouse.`)),Ku=P(`list.highlightForeground`,{dark:`#2AAAFF`,light:`#0066BF`,hcDark:bl,hcLight:bl},D(2303,`List/Tree foreground color of the match highlights when searching inside the list/tree.`)),qu=P(`list.focusHighlightForeground`,{dark:Ku,light:ll(Pu,Ku,`#BBE7FF`),hcDark:Ku,hcLight:Ku},D(2304,`List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree.`)),Ju=P(`list.invalidItemForeground`,{dark:`#B89500`,light:`#B89500`,hcDark:`#B89500`,hcLight:`#B5200D`},D(2305,`List/Tree foreground color for invalid items, for example an unresolved root in explorer.`)),Yu=P(`list.errorForeground`,{dark:`#F88070`,light:`#B01011`,hcDark:null,hcLight:null},D(2306,`Foreground color of list items containing errors.`)),Xu=P(`list.warningForeground`,{dark:`#CCA700`,light:`#855F00`,hcDark:null,hcLight:null},D(2307,`Foreground color of list items containing warnings.`)),Zu=P(`listFilterWidget.background`,{light:il(Il,0),dark:al(Il,0),hcDark:Il,hcLight:Il},D(2308,`Background color of the type filter widget in lists and trees.`)),Qu=P(`listFilterWidget.outline`,{dark:M.transparent,light:M.transparent,hcDark:`#f38518`,hcLight:`#007ACC`},D(2309,`Outline color of the type filter widget in lists and trees.`)),$u=P(`listFilterWidget.noMatchesOutline`,{dark:`#BE1100`,light:`#BE1100`,hcDark:xl,hcLight:xl},D(2310,`Outline color of the type filter widget in lists and trees, when there are no matches.`)),ed=P(`listFilterWidget.shadow`,tu,D(2311,`Shadow color of the type filter widget in lists and trees.`)),td=P(`list.filterMatchBackground`,{dark:ql,light:ql,hcDark:null,hcLight:null},D(2312,`Background color of the filtered match.`)),nd=P(`list.filterMatchBorder`,{dark:Jl,light:Jl,hcDark:xl,hcLight:Sl},D(2313,`Border color of the filtered match.`)),rd=P(`list.deemphasizedForeground`,{dark:`#8C8C8C`,light:`#8E8E90`,hcDark:`#A7A8A9`,hcLight:`#666666`},D(2314,`List/Tree foreground color for items that are deemphasized.`)),id=P(`tree.indentGuidesStroke`,{dark:`#585858`,light:`#a9a9a9`,hcDark:`#a9a9a9`,hcLight:`#a5a5a5`},D(2315,`Tree stroke color for the indentation guides.`)),ad=P(`tree.inactiveIndentGuidesStroke`,ol(id,.4),D(2316,`Tree stroke color for the indentation guides that are not active.`)),od=P(`tree.tableColumnsBorder`,{dark:`#CCCCCC20`,light:`#61616120`,hcDark:null,hcLight:null},D(2317,`Table border color between columns.`)),sd=P(`tree.tableOddRowsBackground`,{dark:ol(hl,.04),light:ol(hl,.04),hcDark:null,hcLight:null},D(2318,`Background color for odd table rows.`));P(`editorActionList.background`,Il,D(2319,`Action List background color.`));var cd=P(`editorActionList.foreground`,Ll,D(2320,`Action List foreground color.`));P(`editorActionList.focusForeground`,Fu,D(2321,`Action List foreground color for the focused item.`)),P(`editorActionList.focusBackground`,Pu,D(2322,`Action List background color for the focused item.`));var ld=P(`input.background`,{dark:`#3C3C3C`,light:M.white,hcDark:M.black,hcLight:M.white},D(2239,`Input box background.`)),ud=P(`input.foreground`,hl,D(2240,`Input box foreground.`)),dd=P(`input.border`,{dark:null,light:null,hcDark:xl,hcLight:xl},D(2241,`Input box border.`)),fd=P(`inputOption.activeBorder`,{dark:`#007ACC`,light:`#007ACC`,hcDark:xl,hcLight:xl},D(2242,`Border color of activated options in input fields.`)),pd=P(`inputOption.hoverBackground`,{dark:`#5a5d5e80`,light:`#b8b8b850`,hcDark:null,hcLight:null},D(2243,`Background color of activated options in input fields.`)),md=P(`inputOption.activeBackground`,{dark:ol(bl,.4),light:ol(bl,.2),hcDark:M.transparent,hcLight:M.transparent},D(2244,`Background hover color of options in input fields.`)),hd=P(`inputOption.activeForeground`,{dark:M.white,light:M.black,hcDark:hl,hcLight:hl},D(2245,`Foreground color of activated options in input fields.`)),gd=P(`input.placeholderForeground`,{light:ol(hl,.5),dark:ol(hl,.5),hcDark:ol(hl,.7),hcLight:ol(hl,.7)},D(2246,`Input box foreground color for placeholder text.`)),_d=P(`inputValidation.infoBackground`,{dark:`#063B49`,light:`#D6ECF2`,hcDark:M.black,hcLight:M.white},D(2247,`Input validation background color for information severity.`)),vd=P(`inputValidation.infoForeground`,{dark:null,light:null,hcDark:null,hcLight:hl},D(2248,`Input validation foreground color for information severity.`)),yd=P(`inputValidation.infoBorder`,{dark:`#007acc`,light:`#007acc`,hcDark:xl,hcLight:xl},D(2249,`Input validation border color for information severity.`)),bd=P(`inputValidation.warningBackground`,{dark:`#352A05`,light:`#F6F5D2`,hcDark:M.black,hcLight:M.white},D(2250,`Input validation background color for warning severity.`)),xd=P(`inputValidation.warningForeground`,{dark:null,light:null,hcDark:null,hcLight:hl},D(2251,`Input validation foreground color for warning severity.`)),Sd=P(`inputValidation.warningBorder`,{dark:`#B89500`,light:`#B89500`,hcDark:xl,hcLight:xl},D(2252,`Input validation border color for warning severity.`)),Cd=P(`inputValidation.errorBackground`,{dark:`#5A1D1D`,light:`#F2DEDE`,hcDark:M.black,hcLight:M.white},D(2253,`Input validation background color for error severity.`)),wd=P(`inputValidation.errorForeground`,{dark:null,light:null,hcDark:null,hcLight:hl},D(2254,`Input validation foreground color for error severity.`)),Td=P(`inputValidation.errorBorder`,{dark:`#BE1100`,light:`#BE1100`,hcDark:xl,hcLight:xl},D(2255,`Input validation border color for error severity.`)),Ed=P(`dropdown.background`,{dark:`#3C3C3C`,light:M.white,hcDark:M.black,hcLight:M.white},D(2256,`Dropdown background.`)),Dd=P(`dropdown.listBackground`,{dark:null,light:null,hcDark:M.black,hcLight:M.white},D(2257,`Dropdown list background.`)),Od=P(`dropdown.foreground`,{dark:`#F0F0F0`,light:hl,hcDark:M.white,hcLight:hl},D(2258,`Dropdown foreground.`)),kd=P(`dropdown.border`,{dark:Ed,light:`#CECECE`,hcDark:xl,hcLight:xl},D(2259,`Dropdown border.`)),Ad=P(`button.foreground`,M.white,D(2260,`Button foreground color.`)),jd=P(`button.separator`,ol(Ad,.4),D(2261,`Button separator color.`)),Md=P(`button.background`,{dark:`#0E639C`,light:`#007ACC`,hcDark:M.black,hcLight:`#0F4A85`},D(2262,`Button background color.`)),Nd=P(`button.hoverBackground`,{dark:al(Md,.2),light:il(Md,.2),hcDark:Md,hcLight:Md},D(2263,`Button background color when hovering.`)),Pd=P(`button.border`,xl,D(2264,`Button border color.`)),Fd=P(`button.secondaryForeground`,{dark:hl,light:hl,hcDark:M.white,hcLight:hl},D(2265,`Secondary button foreground color.`)),Id=P(`button.secondaryBackground`,{dark:Hu,light:Hu,hcDark:null,hcLight:M.white},D(2266,`Secondary button background color.`)),Ld=P(`button.secondaryBorder`,xl,D(2267,`Secondary button border color.`)),Rd=P(`button.secondaryHoverBackground`,{dark:al(Id,.2),light:al(Id,.2),hcDark:null,hcLight:null},D(2268,`Secondary button background color when hovering.`)),zd=P(`radio.activeForeground`,hd,D(2269,`Foreground color of active radio option.`)),Bd=P(`radio.activeBackground`,md,D(2270,`Background color of active radio option.`)),Vd=P(`radio.activeBorder`,fd,D(2271,`Border color of the active radio option.`)),Hd=P(`radio.inactiveForeground`,null,D(2272,`Foreground color of inactive radio option.`)),Ud=P(`radio.inactiveBackground`,null,D(2273,`Background color of inactive radio option.`)),Wd=P(`radio.inactiveBorder`,{light:ol(zd,.2),dark:ol(zd,.2),hcDark:ol(zd,.4),hcLight:ol(zd,.2)},D(2274,`Border color of the inactive radio option.`)),Gd=P(`radio.inactiveHoverBackground`,pd,D(2275,`Background color of inactive active radio option when hovering.`)),Kd=P(`checkbox.background`,Ed,D(2276,`Background color of checkbox widget.`));P(`checkbox.selectBackground`,Il,D(2277,`Background color of checkbox widget when the element it's in is selected.`));var qd=P(`checkbox.foreground`,Od,D(2278,`Foreground color of checkbox widget.`)),Jd=P(`checkbox.border`,kd,D(2279,`Border color of checkbox widget.`));P(`checkbox.selectBorder`,yl,D(2280,`Border color of checkbox widget when the element it's in is selected.`));var Yd=P(`checkbox.disabled.background`,{op:Zc.Mix,color:Kd,with:qd,ratio:.33},D(2281,`Background of a disabled checkbox.`)),Xd=P(`checkbox.disabled.foreground`,{op:Zc.Mix,color:qd,with:Kd,ratio:.33},D(2282,`Foreground of a disabled checkbox.`)),Zd=P(`keybindingLabel.background`,{dark:new M(new j(128,128,128,.17)),light:new M(new j(221,221,221,.4)),hcDark:M.transparent,hcLight:M.transparent},D(2283,`Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.`)),Qd=P(`keybindingLabel.foreground`,{dark:M.fromHex(`#CCCCCC`),light:M.fromHex(`#555555`),hcDark:M.white,hcLight:hl},D(2284,`Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.`)),$d=P(`keybindingLabel.border`,{dark:new M(new j(51,51,51,.6)),light:new M(new j(204,204,204,.4)),hcDark:new M(new j(111,195,223)),hcLight:xl},D(2285,`Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.`)),ef=P(`keybindingLabel.bottomBorder`,{dark:new M(new j(68,68,68,.6)),light:new M(new j(187,187,187,.4)),hcDark:new M(new j(111,195,223)),hcLight:hl},D(2286,`Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.`)),tf=P(`menu.border`,{dark:null,light:null,hcDark:xl,hcLight:xl},D(2323,`Border color of menus.`)),nf=P(`menu.foreground`,Od,D(2324,`Foreground color of menu items.`)),rf=P(`menu.background`,Ed,D(2325,`Background color of menu items.`)),af=P(`menu.selectionForeground`,Fu,D(2326,`Foreground color of the selected menu item in menus.`)),of=P(`menu.selectionBackground`,Pu,D(2327,`Background color of the selected menu item in menus.`)),sf=P(`menu.selectionBorder`,{dark:null,light:null,hcDark:Sl,hcLight:Sl},D(2328,`Border color of the selected menu item in menus.`)),cf=P(`menu.separatorBackground`,{dark:`#606060`,light:`#D4D4D4`,hcDark:xl,hcLight:xl},D(2329,`Color of a separator menu item in menus.`)),lf=P(`quickInput.background`,Il,D(2357,`Quick picker background color. The quick picker widget is the container for pickers like the command palette.`)),uf=P(`quickInput.foreground`,Ll,D(2358,`Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.`)),df=P(`quickInputTitle.background`,{dark:new M(new j(255,255,255,.105)),light:new M(new j(0,0,0,.06)),hcDark:`#000000`,hcLight:M.white},D(2359,`Quick picker title background color. The quick picker widget is the container for pickers like the command palette.`)),ff=P(`pickerGroup.foreground`,{dark:`#3794FF`,light:`#0066BF`,hcDark:M.white,hcLight:`#0F4A85`},D(2360,`Quick picker color for grouping labels.`)),pf=P(`pickerGroup.border`,{dark:`#3F3F46`,light:`#CCCEDB`,hcDark:M.white,hcLight:`#0F4A85`},D(2361,`Quick picker color for grouping borders.`)),mf=P(`quickInput.list.focusBackground`,null,``,void 0,D(2362,`Please use quickInputList.focusBackground instead`)),hf=P(`quickInputList.focusForeground`,Fu,D(2363,`Quick picker foreground color for the focused item.`)),gf=P(`quickInputList.focusIconForeground`,Iu,D(2364,`Quick picker icon foreground color for the focused item.`)),_f=P(`quickInputList.focusBackground`,{dark:cl(mf,Pu),light:cl(mf,Pu),hcDark:null,hcLight:null},D(2365,`Quick picker background color for the focused item.`));P(`search.resultsInfoForeground`,{light:hl,dark:ol(hl,.65),hcDark:hl,hcLight:hl},D(2366,`Color of the text in the search viewlet's completion message.`)),P(`searchEditor.findMatchBackground`,{light:ol(ql,.66),dark:ol(ql,.66),hcDark:ql,hcLight:ql},D(2367,`Color of the Search Editor query matches.`)),P(`searchEditor.findMatchBorder`,{light:ol(Jl,.66),dark:ol(Jl,.66),hcDark:Jl,hcLight:Jl},D(2368,`Border color of the Search Editor query matches.`));var vf=class e{constructor(){this.mapWindowIdToZoomLevel=new Map,this._onDidChangeZoomLevel=new E,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this.mapWindowIdToZoomFactor=new Map,this._onDidChangeFullscreen=new E,this.onDidChangeFullscreen=this._onDidChangeFullscreen.event,this.mapWindowIdToFullScreen=new Map}static#e=this.INSTANCE=new e;getZoomLevel(e){return this.mapWindowIdToZoomLevel.get(this.getWindowId(e))??0}setZoomLevel(e,t){if(this.getZoomLevel(t)===e)return;let n=this.getWindowId(t);this.mapWindowIdToZoomLevel.set(n,e),this._onDidChangeZoomLevel.fire(n)}getZoomFactor(e){return this.mapWindowIdToZoomFactor.get(this.getWindowId(e))??1}setZoomFactor(e,t){this.mapWindowIdToZoomFactor.set(this.getWindowId(t),e)}setFullscreen(e,t){if(this.isFullscreen(t)===e)return;let n=this.getWindowId(t);this.mapWindowIdToFullScreen.set(n,e),this._onDidChangeFullscreen.fire(n)}isFullscreen(e){return!!this.mapWindowIdToFullScreen.get(this.getWindowId(e))}getWindowId(e){return e.vscodeWindowId}};function yf(e,t,n){typeof t==`string`&&(t=e.matchMedia(t)),t.addEventListener(`change`,n)}function bf(e){return vf.INSTANCE.getZoomLevel(e)}function xf(e){return vf.INSTANCE.getZoomFactor(e)}function Sf(e,t){vf.INSTANCE.setFullscreen(e,t)}function Cf(e){return vf.INSTANCE.isFullscreen(e)}var wf=vf.INSTANCE.onDidChangeFullscreen,Tf=i.navigator.userAgent,Ef=Tf.indexOf(`Firefox`)>=0,Df=Tf.indexOf(`AppleWebKit`)>=0,Of=Tf.indexOf(`Chrome`)>=0,kf=!Of&&Tf.indexOf(`Safari`)>=0,Af=!Of&&!kf&&Df;Tf.indexOf(`Electron/`);var jf=Tf.indexOf(`Android`)>=0,Mf=!1;if(typeof i.matchMedia==`function`){let e=i.matchMedia(`(display-mode: standalone) or (display-mode: window-controls-overlay)`),t=i.matchMedia(`(display-mode: fullscreen)`);Mf=e.matches,yf(i,e,({matches:e})=>{Mf&&t.matches||(Mf=e)})}function Nf(){return Mf}function Pf(){return!!navigator?.windowControlsOverlay?.visible}function Ff(e){return e.navigator?.windowControlsOverlay?.getTitlebarAreaRect()}function If(){return globalThis.MonacoEnvironment}var Lf;(function(e){e[e.Always=0]=`Always`,e[e.FullScreen=1]=`FullScreen`,e[e.None=2]=`None`})(Lf||={});var Rf={clipboard:{writeText:li||i.document.queryCommandSupported&&i.document.queryCommandSupported(`copy`)||!!(i.navigator&&i.navigator.clipboard&&i.navigator.clipboard.writeText),readText:li||!!(i.navigator&&i.navigator.clipboard&&i.navigator.clipboard.readText)},keyboard:(()=>li||Nf()?Lf.Always:i.navigator.keyboard||kf?Lf.FullScreen:Lf.None)(),pointerEvents:i.PointerEvent&&(`ontouchstart`in i||i.navigator.maxTouchPoints>0)},F;(function(e){e[e.DependsOnKbLayout=-1]=`DependsOnKbLayout`,e[e.Unknown=0]=`Unknown`,e[e.Backspace=1]=`Backspace`,e[e.Tab=2]=`Tab`,e[e.Enter=3]=`Enter`,e[e.Shift=4]=`Shift`,e[e.Ctrl=5]=`Ctrl`,e[e.Alt=6]=`Alt`,e[e.PauseBreak=7]=`PauseBreak`,e[e.CapsLock=8]=`CapsLock`,e[e.Escape=9]=`Escape`,e[e.Space=10]=`Space`,e[e.PageUp=11]=`PageUp`,e[e.PageDown=12]=`PageDown`,e[e.End=13]=`End`,e[e.Home=14]=`Home`,e[e.LeftArrow=15]=`LeftArrow`,e[e.UpArrow=16]=`UpArrow`,e[e.RightArrow=17]=`RightArrow`,e[e.DownArrow=18]=`DownArrow`,e[e.Insert=19]=`Insert`,e[e.Delete=20]=`Delete`,e[e.Digit0=21]=`Digit0`,e[e.Digit1=22]=`Digit1`,e[e.Digit2=23]=`Digit2`,e[e.Digit3=24]=`Digit3`,e[e.Digit4=25]=`Digit4`,e[e.Digit5=26]=`Digit5`,e[e.Digit6=27]=`Digit6`,e[e.Digit7=28]=`Digit7`,e[e.Digit8=29]=`Digit8`,e[e.Digit9=30]=`Digit9`,e[e.KeyA=31]=`KeyA`,e[e.KeyB=32]=`KeyB`,e[e.KeyC=33]=`KeyC`,e[e.KeyD=34]=`KeyD`,e[e.KeyE=35]=`KeyE`,e[e.KeyF=36]=`KeyF`,e[e.KeyG=37]=`KeyG`,e[e.KeyH=38]=`KeyH`,e[e.KeyI=39]=`KeyI`,e[e.KeyJ=40]=`KeyJ`,e[e.KeyK=41]=`KeyK`,e[e.KeyL=42]=`KeyL`,e[e.KeyM=43]=`KeyM`,e[e.KeyN=44]=`KeyN`,e[e.KeyO=45]=`KeyO`,e[e.KeyP=46]=`KeyP`,e[e.KeyQ=47]=`KeyQ`,e[e.KeyR=48]=`KeyR`,e[e.KeyS=49]=`KeyS`,e[e.KeyT=50]=`KeyT`,e[e.KeyU=51]=`KeyU`,e[e.KeyV=52]=`KeyV`,e[e.KeyW=53]=`KeyW`,e[e.KeyX=54]=`KeyX`,e[e.KeyY=55]=`KeyY`,e[e.KeyZ=56]=`KeyZ`,e[e.Meta=57]=`Meta`,e[e.ContextMenu=58]=`ContextMenu`,e[e.F1=59]=`F1`,e[e.F2=60]=`F2`,e[e.F3=61]=`F3`,e[e.F4=62]=`F4`,e[e.F5=63]=`F5`,e[e.F6=64]=`F6`,e[e.F7=65]=`F7`,e[e.F8=66]=`F8`,e[e.F9=67]=`F9`,e[e.F10=68]=`F10`,e[e.F11=69]=`F11`,e[e.F12=70]=`F12`,e[e.F13=71]=`F13`,e[e.F14=72]=`F14`,e[e.F15=73]=`F15`,e[e.F16=74]=`F16`,e[e.F17=75]=`F17`,e[e.F18=76]=`F18`,e[e.F19=77]=`F19`,e[e.F20=78]=`F20`,e[e.F21=79]=`F21`,e[e.F22=80]=`F22`,e[e.F23=81]=`F23`,e[e.F24=82]=`F24`,e[e.NumLock=83]=`NumLock`,e[e.ScrollLock=84]=`ScrollLock`,e[e.Semicolon=85]=`Semicolon`,e[e.Equal=86]=`Equal`,e[e.Comma=87]=`Comma`,e[e.Minus=88]=`Minus`,e[e.Period=89]=`Period`,e[e.Slash=90]=`Slash`,e[e.Backquote=91]=`Backquote`,e[e.BracketLeft=92]=`BracketLeft`,e[e.Backslash=93]=`Backslash`,e[e.BracketRight=94]=`BracketRight`,e[e.Quote=95]=`Quote`,e[e.OEM_8=96]=`OEM_8`,e[e.IntlBackslash=97]=`IntlBackslash`,e[e.Numpad0=98]=`Numpad0`,e[e.Numpad1=99]=`Numpad1`,e[e.Numpad2=100]=`Numpad2`,e[e.Numpad3=101]=`Numpad3`,e[e.Numpad4=102]=`Numpad4`,e[e.Numpad5=103]=`Numpad5`,e[e.Numpad6=104]=`Numpad6`,e[e.Numpad7=105]=`Numpad7`,e[e.Numpad8=106]=`Numpad8`,e[e.Numpad9=107]=`Numpad9`,e[e.NumpadMultiply=108]=`NumpadMultiply`,e[e.NumpadAdd=109]=`NumpadAdd`,e[e.NUMPAD_SEPARATOR=110]=`NUMPAD_SEPARATOR`,e[e.NumpadSubtract=111]=`NumpadSubtract`,e[e.NumpadDecimal=112]=`NumpadDecimal`,e[e.NumpadDivide=113]=`NumpadDivide`,e[e.KEY_IN_COMPOSITION=114]=`KEY_IN_COMPOSITION`,e[e.ABNT_C1=115]=`ABNT_C1`,e[e.ABNT_C2=116]=`ABNT_C2`,e[e.AudioVolumeMute=117]=`AudioVolumeMute`,e[e.AudioVolumeUp=118]=`AudioVolumeUp`,e[e.AudioVolumeDown=119]=`AudioVolumeDown`,e[e.BrowserSearch=120]=`BrowserSearch`,e[e.BrowserHome=121]=`BrowserHome`,e[e.BrowserBack=122]=`BrowserBack`,e[e.BrowserForward=123]=`BrowserForward`,e[e.MediaTrackNext=124]=`MediaTrackNext`,e[e.MediaTrackPrevious=125]=`MediaTrackPrevious`,e[e.MediaStop=126]=`MediaStop`,e[e.MediaPlayPause=127]=`MediaPlayPause`,e[e.LaunchMediaPlayer=128]=`LaunchMediaPlayer`,e[e.LaunchMail=129]=`LaunchMail`,e[e.LaunchApp2=130]=`LaunchApp2`,e[e.Clear=131]=`Clear`,e[e.MAX_VALUE=132]=`MAX_VALUE`})(F||={});var I;(function(e){e[e.DependsOnKbLayout=-1]=`DependsOnKbLayout`,e[e.None=0]=`None`,e[e.Hyper=1]=`Hyper`,e[e.Super=2]=`Super`,e[e.Fn=3]=`Fn`,e[e.FnLock=4]=`FnLock`,e[e.Suspend=5]=`Suspend`,e[e.Resume=6]=`Resume`,e[e.Turbo=7]=`Turbo`,e[e.Sleep=8]=`Sleep`,e[e.WakeUp=9]=`WakeUp`,e[e.KeyA=10]=`KeyA`,e[e.KeyB=11]=`KeyB`,e[e.KeyC=12]=`KeyC`,e[e.KeyD=13]=`KeyD`,e[e.KeyE=14]=`KeyE`,e[e.KeyF=15]=`KeyF`,e[e.KeyG=16]=`KeyG`,e[e.KeyH=17]=`KeyH`,e[e.KeyI=18]=`KeyI`,e[e.KeyJ=19]=`KeyJ`,e[e.KeyK=20]=`KeyK`,e[e.KeyL=21]=`KeyL`,e[e.KeyM=22]=`KeyM`,e[e.KeyN=23]=`KeyN`,e[e.KeyO=24]=`KeyO`,e[e.KeyP=25]=`KeyP`,e[e.KeyQ=26]=`KeyQ`,e[e.KeyR=27]=`KeyR`,e[e.KeyS=28]=`KeyS`,e[e.KeyT=29]=`KeyT`,e[e.KeyU=30]=`KeyU`,e[e.KeyV=31]=`KeyV`,e[e.KeyW=32]=`KeyW`,e[e.KeyX=33]=`KeyX`,e[e.KeyY=34]=`KeyY`,e[e.KeyZ=35]=`KeyZ`,e[e.Digit1=36]=`Digit1`,e[e.Digit2=37]=`Digit2`,e[e.Digit3=38]=`Digit3`,e[e.Digit4=39]=`Digit4`,e[e.Digit5=40]=`Digit5`,e[e.Digit6=41]=`Digit6`,e[e.Digit7=42]=`Digit7`,e[e.Digit8=43]=`Digit8`,e[e.Digit9=44]=`Digit9`,e[e.Digit0=45]=`Digit0`,e[e.Enter=46]=`Enter`,e[e.Escape=47]=`Escape`,e[e.Backspace=48]=`Backspace`,e[e.Tab=49]=`Tab`,e[e.Space=50]=`Space`,e[e.Minus=51]=`Minus`,e[e.Equal=52]=`Equal`,e[e.BracketLeft=53]=`BracketLeft`,e[e.BracketRight=54]=`BracketRight`,e[e.Backslash=55]=`Backslash`,e[e.IntlHash=56]=`IntlHash`,e[e.Semicolon=57]=`Semicolon`,e[e.Quote=58]=`Quote`,e[e.Backquote=59]=`Backquote`,e[e.Comma=60]=`Comma`,e[e.Period=61]=`Period`,e[e.Slash=62]=`Slash`,e[e.CapsLock=63]=`CapsLock`,e[e.F1=64]=`F1`,e[e.F2=65]=`F2`,e[e.F3=66]=`F3`,e[e.F4=67]=`F4`,e[e.F5=68]=`F5`,e[e.F6=69]=`F6`,e[e.F7=70]=`F7`,e[e.F8=71]=`F8`,e[e.F9=72]=`F9`,e[e.F10=73]=`F10`,e[e.F11=74]=`F11`,e[e.F12=75]=`F12`,e[e.PrintScreen=76]=`PrintScreen`,e[e.ScrollLock=77]=`ScrollLock`,e[e.Pause=78]=`Pause`,e[e.Insert=79]=`Insert`,e[e.Home=80]=`Home`,e[e.PageUp=81]=`PageUp`,e[e.Delete=82]=`Delete`,e[e.End=83]=`End`,e[e.PageDown=84]=`PageDown`,e[e.ArrowRight=85]=`ArrowRight`,e[e.ArrowLeft=86]=`ArrowLeft`,e[e.ArrowDown=87]=`ArrowDown`,e[e.ArrowUp=88]=`ArrowUp`,e[e.NumLock=89]=`NumLock`,e[e.NumpadDivide=90]=`NumpadDivide`,e[e.NumpadMultiply=91]=`NumpadMultiply`,e[e.NumpadSubtract=92]=`NumpadSubtract`,e[e.NumpadAdd=93]=`NumpadAdd`,e[e.NumpadEnter=94]=`NumpadEnter`,e[e.Numpad1=95]=`Numpad1`,e[e.Numpad2=96]=`Numpad2`,e[e.Numpad3=97]=`Numpad3`,e[e.Numpad4=98]=`Numpad4`,e[e.Numpad5=99]=`Numpad5`,e[e.Numpad6=100]=`Numpad6`,e[e.Numpad7=101]=`Numpad7`,e[e.Numpad8=102]=`Numpad8`,e[e.Numpad9=103]=`Numpad9`,e[e.Numpad0=104]=`Numpad0`,e[e.NumpadDecimal=105]=`NumpadDecimal`,e[e.IntlBackslash=106]=`IntlBackslash`,e[e.ContextMenu=107]=`ContextMenu`,e[e.Power=108]=`Power`,e[e.NumpadEqual=109]=`NumpadEqual`,e[e.F13=110]=`F13`,e[e.F14=111]=`F14`,e[e.F15=112]=`F15`,e[e.F16=113]=`F16`,e[e.F17=114]=`F17`,e[e.F18=115]=`F18`,e[e.F19=116]=`F19`,e[e.F20=117]=`F20`,e[e.F21=118]=`F21`,e[e.F22=119]=`F22`,e[e.F23=120]=`F23`,e[e.F24=121]=`F24`,e[e.Open=122]=`Open`,e[e.Help=123]=`Help`,e[e.Select=124]=`Select`,e[e.Again=125]=`Again`,e[e.Undo=126]=`Undo`,e[e.Cut=127]=`Cut`,e[e.Copy=128]=`Copy`,e[e.Paste=129]=`Paste`,e[e.Find=130]=`Find`,e[e.AudioVolumeMute=131]=`AudioVolumeMute`,e[e.AudioVolumeUp=132]=`AudioVolumeUp`,e[e.AudioVolumeDown=133]=`AudioVolumeDown`,e[e.NumpadComma=134]=`NumpadComma`,e[e.IntlRo=135]=`IntlRo`,e[e.KanaMode=136]=`KanaMode`,e[e.IntlYen=137]=`IntlYen`,e[e.Convert=138]=`Convert`,e[e.NonConvert=139]=`NonConvert`,e[e.Lang1=140]=`Lang1`,e[e.Lang2=141]=`Lang2`,e[e.Lang3=142]=`Lang3`,e[e.Lang4=143]=`Lang4`,e[e.Lang5=144]=`Lang5`,e[e.Abort=145]=`Abort`,e[e.Props=146]=`Props`,e[e.NumpadParenLeft=147]=`NumpadParenLeft`,e[e.NumpadParenRight=148]=`NumpadParenRight`,e[e.NumpadBackspace=149]=`NumpadBackspace`,e[e.NumpadMemoryStore=150]=`NumpadMemoryStore`,e[e.NumpadMemoryRecall=151]=`NumpadMemoryRecall`,e[e.NumpadMemoryClear=152]=`NumpadMemoryClear`,e[e.NumpadMemoryAdd=153]=`NumpadMemoryAdd`,e[e.NumpadMemorySubtract=154]=`NumpadMemorySubtract`,e[e.NumpadClear=155]=`NumpadClear`,e[e.NumpadClearEntry=156]=`NumpadClearEntry`,e[e.ControlLeft=157]=`ControlLeft`,e[e.ShiftLeft=158]=`ShiftLeft`,e[e.AltLeft=159]=`AltLeft`,e[e.MetaLeft=160]=`MetaLeft`,e[e.ControlRight=161]=`ControlRight`,e[e.ShiftRight=162]=`ShiftRight`,e[e.AltRight=163]=`AltRight`,e[e.MetaRight=164]=`MetaRight`,e[e.BrightnessUp=165]=`BrightnessUp`,e[e.BrightnessDown=166]=`BrightnessDown`,e[e.MediaPlay=167]=`MediaPlay`,e[e.MediaRecord=168]=`MediaRecord`,e[e.MediaFastForward=169]=`MediaFastForward`,e[e.MediaRewind=170]=`MediaRewind`,e[e.MediaTrackNext=171]=`MediaTrackNext`,e[e.MediaTrackPrevious=172]=`MediaTrackPrevious`,e[e.MediaStop=173]=`MediaStop`,e[e.Eject=174]=`Eject`,e[e.MediaPlayPause=175]=`MediaPlayPause`,e[e.MediaSelect=176]=`MediaSelect`,e[e.LaunchMail=177]=`LaunchMail`,e[e.LaunchApp2=178]=`LaunchApp2`,e[e.LaunchApp1=179]=`LaunchApp1`,e[e.SelectTask=180]=`SelectTask`,e[e.LaunchScreenSaver=181]=`LaunchScreenSaver`,e[e.BrowserSearch=182]=`BrowserSearch`,e[e.BrowserHome=183]=`BrowserHome`,e[e.BrowserBack=184]=`BrowserBack`,e[e.BrowserForward=185]=`BrowserForward`,e[e.BrowserStop=186]=`BrowserStop`,e[e.BrowserRefresh=187]=`BrowserRefresh`,e[e.BrowserFavorites=188]=`BrowserFavorites`,e[e.ZoomToggle=189]=`ZoomToggle`,e[e.MailReply=190]=`MailReply`,e[e.MailForward=191]=`MailForward`,e[e.MailSend=192]=`MailSend`,e[e.MAX_VALUE=193]=`MAX_VALUE`})(I||={});var zf=class{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||F.Unknown}},Bf=new zf,Vf=new zf,Hf=new zf,Uf=Array(230),Wf={},Gf=[],Kf=Object.create(null),qf=Object.create(null),Jf={lowerCaseToEnum:e=>qf[e]||I.None,toEnum:e=>Kf[e]||I.None,toString:e=>Gf[e]||`None`},Yf=[],Xf=[];for(let e=0;e<=I.MAX_VALUE;e++)Yf[e]=F.DependsOnKbLayout;for(let e=0;e<=F.MAX_VALUE;e++)Xf[e]=I.DependsOnKbLayout;(function(){let e=[[1,I.None,`None`,F.Unknown,`unknown`,0,`VK_UNKNOWN`,``,``],[1,I.Hyper,`Hyper`,F.Unknown,``,0,``,``,``],[1,I.Super,`Super`,F.Unknown,``,0,``,``,``],[1,I.Fn,`Fn`,F.Unknown,``,0,``,``,``],[1,I.FnLock,`FnLock`,F.Unknown,``,0,``,``,``],[1,I.Suspend,`Suspend`,F.Unknown,``,0,``,``,``],[1,I.Resume,`Resume`,F.Unknown,``,0,``,``,``],[1,I.Turbo,`Turbo`,F.Unknown,``,0,``,``,``],[1,I.Sleep,`Sleep`,F.Unknown,``,0,`VK_SLEEP`,``,``],[1,I.WakeUp,`WakeUp`,F.Unknown,``,0,``,``,``],[0,I.KeyA,`KeyA`,F.KeyA,`A`,65,`VK_A`,``,``],[0,I.KeyB,`KeyB`,F.KeyB,`B`,66,`VK_B`,``,``],[0,I.KeyC,`KeyC`,F.KeyC,`C`,67,`VK_C`,``,``],[0,I.KeyD,`KeyD`,F.KeyD,`D`,68,`VK_D`,``,``],[0,I.KeyE,`KeyE`,F.KeyE,`E`,69,`VK_E`,``,``],[0,I.KeyF,`KeyF`,F.KeyF,`F`,70,`VK_F`,``,``],[0,I.KeyG,`KeyG`,F.KeyG,`G`,71,`VK_G`,``,``],[0,I.KeyH,`KeyH`,F.KeyH,`H`,72,`VK_H`,``,``],[0,I.KeyI,`KeyI`,F.KeyI,`I`,73,`VK_I`,``,``],[0,I.KeyJ,`KeyJ`,F.KeyJ,`J`,74,`VK_J`,``,``],[0,I.KeyK,`KeyK`,F.KeyK,`K`,75,`VK_K`,``,``],[0,I.KeyL,`KeyL`,F.KeyL,`L`,76,`VK_L`,``,``],[0,I.KeyM,`KeyM`,F.KeyM,`M`,77,`VK_M`,``,``],[0,I.KeyN,`KeyN`,F.KeyN,`N`,78,`VK_N`,``,``],[0,I.KeyO,`KeyO`,F.KeyO,`O`,79,`VK_O`,``,``],[0,I.KeyP,`KeyP`,F.KeyP,`P`,80,`VK_P`,``,``],[0,I.KeyQ,`KeyQ`,F.KeyQ,`Q`,81,`VK_Q`,``,``],[0,I.KeyR,`KeyR`,F.KeyR,`R`,82,`VK_R`,``,``],[0,I.KeyS,`KeyS`,F.KeyS,`S`,83,`VK_S`,``,``],[0,I.KeyT,`KeyT`,F.KeyT,`T`,84,`VK_T`,``,``],[0,I.KeyU,`KeyU`,F.KeyU,`U`,85,`VK_U`,``,``],[0,I.KeyV,`KeyV`,F.KeyV,`V`,86,`VK_V`,``,``],[0,I.KeyW,`KeyW`,F.KeyW,`W`,87,`VK_W`,``,``],[0,I.KeyX,`KeyX`,F.KeyX,`X`,88,`VK_X`,``,``],[0,I.KeyY,`KeyY`,F.KeyY,`Y`,89,`VK_Y`,``,``],[0,I.KeyZ,`KeyZ`,F.KeyZ,`Z`,90,`VK_Z`,``,``],[0,I.Digit1,`Digit1`,F.Digit1,`1`,49,`VK_1`,``,``],[0,I.Digit2,`Digit2`,F.Digit2,`2`,50,`VK_2`,``,``],[0,I.Digit3,`Digit3`,F.Digit3,`3`,51,`VK_3`,``,``],[0,I.Digit4,`Digit4`,F.Digit4,`4`,52,`VK_4`,``,``],[0,I.Digit5,`Digit5`,F.Digit5,`5`,53,`VK_5`,``,``],[0,I.Digit6,`Digit6`,F.Digit6,`6`,54,`VK_6`,``,``],[0,I.Digit7,`Digit7`,F.Digit7,`7`,55,`VK_7`,``,``],[0,I.Digit8,`Digit8`,F.Digit8,`8`,56,`VK_8`,``,``],[0,I.Digit9,`Digit9`,F.Digit9,`9`,57,`VK_9`,``,``],[0,I.Digit0,`Digit0`,F.Digit0,`0`,48,`VK_0`,``,``],[1,I.Enter,`Enter`,F.Enter,`Enter`,13,`VK_RETURN`,``,``],[1,I.Escape,`Escape`,F.Escape,`Escape`,27,`VK_ESCAPE`,``,``],[1,I.Backspace,`Backspace`,F.Backspace,`Backspace`,8,`VK_BACK`,``,``],[1,I.Tab,`Tab`,F.Tab,`Tab`,9,`VK_TAB`,``,``],[1,I.Space,`Space`,F.Space,`Space`,32,`VK_SPACE`,``,``],[0,I.Minus,`Minus`,F.Minus,`-`,189,`VK_OEM_MINUS`,`-`,`OEM_MINUS`],[0,I.Equal,`Equal`,F.Equal,`=`,187,`VK_OEM_PLUS`,`=`,`OEM_PLUS`],[0,I.BracketLeft,`BracketLeft`,F.BracketLeft,`[`,219,`VK_OEM_4`,`[`,`OEM_4`],[0,I.BracketRight,`BracketRight`,F.BracketRight,`]`,221,`VK_OEM_6`,`]`,`OEM_6`],[0,I.Backslash,`Backslash`,F.Backslash,`\\`,220,`VK_OEM_5`,`\\`,`OEM_5`],[0,I.IntlHash,`IntlHash`,F.Unknown,``,0,``,``,``],[0,I.Semicolon,`Semicolon`,F.Semicolon,`;`,186,`VK_OEM_1`,`;`,`OEM_1`],[0,I.Quote,`Quote`,F.Quote,`'`,222,`VK_OEM_7`,`'`,`OEM_7`],[0,I.Backquote,`Backquote`,F.Backquote,"`",192,`VK_OEM_3`,"`",`OEM_3`],[0,I.Comma,`Comma`,F.Comma,`,`,188,`VK_OEM_COMMA`,`,`,`OEM_COMMA`],[0,I.Period,`Period`,F.Period,`.`,190,`VK_OEM_PERIOD`,`.`,`OEM_PERIOD`],[0,I.Slash,`Slash`,F.Slash,`/`,191,`VK_OEM_2`,`/`,`OEM_2`],[1,I.CapsLock,`CapsLock`,F.CapsLock,`CapsLock`,20,`VK_CAPITAL`,``,``],[1,I.F1,`F1`,F.F1,`F1`,112,`VK_F1`,``,``],[1,I.F2,`F2`,F.F2,`F2`,113,`VK_F2`,``,``],[1,I.F3,`F3`,F.F3,`F3`,114,`VK_F3`,``,``],[1,I.F4,`F4`,F.F4,`F4`,115,`VK_F4`,``,``],[1,I.F5,`F5`,F.F5,`F5`,116,`VK_F5`,``,``],[1,I.F6,`F6`,F.F6,`F6`,117,`VK_F6`,``,``],[1,I.F7,`F7`,F.F7,`F7`,118,`VK_F7`,``,``],[1,I.F8,`F8`,F.F8,`F8`,119,`VK_F8`,``,``],[1,I.F9,`F9`,F.F9,`F9`,120,`VK_F9`,``,``],[1,I.F10,`F10`,F.F10,`F10`,121,`VK_F10`,``,``],[1,I.F11,`F11`,F.F11,`F11`,122,`VK_F11`,``,``],[1,I.F12,`F12`,F.F12,`F12`,123,`VK_F12`,``,``],[1,I.PrintScreen,`PrintScreen`,F.Unknown,``,0,``,``,``],[1,I.ScrollLock,`ScrollLock`,F.ScrollLock,`ScrollLock`,145,`VK_SCROLL`,``,``],[1,I.Pause,`Pause`,F.PauseBreak,`PauseBreak`,19,`VK_PAUSE`,``,``],[1,I.Insert,`Insert`,F.Insert,`Insert`,45,`VK_INSERT`,``,``],[1,I.Home,`Home`,F.Home,`Home`,36,`VK_HOME`,``,``],[1,I.PageUp,`PageUp`,F.PageUp,`PageUp`,33,`VK_PRIOR`,``,``],[1,I.Delete,`Delete`,F.Delete,`Delete`,46,`VK_DELETE`,``,``],[1,I.End,`End`,F.End,`End`,35,`VK_END`,``,``],[1,I.PageDown,`PageDown`,F.PageDown,`PageDown`,34,`VK_NEXT`,``,``],[1,I.ArrowRight,`ArrowRight`,F.RightArrow,`RightArrow`,39,`VK_RIGHT`,`Right`,``],[1,I.ArrowLeft,`ArrowLeft`,F.LeftArrow,`LeftArrow`,37,`VK_LEFT`,`Left`,``],[1,I.ArrowDown,`ArrowDown`,F.DownArrow,`DownArrow`,40,`VK_DOWN`,`Down`,``],[1,I.ArrowUp,`ArrowUp`,F.UpArrow,`UpArrow`,38,`VK_UP`,`Up`,``],[1,I.NumLock,`NumLock`,F.NumLock,`NumLock`,144,`VK_NUMLOCK`,``,``],[1,I.NumpadDivide,`NumpadDivide`,F.NumpadDivide,`NumPad_Divide`,111,`VK_DIVIDE`,``,``],[1,I.NumpadMultiply,`NumpadMultiply`,F.NumpadMultiply,`NumPad_Multiply`,106,`VK_MULTIPLY`,``,``],[1,I.NumpadSubtract,`NumpadSubtract`,F.NumpadSubtract,`NumPad_Subtract`,109,`VK_SUBTRACT`,``,``],[1,I.NumpadAdd,`NumpadAdd`,F.NumpadAdd,`NumPad_Add`,107,`VK_ADD`,``,``],[1,I.NumpadEnter,`NumpadEnter`,F.Enter,``,0,``,``,``],[1,I.Numpad1,`Numpad1`,F.Numpad1,`NumPad1`,97,`VK_NUMPAD1`,``,``],[1,I.Numpad2,`Numpad2`,F.Numpad2,`NumPad2`,98,`VK_NUMPAD2`,``,``],[1,I.Numpad3,`Numpad3`,F.Numpad3,`NumPad3`,99,`VK_NUMPAD3`,``,``],[1,I.Numpad4,`Numpad4`,F.Numpad4,`NumPad4`,100,`VK_NUMPAD4`,``,``],[1,I.Numpad5,`Numpad5`,F.Numpad5,`NumPad5`,101,`VK_NUMPAD5`,``,``],[1,I.Numpad6,`Numpad6`,F.Numpad6,`NumPad6`,102,`VK_NUMPAD6`,``,``],[1,I.Numpad7,`Numpad7`,F.Numpad7,`NumPad7`,103,`VK_NUMPAD7`,``,``],[1,I.Numpad8,`Numpad8`,F.Numpad8,`NumPad8`,104,`VK_NUMPAD8`,``,``],[1,I.Numpad9,`Numpad9`,F.Numpad9,`NumPad9`,105,`VK_NUMPAD9`,``,``],[1,I.Numpad0,`Numpad0`,F.Numpad0,`NumPad0`,96,`VK_NUMPAD0`,``,``],[1,I.NumpadDecimal,`NumpadDecimal`,F.NumpadDecimal,`NumPad_Decimal`,110,`VK_DECIMAL`,``,``],[0,I.IntlBackslash,`IntlBackslash`,F.IntlBackslash,`OEM_102`,226,`VK_OEM_102`,``,``],[1,I.ContextMenu,`ContextMenu`,F.ContextMenu,`ContextMenu`,93,``,``,``],[1,I.Power,`Power`,F.Unknown,``,0,``,``,``],[1,I.NumpadEqual,`NumpadEqual`,F.Unknown,``,0,``,``,``],[1,I.F13,`F13`,F.F13,`F13`,124,`VK_F13`,``,``],[1,I.F14,`F14`,F.F14,`F14`,125,`VK_F14`,``,``],[1,I.F15,`F15`,F.F15,`F15`,126,`VK_F15`,``,``],[1,I.F16,`F16`,F.F16,`F16`,127,`VK_F16`,``,``],[1,I.F17,`F17`,F.F17,`F17`,128,`VK_F17`,``,``],[1,I.F18,`F18`,F.F18,`F18`,129,`VK_F18`,``,``],[1,I.F19,`F19`,F.F19,`F19`,130,`VK_F19`,``,``],[1,I.F20,`F20`,F.F20,`F20`,131,`VK_F20`,``,``],[1,I.F21,`F21`,F.F21,`F21`,132,`VK_F21`,``,``],[1,I.F22,`F22`,F.F22,`F22`,133,`VK_F22`,``,``],[1,I.F23,`F23`,F.F23,`F23`,134,`VK_F23`,``,``],[1,I.F24,`F24`,F.F24,`F24`,135,`VK_F24`,``,``],[1,I.Open,`Open`,F.Unknown,``,0,``,``,``],[1,I.Help,`Help`,F.Unknown,``,0,``,``,``],[1,I.Select,`Select`,F.Unknown,``,0,``,``,``],[1,I.Again,`Again`,F.Unknown,``,0,``,``,``],[1,I.Undo,`Undo`,F.Unknown,``,0,``,``,``],[1,I.Cut,`Cut`,F.Unknown,``,0,``,``,``],[1,I.Copy,`Copy`,F.Unknown,``,0,``,``,``],[1,I.Paste,`Paste`,F.Unknown,``,0,``,``,``],[1,I.Find,`Find`,F.Unknown,``,0,``,``,``],[1,I.AudioVolumeMute,`AudioVolumeMute`,F.AudioVolumeMute,`AudioVolumeMute`,173,`VK_VOLUME_MUTE`,``,``],[1,I.AudioVolumeUp,`AudioVolumeUp`,F.AudioVolumeUp,`AudioVolumeUp`,175,`VK_VOLUME_UP`,``,``],[1,I.AudioVolumeDown,`AudioVolumeDown`,F.AudioVolumeDown,`AudioVolumeDown`,174,`VK_VOLUME_DOWN`,``,``],[1,I.NumpadComma,`NumpadComma`,F.NUMPAD_SEPARATOR,`NumPad_Separator`,108,`VK_SEPARATOR`,``,``],[0,I.IntlRo,`IntlRo`,F.ABNT_C1,`ABNT_C1`,193,`VK_ABNT_C1`,``,``],[1,I.KanaMode,`KanaMode`,F.Unknown,``,0,``,``,``],[0,I.IntlYen,`IntlYen`,F.Unknown,``,0,``,``,``],[1,I.Convert,`Convert`,F.Unknown,``,0,``,``,``],[1,I.NonConvert,`NonConvert`,F.Unknown,``,0,``,``,``],[1,I.Lang1,`Lang1`,F.Unknown,``,0,``,``,``],[1,I.Lang2,`Lang2`,F.Unknown,``,0,``,``,``],[1,I.Lang3,`Lang3`,F.Unknown,``,0,``,``,``],[1,I.Lang4,`Lang4`,F.Unknown,``,0,``,``,``],[1,I.Lang5,`Lang5`,F.Unknown,``,0,``,``,``],[1,I.Abort,`Abort`,F.Unknown,``,0,``,``,``],[1,I.Props,`Props`,F.Unknown,``,0,``,``,``],[1,I.NumpadParenLeft,`NumpadParenLeft`,F.Unknown,``,0,``,``,``],[1,I.NumpadParenRight,`NumpadParenRight`,F.Unknown,``,0,``,``,``],[1,I.NumpadBackspace,`NumpadBackspace`,F.Unknown,``,0,``,``,``],[1,I.NumpadMemoryStore,`NumpadMemoryStore`,F.Unknown,``,0,``,``,``],[1,I.NumpadMemoryRecall,`NumpadMemoryRecall`,F.Unknown,``,0,``,``,``],[1,I.NumpadMemoryClear,`NumpadMemoryClear`,F.Unknown,``,0,``,``,``],[1,I.NumpadMemoryAdd,`NumpadMemoryAdd`,F.Unknown,``,0,``,``,``],[1,I.NumpadMemorySubtract,`NumpadMemorySubtract`,F.Unknown,``,0,``,``,``],[1,I.NumpadClear,`NumpadClear`,F.Clear,`Clear`,12,`VK_CLEAR`,``,``],[1,I.NumpadClearEntry,`NumpadClearEntry`,F.Unknown,``,0,``,``,``],[1,I.None,``,F.Ctrl,`Ctrl`,17,`VK_CONTROL`,``,``],[1,I.None,``,F.Shift,`Shift`,16,`VK_SHIFT`,``,``],[1,I.None,``,F.Alt,`Alt`,18,`VK_MENU`,``,``],[1,I.None,``,F.Meta,`Meta`,91,`VK_COMMAND`,``,``],[1,I.ControlLeft,`ControlLeft`,F.Ctrl,``,0,`VK_LCONTROL`,``,``],[1,I.ShiftLeft,`ShiftLeft`,F.Shift,``,0,`VK_LSHIFT`,``,``],[1,I.AltLeft,`AltLeft`,F.Alt,``,0,`VK_LMENU`,``,``],[1,I.MetaLeft,`MetaLeft`,F.Meta,``,0,`VK_LWIN`,``,``],[1,I.ControlRight,`ControlRight`,F.Ctrl,``,0,`VK_RCONTROL`,``,``],[1,I.ShiftRight,`ShiftRight`,F.Shift,``,0,`VK_RSHIFT`,``,``],[1,I.AltRight,`AltRight`,F.Alt,``,0,`VK_RMENU`,``,``],[1,I.MetaRight,`MetaRight`,F.Meta,``,0,`VK_RWIN`,``,``],[1,I.BrightnessUp,`BrightnessUp`,F.Unknown,``,0,``,``,``],[1,I.BrightnessDown,`BrightnessDown`,F.Unknown,``,0,``,``,``],[1,I.MediaPlay,`MediaPlay`,F.Unknown,``,0,``,``,``],[1,I.MediaRecord,`MediaRecord`,F.Unknown,``,0,``,``,``],[1,I.MediaFastForward,`MediaFastForward`,F.Unknown,``,0,``,``,``],[1,I.MediaRewind,`MediaRewind`,F.Unknown,``,0,``,``,``],[1,I.MediaTrackNext,`MediaTrackNext`,F.MediaTrackNext,`MediaTrackNext`,176,`VK_MEDIA_NEXT_TRACK`,``,``],[1,I.MediaTrackPrevious,`MediaTrackPrevious`,F.MediaTrackPrevious,`MediaTrackPrevious`,177,`VK_MEDIA_PREV_TRACK`,``,``],[1,I.MediaStop,`MediaStop`,F.MediaStop,`MediaStop`,178,`VK_MEDIA_STOP`,``,``],[1,I.Eject,`Eject`,F.Unknown,``,0,``,``,``],[1,I.MediaPlayPause,`MediaPlayPause`,F.MediaPlayPause,`MediaPlayPause`,179,`VK_MEDIA_PLAY_PAUSE`,``,``],[1,I.MediaSelect,`MediaSelect`,F.LaunchMediaPlayer,`LaunchMediaPlayer`,181,`VK_MEDIA_LAUNCH_MEDIA_SELECT`,``,``],[1,I.LaunchMail,`LaunchMail`,F.LaunchMail,`LaunchMail`,180,`VK_MEDIA_LAUNCH_MAIL`,``,``],[1,I.LaunchApp2,`LaunchApp2`,F.LaunchApp2,`LaunchApp2`,183,`VK_MEDIA_LAUNCH_APP2`,``,``],[1,I.LaunchApp1,`LaunchApp1`,F.Unknown,``,0,`VK_MEDIA_LAUNCH_APP1`,``,``],[1,I.SelectTask,`SelectTask`,F.Unknown,``,0,``,``,``],[1,I.LaunchScreenSaver,`LaunchScreenSaver`,F.Unknown,``,0,``,``,``],[1,I.BrowserSearch,`BrowserSearch`,F.BrowserSearch,`BrowserSearch`,170,`VK_BROWSER_SEARCH`,``,``],[1,I.BrowserHome,`BrowserHome`,F.BrowserHome,`BrowserHome`,172,`VK_BROWSER_HOME`,``,``],[1,I.BrowserBack,`BrowserBack`,F.BrowserBack,`BrowserBack`,166,`VK_BROWSER_BACK`,``,``],[1,I.BrowserForward,`BrowserForward`,F.BrowserForward,`BrowserForward`,167,`VK_BROWSER_FORWARD`,``,``],[1,I.BrowserStop,`BrowserStop`,F.Unknown,``,0,`VK_BROWSER_STOP`,``,``],[1,I.BrowserRefresh,`BrowserRefresh`,F.Unknown,``,0,`VK_BROWSER_REFRESH`,``,``],[1,I.BrowserFavorites,`BrowserFavorites`,F.Unknown,``,0,`VK_BROWSER_FAVORITES`,``,``],[1,I.ZoomToggle,`ZoomToggle`,F.Unknown,``,0,``,``,``],[1,I.MailReply,`MailReply`,F.Unknown,``,0,``,``,``],[1,I.MailForward,`MailForward`,F.Unknown,``,0,``,``,``],[1,I.MailSend,`MailSend`,F.Unknown,``,0,``,``,``],[1,I.None,``,F.KEY_IN_COMPOSITION,`KeyInComposition`,229,``,``,``],[1,I.None,``,F.ABNT_C2,`ABNT_C2`,194,`VK_ABNT_C2`,``,``],[1,I.None,``,F.OEM_8,`OEM_8`,223,`VK_OEM_8`,``,``],[1,I.None,``,F.Unknown,``,0,`VK_KANA`,``,``],[1,I.None,``,F.Unknown,``,0,`VK_HANGUL`,``,``],[1,I.None,``,F.Unknown,``,0,`VK_JUNJA`,``,``],[1,I.None,``,F.Unknown,``,0,`VK_FINAL`,``,``],[1,I.None,``,F.Unknown,``,0,`VK_HANJA`,``,``],[1,I.None,``,F.Unknown,``,0,`VK_KANJI`,``,``],[1,I.None,``,F.Unknown,``,0,`VK_CONVERT`,``,``],[1,I.None,``,F.Unknown,``,0,`VK_NONCONVERT`,``,``],[1,I.None,``,F.Unknown,``,0,`VK_ACCEPT`,``,``],[1,I.None,``,F.Unknown,``,0,`VK_MODECHANGE`,``,``],[1,I.None,``,F.Unknown,``,0,`VK_SELECT`,``,``],[1,I.None,``,F.Unknown,``,0,`VK_PRINT`,``,``],[1,I.None,``,F.Unknown,``,0,`VK_EXECUTE`,``,``],[1,I.None,``,F.Unknown,``,0,`VK_SNAPSHOT`,``,``],[1,I.None,``,F.Unknown,``,0,`VK_HELP`,``,``],[1,I.None,``,F.Unknown,``,0,`VK_APPS`,``,``],[1,I.None,``,F.Unknown,``,0,`VK_PROCESSKEY`,``,``],[1,I.None,``,F.Unknown,``,0,`VK_PACKET`,``,``],[1,I.None,``,F.Unknown,``,0,`VK_DBE_SBCSCHAR`,``,``],[1,I.None,``,F.Unknown,``,0,`VK_DBE_DBCSCHAR`,``,``],[1,I.None,``,F.Unknown,``,0,`VK_ATTN`,``,``],[1,I.None,``,F.Unknown,``,0,`VK_CRSEL`,``,``],[1,I.None,``,F.Unknown,``,0,`VK_EXSEL`,``,``],[1,I.None,``,F.Unknown,``,0,`VK_EREOF`,``,``],[1,I.None,``,F.Unknown,``,0,`VK_PLAY`,``,``],[1,I.None,``,F.Unknown,``,0,`VK_ZOOM`,``,``],[1,I.None,``,F.Unknown,``,0,`VK_NONAME`,``,``],[1,I.None,``,F.Unknown,``,0,`VK_PA1`,``,``],[1,I.None,``,F.Unknown,``,0,`VK_OEM_CLEAR`,``,``]],t=[],n=[];for(let r of e){let[e,i,a,o,s,c,l,u,d]=r;if(n[i]||(n[i]=!0,Gf[i]=a,Kf[a]=i,qf[a.toLowerCase()]=i,e&&(Yf[i]=o,o!==F.Unknown&&o!==F.Enter&&!ep(o)&&(Xf[o]=i))),!t[o]){if(t[o]=!0,!s)throw Error(`String representation missing for key code ${o} around scan code ${a}`);Bf.define(o,s),Vf.define(o,u||s),Hf.define(o,d||u||s)}c&&(Uf[c]=o),l&&(Wf[l]=o)}Xf[F.Enter]=I.Enter})();var Zf;(function(e){function t(e){return Bf.keyCodeToStr(e)}e.toString=t;function n(e){return Bf.strToKeyCode(e)}e.fromString=n;function r(e){return Vf.keyCodeToStr(e)}e.toUserSettingsUS=r;function i(e){return Hf.keyCodeToStr(e)}e.toUserSettingsGeneral=i;function a(e){return Vf.strToKeyCode(e)||Hf.strToKeyCode(e)}e.fromUserSettings=a;function o(e){if(e>=F.Numpad0&&e<=F.NumpadDivide)return null;switch(e){case F.UpArrow:return`Up`;case F.DownArrow:return`Down`;case F.LeftArrow:return`Left`;case F.RightArrow:return`Right`}return Bf.keyCodeToStr(e)}e.toElectronAccelerator=o})(Zf||={});var Qf;(function(e){e[e.CtrlCmd=2048]=`CtrlCmd`,e[e.Shift=1024]=`Shift`,e[e.Alt=512]=`Alt`,e[e.WinCtrl=256]=`WinCtrl`})(Qf||={});function $f(e,t){return(e|(t&65535)<<16>>>0)>>>0}function ep(e){return e===F.Ctrl||e===F.Shift||e===F.Alt||e===F.Meta}var tp;(function(e){e[e.CtrlCmd=2048]=`CtrlCmd`,e[e.Shift=1024]=`Shift`,e[e.Alt=512]=`Alt`,e[e.WinCtrl=256]=`WinCtrl`,e[e.KeyCode=255]=`KeyCode`})(tp||={});function np(e,t){if(typeof e==`number`){if(e===0)return null;let n=(e&65535)>>>0,r=(e&4294901760)>>>16;return r===0?new op([rp(n,t)]):new op([rp(n,t),rp(r,t)])}else{let n=[];for(let r=0;r<e.length;r++)n.push(rp(e[r],t));return new op(n)}}function rp(e,t){let n=!!(e&tp.CtrlCmd),r=!!(e&tp.WinCtrl);return new ip(t===Ti.Macintosh?r:n,!!(e&tp.Shift),!!(e&tp.Alt),t===Ti.Macintosh?n:r,e&tp.KeyCode)}var ip=class e{constructor(e,t,n,r,i){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=r,this.keyCode=i}equals(t){return t instanceof e&&this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.keyCode===t.keyCode}getHashCode(){return`K${this.ctrlKey?`1`:`0`}${this.shiftKey?`1`:`0`}${this.altKey?`1`:`0`}${this.metaKey?`1`:`0`}${this.keyCode}`}isModifierKey(){return this.keyCode===F.Unknown||this.keyCode===F.Ctrl||this.keyCode===F.Meta||this.keyCode===F.Alt||this.keyCode===F.Shift}toKeybinding(){return new op([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===F.Ctrl||this.shiftKey&&this.keyCode===F.Shift||this.altKey&&this.keyCode===F.Alt||this.metaKey&&this.keyCode===F.Meta}},ap=class e{constructor(e,t,n,r,i){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=r,this.scanCode=i}equals(t){return t instanceof e&&this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.scanCode===t.scanCode}getHashCode(){return`S${this.ctrlKey?`1`:`0`}${this.shiftKey?`1`:`0`}${this.altKey?`1`:`0`}${this.metaKey?`1`:`0`}${this.scanCode}`}isDuplicateModifierCase(){return this.ctrlKey&&(this.scanCode===I.ControlLeft||this.scanCode===I.ControlRight)||this.shiftKey&&(this.scanCode===I.ShiftLeft||this.scanCode===I.ShiftRight)||this.altKey&&(this.scanCode===I.AltLeft||this.scanCode===I.AltRight)||this.metaKey&&(this.scanCode===I.MetaLeft||this.scanCode===I.MetaRight)}},op=class{constructor(e){if(e.length===0)throw re(`chords`);this.chords=e}getHashCode(){let e=``;for(let t=0,n=this.chords.length;t<n;t++)t!==0&&(e+=`;`),e+=this.chords[t].getHashCode();return e}equals(e){if(e===null||this.chords.length!==e.chords.length)return!1;for(let t=0;t<this.chords.length;t++)if(!this.chords[t].equals(e.chords[t]))return!1;return!0}},sp=class{constructor(e,t,n,r,i,a){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=r,this.keyLabel=i,this.keyAriaLabel=a}},cp=class{};function lp(e){if(e.charCode){let t=String.fromCharCode(e.charCode).toUpperCase();return Zf.fromString(t)}let t=e.keyCode;if(t===3)return F.PauseBreak;if(Ef)switch(t){case 59:return F.Semicolon;case 60:if(ci)return F.IntlBackslash;break;case 61:return F.Equal;case 107:return F.NumpadAdd;case 109:return F.NumpadSubtract;case 173:return F.Minus;case 224:if(si)return F.Meta;break}else if(Df&&(si&&t===93||!si&&t===92))return F.Meta;return Uf[t]||F.Unknown}var up=si?Qf.WinCtrl:Qf.CtrlCmd,dp=Qf.Alt,fp=Qf.Shift,pp=si?Qf.CtrlCmd:Qf.WinCtrl;function mp(e){let t=[];return e.ctrlKey&&t.push(`ctrl`),e.shiftKey&&t.push(`shift`),e.altKey&&t.push(`alt`),e.metaKey&&t.push(`meta`),`modifiers: [${t.join(`,`)}], code: ${e.code}, keyCode: ${e.keyCode}, key: ${e.key}`}function hp(e){let t=[];return e.ctrlKey&&t.push(`ctrl`),e.shiftKey&&t.push(`shift`),e.altKey&&t.push(`alt`),e.metaKey&&t.push(`meta`),`modifiers: [${t.join(`,`)}], code: ${e.code}, keyCode: ${e.keyCode} ('${Zf.toString(e.keyCode)}')`}function gp(e){return e.ctrlKey||e.shiftKey||e.altKey||e.metaKey}function _p(e){return E_(e.target)?e.target:e.composedPath()[0]??e.target}var vp=class{constructor(e){this._standardKeyboardEventBrand=!0;let t=e;this.browserEvent=t,this.target=_p(t),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=t.getModifierState?.(`AltGraph`),this.keyCode=lp(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===F.Ctrl,this.altKey=this.altKey||this.keyCode===F.Alt,this.shiftKey=this.shiftKey||this.keyCode===F.Shift,this.metaKey=this.metaKey||this.keyCode===F.Meta,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=F.Unknown;ep(this.keyCode)||(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=up),this.altKey&&(t|=dp),this.shiftKey&&(t|=fp),this.metaKey&&(t|=pp),t|=e,t}_computeKeyCodeChord(){let e=F.Unknown;return ep(this.keyCode)||(e=this.keyCode),new ip(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}},yp=new WeakMap;function bp(e){if(!e.parent||e.parent===e)return null;try{let t=e.location,n=e.parent.location;if(t.origin!==`null`&&n.origin!==`null`&&t.origin!==n.origin)return null}catch{return null}return e.parent}var xp=class{static getSameOriginWindowChain(e){let t=yp.get(e);if(!t){t=[],yp.set(e,t);let n=e,r;do r=bp(n),r?t.push({window:new WeakRef(n),iframeElement:n.frameElement||null}):t.push({window:new WeakRef(n),iframeElement:null}),n=r;while(n)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let n=0,r=0,i=this.getSameOriginWindowChain(e);for(let e of i){let i=e.window.deref();if(n+=i?.scrollY??0,r+=i?.scrollX??0,i===t||!e.iframeElement)break;let a=e.iframeElement.getBoundingClientRect();n+=a.top,r+=a.left}return{top:n,left:r}}};async function Sp(e,t){if(!crypto.subtle)throw Error(`'crypto.subtle' is not available so webviews will not work. This is likely because the editor is not running in a secure context (https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts).`);let n=JSON.stringify({parentOrigin:e,salt:t}),r=new TextEncoder().encode(n);return Cp(await crypto.subtle.digest(`sha-256`,r))}function Cp(e){let t=Array.from(new Uint8Array(e)).map(e=>e.toString(16).padStart(2,`0`)).join(``);return BigInt(`0x${t}`).toString(32).padStart(52,`0`)}var wp=class{constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.defaultPrevented=t.defaultPrevented,this.target=t.target,this.detail=t.detail||1,t.type===`dblclick`&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX==`number`?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);let n=xp.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=n.left,this.posy-=n.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}},Tp=class{constructor(e,t=0,n=0){this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=t;let r=!1;if(Of){let e=i.navigator.userAgent.match(/Chrome\/(\d+)/);r=(e?parseInt(e[1]):123)<=122}if(e){let t=e,n=e,i=e.view?.devicePixelRatio||1;if(t.wheelDeltaY!==void 0)r?this.deltaY=t.wheelDeltaY/(120*i):this.deltaY=t.wheelDeltaY/120;else if(n.VERTICAL_AXIS!==void 0&&n.axis===n.VERTICAL_AXIS)this.deltaY=-n.detail/3;else if(e.type===`wheel`){let t=e;t.deltaMode===t.DOM_DELTA_LINE?Ef&&!si?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(t.wheelDeltaX!==void 0)kf&&oi?this.deltaX=-(t.wheelDeltaX/120):r?this.deltaX=t.wheelDeltaX/(120*i):this.deltaX=t.wheelDeltaX/120;else if(n.HORIZONTAL_AXIS!==void 0&&n.axis===n.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type===`wheel`){let t=e;t.deltaMode===t.DOM_DELTA_LINE?Ef&&!si?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(r?this.deltaY=e.wheelDelta/(120*i):this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent?.preventDefault()}stopPropagation(){this.browserEvent?.stopPropagation()}};function Ep(e){let t=e;return t?[t.on,t.pause,t.resume,t.destroy].every(e=>typeof e==`function`):!1}function Dp(e){let t=e;return t?Ep(t.stream)&&Array.isArray(t.buffer)&&typeof t.ended==`boolean`:!1}function Op(e,t){return new ite(e,t)}var ite=class{constructor(e,t){this.reducer=e,this.options=t,this.state={flowing:!1,ended:!1,destroyed:!1},this.buffer={data:[],error:[]},this.listeners={data:[],error:[],end:[]},this.pendingWritePromises=[]}pause(){this.state.destroyed||(this.state.flowing=!1)}resume(){this.state.destroyed||this.state.flowing||(this.state.flowing=!0,this.flowData(),this.flowErrors(),this.flowEnd())}write(e){if(!this.state.destroyed){if(this.state.flowing)this.emitData(e);else if(this.buffer.data.push(e),typeof this.options?.highWaterMark==`number`&&this.buffer.data.length>this.options.highWaterMark)return new Promise(e=>this.pendingWritePromises.push(e))}}error(e){this.state.destroyed||(this.state.flowing?this.emitError(e):this.buffer.error.push(e))}end(e){this.state.destroyed||(e!==void 0&&this.write(e),this.state.flowing?(this.emitEnd(),this.destroy()):this.state.ended=!0)}emitData(e){this.listeners.data.slice(0).forEach(t=>t(e))}emitError(e){this.listeners.error.length===0?p(e):this.listeners.error.slice(0).forEach(t=>t(e))}emitEnd(){this.listeners.end.slice(0).forEach(e=>e())}on(e,t){if(!this.state.destroyed)switch(e){case`data`:this.listeners.data.push(t),this.resume();break;case`end`:this.listeners.end.push(t),this.state.flowing&&this.flowEnd()&&this.destroy();break;case`error`:this.listeners.error.push(t),this.state.flowing&&this.flowErrors();break}}removeListener(e,t){if(this.state.destroyed)return;let n;switch(e){case`data`:n=this.listeners.data;break;case`end`:n=this.listeners.end;break;case`error`:n=this.listeners.error;break}if(n){let e=n.indexOf(t);e>=0&&n.splice(e,1)}}flowData(){if(this.buffer.data.length===0)return;if(typeof this.reducer==`function`){let e=this.reducer(this.buffer.data);this.emitData(e)}else for(let e of this.buffer.data)this.emitData(e);this.buffer.data.length=0;let e=[...this.pendingWritePromises];this.pendingWritePromises.length=0,e.forEach(e=>e())}flowErrors(){if(this.listeners.error.length>0){for(let e of this.buffer.error)this.emitError(e);this.buffer.error.length=0}}flowEnd(){return this.state.ended?(this.emitEnd(),this.listeners.end.length>0):!1}destroy(){this.state.destroyed||(this.state.destroyed=!0,this.state.ended=!0,this.buffer.data.length=0,this.buffer.error.length=0,this.listeners.data.length=0,this.listeners.error.length=0,this.listeners.end.length=0,this.pendingWritePromises.length=0)}};function kp(e,t){let n=[],r;for(;(r=e.read())!==null;)n.push(r);return t(n)}function Ap(e,t,n){let r=[],i;for(;(i=e.read())!==null&&r.length<n;)r.push(i);return i===null&&r.length>0?t(r):{read:()=>{if(r.length>0)return r.shift();if(i!==void 0){let e=i;return i=void 0,e}return e.read()}}}function jp(e,t){return new Promise((n,r)=>{let i=[];Mp(e,{onData:e=>{t&&i.push(e)},onError:e=>{t?r(e):n(void 0)},onEnd:()=>{n(t?t(i):void 0)}})})}function Mp(e,t,n){e.on(`error`,e=>{n?.isCancellationRequested||t.onError(e)}),e.on(`end`,()=>{n?.isCancellationRequested||t.onEnd()}),e.on(`data`,e=>{n?.isCancellationRequested||t.onData(e)})}function Np(e,t){return new Promise((n,r)=>{let i=new C,a=[],o=r=>{if(a.push(r),a.length>t)return i.dispose(),e.pause(),n({stream:e,buffer:a,ended:!1})},s=e=>(i.dispose(),r(e)),c=()=>(i.dispose(),n({stream:e,buffer:a,ended:!0}));i.add(S(()=>e.removeListener(`error`,s))),e.on(`error`,s),i.add(S(()=>e.removeListener(`end`,c))),e.on(`end`,c),i.add(S(()=>e.removeListener(`data`,o))),e.on(`data`,o)})}function Pp(e,t){let n=Op(t);return n.end(e),n}function Fp(e){let t=!1;return{read:()=>t?null:(t=!0,e)}}function Ip(e,t,n){let r=Op(n);return Mp(e,{onData:e=>r.write(t.data(e)),onError:e=>r.error(t.error?t.error(e):e),onEnd:()=>r.end()}),r}function Lp(e,t,n){let r=!1;return{read:()=>{let i=t.read();return r?i:(r=!0,i===null?e:n([e,i]))}}}function Rp(e,t,n){let r=!1,i=Op(n);return Mp(t,{onData:t=>r?i.write(t):(r=!0,i.write(n([e,t]))),onError:e=>i.error(e),onEnd:()=>{r||(r=!0,i.write(e)),i.end()}}),i}var zp=typeof Buffer<`u`,Bp=new Sa(()=>new Uint8Array(256)),Vp,Hp,Up=class e{static alloc(t){return zp?new e(Buffer.allocUnsafe(t)):new e(new Uint8Array(t))}static wrap(t){return zp&&!Buffer.isBuffer(t)&&(t=Buffer.from(t.buffer,t.byteOffset,t.byteLength)),new e(t)}static fromString(t,n){return!n?.dontUseNodeBuffer&&zp?new e(Buffer.from(t)):(Vp||=new TextEncoder,new e(Vp.encode(t)))}static fromByteArray(t){let n=e.alloc(t.length);for(let e=0,r=t.length;e<r;e++)n.buffer[e]=t[e];return n}static concat(t,n){if(n===void 0){n=0;for(let e=0,r=t.length;e<r;e++)n+=t[e].byteLength}let r=e.alloc(n),i=0;for(let e=0,n=t.length;e<n;e++){let n=t[e];r.set(n,i),i+=n.byteLength}return r}static isNativeBuffer(e){return zp&&Buffer.isBuffer(e)}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}clone(){let t=e.alloc(this.byteLength);return t.set(this),t}toString(){return zp?this.buffer.toString():(Hp||=new TextDecoder(void 0,{ignoreBOM:!0}),Hp.decode(this.buffer))}slice(t,n){return new e(this.buffer.subarray(t,n))}set(t,n){if(t instanceof e)this.buffer.set(t.buffer,n);else if(t instanceof Uint8Array)this.buffer.set(t,n);else if(t instanceof ArrayBuffer)this.buffer.set(new Uint8Array(t),n);else if(ArrayBuffer.isView(t))this.buffer.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n);else throw Error(`Unknown argument 'array'`)}readUInt32BE(e){return qp(this.buffer,e)}writeUInt32BE(e,t){Jp(this.buffer,e,t)}readUInt32LE(e){return Yp(this.buffer,e)}writeUInt32LE(e,t){Xp(this.buffer,e,t)}readUInt8(e){return Zp(this.buffer,e)}writeUInt8(e,t){Qp(this.buffer,e,t)}indexOf(t,n=0){return Wp(this.buffer,t instanceof e?t.buffer:t,n)}equals(e){return this===e?!0:this.byteLength===e.byteLength?this.buffer.every((t,n)=>t===e.buffer[n]):!1}};function Wp(e,t,n=0){let r=t.byteLength,i=e.byteLength;if(r===0)return 0;if(r===1)return e.indexOf(t[0],n);if(r>i-n)return-1;let a=Bp.value;a.fill(t.length);for(let e=0;e<t.length;e++)a[t[e]]=t.length-e-1;let o=n+t.length-1,s=o,c=-1;for(;o<i;)if(e[o]===t[s]){if(s===0){c=o;break}o--,s--}else o+=Math.max(t.length-s,a[e[o]]),s=t.length-1;return c}function Gp(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0}function Kp(e,t,n){e[n+0]=t&255,t>>>=8,e[n+1]=t&255}function qp(e,t){return e[t]*2**24+e[t+1]*2**16+e[t+2]*2**8+e[t+3]}function Jp(e,t,n){e[n+3]=t,t>>>=8,e[n+2]=t,t>>>=8,e[n+1]=t,t>>>=8,e[n]=t}function Yp(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0|e[t+2]<<16>>>0|e[t+3]<<24>>>0}function Xp(e,t,n){e[n+0]=t&255,t>>>=8,e[n+1]=t&255,t>>>=8,e[n+2]=t&255,t>>>=8,e[n+3]=t&255}function Zp(e,t){return e[t]}function Qp(e,t,n){e[n]=t}function $p(e){return kp(e,e=>Up.concat(e))}function em(e){return Fp(e)}function tm(e){return jp(e,e=>Up.concat(e))}async function nm(e){return e.ended?Up.concat(e.buffer):Up.concat([...e.buffer,await tm(e.stream)])}function rm(e){return Pp(e,e=>Up.concat(e))}function im(e){return Op(e=>Up.concat(e),e)}function am(e,t){return Lp(e,t,e=>Up.concat(e))}function om(e,t){return Rp(e,t,e=>Up.concat(e))}function sm(e){let t=0,n=0,r=0,i=new Uint8Array(Math.floor(e.length/4*3)),a=e=>{switch(n){case 3:i[r++]=t|e,n=0;break;case 2:i[r++]=t|e>>>2,t=e<<6,n=3;break;case 1:i[r++]=t|e>>>4,t=e<<4,n=2;break;default:t=e<<2,n=1}};for(let t=0;t<e.length;t++){let n=e.charCodeAt(t);if(n>=65&&n<=90)a(n-65);else if(n>=97&&n<=122)a(n-97+26);else if(n>=48&&n<=57)a(n-48+52);else if(n===43||n===45)a(62);else if(n===47||n===95)a(63);else if(n===61)break;else throw SyntaxError(`Unexpected base64 character ${e[t]}`)}let o=r;for(;n>0;)a(0);return Up.wrap(i).slice(0,o)}var cm=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`,lm=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_`;function um({buffer:e},t=!0,n=!1){let r=n?lm:cm,i=``,a=e.byteLength%3,o=0;for(;o<e.byteLength-a;o+=3){let t=e[o+0],n=e[o+1],a=e[o+2];i+=r[t>>>2],i+=r[(t<<4|n>>>4)&63],i+=r[(n<<2|a>>>6)&63],i+=r[a&63]}if(a===1){let n=e[o+0];i+=r[n>>>2],i+=r[n<<4&63],t&&(i+=`==`)}else if(a===2){let n=e[o+0],a=e[o+1];i+=r[n>>>2],i+=r[(n<<4|a>>>4)&63],i+=r[a<<2&63],t&&(i+=`=`)}return i}var dm=`0123456789abcdef`;function fm({buffer:e}){let t=``;for(let n=0;n<e.length;n++){let r=e[n];t+=dm[r>>>4],t+=dm[r&15]}return t}function pm(e){if(e.length%2!=0)throw SyntaxError(`Hex string must have an even length`);let t=new Uint8Array(e.length>>1);for(let n=0;n<e.length;)t[n>>1]=mm(e,n++)<<4|mm(e,n++);return Up.wrap(t)}function mm(e,t){let n=e.charCodeAt(t);if(n>=48&&n<=57)return n-48;if(n>=97&&n<=102)return n-87;if(n>=65&&n<=70)return n-55;throw SyntaxError(`Invalid hex character at position ${t}`)}function hm(e){return gm(e,0)}function gm(e,t){switch(typeof e){case`object`:return e===null?_m(349,t):Array.isArray(e)?bm(e,t):xm(e,t);case`string`:return ym(e,t);case`boolean`:return vm(e,t);case`number`:return _m(e,t);case`undefined`:return _m(937,t);default:return _m(617,t)}}function _m(e,t){return(t<<5)-t+e|0}function vm(e,t){return _m(e?433:863,t)}function ym(e,t){t=_m(149417,t);for(let n=0,r=e.length;n<r;n++)t=_m(e.charCodeAt(n),t);return t}function bm(e,t){return t=_m(104579,t),e.reduce((e,t)=>gm(t,e),t)}function xm(e,t){return t=_m(181387,t),Object.keys(e).sort().reduce((t,n)=>(t=ym(n,t),gm(e[n],t)),t)}var Sm;(function(e){e[e.BLOCK_SIZE=64]=`BLOCK_SIZE`,e[e.UNICODE_REPLACEMENT=65533]=`UNICODE_REPLACEMENT`})(Sm||={});function Cm(e,t,n=32){let r=n-t,i=~((1<<r)-1);return(e<<t|(i&e)>>>r)>>>0}function wm(e,t=32){return e instanceof ArrayBuffer?fm(Up.wrap(new Uint8Array(e))):(e>>>0).toString(16).padStart(t/4,`0`)}var Tm=class e{static#e=this._bigBlock32=new DataView(new ArrayBuffer(320));constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(Sm.BLOCK_SIZE+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){let t=e.length;if(t===0)return;let n=this._buff,r=this._buffLen,i=this._leftoverHighSurrogate,a,o;for(i===0?(a=e.charCodeAt(0),o=0):(a=i,o=-1,i=0);;){let s=a;if(oo(a))if(o+1<t){let t=e.charCodeAt(o+1);so(t)?(o++,s=co(a,t)):s=Sm.UNICODE_REPLACEMENT}else{i=a;break}else so(a)&&(s=Sm.UNICODE_REPLACEMENT);if(r=this._push(n,r,s),o++,o<t)a=e.charCodeAt(o);else break}this._buffLen=r,this._leftoverHighSurrogate=i}_push(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(n&1984)>>>6,e[t++]=128|(n&63)>>>0):n<65536?(e[t++]=224|(n&61440)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0):(e[t++]=240|(n&1835008)>>>18,e[t++]=128|(n&258048)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0),t>=Sm.BLOCK_SIZE&&(this._step(),t-=Sm.BLOCK_SIZE,this._totalLen+=Sm.BLOCK_SIZE,e[0]=e[Sm.BLOCK_SIZE+0],e[1]=e[Sm.BLOCK_SIZE+1],e[2]=e[Sm.BLOCK_SIZE+2]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,Sm.UNICODE_REPLACEMENT)),this._totalLen+=this._buffLen,this._wrapUp()),wm(this._h0)+wm(this._h1)+wm(this._h2)+wm(this._h3)+wm(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,this._buff.subarray(this._buffLen).fill(0),this._buffLen>56&&(this._step(),this._buff.fill(0));let e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){let t=e._bigBlock32,n=this._buffDV;for(let e=0;e<64;e+=4)t.setUint32(e,n.getUint32(e,!1),!1);for(let e=64;e<320;e+=4)t.setUint32(e,Cm(t.getUint32(e-12,!1)^t.getUint32(e-32,!1)^t.getUint32(e-56,!1)^t.getUint32(e-64,!1),1),!1);let r=this._h0,i=this._h1,a=this._h2,o=this._h3,s=this._h4,c,l,u;for(let e=0;e<80;e++)e<20?(c=i&a|~i&o,l=1518500249):e<40?(c=i^a^o,l=1859775393):e<60?(c=i&a|i&o|a&o,l=2400959708):(c=i^a^o,l=3395469782),u=Cm(r,5)+c+s+l+t.getUint32(e*4,!1)&4294967295,s=o,o=a,a=Cm(i,30),i=r,r=u;this._h0=this._h0+r&4294967295,this._h1=this._h1+i&4294967295,this._h2=this._h2+a&4294967295,this._h3=this._h3+o&4294967295,this._h4=this._h4+s&4294967295}};function Em(e,t,n){return Math.min(Math.max(e,t),n)}function Dm(e,t){return(t+e%t)%t}var Om=class{constructor(){this._next=0}getNext(){return this._next++}},km=class{constructor(){this._n=1,this._val=0}update(e){return this._val+=(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}},Am=class{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=Array(e),this._values.fill(0,0,e)}update(e){let t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}};function jm(e){return fe(e<=1,`p must be between 0 and 1`),Math.random()<e}function Mm(e,t){return e===t}function Nm(){return(e,t)=>e===t}function Pm(e,t,n){return ut(e,t,n??Mm)}function Fm(e){return(t,n)=>ut(t,n,e??Mm)}function Im(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Im(e[n],t[n]))return!1;return!0}if(e&&typeof e==`object`&&t&&typeof t==`object`&&Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(t)===Object.prototype){let n=e,r=t,i=Object.keys(n),a=Object.keys(r),o=new Set(a);if(i.length!==a.length)return!1;for(let e of i)if(!o.has(e)||!Im(n[e],r[e]))return!1;return!0}return!1}function Lm(){return(e,t)=>Im(e,t)}function Rm(e){return JSON.stringify(Vm(e))}var zm=0,Bm=new WeakMap;function Vm(e){if(Array.isArray(e))return e.map(Vm);if(e&&typeof e==`object`)if(Object.getPrototypeOf(e)===Object.prototype){let t=e,n=Object.create(null);for(let e of Object.keys(t).sort())n[e]=Vm(t[e]);return n}else{let t=Bm.get(e);return t===void 0&&(t=zm++,Bm.set(e,t)),t+`----2b76a038c20c4bcc`}return e}function Hm(e,t){return JSON.stringify(e)===JSON.stringify(t)}function Um(){return(e,t)=>JSON.stringify(e)===JSON.stringify(t)}function Wm(){return(e,t)=>e.equals(t)}function Gm(e,t,n){return e==null||t==null?t===e:n(e,t)}function Km(e){return(t,n)=>t==null||n==null?n===t:e(t,n)}var qm;(function(e){e.strict=Mm,e.strictC=Nm,e.array=Pm,e.arrayC=Fm,e.structural=Im,e.structuralC=Lm,e.jsonStringify=Hm,e.jsonStringifyC=Um,e.thisC=Wm,e.ifDefined=Gm,e.ifDefinedC=Km})(qm||={});var Jm;function Ym(e){Jm?Jm instanceof Qm?Jm.loggers.push(e):Jm=new Qm([Jm,e]):Jm=e}function Xm(){return Jm}var Zm=void 0;function ate(e){Zm=e}function ote(e){Zm&&Zm(e)}var Qm=class{constructor(e){this.loggers=e}handleObservableCreated(e,t){for(let n of this.loggers)n.handleObservableCreated(e,t)}handleOnListenerCountChanged(e,t){for(let n of this.loggers)n.handleOnListenerCountChanged(e,t)}handleObservableUpdated(e,t){for(let n of this.loggers)n.handleObservableUpdated(e,t)}handleAutorunCreated(e,t){for(let n of this.loggers)n.handleAutorunCreated(e,t)}handleAutorunDisposed(e){for(let t of this.loggers)t.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,t,n){for(let r of this.loggers)r.handleAutorunDependencyChanged(e,t,n)}handleAutorunStarted(e){for(let t of this.loggers)t.handleAutorunStarted(e)}handleAutorunFinished(e){for(let t of this.loggers)t.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,t,n){for(let r of this.loggers)r.handleDerivedDependencyChanged(e,t,n)}handleDerivedCleared(e){for(let t of this.loggers)t.handleDerivedCleared(e)}handleBeginTransaction(e){for(let t of this.loggers)t.handleBeginTransaction(e)}handleEndTransaction(e){for(let t of this.loggers)t.handleEndTransaction(e)}},$m;(function(e){let t=!1;function n(){t=!0}e.enable=n;function r(){if(!t)return;let e=Error,n=e.stackTraceLimit;e.stackTraceLimit=3;let r=Error().stack;return e.stackTraceLimit=n,ste.fromStack(r,2)}e.ofCaller=r})($m||={});var ste=class e{static fromStack(t,n){let r=cte(t.split(`
`)[n+1]);if(r)return new e(r.fileName,r.line,r.column,r.id)}constructor(e,t,n,r){this.fileName=e,this.line=t,this.column=n,this.id=r}};function cte(e){let t=e.match(/\((.*):(\d+):(\d+)\)/);if(t)return{fileName:t[1],line:parseInt(t[2]),column:parseInt(t[3]),id:e};let n=e.match(/at ([^\(\)]*):(\d+):(\d+)/);if(n)return{fileName:n[1],line:parseInt(n[2]),column:parseInt(n[3]),id:e}}var eh=class{constructor(e,t,n){this.owner=e,this.debugNameSource=t,this.referenceFn=n}getDebugName(e){return lte(e,this)}},th=new Map,nh=new WeakMap;function lte(e,t){let n=nh.get(e);if(n)return n;let r=ute(e,t);if(r){let t=th.get(r)??0;t++,th.set(r,t);let n=t===1?r:`${r}#${t}`;return nh.set(e,n),n}}function ute(e,t){let n=nh.get(e);if(n)return n;let r=t.owner?fte(t.owner)+`.`:``,i,a=t.debugNameSource;if(a!==void 0)if(typeof a==`function`){if(i=a(),i!==void 0)return r+i}else return r+a;let o=t.referenceFn;if(o!==void 0&&(i=oh(o),i!==void 0))return r+i;if(t.owner!==void 0){let n=dte(t.owner,e);if(n!==void 0)return r+n}}function dte(e,t){for(let n in e)if(e[n]===t)return n}var rh=new Map,ih=new WeakMap;function fte(e){let t=ih.get(e);if(t)return t;let n=ah(e)??`Object`,r=rh.get(n)??0;r++,rh.set(n,r);let i=r===1?n:`${n}#${r}`;return ih.set(e,i),i}function ah(e){let t=e.constructor;if(t)return t.name===`Object`?void 0:t.name}function oh(e){let t=e.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(t);return(n?n[1]:void 0)?.trim()}var sh;function pte(e){sh=e}var ch;function mte(e){ch=e}var lh;function hte(e){lh=e}var uh;function gte(e){uh=e}var dh=class{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t,n=$m.ofCaller()){let r=t===void 0?void 0:e,i=t===void 0?e:t;return sh({owner:r,debugName:()=>{let e=oh(i);if(e!==void 0)return e;let t=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(t)return`${this.debugName}.${t[2]}`;if(!r)return`${this.debugName} (mapped)`},debugReferenceFn:i},e=>i(this.read(e),e),n)}flatten(){return sh({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(ch(this,t)),this}keepObserved(e){return e.add(lh(this)),this}get debugValue(){return this.get()}get debug(){return new _te(this)}},_te=class{constructor(e){this.observable=e}getDependencyGraph(){return uh(this.observable,{type:`dependencies`})}getObserverGraph(){return uh(this.observable,{type:`observers`})}},fh=class extends dh{constructor(e){super(),this._observers=new Set,Xm()?.handleObservableCreated(this,e)}addObserver(e){let t=this._observers.size;this._observers.add(e),t===0&&this.onFirstObserverAdded(),t!==this._observers.size&&Xm()?.handleOnListenerCountChanged(this,this._observers.size)}removeObserver(e){let t=this._observers.delete(e);t&&this._observers.size===0&&this.onLastObserverRemoved(),t&&Xm()?.handleOnListenerCountChanged(this,this._observers.size)}onFirstObserverAdded(){}onLastObserverRemoved(){}log(){let e=!!Xm();return ote(this),e||Xm()?.handleObservableCreated(this,$m.ofCaller()),this}debugGetObservers(){return this._observers}},ph;(function(e){e[e.dependenciesMightHaveChanged=1]=`dependenciesMightHaveChanged`,e[e.stale=2]=`stale`,e[e.upToDate=3]=`upToDate`})(ph||={});function vte(e){switch(e){case ph.dependenciesMightHaveChanged:return`dependenciesMightHaveChanged`;case ph.stale:return`stale`;case ph.upToDate:return`upToDate`;default:return`<unknown>`}}var mh=class{get debugName(){return this._debugNameData.getDebugName(this)??`(anonymous)`}constructor(e,t,n,r){this._debugNameData=e,this._runFn=t,this._changeTracker=n,this._state=ph.stale,this._updateCount=0,this._disposed=!1,this._dependencies=new Set,this._dependenciesToBeRemoved=new Set,this._isRunning=!1,this._iteration=0,this._store=void 0,this._delayedStore=void 0,this._changeSummary=this._changeTracker?.createChangeSummary(void 0),Xm()?.handleAutorunCreated(this,r),this._run(),Dn(this)}dispose(){if(!this._disposed){this._disposed=!0;for(let e of this._dependencies)e.removeObserver(this);this._dependencies.clear(),this._store!==void 0&&this._store.dispose(),this._delayedStore!==void 0&&this._delayedStore.dispose(),Xm()?.handleAutorunDisposed(this),On(this)}}_run(){let e=this._dependenciesToBeRemoved;this._dependenciesToBeRemoved=this._dependencies,this._dependencies=e,this._state=ph.upToDate;try{if(!this._disposed){Xm()?.handleAutorunStarted(this);let e=this._changeSummary,t=this._delayedStore;t!==void 0&&(this._delayedStore=void 0);try{this._isRunning=!0,this._changeTracker&&(this._changeTracker.beforeUpdate?.(this,e),this._changeSummary=this._changeTracker.createChangeSummary(e)),this._store!==void 0&&(this._store.dispose(),this._store=void 0),this._runFn(this,e)}catch(e){f(e)}finally{this._isRunning=!1,t!==void 0&&t.dispose()}}}finally{this._disposed||Xm()?.handleAutorunFinished(this);for(let e of this._dependenciesToBeRemoved)e.removeObserver(this);this._dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(e){this._state===ph.upToDate&&(this._checkIterations(),this._state=ph.dependenciesMightHaveChanged),this._updateCount++}endUpdate(e){try{if(this._updateCount===1){this._iteration=1;do{if(this._checkIterations())return;if(this._state===ph.dependenciesMightHaveChanged){this._state=ph.upToDate;for(let e of this._dependencies)if(e.reportChanges(),this._state===ph.stale)break}this._iteration++,this._state!==ph.upToDate&&this._run()}while(this._state!==ph.upToDate)}}finally{this._updateCount--}me(()=>this._updateCount>=0)}handlePossibleChange(e){this._state===ph.upToDate&&this._isDependency(e)&&(this._checkIterations(),this._state=ph.dependenciesMightHaveChanged)}handleChange(e,t){if(this._isDependency(e)){Xm()?.handleAutorunDependencyChanged(this,e,t);try{(!this._changeTracker||this._changeTracker.handleChange({changedObservable:e,change:t,didChange:t=>t===e},this._changeSummary))&&(this._checkIterations(),this._state=ph.stale)}catch(e){f(e)}}}_isDependency(e){return this._dependencies.has(e)&&!this._dependenciesToBeRemoved.has(e)}_ensureNoRunning(){if(!this._isRunning)throw new y(`The reader object cannot be used outside its compute function!`)}readObservable(e){if(this._ensureNoRunning(),this._disposed)return e.get();e.addObserver(this);let t=e.get();return this._dependencies.add(e),this._dependenciesToBeRemoved.delete(e),t}get store(){if(this._ensureNoRunning(),this._disposed)throw new y(`Cannot access store after dispose`);return this._store===void 0&&(this._store=new C),this._store}get delayedStore(){if(this._ensureNoRunning(),this._disposed)throw new y(`Cannot access store after dispose`);return this._delayedStore===void 0&&(this._delayedStore=new C),this._delayedStore}debugGetState(){return{isRunning:this._isRunning,updateCount:this._updateCount,dependencies:this._dependencies,state:this._state,stateStr:vte(this._state)}}debugRerun(){this._isRunning?this._state=ph.stale:this._run()}_checkIterations(){return this._iteration>100?(f(new y(`Autorun '${this.debugName}' is stuck in an infinite update loop.`)),!0):!1}},hh;(function(e){e[e.initial=0]=`initial`,e[e.dependenciesMightHaveChanged=1]=`dependenciesMightHaveChanged`,e[e.stale=2]=`stale`,e[e.upToDate=3]=`upToDate`})(hh||={});function yte(e){switch(e){case hh.initial:return`initial`;case hh.dependenciesMightHaveChanged:return`dependenciesMightHaveChanged`;case hh.stale:return`stale`;case hh.upToDate:return`upToDate`;default:return`<unknown>`}}var gh=class extends fh{get debugName(){return this._debugNameData.getDebugName(this)??`(anonymous)`}constructor(e,t,n,r=void 0,i,a){super(a),this._debugNameData=e,this._computeFn=t,this._changeTracker=n,this._handleLastObserverRemoved=r,this._equalityComparator=i,this._state=hh.initial,this._value=void 0,this._updateCount=0,this._dependencies=new Set,this._dependenciesToBeRemoved=new Set,this._changeSummary=void 0,this._isUpdating=!1,this._isComputing=!1,this._didReportChange=!1,this._isInBeforeUpdate=!1,this._isReaderValid=!1,this._store=void 0,this._delayedStore=void 0,this._removedObserverToCallEndUpdateOn=null,this._changeSummary=this._changeTracker?.createChangeSummary(void 0)}onLastObserverRemoved(){this._state=hh.initial,this._value=void 0,Xm()?.handleDerivedCleared(this);for(let e of this._dependencies)e.removeObserver(this);this._dependencies.clear(),this._store!==void 0&&(this._store.dispose(),this._store=void 0),this._delayedStore!==void 0&&(this._delayedStore.dispose(),this._delayedStore=void 0),this._handleLastObserverRemoved?.()}get(){if(this._observers.size===0){let e;try{this._isReaderValid=!0;let t;this._changeTracker&&(t=this._changeTracker.createChangeSummary(void 0),this._changeTracker.beforeUpdate?.(this,t)),e=this._computeFn(this,t)}finally{this._isReaderValid=!1}return this.onLastObserverRemoved(),e}else{do{if(this._state===hh.dependenciesMightHaveChanged){for(let e of this._dependencies)if(e.reportChanges(),this._state===hh.stale)break}this._state===hh.dependenciesMightHaveChanged&&(this._state=hh.upToDate),this._state!==hh.upToDate&&this._recompute()}while(this._state!==hh.upToDate);return this._value}}_recompute(){let e=!1;this._isComputing=!0,this._didReportChange=!1;let t=this._dependenciesToBeRemoved;this._dependenciesToBeRemoved=this._dependencies,this._dependencies=t;try{let t=this._changeSummary;this._isReaderValid=!0,this._changeTracker&&(this._isInBeforeUpdate=!0,this._changeTracker.beforeUpdate?.(this,t),this._isInBeforeUpdate=!1,this._changeSummary=this._changeTracker?.createChangeSummary(t));let n=this._state!==hh.initial,r=this._value;this._state=hh.upToDate;let i=this._delayedStore;i!==void 0&&(this._delayedStore=void 0);try{this._store!==void 0&&(this._store.dispose(),this._store=void 0),this._value=this._computeFn(this,t)}finally{this._isReaderValid=!1;for(let e of this._dependenciesToBeRemoved)e.removeObserver(this);this._dependenciesToBeRemoved.clear(),i!==void 0&&i.dispose()}e=this._didReportChange||n&&!this._equalityComparator(r,this._value),Xm()?.handleObservableUpdated(this,{oldValue:r,newValue:this._value,change:void 0,didChange:e,hadValue:n})}catch(e){f(e)}if(this._isComputing=!1,!this._didReportChange&&e)for(let e of this._observers)e.handleChange(this,void 0);else this._didReportChange=!1}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){if(this._isUpdating)throw new y(`Cyclic deriveds are not supported yet!`);this._updateCount++,this._isUpdating=!0;try{let e=this._updateCount===1;if(this._state===hh.upToDate&&(this._state=hh.dependenciesMightHaveChanged,!e))for(let e of this._observers)e.handlePossibleChange(this);if(e)for(let e of this._observers)e.beginUpdate(this)}finally{this._isUpdating=!1}}endUpdate(e){if(this._updateCount--,this._updateCount===0){let e=[...this._observers];for(let t of e)t.endUpdate(this);if(this._removedObserverToCallEndUpdateOn){let e=[...this._removedObserverToCallEndUpdateOn];this._removedObserverToCallEndUpdateOn=null;for(let t of e)t.endUpdate(this)}}me(()=>this._updateCount>=0)}handlePossibleChange(e){if(this._state===hh.upToDate&&this._dependencies.has(e)&&!this._dependenciesToBeRemoved.has(e)){this._state=hh.dependenciesMightHaveChanged;for(let e of this._observers)e.handlePossibleChange(this)}}handleChange(e,t){if(this._dependencies.has(e)&&!this._dependenciesToBeRemoved.has(e)||this._isInBeforeUpdate){Xm()?.handleDerivedDependencyChanged(this,e,t);let n=!1;try{n=this._changeTracker?this._changeTracker.handleChange({changedObservable:e,change:t,didChange:t=>t===e},this._changeSummary):!0}catch(e){f(e)}let r=this._state===hh.upToDate;if(n&&(this._state===hh.dependenciesMightHaveChanged||r)&&(this._state=hh.stale,r))for(let e of this._observers)e.handlePossibleChange(this)}}_ensureReaderValid(){if(!this._isReaderValid)throw new y(`The reader object cannot be used outside its compute function!`)}readObservable(e){this._ensureReaderValid(),e.addObserver(this);let t=e.get();return this._dependencies.add(e),this._dependenciesToBeRemoved.delete(e),t}reportChange(e){this._ensureReaderValid(),this._didReportChange=!0;for(let t of this._observers)t.handleChange(this,e)}get store(){return this._ensureReaderValid(),this._store===void 0&&(this._store=new C),this._store}get delayedStore(){return this._ensureReaderValid(),this._delayedStore===void 0&&(this._delayedStore=new C),this._delayedStore}addObserver(e){let t=!this._observers.has(e)&&this._updateCount>0;super.addObserver(e),t&&(this._removedObserverToCallEndUpdateOn?.delete(e)||e.beginUpdate(this))}removeObserver(e){this._observers.has(e)&&this._updateCount>0&&(this._removedObserverToCallEndUpdateOn||=new Set,this._removedObserverToCallEndUpdateOn.add(e)),super.removeObserver(e)}debugGetState(){return{state:this._state,stateStr:yte(this._state),updateCount:this._updateCount,isComputing:this._isComputing,dependencies:this._dependencies,value:this._value}}debugSetValue(e){this._value=e}debugRecompute(){this.beginUpdate(this);try{this._isComputing?this._state=hh.stale:this._recompute()}finally{this.endUpdate(this)}}setValue(e,t,n){this._value=e;let r=this._observers;t.updateObserver(this,this);for(let e of r)e.handleChange(this,n)}},_h=class extends gh{constructor(e,t,n,r=void 0,i,a,o){super(e,t,n,r,i,o),this.set=a}};function vh(e,t,n=$m.ofCaller()){return t===void 0?new gh(new eh(void 0,void 0,e),e,void 0,void 0,Mm,n):new gh(new eh(e,void 0,t),t,void 0,void 0,Mm,n)}function bte(e,t,n,r=$m.ofCaller()){return new _h(new eh(e,void 0,t),t,void 0,void 0,Mm,n,r)}function yh(e,t,n=$m.ofCaller()){return new gh(new eh(e.owner,e.debugName,e.debugReferenceFn),t,void 0,e.onLastObserverRemoved,e.equalsFn??Mm,n)}pte(yh);function xte(e,t,n=$m.ofCaller()){return new gh(new eh(e.owner,e.debugName,void 0),t,e.changeTracker,void 0,e.equalityComparer??Mm,n)}function Ste(e,t,n=$m.ofCaller()){let r,i;t===void 0?(r=e,i=void 0):(i=e,r=t);let a;return new gh(new eh(i,void 0,r),e=>{a?a.clear():a=new C;let t=r(e);return t&&a.add(t),t},void 0,()=>{a&&=(a.dispose(),void 0)},Mm,n)}function bh(e,t=$m.ofCaller()){return new mh(new eh(void 0,void 0,e),e,void 0,t)}function xh(e,t,n=$m.ofCaller()){return new mh(new eh(e.owner,e.debugName,e.debugReferenceFn??t),t,void 0,n)}function Sh(e,t,n=$m.ofCaller()){return new mh(new eh(e.owner,e.debugName,e.debugReferenceFn??t),t,e.changeTracker,n)}function Cte(e,t){let n=new C,r=Sh({owner:e.owner,debugName:e.debugName,debugReferenceFn:e.debugReferenceFn??t,changeTracker:e.changeTracker},(e,r)=>{n.clear(),t(e,r,n)});return S(()=>{r.dispose(),n.dispose()})}function wte(e){let t=new C,n=xh({owner:void 0,debugName:void 0,debugReferenceFn:e},n=>{t.clear(),e(n,t)});return S(()=>{n.dispose(),t.dispose()})}function Tte(e,t){let n;return xh({debugReferenceFn:t},r=>{let i=e.read(r),a=n;n=i,t({lastValue:a,newValue:i})})}function Ete(e,t=$m.ofCaller()){let n,r=!1;return n=bh(t=>{e({delayedStore:t.delayedStore,store:t.store,readObservable:t.readObservable.bind(t),dispose:()=>{n?.dispose(),r=!0}})},t),r&&n.dispose(),n}function Ch(e){let t=Error(`BugIndicatingErrorRecovery: `+e);p(t),console.error(`recovered from an error that indicates a bug`,t)}function wh(e,t){let n=new Dh(e,t);try{e(n)}finally{n.finish()}}var Th=void 0;function Dte(e){if(Th)e(Th);else{let t=new Dh(e,void 0);Th=t;try{e(t)}finally{t.finish(),Th=void 0}}}async function Ote(e,t){let n=new Dh(e,t);try{await e(n)}finally{n.finish()}}function Eh(e,t,n){e?t(e):wh(t,n)}var Dh=class{constructor(e,t){this._fn=e,this._getDebugName=t,this._updatingObservers=[],Xm()?.handleBeginTransaction(this)}getDebugName(){return this._getDebugName?this._getDebugName():oh(this._fn)}updateObserver(e,t){if(!this._updatingObservers){Ch(`Transaction already finished!`),wh(n=>{n.updateObserver(e,t)});return}this._updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){let e=this._updatingObservers;if(!e){Ch(`transaction.finish() has already been called!`);return}for(let t=0;t<e.length;t++){let{observer:n,observable:r}=e[t];n.endUpdate(r)}this._updatingObservers=null,Xm()?.handleEndTransaction(this)}debugGetUpdatingObservers(){return this._updatingObservers}};function Oh(e,t,n=$m.ofCaller()){let r;return r=typeof e==`string`?new eh(void 0,e,void 0):new eh(e,void 0,void 0),new kh(r,t,Mm,n)}var kh=class extends fh{get debugName(){return this._debugNameData.getDebugName(this)??`ObservableValue`}constructor(e,t,n,r){super(r),this._debugNameData=e,this._equalityComparator=n,this._value=t,Xm()?.handleObservableUpdated(this,{hadValue:!1,newValue:t,change:void 0,didChange:!0,oldValue:void 0})}get(){return this._value}set(e,t,n){if(n===void 0&&this._equalityComparator(this._value,e))return;let r;t||=r=new Dh(()=>{},()=>`Setting ${this.debugName}`);try{let r=this._value;this._setValue(e),Xm()?.handleObservableUpdated(this,{oldValue:r,newValue:e,change:n,didChange:!0,hadValue:!0});for(let e of this._observers)t.updateObserver(e,this),e.handleChange(this,n)}finally{r&&r.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}debugGetState(){return{value:this._value}}debugSetValue(e){this._value=e}};function kte(e,t,n=$m.ofCaller()){let r;return r=typeof e==`string`?new eh(void 0,e,void 0):new eh(e,void 0,void 0),new Ate(r,t,Mm,n)}var Ate=class extends kh{_setValue(e){this._value!==e&&(this._value&&this._value.dispose(),this._value=e)}dispose(){this._value?.dispose()}};function Ah(...e){let t,n,r,i;return e.length===2?[n,r]=e:[t,n,r,i]=e,new jh(new eh(t,void 0,r),n,r,()=>jh.globalTransaction,Mm,i??$m.ofCaller())}function jte(e,t,n,r=$m.ofCaller()){return new jh(new eh(e.owner,e.debugName,e.debugReferenceFn??n),t,n,()=>e.getTransaction?.()??jh.globalTransaction,e.equalsFn??Mm,r)}var jh=class extends fh{constructor(e,t,n,r,i,a){super(a),this._debugNameData=e,this.event=t,this._getValue=n,this._getTransaction=r,this._equalityComparator=i,this._hasValue=!1,this.handleEvent=e=>{let t=this._getValue(e),n=this._value,r=!this._hasValue||!this._equalityComparator(n,t),i=!1;r&&(this._value=t,this._hasValue&&(i=!0,Eh(this._getTransaction(),e=>{Xm()?.handleObservableUpdated(this,{oldValue:n,newValue:t,change:void 0,didChange:r,hadValue:this._hasValue});for(let t of this._observers)e.updateObserver(t,this),t.handleChange(this,void 0)},()=>{let e=this.getDebugName();return`Event fired`+(e?`: ${e}`:``)})),this._hasValue=!0),i||Xm()?.handleObservableUpdated(this,{oldValue:n,newValue:t,change:void 0,didChange:r,hadValue:this._hasValue})}}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){let e=this.getDebugName();return`From Event`+(e?`: ${e}`:``)}onFirstObserverAdded(){this._subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this._subscription.dispose(),this._subscription=void 0,this._hasValue=!1,this._value=void 0}get(){return this._subscription?(this._hasValue||this.handleEvent(void 0),this._value):this._getValue(void 0)}debugSetValue(e){this._value=e}debugGetState(){return{value:this._value,hasValue:this._hasValue}}};(function(e){e.Observer=jh;function t(e,t){let n=!1;jh.globalTransaction===void 0&&(jh.globalTransaction=e,n=!0);try{t()}finally{n&&(jh.globalTransaction=void 0)}}e.batchEventsGlobally=t})(Ah||={});function Mh(e,t=$m.ofCaller()){return typeof e==`string`?new Nh(e,void 0,t):new Nh(void 0,e,t)}var Nh=class extends fh{get debugName(){return new eh(this._owner,this._debugName,void 0).getDebugName(this)??`Observable Signal`}toString(){return this.debugName}constructor(e,t,n){super(n),this._debugName=e,this._owner=t}trigger(e,t){if(!e){wh(e=>{this.trigger(e,t)},()=>`Trigger signal ${this.debugName}`);return}for(let n of this._observers)e.updateObserver(n,this),n.handleChange(this,t)}get(){}};function Mte(e){let t=Oh(`promiseValue`,{});return e.then(e=>{t.set({value:e},void 0)}),t}function Nte(e,t,n=$m.ofCaller()){let r=!1,i,a;return Ah(void 0,n=>{let o=bh(o=>{let s=e.read(o);if(!r)r=!0,i=s;else{a&&clearTimeout(a);let e=typeof t==`number`?t:t(i,s);if(e===0){i=s,n();return}a=setTimeout(()=>{i=s,n()},e)}});return{dispose(){o.dispose(),r=!1,i=void 0}}},()=>r?i:e.get(),n)}function Pte(e,t,n=$m.ofCaller()){let r=Mh(`handleTimeout`),i,a;return yh({owner:void 0,onLastObserverRemoved:()=>{i=void 0}},n=>{let o=e.read(n);if(r.read(n),o!==i){let e=typeof t==`number`?t:t(i,o);if(e===0)return i=o,o;a&&clearTimeout(a),a=setTimeout(()=>{i=o,r.trigger(void 0)},e)}return i},n)}function Fte(e,t,n){let r=Oh(`triggeredRecently`,!1),i;return n.add(e(()=>{r.set(!0,void 0),i&&clearTimeout(i),i=setTimeout(()=>{r.set(!1,void 0)},t)})),r}function Ph(e){let t=new Ih(!1,void 0);return e.addObserver(t),S(()=>{e.removeObserver(t)})}hte(Ph);function Fh(e,t){let n=new Ih(!0,t);e.addObserver(n);try{n.beginUpdate(e)}finally{n.endUpdate(e)}return S(()=>{e.removeObserver(n)})}mte(Fh);var Ih=class{constructor(e,t){this._forceRecompute=e,this._handleValue=t,this._counter=0}beginUpdate(e){this._counter++}endUpdate(e){this._counter===1&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges()),this._counter--}handlePossibleChange(e){}handleChange(e,t){}};function Ite(e,t){let n;return yh({owner:e,debugReferenceFn:t},e=>(n=t(e,n),n))}function Lte(e,t){let n,r=Mh(`derivedObservableWithWritableCache`),i=vh(e,e=>(r.read(e),n=t(e,n),n));return Object.assign(i,{clearCache:e=>{n=void 0,r.trigger(e)},setCache:(e,t)=>{n=e,r.trigger(t)}})}function Rte(e,t,n,r){let i=new Lh(n,r);return yh({debugReferenceFn:n,owner:e,onLastObserverRemoved:()=>{i.dispose(),i=new Lh(n)}},e=>{let n=t.read(e);return i.setItems(n),i.getItems()})}var Lh=class{constructor(e,t){this._map=e,this._keySelector=t,this._cache=new Map,this._items=[]}dispose(){this._cache.forEach(e=>e.store.dispose()),this._cache.clear()}setItems(e){let t=[],n=new Set(this._cache.keys());for(let r of e){let e=this._keySelector?this._keySelector(r):r,i=this._cache.get(e);if(i)n.delete(e);else{let t=new C;i={out:this._map(r,t),store:t},this._cache.set(e,i)}t.push(i.out)}for(let e of n)this._cache.get(e).store.dispose(),this._cache.delete(e);this._items=t}getItems(){return this._items}};function Rh(e){return!!e&&e.read!==void 0&&e.reportChanges!==void 0}var zh;function zte(e){zh||(zh=new Bte,Ym(zh)),zh.addFilteredObj(e)}var Bte=class{constructor(){this.indentation=0,this.changedObservablesSets=new WeakMap}addFilteredObj(e){this._filteredObjects||=new Set,this._filteredObjects.add(e)}_isIncluded(e){return this._filteredObjects?.has(e)??!0}textToConsoleArgs(e){return Vte([Bh(Wte(`|  `,this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[Bh(` `),Hh(Uh(e.oldValue,70),{color:`red`,strikeThrough:!0}),Bh(` `),Hh(Uh(e.newValue,60),{color:`green`})]:[Bh(` (unchanged)`)]:[Bh(` `),Hh(Uh(e.newValue,60),{color:`green`}),Bh(` (initial)`)]}handleObservableCreated(e){if(e instanceof gh){let t=e;this.changedObservablesSets.set(t,new Set)}}handleOnListenerCountChanged(e,t){}handleObservableUpdated(e,t){if(this._isIncluded(e)){if(e instanceof gh){this._handleDerivedRecomputed(e,t);return}console.log(...this.textToConsoleArgs([Vh(`observable value changed`),Hh(e.debugName,{color:`BlueViolet`}),...this.formatInfo(t)]))}}formatChanges(e){if(e.size!==0)return Hh(` (changed deps: `+[...e].map(e=>e.debugName).join(`, `)+`)`,{color:`gray`})}handleDerivedDependencyChanged(e,t,n){this._isIncluded(e)&&this.changedObservablesSets.get(e)?.add(t)}_handleDerivedRecomputed(e,t){if(!this._isIncluded(e))return;let n=this.changedObservablesSets.get(e);n&&(console.log(...this.textToConsoleArgs([Vh(`derived recomputed`),Hh(e.debugName,{color:`BlueViolet`}),...this.formatInfo(t),this.formatChanges(n),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),n.clear())}handleDerivedCleared(e){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([Vh(`derived cleared`),Hh(e.debugName,{color:`BlueViolet`})]))}handleFromEventObservableTriggered(e,t){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([Vh(`observable from event triggered`),Hh(e.debugName,{color:`BlueViolet`}),...this.formatInfo(t),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){this._isIncluded(e)&&this.changedObservablesSets.set(e,new Set)}handleAutorunDisposed(e){}handleAutorunDependencyChanged(e,t,n){this._isIncluded(e)&&this.changedObservablesSets.get(e).add(t)}handleAutorunStarted(e){let t=this.changedObservablesSets.get(e);t&&(this._isIncluded(e)&&console.log(...this.textToConsoleArgs([Vh(`autorun`),Hh(e.debugName,{color:`BlueViolet`}),this.formatChanges(t),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),t.clear(),this.indentation++)}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let t=e.getDebugName();t===void 0&&(t=``),this._isIncluded(e)&&console.log(...this.textToConsoleArgs([Vh(`transaction`),Hh(t,{color:`BlueViolet`}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}};function Vte(e){let t=[],n=[],r=``;function i(e){if(`length`in e)for(let t of e)t&&i(t);else `text`in e?(r+=`%c${e.text}`,t.push(e.style),e.data&&n.push(...e.data)):`data`in e&&n.push(...e.data)}i(e);let a=[r,...t];return a.push(...n),a}function Bh(e){return Hh(e,{color:`black`})}function Vh(e){return Hh(Gte(`${e}: `,10),{color:`black`,bold:!0})}function Hh(e,t={color:`black`}){function n(e){return Object.entries(e).reduce((e,[t,n])=>`${e}${t}:${n};`,``)}let r={color:t.color};return t.strikeThrough&&(r[`text-decoration`]=`line-through`),t.bold&&(r[`font-weight`]=`bold`),{text:e,style:n(r)}}function Uh(e,t){switch(typeof e){case`number`:return``+e;case`string`:return e.length+2<=t?`"${e}"`:`"${e.substr(0,t-7)}"+...`;case`boolean`:return e?`true`:`false`;case`undefined`:return`undefined`;case`object`:return e===null?`null`:Array.isArray(e)?Hte(e,t):Ute(e,t);case`symbol`:return e.toString();case`function`:return`[[Function${e.name?` `+e.name:``}]]`;default:return``+e}}function Hte(e,t){let n=`[ `,r=!0;for(let i of e){if(r||(n+=`, `),n.length-5>t){n+=`...`;break}r=!1,n+=`${Uh(i,t-n.length)}`}return n+=` ]`,n}function Ute(e,t){if(typeof e.toString==`function`&&e.toString!==Object.prototype.toString){let n=e.toString();return n.length<=t?n:n.substring(0,t-3)+`...`}let n=ah(e),r=n?n+`(`:`{ `,i=!0;for(let[n,a]of Object.entries(e)){if(i||(r+=`, `),r.length-5>t){r+=`...`;break}i=!1,r+=`${n}: ${Uh(a,t-r.length)}`}return r+=n?`)`:` }`,r}function Wte(e,t){let n=``;for(let r=1;r<=t;r++)n+=e;return n}function Gte(e,t){for(;e.length<t;)e+=` `;return e}var Kte=class e{static createHost(t,n){return new e(t,n)}static createClient(t,n){return new e(t,n)}constructor(e,t){this._channelFactory=e,this._getHandler=t,this._channel=this._channelFactory({handleNotification:e=>{let t=e,n=this._getHandler().notifications[t[0]];if(!n)throw Error(`Unknown notification "${t[0]}"!`);n(...t[1])},handleRequest:e=>{let t=e;try{return{type:`result`,value:this._getHandler().requests[t[0]](...t[1])}}catch(e){return{type:`error`,value:e}}}});let n=new Proxy({},{get:(e,t)=>async(...e)=>{let n=await this._channel.sendRequest([t,e]);if(n.type===`error`)throw n.value;return n.value}});this.api={notifications:new Proxy({},{get:(e,t)=>(...e)=>{this._channel.sendNotification([t,e])}}),requests:n}}};function qte(e,t){let n=globalThis,r=[],i,{channel:a,handler:o}=Jte({sendNotification:e=>{i?i.sendNotification(e):r.push(e)}}),s;return(n.$$debugValueEditor_debugChannels??={})[e]=e=>{s=t(),i=e;for(let t of r)e.sendNotification(t);return r=[],o},Kte.createClient(a,()=>{if(!s)throw Error(`Not supported`);return s})}function Jte(e){let t;return{channel:n=>(t=n,{sendNotification:t=>{e.sendNotification(t)},sendRequest:e=>{throw Error(`not supported`)}}),handler:{handleRequest:e=>e.type===`notification`?t?.handleNotification(e.data):t?.handleRequest(e.data)}}}var Yte=class{constructor(){this._timeout=void 0}throttle(e,t){this._timeout===void 0&&(this._timeout=setTimeout(()=>{this._timeout=void 0,e()},t))}dispose(){this._timeout!==void 0&&clearTimeout(this._timeout)}};function Wh(e,t){for(let n in t)e[n]&&typeof e[n]==`object`&&t[n]&&typeof t[n]==`object`?Wh(e[n],t[n]):e[n]=t[n]}function Gh(e,t){for(let n in t)t[n]===null?delete e[n]:e[n]&&typeof e[n]==`object`&&t[n]&&typeof t[n]==`object`?Gh(e[n],t[n]):e[n]=t[n]}var Xte=class e{static#e=this._instance=void 0;static getInstance(){return e._instance===void 0&&(e._instance=new e),e._instance}getTransactionState(){let e=[],t=[...this._activeTransactions];if(t.length===0)return;let n=t.flatMap(e=>e.debugGetUpdatingObservers()??[]).map(e=>e.observer),r=new Set;for(;n.length>0;){let t=n.shift();if(r.has(t))continue;r.add(t);let i=this._getInfo(t,e=>{r.has(e)||n.push(e)});i&&e.push(i)}return{names:t.map(e=>e.getDebugName()??`tx`),affected:e}}_getObservableInfo(e){let t=this._instanceInfos.get(e);if(!t){p(new y(`No info found`));return}return t}_getAutorunInfo(e){let t=this._instanceInfos.get(e);if(!t){p(new y(`No info found`));return}return t}_getInfo(e,t){if(e instanceof gh){let n=[...e.debugGetObservers()];for(let e of n)t(e);let r=this._getObservableInfo(e);if(!r)return;let i=e.debugGetState(),a={name:e.debugName,instanceId:r.instanceId,updateCount:i.updateCount},o=[...r.changedObservables].map(e=>this._instanceInfos.get(e)?.instanceId).filter(Te);if(i.isComputing)return{...a,type:`observable/derived`,state:`updating`,changedDependencies:o,initialComputation:!1};switch(i.state){case hh.initial:return{...a,type:`observable/derived`,state:`noValue`};case hh.upToDate:return{...a,type:`observable/derived`,state:`upToDate`};case hh.stale:return{...a,type:`observable/derived`,state:`stale`,changedDependencies:o};case hh.dependenciesMightHaveChanged:return{...a,type:`observable/derived`,state:`possiblyStale`}}}else if(e instanceof mh){let t=this._getAutorunInfo(e);if(!t)return;let n={name:e.debugName,instanceId:t.instanceId,updateCount:t.updateCount},r=[...t.changedObservables].map(e=>this._instanceInfos.get(e).instanceId);if(e.debugGetState().isRunning)return{...n,type:`autorun`,state:`updating`,changedDependencies:r};switch(e.debugGetState().state){case ph.upToDate:return{...n,type:`autorun`,state:`upToDate`};case ph.stale:return{...n,type:`autorun`,state:`stale`,changedDependencies:r};case ph.dependenciesMightHaveChanged:return{...n,type:`autorun`,state:`possiblyStale`}}}}_formatObservable(e){let t=this._getObservableInfo(e);if(t)return{name:e.debugName,instanceId:t.instanceId}}_formatObserver(e){if(e instanceof gh)return{name:e.toString(),instanceId:this._getObservableInfo(e)?.instanceId};let t=this._getAutorunInfo(e);if(t)return{name:e.toString(),instanceId:t.instanceId}}constructor(){this._declarationId=0,this._instanceId=0,this._declarations=new Map,this._instanceInfos=new WeakMap,this._aliveInstances=new Map,this._activeTransactions=new Set,this._channel=qte(`observableDevTools`,()=>({notifications:{setDeclarationIdFilter:e=>{},logObservableValue:e=>{console.log(`logObservableValue`,e)},flushUpdates:()=>{this._flushUpdates()},resetUpdates:()=>{this._pendingChanges=null,this._channel.api.notifications.handleChange(this._fullState,!0)}},requests:{getDeclarations:()=>{let e={};for(let t of this._declarations.values())e[t.id]=t;return{decls:e}},getSummarizedInstances:()=>null,getObservableValueInfo:e=>({observers:[...this._aliveInstances.get(e).debugGetObservers()].map(e=>this._formatObserver(e)).filter(Te)}),getDerivedInfo:e=>{let t=this._aliveInstances.get(e);return{dependencies:[...t.debugGetState().dependencies].map(e=>this._formatObservable(e)).filter(Te),observers:[...t.debugGetObservers()].map(e=>this._formatObserver(e)).filter(Te)}},getAutorunInfo:e=>({dependencies:[...this._aliveInstances.get(e).debugGetState().dependencies].map(e=>this._formatObservable(e)).filter(Te)}),getTransactionState:()=>this.getTransactionState(),setValue:(e,t)=>{let n=this._aliveInstances.get(e);if(n instanceof gh)n.debugSetValue(t);else if(n instanceof kh)n.debugSetValue(t);else if(n instanceof jh)n.debugSetValue(t);else throw new y(`Observable is not supported`);let r=[...n.debugGetObservers()];for(let e of r)e.beginUpdate(n);for(let e of r)e.handleChange(n,void 0);for(let e of r)e.endUpdate(n)},getValue:e=>{let t=this._aliveInstances.get(e);if(t instanceof gh||t instanceof kh)return Uh(t.debugGetState().value,200)},logValue:e=>{let t=this._aliveInstances.get(e);if(t&&`get`in t)console.log(`Logged Value:`,t.get());else throw new y(`Observable is not supported`)},rerun:e=>{let t=this._aliveInstances.get(e);if(t instanceof gh)t.debugRecompute();else if(t instanceof mh)t.debugRerun();else throw new y(`Observable is not supported`)}}})),this._pendingChanges=null,this._changeThrottler=new Yte,this._fullState={},this._flushUpdates=()=>{this._pendingChanges!==null&&(this._channel.api.notifications.handleChange(this._pendingChanges,!1),this._pendingChanges=null)},$m.enable()}_handleChange(e){Gh(this._fullState,e),this._pendingChanges===null?this._pendingChanges=e:Wh(this._pendingChanges,e),this._changeThrottler.throttle(this._flushUpdates,10)}_getDeclarationId(e,t){if(!t)return-1;let n=this._declarations.get(t.id);return n===void 0&&(n={id:this._declarationId++,type:e,url:t.fileName,line:t.line,column:t.column},this._declarations.set(t.id,n),this._handleChange({decls:{[n.id]:n}})),n.id}handleObservableCreated(e,t){let n={declarationId:this._getDeclarationId(`observable/value`,t),instanceId:this._instanceId++,listenerCount:0,lastValue:void 0,updateCount:0,changedObservables:new Set};this._instanceInfos.set(e,n)}handleOnListenerCountChanged(e,t){let n=this._getObservableInfo(e);if(n){if(n.listenerCount===0&&t>0){let t=e instanceof gh?`observable/derived`:`observable/value`;this._aliveInstances.set(n.instanceId,e),this._handleChange({instances:{[n.instanceId]:{instanceId:n.instanceId,declarationId:n.declarationId,formattedValue:n.lastValue,type:t,name:e.debugName}}})}else n.listenerCount>0&&t===0&&(this._handleChange({instances:{[n.instanceId]:null}}),this._aliveInstances.delete(n.instanceId));n.listenerCount=t}}handleObservableUpdated(e,t){if(e instanceof gh){this._handleDerivedRecomputed(e,t);return}let n=this._getObservableInfo(e);n&&t.didChange&&(n.lastValue=Uh(t.newValue,30),n.listenerCount>0&&this._handleChange({instances:{[n.instanceId]:{formattedValue:n.lastValue}}}))}handleAutorunCreated(e,t){let n={declarationId:this._getDeclarationId(`autorun`,t),instanceId:this._instanceId++,updateCount:0,changedObservables:new Set};this._instanceInfos.set(e,n),this._aliveInstances.set(n.instanceId,e),n&&this._handleChange({instances:{[n.instanceId]:{instanceId:n.instanceId,declarationId:n.declarationId,runCount:0,type:`autorun`,name:e.debugName}}})}handleAutorunDisposed(e){let t=this._getAutorunInfo(e);t&&(this._handleChange({instances:{[t.instanceId]:null}}),this._instanceInfos.delete(e),this._aliveInstances.delete(t.instanceId))}handleAutorunDependencyChanged(e,t,n){let r=this._getAutorunInfo(e);r&&r.changedObservables.add(t)}handleAutorunStarted(e){}handleAutorunFinished(e){let t=this._getAutorunInfo(e);t&&(t.changedObservables.clear(),t.updateCount++,this._handleChange({instances:{[t.instanceId]:{runCount:t.updateCount}}}))}handleDerivedDependencyChanged(e,t,n){let r=this._getObservableInfo(e);r&&r.changedObservables.add(t)}_handleDerivedRecomputed(e,t){let n=this._getObservableInfo(e);if(!n)return;let r=Uh(t.newValue,30);n.updateCount++,n.changedObservables.clear(),n.lastValue=r,n.listenerCount>0&&this._handleChange({instances:{[n.instanceId]:{formattedValue:r,recomputationCount:n.updateCount}}})}handleDerivedCleared(e){let t=this._getObservableInfo(e);t&&(t.lastValue=void 0,t.changedObservables.clear(),t.listenerCount>0&&this._handleChange({instances:{[t.instanceId]:{formattedValue:void 0}}}))}handleBeginTransaction(e){this._activeTransactions.add(e)}handleEndTransaction(e){this._activeTransactions.delete(e)}};function Zte(e,t){let n=t?.debugNamePostProcessor??(e=>e),r=Jh.from(e,n);if(!r)return``;let i=new Set;return t.type===`observers`?qh(r,0,i,t).trim():Kh(r,0,i,t).trim()}function Kh(e,t,n,r){let i=`		`.repeat(t),a=[];if(n.has(e.sourceObj))return a.push(`${i}* ${e.type} ${e.name} (already listed)`),a.join(`
`);if(n.add(e.sourceObj),a.push(`${i}* ${e.type} ${e.name}:`),a.push(`${i}  value: ${Uh(e.value,50)}`),a.push(`${i}  state: ${e.state}`),e.dependencies.length>0){a.push(`${i}  dependencies:`);for(let i of e.dependencies){let e=Jh.from(i,r.debugNamePostProcessor??(e=>e))??Jh.unknown(i);a.push(Kh(e,t+1,n,r))}}return a.join(`
`)}function qh(e,t,n,r){let i=`		`.repeat(t),a=[];if(n.has(e.sourceObj))return a.push(`${i}* ${e.type} ${e.name} (already listed)`),a.join(`
`);if(n.add(e.sourceObj),a.push(`${i}* ${e.type} ${e.name}:`),a.push(`${i}  value: ${Uh(e.value,50)}`),a.push(`${i}  state: ${e.state}`),e.observers.length>0){a.push(`${i}  observers:`);for(let i of e.observers){let e=Jh.from(i,r.debugNamePostProcessor??(e=>e))??Jh.unknown(i);a.push(qh(e,t+1,n,r))}}return a.join(`
`)}var Jh=class e{static from(t,n){if(t instanceof mh){let r=t.debugGetState();return new e(t,n(t.debugName),`autorun`,void 0,r.stateStr,Array.from(r.dependencies),[])}else if(t instanceof gh){let r=t.debugGetState();return new e(t,n(t.debugName),`derived`,r.value,r.stateStr,Array.from(r.dependencies),Array.from(t.debugGetObservers()))}else if(t instanceof kh){let r=t.debugGetState();return new e(t,n(t.debugName),`observableValue`,r.value,`upToDate`,[],Array.from(t.debugGetObservers()))}else if(t instanceof jh){let r=t.debugGetState();return new e(t,n(t.debugName),`fromEvent`,r.value,r.hasValue?`upToDate`:`initial`,[],Array.from(t.debugGetObservers()))}}static unknown(t){return new e(t,`(unknown)`,`unknown`,void 0,`unknown`,[],[])}constructor(e,t,n,r,i,a,o){this.sourceObj=e,this.name=t,this.type=n,this.value=r,this.state=i,this.dependencies=a,this.observers=o}};gte(Zte),ate(zte),Ri&&Ri.VSCODE_DEV_DEBUG_OBSERVABLES&&Ym(Xte.getInstance());var{registerWindow:Qte,getWindow:Yh,getDocument:$te,getWindows:Xh,getWindowsCount:Zh,getWindowId:Qh,getWindowById:ene,onDidRegisterWindow:$h,onWillUnregisterWindow:eg,onDidUnregisterWindow:tg}=(function(){let e=new Map;r(i,1);let t={window:i,disposables:new C};e.set(i.vscodeWindowId,t);let n=new E,a=new E,o=new E;function s(n,r){return(typeof n==`number`?e.get(n):void 0)??(r?t:void 0)}return{onDidRegisterWindow:n.event,onWillUnregisterWindow:o.event,onDidUnregisterWindow:a.event,registerWindow(t){if(e.has(t.vscodeWindowId))return w.None;let r=new C,i={window:t,disposables:r.add(new C)};return e.set(t.vscodeWindowId,i),r.add(S(()=>{e.delete(t.vscodeWindowId),a.fire(t)})),r.add(L(t,R.BEFORE_UNLOAD,()=>{o.fire(t)})),n.fire(i),r},getWindows(){return e.values()},getWindowsCount(){return e.size},getWindowId(e){return e.vscodeWindowId},hasWindow(t){return e.has(t)},getWindowById:s,getWindow(e){let t=e;if(t?.ownerDocument?.defaultView)return t.ownerDocument.defaultView.window;let n=e;return n?.view?n.view.window:i},getDocument(e){return Yh(e).document}}})(),ng=new Set;function rg(){for(let e of ng)if(e().hasFocus)return!0;return!1}function ig(){for(let e of ng){let t=e();if(t.hasFocus&&t.window)return t.window}}function ag(){for(let{window:e}of Xh())if(e.document.hasFocus())return!0;return!!rg()}function og(e){for(;e.firstChild;)e.firstChild.remove()}var sg=class{constructor(e,t,n,r){this._node=e,this._type=t,this._handler=n,this._options=r||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&=(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,null)}};function L(e,t,n,r){return new sg(e,t,n,r)}var cg=class extends w{get onDidChangeActiveElement(){return this._onDidChangeActiveElement.event}constructor(e){super(),this.window=e,this.activeElement=null,this._onDidChangeActiveElement=this._register(new E),this._onFocusIn=e=>{if(this.activeElement=i_(this.window.document),this._onDidChangeActiveElement.fire(this.activeElement),b_(e.target)&&e.target.shadowRoot){let t=new C;t.add(L(e.target.shadowRoot,R.FOCUS_IN,this._onFocusIn)),t.add(L(e.target,R.FOCUS_OUT,()=>{t.dispose()}))}},this._register(L(this.window,R.FOCUS_IN,this._onFocusIn))}};function lg(e){return new cg(e)}function ug(e,t){return function(n){return t(new wp(e,n))}}function dg(e){return function(t){return e(new vp(t))}}var fg=function(e,t,n,r){let i=n;return t===`click`||t===`mousedown`||t===`contextmenu`?i=ug(Yh(e),n):(t===`keydown`||t===`keypress`||t===`keyup`)&&(i=dg(n)),L(e,t,i,r)},pg=function(e,t,n){return hg(e,ug(Yh(e),t),n)},mg=function(e,t,n){return _g(e,ug(Yh(e),t),n)};function hg(e,t,n){return L(e,mi&&Rf.pointerEvents?R.POINTER_DOWN:R.MOUSE_DOWN,t,n)}function gg(e,t,n){return L(e,mi&&Rf.pointerEvents?R.POINTER_MOVE:R.MOUSE_MOVE,t,n)}function _g(e,t,n){return L(e,mi&&Rf.pointerEvents?R.POINTER_UP:R.MOUSE_UP,t,n)}function vg(e,t,n){return Cc(e,t,n)}var yg=class extends wc{constructor(e,t){super(e,t)}},bg,xg;function Sg(e,t,n,r){let i=0,a=e.setInterval(()=>{i++,(typeof r==`number`&&i>=r||t()===!0)&&o.dispose()},n),o=S(()=>{e.clearInterval(a)});return o}var Cg=class extends yc{constructor(e){super(),this.defaultTarget=e&&Yh(e)}cancelAndSet(e,t,n){return super.cancelAndSet(e,t,n??this.defaultTarget)}},wg=class{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){p(e)}}static sort(e,t){return t.priority-e.priority}};(function(){let e=new Map,t=new Map,n=new Map,r=new Map,i=i=>{n.set(i,!1);let a=e.get(i)??[];for(t.set(i,a),e.set(i,[]),r.set(i,!0);a.length>0;)a.sort(wg.sort),a.shift().execute();r.set(i,!1)};xg=(t,r,a=0)=>{let o=Qh(t),s=new wg(r,a),c=e.get(o);return c||(c=[],e.set(o,c)),c.push(s),n.get(o)||(n.set(o,!0),t.requestAnimationFrame(()=>i(o))),s},bg=(e,n,i)=>{let a=Qh(e);if(r.get(a)){let e=new wg(n,i),r=t.get(a);return r||(r=[],t.set(a,r)),r.push(e),e}else return xg(e,n,i)}})();function Tg(e,t){return xg(e,t,1e4)}function Eg(e,t){return xg(e,t,-1e4)}var Dg=8;function Og(e,t){return t}var kg=class extends w{constructor(e,t,n,r=Og,i=Dg){super();let a=null,o=0,s=this._register(new vc),c=()=>{o=new Date().getTime(),n(a),a=null};this._register(L(e,t,e=>{a=r(a,e);let t=new Date().getTime()-o;t>=i?(s.cancel(),c()):s.setIfNotSet(c,i-t)}))}};function Ag(e,t,n,r,i){return new kg(e,t,n,r,i)}function jg(e){return Yh(e).getComputedStyle(e,null)}function Mg(e,t,n){let r=Yh(e),i=r.document;if(e!==i.body)return new Pg(e.clientWidth,e.clientHeight);if(mi&&r?.visualViewport)return new Pg(r.visualViewport.width,r.visualViewport.height);if(r?.innerWidth&&r.innerHeight)return new Pg(r.innerWidth,r.innerHeight);if(i.body&&i.body.clientWidth&&i.body.clientHeight)return new Pg(i.body.clientWidth,i.body.clientHeight);if(i.documentElement&&i.documentElement.clientWidth&&i.documentElement.clientHeight)return new Pg(i.documentElement.clientWidth,i.documentElement.clientHeight);if(n)return Mg(n,t);if(t)return t;throw Error(`Unable to figure out browser width and height`)}var Ng=class e{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(t,n){let r=jg(t),i=r?r.getPropertyValue(n):`0`;return e.convertToPixels(t,i)}static getBorderLeftWidth(t){return e.getDimension(t,`border-left-width`)}static getBorderRightWidth(t){return e.getDimension(t,`border-right-width`)}static getBorderTopWidth(t){return e.getDimension(t,`border-top-width`)}static getBorderBottomWidth(t){return e.getDimension(t,`border-bottom-width`)}static getPaddingLeft(t){return e.getDimension(t,`padding-left`)}static getPaddingRight(t){return e.getDimension(t,`padding-right`)}static getPaddingTop(t){return e.getDimension(t,`padding-top`)}static getPaddingBottom(t){return e.getDimension(t,`padding-bottom`)}static getMarginLeft(t){return e.getDimension(t,`margin-left`)}static getMarginTop(t){return e.getDimension(t,`margin-top`)}static getMarginRight(t){return e.getDimension(t,`margin-right`)}static getMarginBottom(t){return e.getDimension(t,`margin-bottom`)}},Pg=class e{static#e=this.None=new e(0,0);constructor(e,t){this.width=e,this.height=t}with(t=this.width,n=this.height){return t!==this.width||n!==this.height?new e(t,n):this}static is(e){return typeof e==`object`&&typeof e.height==`number`&&typeof e.width==`number`}static lift(t){return t instanceof e?t:new e(t.width,t.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}};function Fg(e){let t=e.offsetParent,n=e.offsetTop,r=e.offsetLeft;for(;(e=e.parentNode)!==null&&e!==e.getRootNode();){n-=e.scrollTop;let i=t_(e)?null:jg(e);i&&(r-=i.direction===`rtl`?-e.scrollLeft:e.scrollLeft),e===t&&(r+=Ng.getBorderLeftWidth(e),n+=Ng.getBorderTopWidth(e),n+=e.offsetTop,r+=e.offsetLeft,t=e.offsetParent)}return{left:r,top:n}}function Ig(e,t,n){typeof t==`number`&&(e.style.width=`${t}px`),typeof n==`number`&&(e.style.height=`${n}px`)}function Lg(e,t,n,r,i,a=`absolute`){e.style.top=`${t}px`,e.style.right=`${n}px`,e.style.bottom=`${r}px`,e.style.left=`${i}px`,e.style.position=a}function Rg(e){let t=e.getBoundingClientRect(),n=Yh(e);return{left:t.left+n.scrollX,top:t.top+n.scrollY,width:t.width,height:t.height}}function zg(e,t){let n=Rg(e),r=Mg(t);return n.left>r.width/2&&n.top>r.height/2}function Bg(e){let t=e,n=1;do{let e=jg(t).zoom;e!=null&&e!==`1`&&(n*=e),t=t.parentElement}while(t!==null&&t!==t.getRootNode());return n}function Vg(e){let t=Ng.getMarginLeft(e)+Ng.getMarginRight(e);return e.offsetWidth+t}function Hg(e){let t=Ng.getBorderLeftWidth(e)+Ng.getBorderRightWidth(e),n=Ng.getPaddingLeft(e)+Ng.getPaddingRight(e);return e.offsetWidth-t-n}function Ug(e){let t=Ng.getMarginLeft(e)+Ng.getMarginRight(e);return e.scrollWidth+t}function Wg(e){let t=Ng.getBorderTopWidth(e)+Ng.getBorderBottomWidth(e),n=Ng.getPaddingTop(e)+Ng.getPaddingBottom(e);return e.offsetHeight-t-n}function Gg(e){let t=Ng.getMarginTop(e)+Ng.getMarginBottom(e);return e.offsetHeight+t}function Kg(e,t){if(e===null)return 0;let n=Fg(e),r=Fg(t);return n.left-r.left}function qg(e,t){let n=t.map(t=>Math.max(Ug(t),Vg(t))+Kg(t,e)||0);return Math.max(...n)}function Jg(e,t){return!!t?.contains(e)}var Yg=`parentFlowToElementId`;function Xg(e,t){e.dataset[Yg]=t.id}function Zg(e){let t=e.dataset[Yg];return typeof t==`string`?e.getRootNode().getElementById(t):null}function Qg(e,t){let n=e;for(;n;){if(n===t)return!0;if(x_(n)){let e=Zg(n);if(e){n=e;continue}}n=n.parentNode}return!1}function $g(e,t,n){for(;e&&e.nodeType===e.ELEMENT_NODE;){if(e.classList.contains(t))return e;if(n){if(typeof n==`string`){if(e.classList.contains(n))return null}else if(e===n)return null}e=e.parentNode}return null}function e_(e,t,n){return!!$g(e,t,n)}function t_(e){return e&&!!e.host&&!!e.mode}function n_(e){return!!r_(e)}function r_(e){for(;e.parentNode;){if(e===e.ownerDocument?.body)return null;e=e.parentNode}return t_(e)?e:null}function i_(e=u_()){let t=e.activeElement;for(;t?.shadowRoot;)t=t.shadowRoot.activeElement;return t}function a_(e=u_()){let t=e=>e.fullscreenElement??e.webkitFullscreenElement??null,n=t(e);for(;n?.shadowRoot;)n=t(n.shadowRoot);return n}function o_(e){let t=e.getRootNode();return t instanceof Document&&(t=t.body),t}function s_(e){return i_()===e}function c_(e){return Jg(i_(),e)}function l_(e){return e.ownerDocument===u_()}function u_(){if(Zh()<=1)return i.document;let e=Array.from(Xh()).map(({window:e})=>e.document).find(e=>e.hasFocus());if(e)return e;let t=ig();return t?t.document:i.document}function d_(){return u_().defaultView?.window??i}var f_=new class{constructor(){this.mutationObservers=new Map}observe(e,t,n){let r=this.mutationObservers.get(e);r||(r=new Map,this.mutationObservers.set(e,r));let i=hm(n),a=r.get(i);if(a)a.users+=1;else{let o=new E,s=new MutationObserver(e=>o.fire(e));s.observe(e,n);let c=a={users:1,observer:s,onDidMutate:o.event};t.add(S(()=>{--c.users,c.users===0&&(o.dispose(),s.disconnect(),r?.delete(i),r?.size===0&&this.mutationObservers.delete(e))})),r.set(i,a)}return a.onDidMutate}};function p_(e=i.document.head){return __(`meta`,e)}function m_(e=i.document.head){return __(`link`,e)}function h_(){return i.document.createDocumentFragment()}function g_(e){return i.document.createTextNode(e)}function __(e,t=i.document.head){let n=v_(e);return n.setAttribute(`data-vscode`,`true`),t.appendChild(n),n}function v_(e,t){return i.document.createElement(e,t)}function y_(e,t,n){return i.document.createElementNS(e,t,n)}function b_(e){return e instanceof i.Element||e instanceof Yh(e).Element}function x_(e){return e instanceof i.HTMLElement||e instanceof Yh(e).HTMLElement}function S_(e){return e instanceof i.HTMLAnchorElement||e instanceof Yh(e).HTMLAnchorElement}function C_(e){return e instanceof i.HTMLTextAreaElement||e instanceof Yh(e).HTMLTextAreaElement}function w_(e){return e instanceof i.HTMLInputElement||e instanceof Yh(e).HTMLInputElement}function T_(e){return e instanceof i.HTMLDivElement||e instanceof Yh(e).HTMLDivElement}function E_(e){return e instanceof i.HTMLIFrameElement||e instanceof Yh(e).HTMLIFrameElement}function D_(e){return e instanceof i.SVGElement||e instanceof Yh(e).SVGElement}function O_(e){return e instanceof i.MouseEvent||e instanceof Yh(e).MouseEvent}function k_(e){return e instanceof i.KeyboardEvent||e instanceof Yh(e).KeyboardEvent}function A_(e){return e instanceof i.DragEvent||e instanceof Yh(e).DragEvent}var R={CLICK:`click`,AUXCLICK:`auxclick`,DBLCLICK:`dblclick`,MOUSE_UP:`mouseup`,MOUSE_DOWN:`mousedown`,MOUSE_OVER:`mouseover`,MOUSE_MOVE:`mousemove`,MOUSE_OUT:`mouseout`,MOUSE_ENTER:`mouseenter`,MOUSE_LEAVE:`mouseleave`,MOUSE_WHEEL:`wheel`,POINTER_UP:`pointerup`,POINTER_DOWN:`pointerdown`,POINTER_MOVE:`pointermove`,POINTER_LEAVE:`pointerleave`,CONTEXT_MENU:`contextmenu`,WHEEL:`wheel`,KEY_DOWN:`keydown`,KEY_PRESS:`keypress`,KEY_UP:`keyup`,LOAD:`load`,BEFORE_UNLOAD:`beforeunload`,UNLOAD:`unload`,PAGE_SHOW:`pageshow`,PAGE_HIDE:`pagehide`,PASTE:`paste`,ABORT:`abort`,ERROR:`error`,RESIZE:`resize`,SCROLL:`scroll`,FULLSCREEN_CHANGE:`fullscreenchange`,WK_FULLSCREEN_CHANGE:`webkitfullscreenchange`,SELECT:`select`,CHANGE:`change`,SUBMIT:`submit`,RESET:`reset`,FOCUS:`focus`,FOCUS_IN:`focusin`,FOCUS_OUT:`focusout`,BLUR:`blur`,INPUT:`input`,STORAGE:`storage`,DRAG_START:`dragstart`,DRAG:`drag`,DRAG_ENTER:`dragenter`,DRAG_LEAVE:`dragleave`,DRAG_OVER:`dragover`,DROP:`drop`,DRAG_END:`dragend`,ANIMATION_START:Df?`webkitAnimationStart`:`animationstart`,ANIMATION_END:Df?`webkitAnimationEnd`:`animationend`,ANIMATION_ITERATION:Df?`webkitAnimationIteration`:`animationiteration`};function j_(e){let t=e;return!!(t&&typeof t.preventDefault==`function`&&typeof t.stopPropagation==`function`)}var M_={stop:(e,t)=>(e.preventDefault(),t&&e.stopPropagation(),e)};function N_(e){let t=[];for(let n=0;e&&e.nodeType===e.ELEMENT_NODE;n++)t[n]=e.scrollTop,e=e.parentNode;return t}function P_(e,t){for(let n=0;e&&e.nodeType===e.ELEMENT_NODE;n++)e.scrollTop!==t[n]&&(e.scrollTop=t[n]),e=e.parentNode}var F_=class e extends w{get onDidFocus(){return this._onDidFocus.event}get onDidBlur(){return this._onDidBlur.event}static hasFocusWithin(e){if(x_(e)){let t=r_(e);return Jg(t?t.activeElement:e.getRootNode().activeElement,e)}else{let t=e;return Jg(t.document.activeElement,t.document)}}constructor(t){super(),this._onDidFocus=this._register(new E),this._onDidBlur=this._register(new E);let n=e.hasFocusWithin(t),r=!1,i=()=>{r=!1,n||(n=!0,this._onDidFocus.fire())},a=()=>{n&&(r=!0,(x_(t)?Yh(t):t).setTimeout(()=>{r&&(r=!1,n=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{e.hasFocusWithin(t)!==n&&(n?a():i())},this._register(L(t,R.FOCUS,i,!0)),this._register(L(t,R.BLUR,a,!0)),x_(t)&&(this._register(L(t,R.FOCUS_IN,()=>this._refreshStateHandler())),this._register(L(t,R.FOCUS_OUT,()=>this._refreshStateHandler())))}refreshState(){this._refreshStateHandler()}};function I_(e){return new F_(e)}function L_(e,t){return e.after(t),t}function z(e,...t){if(e.append(...t),t.length===1&&typeof t[0]!=`string`)return t[0]}function R_(e,t){return e.insertBefore(t,e.firstChild),t}function z_(e,...t){e.textContent=``,z(e,...t)}var B_=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/,V_;(function(e){e.HTML=`http://www.w3.org/1999/xhtml`,e.SVG=`http://www.w3.org/2000/svg`})(V_||={});function H_(e,t,n,...r){let i=B_.exec(t);if(!i)throw Error(`Bad use of emmet`);let a=i[1]||`div`,o;return o=e===V_.HTML?v_(a):y_(e,a),i[3]&&(o.id=i[3]),i[4]&&(o.className=i[4].replace(/\./g,` `).trim()),n&&Object.entries(n).forEach(([e,t])=>{t!==void 0&&(/^on\w+$/.test(e)?o[e]=t:e===`selected`?t&&o.setAttribute(e,`true`):o.setAttribute(e,t))}),o.append(...r),o}function B(e,t,...n){return H_(V_.HTML,e,t,...n)}B.SVG=function(e,t,...n){return H_(V_.SVG,e,t,...n)};function U_(e,...t){e?W_(...t):G_(...t)}function W_(...e){for(let t of e)t.style.display=``,t.removeAttribute(`aria-hidden`)}function G_(...e){for(let t of e)t.style.display=`none`,t.setAttribute(`aria-hidden`,`true`)}function K_(e){return t=>{t.preventDefault(),t.stopPropagation(),e(t)}}function q_(e,t){let n=e.devicePixelRatio*t;return Math.max(1,Math.floor(n))/e.devicePixelRatio}function J_(e){i.open(e,`_blank`,`noopener`)}var Y_=780,X_=640;function Z_(e){let t=Math.floor(i.screenLeft+i.innerWidth/2-Y_/2),n=Math.floor(i.screenTop+i.innerHeight/2-X_/2);i.open(e,`_blank`,`width=${Y_},height=${X_},top=${n},left=${t}`)}function Q_(e,t=!0){let n=i.open();return n?(t&&(n.opener=null),n.location.href=e,!0):!1}function $_(e,t){let n=()=>{t(),r=xg(e,n)},r=xg(e,n);return S(()=>r.dispose())}vs.setPreferredWebSchema(/^https:/.test(i.location.href)?`https`:`http`);function ev(e,t){let n;if(k.isUri(e))n=e.toString(!0);else{let t=new Blob([e]);n=URL.createObjectURL(t),setTimeout(()=>URL.revokeObjectURL(n))}let r=d_(),i=v_(`a`);r.document.body.appendChild(i),i.download=t,i.href=n,i.click(),setTimeout(()=>i.remove())}function tv(){return new Promise(e=>{let t=d_(),n=v_(`input`);t.document.body.appendChild(n),n.type=`file`,n.multiple=!0,T.once(T.fromDOMEventEmitter(n,`input`))(()=>{e(n.files??void 0)}),n.click(),setTimeout(()=>n.remove())})}var nv;(function(e){e[e.DOCUMENT=1]=`DOCUMENT`,e[e.BROWSER=2]=`BROWSER`})(nv||={});function rv(e,t){if(a_(e.document)===t)return{mode:nv.DOCUMENT,guess:!1};let n=t.getBoundingClientRect().height>=e.screen.height;return e.innerHeight===e.screen.height&&n?{mode:nv.BROWSER,guess:!1}:(si||ci)&&e.outerHeight===e.screen.height&&e.outerWidth===e.screen.width&&n?{mode:nv.BROWSER,guess:!0}:null}var iv=class e extends E{constructor(){super(),this._subscriptions=new C,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(T.runAndSubscribe($h,({window:e,disposables:t})=>this.registerListeners(e,t),{window:i,disposables:this._subscriptions}))}registerListeners(e,t){t.add(L(e,`keydown`,e=>{if(e.defaultPrevented)return;let t=new vp(e);if(!(t.keyCode===F.Alt&&e.repeat)){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed=`alt`;else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed=`ctrl`;else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed=`meta`;else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed=`shift`;else if(t.keyCode!==F.Alt)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}},!0)),t.add(L(e,`keyup`,e=>{e.defaultPrevented||(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased=`alt`:!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased=`ctrl`:!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased=`meta`:!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased=`shift`:this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))},!0)),t.add(L(e.document.body,`mousedown`,()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(L(e.document.body,`mouseup`,()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(L(e.document.body,`mousemove`,e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),t.add(L(e,`blur`,()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}get isModifierPressed(){return gp(this._keyStatus)}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return e.instance||=new e,e.instance}static disposeInstance(){e.instance&&=(e.instance.dispose(),void 0)}dispose(){super.dispose(),this._subscriptions.dispose()}},av=class extends w{constructor(e,t){super(),this.element=e,this.callbacks=t,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this.callbacks.onDragStart&&this._register(L(this.element,R.DRAG_START,e=>{this.callbacks.onDragStart?.(e)})),this.callbacks.onDrag&&this._register(L(this.element,R.DRAG,e=>{this.callbacks.onDrag?.(e)})),this._register(L(this.element,R.DRAG_ENTER,e=>{this.counter++,this.dragStartTime=e.timeStamp,this.callbacks.onDragEnter?.(e)})),this._register(L(this.element,R.DRAG_OVER,e=>{e.preventDefault(),this.callbacks.onDragOver?.(e,e.timeStamp-this.dragStartTime)})),this._register(L(this.element,R.DRAG_LEAVE,e=>{this.counter--,this.counter===0&&(this.dragStartTime=0,this.callbacks.onDragLeave?.(e))})),this._register(L(this.element,R.DRAG_END,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDragEnd?.(e)})),this._register(L(this.element,R.DROP,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDrop?.(e)}))}},ov=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function sv(e,...t){let n,r;Array.isArray(t[0])?(n={},r=t[0]):(n=t[0]||{},r=t[1]);let i=ov.exec(e);if(!i||!i.groups)throw Error(`Bad use of h`);let a=v_(i.groups.tag||`div`);i.groups.id&&(a.id=i.groups.id);let o=[];if(i.groups.class)for(let e of i.groups.class.split(`.`))e!==``&&o.push(e);if(n.className!==void 0)for(let e of n.className.split(`.`))e!==``&&o.push(e);o.length>0&&(a.className=o.join(` `));let s={};if(i.groups.name&&(s[i.groups.name]=a),r)for(let e of r)x_(e)?a.appendChild(e):typeof e==`string`?a.append(e):`root`in e&&(Object.assign(s,e),a.appendChild(e.root));for(let[e,t]of Object.entries(n))if(e===`className`)continue;else if(e===`style`)for(let[e,n]of Object.entries(t))a.style.setProperty(cv(e),typeof n==`number`?n+`px`:``+n);else e===`tabIndex`?a.tabIndex=t:a.setAttribute(cv(e),t.toString());return s.root=a,s}function cv(e){return e.replace(/([a-z])([A-Z])/g,`$1-$2`).toLowerCase()}function lv(e,t,n){for(let{name:r,value:i}of e.attributes)(!n||n.includes(r))&&t.setAttribute(r,i)}function uv(e,t,n){let r=e.getAttribute(n);r?t.setAttribute(n,r):t.removeAttribute(n)}function dv(e,t,n){lv(e,t,n);let r=new C;return r.add(f_.observe(e,r,{attributes:!0,attributeFilter:n})(n=>{for(let r of n)r.type===`attributes`&&r.attributeName&&uv(e,t,r.attributeName)})),r}function fv(e){return e.tagName.toLowerCase()===`input`||e.tagName.toLowerCase()===`textarea`||x_(e)&&!!e.editContext}var pv;(function(e){function t(e=void 0){return(t,n,r)=>{let i=n.class;delete n.class;let a=n.ref;delete n.ref;let o=n.obsRef;return delete n.obsRef,new Sv(t,a,o,e,i,n,r)}}function n(e,n=void 0){let r=t(n);return(t,n)=>r(e,t,n)}e.div=n(`div`),e.elem=t(void 0),e.svg=n(`svg`,`http://www.w3.org/2000/svg`),e.svgElem=t(`http://www.w3.org/2000/svg`);function r(){let e,t=function(t){e=t};return Object.defineProperty(t,`element`,{get(){if(!e)throw new y(`Make sure the ref is set before accessing the element. Maybe wrong initialization order?`);return e}}),t}e.ref=r})(pv||={});var mv=class e{constructor(t,n,r,i,a,o,s){this._deriveds=[],this._isHovered=void 0,this._didMouseMoveDuringHover=void 0,this._element=i?y_(i,t):v_(t),n&&n(this._element),r&&this._deriveds.push(vh(e=>{r(this),e.store.add({dispose:()=>{r(null)}})})),a&&(vv(a)?this._deriveds.push(vh(this,e=>{hv(this._element,_v(a,e))})):hv(this._element,_v(a,void 0)));for(let[e,t]of Object.entries(o))if(e===`style`)for(let[e,n]of Object.entries(t)){let t=cv(e);Rh(n)?this._deriveds.push(yh({owner:this,debugName:()=>`set.style.${t}`},e=>{this._element.style.setProperty(t,yv(n.read(e)))})):this._element.style.setProperty(t,yv(n))}else e===`tabIndex`?Rh(t)?this._deriveds.push(vh(this,e=>{this._element.tabIndex=t.read(e)})):this._element.tabIndex=t:e.startsWith(`on`)?this._element[e]=t:Rh(t)?this._deriveds.push(yh({owner:this,debugName:()=>`set.${e}`},n=>{Cv(this._element,e,t.read(n))})):Cv(this._element,e,t);if(s){function t(n,r){return Rh(r)?t(n,r.read(n)):Array.isArray(r)?r.flatMap(e=>t(n,e)):r instanceof e?(n&&r.readEffect(n),[r._element]):r?[r]:[]}let n=vh(this,e=>{this._element.replaceChildren(...t(e,s))});this._deriveds.push(n),bv(s)||n.get()}}readEffect(e){for(let t of this._deriveds)t.read(e)}keepUpdated(e){return vh(e=>{this.readEffect(e)}).recomputeInitiallyAndOnChange(e),this}toDisposableLiveElement(){let e=new C;return this.keepUpdated(e),new xv(this._element,e)}get isHovered(){if(!this._isHovered){let e=Oh(`hovered`,!1);this._element.addEventListener(`mouseenter`,t=>e.set(!0,void 0)),this._element.addEventListener(`mouseleave`,t=>e.set(!1,void 0)),this._isHovered=e}return this._isHovered}get didMouseMoveDuringHover(){if(!this._didMouseMoveDuringHover){let e=!1,t=Oh(`didMouseMoveDuringHover`,!1);this._element.addEventListener(`mouseenter`,t=>{e=!0}),this._element.addEventListener(`mousemove`,n=>{e&&t.set(!0,void 0)}),this._element.addEventListener(`mouseleave`,n=>{e=!1,t.set(!1,void 0)}),this._didMouseMoveDuringHover=t}return this._didMouseMoveDuringHover}};function hv(e,t){D_(e)?e.setAttribute(`class`,t):e.className=t}function gv(e,t,n){if(Rh(e)){n(e.read(t));return}if(Array.isArray(e)){for(let r of e)gv(r,t,n);return}n(e)}function _v(e,t){let n=``;return gv(e,t,e=>{e&&(n.length===0?n=e:n+=` `+e)}),n}function vv(e){return Rh(e)?!0:Array.isArray(e)?e.some(e=>vv(e)):!1}function yv(e){return typeof e==`number`?e+`px`:e}function bv(e){return Rh(e)?!0:Array.isArray(e)?e.some(e=>bv(e)):!1}var xv=class{constructor(e,t){this.element=e,this._disposable=t}dispose(){this._disposable.dispose()}},Sv=class extends mv{get element(){return this._element}};function Cv(e,t,n){n==null?e.removeAttribute(cv(t)):e.setAttribute(cv(t),String(n))}var wv=class extends HTMLElement{disconnectedCallback(){this.onDidDisconnect?.()}connectedCallback(){this.onDidConnect?.()}};customElements.get(`connection-observer`)||customElements.define(`connection-observer`,wv);function Tv(e){let t=[];typeof e==`number`&&t.push(`code/timeOrigin`,e);function n(e,n){t.push(e,n?.startTime??Date.now())}function r(){let e=[];for(let n=0;n<t.length;n+=2)e.push({name:t[n],startTime:t[n+1]});return e}return{mark:n,getMarks:r}}function Ev(){if(typeof performance==`object`&&typeof performance.mark==`function`&&!performance.nodeTiming)return typeof performance.timeOrigin!=`number`&&!performance.timing?Tv():{mark(e,t){performance.mark(e,t)},getMarks(){let e=performance.timeOrigin;typeof e!=`number`&&(e=(performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart)??0);let t=[{name:`code/timeOrigin`,startTime:Math.round(e)}];for(let n of performance.getEntriesByType(`mark`))t.push({name:n.name,startTime:Math.round(e+n.startTime)});return t}};if(typeof process==`object`){let e=performance?.timeOrigin;return Tv(e)}else return console.trace(`perf-util loaded in UNKNOWN environment`),Tv()}function Dv(e){return e.MonacoPerformanceMarks||=Ev(),e.MonacoPerformanceMarks}var Ov=Dv(globalThis),kv=Ov.mark,Av=Ov.getMarks,jv=class{constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}},Mv=[],Nv;(function(e){e[e.Eager=0]=`Eager`,e[e.Delayed=1]=`Delayed`})(Nv||={});function Pv(e,t,n){t instanceof jv||(t=new jv(t,[],!!n)),Mv.push([e,t])}function Fv(){return Mv}var Iv={WIDTH:400,HEIGHT:270};function Lv(e){return!!e.workspaceUri}function Rv(e){return!!e.folderUri}function zv(e){return!!e.fileUri}var Bv;(function(e){e.MenuStyle=`window.menuStyle`,e.MenuBarVisibility=`window.menuBarVisibility`})(Bv||={});var Vv;(function(e){e.CUSTOM=`custom`,e.NATIVE=`native`,e.INHERIT=`inherit`})(Vv||={});function Hv(e,t){if(di)return!1;let n=Xv(e,t),r=e.getValue(`window`);return r?.menuStyle===Vv.NATIVE?!(!si&&!n):r?.menuStyle===Vv.CUSTOM?!1:n}function Uv(e,t){return di?!1:si?!0:Hv(e,t)}function Wv(e){let t=e.getValue(Bv.MenuBarVisibility);return t===`default`||t===`compact`&&Uv(e)||si&&li?`classic`:t}var Gv;(function(e){e.TITLE_BAR_STYLE=`window.titleBarStyle`,e.CUSTOM_TITLE_BAR_VISIBILITY=`window.customTitleBarVisibility`})(Gv||={});var Kv;(function(e){e.NATIVE=`native`,e.CUSTOM=`custom`})(Kv||={});var qv;(function(e){e.NATIVE=`native`,e.CUSTOM=`custom`,e.HIDDEN=`hidden`})(qv||={});var Jv;(function(e){e.AUTO=`auto`,e.WINDOWED=`windowed`,e.NEVER=`never`})(Jv||={});function Yv(e,t){return!0}function Xv(e,t){return t||=Zv(e),t===Kv.NATIVE}function Zv(e){if(di)return Kv.CUSTOM;let t=e.getValue(`window`);if(t){if(si&&t.nativeTabs===!0||si&&t.nativeFullScreen===!1)return Kv.NATIVE;let e=t.titleBarStyle;if(e===Kv.NATIVE||e===Kv.CUSTOM)return e}return Kv.CUSTOM}function Qv(e){if(di||si||Zv(e)===Kv.NATIVE)return qv.NATIVE;let t=e.getValue(`window`)?.controlsStyle;return t===qv.CUSTOM||t===qv.HIDDEN?t:qv.NATIVE}var $v=35;function ey(e){if(di||Xv(e))return!1;if(!si){let t=Qv(e);if(t===qv.CUSTOM||t===qv.HIDDEN)return!1}return!0}var ty={width:1200,height:800},ny={width:1440,height:900},ry={width:1024,height:768},iy;(function(e){e.TITLEBAR_PART=`workbench.parts.titlebar`,e.BANNER_PART=`workbench.parts.banner`,e.ACTIVITYBAR_PART=`workbench.parts.activitybar`,e.SIDEBAR_PART=`workbench.parts.sidebar`,e.PANEL_PART=`workbench.parts.panel`,e.AUXILIARYBAR_PART=`workbench.parts.auxiliarybar`,e.EDITOR_PART=`workbench.parts.editor`,e.STATUSBAR_PART=`workbench.parts.statusbar`})(iy||={});var ay;(function(e){e.SHOW_TABS=`zenMode.showTabs`,e.HIDE_LINENUMBERS=`zenMode.hideLineNumbers`,e.HIDE_STATUSBAR=`zenMode.hideStatusBar`,e.HIDE_ACTIVITYBAR=`zenMode.hideActivityBar`,e.CENTER_LAYOUT=`zenMode.centerLayout`,e.FULLSCREEN=`zenMode.fullScreen`,e.RESTORE=`zenMode.restore`,e.SILENT_NOTIFICATIONS=`zenMode.silentNotifications`})(ay||={});var oy;(function(e){e.ACTIVITY_BAR_LOCATION=`workbench.activityBar.location`,e.EDITOR_TABS_MODE=`workbench.editor.showTabs`,e.EDITOR_ACTIONS_LOCATION=`workbench.editor.editorActionsLocation`,e.COMMAND_CENTER=`window.commandCenter`,e.LAYOUT_ACTIONS=`workbench.layoutControl.enabled`})(oy||={});var sy;(function(e){e.DEFAULT=`default`,e.TOP=`top`,e.BOTTOM=`bottom`,e.HIDDEN=`hidden`})(sy||={});var cy;(function(e){e.MULTIPLE=`multiple`,e.SINGLE=`single`,e.NONE=`none`})(cy||={});var ly;(function(e){e.DEFAULT=`default`,e.TITLEBAR=`titleBar`,e.HIDDEN=`hidden`})(ly||={});var uy;(function(e){e[e.LEFT=0]=`LEFT`,e[e.RIGHT=1]=`RIGHT`,e[e.BOTTOM=2]=`BOTTOM`,e[e.TOP=3]=`TOP`})(uy||={});function dy(e){return e===uy.BOTTOM||e===uy.TOP}var fy;(function(e){e[e.ALWAYS=0]=`ALWAYS`,e[e.NEVER=1]=`NEVER`,e[e.REMEMBER_LAST=2]=`REMEMBER_LAST`})(fy||={});function py(e){switch(e){case uy.LEFT:return`left`;case uy.RIGHT:return`right`;case uy.BOTTOM:return`bottom`;case uy.TOP:return`top`;default:return`bottom`}}var my={[py(uy.LEFT)]:uy.LEFT,[py(uy.RIGHT)]:uy.RIGHT,[py(uy.BOTTOM)]:uy.BOTTOM,[py(uy.TOP)]:uy.TOP};function hy(e){return my[e]}function gy(e){switch(e){case fy.ALWAYS:return`always`;case fy.NEVER:return`never`;case fy.REMEMBER_LAST:return`preserve`;default:return`preserve`}}var _y={[gy(fy.ALWAYS)]:fy.ALWAYS,[gy(fy.NEVER)]:fy.NEVER,[gy(fy.REMEMBER_LAST)]:fy.REMEMBER_LAST};function vy(e){return _y[e]}function yy(e){return e===iy.EDITOR_PART||e===iy.STATUSBAR_PART||e===iy.TITLEBAR_PART}function by(e,t,n){let r=Cf(t),i=Xv(e);if(!di){let t=e.getValue(Gv.CUSTOM_TITLE_BAR_VISIBILITY);if(t===Jv.NEVER&&i||t===Jv.WINDOWED&&r)return!1}if(!xy(e))return!0;if(i&&Uv(e))return!1;if(si&&li)return!r;if(li&&!r||Pf()&&!r)return!0;switch(a(t)?`hidden`:Wv(e)){case`classic`:return!r||!!n;case`compact`:case`hidden`:return!1;case`toggle`:return!!n;case`visible`:return!0;default:return di?!1:!r||!!n}}function xy(e){if(e.getValue(oy.COMMAND_CENTER))return!1;let t=e.getValue(oy.ACTIVITY_BAR_LOCATION);if(t===sy.TOP||t===sy.BOTTOM)return!1;let n=e.getValue(oy.EDITOR_ACTIONS_LOCATION),r=e.getValue(oy.EDITOR_TABS_MODE);return!(n===ly.TITLEBAR||n===ly.DEFAULT&&r===cy.NONE||e.getValue(oy.LAYOUT_ACTIONS))}var Sy;(function(e){e.serviceIds=new Map,e.DI_TARGET=`$di$target`,e.DI_DEPENDENCIES=`$di$dependencies`;function t(t){return t[e.DI_DEPENDENCIES]||[]}e.getServiceDependencies=t})(Sy||={});var Cy=V(`instantiationService`);function wy(e,t,n){t[Sy.DI_TARGET]===t?t[Sy.DI_DEPENDENCIES].push({id:e,index:n}):(t[Sy.DI_DEPENDENCIES]=[{id:e,index:n}],t[Sy.DI_TARGET]=t)}function V(e){if(Sy.serviceIds.has(e))return Sy.serviceIds.get(e);let t=function(e,n,r){if(arguments.length!==3)throw Error(`@IServiceName-decorator can only be used to decorate a parameter`);wy(t,e,r)};return t.toString=()=>e,Sy.serviceIds.set(e,t),t}function Ty(e){return e}var Ey=V(`layoutService`),Dy=Ty(Ey);function Oy(e){return JSON.stringify(e,Ay)}function ky(e){let t=JSON.parse(e);return t=jy(t),t}function Ay(e,t){return t instanceof RegExp?{$mid:ns.Regexp,source:t.source,flags:t.flags}:t}function jy(e,t=0){if(!e||t>200)return e;if(typeof e==`object`){switch(e.$mid){case ns.Uri:return k.revive(e);case ns.Regexp:return new RegExp(e.source,e.flags);case ns.Date:return new Date(e.source)}if(e instanceof Up||e instanceof Uint8Array)return e;if(Array.isArray(e))for(let n=0;n<e.length;++n)e[n]=jy(e[n],t+1);else for(let n in e)Object.hasOwnProperty.call(e,n)&&(e[n]=jy(e[n],t+1))}return e}var My;(function(e){e[e.STORAGE_DOES_NOT_EXIST=0]=`STORAGE_DOES_NOT_EXIST`,e[e.STORAGE_IN_MEMORY=1]=`STORAGE_IN_MEMORY`})(My||={});function Ny(e){let t=e;return t?.changed instanceof Map||t?.deleted instanceof Set}var Py;(function(e){e[e.None=0]=`None`,e[e.Initialized=1]=`Initialized`,e[e.Closed=2]=`Closed`})(Py||={});var Fy=class e extends w{static#e=this.DEFAULT_FLUSH_DELAY=100;constructor(t,n=Object.create(null)){super(),this.database=t,this.options=n,this._onDidChangeStorage=this._register(new ir),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=Py.None,this.cache=new Map,this.flushDelayer=this._register(new lc(e.DEFAULT_FLUSH_DELAY)),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.pendingClose=void 0,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){this._onDidChangeStorage.pause();try{e.changed?.forEach((e,t)=>this.acceptExternal(t,e)),e.deleted?.forEach(e=>this.acceptExternal(e,void 0))}finally{this._onDidChangeStorage.resume()}}acceptExternal(e,t){if(this.state===Py.Closed)return;let n=!1;Ee(t)?n=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),n=!0),n&&this._onDidChangeStorage.fire({key:e,external:!0})}get items(){return this.cache}get size(){return this.cache.size}async init(){this.state===Py.None&&(this.state=Py.Initialized,this.options.hint!==My.STORAGE_DOES_NOT_EXIST&&(this.cache=await this.database.getItems()))}get(e,t){let n=this.cache.get(e);return Ee(n)?t:n}getBoolean(e,t){let n=this.get(e);return Ee(n)?t:n===`true`}getNumber(e,t){let n=this.get(e);return Ee(n)?t:parseInt(n,10)}getObject(e,t){let n=this.get(e);return Ee(n)?t:ky(n)}async set(e,t,n=!1){if(this.state===Py.Closed)return;if(Ee(t))return this.delete(e,n);let r=ye(t)||Array.isArray(t)?Oy(t):String(t);if(this.cache.get(e)!==r)return this.cache.set(e,r),this.pendingInserts.set(e,r),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire({key:e,external:n}),this.doFlush()}async delete(e,t=!1){if(this.state!==Py.Closed&&this.cache.delete(e))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire({key:e,external:t}),this.doFlush()}async optimize(){if(this.state!==Py.Closed)return await this.flush(0),this.database.optimize()}async close(){return this.pendingClose||=this.doClose(),this.pendingClose}async doClose(){this.state=Py.Closed;try{await this.doFlush(0)}catch{}await this.database.close(()=>this.cache)}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;let e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)this.whenFlushedCallbacks.pop()?.()})}async flush(e){if(!(this.state===Py.Closed||this.pendingClose))return this.doFlush(e)}async doFlush(e){return this.options.hint===My.STORAGE_IN_MEMORY?this.flushPending():this.flushDelayer.trigger(()=>this.flushPending(),e)}async whenFlushed(){if(this.hasPending)return new Promise(e=>this.whenFlushedCallbacks.push(e))}isInMemory(){return this.options.hint===My.STORAGE_IN_MEMORY}},Iy=class{constructor(){this.onDidChangeItemsExternal=T.None,this.items=new Map}async getItems(){return this.items}async updateItems(e){e.insert?.forEach((e,t)=>this.items.set(t,e)),e.delete?.forEach(e=>this.items.delete(e))}async optimize(){}async close(){}},Ly=V(`environmentService`),Ry=class{constructor(){this._value=``,this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){return e.charCodeAt(0)-this._value.charCodeAt(this._pos)}value(){return this._value[this._pos]}},zy=class{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===O.Period)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?Ja(e,this._value,0,e.length,this._from,this._to):Xa(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}},By=class{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){let e=this._value.charCodeAt(t);if(!(e===O.Slash||this._splitOnBackslash&&e===O.Backslash))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){let t=this._value.charCodeAt(this._to);if(t===O.Slash||this._splitOnBackslash&&t===O.Backslash)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?Ja(e,this._value,0,e.length,this._from,this._to):Xa(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}},Vy;(function(e){e[e.Scheme=1]=`Scheme`,e[e.Authority=2]=`Authority`,e[e.Path=3]=`Path`,e[e.Query=4]=`Query`,e[e.Fragment=5]=`Fragment`})(Vy||={});var Hy=class{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(Vy.Scheme),this._value.authority&&this._states.push(Vy.Authority),this._value.path&&(this._pathIterator=new By(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(Vy.Path)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(Vy.Query),this._value.fragment&&this._states.push(Vy.Fragment)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===Vy.Path&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===Vy.Path&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===Vy.Scheme)return Ya(e,this._value.scheme);if(this._states[this._stateIdx]===Vy.Authority)return Ya(e,this._value.authority);if(this._states[this._stateIdx]===Vy.Path)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===Vy.Query)return qa(e,this._value.query);if(this._states[this._stateIdx]===Vy.Fragment)return qa(e,this._value.fragment);throw Error()}value(){if(this._states[this._stateIdx]===Vy.Scheme)return this._value.scheme;if(this._states[this._stateIdx]===Vy.Authority)return this._value.authority;if(this._states[this._stateIdx]===Vy.Path)return this._pathIterator.value();if(this._states[this._stateIdx]===Vy.Query)return this._value.query;if(this._states[this._stateIdx]===Vy.Fragment)return this._value.fragment;throw Error()}},Uy=class e{static#e=this.Val=Symbol(`undefined_placeholder`);static wrap(t){return t===void 0?e.Val:t}static unwrap(t){return t===e.Val?void 0:t}},Wy=class{constructor(){this.height=1,this.value=void 0,this.key=void 0,this.left=void 0,this.mid=void 0,this.right=void 0}isEmpty(){return!this.left&&!this.mid&&!this.right&&this.value===void 0}rotateLeft(){let e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){let e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}},Gy;(function(e){e[e.Left=-1]=`Left`,e[e.Mid=0]=`Mid`,e[e.Right=1]=`Right`})(Gy||={});var Ky=class e{static forUris(t=()=>!1,n=()=>!1){return new e(new Hy(t,n))}static forPaths(t=!1){return new e(new By(void 0,!t))}static forStrings(){return new e(new Ry)}static forConfigKeys(){return new e(new zy)}constructor(e){this._iter=e}clear(){this._root=void 0}fill(e,t){if(t){let n=t.slice(0);Lt(n);for(let t of n)this.set(t,e)}else{let t=e.slice(0);Lt(t);for(let e of t)this.set(e[0],e[1])}}set(e,t){let n=this._iter.reset(e),r;this._root||(this._root=new Wy,this._root.segment=n.value());let i=[];for(r=this._root;;){let e=n.cmp(r.segment);if(e>0)r.left||(r.left=new Wy,r.left.segment=n.value()),i.push([Gy.Left,r]),r=r.left;else if(e<0)r.right||(r.right=new Wy,r.right.segment=n.value()),i.push([Gy.Right,r]),r=r.right;else if(n.hasNext())n.next(),r.mid||(r.mid=new Wy,r.mid.segment=n.value()),i.push([Gy.Mid,r]),r=r.mid;else break}let a=Uy.unwrap(r.value);r.value=Uy.wrap(t),r.key=e;for(let e=i.length-1;e>=0;e--){let t=i[e][1];t.updateHeight();let n=t.balanceFactor();if(n<-1||n>1){let n=i[e][0],r=i[e+1][0];if(n===Gy.Right&&r===Gy.Right)i[e][1]=t.rotateLeft();else if(n===Gy.Left&&r===Gy.Left)i[e][1]=t.rotateRight();else if(n===Gy.Right&&r===Gy.Left)t.right=i[e+1][1]=i[e+1][1].rotateRight(),i[e][1]=t.rotateLeft();else if(n===Gy.Left&&r===Gy.Right)t.left=i[e+1][1]=i[e+1][1].rotateLeft(),i[e][1]=t.rotateRight();else throw Error();if(e>0)switch(i[e-1][0]){case Gy.Left:i[e-1][1].left=i[e][1];break;case Gy.Right:i[e-1][1].right=i[e][1];break;case Gy.Mid:i[e-1][1].mid=i[e][1];break}else this._root=i[0][1]}}return a}get(e){return Uy.unwrap(this._getNode(e)?.value)}_getNode(e){let t=this._iter.reset(e),n=this._root;for(;n;){let e=t.cmp(n.segment);if(e>0)n=n.left;else if(e<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else break}return n}has(e){let t=this._getNode(e);return!(t?.value===void 0&&t?.mid===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){let n=this._iter.reset(e),r=[],i=this._root;for(;i;){let e=n.cmp(i.segment);if(e>0)r.push([Gy.Left,i]),i=i.left;else if(e<0)r.push([Gy.Right,i]),i=i.right;else if(n.hasNext())n.next(),r.push([Gy.Mid,i]),i=i.mid;else break}if(i){if(t?(i.left=void 0,i.mid=void 0,i.right=void 0,i.height=1):(i.key=void 0,i.value=void 0),!i.mid&&!i.value)if(i.left&&i.right){let e=[[Gy.Right,i]],t=this._min(i.right,e);if(t.key){i.key=t.key,i.value=t.value,i.segment=t.segment;let n=t.right;if(e.length>1){let[t,r]=e[e.length-1];switch(t){case Gy.Left:r.left=n;break;case Gy.Mid:fe(!1);case Gy.Right:fe(!1)}}else i.right=n;let a=this._balanceByStack(e);if(r.length>0){let[e,t]=r[r.length-1];switch(e){case Gy.Left:t.left=a;break;case Gy.Mid:t.mid=a;break;case Gy.Right:t.right=a;break}}else this._root=a}}else{let e=i.left??i.right;if(r.length>0){let[t,n]=r[r.length-1];switch(t){case Gy.Left:n.left=e;break;case Gy.Mid:n.mid=e;break;case Gy.Right:n.right=e;break}}else this._root=e}this._root=this._balanceByStack(r)??this._root}}_min(e,t){for(;e.left;)t.push([Gy.Left,e]),e=e.left;return e}_balanceByStack(e){for(let t=e.length-1;t>=0;t--){let n=e[t][1];n.updateHeight();let r=n.balanceFactor();if(r>1?(n.right.balanceFactor()>=0||(n.right=n.right.rotateRight()),e[t][1]=n.rotateLeft()):r<-1&&(n.left.balanceFactor()<=0||(n.left=n.left.rotateLeft()),e[t][1]=n.rotateRight()),t>0)switch(e[t-1][0]){case Gy.Left:e[t-1][1].left=e[t][1];break;case Gy.Right:e[t-1][1].right=e[t][1];break;case Gy.Mid:e[t-1][1].mid=e[t][1];break}else return e[0][1]}}findSubstr(e){let t=this._iter.reset(e),n=this._root,r;for(;n;){let e=t.cmp(n.segment);if(e>0)n=n.left;else if(e<0)n=n.right;else if(t.hasNext())t.next(),r=Uy.unwrap(n.value)||r,n=n.mid;else break}return n&&Uy.unwrap(n.value)||r}findSuperstr(e){return this._findSuperstrOrElement(e,!1)}_findSuperstrOrElement(e,t){let n=this._iter.reset(e),r=this._root;for(;r;){let e=n.cmp(r.segment);if(e>0)r=r.left;else if(e<0)r=r.right;else if(n.hasNext())n.next(),r=r.mid;else if(r.mid)return this._entries(r.mid);else return t?Uy.unwrap(r.value):void 0}}hasElementOrSubtree(e){return this._findSuperstrOrElement(e,!0)!==void 0}forEach(e){for(let[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){let t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value!==void 0&&t.push([e.key,Uy.unwrap(e.value)]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}_isBalanced(){let e=t=>{if(!t)return!0;let n=t.balanceFactor();return n<-1||n>1?!1:e(t.left)&&e(t.right)};return e(this._root)}};function qy(e){return e.create===!0}var Jy;(function(e){e[e.Unknown=0]=`Unknown`,e[e.File=1]=`File`,e[e.Directory=2]=`Directory`,e[e.SymbolicLink=64]=`SymbolicLink`})(Jy||={});var Yy;(function(e){e[e.Readonly=1]=`Readonly`,e[e.Locked=2]=`Locked`,e[e.Executable=4]=`Executable`})(Yy||={});var Xy;(function(e){e[e.UPDATED=2]=`UPDATED`,e[e.ADDED=4]=`ADDED`,e[e.DELETED=8]=`DELETED`})(Xy||={});var Zy;(function(e){e[e.None=0]=`None`,e[e.FileReadWrite=2]=`FileReadWrite`,e[e.FileOpenReadWriteClose=4]=`FileOpenReadWriteClose`,e[e.FileReadStream=16]=`FileReadStream`,e[e.FileFolderCopy=8]=`FileFolderCopy`,e[e.PathCaseSensitive=1024]=`PathCaseSensitive`,e[e.Readonly=2048]=`Readonly`,e[e.Trash=4096]=`Trash`,e[e.FileWriteUnlock=8192]=`FileWriteUnlock`,e[e.FileAtomicRead=16384]=`FileAtomicRead`,e[e.FileAtomicWrite=32768]=`FileAtomicWrite`,e[e.FileAtomicDelete=65536]=`FileAtomicDelete`,e[e.FileClone=131072]=`FileClone`,e[e.FileRealpath=262144]=`FileRealpath`,e[e.FileAppend=524288]=`FileAppend`})(Zy||={});function Qy(e){return!!(e.capabilities&Zy.FileReadWrite)}function $y(e){return!!(e.capabilities&Zy.FileAppend)}function eb(e){return!!(e.capabilities&Zy.FileFolderCopy)}function tb(e){return!!(e.capabilities&Zy.FileClone)}function nb(e){return!!(e.capabilities&Zy.FileRealpath)}function rb(e){return!!(e.capabilities&Zy.FileOpenReadWriteClose)}function ib(e){return!!(e.capabilities&Zy.FileReadStream)}function ab(e){return Qy(e)?!!(e.capabilities&Zy.FileAtomicRead):!1}function ob(e){return Qy(e)?!!(e.capabilities&Zy.FileAtomicWrite):!1}function sb(e){return!!(e.capabilities&Zy.FileAtomicDelete)}function cb(e){return!!(e.capabilities&Zy.Readonly)}var H;(function(e){e.FileExists=`EntryExists`,e.FileNotFound=`EntryNotFound`,e.FileNotADirectory=`EntryNotADirectory`,e.FileIsADirectory=`EntryIsADirectory`,e.FileExceedsStorageQuota=`EntryExceedsStorageQuota`,e.FileTooLarge=`EntryTooLarge`,e.FileWriteLocked=`EntryWriteLocked`,e.NoPermissions=`NoPermissions`,e.Unavailable=`Unavailable`,e.Unknown=`Unknown`})(H||={});var lb=class e extends Error{static create(t,n){let r=new e(t.toString(),n);return fb(r,n),r}constructor(e,t){super(e),this.code=t}};function ub(e,t){return lb.create(e,t)}function db(e){return e||ub(D(1940,`Unknown Error`),H.Unknown)}function fb(e,t){return e.name=t?`${t} (FileSystemError)`:`FileSystemError`,e}function pb(e){if(!e)return H.Unknown;if(e instanceof lb)return e.code;let t=/^(.+) \(FileSystemError\)$/.exec(e.name);if(!t)return H.Unknown;switch(t[1]){case H.FileExists:return H.FileExists;case H.FileIsADirectory:return H.FileIsADirectory;case H.FileNotADirectory:return H.FileNotADirectory;case H.FileNotFound:return H.FileNotFound;case H.FileTooLarge:return H.FileTooLarge;case H.FileWriteLocked:return H.FileWriteLocked;case H.NoPermissions:return H.NoPermissions;case H.Unavailable:return H.Unavailable}return H.Unknown}function mb(e){if(e instanceof yb)return e.fileOperationResult;switch(pb(e)){case H.FileNotFound:return Sb.FILE_NOT_FOUND;case H.FileIsADirectory:return Sb.FILE_IS_DIRECTORY;case H.FileNotADirectory:return Sb.FILE_NOT_DIRECTORY;case H.FileWriteLocked:return Sb.FILE_WRITE_LOCKED;case H.NoPermissions:return Sb.FILE_PERMISSION_DENIED;case H.FileExists:return Sb.FILE_MOVE_CONFLICT;case H.FileTooLarge:return Sb.FILE_TOO_LARGE;default:return Sb.FILE_OTHER_ERROR}}var hb;(function(e){e[e.CREATE=0]=`CREATE`,e[e.DELETE=1]=`DELETE`,e[e.MOVE=2]=`MOVE`,e[e.COPY=3]=`COPY`,e[e.WRITE=4]=`WRITE`})(hb||={});var gb=class{constructor(e,t,n){this.resource=e,this.operation=t,this.target=n}isOperation(e){return this.operation===e}},_b;(function(e){e[e.UPDATED=0]=`UPDATED`,e[e.ADDED=1]=`ADDED`,e[e.DELETED=2]=`DELETED`})(_b||={});var vb=class e{static#e=this.MIXED_CORRELATION=null;constructor(t,n){this.ignorePathCasing=n,this.correlationId=void 0,this.added=new Sa(()=>{let e=Ky.forUris(()=>this.ignorePathCasing);return e.fill(this.rawAdded.map(e=>[e,!0])),e}),this.updated=new Sa(()=>{let e=Ky.forUris(()=>this.ignorePathCasing);return e.fill(this.rawUpdated.map(e=>[e,!0])),e}),this.deleted=new Sa(()=>{let e=Ky.forUris(()=>this.ignorePathCasing);return e.fill(this.rawDeleted.map(e=>[e,!0])),e}),this.rawAdded=[],this.rawUpdated=[],this.rawDeleted=[];for(let n of t){switch(n.type){case _b.ADDED:this.rawAdded.push(n.resource);break;case _b.UPDATED:this.rawUpdated.push(n.resource);break;case _b.DELETED:this.rawDeleted.push(n.resource);break}this.correlationId!==e.MIXED_CORRELATION&&(typeof n.cId==`number`?this.correlationId===void 0?this.correlationId=n.cId:this.correlationId!==n.cId&&(this.correlationId=e.MIXED_CORRELATION):this.correlationId!==void 0&&(this.correlationId=e.MIXED_CORRELATION))}}contains(e,...t){return this.doContains(e,{includeChildren:!1},...t)}affects(e,...t){return this.doContains(e,{includeChildren:!0},...t)}doContains(e,t,...n){if(!e)return!1;let r=n.length>0;return!!((!r||n.includes(_b.ADDED))&&(this.added.value.get(e)||t.includeChildren&&this.added.value.findSuperstr(e))||(!r||n.includes(_b.UPDATED))&&(this.updated.value.get(e)||t.includeChildren&&this.updated.value.findSuperstr(e))||(!r||n.includes(_b.DELETED))&&(this.deleted.value.findSubstr(e)||t.includeChildren&&this.deleted.value.findSuperstr(e)))}gotAdded(){return this.rawAdded.length>0}gotDeleted(){return this.rawDeleted.length>0}gotUpdated(){return this.rawUpdated.length>0}correlates(e){return this.correlationId===e}hasCorrelation(){return typeof this.correlationId==`number`}},yb=class extends Error{constructor(e,t,n){super(e),this.fileOperationResult=t,this.options=n}},bb=class extends yb{constructor(e,t,n,r){super(e,t,r),this.fileOperationResult=t,this.size=n}},xb=class extends yb{constructor(e,t,n){super(e,Sb.FILE_NOT_MODIFIED_SINCE,n),this.stat=t}},Sb;(function(e){e[e.FILE_IS_DIRECTORY=0]=`FILE_IS_DIRECTORY`,e[e.FILE_NOT_FOUND=1]=`FILE_NOT_FOUND`,e[e.FILE_NOT_MODIFIED_SINCE=2]=`FILE_NOT_MODIFIED_SINCE`,e[e.FILE_MODIFIED_SINCE=3]=`FILE_MODIFIED_SINCE`,e[e.FILE_MOVE_CONFLICT=4]=`FILE_MOVE_CONFLICT`,e[e.FILE_WRITE_LOCKED=5]=`FILE_WRITE_LOCKED`,e[e.FILE_PERMISSION_DENIED=6]=`FILE_PERMISSION_DENIED`,e[e.FILE_TOO_LARGE=7]=`FILE_TOO_LARGE`,e[e.FILE_INVALID_PATH=8]=`FILE_INVALID_PATH`,e[e.FILE_NOT_DIRECTORY=9]=`FILE_NOT_DIRECTORY`,e[e.FILE_OTHER_ERROR=10]=`FILE_OTHER_ERROR`})(Sb||={});var Cb={OFF:`off`,AFTER_DELAY:`afterDelay`,ON_FOCUS_CHANGE:`onFocusChange`,ON_WINDOW_CHANGE:`onWindowChange`},wb={OFF:`off`,ON_EXIT:`onExit`,ON_EXIT_AND_WINDOW_CLOSE:`onExitAndWindowClose`},Tb=`files.associations`,Eb=`files.exclude`,Db=`files.readonlyInclude`,Ob=`files.readonlyExclude`,kb=`files.readonlyFromPermissions`,Ab;(function(e){e[e.FILE=0]=`FILE`,e[e.FOLDER=1]=`FOLDER`,e[e.ROOT_FOLDER=2]=`ROOT_FOLDER`})(Ab||={});var jb=``;function Mb(e){if(!(typeof e.size!=`number`||typeof e.mtime!=`number`))return e.mtime.toString(29)+e.size.toString(31)}async function Nb(e,t){if(!t.hasProvider(k.from({scheme:e.scheme})))return new Promise(n=>{let r=t.onDidChangeFileSystemProviderRegistrations(t=>{t.scheme===e.scheme&&t.added&&(r.dispose(),n())})})}var Pb=class e{static#e=this.KB=1024;static#t=this.MB=e.KB*e.KB;static#n=this.GB=e.MB*e.KB;static#r=this.TB=e.GB*e.KB;static formatSize(t){return xe(t)||(t=0),t<e.KB?D(1941,`{0}B`,t.toFixed(0)):t<e.MB?D(1942,`{0}KB`,(t/e.KB).toFixed(2)):t<e.GB?D(1943,`{0}MB`,(t/e.MB).toFixed(2)):t<e.TB?D(1944,`{0}GB`,(t/e.GB).toFixed(2)):D(1945,`{0}TB`,(t/e.TB).toFixed(2))}};function Fb(e){let t=typeof e==`string`||e?.scheme===A.vscodeRemote;return typeof e!=`string`&&e?.scheme===A.file?1024*Pb.MB:t?10*Pb.MB:di?50*Pb.MB:1024*Pb.MB}var Ib=V(`fileService`),Lb=V(`logService`),Rb=V(`loggerService`);function zb(e){let t=e;return typeof t?.id==`string`&&k.isUri(t.uri)}function Bb(e){return typeof e?.id==`string`&&!zb(e)&&!Ub(e)}var Vb={id:`empty-window`};function Hb(e,t){if(typeof e==`string`||e===void 0)return typeof e==`string`?{id:pa(e)}:Vb;let n=e;return n.configuration?{id:n.id,configPath:n.configuration}:n.folders.length===1?{id:n.id,uri:n.folders[0].uri}:{id:n.id}}function Ub(e){let t=e;return typeof t?.id==`string`&&k.isUri(t.configPath)}var Wb;(function(e){e[e.EMPTY=1]=`EMPTY`,e[e.FOLDER=2]=`FOLDER`,e[e.WORKSPACE=3]=`WORKSPACE`})(Wb||={});function Gb(e){let t=e;return!!(t&&typeof t==`object`&&typeof t.id==`string`&&Array.isArray(t.folders))}function Kb(e){let t=e;return!!(t&&typeof t==`object`&&k.isUri(t.uri)&&typeof t.name==`string`&&typeof t.toResource==`function`)}var qb=class{get folders(){return this._folders}set folders(e){this._folders=e,this.updateFoldersMap()}constructor(e,t,n,r,i,a){this._id=e,this._transient=n,this._configuration=r,this.ignorePathCasing=i,this._isAgentSessionsWorkspace=a,this.foldersMap=Ky.forUris(this.ignorePathCasing,()=>!0),this.folders=t}update(e){this._id=e.id,this._configuration=e.configuration,this._transient=e.transient,this.ignorePathCasing=e.ignorePathCasing,this._isAgentSessionsWorkspace=e.isAgentSessionsWorkspace,this.folders=e.folders}get id(){return this._id}get transient(){return this._transient}get configuration(){return this._configuration}set configuration(e){this._configuration=e}get isAgentSessionsWorkspace(){return this._isAgentSessionsWorkspace}getFolder(e){return e&&this.foldersMap.findSubstr(e)||null}updateFoldersMap(){this.foldersMap=Ky.forUris(this.ignorePathCasing,()=>!0);for(let e of this.folders)this.foldersMap.set(e.uri,e)}toJSON(){return{id:this.id,folders:this.folders,transient:this.transient,configuration:this.configuration,isAgentSessionsWorkspace:this.isAgentSessionsWorkspace}}},Jb=class{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toResource(e){return Fs(this.uri,e)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}};function Yb(e){return new Jb({uri:e,index:0,name:js(e)},{uri:e.toString()})}var Xb=`code-workspace`,Zb=`.${Xb}`,Qb=[{name:D(2474,`Code Workspace`),extensions:[Xb]}],$b=`workspace.json`;function ex(e,t){return Ds.isEqualOrParent(e,t.untitledWorkspacesHome)}function tx(e){let t;return t=k.isUri(e)?e:e.configuration,t?.scheme===A.tmp}var nx=`4064f6ec-cb38-4ad0-af64-ee6467e63c82`;function rx(e){return e.id===nx}function ix(e,t){return!ex(e,t)&&!tx(e)}function ax(e){return(typeof e==`string`?ma(e):Ns(e))===Zb}var ox=V(`IUriIdentityService`),sx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function cx(e){return sx.test(e)}var lx=(function(){if(typeof crypto.randomUUID==`function`)return crypto.randomUUID.bind(crypto);let e=new Uint8Array(16),t=[];for(let e=0;e<256;e++)t.push(e.toString(16).padStart(2,`0`));return function(){crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let n=0,r=``;return r+=t[e[n++]],r+=t[e[n++]],r+=t[e[n++]],r+=t[e[n++]],r+=`-`,r+=t[e[n++]],r+=t[e[n++]],r+=`-`,r+=t[e[n++]],r+=t[e[n++]],r+=`-`,r+=t[e[n++]],r+=t[e[n++]],r+=`-`,r+=t[e[n++]],r+=t[e[n++]],r+=t[e[n++]],r+=t[e[n++]],r+=t[e[n++]],r+=t[e[n++]],r}})();function ux(e){return`${e}-${lx()}`}var dx;(function(e){e.Settings=`settings`,e.Keybindings=`keybindings`,e.Snippets=`snippets`,e.Prompts=`prompts`,e.Tasks=`tasks`,e.Extensions=`extensions`,e.GlobalState=`globalState`,e.Mcp=`mcp`})(dx||={});function fx(e){let t=e;return!!(t&&typeof t==`object`&&typeof t.id==`string`&&typeof t.isDefault==`boolean`&&typeof t.name==`string`&&k.isUri(t.location)&&k.isUri(t.globalStorageHome)&&k.isUri(t.settingsResource)&&k.isUri(t.keybindingsResource)&&k.isUri(t.tasksResource)&&k.isUri(t.snippetsHome)&&k.isUri(t.promptsHome)&&k.isUri(t.extensionsResource)&&k.isUri(t.mcpResource))}function px(e,t){return{id:e.id,isDefault:e.isDefault,name:e.name,icon:e.icon,location:k.revive(e.location).with({scheme:t}),globalStorageHome:k.revive(e.globalStorageHome).with({scheme:t}),settingsResource:k.revive(e.settingsResource).with({scheme:t}),keybindingsResource:k.revive(e.keybindingsResource).with({scheme:t}),tasksResource:k.revive(e.tasksResource).with({scheme:t}),snippetsHome:k.revive(e.snippetsHome).with({scheme:t}),promptsHome:k.revive(e.promptsHome).with({scheme:t}),extensionsResource:k.revive(e.extensionsResource).with({scheme:t}),mcpResource:k.revive(e.mcpResource).with({scheme:t}),cacheHome:k.revive(e.cacheHome).with({scheme:t}),useDefaultFlags:e.useDefaultFlags,isTransient:e.isTransient,workspaces:e.workspaces?.map(e=>k.revive(e))}}function mx(e,t,n,r,i,a){return{id:e,name:t,location:n,isDefault:!1,icon:i?.icon,globalStorageHome:a&&i?.useDefaultFlags?.globalState?a.globalStorageHome:Fs(n,`globalStorage`),settingsResource:a&&i?.useDefaultFlags?.settings?a.settingsResource:Fs(n,`settings.json`),keybindingsResource:a&&i?.useDefaultFlags?.keybindings?a.keybindingsResource:Fs(n,`keybindings.json`),tasksResource:a&&i?.useDefaultFlags?.tasks?a.tasksResource:Fs(n,`tasks.json`),snippetsHome:a&&i?.useDefaultFlags?.snippets?a.snippetsHome:Fs(n,`snippets`),promptsHome:a&&i?.useDefaultFlags?.prompts?a.promptsHome:Fs(n,`prompts`),extensionsResource:a&&i?.useDefaultFlags?.extensions?a.extensionsResource:Fs(n,`extensions.json`),mcpResource:a&&i?.useDefaultFlags?.mcp?a.mcpResource:Fs(n,`mcp.json`),cacheHome:Fs(r,e),useDefaultFlags:i?.useDefaultFlags,isTransient:i?.transient,workspaces:i?.workspaces}}var hx=class extends w{static#e=this.PROFILES_KEY=`userDataProfiles`;static#t=this.PROFILE_ASSOCIATIONS_KEY=`profileAssociations`;get defaultProfile(){return this.profiles[0]}get profiles(){return[...this.profilesObject.profiles,...this.transientProfilesObject.profiles]}constructor(e,t,n,r){super(),this.environmentService=e,this.fileService=t,this.uriIdentityService=n,this.logService=r,this._onDidChangeProfiles=this._register(new E),this.onDidChangeProfiles=this._onDidChangeProfiles.event,this._onWillCreateProfile=this._register(new E),this.onWillCreateProfile=this._onWillCreateProfile.event,this._onWillRemoveProfile=this._register(new E),this.onWillRemoveProfile=this._onWillRemoveProfile.event,this._onDidResetWorkspaces=this._register(new E),this.onDidResetWorkspaces=this._onDidResetWorkspaces.event,this.profileCreationPromises=new Map,this.transientProfilesObject={profiles:[],emptyWindows:new Map},this.profilesHome=Fs(this.environmentService.userRoamingDataHome,`profiles`),this.profilesCacheHome=Fs(this.environmentService.cacheHome,`CachedProfilesData`)}init(){this._profilesObject=void 0}get profilesObject(){if(!this._profilesObject){let e=this.createDefaultProfile(),t=[e];try{for(let n of this.getStoredProfiles()){if(this.isInvalidProfile(n)){this.logService.warn(`Skipping the invalid stored profile`,n.location||n.name);continue}let r=Ms(n.location);t.push(mx(r,n.name,n.location,this.profilesCacheHome,{icon:n.icon,useDefaultFlags:n.useDefaultFlags},e))}}catch(e){this.logService.error(e)}let n=new Map;if(t.length)try{let e=this.getStoredProfileAssociations();if(e.workspaces)for(let[n,r]of Object.entries(e.workspaces)){let e=k.parse(n),i=t.find(e=>e.id===r);if(i){let t=i.workspaces?i.workspaces.slice(0):[];t.push(e),i.workspaces=t}}if(e.emptyWindows)for(let[r,i]of Object.entries(e.emptyWindows)){let e=t.find(e=>e.id===i);e&&n.set(r,e)}}catch(e){this.logService.error(e)}this._profilesObject={profiles:t,emptyWindows:n}}return this._profilesObject}isInvalidProfile(e){return!!(!e.name||!ge(e.name)||!e.location||e.isSystem||this.uriIdentityService.extUri.basename(this.uriIdentityService.extUri.dirname(e.location))===`builtin`)}createDefaultProfile(){let e=mx(`__default__profile__`,D(2456,`Default`),this.environmentService.userRoamingDataHome,this.profilesCacheHome);return{...e,extensionsResource:this.getDefaultProfileExtensionsLocation()??e.extensionsResource,isDefault:!0}}async createTransientProfile(e){let t=`Temp`,n=RegExp(`${Na(t)}\\s(\\d+)`),r=0;for(let e of this.profiles){let t=n.exec(e.name),i=t?parseInt(t[1]):0;r=i>r?i:r}let i=`${t} ${r+1}`;return this.createProfile(hm(lx()).toString(16),i,{transient:!0},e)}async createNamedProfile(e,t,n){return this.createProfile(hm(lx()).toString(16),e,t,n)}async createProfile(e,t,n,r){return await this.doCreateProfile(e,t,n,r)}async doCreateProfile(e,t,n,r){if(!ge(t)||!t)throw Error("Name of the profile is mandatory and must be of type `string`");let i=this.profileCreationPromises.get(t);return i||(i=(async()=>{try{if(this.profiles.find(r=>r.id===e||!r.isTransient&&!n?.transient&&r.name===t))throw Error(`Profile with ${t} name already exists`);let i=r?this.getWorkspace(r):void 0;k.isUri(i)&&(n={...n,workspaces:[i]});let a=mx(e,t,this.uriIdentityService.extUri.joinPath(this.profilesHome,e),this.profilesCacheHome,n,this.defaultProfile);await this.fileService.createFolder(a.location);let o=[];return this._onWillCreateProfile.fire({profile:a,join(e){o.push(e)}}),await Ac.settled(o),i&&!k.isUri(i)&&this.updateEmptyWindowAssociation(i,a,!!a.isTransient),this.updateProfiles([a],[],[]),a}finally{this.profileCreationPromises.delete(t)}})(),this.profileCreationPromises.set(t,i)),i}async updateProfile(e,t){let n=[];for(let r of this.profiles){let i;if(e.id===r.id)r.isDefault?t.workspaces&&(i=r,i.workspaces=t.workspaces):i=mx(r.id,t.name??r.name,r.location,this.profilesCacheHome,{icon:t.icon===null?void 0:t.icon??r.icon,transient:t.transient??r.isTransient,useDefaultFlags:t.useDefaultFlags??r.useDefaultFlags,workspaces:t.workspaces??r.workspaces},this.defaultProfile);else if(t.workspaces){let e=r.workspaces?.filter(e=>!t.workspaces?.some(t=>this.uriIdentityService.extUri.isEqual(e,t)));r.workspaces?.length!==e?.length&&(i=r,i.workspaces=e)}i&&n.push(i)}if(!n.length)throw e.isDefault?Error(`Cannot update default profile`):Error(`Profile '${e.name}' does not exist`);this.updateProfiles([],[],n);let r=this.profiles.find(t=>t.id===e.id);if(!r)throw Error(`Profile '${e.name}' was not updated`);return r}async removeProfile(e){if(e.isDefault)throw Error(`Cannot remove default profile`);let t=this.profiles.find(t=>t.id===e.id);if(!t)throw Error(`Profile '${e.name}' does not exist`);let n=[];this._onWillRemoveProfile.fire({profile:t,join(e){n.push(e)}});try{await Promise.allSettled(n)}catch(e){this.logService.error(e)}this.updateProfiles([],[t],[]);try{await this.fileService.del(t.cacheHome,{recursive:!0})}catch(e){mb(e)!==Sb.FILE_NOT_FOUND&&this.logService.error(e)}}async setProfileForWorkspace(e,t){let n=this.profiles.find(e=>e.id===t.id);if(!n)throw Error(`Profile '${t.name}' does not exist`);let r=this.getWorkspace(e);if(k.isUri(r)){let e=n.workspaces?[...n.workspaces]:[];e.some(e=>this.uriIdentityService.extUri.isEqual(e,r))||(e.push(r),await this.updateProfile(n,{workspaces:e}))}else this.updateEmptyWindowAssociation(r,n,!1),this.updateStoredProfiles(this.profiles)}unsetWorkspace(e,t=!1){let n=this.getWorkspace(e);if(k.isUri(n)){let t=this.getProfileForWorkspace(e);t&&this.updateProfile(t,{workspaces:t.workspaces?.filter(e=>!this.uriIdentityService.extUri.isEqual(e,n))})}else this.updateEmptyWindowAssociation(n,void 0,t),this.updateStoredProfiles(this.profiles)}async resetWorkspaces(){this.transientProfilesObject.emptyWindows.clear(),this.profilesObject.emptyWindows.clear();for(let e of this.profiles)e.workspaces=void 0;this.updateProfiles([],[],this.profiles),this._onDidResetWorkspaces.fire()}async cleanUp(){try{if(await this.fileService.exists(this.profilesHome)){let e=this.uriIdentityService.extUri.joinPath(this.profilesHome,`builtin`);if(await this.fileService.exists(e))try{await this.fileService.del(e,{recursive:!0})}catch(e){this.logService.error(e)}let t=await this.fileService.resolve(this.profilesHome);await Promise.all((t.children||[]).filter(e=>e.isDirectory&&this.profiles.every(t=>!this.uriIdentityService.extUri.isEqual(t.location,e.resource))).map(e=>this.fileService.del(e.resource,{recursive:!0})))}}catch(e){this.logService.error(`Error deleting redundant profile folders`,e)}try{let e=this.getStoredProfiles(),t=[];for(let e of this.getStoredProfiles())this.isInvalidProfile(e)?this.logService.warn(`Invalid user data profile found: ${e.name}`):t.push(e);e.length!==t.length&&this.saveStoredProfiles(t)}catch(e){this.logService.error(`Error removing invalid stored profiles`,e)}}async cleanUpTransientProfiles(){let e=this.transientProfilesObject.profiles.filter(e=>!this.isProfileAssociatedToWorkspace(e));await Promise.allSettled(e.map(e=>this.removeProfile(e)))}getProfileForWorkspace(e){let t=this.getWorkspace(e);return k.isUri(t)?this.profiles.find(e=>e.workspaces?.some(e=>this.uriIdentityService.extUri.isEqual(e,t))):this.profilesObject.emptyWindows.get(t)??this.transientProfilesObject.emptyWindows.get(t)}getWorkspace(e){return zb(e)?e.uri:Ub(e)?e.configPath:e.id}isProfileAssociatedToWorkspace(e){return!!(e.workspaces?.length||[...this.profilesObject.emptyWindows.values()].some(t=>this.uriIdentityService.extUri.isEqual(t.location,e.location))||[...this.transientProfilesObject.emptyWindows.values()].some(t=>this.uriIdentityService.extUri.isEqual(t.location,e.location)))}updateProfiles(e,t,n,r=!1){let i=[...this.profiles,...e],a=this.transientProfilesObject.profiles;this.transientProfilesObject.profiles=[];let o=[];for(let e of i){if(t.some(t=>e.id===t.id)){for(let t of[...this.profilesObject.emptyWindows.keys()])e.id===this.profilesObject.emptyWindows.get(t)?.id&&this.profilesObject.emptyWindows.delete(t);continue}if(!e.isDefault){e=n.find(t=>e.id===t.id)??e;let t=a.find(t=>e.id===t.id);if(e.isTransient)this.transientProfilesObject.profiles.push(e);else if(t){for(let[t,n]of this.transientProfilesObject.emptyWindows.entries())if(e.id===n.id){this.transientProfilesObject.emptyWindows.delete(t),this.profilesObject.emptyWindows.set(t,e);break}}}e.workspaces?.length===0&&(e.workspaces=void 0),o.push(e)}this.updateStoredProfiles(o),r||this.triggerProfilesChanges(e,t,n)}triggerProfilesChanges(e,t,n){this._onDidChangeProfiles.fire({added:e,removed:t,updated:n,all:this.profiles})}updateEmptyWindowAssociation(e,t,n){n=t?.isTransient?!0:n,n?t?this.transientProfilesObject.emptyWindows.set(e,t):this.transientProfilesObject.emptyWindows.delete(e):(this.transientProfilesObject.emptyWindows.delete(e),t?this.profilesObject.emptyWindows.set(e,t):this.profilesObject.emptyWindows.delete(e))}updateStoredProfiles(e){let t=[],n={},r={};for(let r of e)if(!r.isTransient&&(r.isDefault||t.push({location:r.location,name:r.name,icon:r.icon,useDefaultFlags:r.useDefaultFlags}),r.workspaces))for(let e of r.workspaces)n[e.toString()]=r.id;for(let[e,t]of this.profilesObject.emptyWindows.entries())r[e.toString()]=t.id;this.saveStoredProfileAssociations({workspaces:n,emptyWindows:r}),this.saveStoredProfiles(t),this._profilesObject=void 0}getStoredProfiles(){return[]}saveStoredProfiles(e){throw Error(`not implemented`)}getStoredProfileAssociations(){return{}}saveStoredProfileAssociations(e){throw Error(`not implemented`)}getDefaultProfileExtensionsLocation(){}};hx=t([n(0,Ly),n(1,Ib),n(2,ox),n(3,Lb)],hx);var gx=`__$__isNewStorageMarker`,_x=`__$__targetStorageMarker`,vx;(function(e){e[e.NONE=0]=`NONE`,e[e.SHUTDOWN=1]=`SHUTDOWN`})(vx||={});var yx;(function(e){e[e.APPLICATION=-1]=`APPLICATION`,e[e.PROFILE=0]=`PROFILE`,e[e.WORKSPACE=1]=`WORKSPACE`})(yx||={});var bx;(function(e){e[e.USER=0]=`USER`,e[e.MACHINE=1]=`MACHINE`})(bx||={});function xx(e){let t=e.get(_x);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}var Sx=class e extends w{static#e=this.DEFAULT_FLUSH_INTERVAL=60*1e3;constructor(t={flushInterval:e.DEFAULT_FLUSH_INTERVAL}){super(),this._onDidChangeValue=this._register(new ir),this._onDidChangeTarget=this._register(new ir),this.onDidChangeTarget=this._onDidChangeTarget.event,this._onWillSaveState=this._register(new E),this.onWillSaveState=this._onWillSaveState.event,this.runFlushWhenIdle=this._register(new Ln),this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0,this.flushWhenIdleScheduler=this._register(new bc(()=>this.doFlushWhenIdle(),t.flushInterval))}onDidChangeValue(e,t,n){return T.filter(this._onDidChangeValue.event,n=>n.scope===e&&(t===void 0||n.key===t),n)}doFlushWhenIdle(){this.runFlushWhenIdle.value=Sc(()=>{this.shouldFlushWhenIdle()&&this.flush(),this.flushWhenIdleScheduler.schedule()})}shouldFlushWhenIdle(){return!0}stopFlushWhenIdle(){Nn([this.runFlushWhenIdle,this.flushWhenIdleScheduler])}initialize(){return this.initializationPromise||=(async()=>{kv(`code/willInitStorage`);try{await this.doInitialize()}finally{kv(`code/didInitStorage`)}this.flushWhenIdleScheduler.schedule()})(),this.initializationPromise}emitDidChangeValue(e,t){let{key:n,external:r}=t;if(n===`__$__targetStorageMarker`){switch(e){case yx.APPLICATION:this._applicationKeyTargets=void 0;break;case yx.PROFILE:this._profileKeyTargets=void 0;break;case yx.WORKSPACE:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:n,target:this.getKeyTargets(e)[n],external:r})}emitWillSaveState(e){this._onWillSaveState.fire({reason:e})}get(e,t,n){return this.getStorage(t)?.get(e,n)}getBoolean(e,t,n){return this.getStorage(t)?.getBoolean(e,n)}getNumber(e,t,n){return this.getStorage(t)?.getNumber(e,n)}getObject(e,t,n){return this.getStorage(t)?.getObject(e,n)}storeAll(e,t){this.withPausedEmitters(()=>{for(let n of e)this.store(n.key,n.value,n.scope,n.target,t)})}store(e,t,n,r,i=!1){if(Ee(t)){this.remove(e,n,i);return}this.withPausedEmitters(()=>{this.updateKeyTarget(e,n,r),this.getStorage(n)?.set(e,t,i)})}remove(e,t,n=!1){this.withPausedEmitters(()=>{this.updateKeyTarget(e,t,void 0),this.getStorage(t)?.delete(e,n)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}keys(e,t){let n=[],r=this.getKeyTargets(e);for(let e of Object.keys(r))r[e]===t&&n.push(e);return n}updateKeyTarget(e,t,n,r=!1){let i=this.getKeyTargets(t);typeof n==`number`?i[e]!==n&&(i[e]=n,this.getStorage(t)?.set(_x,JSON.stringify(i),r)):typeof i[e]==`number`&&(delete i[e],this.getStorage(t)?.set(_x,JSON.stringify(i),r))}get workspaceKeyTargets(){return this._workspaceKeyTargets||=this.loadKeyTargets(yx.WORKSPACE),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||=this.loadKeyTargets(yx.PROFILE),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||=this.loadKeyTargets(yx.APPLICATION),this._applicationKeyTargets}getKeyTargets(e){switch(e){case yx.APPLICATION:return this.applicationKeyTargets;case yx.PROFILE:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){let t=this.getStorage(e);return t?xx(t):Object.create(null)}isNew(e){return this.getBoolean(gx,e)===!0}async flush(e=vx.NONE){this._onWillSaveState.fire({reason:e});let t=this.getStorage(yx.APPLICATION),n=this.getStorage(yx.PROFILE),r=this.getStorage(yx.WORKSPACE);switch(e){case vx.NONE:await Ac.settled([t?.whenFlushed()??Promise.resolve(),n?.whenFlushed()??Promise.resolve(),r?.whenFlushed()??Promise.resolve()]);break;case vx.SHUTDOWN:await Ac.settled([t?.flush(0)??Promise.resolve(),n?.flush(0)??Promise.resolve(),r?.flush(0)??Promise.resolve()]);break}}async log(){return Tx(this.getStorage(yx.APPLICATION)?.items??new Map,this.getStorage(yx.PROFILE)?.items??new Map,this.getStorage(yx.WORKSPACE)?.items??new Map,this.getLogDetails(yx.APPLICATION)??``,this.getLogDetails(yx.PROFILE)??``,this.getLogDetails(yx.WORKSPACE)??``)}async optimize(e){return await this.flush(),this.getStorage(e)?.optimize()}async switch(e,t){return this.emitWillSaveState(vx.NONE),fx(e)?this.switchToProfile(e,t):this.switchToWorkspace(e,t)}canSwitchProfile(e,t){return!(e.id===t.id||Cx(t)&&Cx(e))}switchData(e,t,n){this.withPausedEmitters(()=>{let r=new Set;for(let[i,a]of e)r.add(i),t.get(i)!==a&&this.emitDidChangeValue(n,{key:i,external:!0});for(let[e]of t.items)r.has(e)||this.emitDidChangeValue(n,{key:e,external:!0})})}};function Cx(e){return e.isDefault||!!e.useDefaultFlags?.globalState}var wx=class extends Sx{constructor(){super(),this.applicationStorage=this._register(new Fy(new Iy,{hint:My.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new Fy(new Iy,{hint:My.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new Fy(new Iy,{hint:My.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(yx.WORKSPACE,e))),this._register(this.profileStorage.onDidChangeStorage(e=>this.emitDidChangeValue(yx.PROFILE,e))),this._register(this.applicationStorage.onDidChangeStorage(e=>this.emitDidChangeValue(yx.APPLICATION,e)))}getStorage(e){switch(e){case yx.APPLICATION:return this.applicationStorage;case yx.PROFILE:return this.profileStorage;default:return this.workspaceStorage}}getLogDetails(e){switch(e){case yx.APPLICATION:return`inMemory (application)`;case yx.PROFILE:return`inMemory (profile)`;default:return`inMemory (workspace)`}}async doInitialize(){}async switchToProfile(){}async switchToWorkspace(){}shouldFlushWhenIdle(){return!1}hasScope(e){return!1}};async function Tx(e,t,n,r,i,a){let o=e=>{try{return JSON.parse(e)}catch{return e}},s=new Map,c=new Map;e.forEach((e,t)=>{s.set(t,e),c.set(t,o(e))});let l=new Map,u=new Map;t.forEach((e,t)=>{l.set(t,e),u.set(t,o(e))});let d=new Map,f=new Map;n.forEach((e,t)=>{d.set(t,e),f.set(t,o(e))}),r===i?console.group(`Storage: Application & Profile (path: ${r}, default profile)`):console.group(`Storage: Application (path: ${r})`);let p=[];if(s.forEach((e,t)=>{p.push({key:t,value:e})}),console.table(p),console.groupEnd(),console.log(c),r!==i){console.group(`Storage: Profile (path: ${i}, profile specific)`);let e=[];l.forEach((t,n)=>{e.push({key:n,value:t})}),console.table(e),console.groupEnd(),console.log(u)}console.group(`Storage: Workspace (path: ${a})`);let m=[];d.forEach((e,t)=>{m.push({key:t,value:e})}),console.table(m),console.groupEnd(),console.log(f)}var Ex=V(`storageService`),Dx=V(`configurationService`),Ox;(function(e){e[e.Default=1]=`Default`,e[e.Last=2]=`Last`})(Ox||={});var kx;(function(e){e[e.CLOSE=1]=`CLOSE`,e[e.QUIT=2]=`QUIT`,e[e.RELOAD=3]=`RELOAD`,e[e.LOAD=4]=`LOAD`})(kx||={});var Ax;(function(e){e[e.NewWindow=1]=`NewWindow`,e[e.ReloadedWindow=3]=`ReloadedWindow`,e[e.ReopenedWindow=4]=`ReopenedWindow`})(Ax||={});var jx;(function(e){e[e.Starting=1]=`Starting`,e[e.Ready=2]=`Ready`,e[e.Restored=3]=`Restored`,e[e.Eventually=4]=`Eventually`})(jx||={});function Mx(e){switch(e){case jx.Starting:return`Starting`;case jx.Ready:return`Ready`;case jx.Restored:return`Restored`;case jx.Eventually:return`Eventually`}}var Nx=V(`lifecycleService`),Px=V(`notificationService`),Fx=V(`themeService`),Ix;(function(e){e[e.Ignore=0]=`Ignore`,e[e.Info=1]=`Info`,e[e.Warning=2]=`Warning`,e[e.Error=3]=`Error`})(Ix||={}),(function(e){let t=`error`,n=`warning`,r=`info`;function i(i){return i?eo(t,i)?e.Error:eo(n,i)||eo(`warn`,i)?e.Warning:eo(r,i)?e.Info:e.Ignore:e.Ignore}e.fromValue=i;function a(i){switch(i){case e.Error:return t;case e.Warning:return n;case e.Info:return r;default:return`ignore`}}e.toString=a})(Ix||={});var Lx=Ix,Rx;(function(e){e[e.DEFAULT=0]=`DEFAULT`,e[e.OPTIONAL=1]=`OPTIONAL`,e[e.SILENT=2]=`SILENT`,e[e.URGENT=3]=`URGENT`})(Rx||={});var zx;(function(e){e[e.WORKSPACE=0]=`WORKSPACE`,e[e.PROFILE=1]=`PROFILE`,e[e.APPLICATION=2]=`APPLICATION`})(zx||={});function Bx(e){if(e){let t=e;return typeof t.id==`string`&&typeof t.label==`string`}return!1}var Vx;(function(e){e[e.OFF=0]=`OFF`,e[e.ERROR=1]=`ERROR`})(Vx||={});var Hx=class{constructor(){this.progress=new Ux,this.onDidClose=T.None,this.onDidChangeVisibility=T.None}updateSeverity(e){}updateMessage(e){}updateActions(e){}close(){}},Ux=class{infinite(){}done(){}total(e){}worked(e){}};function Wx(e,t){return t===Lx.Error?D(2006,`Error: {0}`,e):t===Lx.Warning?D(2007,`Warning: {0}`,e):D(2008,`Info: {0}`,e)}function Gx(e,t){return t&&(e.stack||e.stacktrace)?D(110,`{0}: {1}`,qx(e),Kx(e.stack)||Kx(e.stacktrace)):qx(e)}function Kx(e){return Array.isArray(e)?e.join(`
`):e}function qx(e){return e.code===`ERR_UNC_HOST_NOT_ALLOWED`?`${e.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof e.code==`string`&&typeof e.errno==`number`&&typeof e.syscall==`string`?D(111,`A system error occurred ({0})`,e.message):e.message||D(112,`An unknown error occurred. Please consult the log for more details.`)}function Jx(e=null,t=!1){if(!e)return D(112,`An unknown error occurred. Please consult the log for more details.`);if(Array.isArray(e)){let n=wt(e),r=Jx(n[0],t);return n.length>1?D(113,`{0} ({1} errors in total)`,r,n.length):r}if(ge(e))return e;if(e.detail){let n=e.detail;if(n.error)return Gx(n.error,t);if(n.exception)return Gx(n.exception,t)}return e.stack?Gx(e,t):e.message?e.message:D(112,`An unknown error occurred. Please consult the log for more details.`)}function Yx(e){let t=e;return t instanceof Error&&Array.isArray(t.actions)}function Xx(e,t){let n;return n=typeof e==`string`?Error(e):e,n.actions=t,n}var Zx=class extends w{get onDidChange(){return this._onDidChange.event}constructor(e,t=``,n=``,r=!0,i){super(),this._onDidChange=this._register(new E),this._enabled=!0,this._id=e,this._label=t,this._cssClass=n,this._enabled=r,this._actionCallback=i}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||``}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}async run(e,t){this._actionCallback&&await this._actionCallback(e)}},Qx=class extends w{constructor(){super(...arguments),this._onWillRun=this._register(new E),this._onDidRun=this._register(new E)}get onWillRun(){return this._onWillRun.event}get onDidRun(){return this._onDidRun.event}async run(e,t){if(!e.enabled)return;this._onWillRun.fire({action:e});let n;try{await this.runAction(e,t)}catch(e){n=e}this._onDidRun.fire({action:e,error:n})}async runAction(e,t){await e.run(t)}},$x=class e{constructor(){this.id=e.ID,this.label=``,this.tooltip=``,this.class=`separator`,this.enabled=!1,this.checked=void 0}static join(...t){let n=[];for(let r of t)r.length&&(n=n.length?[...n,new e,...r]:r);return n}static#e=this.ID=`vs.actions.separator`;async run(){}},eS=class{get actions(){return this._actions}constructor(e,t,n,r){this.tooltip=``,this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=r,this._actions=n}async run(){}},tS=class e extends Zx{static#e=this.ID=`vs.actions.empty`;constructor(){super(e.ID,D(45,`(empty)`),void 0,!1)}};function nS(e){return{id:e.id,label:e.label,tooltip:e.tooltip??e.label,class:e.class,enabled:e.enabled??!0,checked:e.checked,run:async(...t)=>e.run(...t)}}function rS(e){return(t,n,r)=>{let i=null,a=null;if(typeof r.value==`function`?(i=`value`,a=r.value):typeof r.get==`function`&&(i=`get`,a=r.get),!a||typeof n==`symbol`)throw Error(`not supported`);r[i]=e(a,n)}}function iS(e,t,n){let r=null,i=null;if(typeof n.value==`function`?(r=`value`,i=n.value,i.length!==0&&console.warn(`Memoize should only be used in functions with zero parameters`)):typeof n.get==`function`&&(r=`get`,i=n.get),!i)throw Error(`not supported`);let a=`$memoize$${t}`;n[r]=function(...e){return this.hasOwnProperty(a)||Object.defineProperty(this,a,{configurable:!1,enumerable:!1,writable:!1,value:i.apply(this,e)}),this[a]}}function aS(e,t,n){return rS((t,n)=>{let r=`$debounce$${n}`,i=`$debounce$result$${n}`;return function(...n){this[i]||(this[i]=void 0),clearTimeout(this[r]),this[r]=setTimeout(()=>{t.apply(this,n),this[i]=void 0},e)}})}function oS(e,t,n){return rS((r,i)=>{let a=`$throttle$timer$${i}`,o=`$throttle$result$${i}`,s=`$throttle$lastRun$${i}`,c=`$throttle$pending$${i}`;return function(...i){if(this[o]||(this[o]=n?n():void 0),(this[s]===null||this[s]===void 0)&&(this[s]=-Number.MAX_VALUE),t&&(this[o]=t(this[o],...i)),this[c])return;let l=this[s]+e;l<=Date.now()?(this[s]=Date.now(),r.apply(this,[this[o]]),this[o]=n?n():void 0):(this[c]=!0,this[a]=setTimeout(()=>{this[c]=!1,this[s]=Date.now(),r.apply(this,[this[o]]),this[o]=n?n():void 0},l-Date.now()))}})}var sS=class{constructor(e){this.nodes=e}toString(){return this.nodes.map(e=>typeof e==`string`?e:e.label).join(``)}};sS.__decorator=t([iS],sS.prototype,`toString`,null);var cS=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;function lS(e){let t=[],n=0,r;for(;r=cS.exec(e);){r.index-n>0&&t.push(e.substring(n,r.index));let[,i,a,,o]=r;o?t.push({label:i,href:a,title:o}):t.push({label:i,href:a}),n=r.index+r[0].length}return n<e.length&&t.push(e.substring(n)),new sS(t)}var uS=V(`contextKeyService`),dS=V(`commandService`),fS=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new E,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(e,t){if(!e)throw Error(`invalid command`);if(typeof e==`string`){if(!t)throw Error(`invalid command`);return this.registerCommand({id:e,handler:t})}if(e.metadata&&Array.isArray(e.metadata.args)){let t=[];for(let n of e.metadata.args)t.push(n.constraint);let n=e.handler;e.handler=function(e,...r){return Pe(r,t),n(e,...r)}}let{id:n}=e,r=this._commands.get(n);r||(r=new Kn,this._commands.set(n,r));let i=r.unshift(e),a=S(()=>{i(),this._commands.get(n)?.isEmpty()&&this._commands.delete(n)});return this._onDidRegisterCommand.fire(n),jn(a)}registerCommandAlias(e,t){return fS.registerCommand(e,(e,...n)=>e.get(dS).executeCommand(t,...n))}getCommand(e){let t=this._commands.get(e);if(!(!t||t.isEmpty()))return Cn.first(t)}getCommands(){let e=new Map;for(let t of this._commands.keys()){let n=this.getCommand(t);n&&e.set(t,n)}return e}};fS.registerCommand(`noop`,()=>{});var U;(function(e){e[e.LParen=0]=`LParen`,e[e.RParen=1]=`RParen`,e[e.Neg=2]=`Neg`,e[e.Eq=3]=`Eq`,e[e.NotEq=4]=`NotEq`,e[e.Lt=5]=`Lt`,e[e.LtEq=6]=`LtEq`,e[e.Gt=7]=`Gt`,e[e.GtEq=8]=`GtEq`,e[e.RegexOp=9]=`RegexOp`,e[e.RegexStr=10]=`RegexStr`,e[e.True=11]=`True`,e[e.False=12]=`False`,e[e.In=13]=`In`,e[e.Not=14]=`Not`,e[e.And=15]=`And`,e[e.Or=16]=`Or`,e[e.Str=17]=`Str`,e[e.QuotedStr=18]=`QuotedStr`,e[e.Error=19]=`Error`,e[e.EOF=20]=`EOF`})(U||={});function pS(...e){switch(e.length){case 1:return D(1796,`Did you mean {0}?`,e[0]);case 2:return D(1797,`Did you mean {0} or {1}?`,e[0],e[1]);case 3:return D(1798,`Did you mean {0}, {1} or {2}?`,e[0],e[1],e[2]);default:return}}var mS=D(1799,`Did you forget to open or close the quote?`),hS=D(1800,`Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'.`),gS=class e{constructor(){this._input=``,this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(e){switch(e.type){case U.LParen:return`(`;case U.RParen:return`)`;case U.Neg:return`!`;case U.Eq:return e.isTripleEq?`===`:`==`;case U.NotEq:return e.isTripleEq?`!==`:`!=`;case U.Lt:return`<`;case U.LtEq:return`<=`;case U.Gt:return`>=`;case U.GtEq:return`>=`;case U.RegexOp:return`=~`;case U.RegexStr:return e.lexeme;case U.True:return`true`;case U.False:return`false`;case U.In:return`in`;case U.Not:return`not`;case U.And:return`&&`;case U.Or:return`||`;case U.Str:return e.lexeme;case U.QuotedStr:return e.lexeme;case U.Error:return e.lexeme;case U.EOF:return`EOF`;default:throw ie(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}static#e=this._regexFlags=new Set([`i`,`g`,`s`,`m`,`y`,`u`].map(e=>e.charCodeAt(0)));static#t=this._keywords=new Map([[`not`,U.Not],[`in`,U.In],[`false`,U.False],[`true`,U.True]]);get errors(){return this._errors}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case O.OpenParen:this._addToken(U.LParen);break;case O.CloseParen:this._addToken(U.RParen);break;case O.ExclamationMark:if(this._match(O.Equals)){let e=this._match(O.Equals);this._tokens.push({type:U.NotEq,offset:this._start,isTripleEq:e})}else this._addToken(U.Neg);break;case O.SingleQuote:this._quotedString();break;case O.Slash:this._regex();break;case O.Equals:if(this._match(O.Equals)){let e=this._match(O.Equals);this._tokens.push({type:U.Eq,offset:this._start,isTripleEq:e})}else this._match(O.Tilde)?this._addToken(U.RegexOp):this._error(pS(`==`,`=~`));break;case O.LessThan:this._addToken(this._match(O.Equals)?U.LtEq:U.Lt);break;case O.GreaterThan:this._addToken(this._match(O.Equals)?U.GtEq:U.Gt);break;case O.Ampersand:this._match(O.Ampersand)?this._addToken(U.And):this._error(pS(`&&`));break;case O.Pipe:this._match(O.Pipe)?this._addToken(U.Or):this._error(pS(`||`));break;case O.Space:case O.CarriageReturn:case O.Tab:case O.LineFeed:case O.NoBreakSpace:break;default:this._string()}return this._start=this._current,this._addToken(U.EOF),Array.from(this._tokens)}_match(e){return this._isAtEnd()||this._input.charCodeAt(this._current)!==e?!1:(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?O.Null:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){let t=this._start,n=this._input.substring(this._start,this._current),r={type:U.Error,offset:this._start,lexeme:n};this._errors.push({offset:t,lexeme:n,additionalInfo:e}),this._tokens.push(r)}_string(){this.stringRe.lastIndex=this._start;let t=this.stringRe.exec(this._input);if(t){this._current=this._start+t[0].length;let n=this._input.substring(this._start,this._current),r=e._keywords.get(n);r?this._addToken(r):this._tokens.push({type:U.Str,lexeme:n,offset:this._start})}}_quotedString(){for(;this._peek()!==O.SingleQuote&&!this._isAtEnd();)this._advance();if(this._isAtEnd()){this._error(mS);return}this._advance(),this._tokens.push({type:U.QuotedStr,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let t=this._current,n=!1,r=!1;for(;;){if(t>=this._input.length){this._current=t,this._error(hS);return}let e=this._input.charCodeAt(t);if(n)n=!1;else if(e===O.Slash&&!r){t++;break}else e===O.OpenSquareBracket?r=!0:e===O.Backslash?n=!0:e===O.CloseSquareBracket&&(r=!1);t++}for(;t<this._input.length&&e._regexFlags.has(this._input.charCodeAt(t));)t++;this._current=t;let i=this._input.substring(this._start,this._current);this._tokens.push({type:U.RegexStr,lexeme:i,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}},_S=new Map;_S.set(`false`,!1),_S.set(`true`,!0),_S.set(`isMac`,si),_S.set(`isLinux`,ci),_S.set(`isWindows`,oi),_S.set(`isWeb`,di),_S.set(`isMacNative`,si&&!di),_S.set(`isEdge`,Ni),_S.set(`isFirefox`,ji),_S.set(`isChrome`,Ai),_S.set(`isSafari`,Mi);function vS(e,t){if(_S.get(e)!==void 0)throw re("contextkey.setConstant(k, v) invoked with already set constant `k`");_S.set(e,t)}var yS=Object.prototype.hasOwnProperty,bS;(function(e){e[e.False=0]=`False`,e[e.True=1]=`True`,e[e.Defined=2]=`Defined`,e[e.Not=3]=`Not`,e[e.Equals=4]=`Equals`,e[e.NotEquals=5]=`NotEquals`,e[e.And=6]=`And`,e[e.Regex=7]=`Regex`,e[e.NotRegex=8]=`NotRegex`,e[e.Or=9]=`Or`,e[e.In=10]=`In`,e[e.NotIn=11]=`NotIn`,e[e.Greater=12]=`Greater`,e[e.GreaterEquals=13]=`GreaterEquals`,e[e.Smaller=14]=`Smaller`,e[e.SmallerEquals=15]=`SmallerEquals`})(bS||={});var xS={regexParsingWithErrorRecovery:!0},SS=D(1776,`Empty context key expression`),CS=D(1777,`Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively.`),wS=D(1778,`'in' after 'not'.`),TS=D(1779,`closing parenthesis ')'`),ES=D(1780,`Unexpected token`),DS=D(1781,`Did you forget to put && or || before the token?`),OS=D(1782,`Unexpected end of expression`),kS=D(1783,`Did you forget to put a context key?`),AS=class e{static#e=this._parseError=Error();get lexingErrors(){return this._scanner.errors}get parsingErrors(){return this._parsingErrors}constructor(e=xS){this._config=e,this._scanner=new gS,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(t){if(t===``){this._parsingErrors.push({message:SS,offset:0,lexeme:``,additionalInfo:CS});return}this._tokens=this._scanner.reset(t).scan(),this._current=0,this._parsingErrors=[];try{let t=this._expr();if(!this._isAtEnd()){let t=this._peek(),n=t.type===U.Str?DS:void 0;throw this._parsingErrors.push({message:ES,offset:t.offset,lexeme:gS.getLexeme(t),additionalInfo:n}),e._parseError}return t}catch(t){if(t!==e._parseError)throw t;return}}_expr(){return this._or()}_or(){let e=[this._and()];for(;this._matchOne(U.Or);){let t=this._and();e.push(t)}return e.length===1?e[0]:jS.or(...e)}_and(){let e=[this._term()];for(;this._matchOne(U.And);){let t=this._term();e.push(t)}return e.length===1?e[0]:jS.and(...e)}_term(){if(this._matchOne(U.Neg)){let e=this._peek();switch(e.type){case U.True:return this._advance(),FS.INSTANCE;case U.False:return this._advance(),IS.INSTANCE;case U.LParen:{this._advance();let e=this._expr();return this._consume(U.RParen,TS),e?.negate()}case U.Str:return this._advance(),HS.create(e.lexeme);default:throw this._errExpectedButGot(`KEY | true | false | '(' expression ')'`,e)}}return this._primary()}_primary(){let t=this._peek();switch(t.type){case U.True:return this._advance(),jS.true();case U.False:return this._advance(),jS.false();case U.LParen:{this._advance();let e=this._expr();return this._consume(U.RParen,TS),e}case U.Str:{let e=t.lexeme;if(this._advance(),this._matchOne(U.RegexOp)){let t=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),t.type!==U.RegexStr)throw this._errExpectedButGot(`REGEX`,t);let n=t.lexeme,r=n.lastIndexOf(`/`),i=r===n.length-1?void 0:this._removeFlagsGY(n.substring(r+1)),a;try{a=new RegExp(n.substring(1,r),i)}catch{throw this._errExpectedButGot(`REGEX`,t)}return JS.create(e,a)}switch(t.type){case U.RegexStr:case U.Error:{let n=[t.lexeme];this._advance();let r=this._peek(),i=0;for(let e=0;e<t.lexeme.length;e++)t.lexeme.charCodeAt(e)===O.OpenParen?i++:t.lexeme.charCodeAt(e)===O.CloseParen&&i--;for(;!this._isAtEnd()&&r.type!==U.And&&r.type!==U.Or;){switch(r.type){case U.LParen:i++;break;case U.RParen:i--;break;case U.RegexStr:case U.QuotedStr:for(let e=0;e<r.lexeme.length;e++)r.lexeme.charCodeAt(e)===O.OpenParen?i++:t.lexeme.charCodeAt(e)===O.CloseParen&&i--}if(i<0)break;n.push(gS.getLexeme(r)),this._advance(),r=this._peek()}let a=n.join(``),o=a.lastIndexOf(`/`),s=o===a.length-1?void 0:this._removeFlagsGY(a.substring(o+1)),c;try{c=new RegExp(a.substring(1,o),s)}catch{throw this._errExpectedButGot(`REGEX`,t)}return jS.regex(e,c)}case U.QuotedStr:{let n=t.lexeme;this._advance();let r=null;if(!Ea(n)){let e=n.indexOf(`/`),i=n.lastIndexOf(`/`);if(e!==i&&e>=0){let a=n.slice(e+1,i),o=n[i+1]===`i`?`i`:``;try{r=new RegExp(a,o)}catch{throw this._errExpectedButGot(`REGEX`,t)}}}if(r===null)throw this._errExpectedButGot(`REGEX`,t);return JS.create(e,r)}default:throw this._errExpectedButGot(`REGEX`,this._peek())}}if(this._matchOne(U.Not)){this._consume(U.In,wS);let t=this._value();return jS.notIn(e,t)}switch(this._peek().type){case U.Eq:{this._advance();let t=this._value();if(this._previous().type===U.QuotedStr)return jS.equals(e,t);switch(t){case`true`:return jS.has(e);case`false`:return jS.not(e);default:return jS.equals(e,t)}}case U.NotEq:{this._advance();let t=this._value();if(this._previous().type===U.QuotedStr)return jS.notEquals(e,t);switch(t){case`true`:return jS.not(e);case`false`:return jS.has(e);default:return jS.notEquals(e,t)}}case U.Lt:return this._advance(),KS.create(e,this._value());case U.LtEq:return this._advance(),qS.create(e,this._value());case U.Gt:return this._advance(),WS.create(e,this._value());case U.GtEq:return this._advance(),GS.create(e,this._value());case U.In:return this._advance(),jS.in(e,this._value());default:return jS.has(e)}}case U.EOF:throw this._parsingErrors.push({message:OS,offset:t.offset,lexeme:``,additionalInfo:kS}),e._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){let e=this._peek();switch(e.type){case U.Str:case U.QuotedStr:return this._advance(),e.lexeme;case U.True:return this._advance(),`true`;case U.False:return this._advance(),`false`;case U.In:return this._advance(),`in`;default:return``}}_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,``)}_previous(){return this._tokens[this._current-1]}_matchOne(e){return this._check(e)?(this._advance(),!0):!1}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(t,n,r){let i=D(1784,`Expected: {0}
Received: '{1}'.`,t,gS.getLexeme(n)),a=n.offset,o=gS.getLexeme(n);return this._parsingErrors.push({message:i,offset:a,lexeme:o,additionalInfo:r}),e._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===U.EOF}},jS=class{static false(){return FS.INSTANCE}static true(){return IS.INSTANCE}static has(e){return LS.create(e)}static equals(e,t){return RS.create(e,t)}static notEquals(e,t){return VS.create(e,t)}static regex(e,t){return JS.create(e,t)}static in(e,t){return zS.create(e,t)}static notIn(e,t){return BS.create(e,t)}static not(e){return HS.create(e)}static and(...e){return ZS.create(e,null,!0)}static or(...e){return QS.create(e,null,!0)}static greater(e,t){return WS.create(e,t)}static greaterEquals(e,t){return GS.create(e,t)}static smaller(e,t){return KS.create(e,t)}static smallerEquals(e,t){return qS.create(e,t)}static#e=this._parser=new AS({regexParsingWithErrorRecovery:!1});static deserialize(e){if(e!=null)return this._parser.parse(e)}};function MS(e){let t=new AS({regexParsingWithErrorRecovery:!1});return e.map(e=>(t.parse(e),t.lexingErrors.length>0?t.lexingErrors.map(e=>({errorMessage:e.additionalInfo?D(1785,`Unexpected token. Hint: {0}`,e.additionalInfo):D(1786,`Unexpected token.`),offset:e.offset,length:e.lexeme.length})):t.parsingErrors.length>0?t.parsingErrors.map(e=>({errorMessage:e.additionalInfo?`${e.message}. ${e.additionalInfo}`:e.message,offset:e.offset,length:e.lexeme.length})):[]))}function NS(e,t){let n=e?e.substituteConstants():void 0,r=t?t.substituteConstants():void 0;return!n&&!r?!0:!n||!r?!1:n.equals(r)}function PS(e,t){return e.cmp(t)}var FS=class e{static#e=this.INSTANCE=new e;constructor(){this.type=bS.False}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return`false`}keys(){return[]}map(e){return this}negate(){return IS.INSTANCE}},IS=class e{static#e=this.INSTANCE=new e;constructor(){this.type=bS.True}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return`true`}keys(){return[]}map(e){return this}negate(){return FS.INSTANCE}},LS=class e{static create(t,n=null){let r=_S.get(t);return typeof r==`boolean`?r?IS.INSTANCE:FS.INSTANCE:new e(t,n)}constructor(e,t){this.key=e,this.negated=t,this.type=bS.Defined}cmp(e){return e.type===this.type?$S(this.key,e.key):this.type-e.type}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){let e=_S.get(this.key);return typeof e==`boolean`?e?IS.INSTANCE:FS.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(e){return e.mapDefined(this.key)}negate(){return this.negated||=HS.create(this.key,this),this.negated}},RS=class e{static create(t,n,r=null){if(typeof n==`boolean`)return n?LS.create(t,r):HS.create(t,r);let i=_S.get(t);return typeof i==`boolean`?n===(i?`true`:`false`)?IS.INSTANCE:FS.INSTANCE:new e(t,n,r)}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=bS.Equals}cmp(e){return e.type===this.type?eC(this.key,this.value,e.key,e.value):this.type-e.type}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){let e=_S.get(this.key);if(typeof e==`boolean`){let t=e?`true`:`false`;return this.value===t?IS.INSTANCE:FS.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}map(e){return e.mapEquals(this.key,this.value)}negate(){return this.negated||=VS.create(this.key,this.value,this),this.negated}},zS=class e{static create(t,n){return new e(t,n)}constructor(e,t){this.key=e,this.valueKey=t,this.type=bS.In,this.negated=null}cmp(e){return e.type===this.type?eC(this.key,this.valueKey,e.key,e.valueKey):this.type-e.type}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.includes(n):typeof n==`string`&&typeof t==`object`&&t?yS.call(t,n):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}map(e){return e.mapIn(this.key,this.valueKey)}negate(){return this.negated||=BS.create(this.key,this.valueKey),this.negated}},BS=class e{static create(t,n){return new e(t,n)}constructor(e,t){this.key=e,this.valueKey=t,this.type=bS.NotIn,this._negated=zS.create(e,t)}cmp(e){return e.type===this.type?this._negated.cmp(e._negated):this.type-e.type}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}map(e){return e.mapNotIn(this.key,this.valueKey)}negate(){return this._negated}},VS=class e{static create(t,n,r=null){if(typeof n==`boolean`)return n?HS.create(t,r):LS.create(t,r);let i=_S.get(t);return typeof i==`boolean`?n===(i?`true`:`false`)?FS.INSTANCE:IS.INSTANCE:new e(t,n,r)}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=bS.NotEquals}cmp(e){return e.type===this.type?eC(this.key,this.value,e.key,e.value):this.type-e.type}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){let e=_S.get(this.key);if(typeof e==`boolean`){let t=e?`true`:`false`;return this.value===t?FS.INSTANCE:IS.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}map(e){return e.mapNotEquals(this.key,this.value)}negate(){return this.negated||=RS.create(this.key,this.value,this),this.negated}},HS=class e{static create(t,n=null){let r=_S.get(t);return typeof r==`boolean`?r?FS.INSTANCE:IS.INSTANCE:new e(t,n)}constructor(e,t){this.key=e,this.negated=t,this.type=bS.Not}cmp(e){return e.type===this.type?$S(this.key,e.key):this.type-e.type}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){let e=_S.get(this.key);return typeof e==`boolean`?e?FS.INSTANCE:IS.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}map(e){return e.mapNot(this.key)}negate(){return this.negated||=LS.create(this.key,this),this.negated}};function US(e,t){if(typeof e==`string`){let t=parseFloat(e);isNaN(t)||(e=t)}return typeof e==`string`||typeof e==`number`?t(e):FS.INSTANCE}var WS=class e{static create(t,n,r=null){return US(n,n=>new e(t,n,r))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=bS.Greater}cmp(e){return e.type===this.type?eC(this.key,this.value,e.key,e.value):this.type-e.type}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value==`string`?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}map(e){return e.mapGreater(this.key,this.value)}negate(){return this.negated||=qS.create(this.key,this.value,this),this.negated}},GS=class e{static create(t,n,r=null){return US(n,n=>new e(t,n,r))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=bS.GreaterEquals}cmp(e){return e.type===this.type?eC(this.key,this.value,e.key,e.value):this.type-e.type}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value==`string`?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}map(e){return e.mapGreaterEquals(this.key,this.value)}negate(){return this.negated||=KS.create(this.key,this.value,this),this.negated}},KS=class e{static create(t,n,r=null){return US(n,n=>new e(t,n,r))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=bS.Smaller}cmp(e){return e.type===this.type?eC(this.key,this.value,e.key,e.value):this.type-e.type}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value==`string`?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}map(e){return e.mapSmaller(this.key,this.value)}negate(){return this.negated||=GS.create(this.key,this.value,this),this.negated}},qS=class e{static create(t,n,r=null){return US(n,n=>new e(t,n,r))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=bS.SmallerEquals}cmp(e){return e.type===this.type?eC(this.key,this.value,e.key,e.value):this.type-e.type}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value==`string`?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}map(e){return e.mapSmallerEquals(this.key,this.value)}negate(){return this.negated||=WS.create(this.key,this.value,this),this.negated}},JS=class e{static create(t,n){return new e(t,n)}constructor(e,t){this.key=e,this.regexp=t,this.type=bS.Regex,this.negated=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;let t=this.regexp?this.regexp.source:``,n=e.regexp?e.regexp.source:``;return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){let t=this.regexp?this.regexp.source:``,n=e.regexp?e.regexp.source:``;return this.key===e.key&&t===n}return!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){let e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:`/invalid/`;return`${this.key} =~ ${e}`}keys(){return[this.key]}map(e){return e.mapRegex(this.key,this.regexp)}negate(){return this.negated||=YS.create(this),this.negated}},YS=class e{static create(t){return new e(t)}constructor(e){this._actual=e,this.type=bS.NotRegex}cmp(e){return e.type===this.type?this._actual.cmp(e._actual):this.type-e.type}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}map(t){return new e(this._actual.map(t))}negate(){return this._actual}};function XS(e){let t=null;for(let n=0,r=e.length;n<r;n++){let r=e[n].substituteConstants();if(e[n]!==r&&t===null){t=[];for(let r=0;r<n;r++)t[r]=e[r]}t!==null&&(t[n]=r)}return t===null?e:t}var ZS=class e{static create(t,n,r){return e._normalizeArr(t,n,r)}constructor(e,t){this.expr=e,this.negated=t,this.type=bS.And}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){let n=PS(this.expr[t],e.expr[t]);if(n!==0)return n}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){let t=XS(this.expr);return t===this.expr?this:e.create(t,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(t,n,r){let i=[],a=!1;for(let e of t)if(e){if(e.type===bS.True){a=!0;continue}if(e.type===bS.False)return FS.INSTANCE;if(e.type===bS.And){i.push(...e.expr);continue}i.push(e)}if(i.length===0&&a)return IS.INSTANCE;if(i.length!==0){if(i.length===1)return i[0];i.sort(PS);for(let e=1;e<i.length;e++)i[e-1].equals(i[e])&&(i.splice(e,1),e--);if(i.length===1)return i[0];for(;i.length>1;){let t=i[i.length-1];if(t.type!==bS.Or)break;i.pop();let n=i.pop(),a=i.length===0,o=QS.create(t.expr.map(t=>e.create([t,n],null,r)),null,a);o&&(i.push(o),i.sort(PS))}if(i.length===1)return i[0];if(r){for(let e=0;e<i.length;e++)for(let t=e+1;t<i.length;t++)if(i[e].negate().equals(i[t]))return FS.INSTANCE;if(i.length===1)return i[0]}return new e(i,n)}}serialize(){return this.expr.map(e=>e.serialize()).join(` && `)}keys(){let e=[];for(let t of this.expr)e.push(...t.keys());return e}map(t){return new e(this.expr.map(e=>e.map(t)),null)}negate(){if(!this.negated){let e=[];for(let t of this.expr)e.push(t.negate());this.negated=QS.create(e,this,!0)}return this.negated}},QS=class e{static create(t,n,r){return e._normalizeArr(t,n,r)}constructor(e,t){this.expr=e,this.negated=t,this.type=bS.Or}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){let n=PS(this.expr[t],e.expr[t]);if(n!==0)return n}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){let t=XS(this.expr);return t===this.expr?this:e.create(t,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(t,n,r){let i=[],a=!1;if(t){for(let e=0,n=t.length;e<n;e++){let n=t[e];if(n){if(n.type===bS.False){a=!0;continue}if(n.type===bS.True)return IS.INSTANCE;if(n.type===bS.Or){i=i.concat(n.expr);continue}i.push(n)}}if(i.length===0&&a)return FS.INSTANCE;i.sort(PS)}if(i.length!==0){if(i.length===1)return i[0];for(let e=1;e<i.length;e++)i[e-1].equals(i[e])&&(i.splice(e,1),e--);if(i.length===1)return i[0];if(r){for(let e=0;e<i.length;e++)for(let t=e+1;t<i.length;t++)if(i[e].negate().equals(i[t]))return IS.INSTANCE;if(i.length===1)return i[0]}return new e(i,n)}}serialize(){return this.expr.map(e=>e.serialize()).join(` || `)}keys(){let e=[];for(let t of this.expr)e.push(...t.keys());return e}map(t){return new e(this.expr.map(e=>e.map(t)),null)}negate(){if(!this.negated){let t=[];for(let e of this.expr)t.push(e.negate());for(;t.length>1;){let n=t.shift(),r=t.shift(),i=[];for(let e of rC(n))for(let t of rC(r))i.push(ZS.create([e,t],null,!1));t.unshift(e.create(i,null,!1))}this.negated=e.create(t,this,!0)}return this.negated}},W=class e extends LS{static#e=this._info=[];static all(){return e._info.values()}constructor(t,n,r){super(t,null),this._defaultValue=n,typeof r==`object`?e._info.push({...r,key:t}):r!==!0&&e._info.push({key:t,description:r,type:n==null?void 0:typeof n})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return RS.create(this.key,e)}notEqualsTo(e){return VS.create(this.key,e)}greater(e){return WS.create(this.key,e)}};function $S(e,t){return e<t?-1:e>t?1:0}function eC(e,t,n,r){return e<n?-1:e>n?1:t<r?-1:t>r?1:0}function tC(e,t){if(e.type===bS.False||t.type===bS.True)return!0;if(e.type===bS.Or)return t.type===bS.Or?nC(e.expr,t.expr):!1;if(t.type===bS.Or){for(let n of t.expr)if(tC(e,n))return!0;return!1}if(e.type===bS.And){if(t.type===bS.And)return nC(t.expr,e.expr);for(let n of e.expr)if(tC(n,t))return!0;return!1}return e.equals(t)}function nC(e,t){let n=0,r=0;for(;n<e.length&&r<t.length;){let i=e[n].cmp(t[r]);if(i<0)return!1;i===0&&n++,r++}return n===e.length}function rC(e){return e.type===bS.Or?e.expr:[e]}var iC;(function(e){e[e.EditorCore=0]=`EditorCore`,e[e.EditorContrib=100]=`EditorContrib`,e[e.WorkbenchContrib=200]=`WorkbenchContrib`,e[e.BuiltinExtension=300]=`BuiltinExtension`,e[e.ExternalExtension=400]=`ExternalExtension`})(iC||={});var aC=new class e{constructor(){this._coreKeybindings=new Kn,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(Ei===Ti.Windows){if(e&&e.win)return e.win}else if(Ei===Ti.Macintosh){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(t){let n=e.bindToCurrentPlatform(t),r=new C;if(n&&n.primary){let e=np(n.primary,Ei);e&&r.add(this._registerDefaultKeybinding(e,t.id,t.args,t.weight,0,t.when))}if(n&&Array.isArray(n.secondary))for(let e=0,i=n.secondary.length;e<i;e++){let i=n.secondary[e],a=np(i,Ei);a&&r.add(this._registerDefaultKeybinding(a,t.id,t.args,t.weight,-e-1,t.when))}return r}setExtensionKeybindings(e){let t=[],n=0;for(let r of e)r.keybinding&&(t[n++]={keybinding:r.keybinding,command:r.id,commandArgs:r.args,when:r.when,weight1:r.weight,weight2:0,extensionId:r.extensionId||null,isBuiltinExtension:r.isBuiltinExtension||!1});this._extensionKeybindings=t,this._cachedMergedKeybindings=null}registerCommandAndKeybindingRule(e){return Fn(this.registerKeybindingRule(e),fS.registerCommand(e))}_registerDefaultKeybinding(e,t,n,r,i,a){let o=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:n,when:a,weight1:r,weight2:i,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,S(()=>{o(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(oC)),this._cachedMergedKeybindings.slice(0)}};hr.add({EditorModes:`platform.keybindingsRegistry`}.EditorModes,aC);function oC(e,t){if(e.weight1!==t.weight1)return e.weight1-t.weight1;if(e.command&&t.command){if(e.command<t.command)return-1;if(e.command>t.command)return 1}return e.weight2-t.weight2}var sC;(function(e){function t(e){return!!e&&typeof e==`object`&&typeof e.id==`string`}e.isThemeColor=t})(sC||={});function cC(e){return{id:e}}var lC;(function(e){e.iconNameSegment=`[A-Za-z0-9]+`,e.iconNameExpression=`[A-Za-z0-9-]+`,e.iconModifierExpression=`~[A-Za-z]+`,e.iconNameCharacter=`[A-Za-z0-9~-]`;let t=RegExp(`^(${e.iconNameExpression})(${e.iconModifierExpression})?$`);function n(e){let r=t.exec(e.id);if(!r)return n(x.error);let[,i,a]=r,o=[`codicon`,`codicon-`+i];return a&&o.push(`codicon-modifier-`+a.substring(1)),o}e.asClassNameArray=n;function r(e){return n(e).join(` `)}e.asClassName=r;function i(e){return`.`+n(e).join(`.`)}e.asCSSSelector=i;function a(e){return!!e&&typeof e==`object`&&typeof e.id==`string`&&(e.color===void 0||sC.isThemeColor(e.color))}e.isThemeIcon=a;let o=RegExp(`^\\$\\((${e.iconNameExpression}(?:${e.iconModifierExpression})?)\\)$`);function s(e){let t=o.exec(e);if(!t)return;let[,n]=t;return{id:n}}e.fromString=s;function c(e){return{id:e}}e.fromId=c;function l(e,t){let n=e.id,r=n.lastIndexOf(`~`);return r!==-1&&(n=n.substring(0,r)),t&&(n=`${n}~${t}`),{id:n}}e.modify=l;function u(e){let t=e.id.lastIndexOf(`~`);if(t!==-1)return e.id.substring(t+1)}e.getModifier=u;function d(e,t){return e.id===t.id&&e.color?.id===t.color?.id}e.isEqual=d;function f(e){return e?.id===x.file.id}e.isFile=f;function p(e){return e?.id===x.folder.id}e.isFolder=p})(lC||={});var uC;function dC(e){return e.command!==void 0}function tne(e){return e.submenu!==void 0}var fC=class e{static#e=this._instances=new Map;static#t=this.CommandPalette=new e(`CommandPalette`);static#n=this.DebugBreakpointsContext=new e(`DebugBreakpointsContext`);static#r=this.DebugCallStackContext=new e(`DebugCallStackContext`);static#i=this.DebugConsoleContext=new e(`DebugConsoleContext`);static#a=this.DebugVariablesContext=new e(`DebugVariablesContext`);static#o=this.NotebookVariablesContext=new e(`NotebookVariablesContext`);static#s=this.DebugHoverContext=new e(`DebugHoverContext`);static#c=this.DebugWatchContext=new e(`DebugWatchContext`);static#l=this.DebugToolBar=new e(`DebugToolBar`);static#u=this.DebugToolBarStop=new e(`DebugToolBarStop`);static#d=this.DebugDisassemblyContext=new e(`DebugDisassemblyContext`);static#f=this.DebugCallStackToolbar=new e(`DebugCallStackToolbar`);static#p=this.DebugCreateConfiguration=new e(`DebugCreateConfiguration`);static#m=this.DebugScopesContext=new e(`DebugScopesContext`);static#h=this.EditorContext=new e(`EditorContext`);static#g=this.SimpleEditorContext=new e(`SimpleEditorContext`);static#_=this.EditorContent=new e(`EditorContent`);static#v=this.EditorLineNumberContext=new e(`EditorLineNumberContext`);static#y=this.EditorContextCopy=new e(`EditorContextCopy`);static#b=this.EditorContextPeek=new e(`EditorContextPeek`);static#x=this.EditorContextShare=new e(`EditorContextShare`);static#S=this.EditorTitle=new e(`EditorTitle`);static#C=this.CompactWindowEditorTitle=new e(`CompactWindowEditorTitle`);static#w=this.EditorTitleRun=new e(`EditorTitleRun`);static#T=this.EditorTitleContext=new e(`EditorTitleContext`);static#E=this.EditorTitleContextShare=new e(`EditorTitleContextShare`);static#D=this.EmptyEditorGroup=new e(`EmptyEditorGroup`);static#O=this.EmptyEditorGroupContext=new e(`EmptyEditorGroupContext`);static#k=this.EditorTabsBarContext=new e(`EditorTabsBarContext`);static#A=this.EditorTabsBarShowTabsSubmenu=new e(`EditorTabsBarShowTabsSubmenu`);static#j=this.EditorTabsBarShowTabsZenModeSubmenu=new e(`EditorTabsBarShowTabsZenModeSubmenu`);static#M=this.EditorActionsPositionSubmenu=new e(`EditorActionsPositionSubmenu`);static#N=this.EditorSplitMoveSubmenu=new e(`EditorSplitMoveSubmenu`);static#P=this.ExplorerContext=new e(`ExplorerContext`);static#F=this.ExplorerContextShare=new e(`ExplorerContextShare`);static#I=this.ExtensionContext=new e(`ExtensionContext`);static#L=this.ExtensionEditorContextMenu=new e(`ExtensionEditorContextMenu`);static#R=this.GlobalActivity=new e(`GlobalActivity`);static#z=this.CommandCenter=new e(`CommandCenter`);static#B=this.CommandCenterCenter=new e(`CommandCenterCenter`);static#V=this.LayoutControlMenuSubmenu=new e(`LayoutControlMenuSubmenu`);static#H=this.LayoutControlMenu=new e(`LayoutControlMenu`);static#U=this.MenubarMainMenu=new e(`MenubarMainMenu`);static#W=this.MenubarAppearanceMenu=new e(`MenubarAppearanceMenu`);static#G=this.MenubarDebugMenu=new e(`MenubarDebugMenu`);static#K=this.MenubarEditMenu=new e(`MenubarEditMenu`);static#q=this.MenubarCopy=new e(`MenubarCopy`);static#J=this.MenubarFileMenu=new e(`MenubarFileMenu`);static#Y=this.MenubarGoMenu=new e(`MenubarGoMenu`);static#X=this.MenubarHelpMenu=new e(`MenubarHelpMenu`);static#Z=this.MenubarLayoutMenu=new e(`MenubarLayoutMenu`);static#Q=this.MenubarNewBreakpointMenu=new e(`MenubarNewBreakpointMenu`);static#$=this.PanelAlignmentMenu=new e(`PanelAlignmentMenu`);static#ee=this.PanelPositionMenu=new e(`PanelPositionMenu`);static#te=this.ActivityBarPositionMenu=new e(`ActivityBarPositionMenu`);static#ne=this.MenubarPreferencesMenu=new e(`MenubarPreferencesMenu`);static#re=this.MenubarRecentMenu=new e(`MenubarRecentMenu`);static#ie=this.MenubarSelectionMenu=new e(`MenubarSelectionMenu`);static#ae=this.MenubarShare=new e(`MenubarShare`);static#oe=this.MenubarSwitchEditorMenu=new e(`MenubarSwitchEditorMenu`);static#se=this.MenubarSwitchGroupMenu=new e(`MenubarSwitchGroupMenu`);static#ce=this.MenubarTerminalMenu=new e(`MenubarTerminalMenu`);static#le=this.MenubarTerminalSuggestStatusMenu=new e(`MenubarTerminalSuggestStatusMenu`);static#ue=this.MenubarViewMenu=new e(`MenubarViewMenu`);static#de=this.MenubarHomeMenu=new e(`MenubarHomeMenu`);static#fe=this.OpenEditorsContext=new e(`OpenEditorsContext`);static#pe=this.OpenEditorsContextShare=new e(`OpenEditorsContextShare`);static#me=this.ProblemsPanelContext=new e(`ProblemsPanelContext`);static#he=this.SCMInputBox=new e(`SCMInputBox`);static#ge=this.SCMChangeContext=new e(`SCMChangeContext`);static#_e=this.SCMResourceContext=new e(`SCMResourceContext`);static#ve=this.SCMResourceContextShare=new e(`SCMResourceContextShare`);static#ye=this.SCMResourceFolderContext=new e(`SCMResourceFolderContext`);static#be=this.SCMResourceGroupContext=new e(`SCMResourceGroupContext`);static#xe=this.SCMSourceControl=new e(`SCMSourceControl`);static#Se=this.SCMSourceControlInline=new e(`SCMSourceControlInline`);static#Ce=this.SCMSourceControlTitle=new e(`SCMSourceControlTitle`);static#we=this.SCMHistoryTitle=new e(`SCMHistoryTitle`);static#Te=this.SCMHistoryItemContext=new e(`SCMHistoryItemContext`);static#Ee=this.SCMHistoryItemChangeContext=new e(`SCMHistoryItemChangeContext`);static#De=this.SCMHistoryItemRefContext=new e(`SCMHistoryItemRefContext`);static#Oe=this.SCMArtifactGroupContext=new e(`SCMArtifactGroupContext`);static#ke=this.SCMArtifactContext=new e(`SCMArtifactContext`);static#Ae=this.SCMQuickDiffDecorations=new e(`SCMQuickDiffDecorations`);static#je=this.SCMTitle=new e(`SCMTitle`);static#Me=this.SearchContext=new e(`SearchContext`);static#Ne=this.SearchActionMenu=new e(`SearchActionContext`);static#Pe=this.StatusBarWindowIndicatorMenu=new e(`StatusBarWindowIndicatorMenu`);static#Fe=this.StatusBarRemoteIndicatorMenu=new e(`StatusBarRemoteIndicatorMenu`);static#Ie=this.StickyScrollContext=new e(`StickyScrollContext`);static#Le=this.TestItem=new e(`TestItem`);static#Re=this.TestItemGutter=new e(`TestItemGutter`);static#ze=this.TestProfilesContext=new e(`TestProfilesContext`);static#Be=this.TestMessageContext=new e(`TestMessageContext`);static#Ve=this.TestMessageContent=new e(`TestMessageContent`);static#He=this.TestPeekElement=new e(`TestPeekElement`);static#Ue=this.TestPeekTitle=new e(`TestPeekTitle`);static#We=this.TestCallStack=new e(`TestCallStack`);static#Ge=this.TestCoverageFilterItem=new e(`TestCoverageFilterItem`);static#Ke=this.TouchBarContext=new e(`TouchBarContext`);static#qe=this.TitleBar=new e(`TitleBar`);static#Je=this.TitleBarContext=new e(`TitleBarContext`);static#Ye=this.TitleBarTitleContext=new e(`TitleBarTitleContext`);static#Xe=this.TunnelContext=new e(`TunnelContext`);static#Ze=this.TunnelPrivacy=new e(`TunnelPrivacy`);static#Qe=this.TunnelProtocol=new e(`TunnelProtocol`);static#$e=this.TunnelPortInline=new e(`TunnelInline`);static#et=this.TunnelTitle=new e(`TunnelTitle`);static#tt=this.TunnelLocalAddressInline=new e(`TunnelLocalAddressInline`);static#nt=this.TunnelOriginInline=new e(`TunnelOriginInline`);static#rt=this.ViewItemContext=new e(`ViewItemContext`);static#it=this.ViewContainerTitle=new e(`ViewContainerTitle`);static#at=this.ViewContainerTitleContext=new e(`ViewContainerTitleContext`);static#ot=this.ViewTitle=new e(`ViewTitle`);static#st=this.ViewTitleContext=new e(`ViewTitleContext`);static#ct=this.CommentEditorActions=new e(`CommentEditorActions`);static#lt=this.CommentThreadTitle=new e(`CommentThreadTitle`);static#ut=this.CommentThreadActions=new e(`CommentThreadActions`);static#dt=this.CommentThreadAdditionalActions=new e(`CommentThreadAdditionalActions`);static#ft=this.CommentThreadTitleContext=new e(`CommentThreadTitleContext`);static#pt=this.CommentThreadCommentContext=new e(`CommentThreadCommentContext`);static#mt=this.CommentTitle=new e(`CommentTitle`);static#ht=this.CommentActions=new e(`CommentActions`);static#gt=this.CommentsViewThreadActions=new e(`CommentsViewThreadActions`);static#_t=this.InteractiveToolbar=new e(`InteractiveToolbar`);static#vt=this.InteractiveCellTitle=new e(`InteractiveCellTitle`);static#yt=this.InteractiveCellDelete=new e(`InteractiveCellDelete`);static#bt=this.InteractiveCellExecute=new e(`InteractiveCellExecute`);static#xt=this.InteractiveInputExecute=new e(`InteractiveInputExecute`);static#St=this.InteractiveInputConfig=new e(`InteractiveInputConfig`);static#Ct=this.ReplInputExecute=new e(`ReplInputExecute`);static#wt=this.IssueReporter=new e(`IssueReporter`);static#Tt=this.NotebookToolbar=new e(`NotebookToolbar`);static#Et=this.NotebookToolbarContext=new e(`NotebookToolbarContext`);static#Dt=this.NotebookStickyScrollContext=new e(`NotebookStickyScrollContext`);static#Ot=this.NotebookCellTitle=new e(`NotebookCellTitle`);static#kt=this.NotebookCellDelete=new e(`NotebookCellDelete`);static#At=this.NotebookCellInsert=new e(`NotebookCellInsert`);static#jt=this.NotebookCellBetween=new e(`NotebookCellBetween`);static#Mt=this.NotebookCellListTop=new e(`NotebookCellTop`);static#Nt=this.NotebookCellExecute=new e(`NotebookCellExecute`);static#Pt=this.NotebookCellExecuteGoTo=new e(`NotebookCellExecuteGoTo`);static#Ft=this.NotebookCellExecutePrimary=new e(`NotebookCellExecutePrimary`);static#It=this.NotebookDiffCellInputTitle=new e(`NotebookDiffCellInputTitle`);static#Lt=this.NotebookDiffDocumentMetadata=new e(`NotebookDiffDocumentMetadata`);static#Rt=this.NotebookDiffCellMetadataTitle=new e(`NotebookDiffCellMetadataTitle`);static#zt=this.NotebookDiffCellOutputsTitle=new e(`NotebookDiffCellOutputsTitle`);static#Bt=this.NotebookOutputToolbar=new e(`NotebookOutputToolbar`);static#Vt=this.NotebookOutlineFilter=new e(`NotebookOutlineFilter`);static#Ht=this.NotebookOutlineActionMenu=new e(`NotebookOutlineActionMenu`);static#Ut=this.NotebookEditorLayoutConfigure=new e(`NotebookEditorLayoutConfigure`);static#Wt=this.NotebookKernelSource=new e(`NotebookKernelSource`);static#Gt=this.BulkEditTitle=new e(`BulkEditTitle`);static#Kt=this.BulkEditContext=new e(`BulkEditContext`);static#qt=this.TimelineItemContext=new e(`TimelineItemContext`);static#Jt=this.TimelineTitle=new e(`TimelineTitle`);static#Yt=this.TimelineTitleContext=new e(`TimelineTitleContext`);static#Xt=this.TimelineFilterSubMenu=new e(`TimelineFilterSubMenu`);static#Zt=this.AccountsContext=new e(`AccountsContext`);static#Qt=this.SidebarTitle=new e(`SidebarTitle`);static#$t=this.PanelTitle=new e(`PanelTitle`);static#en=this.AuxiliaryBarTitle=new e(`AuxiliaryBarTitle`);static#tn=this.TerminalInstanceContext=new e(`TerminalInstanceContext`);static#nn=this.TerminalEditorInstanceContext=new e(`TerminalEditorInstanceContext`);static#rn=this.TerminalNewDropdownContext=new e(`TerminalNewDropdownContext`);static#in=this.TerminalTabContext=new e(`TerminalTabContext`);static#an=this.TerminalTabEmptyAreaContext=new e(`TerminalTabEmptyAreaContext`);static#on=this.TerminalStickyScrollContext=new e(`TerminalStickyScrollContext`);static#sn=this.WebviewContext=new e(`WebviewContext`);static#cn=this.InlineCompletionsActions=new e(`InlineCompletionsActions`);static#ln=this.InlineEditsActions=new e(`InlineEditsActions`);static#un=this.NewFile=new e(`NewFile`);static#dn=this.MergeInput1Toolbar=new e(`MergeToolbar1Toolbar`);static#fn=this.MergeInput2Toolbar=new e(`MergeToolbar2Toolbar`);static#pn=this.MergeBaseToolbar=new e(`MergeBaseToolbar`);static#mn=this.MergeInputResultToolbar=new e(`MergeToolbarResultToolbar`);static#hn=this.InlineSuggestionToolbar=new e(`InlineSuggestionToolbar`);static#gn=this.InlineEditToolbar=new e(`InlineEditToolbar`);static#_n=this.ChatContext=new e(`ChatContext`);static#vn=this.ChatCodeBlock=new e(`ChatCodeblock`);static#yn=this.ChatCompareBlock=new e(`ChatCompareBlock`);static#bn=this.ChatMessageTitle=new e(`ChatMessageTitle`);static#xn=this.ChatWelcomeContext=new e(`ChatWelcomeContext`);static#Sn=this.ChatMessageFooter=new e(`ChatMessageFooter`);static#Cn=this.ChatExecute=new e(`ChatExecute`);static#wn=this.ChatExecuteQueue=new e(`ChatExecuteQueue`);static#Tn=this.ChatInput=new e(`ChatInput`);static#En=this.ChatInputSide=new e(`ChatInputSide`);static#Dn=this.ChatModePicker=new e(`ChatModePicker`);static#On=this.ChatEditingWidgetToolbar=new e(`ChatEditingWidgetToolbar`);static#kn=this.ChatEditingSessionChangesToolbar=new e(`ChatEditingSessionChangesToolbar`);static#An=this.ChatEditingEditorContent=new e(`ChatEditingEditorContent`);static#jn=this.ChatEditingEditorHunk=new e(`ChatEditingEditorHunk`);static#Mn=this.ChatEditingDeletedNotebookCell=new e(`ChatEditingDeletedNotebookCell`);static#Nn=this.ChatInputAttachmentToolbar=new e(`ChatInputAttachmentToolbar`);static#Pn=this.ChatEditingWidgetModifiedFilesToolbar=new e(`ChatEditingWidgetModifiedFilesToolbar`);static#Fn=this.ChatInputResourceAttachmentContext=new e(`ChatInputResourceAttachmentContext`);static#In=this.ChatInputSymbolAttachmentContext=new e(`ChatInputSymbolAttachmentContext`);static#Ln=this.ChatInlineResourceAnchorContext=new e(`ChatInlineResourceAnchorContext`);static#Rn=this.ChatInlineSymbolAnchorContext=new e(`ChatInlineSymbolAnchorContext`);static#zn=this.ChatMessageCheckpoint=new e(`ChatMessageCheckpoint`);static#Bn=this.ChatMessageRestoreCheckpoint=new e(`ChatMessageRestoreCheckpoint`);static#Vn=this.ChatNewMenu=new e(`ChatNewMenu`);static#Hn=this.ChatEditingCodeBlockContext=new e(`ChatEditingCodeBlockContext`);static#Un=this.ChatTitleBarMenu=new e(`ChatTitleBarMenu`);static#Wn=this.ChatAttachmentsContext=new e(`ChatAttachmentsContext`);static#Gn=this.ChatToolOutputResourceToolbar=new e(`ChatToolOutputResourceToolbar`);static#Kn=this.ChatTextEditorMenu=new e(`ChatTextEditorMenu`);static#qn=this.ChatToolOutputResourceContext=new e(`ChatToolOutputResourceContext`);static#Jn=this.ChatMultiDiffContext=new e(`ChatMultiDiffContext`);static#Yn=this.ChatConfirmationMenu=new e(`ChatConfirmationMenu`);static#Xn=this.ChatEditorInlineGutter=new e(`ChatEditorInlineGutter`);static#Zn=this.ChatEditorInlineExecute=new e(`ChatEditorInputExecute`);static#Qn=this.ChatEditorInlineInputSide=new e(`ChatEditorInputSide`);static#$n=this.InlineChatEditorAffordance=new e(`InlineChatEditorAffordance`);static#er=this.AccessibleView=new e(`AccessibleView`);static#tr=this.MultiDiffEditorContent=new e(`MultiDiffEditorContent`);static#nr=this.MultiDiffEditorFileToolbar=new e(`MultiDiffEditorFileToolbar`);static#rr=this.DiffEditorHunkToolbar=new e(`DiffEditorHunkToolbar`);static#ir=this.DiffEditorSelectionToolbar=new e(`DiffEditorSelectionToolbar`);static#ar=this.BrowserNavigationToolbar=new e(`BrowserNavigationToolbar`);static#or=this.BrowserActionsToolbar=new e(`BrowserActionsToolbar`);static#sr=this.AgentSessionsViewerFilterSubMenu=new e(`AgentSessionsViewerFilterSubMenu`);static#cr=this.AgentSessionsContext=new e(`AgentSessionsContext`);static#lr=this.AgentSessionSectionContext=new e(`AgentSessionSectionContext`);static#ur=this.AgentSessionsCreateSubMenu=new e(`AgentSessionsCreateSubMenu`);static#dr=this.AgentSessionsToolbar=new e(`AgentSessionsToolbar`);static#fr=this.AgentSessionItemToolbar=new e(`AgentSessionItemToolbar`);static#pr=this.AgentSessionSectionToolbar=new e(`AgentSessionSectionToolbar`);static#mr=this.AgentsTitleBarControlMenu=new e(`AgentsTitleBarControlMenu`);static#hr=this.ChatViewSessionTitleNavigationToolbar=new e(`ChatViewSessionTitleNavigationToolbar`);static#gr=this.ChatViewSessionTitleToolbar=new e(`ChatViewSessionTitleToolbar`);static#_r=this.ChatContextUsageActions=new e(`ChatContextUsageActions`);static for(t){return e._instances.get(t)??new e(t)}constructor(t){if(e._instances.has(t))throw TypeError(`MenuId with identifier '${t}' already exists. Use MenuId.for(ident) or a unique identifier`);e._instances.set(t,this),this.id=t}},pC=class e{static#e=this._all=new Map;static for(t){let n=this._all.get(t);return n||(n=new e(t),this._all.set(t,n)),n}static merge(t){let n=new Set;for(let r of t)r instanceof e&&n.add(r.id);return n}constructor(e){this.id=e,this.has=t=>t===e}},mC=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new or({merge:pC.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}addCommand(e){return this._commands.set(e.id,e),this._onDidChangeMenu.fire(pC.for(fC.CommandPalette)),jn(S(()=>{this._commands.delete(e.id)&&this._onDidChangeMenu.fire(pC.for(fC.CommandPalette))}))}getCommand(e){return this._commands.get(e)}getCommands(){let e=new Map;return this._commands.forEach((t,n)=>e.set(n,t)),e}appendMenuItem(e,t){let n=this._menuItems.get(e);n||(n=new Kn,this._menuItems.set(e,n));let r=n.push(t);return this._onDidChangeMenu.fire(pC.for(e)),jn(S(()=>{r(),this._onDidChangeMenu.fire(pC.for(e))}))}appendMenuItems(e){let t=new C;for(let{id:n,item:r}of e)t.add(this.appendMenuItem(n,r));return t}getMenuItems(e){let t;return t=this._menuItems.has(e)?[...this._menuItems.get(e)]:[],e===fC.CommandPalette&&this._appendImplicitItems(t),t}_appendImplicitItems(e){let t=new Set;for(let n of e)dC(n)&&(t.add(n.command.id),n.alt&&t.add(n.alt.id));this._commands.forEach((n,r)=>{t.has(r)||e.push({command:n})})}},hC=class extends eS{constructor(e,t,n){super(`submenuitem.${e.submenu.id}`,typeof e.title==`string`?e.title:e.title.value,n,`submenu`),this.item=e,this.hideActions=t}},gC=uC=class{static label(e,t){return t?.renderShortTitle&&e.shortTitle?typeof e.shortTitle==`string`?e.shortTitle:e.shortTitle.value:typeof e.title==`string`?e.title:e.title.value}constructor(e,t,n,r,i,a,o){this.hideActions=r,this.menuKeybinding=i,this._commandService=o,this.id=e.id,this.label=uC.label(e,n),this.tooltip=(typeof e.tooltip==`string`?e.tooltip:e.tooltip?.value)??``,this.enabled=!e.precondition||a.contextMatchesRules(e.precondition),this.checked=void 0;let s;if(e.toggled){let t=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=a.contextMatchesRules(t.condition),this.checked&&t.tooltip&&(this.tooltip=typeof t.tooltip==`string`?t.tooltip:t.tooltip.value),this.checked&&lC.isThemeIcon(t.icon)&&(s=t.icon),this.checked&&t.title&&(this.label=typeof t.title==`string`?t.title:t.title.value)}s||=lC.isThemeIcon(e.icon)?e.icon:void 0,this.item=e,this.alt=t?new uC(t,void 0,n,r,void 0,a,o):void 0,this._options=n,this.class=s&&lC.asClassName(s)}run(...e){let t=[];return this._options?.arg&&(t=[...t,this._options.arg]),this._options?.shouldForwardArgs&&(t=[...t,...e]),this._commandService.executeCommand(this.id,...t)}};gC=uC=t([n(5,uS),n(6,dS)],gC);var _C=class{constructor(e){this.desc=e}};function nne(e){let t=[],n=new e,{f1:r,menu:i,keybinding:a,...o}=n.desc;if(fS.getCommand(o.id))throw Error(`Cannot register two commands with the same id: ${o.id}`);if(t.push(fS.registerCommand({id:o.id,handler:(e,...t)=>n.run(e,...t),metadata:o.metadata??{description:n.desc.title}})),Array.isArray(i))for(let e of i)t.push(mC.appendMenuItem(e.id,{command:{...o,precondition:e.precondition===null?void 0:o.precondition},...e}));else i&&t.push(mC.appendMenuItem(i.id,{command:{...o,precondition:i.precondition===null?void 0:o.precondition},...i}));if(r&&(t.push(mC.appendMenuItem(fC.CommandPalette,{command:o,when:o.precondition})),t.push(mC.addCommand(o))),Array.isArray(a))for(let e of a)t.push(aC.registerKeybindingRule({...e,id:o.id,when:o.precondition?jS.and(o.precondition,e.when):e.when}));else a&&t.push(aC.registerKeybindingRule({...a,id:o.id,when:o.precondition?jS.and(o.precondition,a.when):a.when}));return{dispose(){Nn(t)}}}var vC={},yC=new Map;function rne(e){return yC.has(e)}var ine=class extends w{constructor(){super(...arguments),this._currentCssStyle=``,this._styleSheet=void 0}setStyle(e){e!==this._currentCssStyle&&(this._currentCssStyle=e,this._styleSheet?this._styleSheet.textContent=e:this._styleSheet=xC(i.document.head,t=>t.textContent=e,this._store))}dispose(){super.dispose(),this._styleSheet=void 0}},bC;function ane(e){let t=e.getRootNode();t_(t)&&(bC=t)}function xC(e=i.document.head,t,n){let r=v_(`style`);if(r.type=`text/css`,r.media=`screen`,r.setAttribute(`data-vscode`,`true`),t?.(r),e.appendChild(r),n&&n.add(S(()=>r.remove())),e===i.document.head){let e=new Set;yC.set(r,e),n&&n.add(S(()=>yC.delete(r)));for(let{window:t,disposables:a}of Xh()){if(t===i)continue;let o=a.add(SC(r,e,t.document.head));n?.add(o)}if(bC!==void 0){let t=SC(r,e,bC);n?.add(t)}}return r}function one(e){let t=new C;for(let[n,r]of yC)t.add(SC(n,r,e.document.head));return t}function SC(e,t,n){let r=new C,i=e.cloneNode(!0);n.appendChild(i),r.add(S(()=>i.remove()));for(let t of TC(e))i.sheet?.insertRule(t.cssText,i.sheet?.cssRules.length);return r.add(f_.observe(e,r,{childList:!0,subtree:Ef,characterData:Ef})(()=>{i.textContent=e.textContent})),t.add(i),r.add(S(()=>t.delete(i))),r}var CC=null;function wC(){return CC||=xC(),CC}function TC(e){return e?.sheet?.rules?e.sheet.rules:e?.sheet?.cssRules?e.sheet.cssRules:[]}function EC(e,t,n=wC()){if(!(!n||!t)){n.sheet?.insertRule(`${e} {${t}}`,0);for(let r of yC.get(n)??[])EC(e,t,r)}}function DC(e,t=wC()){if(!t)return;let n=TC(t),r=[];for(let t=0;t<n.length;t++){let i=n[t];sne(i)&&i.selectorText.indexOf(e)!==-1&&r.push(t)}for(let e=r.length-1;e>=0;e--)t.sheet?.deleteRule(r[e]);for(let n of yC.get(t)??[])DC(e,n)}function sne(e){return typeof e.selectorText==`string`}function cne(e){let t=new C,n=t.add(new ine);return t.add(bh(t=>{n.setStyle(e.read(t))})),t}function OC(e){return e}function kC(e,t){if(e!==void 0){let n=e.match(/^\s*var\((.+)\)$/);if(n){let e=n[1].split(`,`,2);return e.length===2&&(t=kC(e[1].trim(),t)),`var(${e[0]}, ${t})`}return e}return t}function lne(e){let t=e.replaceAll(/[^\w.%+-]/gi,``);return t!==e&&console.warn(`CSS size ${e} modified to ${t} to be safe for CSS`),OC(t)}function une(e){let t=e.replaceAll(/[^[0-9a-fA-F#]]/gi,``);return t!==e&&console.warn(`CSS hex color ${e} modified to ${t} to be safe for CSS`),OC(t)}function AC(e){let t=e.replaceAll(/[^_\-a-z0-9]/gi,``);return t!==e&&console.warn(`CSS ident value ${e} modified to ${t} to be safe for CSS`),OC(t)}function jC(e){return OC(`'${e.replaceAll(/'/g,`\\000027`)}'`)}function MC(e){return e?PC`url('${OC(CSS.escape(Ss.uriToBrowserUri(e).toString(!0)))}')`:OC(`url('')`)}function NC(e,t=!1){let n=CSS.escape(e);return!t&&n!==e&&console.warn(`CSS class name ${e} modified to ${n} to be safe for CSS`),OC(n)}function PC(e,...t){return OC(e.reduce((e,n,r)=>{let i=t[r]||``;return e+n+i},``))}var FC=class{constructor(){this._parts=[]}push(...e){this._parts.push(...e)}join(e=`
`){return OC(this._parts.join(e))}},IC=class{get event(){return this.emitter.event}constructor(e,t,n){let r=e=>this.emitter.fire(e);this.emitter=new E({onWillAddFirstListener:()=>e.addEventListener(t,r,n),onDidRemoveLastListener:()=>e.removeEventListener(t,r,n)})}dispose(){this.emitter.dispose()}},LC;(function(e){e.Tap=`-monaco-gesturetap`,e.Change=`-monaco-gesturechange`,e.Start=`-monaco-gesturestart`,e.End=`-monaco-gesturesend`,e.Contextmenu=`-monaco-gesturecontextmenu`})(LC||={});var RC=class e extends w{static#e=this.SCROLL_FRICTION=-.005;static#t=this.HOLD_DELAY=700;static#n=this.CLEAR_TAP_COUNT_TIME=400;constructor(){super(),this.dispatched=!1,this.targets=new Kn,this.ignoreTargets=new Kn,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(T.runAndSubscribe($h,({window:e,disposables:t})=>{t.add(L(e.document,`touchstart`,e=>this.onTouchStart(e),{passive:!1})),t.add(L(e.document,`touchend`,t=>this.onTouchEnd(e,t))),t.add(L(e.document,`touchmove`,e=>this.onTouchMove(e),{passive:!1}))},{window:i,disposables:this._store}))}static addTarget(t){return e.isTouchDevice()?(e.INSTANCE||=jn(new e),S(e.INSTANCE.targets.push(t))):w.None}static ignoreTarget(t){return e.isTouchDevice()?(e.INSTANCE||=jn(new e),S(e.INSTANCE.ignoreTargets.push(t))):w.None}static isTouchDevice(){return`ontouchstart`in i||i.navigator.maxTouchPoints>0}static isHoverDevice(){return i.matchMedia(`(hover: hover)`).matches}dispose(){this.handle&&=(this.handle.dispose(),null),super.dispose()}onTouchStart(e){let t=Date.now();this.handle&&=(this.handle.dispose(),null);for(let n=0,r=e.targetTouches.length;n<r;n++){let r=e.targetTouches.item(n);this.activeTouches[r.identifier]={id:r.identifier,initialTarget:r.target,initialTimeStamp:t,initialPageX:r.pageX,initialPageY:r.pageY,rollingTimestamps:[t],rollingPageX:[r.pageX],rollingPageY:[r.pageY]};let i=this.newGestureEvent(LC.Start,r.target);i.pageX=r.pageX,i.pageY=r.pageY,this.dispatchEvent(i)}this.dispatched&&=(e.preventDefault(),e.stopPropagation(),!1)}onTouchEnd(t,n){let r=Date.now(),i=Object.keys(this.activeTouches).length;for(let a=0,o=n.changedTouches.length;a<o;a++){let o=n.changedTouches.item(a);if(!this.activeTouches.hasOwnProperty(String(o.identifier))){console.warn(`move of an UNKNOWN touch`,o);continue}let s=this.activeTouches[o.identifier],c=Date.now()-s.initialTimeStamp;if(c<e.HOLD_DELAY&&Math.abs(s.initialPageX-s.rollingPageX.at(-1))<30&&Math.abs(s.initialPageY-s.rollingPageY.at(-1))<30){let e=this.newGestureEvent(LC.Tap,s.initialTarget);e.pageX=s.rollingPageX.at(-1),e.pageY=s.rollingPageY.at(-1),this.dispatchEvent(e)}else if(c>=e.HOLD_DELAY&&Math.abs(s.initialPageX-s.rollingPageX.at(-1))<30&&Math.abs(s.initialPageY-s.rollingPageY.at(-1))<30){let e=this.newGestureEvent(LC.Contextmenu,s.initialTarget);e.pageX=s.rollingPageX.at(-1),e.pageY=s.rollingPageY.at(-1),this.dispatchEvent(e)}else if(i===1){let e=s.rollingPageX.at(-1),n=s.rollingPageY.at(-1),i=s.rollingTimestamps.at(-1)-s.rollingTimestamps[0],a=e-s.rollingPageX[0],o=n-s.rollingPageY[0],c=[...this.targets].filter(e=>s.initialTarget instanceof Node&&e.contains(s.initialTarget));this.inertia(t,c,r,Math.abs(a)/i,a>0?1:-1,e,Math.abs(o)/i,o>0?1:-1,n)}this.dispatchEvent(this.newGestureEvent(LC.End,s.initialTarget)),delete this.activeTouches[o.identifier]}this.dispatched&&=(n.preventDefault(),n.stopPropagation(),!1)}newGestureEvent(e,t){let n=document.createEvent(`CustomEvent`);return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}dispatchEvent(t){if(t.type===LC.Tap){let n=new Date().getTime(),r=0;r=n-this._lastSetTapCountTime>e.CLEAR_TAP_COUNT_TIME?1:2,this._lastSetTapCountTime=n,t.tapCount=r}else (t.type===LC.Change||t.type===LC.Contextmenu)&&(this._lastSetTapCountTime=0);if(t.initialTarget instanceof Node){for(let e of this.ignoreTargets)if(e.contains(t.initialTarget))return;let e=[];for(let n of this.targets)if(n.contains(t.initialTarget)){let r=0,i=t.initialTarget;for(;i&&i!==n;)r++,i=i.parentElement;e.push([r,n])}e.sort((e,t)=>e[0]-t[0]);for(let[n,r]of e)r.dispatchEvent(t),this.dispatched=!0}}inertia(t,n,r,i,a,o,s,c,l){this.handle=xg(t,()=>{let u=Date.now(),d=u-r,f=0,p=0,m=!0;i+=e.SCROLL_FRICTION*d,s+=e.SCROLL_FRICTION*d,i>0&&(m=!1,f=a*i*d),s>0&&(m=!1,p=c*s*d);let h=this.newGestureEvent(LC.Change);h.translationX=f,h.translationY=p,n.forEach(e=>e.dispatchEvent(h)),m||this.inertia(t,n,u,i,a,o+f,s,c,l+p)})}onTouchMove(e){let t=Date.now();for(let n=0,r=e.changedTouches.length;n<r;n++){let r=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(r.identifier))){console.warn(`end of an UNKNOWN touch`,r);continue}let i=this.activeTouches[r.identifier],a=this.newGestureEvent(LC.Change,i.initialTarget);a.translationX=r.pageX-i.rollingPageX.at(-1),a.translationY=r.pageY-i.rollingPageY.at(-1),a.pageX=r.pageX,a.pageY=r.pageY,this.dispatchEvent(a),i.rollingPageX.length>3&&(i.rollingPageX.shift(),i.rollingPageY.shift(),i.rollingTimestamps.shift()),i.rollingPageX.push(r.pageX),i.rollingPageY.push(r.pageY),i.rollingTimestamps.push(t)}this.dispatched&&=(e.preventDefault(),e.stopPropagation(),!1)}};s({});var zC=2e4,BC,VC,HC,UC,WC;function dne(e){BC=v_(`div`),BC.className=`monaco-aria-container`;let t=()=>{let e=v_(`div`);return e.className=`monaco-alert`,e.setAttribute(`role`,`alert`),e.setAttribute(`aria-atomic`,`true`),BC.appendChild(e),e};VC=t(),HC=t();let n=()=>{let e=v_(`div`);return e.className=`monaco-status`,e.setAttribute(`aria-live`,`polite`),e.setAttribute(`aria-atomic`,`true`),BC.appendChild(e),e};UC=n(),WC=n(),e.appendChild(BC)}function GC(e){BC&&(VC.textContent===e?(og(VC),qC(HC,e)):(og(HC),qC(VC,e)))}function KC(e){BC&&(UC.textContent===e?(og(UC),qC(WC,e)):(og(WC),qC(UC,e)))}function qC(e,t){og(e),t.length>zC&&(t=t.substr(0,zC)),e.textContent=t,e.style.visibility=`hidden`,e.style.visibility=`visible`}var fne=class{constructor(e){this.spliceables=e}splice(e,t,n){this.spliceables.forEach(r=>r.splice(e,t,n))}};function pne(e){let t=mne(e);if(t&&t.length>0)return new Uint32Array(t)}var JC=0,YC=new Uint32Array(10);function mne(e){if(JC=0,XC(e,$C,ZC.InitialConsonant),JC>0||(XC(e,ew,ZC.Vowel),JC>0)||(XC(e,tw,ZC.FinalConsonant),JC>0)||(XC(e,nw,ZC.CompatibilityJamo),JC))return YC.subarray(0,JC);if(e>=44032&&e<=55203){let t=e-44032,n=t%588,r=Math.floor(t/588),i=Math.floor(n/28),a=n%28-1;if(r<$C.length?XC(r,$C,0):ZC.InitialConsonant+r-ZC.CompatibilityJamo<nw.length&&XC(ZC.InitialConsonant+r,nw,ZC.CompatibilityJamo),i<ew.length?XC(i,ew,0):ZC.Vowel+i-ZC.CompatibilityJamo<nw.length&&XC(ZC.Vowel+i-ZC.CompatibilityJamo,nw,ZC.CompatibilityJamo),a>=0&&(a<tw.length?XC(a,tw,0):ZC.FinalConsonant+a-ZC.CompatibilityJamo<nw.length&&XC(ZC.FinalConsonant+a-ZC.CompatibilityJamo,nw,ZC.CompatibilityJamo)),JC>0)return YC.subarray(0,JC)}}function XC(e,t,n){e>=n&&e<n+t.length&&hne(t[e-n])}function hne(e){e!==G.NUL&&(YC[JC++]=e&255,e>>8&&(YC[JC++]=e>>8&255),e>>16&&(YC[JC++]=e>>16&255))}var ZC;(function(e){e[e.InitialConsonant=4352]=`InitialConsonant`,e[e.Vowel=4449]=`Vowel`,e[e.FinalConsonant=4520]=`FinalConsonant`,e[e.CompatibilityJamo=12593]=`CompatibilityJamo`})(ZC||={});var G;(function(e){e[e.NUL=0]=`NUL`,e[e.A=65]=`A`,e[e.B=66]=`B`,e[e.C=67]=`C`,e[e.D=68]=`D`,e[e.E=69]=`E`,e[e.F=70]=`F`,e[e.G=71]=`G`,e[e.H=72]=`H`,e[e.I=73]=`I`,e[e.J=74]=`J`,e[e.K=75]=`K`,e[e.L=76]=`L`,e[e.M=77]=`M`,e[e.N=78]=`N`,e[e.O=79]=`O`,e[e.P=80]=`P`,e[e.Q=81]=`Q`,e[e.R=82]=`R`,e[e.S=83]=`S`,e[e.T=84]=`T`,e[e.U=85]=`U`,e[e.V=86]=`V`,e[e.W=87]=`W`,e[e.X=88]=`X`,e[e.Y=89]=`Y`,e[e.Z=90]=`Z`,e[e.a=97]=`a`,e[e.b=98]=`b`,e[e.c=99]=`c`,e[e.d=100]=`d`,e[e.e=101]=`e`,e[e.f=102]=`f`,e[e.g=103]=`g`,e[e.h=104]=`h`,e[e.i=105]=`i`,e[e.j=106]=`j`,e[e.k=107]=`k`,e[e.l=108]=`l`,e[e.m=109]=`m`,e[e.n=110]=`n`,e[e.o=111]=`o`,e[e.p=112]=`p`,e[e.q=113]=`q`,e[e.r=114]=`r`,e[e.s=115]=`s`,e[e.t=116]=`t`,e[e.u=117]=`u`,e[e.v=118]=`v`,e[e.w=119]=`w`,e[e.x=120]=`x`,e[e.y=121]=`y`,e[e.z=122]=`z`})(G||={});var QC;(function(e){e[e.fa=24934]=`fa`,e[e.fg=26470]=`fg`,e[e.fq=29030]=`fq`,e[e.fr=29286]=`fr`,e[e.ft=29798]=`ft`,e[e.fv=30310]=`fv`,e[e.fx=30822]=`fx`,e[e.hk=27496]=`hk`,e[e.hl=27752]=`hl`,e[e.ho=28520]=`ho`,e[e.ml=27757]=`ml`,e[e.nj=27246]=`nj`,e[e.nl=27758]=`nl`,e[e.np=28782]=`np`,e[e.qt=29809]=`qt`,e[e.rt=29810]=`rt`,e[e.sg=26483]=`sg`,e[e.sw=30579]=`sw`})(QC||={});var $C=new Uint8Array([G.r,G.R,G.s,G.e,G.E,G.f,G.a,G.q,G.Q,G.t,G.T,G.d,G.w,G.W,G.c,G.z,G.x,G.v,G.g]),ew=new Uint16Array([G.k,G.o,G.i,G.O,G.j,G.p,G.u,G.P,G.h,QC.hk,QC.ho,QC.hl,G.y,G.n,QC.nj,QC.np,QC.nl,G.b,G.m,QC.ml,G.l]),tw=new Uint16Array([G.r,G.R,QC.rt,G.s,QC.sw,QC.sg,G.e,G.f,QC.fr,QC.fa,QC.fq,QC.ft,QC.fx,QC.fv,QC.fg,G.a,G.q,QC.qt,G.t,G.T,G.d,G.w,G.c,G.z,G.x,G.v,G.g]),nw=new Uint16Array([G.r,G.R,QC.rt,G.s,QC.sw,QC.sg,G.e,G.E,G.f,QC.fr,QC.fa,QC.fq,QC.ft,QC.fx,QC.fv,QC.fg,G.a,G.q,G.Q,QC.qt,G.t,G.T,G.d,G.w,G.W,G.c,G.z,G.x,G.v,G.g,G.k,G.o,G.i,G.O,G.j,G.p,G.u,G.P,G.h,QC.hk,QC.ho,QC.hl,G.y,G.n,QC.nj,QC.np,QC.nl,G.b,G.m,QC.ml,G.l]),gne=new gn(1e4);function _ne(e){return yne(e,`NFD`,gne)}var vne=/[^\u0000-\u0080]/;function yne(e,t,n){if(!e)return e;let r=n.get(e);if(r)return r;let i;return i=vne.test(e)?e.normalize(t):e,n.set(e,i),i}var rw=function(){let e=new gn(1e4),t=/[\u0300-\u036f]/g;return function(n){let r=e.get(n);if(r)return r;let i=_ne(n).replace(t,``),a=(i.length===n.length?i:n).toLowerCase();return e.set(n,a),a}}();function iw(...e){return function(t,n){for(let r=0,i=e.length;r<i;r++){let i=e[r](t,n);if(i)return i}return null}}ow.bind(void 0,!1);var aw=ow.bind(void 0,!0);function ow(e,t,n){if(!n||n.length<t.length)return null;let r;return r=e?no(n,t):n.indexOf(t)===0,r?t.length>0?[{start:0,end:t.length}]:[]:null}function sw(e,t){if(e.length>t.length)return null;let n=t.toLowerCase().indexOf(e.toLowerCase());return n===-1?null:[{start:n,end:n+e.length}]}function bne(e,t){if(e.length>t.length)return null;e=rw(e),t=rw(t);let n=t.indexOf(e);return n===-1?null:[{start:n,end:n+e.length}]}function cw(e,t){return e.length>t.length?null:lw(e.toLowerCase(),t.toLowerCase(),0,0)}function lw(e,t,n,r){if(n===e.length)return[];if(r===t.length)return null;if(e[n]===t[r]){let i=null;return(i=lw(e,t,n+1,r+1))?bw({start:r,end:r+1},i):null}return lw(e,t,n,r+1)}function uw(e){return O.a<=e&&e<=O.z}function dw(e){return O.A<=e&&e<=O.Z}function fw(e){return O.Digit0<=e&&e<=O.Digit9}function pw(e){return e===O.Space||e===O.Tab||e===O.LineFeed||e===O.CarriageReturn}var mw=new Set;`()[]{}<>\`'"-/;:,.?!`.split(``).forEach(e=>mw.add(e.charCodeAt(0)));function hw(e){return pw(e)||mw.has(e)}function gw(e,t){return e===t||hw(e)&&hw(t)}var _w=new Map;function vw(e){if(_w.has(e))return _w.get(e);let t,n=pne(e);return n&&(t=n),_w.set(e,t),t}function yw(e){return uw(e)||dw(e)||fw(e)}function bw(e,t){return t.length===0?t=[e]:e.end===t[0].start?t[0].start=e.start:t.unshift(e),t}function xw(e,t){for(let n=t;n<e.length;n++){let t=e.charCodeAt(n);if(dw(t)||fw(t)||n>0&&!yw(e.charCodeAt(n-1)))return n}return e.length}function Sw(e,t,n,r){if(n===e.length)return[];if(r===t.length||e[n]!==t[r].toLowerCase())return null;{let i=null,a=r+1;for(i=Sw(e,t,n+1,r+1);!i&&(a=xw(t,a))<t.length;)i=Sw(e,t,n+1,a),a++;return i===null?null:bw({start:r,end:r+1},i)}}function xne(e){let t=0,n=0,r=0,i=0,a=0;for(let o=0;o<e.length;o++)a=e.charCodeAt(o),dw(a)&&t++,uw(a)&&n++,yw(a)&&r++,fw(a)&&i++;return{upperPercent:t/e.length,lowerPercent:n/e.length,alphaPercent:r/e.length,numericPercent:i/e.length}}function Sne(e){let{upperPercent:t,lowerPercent:n}=e;return n===0&&t>.6}function Cne(e){let{upperPercent:t,lowerPercent:n,alphaPercent:r,numericPercent:i}=e;return n>.2&&t<.8&&r>.6&&i<.2}function wne(e){let t=0,n=0,r=0,i=0;for(let a=0;a<e.length;a++)r=e.charCodeAt(a),dw(r)&&t++,uw(r)&&n++,pw(r)&&i++;return(t===0||n===0)&&i===0?e.length<=30:t<=5}function Cw(e,t){if(!t||(t=t.trim(),t.length===0)||!wne(e))return null;t.length>60&&(t=t.substring(0,60));let n=xne(t);if(!Cne(n)){if(!Sne(n))return null;t=t.toLowerCase()}let r=null,i=0;for(e=e.toLowerCase();i<t.length&&(r=Sw(e,t,0,i))===null;)i=xw(t,i+1);return r}function Tne(e,t,n=!1){if(!t||t.length===0)return null;let r=null,i=0;for(e=rw(e),t=rw(t);i<t.length&&(r=ww(e,t,0,i,n),r===null);)i=Tw(t,i+1);return r}function ww(e,t,n,r,i){let a=0;if(n===e.length)return[];if(r===t.length)return null;if(!gw(e.charCodeAt(n),t.charCodeAt(r))){let i=vw(e.charCodeAt(n));if(!i)return null;for(let e=0;e<i.length;e++)if(!gw(i[e],t.charCodeAt(r+e)))return null;a+=i.length-1}let o=null,s=r+a+1;if(o=ww(e,t,n+1,s,i),!i)for(;!o&&(s=Tw(t,s))<t.length;)o=ww(e,t,n+1,s,i),s++;if(!o)return null;if(e.charCodeAt(n)!==t.charCodeAt(r)){let i=vw(e.charCodeAt(n));if(!i)return o;for(let e=0;e<i.length;e++)if(i[e]!==t.charCodeAt(r+e))return o}return bw({start:r,end:r+a+1},o)}function Tw(e,t){for(let n=t;n<e.length;n++)if(hw(e.charCodeAt(n))||n>0&&hw(e.charCodeAt(n-1)))return n;return e.length}var Ene=iw(aw,Cw,sw),Dne=iw(aw,Cw,cw),Ew=new gn(1e4);function Dw(e,t,n=!1){if(typeof e!=`string`||typeof t!=`string`)return null;let r=Ew.get(e);r||(r=new RegExp(za(e),`i`),Ew.set(e,r));let i=r.exec(t);return i?[{start:i.index,end:i.index+i[0].length}]:n?Dne(e,t):Ene(e,t)}function Ow(e,t){let n=Gw(e,e.toLowerCase(),0,t,t.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return n?kw(n):null}function One(e,t,n,r,i,a){let o=Math.min(13,e.length);for(;n<o;n++){let o=Gw(e,t,n,r,i,a,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(o)return o}return[0,a]}function kw(e){if(e===void 0)return[];let t=[],n=e[1];for(let r=e.length-1;r>1;r--){let i=e[r]+n,a=t[t.length-1];a&&a.end===i?a.end=i+1:t.push({start:i,end:i+1})}return t}var Aw=128;function jw(){let e=[],t=[];for(let e=0;e<=Aw;e++)t[e]=0;for(let n=0;n<=Aw;n++)e.push(t.slice(0));return e}function Mw(e){let t=[];for(let n=0;n<=e;n++)t[n]=0;return t}var Nw=Mw(2*Aw),Pw=Mw(2*Aw),Fw=jw(),Iw=jw(),Lw=jw();function Rw(e,t){if(t<0||t>=e.length)return!1;let n=e.codePointAt(t);switch(n){case O.Underline:case O.Dash:case O.Period:case O.Space:case O.Slash:case O.Backslash:case O.SingleQuote:case O.DoubleQuote:case O.Colon:case O.DollarSign:case O.LessThan:case O.GreaterThan:case O.OpenParen:case O.CloseParen:case O.OpenSquareBracket:case O.CloseSquareBracket:case O.OpenCurlyBrace:case O.CloseCurlyBrace:return!0;case void 0:return!1;default:return!!To(n)}}function zw(e,t){if(t<0||t>=e.length)return!1;switch(e.charCodeAt(t)){case O.Space:case O.Tab:return!0;default:return!1}}function Bw(e,t,n){return t[e]!==n[e]}function Vw(e,t,n,r,i,a,o=!1){for(;t<n&&i<a;)e[t]===r[i]&&(o&&(Nw[t]=i),t+=1),i+=1;return t===n}var Hw;(function(e){e[e.Diag=1]=`Diag`,e[e.Left=2]=`Left`,e[e.LeftLeft=3]=`LeftLeft`})(Hw||={});var Uw;(function(e){e.Default=[-100,0];function t(e){return!e||e.length===2&&e[0]===-100&&e[1]===0}e.isDefault=t})(Uw||={});var Ww=class{static#e=this.default={boostFullMatch:!0,firstMatchCanBeWeak:!1};constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}};function Gw(e,t,n,r,i,a,o=Ww.default){let s=e.length>Aw?Aw:e.length,c=r.length>Aw?Aw:r.length;if(n>=s||a>=c||s-n>c-a||!Vw(t,n,s,i,a,c,!0))return;kne(s,c,n,a,t,i);let l=1,u=1,d=n,f=a,p=[!1];for(l=1,d=n;d<s;l++,d++){let o=Nw[d],m=Pw[d],h=d+1<s?Pw[d+1]:c;for(u=o-a+1,f=o;f<h;u++,f++){let s=-(2**53-1),h=!1;f<=m&&(s=Ane(e,t,d,n,r,i,f,c,a,Fw[l-1][u-1]===0,p));let g=0;s!==-(2**53-1)&&(h=!0,g=s+Iw[l-1][u-1]);let _=f>o,v=_?Iw[l][u-1]+(Fw[l][u-1]>0?-5:0):0,ee=f>o+1&&Fw[l][u-1]>0,te=ee?Iw[l][u-2]+(Fw[l][u-2]>0?-5:0):0;if(ee&&(!_||te>=v)&&(!h||te>=g))Iw[l][u]=te,Lw[l][u]=Hw.LeftLeft,Fw[l][u]=0;else if(_&&(!h||v>=g))Iw[l][u]=v,Lw[l][u]=Hw.Left,Fw[l][u]=0;else if(h)Iw[l][u]=g,Lw[l][u]=Hw.Diag,Fw[l][u]=Fw[l-1][u-1]+1;else throw Error(`not possible`)}}if(!p[0]&&!o.firstMatchCanBeWeak)return;l--,u--;let m=[Iw[l][u],a],h=0,g=0;for(;l>=1;){let e=u;do{let t=Lw[l][e];if(t===Hw.LeftLeft)e-=2;else if(t===Hw.Left)--e;else break}while(e>=1);h>1&&t[n+l-1]===i[a+u-1]&&!Bw(e+a-1,r,i)&&h+1>Fw[l][e]&&(e=u),e===u?h++:h=1,g||=e,l--,u=e-1,m.push(u)}c-a===s&&o.boostFullMatch&&(m[0]+=2);let _=g-s;return m[0]-=_,m}function kne(e,t,n,r,i,a){let o=e-1,s=t-1;for(;o>=n&&s>=r;)i[o]===a[s]&&(Pw[o]=s,o--),s--}function Ane(e,t,n,r,i,a,o,s,c,l,u){if(t[n]!==a[o])return-(2**53-1);let d=1,f=!1;return o===n-r?d=e[n]===i[o]?7:5:Bw(o,i,a)&&(o===0||!Bw(o-1,i,a))?(d=e[n]===i[o]?7:5,f=!0):Rw(a,o)&&(o===0||!Rw(a,o-1))?d=5:(Rw(a,o-1)||zw(a,o-1))&&(d=5,f=!0),d>1&&n===r&&(u[0]=!0),f||=Bw(o,i,a)||Rw(a,o-1)||zw(a,o-1),n===r?o>c&&(d-=f?3:5):l?d+=f?2:0:d+=f?0:1,o+1===s&&(d-=f?3:5),d}function jne(e,t,n,r,i,a,o){return Mne(e,t,n,r,i,a,!0,o)}function Mne(e,t,n,r,i,a,o,s){let c=Gw(e,t,n,r,i,a,s);if(e.length>=3){let t=Math.min(7,e.length-1);for(let o=n+1;o<t;o++){let t=Nne(e,o);if(t){let e=Gw(t,t.toLowerCase(),n,r,i,a,s);e&&(e[0]-=3,(!c||e[0]>c[0])&&(c=e))}}}return c}function Nne(e,t){if(t+1>=e.length)return;let n=e[t],r=e[t+1];if(n!==r)return e.slice(0,t)+r+n+e.slice(t+2)}var Pne=`notSelectable`,Kw;(function(e){e[e.Copy=0]=`Copy`,e[e.Move=1]=`Move`})(Kw||={});var qw;(function(e){e.Over=`drop-target`,e.Before=`drop-target-before`,e.After=`drop-target-after`})(qw||={});var Jw=class extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}},Fne=class{constructor(){this.cache=new WeakMap}getHeight(e){return this.cache.get(e)??this.estimateHeight(e)}setDynamicHeight(e,t){t>0&&this.cache.set(e,t)}},Yw=Object.freeze({text:`text/plain`,binary:`application/octet-stream`,unknown:`application/unknown`,markdown:`text/markdown`,latex:`text/latex`,uriList:`text/uri-list`,html:`text/html`}),Ine={".css":`text/css`,".csv":`text/csv`,".htm":`text/html`,".html":`text/html`,".ics":`text/calendar`,".js":`text/javascript`,".mjs":`text/javascript`,".txt":`text/plain`,".xml":`text/xml`},Xw={".aac":`audio/x-aac`,".avi":`video/x-msvideo`,".bmp":`image/bmp`,".flv":`video/x-flv`,".gif":`image/gif`,".ico":`image/x-icon`,".jpe":`image/jpg`,".jpeg":`image/jpg`,".jpg":`image/jpg`,".m1v":`video/mpeg`,".m2a":`audio/mpeg`,".m2v":`video/mpeg`,".m3a":`audio/mpeg`,".mid":`audio/midi`,".midi":`audio/midi`,".mk3d":`video/x-matroska`,".mks":`video/x-matroska`,".mkv":`video/x-matroska`,".mov":`video/quicktime`,".movie":`video/x-sgi-movie`,".mp2":`audio/mpeg`,".mp2a":`audio/mpeg`,".mp3":`audio/mpeg`,".mp4":`video/mp4`,".mp4a":`audio/mp4`,".mp4v":`video/mp4`,".mpe":`video/mpeg`,".mpeg":`video/mpeg`,".mpg":`video/mpeg`,".mpg4":`video/mp4`,".mpga":`audio/mpeg`,".oga":`audio/ogg`,".ogg":`audio/ogg`,".opus":`audio/opus`,".ogv":`video/ogg`,".png":`image/png`,".psd":`image/vnd.adobe.photoshop`,".qt":`video/quicktime`,".spx":`audio/ogg`,".svg":`image/svg+xml`,".tga":`image/x-tga`,".tif":`image/tiff`,".tiff":`image/tiff`,".wav":`audio/x-wav`,".webm":`video/webm`,".webp":`image/webp`,".wma":`audio/x-ms-wma`,".wmv":`video/x-ms-wmv`,".woff":`application/font-woff`};function Lne(e){let t=Ine[ma(e).toLowerCase()];return t===void 0?Zw(e):t}function Zw(e){return Xw[ma(e).toLowerCase()]}function Rne(e){for(let t in Xw)if(Xw[t]===e)return t}var zne=/^(.+)\/(.+?)(;.+)?$/;function Bne(e,t){let n=zne.exec(e);return n?`${n[1].toLowerCase()}/${n[2].toLowerCase()}${n[3]??``}`:t?void 0:e}function Vne(e){return[`application/vnd.code.notebook.stdout`,`application/vnd.code.notebook.stderr`].includes(e)}var Hne=class extends w{constructor(e,t){super(),this.timeout=void 0,this._register(L(e,`dragover`,e=>{e.preventDefault(),this.timeout||=setTimeout(()=>{t(),this.timeout=void 0},800)})),[`dragleave`,`drop`,`dragend`].forEach(t=>{this._register(L(e,t,()=>{this.clearDragTimeout()}))})}clearDragTimeout(){this.timeout&&=(clearTimeout(this.timeout),void 0)}dispose(){super.dispose(),this.clearDragTimeout()}},Qw={RESOURCES:`ResourceURLs`,DOWNLOAD_URL:`DownloadURL`,FILES:`Files`,TEXT:Yw.text,INTERNAL_URI_LIST:`application/vnd.code.uri-list`},$w=class{constructor(e){this.domNode=e,this._maxWidth=``,this._width=``,this._height=``,this._top=``,this._left=``,this._bottom=``,this._right=``,this._paddingTop=``,this._paddingLeft=``,this._paddingBottom=``,this._paddingRight=``,this._fontFamily=``,this._fontWeight=``,this._fontSize=``,this._fontStyle=``,this._fontFeatureSettings=``,this._fontVariationSettings=``,this._textDecoration=``,this._lineHeight=``,this._letterSpacing=``,this._className=``,this._display=``,this._position=``,this._visibility=``,this._color=``,this._backgroundColor=``,this._layerHint=!1,this._contain=`none`,this._boxShadow=``}focus(){this.domNode.focus()}setMaxWidth(e){let t=eT(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){let t=eT(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){let t=eT(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){let t=eT(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){let t=eT(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){let t=eT(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){let t=eT(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingTop(e){let t=eT(e);this._paddingTop!==t&&(this._paddingTop=t,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(e){let t=eT(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(e){let t=eT(e);this._paddingBottom!==t&&(this._paddingBottom=t,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(e){let t=eT(e);this._paddingRight!==t&&(this._paddingRight=t,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){let t=eT(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){let t=eT(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){let t=eT(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?`translate3d(0px, 0px, 0px)`:``)}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}};function eT(e){return typeof e==`number`?`${e}px`:e}function tT(e){return new $w(e)}var nT=class{constructor(){this._hooks=new C,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,n,r,i){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=r,this._onStopCallback=i;let a=e;try{e.setPointerCapture(t),this._hooks.add(S(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{a=Yh(e)}this._hooks.add(L(a,R.POINTER_MOVE,e=>{if(e.buttons!==n){this.stopMonitoring(!0);return}e.preventDefault(),this._pointerMoveCallback(e)})),this._hooks.add(L(a,R.POINTER_UP,e=>this.stopMonitoring(!0)))}},rT=class extends w{onclick(e,t){this._register(L(e,R.CLICK,n=>t(new wp(Yh(e),n))))}onmousedown(e,t){this._register(L(e,R.MOUSE_DOWN,n=>t(new wp(Yh(e),n))))}onmouseover(e,t){this._register(L(e,R.MOUSE_OVER,n=>t(new wp(Yh(e),n))))}onmouseleave(e,t){this._register(L(e,R.MOUSE_LEAVE,n=>t(new wp(Yh(e),n))))}onkeydown(e,t){this._register(L(e,R.KEY_DOWN,e=>t(new vp(e))))}onkeyup(e,t){this._register(L(e,R.KEY_UP,e=>t(new vp(e))))}oninput(e,t){this._register(L(e,R.INPUT,t))}onblur(e,t){this._register(L(e,R.BLUR,t))}onfocus(e,t){this._register(L(e,R.FOCUS,t))}onchange(e,t){this._register(L(e,R.CHANGE,t))}ignoreGesture(e){return RC.ignoreTarget(e)}},Une=class extends rT{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=v_(`div`),this.bgDomNode.className=`arrow-background`,this.bgDomNode.style.position=`absolute`,this.bgDomNode.style.width=e.bgWidth+`px`,this.bgDomNode.style.height=e.bgHeight+`px`,e.top!==void 0&&(this.bgDomNode.style.top=`0px`),e.left!==void 0&&(this.bgDomNode.style.left=`0px`),e.bottom!==void 0&&(this.bgDomNode.style.bottom=`0px`),e.right!==void 0&&(this.bgDomNode.style.right=`0px`),this.domNode=v_(`div`),this.domNode.className=e.className,this.domNode.classList.add(...lC.asClassNameArray(e.icon)),this.domNode.style.position=`absolute`,this.domNode.style.width=`11px`,this.domNode.style.height=`11px`,e.top!==void 0&&(this.domNode.style.top=e.top+`px`),e.left!==void 0&&(this.domNode.style.left=e.left+`px`),e.bottom!==void 0&&(this.domNode.style.bottom=e.bottom+`px`),e.right!==void 0&&(this.domNode.style.right=e.right+`px`),this._pointerMoveMonitor=this._register(new nT),this._register(fg(this.bgDomNode,R.POINTER_DOWN,e=>this._arrowPointerDown(e))),this._register(fg(this.domNode,R.POINTER_DOWN,e=>this._arrowPointerDown(e))),this._pointerdownRepeatTimer=this._register(new Cg),this._pointerdownScheduleRepeatTimer=this._register(new vc)}_arrowPointerDown(e){!e.target||!b_(e.target)||(this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,Yh(e))},200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,e=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault())}},iT;(function(e){e[e.Auto=1]=`Auto`,e[e.Hidden=2]=`Hidden`,e[e.Visible=3]=`Visible`})(iT||={});var Wne=class e{constructor(e,t,n,r,i,a,o){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(t|=0,n|=0,r|=0,i|=0,a|=0,o|=0),this.rawScrollLeft=r,this.rawScrollTop=o,t<0&&(t=0),r+t>n&&(r=n-t),r<0&&(r=0),i<0&&(i=0),o+i>a&&(o=a-i),o<0&&(o=0),this.width=t,this.scrollWidth=n,this.scrollLeft=r,this.height=i,this.scrollHeight=a,this.scrollTop=o}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(t,n){return new e(this._forceIntegerValues,t.width===void 0?this.width:t.width,t.scrollWidth===void 0?this.scrollWidth:t.scrollWidth,n?this.rawScrollLeft:this.scrollLeft,t.height===void 0?this.height:t.height,t.scrollHeight===void 0?this.scrollHeight:t.scrollHeight,n?this.rawScrollTop:this.scrollTop)}withScrollPosition(t){return new e(this._forceIntegerValues,this.width,this.scrollWidth,t.scrollLeft===void 0?this.rawScrollLeft:t.scrollLeft,this.height,this.scrollHeight,t.scrollTop===void 0?this.rawScrollTop:t.scrollTop)}createScrollEvent(e,t){let n=this.width!==e.width,r=this.scrollWidth!==e.scrollWidth,i=this.scrollLeft!==e.scrollLeft,a=this.height!==e.height,o=this.scrollHeight!==e.scrollHeight,s=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:r,scrollLeftChanged:i,heightChanged:a,scrollHeightChanged:o,scrollTopChanged:s}}},aT=class extends w{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new E),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new Wne(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&=(this._smoothScrolling.dispose(),null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){let n=this._state.withScrollDimensions(e,t);this._setState(n,!!this._smoothScrolling),this._smoothScrolling?.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){let t=this._state.withScrollPosition(e);this._smoothScrolling&&=(this._smoothScrolling.dispose(),null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:e.scrollLeft===void 0?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:e.scrollTop===void 0?this._smoothScrolling.to.scrollTop:e.scrollTop};let n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let r;r=t?new cT(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=r}else{let t=this._state.withScrollPosition(e);this._smoothScrolling=cT.start(this._state,t,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;let e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){let n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}},oT=class{constructor(e,t,n){this.scrollLeft=e,this.scrollTop=t,this.isDone=n}};function sT(e,t){let n=t-e;return function(t){return e+n*qne(t)}}function Gne(e,t,n){return function(r){return r<n?e(r/n):t((r-n)/(1-n))}}var cT=class e{constructor(e,t,n,r){this.from=e,this.to=t,this.duration=r,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,n){if(Math.abs(e-t)>2.5*n){let r,i;return e<t?(r=e+.75*n,i=t-.75*n):(r=e-.75*n,i=t+.75*n),Gne(sT(e,r),sT(i,t),.33)}return sT(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){let t=(e-this.startTime)/this.duration;return t<1?new oT(this.scrollLeft(t),this.scrollTop(t),!1):new oT(this.to.scrollLeft,this.to.scrollTop,!0)}combine(t,n,r){return e.start(t,n,r)}static start(t,n,r){return r+=10,new e(t,n,Date.now()-10,r)}};function Kne(e){return e**3}function qne(e){return 1-Kne(1-e)}var Jne=class extends w{constructor(e,t,n){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new vc)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===iT.Hidden?!1:this._visibility===iT.Visible?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){let e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode?.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode?.setClassName(this._invisibleClassName+(e?` fade`:``)))}},Yne=140,lT=class extends rT{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new Jne(e.visibility,`visible scrollbar `+e.extraScrollbarClassName,`invisible scrollbar `+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new nT),this._shouldRender=!0,this.domNode=tT(v_(`div`)),this.domNode.setAttribute(`role`,`presentation`),this.domNode.setAttribute(`aria-hidden`,`true`),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition(`absolute`),this._register(L(this.domNode.domNode,R.POINTER_DOWN,e=>this._domNodePointerDown(e)))}_createArrow(e){let t=this._register(new Une(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,n,r){this.slider=tT(v_(`div`)),this.slider.setClassName(`slider`),this.slider.setPosition(`absolute`),this.slider.setTop(e),this.slider.setLeft(t),typeof n==`number`&&this.slider.setWidth(n),typeof r==`number`&&this.slider.setHeight(r),this.slider.setLayerHinting(!0),this.slider.setContain(`strict`),this.domNode.domNode.appendChild(this.slider.domNode),this._register(L(this.slider.domNode,R.POINTER_DOWN,e=>{e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))})),this.onclick(this.slider.domNode,e=>{e.leftButton&&e.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){let t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),r=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),i=this._sliderPointerPosition(e);n<=i&&i<=r?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,n;if(e.target===this.domNode.domNode&&typeof e.offsetX==`number`&&typeof e.offsetY==`number`)t=e.offsetX,n=e.offsetY;else{let r=Rg(this.domNode.domNode);t=e.pageX-r.left,n=e.pageY-r.top}let r=e.pointerType===`mouse`,i=e.button===0;if(i||!r){let e=this._pointerDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(e):this._scrollbarState.getDesiredScrollPositionFromOffset(e))}i&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!b_(e.target))return;let t=this._sliderPointerPosition(e),n=this._sliderOrthogonalPointerPosition(e),r=this._scrollbarState.clone();this.slider.toggleClassName(`active`,!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,e=>{let i=this._sliderOrthogonalPointerPosition(e),a=Math.abs(i-n);if(oi&&a>Yne){this._setDesiredScrollPositionNow(r.getScrollPosition());return}let o=this._sliderPointerPosition(e)-t;this._setDesiredScrollPositionNow(r.getDesiredScrollPositionFromDelta(o))},()=>{this.slider.toggleClassName(`active`,!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){let t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}},Xne=20,uT=class e{constructor(e,t,n,r,i,a){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(e),this._visibleSize=r,this._scrollSize=i,this._scrollPosition=a,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new e(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){let t=Math.round(e);return this._visibleSize===t?!1:(this._visibleSize=t,this._refreshComputedValues(),!0)}setScrollSize(e){let t=Math.round(e);return this._scrollSize===t?!1:(this._scrollSize=t,this._refreshComputedValues(),!0)}setScrollPosition(e){let t=Math.round(e);return this._scrollPosition===t?!1:(this._scrollPosition=t,this._refreshComputedValues(),!0)}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,n,r,i){let a=Math.max(0,n-e),o=Math.max(0,a-2*t),s=r>0&&r>n;if(!s)return{computedAvailableSize:Math.round(a),computedIsNeeded:s,computedSliderSize:Math.round(o),computedSliderRatio:0,computedSliderPosition:0};let c=Math.round(Math.max(Xne,Math.floor(n*o/r))),l=(o-c)/(r-n),u=i*l;return{computedAvailableSize:Math.round(a),computedIsNeeded:s,computedSliderSize:Math.round(c),computedSliderRatio:l,computedSliderPosition:Math.round(u)}}_refreshComputedValues(){let t=e._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=t.computedAvailableSize,this._computedIsNeeded=t.computedIsNeeded,this._computedSliderSize=t.computedSliderSize,this._computedSliderRatio=t.computedSliderRatio,this._computedSliderPosition=t.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;let t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;let t=e-this._arrowSize,n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;let t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}},Zne=class extends lT{constructor(e,t,n){let r=e.getScrollDimensions(),i=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new uT(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===iT.Hidden?0:t.horizontalScrollbarSize,t.vertical===iT.Hidden?0:t.verticalScrollbarSize,r.width,r.scrollWidth,i.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:`horizontal`,scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){let e=(t.arrowSize-11)/2,n=(t.horizontalScrollbarSize-11)/2;this._createArrow({className:`scra`,icon:x.scrollbarButtonLeft,top:n,left:e,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Tp(null,1,0))}),this._createArrow({className:`scra`,icon:x.scrollbarButtonRight,top:n,left:void 0,bottom:void 0,right:e,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Tp(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===iT.Hidden?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===iT.Hidden?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}},Qne=class extends lT{constructor(e,t,n){let r=e.getScrollDimensions(),i=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new uT(t.verticalHasArrows?t.arrowSize:0,t.vertical===iT.Hidden?0:t.verticalScrollbarSize,0,r.height,r.scrollHeight,i.scrollTop),visibility:t.vertical,extraScrollbarClassName:`vertical`,scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){let e=(t.arrowSize-11)/2,n=(t.verticalScrollbarSize-11)/2;this._createArrow({className:`scra`,icon:x.scrollbarButtonUp,top:e,left:n,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Tp(null,0,1))}),this._createArrow({className:`scra`,icon:x.scrollbarButtonDown,top:void 0,left:n,bottom:e,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Tp(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===iT.Hidden?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}};s({});var dT=500,fT=50,pT=class{constructor(e,t,n){this.timestamp=e,this.deltaX=t,this.deltaY=n,this.score=0}},mT=class e{static#e=this.INSTANCE=new e;constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,n=1,r=this._rear;do{let i=r===this._front?e:2**-n;if(e-=i,t+=this._memory[r].score*i,r===this._front)break;r=(this._capacity+r-1)%this._capacity,n++}while(!0);return t<=.5}acceptStandardWheelEvent(e){if(Of){let t=xf(Yh(e.browserEvent));this.accept(Date.now(),e.deltaX*t,e.deltaY*t)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,n){let r=null,i=new pT(e,t,n);this._front===-1&&this._rear===-1?(this._memory[0]=i,this._front=0,this._rear=0):(r=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=i),i.score=this._computeScore(i,r)}_computeScore(e,t){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let n=.5;if((!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(n+=.25),t){let r=Math.abs(e.deltaX),i=Math.abs(e.deltaY),a=Math.abs(t.deltaX),o=Math.abs(t.deltaY),s=Math.max(Math.min(r,a),1),c=Math.max(Math.min(i,o),1),l=Math.max(r,a),u=Math.max(i,o);l%s===0&&u%c===0&&(n-=.5)}return Math.min(Math.max(n,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01+2**-52*100}},hT=class extends rT{get onScroll(){return this._onScroll.event}get onWillScroll(){return this._onWillScroll.event}get options(){return this._options}constructor(e,t,n){super(),this._inertialTimeout=null,this._inertialSpeed={X:0,Y:0},this._onScroll=this._register(new E),this._onWillScroll=this._register(new E),e.style.overflow=`hidden`,this._options=yT(t),this._scrollable=n,this._register(this._scrollable.onScroll(e=>{this._onWillScroll.fire(e),this._onDidScroll(e),this._onScroll.fire(e)}));let r={onMouseWheel:e=>this._onMouseWheel(e),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new Qne(this._scrollable,this._options,r)),this._horizontalScrollbar=this._register(new Zne(this._scrollable,this._options,r)),this._domNode=v_(`div`),this._domNode.className=`monaco-scrollable-element `+this._options.className,this._domNode.setAttribute(`role`,`presentation`),this._domNode.style.position=`relative`,this._domNode.style.overflow=`hidden`,this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=tT(v_(`div`)),this._leftShadowDomNode.setClassName(`shadow`),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=tT(v_(`div`)),this._topShadowDomNode.setClassName(`shadow`),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=tT(v_(`div`)),this._topLeftShadowDomNode.setClassName(`shadow`),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,e=>this._onMouseOver(e)),this.onmouseleave(this._listenOnDomNode,e=>this._onMouseLeave(e)),this._hideTimeout=this._register(new vc),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=Nn(this._mouseWheelToDispose),this._inertialTimeout&&=(this._inertialTimeout.dispose(),null),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,si&&(this._options.className+=` mac`),this._domNode.className=`monaco-scrollable-element `+this._options.className}updateOptions(e){e.handleMouseWheel!==void 0&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),e.mouseWheelScrollSensitivity!==void 0&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),e.fastScrollSensitivity!==void 0&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),e.scrollPredominantAxis!==void 0&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),e.horizontal!==void 0&&(this._options.horizontal=e.horizontal),e.vertical!==void 0&&(this._options.vertical=e.vertical),e.horizontalScrollbarSize!==void 0&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),e.verticalScrollbarSize!==void 0&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),e.scrollByPage!==void 0&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(e){this._revealOnScroll=e}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new Tp(e))}async _periodicSync(){let e=!1;(this._inertialSpeed.X!==0||this._inertialSpeed.Y!==0)&&(this._scrollable.setScrollPositionNow({scrollTop:this._scrollable.getCurrentScrollPosition().scrollTop-this._inertialSpeed.Y*100,scrollLeft:this._scrollable.getCurrentScrollPosition().scrollLeft-this._inertialSpeed.X*100}),this._inertialSpeed.X*=.9,this._inertialSpeed.Y*=.9,Math.abs(this._inertialSpeed.X)<.01&&(this._inertialSpeed.X=0),Math.abs(this._inertialSpeed.Y)<.01&&(this._inertialSpeed.Y=0),e=this._inertialSpeed.X!==0||this._inertialSpeed.Y!==0),e?(this._inertialTimeout||=new vc,this._inertialTimeout.cancelAndSet(()=>this._periodicSync(),1e3/60)):(this._inertialTimeout?.dispose(),this._inertialTimeout=null)}_setListeningToMouseWheel(e){this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=Nn(this._mouseWheelToDispose),e&&this._mouseWheelToDispose.push(L(this._listenOnDomNode,R.MOUSE_WHEEL,e=>{this._onMouseWheel(new Tp(e))},{passive:!1})))}_onMouseWheel(e){if(e.browserEvent?.defaultPrevented)return;let t=mT.INSTANCE;t.acceptStandardWheelEvent(e);let n=!1;if(e.deltaY||e.deltaX){let r=e.deltaY*this._options.mouseWheelScrollSensitivity,i=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&i+r===0?i=r=0:Math.abs(r)>=Math.abs(i)?i=0:r=0),this._options.flipAxes&&([r,i]=[i,r]);let a=!si&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!i&&(i=r,r=0),e.browserEvent&&e.browserEvent.altKey&&(i*=this._options.fastScrollSensitivity,r*=this._options.fastScrollSensitivity);let o=this._scrollable.getFutureScrollPosition(),s={};if(r){let e=fT*r,t=o.scrollTop-(e<0?Math.floor(e):Math.ceil(e));this._verticalScrollbar.writeScrollPosition(s,t)}if(i){let e=fT*i,t=o.scrollLeft-(e<0?Math.floor(e):Math.ceil(e));this._horizontalScrollbar.writeScrollPosition(s,t)}if(s=this._scrollable.validateScrollPosition(s),this._options.inertialScroll&&(i||r)&&!t.isPhysicalMouseWheel()){let e=!1;this._inertialSpeed.X===0&&this._inertialSpeed.Y===0&&(e=!0),this._inertialSpeed.Y=(r<0?-1:1)*Math.abs(r)**1.02,this._inertialSpeed.X=(i<0?-1:1)*Math.abs(i)**1.02,e&&this._periodicSync()}(o.scrollLeft!==s.scrollLeft||o.scrollTop!==s.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(s):this._scrollable.setScrollPositionNow(s),n=!0)}let r=n;!r&&this._options.alwaysConsumeMouseWheel&&(r=!0),!r&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(r=!0),r&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,r=n?` left`:``,i=t?` top`:``,a=n||t?` top-left-corner`:``;this._leftShadowDomNode.setClassName(`shadow${r}`),this._topShadowDomNode.setClassName(`shadow${i}`),this._topLeftShadowDomNode.setClassName(`shadow${a}${i}${r}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),dT)}},gT=class extends hT{constructor(e,t){t||={},t.mouseWheelSmoothScroll=!1;let n=new aT({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:t=>xg(Yh(e),t)});super(e,t,n),this._register(n)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}},_T=class extends hT{constructor(e,t,n){super(e,t,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}},vT=class extends hT{constructor(e,t){t||={},t.mouseWheelSmoothScroll=!1;let n=new aT({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:t=>xg(Yh(e),t)});super(e,t,n),this._register(n),this._element=e,this._register(this.onScroll(e=>{e.scrollTopChanged&&(this._element.scrollTop=e.scrollTop),e.scrollLeftChanged&&(this._element.scrollLeft=e.scrollLeft)})),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}};function yT(e){let t={lazyRender:e.lazyRender===void 0?!1:e.lazyRender,className:e.className===void 0?``:e.className,useShadows:e.useShadows===void 0?!0:e.useShadows,handleMouseWheel:e.handleMouseWheel===void 0?!0:e.handleMouseWheel,flipAxes:e.flipAxes===void 0?!1:e.flipAxes,consumeMouseWheelIfScrollbarIsNeeded:e.consumeMouseWheelIfScrollbarIsNeeded===void 0?!1:e.consumeMouseWheelIfScrollbarIsNeeded,alwaysConsumeMouseWheel:e.alwaysConsumeMouseWheel===void 0?!1:e.alwaysConsumeMouseWheel,scrollYToX:e.scrollYToX===void 0?!1:e.scrollYToX,mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity===void 0?1:e.mouseWheelScrollSensitivity,fastScrollSensitivity:e.fastScrollSensitivity===void 0?5:e.fastScrollSensitivity,scrollPredominantAxis:e.scrollPredominantAxis===void 0?!0:e.scrollPredominantAxis,mouseWheelSmoothScroll:e.mouseWheelSmoothScroll===void 0?!0:e.mouseWheelSmoothScroll,inertialScroll:e.inertialScroll===void 0?!1:e.inertialScroll,arrowSize:e.arrowSize===void 0?11:e.arrowSize,listenOnDomNode:e.listenOnDomNode===void 0?null:e.listenOnDomNode,horizontal:e.horizontal===void 0?iT.Auto:e.horizontal,horizontalScrollbarSize:e.horizontalScrollbarSize===void 0?10:e.horizontalScrollbarSize,horizontalSliderSize:e.horizontalSliderSize===void 0?0:e.horizontalSliderSize,horizontalHasArrows:e.horizontalHasArrows===void 0?!1:e.horizontalHasArrows,vertical:e.vertical===void 0?iT.Auto:e.vertical,verticalScrollbarSize:e.verticalScrollbarSize===void 0?10:e.verticalScrollbarSize,verticalHasArrows:e.verticalHasArrows===void 0?!1:e.verticalHasArrows,verticalSliderSize:e.verticalSliderSize===void 0?0:e.verticalSliderSize,scrollByPage:e.scrollByPage===void 0?!1:e.scrollByPage};return t.horizontalSliderSize=e.horizontalSliderSize===void 0?t.horizontalScrollbarSize:e.horizontalSliderSize,t.verticalSliderSize=e.verticalSliderSize===void 0?t.verticalScrollbarSize:e.verticalSliderSize,si&&(t.className+=` mac`),t}var bT;(function(e){function t(e,t){if(e.start>=t.end||t.start>=e.end)return{start:0,end:0};let n=Math.max(e.start,t.start),r=Math.min(e.end,t.end);return r-n<=0?{start:0,end:0}:{start:n,end:r}}e.intersect=t;function n(e){return e.end-e.start<=0}e.isEmpty=n;function r(e,r){return!n(t(e,r))}e.intersects=r;function i(e,t){let r=[],i={start:e.start,end:Math.min(t.start,e.end)},a={start:Math.max(t.end,e.start),end:e.end};return n(i)||r.push(i),n(a)||r.push(a),r}e.relativeComplement=i})(bT||={});function xT(e,t){let n=[];for(let r of t){if(e.start>=r.range.end)continue;if(e.end<r.range.start)break;let t=bT.intersect(e,r.range);bT.isEmpty(t)||n.push({range:t,size:r.size})}return n}function ST({start:e,end:t},n){return{start:e+n,end:t+n}}function CT(e){let t=[],n=null;for(let r of e){let e=r.range.start,i=r.range.end,a=r.size;if(n&&a===n.size){n.range.end=i;continue}n={range:{start:e,end:i},size:a},t.push(n)}return t}function wT(...e){return CT(e.reduce((e,t)=>e.concat(t),[]))}var TT=class{get paddingTop(){return this._paddingTop}set paddingTop(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}constructor(e){this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=e??0,this._size=this._paddingTop}splice(e,t,n=[]){let r=n.length-t,i=xT({start:0,end:e},this.groups),a=xT({start:e+t,end:1/0},this.groups).map(e=>({range:ST(e.range,r),size:e.size}));this.groups=wT(i,n.map((t,n)=>({range:{start:e+n,end:e+n+1},size:t.size})),a),this._size=this._paddingTop+this.groups.reduce((e,t)=>e+t.size*(t.range.end-t.range.start),0)}get count(){let e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;if(e<this._paddingTop)return 0;let t=0,n=this._paddingTop;for(let r of this.groups){let i=r.range.end-r.range.start,a=n+i*r.size;if(e<a)return t+Math.floor((e-n)/r.size);t+=i,n=a}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,n=0;for(let r of this.groups){let i=r.range.end-r.range.start,a=n+i;if(e<a)return this._paddingTop+t+(e-n)*r.size;t+=i*r.size,n=a}return-1}},ET=class{constructor(e){this.renderers=e,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(e){let t=this.getTemplateCache(e).pop(),n=!1;if(t)n=this.transactionNodesPendingRemoval.delete(t.domNode);else{let n=B(`.monaco-list-row`);t={domNode:n,templateId:e,templateData:this.getRenderer(e).renderTemplate(n)}}return{row:t,isReusingConnectedDomNode:n}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw Error(`Already in transaction`);this.inTransaction=!0;try{e()}finally{for(let e of this.transactionNodesPendingRemoval)this.doRemoveNode(e);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){let{domNode:t,templateId:n}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t)),this.getTemplateCache(n).push(e)}doRemoveNode(e){e.classList.remove(`scrolling`),e.remove()}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(let n of e)this.getRenderer(t).disposeTemplate(n.templateData),n.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){let t=this.renderers.get(e);if(!t)throw Error(`No renderer found for ${e}`);return t}};s({});function DT(e,t,n,r=[]){if(!e.dataTransfer)return;let i=B(`.monaco-drag-image`);i.textContent=n,i.classList.add(...r),(e=>{for(;e&&!e.classList.contains(`monaco-workbench`);)e=e.parentElement;return e||o_(t)})(t).appendChild(i),e.dataTransfer.setDragImage(i,-10,-10),setTimeout(()=>i.remove(),0)}var OT={CurrentDragAndDropData:void 0},kT;(function(e){e[e.TOP=0]=`TOP`,e[e.CENTER_TOP=1]=`CENTER_TOP`,e[e.CENTER_BOTTOM=2]=`CENTER_BOTTOM`,e[e.BOTTOM=3]=`BOTTOM`})(kT||={});var AT={useShadows:!0,verticalScrollMode:iT.Auto,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(e){return[e]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0},jT=class{get context(){return this._context}set context(e){this._context=e}constructor(e){this.elements=e}update(){}getData(){return this.elements}},MT=class{constructor(e){this.elements=e}update(){}getData(){return this.elements}},NT=class{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){let n=e.files.item(t);n&&(n.size||n.type)&&this.files.push(n)}}}getData(){return{types:this.types,files:this.files}}};function PT(e,t){return Array.isArray(e)&&Array.isArray(t)?ut(e,t):e===t}var FT=class{constructor(e){e?.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(e,t,n)=>n,e?.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(e,t)=>t+1,e?.getRole?this.getRole=e.getRole.bind(e):this.getRole=e=>`listitem`,e?.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=e=>void 0}},IT=class e{static#e=this.InstanceCount=0;get contentHeight(){return this.rangeMap.size}get contentWidth(){return this.scrollWidth??0}get onDidScroll(){return this.scrollableElement.onScroll}get onWillScroll(){return this.scrollableElement.onWillScroll}get containerDomNode(){return this.rowsContainer}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw Error(`Horizontal scrolling and dynamic heights not supported simultaneously`);if(this._horizontalScrolling=e,this.domNode.classList.toggle(`horizontal-scrolling`,this._horizontalScrolling),this._horizontalScrolling){for(let e of this.items)this.measureItemWidth(e);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:Hg(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=``}}constructor(t,n,r,i=AT){if(this.virtualDelegate=n,this.domId=`list_id_${++e.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new cc(50),this.splicing=!1,this.dragOverAnimationStopDisposable=w.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=w.None,this.onDragLeaveTimeout=w.None,this.currentSelectionDisposable=w.None,this.disposables=new C,this._onDidChangeContentHeight=new E,this._onDidChangeContentWidth=new E,this.onDidChangeContentHeight=T.latch(this._onDidChangeContentHeight.event,void 0,this.disposables),this.onDidChangeContentWidth=T.latch(this._onDidChangeContentWidth.event,void 0,this.disposables),this._horizontalScrolling=!1,i.horizontalScrolling&&i.supportDynamicHeights)throw Error(`Horizontal scrolling and dynamic heights not supported simultaneously`);this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap(i.paddingTop??0);for(let e of r)this.renderers.set(e.templateId,e);if(this.cache=this.disposables.add(new ET(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=v_(`div`),this.domNode.className=`monaco-list`,this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle(`mouse-support`,typeof i.mouseSupport==`boolean`?i.mouseSupport:!0),this._horizontalScrolling=i.horizontalScrolling??AT.horizontalScrolling,this.domNode.classList.toggle(`horizontal-scrolling`,this._horizontalScrolling),this.paddingBottom=i.paddingBottom===void 0?0:i.paddingBottom,this.accessibilityProvider=new FT(i.accessibilityProvider),this.rowsContainer=v_(`div`),this.rowsContainer.className=`monaco-list-rows`,(i.transformOptimization??AT.transformOptimization)&&(this.rowsContainer.style.transform=`translate3d(0px, 0px, 0px)`,this.rowsContainer.style.overflow=`hidden`,this.rowsContainer.style.contain=`strict`),this.disposables.add(RC.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new aT({forceIntegerValues:!0,smoothScrollDuration:i.smoothScrolling??!1?125:0,scheduleAtNextAnimationFrame:e=>xg(Yh(this.domNode),e)})),this.scrollableElement=this.disposables.add(new _T(this.rowsContainer,{alwaysConsumeMouseWheel:i.alwaysConsumeMouseWheel??AT.alwaysConsumeMouseWheel,horizontal:iT.Auto,vertical:i.verticalScrollMode??AT.verticalScrollMode,useShadows:i.useShadows??AT.useShadows,mouseWheelScrollSensitivity:i.mouseWheelScrollSensitivity,fastScrollSensitivity:i.fastScrollSensitivity,scrollByPage:i.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),t.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(L(this.rowsContainer,LC.Change,e=>this.onTouchChange(e))),this.disposables.add(L(this.scrollableElement.getDomNode(),`scroll`,e=>{let t=e.target,n=t.scrollTop;t.scrollTop=0,i.scrollToActiveElement&&this.setScrollTop(this.scrollTop+n)})),this.disposables.add(L(this.domNode,`dragover`,e=>this.onDragOver(this.toDragEvent(e)))),this.disposables.add(L(this.domNode,`drop`,e=>this.onDrop(this.toDragEvent(e)))),this.disposables.add(L(this.domNode,`dragleave`,e=>this.onDragLeave(this.toDragEvent(e)))),this.disposables.add(L(this.domNode,`dragend`,e=>this.onDragEnd(e))),i.userSelection){if(i.dnd)throw Error(`DND and user selection cannot be used simultaneously`);this.disposables.add(L(this.domNode,`mousedown`,e=>this.onPotentialSelectionStart(e)))}this.setRowLineHeight=i.setRowLineHeight??AT.setRowLineHeight,this.setRowHeight=i.setRowHeight??AT.setRowHeight,this.supportDynamicHeights=i.supportDynamicHeights??AT.supportDynamicHeights,this.dnd=i.dnd??this.disposables.add(AT.dnd),this.layout(i.initialSize?.height,i.initialSize?.width),i.scrollToActiveElement&&this._setupFocusObserver(t)}_setupFocusObserver(e){this.disposables.add(L(e,`focus`,()=>{let t=i_();this.activeElement!==t&&t!==null&&(this.activeElement=t,this._scrollToActiveElement(this.activeElement,e))},!0))}_scrollToActiveElement(e,t){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect().top-n.top;r<0&&this.setScrollTop(this.scrollTop+r)}updateOptions(e){e.paddingBottom!==void 0&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling);let t;if(e.scrollByPage!==void 0&&(t={...t??{},scrollByPage:e.scrollByPage}),e.mouseWheelScrollSensitivity!==void 0&&(t={...t??{},mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&(t={...t??{},fastScrollSensitivity:e.fastScrollSensitivity}),t&&this.scrollableElement.updateOptions(t),e.paddingTop!==void 0&&e.paddingTop!==this.rangeMap.paddingTop){let t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),n=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(t,Math.max(0,this.lastRenderTop+n),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}delegateScrollFromMouseWheelEvent(e){this.scrollableElement.delegateScrollFromMouseWheelEvent(e)}delegateVerticalScrollbarPointerDown(e){this.scrollableElement.delegateVerticalScrollbarPointerDown(e)}updateElementHeight(e,t,n){if(e<0||e>=this.items.length)return;let r=this.items[e].size;if(t===void 0){if(!this.supportDynamicHeights){console.warn(`Dynamic heights not supported`,Error().stack);return}this.items[e].lastDynamicHeightWidth=void 0,t=r+this.probeDynamicHeight(e)}if(r===t)return;let i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),a=0;a=e<i.start||n!==null&&n>e&&n<i.end?t-r:0,this.rangeMap.splice(e,1,[{size:t}]),this.items[e].size=t,this.render(i,Math.max(0,this.lastRenderTop+a),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights?this._rerender(this.lastRenderTop,this.lastRenderHeight):this._onDidChangeContentHeight.fire(this.contentHeight)}createRangeMap(e){return new TT(e)}splice(e,t,n=[]){if(this.splicing)throw Error(`Can't run recursive splices.`);this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,n=[]){let r=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),i={start:e,end:e+t},a=bT.intersect(r,i),o=new Map;for(let e=a.end-1;e>=a.start;e--){let t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){let n=o.get(t.templateId);n||(n=[],o.set(t.templateId,n));let r=this.renderers.get(t.templateId);r&&r.disposeElement&&r.disposeElement(t.element,e,t.row.templateData,{height:t.size}),n.unshift(t.row)}t.row=null,t.stale=!0}let s={start:e+t,end:this.items.length},c=bT.intersect(s,r),l=bT.relativeComplement(s,r),u=n.map(e=>({id:String(this.itemId++),element:e,templateId:this.virtualDelegate.getTemplateId(e),size:this.virtualDelegate.getHeight(e),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(e),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:w.None,checkedDisposable:w.None,stale:!1})),d;e===0&&t>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,u),d=this.items,this.items=u):(this.rangeMap.splice(e,t,u),d=Wt(this.items,e,t,u));let f=n.length-t,p=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),m=ST(c,f),h=bT.intersect(p,m);for(let e=h.start;e<h.end;e++)this.updateItemInDOM(this.items[e],e);let g=bT.relativeComplement(m,p);for(let e of g)for(let t=e.start;t<e.end;t++)this.removeItemFromDOM(t);let _=l.map(e=>ST(e,f)),v=[{start:e,end:e+n.length},..._].map(e=>bT.intersect(p,e)).reverse();for(let e of v)for(let t=e.end-1;t>=e.start;t--){let e=this.items[t],n=o.get(e.templateId)?.pop();this.insertItemInDOM(t,n)}for(let e of o.values())for(let t of e)this.cache.release(t);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),d.map(e=>e.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||=xg(Yh(this.domNode),()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null})}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(let t of this.items)t.width!==void 0&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}updateWidth(e){if(!this.horizontalScrolling||this.scrollWidth===void 0)return;let t=this.items[e];this.measureItemWidth(t),t.width!==void 0&&t.width>this.scrollWidth&&(this.scrollWidth=t.width,this.scrollableElement.setScrollDimensions({scrollWidth:this.scrollWidth+10}),this._onDidChangeContentWidth.fire(this.scrollWidth))}rerender(){if(this.supportDynamicHeights){for(let e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getVisibleRange(this.lastRenderTop,this.lastRenderHeight).start}get firstMostlyVisibleIndex(){let e=this.firstVisibleIndex,t=this.rangeMap.positionAt(e),n=this.rangeMap.positionAt(e+1);return n!==-1&&(n-t)/2+t<this.scrollTop?e+1:e}get lastVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).end-1}element(e){return this.items[e].element}indexOf(e){return this.items.findIndex(t=>t.element===e)}domElement(e){let t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){let n={height:typeof e==`number`?e:Wg(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),t!==void 0&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t==`number`?t:Hg(this.domNode)})}render(e,t,n,r,i,a=!1,o=!1){let s=this.getRenderRange(t,n),c=bT.relativeComplement(s,e).reverse(),l=bT.relativeComplement(e,s);if(a){let t=bT.intersect(e,s);for(let e=t.start;e<t.end;e++)this.updateItemInDOM(this.items[e],e)}this.cache.transact(()=>{for(let e of l)for(let t=e.start;t<e.end;t++)this.removeItemFromDOM(t,o);for(let e of c)for(let t=e.end-1;t>=e.start;t--)this.insertItemInDOM(t)}),r!==void 0&&(this.rowsContainer.style.left=`-${r}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&i!==void 0&&(this.rowsContainer.style.width=`${Math.max(i,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=n}insertItemInDOM(e,t){let n=this.items[e];if(!n.row)if(t)n.row=t,n.stale=!0;else{let e=this.cache.alloc(n.templateId);n.row=e.row,n.stale||=e.isReusingConnectedDomNode}let r=this.accessibilityProvider.getRole(n.element)||`listitem`;n.row.domNode.setAttribute(`role`,r);let i=this.accessibilityProvider.isChecked(n.element),a=e=>e===`mixed`?`mixed`:String(!!e);if(typeof i==`boolean`||i===`mixed`)n.row.domNode.setAttribute(`aria-checked`,a(i));else if(i){let e=e=>n.row.domNode.setAttribute(`aria-checked`,a(e));e(i.value),n.checkedDisposable=i.onDidChange(()=>e(i.value))}if(n.stale||!n.row.domNode.parentElement){let t=this.items.at(e+1)?.row?.domNode??null;(n.row.domNode.parentElement!==this.rowsContainer||n.row.domNode.nextElementSibling!==t)&&this.rowsContainer.insertBefore(n.row.domNode,t),n.stale=!1}this.updateItemInDOM(n,e);let o=this.renderers.get(n.templateId);if(!o)throw Error(`No renderer found for template id ${n.templateId}`);o?.renderElement(n.element,e,n.row.templateData,{height:n.size});let s=this.dnd.getDragURI(n.element);n.dragStartDisposable.dispose(),n.row.domNode.draggable=!!s,s&&(n.dragStartDisposable=L(n.row.domNode,`dragstart`,e=>this.onDragStart(n.element,s,e))),this.horizontalScrolling&&(this.measureItemWidth(n),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width=`fit-content`,e.width=Hg(e.row.domNode);let t=Yh(e.row.domNode).getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=``}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute(`data-index`,`${t}`),e.row.domNode.setAttribute(`data-last-element`,t===this.length-1?`true`:`false`),e.row.domNode.setAttribute(`data-parity`,t%2==0?`even`:`odd`),e.row.domNode.setAttribute(`aria-setsize`,String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute(`aria-posinset`,String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute(`id`,this.getElementDomId(t)),e.row.domNode.classList.toggle(`drop-target`,e.dropTarget)}removeItemFromDOM(e,t){let n=this.items[e];if(n.dragStartDisposable.dispose(),n.checkedDisposable.dispose(),n.row){let r=this.renderers.get(n.templateId);r&&r.disposeElement&&r.disposeElement(n.element,e,n.row.templateData,{height:n.size,onScroll:t}),this.cache.release(n.row),n.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}getScrollLeft(){return this.scrollableElement.getScrollPosition().scrollLeft}setScrollLeft(e){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollWidth:this.scrollWidth})),this.scrollableElement.setScrollPosition({scrollLeft:e})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return T.map(this.disposables.add(new IC(this.domNode,`click`)).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return T.map(this.disposables.add(new IC(this.domNode,`dblclick`)).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return T.filter(T.map(this.disposables.add(new IC(this.domNode,`auxclick`)).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseUp(){return T.map(this.disposables.add(new IC(this.domNode,`mouseup`)).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDown(){return T.map(this.disposables.add(new IC(this.domNode,`mousedown`)).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return T.map(this.disposables.add(new IC(this.domNode,`mouseover`)).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMove(){return T.map(this.disposables.add(new IC(this.domNode,`mousemove`)).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOut(){return T.map(this.disposables.add(new IC(this.domNode,`mouseout`)).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return T.any(T.map(this.disposables.add(new IC(this.domNode,`contextmenu`)).event,e=>this.toMouseEvent(e),this.disposables),T.map(this.disposables.add(new IC(this.domNode,LC.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return T.map(this.disposables.add(new IC(this.domNode,`touchstart`)).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return T.map(this.disposables.add(new IC(this.rowsContainer,LC.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),n=t===void 0?void 0:this.items[t];return{browserEvent:e,index:t,element:n&&n.element}}toTouchEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),n=t===void 0?void 0:this.items[t];return{browserEvent:e,index:t,element:n&&n.element}}toGestureEvent(e){let t=this.getItemIndexFromEventTarget(e.initialTarget||null),n=t===void 0?void 0:this.items[t];return{browserEvent:e,index:t,element:n&&n.element}}toDragEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),n=t===void 0?void 0:this.items[t];return{browserEvent:e,index:t,element:n&&n.element,sector:this.getTargetSector(e,t)}}onScroll(e){try{let t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth,void 0,!0),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error(`Got bad scroll event:`,e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,n){if(!n.dataTransfer)return;let r=this.dnd.getDragElements(e);n.dataTransfer.effectAllowed=`copyMove`,n.dataTransfer.setData(Qw.TEXT,t);let i;this.dnd.getDragLabel&&(i=this.dnd.getDragLabel(r,n)),i===void 0&&(i=String(r.length)),DT(n,this.domNode,i,[this.domId]),this.domNode.classList.add(`dragging`),this.currentDragData=new jT(r),OT.CurrentDragAndDropData=new MT(r),this.dnd.onDragStart?.(this.currentDragData,n)}onPotentialSelectionStart(e){this.currentSelectionDisposable.dispose();let t=$te(this.domNode),n=this.currentSelectionDisposable=new C,r=n.add(new C);r.add(L(this.domNode,`selectstart`,()=>{r.add(L(t,`mousemove`,e=>{t.getSelection()?.isCollapsed===!1&&this.setupDragAndDropScrollTopAnimation(e)})),n.add(S(()=>{let e=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.currentSelectionBounds=void 0,this.render(e,this.lastRenderTop,this.lastRenderHeight,void 0,void 0)})),n.add(L(t,`selectionchange`,()=>{let e=t.getSelection();if(!e||e.isCollapsed){r.isDisposed&&n.dispose();return}let i=this.getIndexOfListElement(e.anchorNode),a=this.getIndexOfListElement(e.focusNode);i!==void 0&&a!==void 0&&(a<i&&([i,a]=[a,i]),this.currentSelectionBounds={start:i,end:a})}))})),r.add(L(t,`mouseup`,()=>{r.dispose(),this.teardownDragAndDropScrollTopAnimation(),t.getSelection()?.isCollapsed!==!1&&n.dispose()}))}getIndexOfListElement(e){if(!(!e||!this.domNode.contains(e)))for(;e&&e!==this.domNode;){if(e.dataset?.index)return Number(e.dataset.index);e=e.parentElement}}onDragOver(e){if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),OT.CurrentDragAndDropData&&OT.CurrentDragAndDropData.getData()===`vscode-ui`||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(OT.CurrentDragAndDropData)this.currentDragData=OT.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new NT}let t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.sector,e.browserEvent);if(this.canDrop=typeof t==`boolean`?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!=`boolean`&&t.effect?.type===Kw.Copy?`copy`:`move`;let n;n=typeof t!=`boolean`&&t.feedback?t.feedback:e.index===void 0?[-1]:[e.index],n=kt(n).filter(e=>e>=-1&&e<this.length).sort((e,t)=>e-t),n=n[0]===-1?[-1]:n;let r=typeof t!=`boolean`&&t.effect&&t.effect.position?t.effect.position:qw.Over;if(PT(this.currentDragFeedback,n)&&this.currentDragFeedbackPosition===r)return!0;if(this.currentDragFeedback=n,this.currentDragFeedbackPosition=r,this.currentDragFeedbackDisposable.dispose(),n[0]===-1)this.domNode.classList.add(r),this.rowsContainer.classList.add(r),this.currentDragFeedbackDisposable=S(()=>{this.domNode.classList.remove(r),this.rowsContainer.classList.remove(r)});else{if(n.length>1&&r!==qw.Over)throw Error(`Can't use multiple feedbacks with position different than 'over'`);r===qw.After&&n[0]<this.length-1&&(n[0]+=1,r=qw.Before);for(let e of n){let t=this.items[e];t.dropTarget=!0,t.row?.domNode.classList.add(r)}this.currentDragFeedbackDisposable=S(()=>{for(let e of n){let t=this.items[e];t.dropTarget=!1,t.row?.domNode.classList.remove(r)}})}return!0}onDragLeave(e){this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=fc(()=>this.clearDragOverFeedback(),100,this.disposables),this.currentDragData&&this.dnd.onDragLeave?.(this.currentDragData,e.element,e.index,e.browserEvent)}onDrop(e){if(!this.canDrop)return;let t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove(`dragging`),this.currentDragData=void 0,OT.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.sector,e.browserEvent))}onDragEnd(e){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove(`dragging`),this.currentDragData=void 0,OT.CurrentDragAndDropData=void 0,this.dnd.onDragEnd?.(e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=w.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){let e=Fg(this.domNode).top;this.dragOverAnimationDisposable=$_(Yh(this.domNode),this.animateDragAndDropScrollTop.bind(this,e))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=fc(()=>{this.dragOverAnimationDisposable&&=(this.dragOverAnimationDisposable.dispose(),void 0)},1e3,this.disposables),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;let t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&=(this.dragOverAnimationDisposable.dispose(),void 0)}getTargetSector(e,t){if(t===void 0)return;let n=e.offsetY/this.items[t].size;return Em(Math.floor(n/.25),0,3)}getItemIndexFromEventTarget(e){let t=this.scrollableElement.getDomNode(),n=e;for(;(x_(n)||D_(n))&&n!==this.rowsContainer&&t.contains(n);){let e=n.getAttribute(`data-index`);if(e){let t=Number(e);if(!isNaN(t))return t}n=n.parentElement}}getVisibleRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}getRenderRange(e,t){let n=this.getVisibleRange(e,t);if(this.currentSelectionBounds){let e=this.rangeMap.count;n.start=Math.min(n.start,this.currentSelectionBounds.start,e),n.end=Math.min(Math.max(n.end,this.currentSelectionBounds.end+1),e)}return n}_rerender(e,t,n){let r=this.getRenderRange(e,t),i,a;e===this.elementTop(r.start)?(i=r.start,a=0):r.end-r.start>1&&(i=r.start+1,a=this.elementTop(i)-e);let o=0;for(;;){let s=this.getRenderRange(e,t),c=!1;for(let e=s.start;e<s.end;e++){let t=this.probeDynamicHeight(e);t!==0&&this.rangeMap.splice(e,1,[this.items[e]]),o+=t,c||=t!==0}if(!c){o!==0&&this.eventuallyUpdateScrollDimensions();let t=bT.relativeComplement(r,s);for(let e of t)for(let t=e.start;t<e.end;t++)this.items[t].row&&this.removeItemFromDOM(t);let c=bT.relativeComplement(s,r).reverse();for(let e of c)for(let t=e.end-1;t>=e.start;t--)this.insertItemInDOM(t);for(let e=s.start;e<s.end;e++)this.items[e].row&&this.updateItemInDOM(this.items[e],e);if(typeof i==`number`){let t=this.scrollable.getFutureScrollPosition().scrollTop-e,r=this.elementTop(i)-a+t;this.setScrollTop(r,n)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){let t=this.items[e],n=this.probeDynamicHeightForItem(t,e);return n>0&&this.virtualDelegate.setDynamicHeight?.(t.element,t.size),n}probeDynamicHeightForItem(e,t){if(this.virtualDelegate.getDynamicHeight){let t=this.virtualDelegate.getDynamicHeight(e.element);if(t!==null){let n=e.size;return e.size=t,e.lastDynamicHeightWidth=this.renderWidth,t-n}}if(!e.hasDynamicHeight||e.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(e.element))return 0;let n=e.size;if(e.row)return e.row.domNode.style.height=``,e.size=e.row.domNode.offsetHeight,e.size===0&&(Jg(e.row.domNode,Yh(e.row.domNode).document.body)?console.warn(`Measured item node at 0px- ensure that ListView is not display:none before measuring row height!`,Error().stack):console.warn(`Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!`,Error().stack)),e.lastDynamicHeightWidth=this.renderWidth,e.size-n;let{row:r}=this.cache.alloc(e.templateId);r.domNode.style.height=``,this.rowsContainer.appendChild(r.domNode);let i=this.renderers.get(e.templateId);if(!i)throw new y(`Missing renderer for templateId: `+e.templateId);return i.renderElement(e.element,t,r.templateData),e.size=r.domNode.offsetHeight,i.disposeElement?.(e.element,t,r.templateData),e.lastDynamicHeightWidth=this.renderWidth,r.domNode.remove(),this.cache.release(r),e.size-n}getElementDomId(e){return`${this.domId}_${e}`}dispose(){for(let e of this.items)if(e.dragStartDisposable.dispose(),e.checkedDisposable.dispose(),e.row){let t=this.renderers.get(e.row.templateId);t&&(t.disposeElement?.(e.element,-1,e.row.templateData,void 0),t.disposeTemplate(e.row.templateData))}this.items=[],this.domNode?.remove(),this.dragOverAnimationDisposable?.dispose(),this.disposables.dispose()}};IT.__decorator=t([iS],IT.prototype,`onMouseClick`,null),IT.__decorator=t([iS],IT.prototype,`onMouseDblClick`,null),IT.__decorator=t([iS],IT.prototype,`onMouseMiddleClick`,null),IT.__decorator=t([iS],IT.prototype,`onMouseUp`,null),IT.__decorator=t([iS],IT.prototype,`onMouseDown`,null),IT.__decorator=t([iS],IT.prototype,`onMouseOver`,null),IT.__decorator=t([iS],IT.prototype,`onMouseMove`,null),IT.__decorator=t([iS],IT.prototype,`onMouseOut`,null),IT.__decorator=t([iS],IT.prototype,`onContextMenu`,null),IT.__decorator=t([iS],IT.prototype,`onTouchStart`,null),IT.__decorator=t([iS],IT.prototype,`onTap`,null);function LT(e){return new RT(e)}var RT=class extends dh{constructor(e){super(),this.value=e}get debugName(){return this.toString()}get(){return this.value}addObserver(e){}removeObserver(e){}log(){return this}toString(){return`Const: ${this.value}`}};s(vC);var zT=class{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,n){let r=this.renderedElements.findIndex(e=>e.templateData===n);if(r>=0){let e=this.renderedElements[r];this.trait.unrender(n),e.index=t}else{let e={index:t,templateData:n};this.renderedElements.push(e)}this.trait.renderIndex(t,n)}splice(e,t,n){let r=[];for(let i of this.renderedElements)i.index<e?r.push(i):i.index>=e+t&&r.push({index:i.index+n-t,templateData:i.templateData});this.renderedElements=r}renderIndexes(e){for(let{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){let t=this.renderedElements.findIndex(t=>t.templateData===e);t<0||this.renderedElements.splice(t,1)}},BT=class{get onChange(){return this._onChange.event}get name(){return this._trait}get renderer(){return new zT(this)}constructor(e){this._trait=e,this.indexes=[],this.sortedIndexes=[],this._onChange=new E}splice(e,t,n){let r=n.length-t,i=e+t,a=[],o=0;for(;o<this.sortedIndexes.length&&this.sortedIndexes[o]<e;)a.push(this.sortedIndexes[o++]);for(let t=0;t<n.length;t++)n[t]&&a.push(t+e);for(;o<this.sortedIndexes.length&&this.sortedIndexes[o]>=i;)a.push(this.sortedIndexes[o++]+r);this.renderer.splice(e,t,n.length),this._set(a,a)}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(pE),t)}_set(e,t,n){let r=this.indexes,i=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;let a=dE(i,e);return this.renderer.renderIndexes(a),this._onChange.fire({indexes:e,browserEvent:n}),r}get(){return this.indexes}contains(e){return ft(this.sortedIndexes,e,pE)>=0}dispose(){Nn(this._onChange)}};BT.__decorator=t([iS],BT.prototype,`renderer`,null);var VT=class extends BT{constructor(e){super(`selected`),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute(`aria-selected`,`true`):t.setAttribute(`aria-selected`,`false`))}},HT=class{constructor(e,t,n){this.trait=e,this.view=t,this.identityProvider=n}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,Array(n.length).fill(!1));let r=this.trait.get().map(e=>this.identityProvider.getId(this.view.element(e)).toString());if(r.length===0)return this.trait.splice(e,t,Array(n.length).fill(!1));let i=new Set(r),a=n.map(e=>i.has(this.identityProvider.getId(e).toString()));this.trait.splice(e,t,a)}};function UT(e,t){return e.classList.contains(t)?!0:e.classList.contains(`monaco-list`)||!e.parentElement?!1:UT(e.parentElement,t)}function WT(e){return UT(e,`monaco-editor`)}function GT(e){return UT(e,`monaco-custom-toggle`)}function KT(e){return UT(e,`action-item`)}function qT(e){return UT(e,`monaco-tree-sticky-row`)}function JT(e){return e.classList.contains(`monaco-tree-sticky-container`)}function YT(e){return e.tagName===`A`&&e.classList.contains(`monaco-button`)||e.tagName===`DIV`&&e.classList.contains(`monaco-button-dropdown`)?!0:e.classList.contains(`monaco-list`)||!e.parentElement?!1:YT(e.parentElement)}var XT=class{get onKeyDown(){return T.chain(this.disposables.add(new IC(this.view.domNode,`keydown`)).event,e=>e.filter(e=>!fv(e.target)).map(e=>new vp(e)))}constructor(e,t,n){this.list=e,this.view=t,this.disposables=new C,this.multipleSelectionDisposables=new C,this.multipleSelectionSupport=n.multipleSelectionSupport,this.disposables.add(this.onKeyDown(e=>{switch(e.keyCode){case F.Enter:return this.onEnter(e);case F.UpArrow:return this.onUpArrow(e);case F.DownArrow:return this.onDownArrow(e);case F.PageUp:return this.onPageUpArrow(e);case F.PageDown:return this.onPageDownArrow(e);case F.Escape:return this.onEscape(e);case F.KeyA:this.multipleSelectionSupport&&(si?e.metaKey:e.ctrlKey)&&this.onCtrlA(e)}}))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionSupport=e.multipleSelectionSupport)}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation();let t=Mt(this.list.length),n=this.list.getFocus(),r=n.length>0?this.list.getElementGroupId(n[0]):void 0;r!==void 0&&(t=this.list.filterIndicesByGroup(t,r)),this.list.setSelection(t,e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}};XT.__decorator=t([iS],XT.prototype,`onKeyDown`,null);var ZT;(function(e){e[e.Automatic=0]=`Automatic`,e[e.Trigger=1]=`Trigger`})(ZT||={});var QT;(function(e){e[e.Idle=0]=`Idle`,e[e.Typing=1]=`Typing`})(QT||={});var $T=new class{mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey||e.altKey?!1:e.keyCode>=F.KeyA&&e.keyCode<=F.KeyZ||e.keyCode>=F.Digit0&&e.keyCode<=F.Digit9||e.keyCode>=F.Numpad0&&e.keyCode<=F.Numpad9||e.keyCode>=F.Semicolon&&e.keyCode<=F.Quote}},eE=class{constructor(e,t,n,r,i){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=n,this.keyboardNavigationEventFilter=r,this.delegate=i,this.enabled=!1,this.state=QT.Idle,this.mode=ZT.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new C,this.disposables=new C,this.updateOptions(e.options)}updateOptions(e){e.typeNavigationEnabled??!0?this.enable():this.disable(),this.mode=e.typeNavigationMode??ZT.Automatic}trigger(){this.triggered=!this.triggered}enable(){if(this.enabled)return;let e=!1,t=T.chain(this.enabledDisposables.add(new IC(this.view.domNode,`keydown`)).event,t=>t.filter(e=>!fv(e.target)).filter(()=>this.mode===ZT.Automatic||this.triggered).map(e=>new vp(e)).filter(t=>e||this.keyboardNavigationEventFilter(t)).filter(e=>this.delegate.mightProducePrintableCharacter(e)).forEach(e=>M_.stop(e,!0)).map(e=>e.browserEvent.key)),n=T.debounce(t,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);T.reduce(T.any(t,n),(e,t)=>t===null?null:(e||``)+t,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),n(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),n(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){let e=this.list.getFocus();if(e.length>0&&e[0]===this.previouslyFocused){let t=this.list.options.accessibilityProvider?.getAriaLabel(this.list.element(e[0]));typeof t==`string`?GC(t):t&&GC(t.get())}this.previouslyFocused=-1}onInput(e){if(!e){this.state=QT.Idle,this.triggered=!1;return}let t=this.list.getFocus(),n=t.length>0?t[0]:0,r=this.state===QT.Idle?1:0;this.state=QT.Typing;for(let t=0;t<this.list.length;t++){let i=(n+t+r)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(i)),o=a&&a.toString();if(this.list.options.typeNavigationEnabled){if(o!==void 0){if(aw(e,o)){this.previouslyFocused=n,this.list.setFocus([i]),this.list.reveal(i);return}let t=Ow(e,o);if(t&&t[0].end-t[0].start>1&&t.length===1){this.previouslyFocused=n,this.list.setFocus([i]),this.list.reveal(i);return}}}else if(o===void 0||aw(e,o)){this.previouslyFocused=n,this.list.setFocus([i]),this.list.reveal(i);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}},tE=class{constructor(e,t){this.list=e,this.view=t,this.disposables=new C;let n=T.chain(this.disposables.add(new IC(t.domNode,`keydown`)).event,e=>e.filter(e=>!fv(e.target)).map(e=>new vp(e)));T.chain(n,e=>e.filter(e=>e.keyCode===F.Tab&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&!e.altKey))(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;let t=this.list.getFocus();if(t.length===0)return;let n=this.view.domElement(t[0]);if(!n)return;let r=n.querySelector(`[tabIndex]`);if(!r||!x_(r)||r.tabIndex===-1)return;let i=Yh(r).getComputedStyle(r);i.visibility===`hidden`||i.display===`none`||(e.preventDefault(),e.stopPropagation(),r.focus())}dispose(){this.disposables.dispose()}};function nE(e){return si?e.browserEvent.metaKey:e.browserEvent.ctrlKey}function rE(e){return e.browserEvent.shiftKey}function iE(e){return O_(e)&&e.button===2}var aE={isSelectionSingleChangeEvent:nE,isSelectionRangeChangeEvent:rE},oE=class{get onPointer(){return this._onPointer.event}constructor(e){this.list=e,this.disposables=new C,this._onPointer=this.disposables.add(new E),e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||aE),this.mouseSupport=e.options.mouseSupport===void 0||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(RC.addTarget(e.getHTMLElement()))),T.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||aE))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){WT(e.browserEvent.target)||i_()!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(fv(e.browserEvent.target)||WT(e.browserEvent.target))return;let t=e.index===void 0?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||fv(e.browserEvent.target)||WT(e.browserEvent.target)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;let t=e.index;if(t===void 0){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),iE(e.browserEvent)||this.list.getElementGroupId(t)!==`notSelectable`&&this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(fv(e.browserEvent.target)||WT(e.browserEvent.target)||this.isSelectionChangeEvent(e)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;let t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){let t=e.index,n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){n===void 0&&(n=this.list.getFocus()[0]??t,this.list.setAnchor(n));let r=Mt(Math.min(n,t),Math.max(n,t)+1),i=this.list.getSelection()[0];if(i!==void 0){let e=this.list.getElementGroupId(i);e!==void 0&&(r=this.list.filterIndicesByGroup(r,e))}let a=this.list.getSelection(),o=uE(dE(a,[n]),n);if(o.length===0)return;let s=dE(r,fE(a,o));this.list.setSelection(s,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){let n=this.list.getSelection(),r=n.filter(e=>e!==t);this.list.setFocus([t]),this.list.setAnchor(t);let i=this.list.getElementGroupId(t);if(i===`notSelectable`)return;if(n.length===r.length){let n=i===void 0?[...r,t]:this.list.filterIndicesByGroup([...r,t],i);this.list.setSelection(n,e.browserEvent)}else this.list.setSelection(r,e.browserEvent)}}dispose(){this.disposables.dispose()}},sE=class{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){let t=this.selectorSuffix&&`.${this.selectorSuffix}`,n=[];e.listBackground&&n.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`),e.listFocusBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&n.push(`
                .monaco-drag-image${t},
                .monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
            `),e.listFocusAndSelectionForeground&&n.push(`
                .monaco-drag-image${t},
                .monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
            `),e.listInactiveFocusForeground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&n.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(n.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&n.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&n.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&n.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`);let r=kC(e.listFocusAndSelectionOutline,kC(e.listSelectionOutline,e.listFocusOutline??``));r&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused.selected { outline: 1px solid ${r}; outline-offset: -1px;}`),e.listFocusOutline&&n.push(`
                .monaco-drag-image${t},
                .monaco-list${t}:focus .monaco-list-row.focused,
                .context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
            `);let i=kC(e.listSelectionOutline,e.listInactiveFocusOutline??``);i&&n.push(`.monaco-list${t} .monaco-list-row.focused.selected { outline: 1px dotted ${i}; outline-offset: -1px; }`),e.listSelectionOutline&&n.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listInactiveFocusOutline&&n.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&n.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropOverBackground&&n.push(`
                .monaco-list${t}.drop-target,
                .monaco-list${t} .monaco-list-rows.drop-target,
                .monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropOverBackground} !important; color: inherit !important; }
            `),e.listDropBetweenBackground&&(n.push(`
            .monaco-list${t} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,
            .monaco-list${t} .monaco-list-row.drop-target-before::before {
                content: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;
                background-color: ${e.listDropBetweenBackground};
            }`),n.push(`
            .monaco-list${t} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,
            .monaco-list${t} .monaco-list-row.drop-target-after::after {
                content: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;
                background-color: ${e.listDropBetweenBackground};
            }`)),e.tableColumnsBorder&&n.push(`
                .monaco-table > .monaco-split-view2,
                .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
                .monaco-enable-motion .monaco-table:hover > .monaco-split-view2,
                .monaco-enable-motion .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
                    border-color: ${e.tableColumnsBorder};
                }

                .monaco-enable-motion .monaco-table > .monaco-split-view2,
                .monaco-enable-motion .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
                    border-color: transparent;
                }
            `),e.tableOddRowsBackgroundColor&&n.push(`
                .monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
                .monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
                .monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
                    background-color: ${e.tableOddRowsBackgroundColor};
                }
            `),this.styleElement.textContent=n.join(`
`)}},cE={listFocusBackground:`#7FB0D0`,listActiveSelectionBackground:`#0E639C`,listActiveSelectionForeground:`#FFFFFF`,listActiveSelectionIconForeground:`#FFFFFF`,listFocusAndSelectionOutline:`#90C2F9`,listFocusAndSelectionBackground:`#094771`,listFocusAndSelectionForeground:`#FFFFFF`,listInactiveSelectionBackground:`#3F3F46`,listInactiveSelectionIconForeground:`#FFFFFF`,listHoverBackground:`#2A2D2E`,listDropOverBackground:`#383B3D`,listDropBetweenBackground:`#EEEEEE`,treeIndentGuidesStroke:`#a9a9a9`,treeInactiveIndentGuidesStroke:M.fromHex(`#a9a9a9`).transparent(.4).toString(),tableColumnsBorder:M.fromHex(`#cccccc`).transparent(.2).toString(),tableOddRowsBackgroundColor:M.fromHex(`#cccccc`).transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},lE={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}}};function uE(e,t){let n=e.indexOf(t);if(n===-1)return[];let r=[],i=n-1;for(;i>=0&&e[i]===t-(n-i);)r.push(e[i--]);for(r.reverse(),i=n;i<e.length&&e[i]===t+(i-n);)r.push(e[i++]);return r}function dE(e,t){let n=[],r=0,i=0;for(;r<e.length||i<t.length;)if(r>=e.length)n.push(t[i++]);else if(i>=t.length)n.push(e[r++]);else if(e[r]===t[i]){n.push(e[r]),r++,i++;continue}else e[r]<t[i]?n.push(e[r++]):n.push(t[i++]);return n}function fE(e,t){let n=[],r=0,i=0;for(;r<e.length||i<t.length;)if(r>=e.length)n.push(t[i++]);else if(i>=t.length)n.push(e[r++]);else if(e[r]===t[i]){r++,i++;continue}else e[r]<t[i]?n.push(e[r++]):i++;return n}var pE=(e,t)=>e-t,mE=class{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,n,r){let i=0;for(let a of this.renderers)a.renderElement(e,t,n[i++],r)}disposeElement(e,t,n,r){let i=0;for(let a of this.renderers)a.disposeElement?.(e,t,n[i],r),i+=1}disposeTemplate(e){let t=0;for(let n of this.renderers)n.disposeTemplate(e[t++])}},hE=class{constructor(e){this.accessibilityProvider=e,this.templateId=`a18n`}renderTemplate(e){return{container:e,disposables:new C}}renderElement(e,t,n){let r=this.accessibilityProvider.getAriaLabel(e),i=r&&typeof r!=`string`?r:LT(r);n.disposables.add(bh(e=>{this.setAriaLabel(e.readObservable(i),n.container)}));let a=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof a==`number`?n.container.setAttribute(`aria-level`,`${a}`):n.container.removeAttribute(`aria-level`)}setAriaLabel(e,t){e?t.setAttribute(`aria-label`,e):t.removeAttribute(`aria-label`)}disposeElement(e,t,n){n.disposables.clear()}disposeTemplate(e){e.disposables.dispose()}},gE=class{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){let t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){this.dnd.onDragStart?.(e,t)}onDragOver(e,t,n,r,i){return this.dnd.onDragOver(e,t,n,r,i)}onDragLeave(e,t,n,r){this.dnd.onDragLeave?.(e,t,n,r)}onDragEnd(e){this.dnd.onDragEnd?.(e)}drop(e,t,n,r,i){this.dnd.drop(e,t,n,r,i)}dispose(){this.dnd.dispose()}},_E=class{get onDidChangeFocus(){return T.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return T.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseUp(){return this.view.onMouseUp}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseMove(){return this.view.onMouseMove}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1,t=T.chain(this.disposables.add(new IC(this.view.domNode,`keydown`)).event,t=>t.map(e=>new vp(e)).filter(t=>e=t.keyCode===F.ContextMenu||t.shiftKey&&t.keyCode===F.F10).map(e=>M_.stop(e,!0)).filter(()=>!1)),n=T.chain(this.disposables.add(new IC(this.view.domNode,`keyup`)).event,t=>t.forEach(()=>e=!1).map(e=>new vp(e)).filter(e=>e.keyCode===F.ContextMenu||e.shiftKey&&e.keyCode===F.F10).map(e=>M_.stop(e,!0)).map(({browserEvent:e})=>{let t=this.getFocus(),n=t.length?t[0]:void 0;return{index:n,element:n===void 0?void 0:this.view.element(n),anchor:n===void 0?this.view.domNode:this.view.domElement(n),browserEvent:e}})),r=T.chain(this.view.onContextMenu,t=>t.filter(t=>!e).map(({element:e,index:t,browserEvent:n})=>({element:e,index:t,anchor:new wp(Yh(this.view.domNode),n),browserEvent:n})));return T.any(t,n,r)}get onKeyDown(){return this.disposables.add(new IC(this.view.domNode,`keydown`)).event}get onKeyUp(){return this.disposables.add(new IC(this.view.domNode,`keyup`)).event}get onKeyPress(){return this.disposables.add(new IC(this.view.domNode,`keypress`)).event}get onDidFocus(){return T.signal(this.disposables.add(new IC(this.view.domNode,`focus`,!0)).event)}get onDidBlur(){return T.signal(this.disposables.add(new IC(this.view.domNode,`blur`,!0)).event)}constructor(e,t,n,r,i=lE){this.user=e,this._options=i,this.focus=new BT(`focused`),this.anchor=new BT(`anchor`),this.eventBufferer=new lr,this._ariaLabel=``,this.disposables=new C,this._onDidDispose=new E,this.onDidDispose=this._onDidDispose.event;let a=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?this._options.accessibilityProvider?.getWidgetRole():`list`;this.selection=new VT(a!==`listbox`);let o=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=i.accessibilityProvider,this.accessibilityProvider&&(o.push(new hE(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant?.(this.onDidChangeActiveDescendant,this,this.disposables)),r=r.map(e=>new mE(e.templateId,[...o,e]));let s={...i,dnd:i.dnd&&new gE(this,i.dnd)};if(this.view=this.createListView(t,n,r,s),this.view.domNode.setAttribute(`role`,a),i.styleController?this.styleController=i.styleController(this.view.domId):this.styleController=new sE(xC(this.view.domNode),this.view.domId),this.spliceable=new fne([new HT(this.focus,this.view,i.identityProvider),new HT(this.selection,this.view,i.identityProvider),new HT(this.anchor,this.view,i.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new tE(this,this.view)),(typeof i.keyboardSupport!=`boolean`||i.keyboardSupport)&&(this.keyboardController=new XT(this,this.view,i),this.disposables.add(this.keyboardController)),i.keyboardNavigationLabelProvider){let e=i.keyboardNavigationDelegate||$T;this.typeNavigationController=new eE(this,this.view,i.keyboardNavigationLabelProvider,i.keyboardNavigationEventFilter??(()=>!0),e),this.disposables.add(this.typeNavigationController)}if(this.mouseController=this.createMouseController(i),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider){let e=this.accessibilityProvider.getWidgetAriaLabel(),t=e&&typeof e!=`string`?e:LT(e);this.disposables.add(bh(e=>{this.ariaLabel=e.readObservable(t)}))}this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute(`aria-multiselectable`,`true`)}createListView(e,t,n,r){return new IT(e,t,n,r)}createMouseController(e){return new oE(this)}updateOptions(e={}){this._options={...this._options,...e},this.typeNavigationController?.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute(`aria-multiselectable`,`true`):this.view.domNode.removeAttribute(`aria-multiselectable`)),this.mouseController.updateOptions(e),this.keyboardController?.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,n=[]){if(e<0||e>this.view.length)throw new Jw(this.user,`Invalid start index: ${e}`);if(t<0)throw new Jw(this.user,`Invalid delete count: ${t}`);t===0&&n.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,n))}updateWidth(e){this.view.updateWidth(e)}updateElementHeight(e,t){this.view.updateElementHeight(e,t,null)}rerender(){this.view.rerender()}element(e){return this.view.element(e)}indexOf(e){return this.view.indexOf(e)}indexAt(e){return this.view.indexAt(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get contentWidth(){return this.view.contentWidth}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get onDidChangeContentWidth(){return this.view.onDidChangeContentWidth}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollLeft(){return this.view.getScrollLeft()}set scrollLeft(e){this.view.setScrollLeft(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get firstMostlyVisibleIndex(){return this.view.firstMostlyVisibleIndex}get lastVisibleIndex(){return this.view.lastVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute(`aria-label`,e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}triggerTypeNavigation(){this.typeNavigationController?.trigger()}setSelection(e,t){for(let t of e)if(t<0||t>=this.length)throw new Jw(this.user,`Invalid index ${t}`);e=e.filter(e=>this.getElementGroupId(e)!==Pne),this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(e===void 0){this.anchor.set([]);return}if(e<0||e>=this.length)throw new Jw(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return this.anchor.get().at(0)}getAnchorElement(){let e=this.getAnchor();return e===void 0?void 0:this.element(e)}getElementGroupId(e){let t=this.options.identityProvider;if(!t?.getGroupId)return;let n=this.element(e);return t.getGroupId(n)}filterIndicesByGroup(e,t){let n=this.options.identityProvider;return n?.getGroupId?t===`notSelectable`?[]:e.filter(e=>{let r=this.element(e);return n.getGroupId(r)===t}):e}setFocus(e,t){for(let t of e)if(t<0||t>=this.length)throw new Jw(this.user,`Invalid index ${t}`);this.focus.set(e,t)}focusNext(e=1,t=!1,n,r){if(this.length===0)return;let i=this.focus.get(),a=this.findNextIndex(i.length>0?i[0]+e:0,t,r);a>-1&&this.setFocus([a],n)}focusPrevious(e=1,t=!1,n,r){if(this.length===0)return;let i=this.focus.get(),a=this.findPreviousIndex(i.length>0?i[0]-e:0,t,r);a>-1&&this.setFocus([a],n)}async focusNextPage(e,t){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=n===0?0:n-1;let r=this.getFocus()[0];if(r!==n&&(r===void 0||n>r)){let i=this.findPreviousIndex(n,!1,t);i>-1&&r!==i?this.setFocus([i],e):this.setFocus([n],e)}else{let i=this.view.getScrollTop(),a=i+this.view.renderHeight;n>r&&(a-=this.view.elementHeight(n)),this.view.setScrollTop(a),this.view.getScrollTop()!==i&&(this.setFocus([]),await dc(0),await this.focusNextPage(e,t))}}async focusPreviousPage(e,t,n=()=>0){let r,i=n(),a=this.view.getScrollTop()+i;r=a===0?this.view.indexAt(a):this.view.indexAfter(a-1);let o=this.getFocus()[0];if(o!==r&&(o===void 0||o>=r)){let n=this.findNextIndex(r,!1,t);n>-1&&o!==n?this.setFocus([n],e):this.setFocus([r],e)}else{let r=a;this.view.setScrollTop(a-this.view.renderHeight-i),this.view.getScrollTop()+n()!==r&&(this.setFocus([]),await dc(0),await this.focusPreviousPage(e,t,n))}}focusLast(e,t){if(this.length===0)return;let n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(this.length===0)return;let r=this.findNextIndex(e,!1,n);r>-1&&this.setFocus([r],t)}findNextIndex(e,t=!1,n){for(let r=0;r<this.length;r++){if(e>=this.length&&!t)return-1;if(e%=this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,n){for(let r=0;r<this.length;r++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t,n=0){if(e<0||e>=this.length)throw new Jw(this.user,`Invalid index ${e}`);let r=this.view.getScrollTop(),i=this.view.elementTop(e),a=this.view.elementHeight(e);if(xe(t)){let e=a-this.view.renderHeight+n;this.view.setScrollTop(e*Em(t,0,1)+i-n)}else{let e=i+a,t=r+this.view.renderHeight;i<r+n&&e>=t||(i<r+n||e>=t&&a>=this.view.renderHeight?this.view.setScrollTop(i-n):e>=t&&this.view.setScrollTop(e-this.view.renderHeight))}}getRelativeTop(e,t=0){if(e<0||e>=this.length)throw new Jw(this.user,`Invalid index ${e}`);let n=this.view.getScrollTop(),r=this.view.elementTop(e),i=this.view.elementHeight(e);if(r<n+t||r+i>n+this.view.renderHeight)return null;let a=i-this.view.renderHeight+t;return Math.abs((n+t-r)/a)}isDOMFocused(){return s_(this.view.domNode)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(e){return this.view.getElementDomId(e)}getElementTop(e){return this.view.elementTop(e)}style(e){this.styleController.style(e)}delegateScrollFromMouseWheelEvent(e){this.view.delegateScrollFromMouseWheelEvent(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(e=>this.view.element(e)),browserEvent:t}}_onFocusChange(){let e=this.focus.get();this.view.domNode.classList.toggle(`element-focused`,e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){let e=this.focus.get();if(e.length>0){let t;this.accessibilityProvider?.getActiveDescendantId&&(t=this.accessibilityProvider.getActiveDescendantId(this.view.element(e[0]))),this.view.domNode.setAttribute(`aria-activedescendant`,t||this.view.getElementDomId(e[0]))}else this.view.domNode.removeAttribute(`aria-activedescendant`)}_onSelectionChange(){let e=this.selection.get();this.view.domNode.classList.toggle(`selection-none`,e.length===0),this.view.domNode.classList.toggle(`selection-single`,e.length===1),this.view.domNode.classList.toggle(`selection-multiple`,e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}};_E.__decorator=t([iS],_E.prototype,`onDidChangeFocus`,null),_E.__decorator=t([iS],_E.prototype,`onDidChangeSelection`,null),_E.__decorator=t([iS],_E.prototype,`onContextMenu`,null),_E.__decorator=t([iS],_E.prototype,`onKeyDown`,null),_E.__decorator=t([iS],_E.prototype,`onKeyUp`,null),_E.__decorator=t([iS],_E.prototype,`onKeyPress`,null),_E.__decorator=t([iS],_E.prototype,`onDidFocus`,null),_E.__decorator=t([iS],_E.prototype,`onDidBlur`,null),s(vC);var vE=class{get templateId(){return this.renderer.templateId}constructor(e,t){this.renderer=e,this.modelProvider=t}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:w.None}}renderElement(e,t,n,r){if(n.disposable?.dispose(),!n.data)return;let i=this.modelProvider();if(i.isResolved(e))return this.renderer.renderElement(i.get(e),e,n.data,r);let a=new Lr,o=i.resolve(e,a.token);n.disposable={dispose:()=>a.cancel()},this.renderer.renderPlaceholder(e,n.data),o.then(t=>this.renderer.renderElement(t,e,n.data,r))}disposeTemplate(e){e.disposable&&=(e.disposable.dispose(),void 0),e.data&&=(this.renderer.disposeTemplate(e.data),void 0)}},yE=class{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){let t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}};function bE(e,t){return{...t,accessibilityProvider:t.accessibilityProvider&&new yE(e,t.accessibilityProvider)}}var xE=class{constructor(e,t,n,r,i={}){this.modelDisposables=new C;let a=()=>this.model;this.list=new _E(e,t,n,r.map(e=>new vE(e,a)),bE(a,i))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}isDOMFocused(){return s_(this.getHTMLElement())}domFocus(){this.list.domFocus()}get onDidFocus(){return this.list.onDidFocus}get onDidBlur(){return this.list.onDidBlur}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseClick(){return T.map(this.list.onMouseClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onMouseDblClick(){return T.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onTap(){return T.map(this.list.onTap,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onPointer(){return T.map(this.list.onPointer,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onDidChangeFocus(){return T.map(this.list.onDidChangeFocus,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(e=>this._model.get(e)),indexes:t,browserEvent:n}))}get onDidChangeSelection(){return T.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(e=>this._model.get(e)),indexes:t,browserEvent:n}))}get onContextMenu(){return T.map(this.list.onContextMenu,({element:e,index:t,anchor:n,browserEvent:r})=>e===void 0?{element:e,index:t,anchor:n,browserEvent:r}:{element:this._model.get(e),index:t,anchor:n,browserEvent:r})}get model(){return this._model}set model(e){this.modelDisposables.clear(),this._model=e,this.list.splice(0,this.list.length,Mt(e.length)),this.modelDisposables.add(e.onDidIncrementLength(e=>this.list.splice(this.list.length,0,Mt(this.list.length,e))))}get length(){return this.list.length}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollLeft(){return this.list.scrollLeft}set scrollLeft(e){this.list.scrollLeft=e}setAnchor(e){this.list.setAnchor(e)}getAnchor(){return this.list.getAnchor()}setFocus(e){this.list.setFocus(e)}focusNext(e,t){this.list.focusNext(e,t)}focusPrevious(e,t){this.list.focusPrevious(e,t)}focusNextPage(){return this.list.focusNextPage()}focusPreviousPage(){return this.list.focusPreviousPage()}focusLast(){this.list.focusLast()}focusFirst(){this.list.focusFirst()}getFocus(){return this.list.getFocus()}setSelection(e,t){this.list.setSelection(e,t)}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}layout(e,t){this.list.layout(e,t)}triggerTypeNavigation(){this.list.triggerTypeNavigation()}reveal(e,t){this.list.reveal(e,t)}style(e){this.list.style(e)}dispose(){this.list.dispose(),this.modelDisposables.dispose()}},SE={showInstantHover:()=>void 0,showDelayedHover:()=>void 0,setupDelayedHover:()=>w.None,setupDelayedHoverAtMouse:()=>w.None,hideHover:()=>void 0,showAndFocusLastHover:()=>void 0,setupManagedHover:()=>({dispose:()=>void 0,show:()=>void 0,hide:()=>void 0,update:()=>void 0}),showManagedHover:()=>void 0};function CE(e){SE=e}function wE(){return SE}var TE=()=>({get delay(){return-1},dispose:()=>{},showHover:()=>{}}),EE=new Sa(()=>TE(`mouse`,!1)),DE=new Sa(()=>TE(`element`,!1));function OE(e){TE=e}function kE(e){return e===`element`?DE.value:EE.value}function AE(){return TE(`element`,!0)}s({});var jE=!1,ME;(function(e){e.North=`north`,e.South=`south`,e.East=`east`,e.West=`west`})(ME||={});var NE;(function(e){e[e.VERTICAL=0]=`VERTICAL`,e[e.HORIZONTAL=1]=`HORIZONTAL`})(NE||={});var PE;(function(e){e[e.Disabled=0]=`Disabled`,e[e.AtMinimum=1]=`AtMinimum`,e[e.AtMaximum=2]=`AtMaximum`,e[e.Enabled=3]=`Enabled`})(PE||={});var FE=4,IE=new E;function LE(e){FE=e,IE.fire(e)}var RE=300,zE=new E;function BE(e){RE=e,zE.fire(e)}var VE=class{constructor(e){this.el=e,this.disposables=new C}get onPointerMove(){return this.disposables.add(new IC(Yh(this.el),`mousemove`)).event}get onPointerUp(){return this.disposables.add(new IC(Yh(this.el),`mouseup`)).event}dispose(){this.disposables.dispose()}};VE.__decorator=t([iS],VE.prototype,`onPointerMove`,null),VE.__decorator=t([iS],VE.prototype,`onPointerUp`,null);var HE=class{get onPointerMove(){return this.disposables.add(new IC(this.el,LC.Change)).event}get onPointerUp(){return this.disposables.add(new IC(this.el,LC.End)).event}constructor(e){this.el=e,this.disposables=new C}dispose(){this.disposables.dispose()}};HE.__decorator=t([iS],HE.prototype,`onPointerMove`,null),HE.__decorator=t([iS],HE.prototype,`onPointerUp`,null);var UE=class{get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}constructor(e){this.factory=e}dispose(){}};UE.__decorator=t([iS],UE.prototype,`onPointerMove`,null),UE.__decorator=t([iS],UE.prototype,`onPointerUp`,null);var WE=`pointer-events-disabled`,GE=class e extends w{get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle(`disabled`,e===PE.Disabled),this.el.classList.toggle(`minimum`,e===PE.AtMinimum),this.el.classList.toggle(`maximum`,e===PE.AtMaximum),this._state=e,this.onDidEnablementChange.fire(e))}get onDidStart(){return this._onDidStart.event}get onDidChange(){return this._onDidChange.event}get onDidReset(){return this._onDidReset.event}get onDidEnd(){return this._onDidEnd.event}set orthogonalStartSash(t){if(this._orthogonalStartSash!==t){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),t){let n=n=>{this.orthogonalStartDragHandleDisposables.clear(),n!==PE.Disabled&&(this._orthogonalStartDragHandle=z(this.el,B(`.orthogonal-drag-handle.start`)),this.orthogonalStartDragHandleDisposables.add(S(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(L(this._orthogonalStartDragHandle,`mouseenter`,()=>e.onMouseEnter(t))),this.orthogonalStartDragHandleDisposables.add(L(this._orthogonalStartDragHandle,`mouseleave`,()=>e.onMouseLeave(t))))};this.orthogonalStartSashDisposables.add(t.onDidEnablementChange.event(n,this)),n(t.state)}this._orthogonalStartSash=t}}set orthogonalEndSash(t){if(this._orthogonalEndSash!==t){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),t){let n=n=>{this.orthogonalEndDragHandleDisposables.clear(),n!==PE.Disabled&&(this._orthogonalEndDragHandle=z(this.el,B(`.orthogonal-drag-handle.end`)),this.orthogonalEndDragHandleDisposables.add(S(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(L(this._orthogonalEndDragHandle,`mouseenter`,()=>e.onMouseEnter(t))),this.orthogonalEndDragHandleDisposables.add(L(this._orthogonalEndDragHandle,`mouseleave`,()=>e.onMouseLeave(t))))};this.orthogonalEndSashDisposables.add(t.onDidEnablementChange.event(n,this)),n(t.state)}this._orthogonalEndSash=t}}constructor(t,n,r){super(),this.hoverDelay=RE,this.hoverDelayer=this._register(new cc(this.hoverDelay)),this._state=PE.Enabled,this.onDidEnablementChange=this._register(new E),this._onDidStart=this._register(new E),this._onDidChange=this._register(new E),this._onDidReset=this._register(new E),this._onDidEnd=this._register(new E),this.orthogonalStartSashDisposables=this._register(new C),this.orthogonalStartDragHandleDisposables=this._register(new C),this.orthogonalEndSashDisposables=this._register(new C),this.orthogonalEndDragHandleDisposables=this._register(new C),this.linkedSash=void 0,this.el=z(t,B(`.monaco-sash`)),r.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${r.orthogonalEdge}`),si&&this.el.classList.add(`mac`),this._register(L(this.el,`mousedown`,e=>this.onPointerStart(e,new VE(t)))),this._register(L(this.el,`dblclick`,e=>this.onPointerDoublePress(e))),this._register(L(this.el,`mouseenter`,()=>e.onMouseEnter(this))),this._register(L(this.el,`mouseleave`,()=>e.onMouseLeave(this))),this._register(RC.addTarget(this.el)),this._register(L(this.el,LC.Start,e=>this.onPointerStart(e,new HE(this.el))));let i;this._register(L(this.el,LC.Tap,e=>{if(i){clearTimeout(i),i=void 0,this.onPointerDoublePress(e);return}clearTimeout(i),i=setTimeout(()=>i=void 0,250)})),typeof r.size==`number`?(this.size=r.size,r.orientation===NE.VERTICAL?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=FE,this._register(IE.event(e=>{this.size=e,this.layout()}))),this._register(zE.event(e=>this.hoverDelay=e)),this.layoutProvider=n,this.orthogonalStartSash=r.orthogonalStartSash,this.orthogonalEndSash=r.orthogonalEndSash,this.orientation=r.orientation||NE.VERTICAL,this.orientation===NE.HORIZONTAL?(this.el.classList.add(`horizontal`),this.el.classList.remove(`vertical`)):(this.el.classList.remove(`horizontal`),this.el.classList.add(`vertical`)),this.el.classList.toggle(`debug`,jE),this.layout()}onPointerStart(e,t){M_.stop(e);let n=!1;if(!e.__orthogonalSashEvent){let r=this.getOrthogonalSash(e);r&&(n=!0,e.__orthogonalSashEvent=!0,r.onPointerStart(e,new UE(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new UE(t))),!this.state)return;let r=this.el.getRootNode().querySelectorAll(`iframe`);for(let e of r)e.classList.add(WE);let i=e.pageX,a=e.pageY,o=e.altKey,s={startX:i,currentX:i,startY:a,currentY:a,altKey:o};this.el.classList.add(`active`),this._onDidStart.fire(s);let c=xC(this.el),l=()=>{let e=``;e=n?`all-scroll`:this.orientation===NE.HORIZONTAL?this.state===PE.AtMinimum?`s-resize`:this.state===PE.AtMaximum?`n-resize`:si?`row-resize`:`ns-resize`:this.state===PE.AtMinimum?`e-resize`:this.state===PE.AtMaximum?`w-resize`:si?`col-resize`:`ew-resize`,c.textContent=`* { cursor: ${e} !important; }`},u=new C;l(),n||this.onDidEnablementChange.event(l,null,u),t.onPointerMove(e=>{M_.stop(e,!1);let t={startX:i,currentX:e.pageX,startY:a,currentY:e.pageY,altKey:o};this._onDidChange.fire(t)},null,u),t.onPointerUp(e=>{M_.stop(e,!1),c.remove(),this.el.classList.remove(`active`),this._onDidEnd.fire(),u.dispose();for(let e of r)e.classList.remove(WE)},null,u),u.add(t)}onPointerDoublePress(e){let t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(t,n=!1){t.el.classList.contains(`active`)?(t.hoverDelayer.cancel(),t.el.classList.add(`hover`)):t.hoverDelayer.trigger(()=>t.el.classList.add(`hover`),t.hoverDelay).then(void 0,()=>{}),!n&&t.linkedSash&&e.onMouseEnter(t.linkedSash,!0)}static onMouseLeave(t,n=!1){t.hoverDelayer.cancel(),t.el.classList.remove(`hover`),!n&&t.linkedSash&&e.onMouseLeave(t.linkedSash,!0)}clearSashHoverState(){e.onMouseLeave(this)}layout(){if(this.orientation===NE.VERTICAL){let e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+`px`,e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+`px`),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+`px`)}else{let e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+`px`,e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+`px`),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+`px`)}}getOrthogonalSash(e){let t=e.initialTarget??e.target;if(!(!t||!x_(t))&&t.classList.contains(`orthogonal-drag-handle`))return t.classList.contains(`start`)?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}};s({});var KE={separatorBorder:M.transparent},qE;(function(e){e[e.Normal=0]=`Normal`,e[e.Low=1]=`Low`,e[e.High=2]=`High`})(qE||={});var JE=class{set size(e){this._size=e}get size(){return this._size}get cachedVisibleSize(){return this._cachedVisibleSize}get visible(){return this._cachedVisibleSize===void 0}setVisible(e,t){if(e!==this.visible){e?(this.size=Em(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t==`number`?t:this.size,this.size=0),this.container.classList.toggle(`visible`,e);try{this.view.setVisible?.(e)}catch(e){console.error(`Splitview: Failed to set visible view`),console.error(e)}}}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){return this.view.proportionalLayout??!0}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?``:`none`}constructor(e,t,n,r){this.container=e,this.view=t,this.disposable=r,this._cachedVisibleSize=void 0,typeof n==`number`?(this._size=n,this._cachedVisibleSize=void 0,e.classList.add(`visible`)):(this._size=0,this._cachedVisibleSize=n.cachedVisibleSize)}layout(e,t){this.layoutContainer(e);try{this.view.layout(this.size,e,t)}catch(e){console.error(`Splitview: Failed to layout view`),console.error(e)}}dispose(){this.disposable.dispose()}},YE=class extends JE{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}},XE=class extends JE{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}},ZE;(function(e){e[e.Idle=0]=`Idle`,e[e.Busy=1]=`Busy`})(ZE||={});var QE;(function(e){e.Distribute={type:`distribute`};function t(e){return{type:`split`,index:e}}e.Split=t;function n(e){return{type:`auto`,index:e}}e.Auto=n;function r(e){return{type:`invisible`,cachedVisibleSize:e}}e.Invisible=r})(QE||={});var $E=class extends w{get contentSize(){return this._contentSize}get length(){return this.viewItems.length}get minimumSize(){return this.viewItems.reduce((e,t)=>e+t.minimumSize,0)}get maximumSize(){return this.length===0?1/0:this.viewItems.reduce((e,t)=>e+t.maximumSize,0)}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(let t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(let t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}get sashes(){return this.sashItems.map(e=>e.sash)}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,t={}){super(),this.size=0,this._contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=ZE.Idle,this._onDidSashChange=this._register(new E),this._onDidSashReset=this._register(new E),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=t.orientation??NE.VERTICAL,this.inverseAltBehavior=t.inverseAltBehavior??!1,this.proportionalLayout=t.proportionalLayout??!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=v_(`div`),this.el.classList.add(`monaco-split-view2`),this.el.classList.add(this.orientation===NE.VERTICAL?`vertical`:`horizontal`),e.appendChild(this.el),this.sashContainer=z(this.el,B(`.sash-container`)),this.viewContainer=B(`.split-view-container`),this.scrollable=this._register(new aT({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:e=>xg(Yh(this.el),e)})),this.scrollableElement=this._register(new _T(this.viewContainer,{vertical:this.orientation===NE.VERTICAL?t.scrollbarVisibility??iT.Auto:iT.Hidden,horizontal:this.orientation===NE.HORIZONTAL?t.scrollbarVisibility??iT.Auto:iT.Hidden},this.scrollable));let n=this._register(new IC(this.viewContainer,`scroll`)).event;this._register(n(e=>{let t=this.scrollableElement.getScrollPosition(),n=Math.abs(this.viewContainer.scrollLeft-t.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,r=Math.abs(this.viewContainer.scrollTop-t.scrollTop)<=1?void 0:this.viewContainer.scrollTop;(n!==void 0||r!==void 0)&&this.scrollableElement.setScrollPosition({scrollLeft:n,scrollTop:r})})),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(e=>{e.scrollTopChanged&&(this.viewContainer.scrollTop=e.scrollTop),e.scrollLeftChanged&&(this.viewContainer.scrollLeft=e.scrollLeft)})),z(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||KE),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((e,t)=>{let n=we(e.visible)||e.visible?e.size:{type:`invisible`,cachedVisibleSize:e.size},r=e.view;this.doAddView(r,n,t,!0)}),this._contentSize=this.viewItems.reduce((e,t)=>e+t.size,0),this.saveProportions())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove(`separator-border`),this.el.style.removeProperty(`--separator-border`)):(this.el.classList.add(`separator-border`),this.el.style.setProperty(`--separator-border`,e.separatorBorder.toString()))}addView(e,t,n=this.viewItems.length,r){this.doAddView(e,t,n,r)}removeView(e,t){if(e<0||e>=this.viewItems.length)throw Error(`Index out of bounds`);if(this.state!==ZE.Idle)throw Error(`Cant modify splitview`);this.state=ZE.Busy;try{t?.type===`auto`&&(t=this.areViewsDistributed()?{type:`distribute`}:{type:`split`,index:t.index});let n=t?.type===`split`?this.viewItems[t.index]:void 0,r=this.viewItems.splice(e,1)[0];if(n&&(n.size+=r.size),this.viewItems.length>=1){let t=Math.max(e-1,0);this.sashItems.splice(t,1)[0].disposable.dispose()}this.relayout(),t?.type===`distribute`&&this.distributeViewSizes();let i=r.view;return r.dispose(),i}finally{this.state=ZE.Idle}}removeAllViews(){if(this.state!==ZE.Idle)throw Error(`Cant modify splitview`);this.state=ZE.Busy;try{let e=this.viewItems.splice(0,this.viewItems.length);for(let t of e)t.dispose();let t=this.sashItems.splice(0,this.sashItems.length);for(let e of t)e.disposable.dispose();return this.relayout(),e.map(e=>e.view)}finally{this.state=ZE.Idle}}moveView(e,t){if(this.state!==ZE.Idle)throw Error(`Cant modify splitview`);let n=this.getViewCachedVisibleSize(e),r=n===void 0?this.getViewSize(e):QE.Invisible(n),i=this.removeView(e);this.addView(i,r,t)}swapViews(e,t){if(this.state!==ZE.Idle)throw Error(`Cant modify splitview`);if(e>t)return this.swapViews(t,e);let n=this.getViewSize(e),r=this.getViewSize(t),i=this.removeView(t),a=this.removeView(e);this.addView(i,n,e),this.addView(a,r,t)}isViewVisible(e){if(e<0||e>=this.viewItems.length)throw Error(`Index out of bounds`);return this.viewItems[e].visible}setViewVisible(e,t){if(e<0||e>=this.viewItems.length)throw Error(`Index out of bounds`);this.viewItems[e].setVisible(t),this.distributeEmptySpace(e),this.layoutViews(),this.saveProportions()}getViewCachedVisibleSize(e){if(e<0||e>=this.viewItems.length)throw Error(`Index out of bounds`);return this.viewItems[e].cachedVisibleSize}layout(e,t){let n=Math.max(this.size,this._contentSize);if(this.size=e,this.layoutContext=t,this.proportions){let t=0;for(let n=0;n<this.viewItems.length;n++){let r=this.viewItems[n],i=this.proportions[n];typeof i==`number`?t+=i:e-=r.size}for(let n=0;n<this.viewItems.length;n++){let r=this.viewItems[n],i=this.proportions[n];typeof i==`number`&&t>0&&(r.size=Em(Math.round(i*e/t),r.minimumSize,r.maximumSize))}}else{let t=Mt(this.viewItems.length),r=t.filter(e=>this.viewItems[e].priority===qE.Low),i=t.filter(e=>this.viewItems[e].priority===qE.High);this.resize(this.viewItems.length-1,e-n,void 0,r,i)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this._contentSize>0&&(this.proportions=this.viewItems.map(e=>e.proportionalLayout&&e.visible?e.size/this._contentSize:void 0))}onSashStart({sash:e,start:t,alt:n}){for(let e of this.viewItems)e.enabled=!1;let r=this.sashItems.findIndex(t=>t.sash===e),i=Fn(L(o_(this.el),`keydown`,e=>a(this.sashDragState.current,e.altKey)),L(o_(this.el),`keyup`,()=>a(this.sashDragState.current,!1))),a=(e,t)=>{let n=this.viewItems.map(e=>e.size),a=-1/0,o=1/0;if(this.inverseAltBehavior&&(t=!t),t)if(r===this.sashItems.length-1){let e=this.viewItems[r];a=(e.minimumSize-e.size)/2,o=(e.maximumSize-e.size)/2}else{let e=this.viewItems[r+1];a=(e.size-e.maximumSize)/2,o=(e.size-e.minimumSize)/2}let s,c;if(!t){let e=Mt(r,-1),t=Mt(r+1,this.viewItems.length),i=e.reduce((e,t)=>e+(this.viewItems[t].minimumSize-n[t]),0),a=e.reduce((e,t)=>e+(this.viewItems[t].viewMaximumSize-n[t]),0),o=t.length===0?1/0:t.reduce((e,t)=>e+(n[t]-this.viewItems[t].minimumSize),0),l=t.length===0?-1/0:t.reduce((e,t)=>e+(n[t]-this.viewItems[t].viewMaximumSize),0),u=Math.max(i,l),d=Math.min(o,a),f=this.findFirstSnapIndex(e),p=this.findFirstSnapIndex(t);if(typeof f==`number`){let e=this.viewItems[f],t=Math.floor(e.viewMinimumSize/2);s={index:f,limitDelta:e.visible?u-t:u+t,size:e.size}}if(typeof p==`number`){let e=this.viewItems[p],t=Math.floor(e.viewMinimumSize/2);c={index:p,limitDelta:e.visible?d+t:d-t,size:e.size}}}this.sashDragState={start:e,current:e,index:r,sizes:n,minDelta:a,maxDelta:o,alt:t,snapBefore:s,snapAfter:c,disposable:i}};a(t,n)}onSashChange({current:e}){let{index:t,start:n,sizes:r,alt:i,minDelta:a,maxDelta:o,snapBefore:s,snapAfter:c}=this.sashDragState;this.sashDragState.current=e;let l=e-n,u=this.resize(t,l,r,void 0,void 0,a,o,s,c);if(i){let e=t===this.sashItems.length-1,n=this.viewItems.map(e=>e.size),r=e?t:t+1,i=this.viewItems[r],a=i.size-i.maximumSize,o=i.size-i.minimumSize,s=e?t-1:t+1;this.resize(s,-u,n,void 0,void 0,a,o)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(let e of this.viewItems)e.enabled=!0}onViewChange(e,t){let n=this.viewItems.indexOf(e);n<0||n>=this.viewItems.length||(t=typeof t==`number`?t:e.size,t=Em(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&n>0?(this.resize(n-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([n],void 0)))}resizeView(e,t){if(!(e<0||e>=this.viewItems.length)){if(this.state!==ZE.Idle)throw Error(`Cant modify splitview`);this.state=ZE.Busy;try{let n=Mt(this.viewItems.length).filter(t=>t!==e),r=[...n.filter(e=>this.viewItems[e].priority===qE.Low),e],i=n.filter(e=>this.viewItems[e].priority===qE.High),a=this.viewItems[e];t=Math.round(t),t=Em(t,a.minimumSize,Math.min(a.maximumSize,this.size)),a.size=t,this.relayout(r,i)}finally{this.state=ZE.Idle}}}isViewExpanded(e){if(e<0||e>=this.viewItems.length)return!1;for(let t of this.viewItems)if(t!==this.viewItems[e]&&t.size>t.minimumSize)return!1;return!0}distributeViewSizes(){let e=[],t=0;for(let n of this.viewItems)n.maximumSize-n.minimumSize>0&&(e.push(n),t+=n.size);let n=Math.floor(t/e.length);for(let t of e)t.size=Em(n,t.minimumSize,t.maximumSize);let r=Mt(this.viewItems.length),i=r.filter(e=>this.viewItems[e].priority===qE.Low),a=r.filter(e=>this.viewItems[e].priority===qE.High);this.relayout(i,a)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,n=this.viewItems.length,r){if(this.state!==ZE.Idle)throw Error(`Cant modify splitview`);this.state=ZE.Busy;try{let i=B(`.split-view-view`);n===this.viewItems.length?this.viewContainer.appendChild(i):this.viewContainer.insertBefore(i,this.viewContainer.children.item(n));let a=Fn(e.onDidChange(e=>this.onViewChange(s,e)),S(()=>i.remove())),o;typeof t==`number`?o=t:(t.type===`auto`&&(t=this.areViewsDistributed()?{type:`distribute`}:{type:`split`,index:t.index}),o=t.type===`split`?this.getViewSize(t.index)/2:t.type===`invisible`?{cachedVisibleSize:t.cachedVisibleSize}:e.minimumSize);let s=this.orientation===NE.VERTICAL?new YE(i,e,o,a):new XE(i,e,o,a);if(this.viewItems.splice(n,0,s),this.viewItems.length>1){let e={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},t=this.orientation===NE.VERTICAL?new GE(this.sashContainer,{getHorizontalSashTop:e=>this.getSashPosition(e),getHorizontalSashWidth:this.getSashOrthogonalSize},{...e,orientation:NE.HORIZONTAL}):new GE(this.sashContainer,{getVerticalSashLeft:e=>this.getSashPosition(e),getVerticalSashHeight:this.getSashOrthogonalSize},{...e,orientation:NE.VERTICAL}),r=this.orientation===NE.VERTICAL?e=>({sash:t,start:e.startY,current:e.currentY,alt:e.altKey}):e=>({sash:t,start:e.startX,current:e.currentX,alt:e.altKey}),i={sash:t,disposable:Fn(T.map(t.onDidStart,r)(this.onSashStart,this),T.map(t.onDidChange,r)(this.onSashChange,this),T.map(t.onDidEnd,()=>this.sashItems.findIndex(e=>e.sash===t))(this.onSashEnd,this),t.onDidReset(()=>{let e=this.sashItems.findIndex(e=>e.sash===t),n=Mt(e,-1),r=Mt(e+1,this.viewItems.length),i=this.findFirstSnapIndex(n),a=this.findFirstSnapIndex(r);typeof i==`number`&&!this.viewItems[i].visible||typeof a==`number`&&!this.viewItems[a].visible||this._onDidSashReset.fire(e)}),t)};this.sashItems.splice(n-1,0,i)}i.appendChild(e.element);let c;typeof t!=`number`&&t.type===`split`&&(c=[t.index]),r||this.relayout([n],c),!r&&typeof t!=`number`&&t.type===`distribute`&&this.distributeViewSizes()}finally{this.state=ZE.Idle}}relayout(e,t){let n=this.viewItems.reduce((e,t)=>e+t.size,0);this.resize(this.viewItems.length-1,this.size-n,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,n=this.viewItems.map(e=>e.size),r,i,a=-1/0,o=1/0,s,c){if(e<0||e>=this.viewItems.length)return 0;let l=Mt(e,-1),u=Mt(e+1,this.viewItems.length);if(i)for(let e of i)Rt(l,e),Rt(u,e);if(r)for(let e of r)zt(l,e),zt(u,e);let d=l.map(e=>this.viewItems[e]),f=l.map(e=>n[e]),p=u.map(e=>this.viewItems[e]),m=u.map(e=>n[e]),h=l.reduce((e,t)=>e+(this.viewItems[t].minimumSize-n[t]),0),g=l.reduce((e,t)=>e+(this.viewItems[t].maximumSize-n[t]),0),_=u.length===0?1/0:u.reduce((e,t)=>e+(n[t]-this.viewItems[t].minimumSize),0),v=u.length===0?-1/0:u.reduce((e,t)=>e+(n[t]-this.viewItems[t].maximumSize),0),ee=Math.max(h,v,a),te=Math.min(_,g,o),ne=!1;if(s){let e=this.viewItems[s.index],n=t>=s.limitDelta;ne=n!==e.visible,e.setVisible(n,s.size)}if(!ne&&c){let e=this.viewItems[c.index],n=t<c.limitDelta;ne=n!==e.visible,e.setVisible(n,c.size)}if(ne)return this.resize(e,t,n,r,i,a,o);t=Em(t,ee,te);for(let e=0,n=t;e<d.length;e++){let t=d[e],r=Em(f[e]+n,t.minimumSize,t.maximumSize),i=r-f[e];n-=i,t.size=r}for(let e=0,n=t;e<p.length;e++){let t=p[e],r=Em(m[e]-n,t.minimumSize,t.maximumSize),i=r-m[e];n+=i,t.size=r}return t}distributeEmptySpace(e){let t=this.viewItems.reduce((e,t)=>e+t.size,0),n=this.size-t,r=Mt(this.viewItems.length-1,-1),i=r.filter(e=>this.viewItems[e].priority===qE.Low),a=r.filter(e=>this.viewItems[e].priority===qE.High);for(let e of a)Rt(r,e);for(let e of i)zt(r,e);typeof e==`number`&&zt(r,e);for(let e=0;n!==0&&e<r.length;e++){let t=this.viewItems[r[e]],i=Em(t.size+n,t.minimumSize,t.maximumSize),a=i-t.size;n-=a,t.size=i}}layoutViews(){this._contentSize=this.viewItems.reduce((e,t)=>e+t.size,0);let e=0;for(let t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(e=>e.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===NE.VERTICAL?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})}updateSashEnablement(){let e=!1,t=this.viewItems.map(t=>e=t.size-t.minimumSize>0||e);e=!1;let n=this.viewItems.map(t=>e=t.maximumSize-t.size>0||e),r=[...this.viewItems].reverse();e=!1;let i=r.map(t=>e=t.size-t.minimumSize>0||e).reverse();e=!1;let a=r.map(t=>e=t.maximumSize-t.size>0||e).reverse(),o=0;for(let e=0;e<this.sashItems.length;e++){let{sash:r}=this.sashItems[e],s=this.viewItems[e];o+=s.size;let c=!(t[e]&&a[e+1]),l=!(n[e]&&i[e+1]);if(c&&l){let n=Mt(e,-1),a=Mt(e+1,this.viewItems.length),s=this.findFirstSnapIndex(n),c=this.findFirstSnapIndex(a),l=typeof s==`number`&&!this.viewItems[s].visible,u=typeof c==`number`&&!this.viewItems[c].visible;l&&i[e]&&(o>0||this.startSnappingEnabled)?r.state=PE.AtMinimum:u&&t[e]&&(o<this._contentSize||this.endSnappingEnabled)?r.state=PE.AtMaximum:r.state=PE.Disabled}else c&&!l?r.state=PE.AtMinimum:!c&&l?r.state=PE.AtMaximum:r.state=PE.Enabled}}getSashPosition(e){let t=0;for(let n=0;n<this.sashItems.length;n++)if(t+=this.viewItems[n].size,this.sashItems[n].sash===e)return t;return 0}findFirstSnapIndex(e){for(let t of e){let e=this.viewItems[t];if(e.visible&&e.snap)return t}for(let t of e){let e=this.viewItems[t];if(e.visible&&e.maximumSize-e.minimumSize>0)return;if(!e.visible&&e.snap)return t}}areViewsDistributed(){let e,t;for(let n of this.viewItems)if(e=e===void 0?n.size:Math.min(e,n.size),t=t===void 0?n.size:Math.max(t,n.size),t-e>2)return!1;return!0}dispose(){this.sashDragState?.disposable.dispose(),Nn(this.viewItems),this.viewItems=[],this.sashItems.forEach(e=>e.disposable.dispose()),this.sashItems=[],super.dispose()}};s({});var eD=class e{static#e=this.TemplateId=`row`;constructor(t,n,r){this.columns=t,this.getColumnSize=r,this.templateId=e.TemplateId,this.renderedTemplates=new Set;let i=new Map(n.map(e=>[e.templateId,e]));this.renderers=[];for(let e of t){let t=i.get(e.templateId);if(!t)throw Error(`Table cell renderer for template id ${e.templateId} not found.`);this.renderers.push(t)}}renderTemplate(e){let t=z(e,B(`.monaco-table-tr`)),n=[],r=[];for(let e=0;e<this.columns.length;e++){let i=this.renderers[e],a=z(t,B(`.monaco-table-td`,{"data-col-index":e}));a.style.width=`${this.getColumnSize(e)}px`,n.push(a),r.push(i.renderTemplate(a))}let i={container:e,cellContainers:n,cellTemplateData:r};return this.renderedTemplates.add(i),i}renderElement(e,t,n,r){for(let i=0;i<this.columns.length;i++){let a=this.columns[i].project(e);this.renderers[i].renderElement(a,t,n.cellTemplateData[i],r)}}disposeElement(e,t,n,r){for(let i=0;i<this.columns.length;i++){let a=this.renderers[i];if(a.disposeElement){let o=this.columns[i].project(e);a.disposeElement(o,t,n.cellTemplateData[i],r)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);og(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(let{cellContainers:n}of this.renderedTemplates)n[e].style.width=`${t}px`}};function tD(e){return{getHeight(t){return e.getHeight(t)},getTemplateId(){return eD.TemplateId}}}var nD=class extends w{get minimumSize(){return this.column.minimumWidth??120}get maximumSize(){return this.column.maximumWidth??1/0}get onDidChange(){return this.column.onDidChangeWidthConstraints??T.None}constructor(e,t){super(),this.column=e,this.index=t,this._onDidLayout=new E,this.onDidLayout=this._onDidLayout.event,this.element=B(`.monaco-table-th`,{"data-col-index":t},e.label),e.tooltip&&this._register(wE().setupManagedHover(kE(`mouse`),this.element,e.tooltip))}layout(e){this._onDidLayout.fire([this.index,e])}},rD=class e{static#e=this.InstanceCount=0;get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseClick(){return this.list.onMouseClick}get onMouseDblClick(){return this.list.onMouseDblClick}get onMouseMiddleClick(){return this.list.onMouseMiddleClick}get onPointer(){return this.list.onPointer}get onMouseUp(){return this.list.onMouseUp}get onMouseDown(){return this.list.onMouseDown}get onMouseOver(){return this.list.onMouseOver}get onMouseMove(){return this.list.onMouseMove}get onMouseOut(){return this.list.onMouseOut}get onTouchStart(){return this.list.onTouchStart}get onTap(){return this.list.onTap}get onContextMenu(){return this.list.onContextMenu}get onDidFocus(){return this.list.onDidFocus}get onDidBlur(){return this.list.onDidBlur}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollLeft(){return this.list.scrollLeft}set scrollLeft(e){this.list.scrollLeft=e}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}constructor(t,n,r,i,a,o){this.virtualDelegate=r,this.columns=i,this.domId=`table_id_${++e.InstanceCount}`,this.disposables=new C,this.cachedWidth=0,this.cachedHeight=0,this.domNode=z(n,B(`.monaco-table.${this.domId}`));let s=i.map((e,t)=>this.disposables.add(new nD(e,t))),c={size:s.reduce((e,t)=>e+t.column.weight,0),views:s.map(e=>({size:e.column.weight,view:e}))};this.splitview=this.disposables.add(new $E(this.domNode,{orientation:NE.HORIZONTAL,scrollbarVisibility:iT.Hidden,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:c})),this.splitview.el.style.height=`${r.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${r.headerRowHeight}px`;let l=new eD(i,a,e=>this.splitview.getViewSize(e));this.list=this.disposables.add(new _E(t,this.domNode,tD(r),[l],o)),T.any(...s.map(e=>e.onDidLayout))(([e,t])=>l.layoutColumn(e,t),null,this.disposables),this.splitview.onDidSashReset(e=>{let t=i.reduce((e,t)=>e+t.weight,0),n=i[e].weight/t*this.cachedWidth;this.splitview.resizeView(e,n)},null,this.disposables),this.styleElement=xC(this.domNode),this.style(cE)}getColumnLabels(){return this.columns.map(e=>e.label)}resizeColumn(e,t){let n=Math.round(t/100*this.cachedWidth);this.splitview.resizeView(e,n)}updateOptions(e){this.list.updateOptions(e)}splice(e,t,n=[]){this.list.splice(e,t,n)}rerender(){this.list.rerender()}row(e){return this.list.element(e)}indexOf(e){return this.list.indexOf(e)}get length(){return this.list.length}getHTMLElement(){return this.domNode}layout(e,t){e??=Wg(this.domNode),t??=Hg(this.domNode),this.cachedWidth=t,this.cachedHeight=e,this.splitview.layout(t);let n=e-this.virtualDelegate.headerRowHeight;this.list.getHTMLElement().style.height=`${n}px`,this.list.layout(n,t)}triggerTypeNavigation(){this.list.triggerTypeNavigation()}style(e){let t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
            top: ${this.virtualDelegate.headerRowHeight+1}px;
            height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
        }`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}domFocus(){this.list.domFocus()}setAnchor(e){this.list.setAnchor(e)}getAnchor(){return this.list.getAnchor()}getSelectedElements(){return this.list.getSelectedElements()}setSelection(e,t){this.list.setSelection(e,t)}getSelection(){return this.list.getSelection()}setFocus(e,t){this.list.setFocus(e,t)}focusNext(e=1,t=!1,n){this.list.focusNext(e,t,n)}focusPrevious(e=1,t=!1,n){this.list.focusPrevious(e,t,n)}focusNextPage(e){return this.list.focusNextPage(e)}focusPreviousPage(e){return this.list.focusPreviousPage(e)}focusFirst(e){this.list.focusFirst(e)}focusLast(e){this.list.focusLast(e)}getFocus(){return this.list.getFocus()}getFocusedElements(){return this.list.getFocusedElements()}getRelativeTop(e){return this.list.getRelativeTop(e)}reveal(e,t){this.list.reveal(e,t)}dispose(){this.disposables.dispose()}},iD={},aD=`$(`,oD=RegExp(`\\$\\(${lC.iconNameExpression}(?:${lC.iconModifierExpression})?\\)`,`g`),sD=RegExp(`(\\\\)?${oD.source}`,`g`);function cD(e){return e.replace(sD,(e,t)=>t?e:`\\${e}`)}var lD=RegExp(`\\\\${oD.source}`,`g`);function uD(e){return e.replace(lD,e=>`\\${e}`)}var dD=RegExp(`(\\s)?(\\\\)?${oD.source}(\\s)?`,`g`);function fD(e){return e.indexOf(aD)===-1?e:e.replace(dD,(e,t,n,r)=>n?e:t||r||``)}function pD(e){return e?e.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():``}var mD=RegExp(`\\$\\(${lC.iconNameCharacter}+\\)`,`g`);function hD(e){mD.lastIndex=0;let t=``,n=[],r=0;for(;;){let i=mD.lastIndex,a=mD.exec(e),o=e.substring(i,a?.index);if(o.length>0){t+=o;for(let e=0;e<o.length;e++)n.push(r)}if(!a)break;r+=a[0].length}return{text:t,iconOffsets:n}}function gD(e,t,n=!1){let{text:r,iconOffsets:i}=t;if(!i||i.length===0)return Dw(e,r,n);let a=La(r,` `),o=r.length-a.length,s=Dw(e,a,n);if(s)for(let e of s){let t=i[e.start+o]+o;e.start+=t,e.end+=t}return s}var _D;(function(e){e[e.Paragraph=0]=`Paragraph`,e[e.Break=1]=`Break`})(_D||={});var vD=class e{static lift(t){let n=new e(t.value,t);return n.uris=t.uris,n.baseUri=t.baseUri?k.revive(t.baseUri):void 0,n}constructor(e=``,t=!1){if(this.value=e,typeof this.value!=`string`)throw re(`value`);typeof t==`boolean`?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1,this.supportAlertSyntax=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1,this.supportAlertSyntax=t.supportAlertSyntax??!1)}appendText(e,t=_D.Paragraph){return this.value+=SD(this.supportThemeIcons?cD(e):e).replace(/([ \t]+)/g,(e,t)=>`&nbsp;`.repeat(t.length)).replace(/\>/gm,`\\>`).replace(/\n/g,t===_D.Break?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`\n${CD(t,e)}\n`,this}appendLink(e,t,n){return this.value+=`[`,this.value+=this._escape(t,`]`),this.value+=`](`,this.value+=this._escape(String(e),`)`),n&&(this.value+=` "${this._escape(this._escape(n,`"`),`)`)}"`),this.value+=`)`,this}_escape(e,t){let n=new RegExp(Na(t),`g`);return e.replace(n,(t,n)=>e.charAt(n-1)===`\\`?t:`\\${t}`)}};function yD(e){return bD(e)?!e.value:Array.isArray(e)?e.every(yD):!0}function bD(e){return e instanceof vD?!0:e&&typeof e==`object`?typeof e.value==`string`&&(typeof e.isTrusted==`boolean`||typeof e.isTrusted==`object`||e.isTrusted===void 0)&&(typeof e.supportThemeIcons==`boolean`||e.supportThemeIcons===void 0)&&(typeof e.supportAlertSyntax==`boolean`||e.supportAlertSyntax===void 0):!1}function xD(e,t){return e===t?!0:!e||!t?!1:e.value===t.value&&e.isTrusted===t.isTrusted&&e.supportThemeIcons===t.supportThemeIcons&&e.supportHtml===t.supportHtml&&e.supportAlertSyntax===t.supportAlertSyntax&&(e.baseUri===t.baseUri||!!e.baseUri&&!!t.baseUri&&ks(k.from(e.baseUri),k.from(t.baseUri)))}function SD(e){return e.replace(/[\\`*_{}[\]()#+\-!~]/g,`\\$&`)}function CD(e,t){let n=e.match(/^`+/gm)?.reduce((e,t)=>e.length>t.length?e:t).length??0,r=n>=3?n+1:3;return[`${"`".repeat(r)}${t}`,e,`${"`".repeat(r)}`].join(`
`)}function wD(e){return e.replace(/"/g,`&quot;`)}function TD(e){return e&&e.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,`$1`)}function ED(e){let t=[],n=e.split(`|`).map(e=>e.trim());e=n[0];let r=n[1];if(r){let e=/height=(\d+)/.exec(r),n=/width=(\d+)/.exec(r),i=e?e[1]:``,a=n?n[1]:``,o=isFinite(parseInt(a)),s=isFinite(parseInt(i));o&&t.push(`width="${a}"`),s&&t.push(`height="${i}"`)}return{href:e,dimensions:t}}function DD(e,t,n,r=!0){return`[${r?SD(e):e}](${t}${n?` "${SD(n)}"`:``})`}function OD(e,...t){return k.from({scheme:A.command,path:e,query:t.length?encodeURIComponent(JSON.stringify(t)):void 0})}var kD=class{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}},AD=new kD(`id#`);function jD(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var MD=jD();function ND(e){MD=e}var PD=/[&<>"']/,FD=new RegExp(PD.source,`g`),ID=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,LD=new RegExp(ID.source,`g`),RD={"&":`&amp;`,"<":`&lt;`,">":`&gt;`,'"':`&quot;`,"'":`&#39;`},zD=e=>RD[e];function BD(e,t){if(t){if(PD.test(e))return e.replace(FD,zD)}else if(ID.test(e))return e.replace(LD,zD);return e}var VD=/(^|[^\[])\^/g;function HD(e,t){let n=typeof e==`string`?e:e.source;t||=``;let r={replace:(e,t)=>{let i=typeof t==`string`?t:t.source;return i=i.replace(VD,`$1`),n=n.replace(e,i),r},getRegex:()=>new RegExp(n,t)};return r}function UD(e){try{e=encodeURI(e).replace(/%25/g,`%`)}catch{return null}return e}var WD={exec:()=>null};function GD(e,t){let n=e.replace(/\|/g,(e,t,n)=>{let r=!1,i=t;for(;--i>=0&&n[i]===`\\`;)r=!r;return r?`|`:` |`}).split(/ \|/),r=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push(``);for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,`|`);return n}function KD(e,t,n){let r=e.length;if(r===0)return``;let i=0;for(;i<r;){let a=e.charAt(r-i-1);if(a===t&&!n)i++;else if(a!==t&&n)i++;else break}return e.slice(0,r-i)}function qD(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let r=0;r<e.length;r++)if(e[r]===`\\`)r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return-1}function JD(e,t,n,r){let i=t.href,a=t.title?BD(t.title):null,o=e[1].replace(/\\([\[\]])/g,`$1`);if(e[0].charAt(0)!==`!`){r.state.inLink=!0;let e={type:`link`,raw:n,href:i,title:a,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,e}return{type:`image`,raw:n,href:i,title:a,text:BD(o)}}function YD(e,t){let n=e.match(/^(\s+)(?:```)/);if(n===null)return t;let r=n[1];return t.split(`
`).map(e=>{let t=e.match(/^\s+/);if(t===null)return e;let[n]=t;return n.length>=r.length?e.slice(r.length):e}).join(`
`)}var XD=class{options;rules;lexer;constructor(e){this.options=e||MD}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:`space`,raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let e=t[0].replace(/^ {1,4}/gm,``);return{type:`code`,raw:t[0],codeBlockStyle:`indented`,text:this.options.pedantic?e:KD(e,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let e=t[0],n=YD(e,t[3]||``);return{type:`code`,raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,`$1`):t[2],text:n}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){let t=KD(e,`#`);(this.options.pedantic||!t||/ $/.test(t))&&(e=t.trim())}return{type:`heading`,raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:`hr`,raw:KD(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let e=KD(t[0],`
`).split(`
`),n=``,r=``,i=[];for(;e.length>0;){let t=!1,a=[],o;for(o=0;o<e.length;o++)if(/^ {0,3}>/.test(e[o]))a.push(e[o]),t=!0;else if(!t)a.push(e[o]);else break;e=e.slice(o);let s=a.join(`
`),c=s.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,``);n=n?`${n}\n${s}`:s,r=r?`${r}\n${c}`:c;let l=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(c,i,!0),this.lexer.state.top=l,e.length===0)break;let u=i[i.length-1];if(u?.type===`code`)break;if(u?.type===`blockquote`){let t=u,a=t.raw+`
`+e.join(`
`),o=this.blockquote(a);i[i.length-1]=o,n=n.substring(0,n.length-t.raw.length)+o.raw,r=r.substring(0,r.length-t.text.length)+o.text;break}else if(u?.type===`list`){let t=u,a=t.raw+`
`+e.join(`
`),o=this.list(a);i[i.length-1]=o,n=n.substring(0,n.length-u.raw.length)+o.raw,r=r.substring(0,r.length-t.raw.length)+o.raw,e=a.substring(i[i.length-1].raw.length).split(`
`);continue}}return{type:`blockquote`,raw:n,tokens:i,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim(),r=n.length>1,i={type:`list`,raw:``,ordered:r,start:r?+n.slice(0,-1):``,loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:`[*+-]`);let a=RegExp(`^( {0,3}${n})((?:[\t ][^\\n]*)?(?:\\n|$))`),o=!1;for(;e;){let n=!1,r=``,s=``;if(!(t=a.exec(e))||this.rules.block.hr.test(e))break;r=t[0],e=e.substring(r.length);let c=t[2].split(`
`,1)[0].replace(/^\t+/,e=>` `.repeat(3*e.length)),l=e.split(`
`,1)[0],u=!c.trim(),d=0;if(this.options.pedantic?(d=2,s=c.trimStart()):u?d=t[1].length+1:(d=t[2].search(/[^ ]/),d=d>4?1:d,s=c.slice(d),d+=t[1].length),u&&/^ *$/.test(l)&&(r+=l+`
`,e=e.substring(l.length+1),n=!0),!n){let t=RegExp(`^ {0,${Math.min(3,d-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),n=RegExp(`^ {0,${Math.min(3,d-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),i=RegExp(`^ {0,${Math.min(3,d-1)}}(?:\`\`\`|~~~)`),a=RegExp(`^ {0,${Math.min(3,d-1)}}#`);for(;e;){let o=e.split(`
`,1)[0];if(l=o,this.options.pedantic&&(l=l.replace(/^ {1,4}(?=( {4})*[^ ])/g,`  `)),i.test(l)||a.test(l)||t.test(l)||n.test(e))break;if(l.search(/[^ ]/)>=d||!l.trim())s+=`
`+l.slice(d);else{if(u||c.search(/[^ ]/)>=4||i.test(c)||a.test(c)||n.test(c))break;s+=`
`+l}!u&&!l.trim()&&(u=!0),r+=o+`
`,e=e.substring(o.length+1),c=l.slice(d)}}i.loose||(o?i.loose=!0:/\n *\n *$/.test(r)&&(o=!0));let f=null,p;this.options.gfm&&(f=/^\[[ xX]\] /.exec(s),f&&(p=f[0]!==`[ ] `,s=s.replace(/^\[[ xX]\] +/,``))),i.items.push({type:`list_item`,raw:r,task:!!f,checked:p,loose:!1,text:s,tokens:[]}),i.raw+=r}i.items[i.items.length-1].raw=i.items[i.items.length-1].raw.trimEnd(),i.items[i.items.length-1].text=i.items[i.items.length-1].text.trimEnd(),i.raw=i.raw.trimEnd();for(let e=0;e<i.items.length;e++)if(this.lexer.state.top=!1,i.items[e].tokens=this.lexer.blockTokens(i.items[e].text,[]),!i.loose){let t=i.items[e].tokens.filter(e=>e.type===`space`);i.loose=t.length>0&&t.some(e=>/\n.*\n/.test(e.raw))}if(i.loose)for(let e=0;e<i.items.length;e++)i.items[e].loose=!0;return i}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:`html`,block:!0,raw:t[0],pre:t[1]===`pre`||t[1]===`script`||t[1]===`style`,text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let e=t[1].toLowerCase().replace(/\s+/g,` `),n=t[2]?t[2].replace(/^<(.*)>$/,`$1`).replace(this.rules.inline.anyPunctuation,`$1`):``,r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,`$1`):t[3];return{type:`def`,tag:e,raw:t[0],href:n,title:r}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;let n=GD(t[1]),r=t[2].replace(/^\||\| *$/g,``).split(`|`),i=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,``).split(`
`):[],a={type:`table`,raw:t[0],header:[],align:[],rows:[]};if(n.length===r.length){for(let e of r)/^ *-+: *$/.test(e)?a.align.push(`right`):/^ *:-+: *$/.test(e)?a.align.push(`center`):/^ *:-+ *$/.test(e)?a.align.push(`left`):a.align.push(null);for(let e=0;e<n.length;e++)a.header.push({text:n[e],tokens:this.lexer.inline(n[e]),header:!0,align:a.align[e]});for(let e of i)a.rows.push(GD(e,a.header.length).map((e,t)=>({text:e,tokens:this.lexer.inline(e),header:!1,align:a.align[t]})));return a}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:`heading`,raw:t[0],depth:t[2].charAt(0)===`=`?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let e=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:`paragraph`,raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:`text`,raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:`escape`,raw:t[0],text:BD(t[1])}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:`html`,raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;let t=KD(e.slice(0,-1),`\\`);if((e.length-t.length)%2==0)return}else{let e=qD(t[2],`()`);if(e>-1){let n=(t[0].indexOf(`!`)===0?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=``}}let n=t[2],r=``;if(this.options.pedantic){let e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);e&&(n=e[1],r=e[3])}else r=t[3]?t[3].slice(1,-1):``;return n=n.trim(),/^</.test(n)&&(n=this.options.pedantic&&!/>$/.test(e)?n.slice(1):n.slice(1,-1)),JD(t,{href:n&&n.replace(this.rules.inline.anyPunctuation,`$1`),title:r&&r.replace(this.rules.inline.anyPunctuation,`$1`)},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let e=t[(n[2]||n[1]).replace(/\s+/g,` `).toLowerCase()];if(!e){let e=n[0].charAt(0);return{type:`text`,raw:e,text:e}}return JD(n,e,n[0],this.lexer)}}emStrong(e,t,n=``){let r=this.rules.inline.emStrongLDelim.exec(e);if(r&&!(r[3]&&n.match(/[\p{L}\p{N}]/u))&&(!(r[1]||r[2])||!n||this.rules.inline.punctuation.exec(n))){let n=[...r[0]].length-1,i,a,o=n,s=0,c=r[0][0]===`*`?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,t=t.slice(-1*e.length+n);(r=c.exec(t))!=null;){if(i=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!i)continue;if(a=[...i].length,r[3]||r[4]){o+=a;continue}else if((r[5]||r[6])&&n%3&&!((n+a)%3)){s+=a;continue}if(o-=a,o>0)continue;a=Math.min(a,a+o+s);let t=[...r[0]][0].length,c=e.slice(0,n+r.index+t+a);if(Math.min(n,a)%2){let e=c.slice(1,-1);return{type:`em`,raw:c,text:e,tokens:this.lexer.inlineTokens(e)}}let l=c.slice(2,-2);return{type:`strong`,raw:c,text:l,tokens:this.lexer.inlineTokens(l)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g,` `),n=/[^ ]/.test(e),r=/^ /.test(e)&&/ $/.test(e);return n&&r&&(e=e.substring(1,e.length-1)),e=BD(e,!0),{type:`codespan`,raw:t[0],text:e}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:`br`,raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:`del`,raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let e,n;return t[2]===`@`?(e=BD(t[1]),n=`mailto:`+e):(e=BD(t[1]),n=e),{type:`link`,raw:t[0],text:e,href:n,tokens:[{type:`text`,raw:e,text:e}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let e,n;if(t[2]===`@`)e=BD(t[0]),n=`mailto:`+e;else{let r;do r=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??``;while(r!==t[0]);e=BD(t[0]),n=t[1]===`www.`?`http://`+t[0]:t[0]}return{type:`link`,raw:t[0],text:e,href:n,tokens:[{type:`text`,raw:e,text:e}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let e;return e=this.lexer.state.inRawBlock?t[0]:BD(t[0]),{type:`text`,raw:t[0],text:e}}}},ZD=/^(?: *(?:\n|$))+/,QD=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,$D=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,eO=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,tO=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,nO=/(?:[*+-]|\d{1,9}[.)])/,rO=HD(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,nO).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),iO=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,aO=/^[^\n]+/,oO=/(?!\s*\])(?:\\.|[^\[\]\\])+/,sO=HD(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace(`label`,oO).replace(`title`,/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),cO=HD(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,nO).getRegex(),lO=`address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul`,uO=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,dO=HD(`^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))`,`i`).replace(`comment`,uO).replace(`tag`,lO).replace(`attribute`,/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),fO=HD(iO).replace(`hr`,eO).replace(`heading`,` {0,3}#{1,6}(?:\\s|$)`).replace(`|lheading`,``).replace(`|table`,``).replace(`blockquote`,` {0,3}>`).replace(`fences`," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace(`list`,` {0,3}(?:[*+-]|1[.)]) `).replace(`html`,`</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)`).replace(`tag`,lO).getRegex(),pO={blockquote:HD(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace(`paragraph`,fO).getRegex(),code:QD,def:sO,fences:$D,heading:tO,hr:eO,html:dO,lheading:rO,list:cO,newline:ZD,paragraph:fO,table:WD,text:aO},mO=HD(`^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)`).replace(`hr`,eO).replace(`heading`,` {0,3}#{1,6}(?:\\s|$)`).replace(`blockquote`,` {0,3}>`).replace(`code`,` {4}[^\\n]`).replace(`fences`," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace(`list`,` {0,3}(?:[*+-]|1[.)]) `).replace(`html`,`</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)`).replace(`tag`,lO).getRegex(),hO={...pO,table:mO,paragraph:HD(iO).replace(`hr`,eO).replace(`heading`,` {0,3}#{1,6}(?:\\s|$)`).replace(`|lheading`,``).replace(`table`,mO).replace(`blockquote`,` {0,3}>`).replace(`fences`," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace(`list`,` {0,3}(?:[*+-]|1[.)]) `).replace(`html`,`</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)`).replace(`tag`,lO).getRegex()},gO={...pO,html:HD(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace(`comment`,uO).replace(/tag/g,`(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b`).getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:WD,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:HD(iO).replace(`hr`,eO).replace(`heading`,` *#{1,6} *[^
]`).replace(`lheading`,rO).replace(`|table`,``).replace(`blockquote`,` {0,3}>`).replace(`|fences`,``).replace(`|list`,``).replace(`|html`,``).replace(`|tag`,``).getRegex()},_O=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,vO=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,yO=/^( {2,}|\\)\n(?!\s*$)/,bO=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,xO=`\\p{P}\\p{S}`,SO=HD(/^((?![*_])[\spunctuation])/,`u`).replace(/punctuation/g,xO).getRegex(),CO=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,wO=HD(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,`u`).replace(/punct/g,xO).getRegex(),TO=HD(`^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])`,`gu`).replace(/punct/g,xO).getRegex(),EO=HD(`^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])`,`gu`).replace(/punct/g,xO).getRegex(),DO=HD(/\\([punct])/,`gu`).replace(/punct/g,xO).getRegex(),OO=HD(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace(`scheme`,/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace(`email`,/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),kO=HD(uO).replace(`(?:-->|$)`,`-->`).getRegex(),AO=HD(`^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>`).replace(`comment`,kO).replace(`attribute`,/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),jO=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,MO=HD(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace(`label`,jO).replace(`href`,/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace(`title`,/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),NO=HD(/^!?\[(label)\]\[(ref)\]/).replace(`label`,jO).replace(`ref`,oO).getRegex(),PO=HD(/^!?\[(ref)\](?:\[\])?/).replace(`ref`,oO).getRegex(),FO={_backpedal:WD,anyPunctuation:DO,autolink:OO,blockSkip:CO,br:yO,code:vO,del:WD,emStrongLDelim:wO,emStrongRDelimAst:TO,emStrongRDelimUnd:EO,escape:_O,link:MO,nolink:PO,punctuation:SO,reflink:NO,reflinkSearch:HD(`reflink|nolink(?!\\()`,`g`).replace(`reflink`,NO).replace(`nolink`,PO).getRegex(),tag:AO,text:bO,url:WD},IO={...FO,link:HD(/^!?\[(label)\]\((.*?)\)/).replace(`label`,jO).getRegex(),reflink:HD(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace(`label`,jO).getRegex()},LO={...FO,escape:HD(_O).replace(`])`,`~|])`).getRegex(),url:HD(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,`i`).replace(`email`,/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},RO={...LO,br:HD(yO).replace(`{2,}`,`*`).getRegex(),text:HD(LO.text).replace(`\\b_`,`\\b_| {2,}\\n`).replace(/\{2,\}/g,`*`).getRegex()},zO={normal:pO,gfm:hO,pedantic:gO},BO={normal:FO,gfm:LO,breaks:RO,pedantic:IO},VO=class e{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||MD,this.options.tokenizer=this.options.tokenizer||new XD,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={block:zO.normal,inline:BO.normal};this.options.pedantic?(t.block=zO.pedantic,t.inline=BO.pedantic):this.options.gfm&&(t.block=zO.gfm,this.options.breaks?t.inline=BO.breaks:t.inline=BO.gfm),this.tokenizer.rules=t}static get rules(){return{block:zO,inline:BO}}static lex(t,n){return new e(n).lex(t)}static lexInline(t,n){return new e(n).inlineTokens(t)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let t=this.inlineQueue[e];this.inlineTokens(t.src,t.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){e=this.options.pedantic?e.replace(/\t/g,`    `).replace(/^ +$/gm,``):e.replace(/^( *)(\t+)/gm,(e,t,n)=>t+`    `.repeat(n.length));let r,i,a;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(n=>(r=n.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type===`paragraph`||i.type===`text`)?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type===`paragraph`||i.type===`text`)?(i.raw+=`
`+r.raw,i.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(a=e,this.options.extensions&&this.options.extensions.startBlock){let t=1/0,n=e.slice(1),r;this.options.extensions.startBlock.forEach(e=>{r=e.call({lexer:this},n),typeof r==`number`&&r>=0&&(t=Math.min(t,r))}),t<1/0&&t>=0&&(a=e.substring(0,t+1))}if(this.state.top&&(r=this.tokenizer.paragraph(a))){i=t[t.length-1],n&&i?.type===`paragraph`?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r),n=a.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&i.type===`text`?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(e){let t=`Infinite loop on byte: `+e.charCodeAt(0);if(this.options.silent){console.error(t);break}else throw Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n,r,i,a=e,o,s,c;if(this.tokens.links){let e=Object.keys(this.tokens.links);if(e.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(a))!=null;)e.includes(o[0].slice(o[0].lastIndexOf(`[`)+1,-1))&&(a=a.slice(0,o.index)+`[`+`a`.repeat(o[0].length-2)+`]`+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.blockSkip.exec(a))!=null;)a=a.slice(0,o.index)+`[`+`a`.repeat(o[0].length-2)+`]`+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(a))!=null;)a=a.slice(0,o.index)+`++`+a.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(s||(c=``),s=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(r=>(n=r.call({lexer:this},e,t))?(e=e.substring(n.raw.length),t.push(n),!0):!1))){if(n=this.tokenizer.escape(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.tag(e)){e=e.substring(n.raw.length),r=t[t.length-1],r&&n.type===`text`&&r.type===`text`?(r.raw+=n.raw,r.text+=n.text):t.push(n);continue}if(n=this.tokenizer.link(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length),r=t[t.length-1],r&&n.type===`text`&&r.type===`text`?(r.raw+=n.raw,r.text+=n.text):t.push(n);continue}if(n=this.tokenizer.emStrong(e,a,c)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.codespan(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.br(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.del(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.autolink(e)){e=e.substring(n.raw.length),t.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(e))){e=e.substring(n.raw.length),t.push(n);continue}if(i=e,this.options.extensions&&this.options.extensions.startInline){let t=1/0,n=e.slice(1),r;this.options.extensions.startInline.forEach(e=>{r=e.call({lexer:this},n),typeof r==`number`&&r>=0&&(t=Math.min(t,r))}),t<1/0&&t>=0&&(i=e.substring(0,t+1))}if(n=this.tokenizer.inlineText(i)){e=e.substring(n.raw.length),n.raw.slice(-1)!==`_`&&(c=n.raw.slice(-1)),s=!0,r=t[t.length-1],r&&r.type===`text`?(r.raw+=n.raw,r.text+=n.text):t.push(n);continue}if(e){let t=`Infinite loop on byte: `+e.charCodeAt(0);if(this.options.silent){console.error(t);break}else throw Error(t)}}return t}},HO=class{options;parser;constructor(e){this.options=e||MD}space(e){return``}code({text:e,lang:t,escaped:n}){let r=(t||``).match(/^\S*/)?.[0],i=e.replace(/\n$/,``)+`
`;return r?`<pre><code class="language-`+BD(r)+`">`+(n?i:BD(i,!0))+`</code></pre>
`:`<pre><code>`+(n?i:BD(i,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>\n${this.parser.parse(e)}</blockquote>\n`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>\n`}hr(e){return`<hr>
`}list(e){let t=e.ordered,n=e.start,r=``;for(let t=0;t<e.items.length;t++){let n=e.items[t];r+=this.listitem(n)}let i=t?`ol`:`ul`,a=t&&n!==1?` start="`+n+`"`:``;return`<`+i+a+`>
`+r+`</`+i+`>
`}listitem(e){let t=``;if(e.task){let n=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&e.tokens[0].type===`paragraph`?(e.tokens[0].text=n+` `+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type===`text`&&(e.tokens[0].tokens[0].text=n+` `+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:`text`,raw:n+` `,text:n+` `}):t+=n+` `}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>\n`}checkbox({checked:e}){return`<input `+(e?`checked="" `:``)+`disabled="" type="checkbox">`}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>\n`}table(e){let t=``,n=``;for(let t=0;t<e.header.length;t++)n+=this.tablecell(e.header[t]);t+=this.tablerow({text:n});let r=``;for(let t=0;t<e.rows.length;t++){let i=e.rows[t];n=``;for(let e=0;e<i.length;e++)n+=this.tablecell(i[e]);r+=this.tablerow({text:n})}return r&&=`<tbody>${r}</tbody>`,`<table>
<thead>
`+t+`</thead>
`+r+`</table>
`}tablerow({text:e}){return`<tr>\n${e}</tr>\n`}tablecell(e){let t=this.parser.parseInline(e.tokens),n=e.header?`th`:`td`;return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>\n`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return`<br>`}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){let r=this.parser.parseInline(n),i=UD(e);if(i===null)return r;e=i;let a=`<a href="`+e+`"`;return t&&(a+=` title="`+t+`"`),a+=`>`+r+`</a>`,a}image({href:e,title:t,text:n}){let r=UD(e);if(r===null)return n;e=r;let i=`<img src="${e}" alt="${n}"`;return t&&(i+=` title="${t}"`),i+=`>`,i}text(e){return`tokens`in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}},UO=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return``+e}image({text:e}){return``+e}br(){return``}},WO=class e{options;renderer;textRenderer;constructor(e){this.options=e||MD,this.options.renderer=this.options.renderer||new HO,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new UO}static parse(t,n){return new e(n).parse(t)}static parseInline(t,n){return new e(n).parseInline(t)}parse(e,t=!0){let n=``;for(let r=0;r<e.length;r++){let i=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){let e=i,t=this.options.extensions.renderers[e.type].call({parser:this},e);if(t!==!1||![`space`,`hr`,`heading`,`code`,`table`,`blockquote`,`list`,`html`,`paragraph`,`text`].includes(e.type)){n+=t||``;continue}}let a=i;switch(a.type){case`space`:n+=this.renderer.space(a);continue;case`hr`:n+=this.renderer.hr(a);continue;case`heading`:n+=this.renderer.heading(a);continue;case`code`:n+=this.renderer.code(a);continue;case`table`:n+=this.renderer.table(a);continue;case`blockquote`:n+=this.renderer.blockquote(a);continue;case`list`:n+=this.renderer.list(a);continue;case`html`:n+=this.renderer.html(a);continue;case`paragraph`:n+=this.renderer.paragraph(a);continue;case`text`:{let i=a,o=this.renderer.text(i);for(;r+1<e.length&&e[r+1].type===`text`;)i=e[++r],o+=`
`+this.renderer.text(i);t?n+=this.renderer.paragraph({type:`paragraph`,raw:o,text:o,tokens:[{type:`text`,raw:o,text:o}]}):n+=o;continue}default:{let e=`Token with "`+a.type+`" type was not found.`;if(this.options.silent)return console.error(e),``;throw Error(e)}}}return n}parseInline(e,t){t||=this.renderer;let n=``;for(let r=0;r<e.length;r++){let i=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){let e=this.options.extensions.renderers[i.type].call({parser:this},i);if(e!==!1||![`escape`,`html`,`link`,`image`,`strong`,`em`,`codespan`,`br`,`del`,`text`].includes(i.type)){n+=e||``;continue}}let a=i;switch(a.type){case`escape`:n+=t.text(a);break;case`html`:n+=t.html(a);break;case`link`:n+=t.link(a);break;case`image`:n+=t.image(a);break;case`strong`:n+=t.strong(a);break;case`em`:n+=t.em(a);break;case`codespan`:n+=t.codespan(a);break;case`br`:n+=t.br(a);break;case`del`:n+=t.del(a);break;case`text`:n+=t.text(a);break;default:{let e=`Token with "`+a.type+`" type was not found.`;if(this.options.silent)return console.error(e),``;throw Error(e)}}}return n}},GO=class{options;constructor(e){this.options=e||MD}static passThroughHooks=new Set([`preprocess`,`postprocess`,`processAllTokens`]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}},KO=class{defaults=jD();options=this.setOptions;parse=this.parseMarkdown(VO.lex,WO.parse);parseInline=this.parseMarkdown(VO.lexInline,WO.parseInline);Parser=WO;Renderer=HO;TextRenderer=UO;Lexer=VO;Tokenizer=XD;Hooks=GO;constructor(...e){this.use(...e)}walkTokens(e,t){let n=[];for(let r of e)switch(n=n.concat(t.call(this,r)),r.type){case`table`:{let e=r;for(let r of e.header)n=n.concat(this.walkTokens(r.tokens,t));for(let r of e.rows)for(let e of r)n=n.concat(this.walkTokens(e.tokens,t));break}case`list`:{let e=r;n=n.concat(this.walkTokens(e.items,t));break}default:{let e=r;this.defaults.extensions?.childTokens?.[e.type]?this.defaults.extensions.childTokens[e.type].forEach(r=>{let i=e[r].flat(1/0);n=n.concat(this.walkTokens(i,t))}):e.tokens&&(n=n.concat(this.walkTokens(e.tokens,t)))}}return n}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(e=>{let n={...e};if(n.async=this.defaults.async||n.async||!1,e.extensions&&(e.extensions.forEach(e=>{if(!e.name)throw Error(`extension name required`);if(`renderer`in e){let n=t.renderers[e.name];n?t.renderers[e.name]=function(...t){let r=e.renderer.apply(this,t);return r===!1&&(r=n.apply(this,t)),r}:t.renderers[e.name]=e.renderer}if(`tokenizer`in e){if(!e.level||e.level!==`block`&&e.level!==`inline`)throw Error(`extension level must be 'block' or 'inline'`);let n=t[e.level];n?n.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&(e.level===`block`?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:e.level===`inline`&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}`childTokens`in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)}),n.extensions=t),e.renderer){let t=this.defaults.renderer||new HO(this.defaults);for(let n in e.renderer){if(!(n in t))throw Error(`renderer '${n}' does not exist`);if([`options`,`parser`].includes(n))continue;let r=n,i=e.renderer[r],a=t[r];t[r]=(...e)=>{let n=i.apply(t,e);return n===!1&&(n=a.apply(t,e)),n||``}}n.renderer=t}if(e.tokenizer){let t=this.defaults.tokenizer||new XD(this.defaults);for(let n in e.tokenizer){if(!(n in t))throw Error(`tokenizer '${n}' does not exist`);if([`options`,`rules`,`lexer`].includes(n))continue;let r=n,i=e.tokenizer[r],a=t[r];t[r]=(...e)=>{let n=i.apply(t,e);return n===!1&&(n=a.apply(t,e)),n}}n.tokenizer=t}if(e.hooks){let t=this.defaults.hooks||new GO;for(let n in e.hooks){if(!(n in t))throw Error(`hook '${n}' does not exist`);if(n===`options`)continue;let r=n,i=e.hooks[r],a=t[r];GO.passThroughHooks.has(n)?t[r]=e=>{if(this.defaults.async)return Promise.resolve(i.call(t,e)).then(e=>a.call(t,e));let n=i.call(t,e);return a.call(t,n)}:t[r]=(...e)=>{let n=i.apply(t,e);return n===!1&&(n=a.apply(t,e)),n}}n.hooks=t}if(e.walkTokens){let t=this.defaults.walkTokens,r=e.walkTokens;n.walkTokens=function(e){let n=[];return n.push(r.call(this,e)),t&&(n=n.concat(t.call(this,e))),n}}this.defaults={...this.defaults,...n}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return VO.lex(e,t??this.defaults)}parser(e,t){return WO.parse(e,t??this.defaults)}parseMarkdown(e,t){return(n,r)=>{let i={...r},a={...this.defaults,...i},o=this.onError(!!a.silent,!!a.async);if(this.defaults.async===!0&&i.async===!1)return o(Error(`marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise.`));if(n==null)return o(Error(`marked(): input parameter is undefined or null`));if(typeof n!=`string`)return o(Error(`marked(): input parameter is of type `+Object.prototype.toString.call(n)+`, string expected`));if(a.hooks&&(a.hooks.options=a),a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(n):n).then(t=>e(t,a)).then(e=>a.hooks?a.hooks.processAllTokens(e):e).then(e=>a.walkTokens?Promise.all(this.walkTokens(e,a.walkTokens)).then(()=>e):e).then(e=>t(e,a)).then(e=>a.hooks?a.hooks.postprocess(e):e).catch(o);try{a.hooks&&(n=a.hooks.preprocess(n));let r=e(n,a);a.hooks&&(r=a.hooks.processAllTokens(r)),a.walkTokens&&this.walkTokens(r,a.walkTokens);let i=t(r,a);return a.hooks&&(i=a.hooks.postprocess(i)),i}catch(e){return o(e)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let e=`<p>An error occurred:</p><pre>`+BD(n.message+``,!0)+`</pre>`;return t?Promise.resolve(e):e}if(t)return Promise.reject(n);throw n}}},qO=new KO;function JO(e,t){return qO.parse(e,t)}JO.options=JO.setOptions=function(e){return qO.setOptions(e),JO.defaults=qO.defaults,ND(JO.defaults),JO},JO.getDefaults=jD,JO.defaults=MD,JO.use=function(...e){return qO.use(...e),JO.defaults=qO.defaults,ND(JO.defaults),JO},JO.walkTokens=function(e,t){return qO.walkTokens(e,t)},JO.parseInline=qO.parseInline,JO.Parser=WO,JO.parser=WO.parse,JO.Renderer=HO,JO.TextRenderer=UO,JO.Lexer=VO,JO.lexer=VO.lex,JO.Tokenizer=XD,JO.Hooks=GO,JO.parse=JO,JO.options,JO.setOptions,JO.use,JO.walkTokens,JO.parseInline;var YO=JO;WO.parse;var XO=VO.lex;function ZO(e){if(!e||typeof e!=`object`||e instanceof RegExp)return e;let t=Array.isArray(e)?[]:{};return Object.entries(e).forEach(([e,n])=>{t[e]=n&&typeof n==`object`?ZO(n):n}),t}function QO(e){if(!e||typeof e!=`object`)return e;let t=[e];for(;t.length>0;){let e=t.shift();for(let n in e)if($O.call(e,n)){let r=e[n];typeof r==`object`&&!Object.isFrozen(r)&&!be(r)&&t.push(r)}}return e}var $O=Object.prototype.hasOwnProperty;function ek(e,t){return tk(e,t,new Set)}function tk(e,t,n){if(Ee(e))return e;let r=t(e);if(r!==void 0)return r;if(Array.isArray(e)){let r=[];for(let i of e)r.push(tk(i,t,n));return r}if(ye(e)){if(n.has(e))throw Error(`Cannot clone recursive data-structure`);n.add(e);let r={};for(let i in e)$O.call(e,i)&&(r[i]=tk(e[i],t,n));return n.delete(e),r}return e}function nk(e,t,n=!0){return ye(e)?(ye(t)&&Object.keys(t).forEach(r=>{r in e?n&&(ye(e[r])&&ye(t[r])?nk(e[r],t[r],n):e[r]=t[r]):e[r]=t[r]}),e):t}function rk(e,t){if(e===t)return!0;if(e==null||t==null||typeof e!=typeof t||typeof e!=`object`||Array.isArray(e)!==Array.isArray(t))return!1;let n,r;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(!rk(e[n],t[n]))return!1}else{let i=[];for(r in e)i.push(r);i.sort();let a=[];for(r in t)a.push(r);if(a.sort(),!rk(i,a))return!1;for(n=0;n<i.length;n++)if(!rk(e[i[n]],t[i[n]]))return!1}return!0}function ik(e){let t=new Set;return JSON.stringify(e,(e,n)=>{if(ye(n)||Array.isArray(n)){if(t.has(n))return`[Circular]`;t.add(n)}return typeof n==`bigint`?`[BigInt ${n.toString()}]`:n})}function ak(e,t){let n=Object.create(null);return!e||!t||Object.keys(t).forEach(r=>{let i=e[r],a=t[r];rk(i,a)||(n[r]=a)}),n}function ok(e,t){let n=Object.create(null);for(let[r,i]of Object.entries(e))t(r,i)&&(n[r]=i);return n}function sk(e,t){let n={};for(let[r,i]of Object.entries(e))n[r]=t(i,r);return n}var{entries:ck,setPrototypeOf:lk,isFrozen:uk,getPrototypeOf:dk,getOwnPropertyDescriptor:fk}=Object,{freeze:pk,seal:mk,create:hk}=Object,{apply:gk,construct:_k}=typeof Reflect<`u`&&Reflect;pk||=function(e){return e},mk||=function(e){return e},gk||=function(e,t){var n=[...arguments].slice(2);return e.apply(t,n)},_k||=function(e){return new e(...[...arguments].slice(1))};var vk=Mk(Array.prototype.forEach),yk=Mk(Array.prototype.lastIndexOf),bk=Mk(Array.prototype.pop),xk=Mk(Array.prototype.push),Sk=Mk(Array.prototype.splice),Ck=Mk(String.prototype.toLowerCase),wk=Mk(String.prototype.toString),Tk=Mk(String.prototype.match),Ek=Mk(String.prototype.replace),Dk=Mk(String.prototype.indexOf),Ok=Mk(String.prototype.trim),kk=Mk(Object.prototype.hasOwnProperty),Ak=Mk(RegExp.prototype.test),jk=Nk(TypeError);function Mk(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);var n=[...arguments].slice(1);return gk(e,t,n)}}function Nk(e){return function(){return _k(e,[...arguments])}}function Pk(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ck;lk&&lk(e,null);let r=t.length;for(;r--;){let i=t[r];if(typeof i==`string`){let e=n(i);e!==i&&(uk(t)||(t[r]=e),i=e)}e[i]=!0}return e}function Fk(e){for(let t=0;t<e.length;t++)kk(e,t)||(e[t]=null);return e}function Ik(e){let t=hk(null);for(let[n,r]of ck(e))kk(e,n)&&(Array.isArray(r)?t[n]=Fk(r):r&&typeof r==`object`&&r.constructor===Object?t[n]=Ik(r):t[n]=r);return t}function Lk(e,t){for(;e!==null;){let n=fk(e,t);if(n){if(n.get)return Mk(n.get);if(typeof n.value==`function`)return Mk(n.value)}e=dk(e)}function n(){return null}return n}var Rk=pk(`a.abbr.acronym.address.area.article.aside.audio.b.bdi.bdo.big.blink.blockquote.body.br.button.canvas.caption.center.cite.code.col.colgroup.content.data.datalist.dd.decorator.del.details.dfn.dialog.dir.div.dl.dt.element.em.fieldset.figcaption.figure.font.footer.form.h1.h2.h3.h4.h5.h6.head.header.hgroup.hr.html.i.img.input.ins.kbd.label.legend.li.main.map.mark.marquee.menu.menuitem.meter.nav.nobr.ol.optgroup.option.output.p.picture.pre.progress.q.rp.rt.ruby.s.samp.search.section.select.shadow.slot.small.source.spacer.span.strike.strong.style.sub.summary.sup.table.tbody.td.template.textarea.tfoot.th.thead.time.tr.track.tt.u.ul.var.video.wbr`.split(`.`)),zk=pk(`svg.a.altglyph.altglyphdef.altglyphitem.animatecolor.animatemotion.animatetransform.circle.clippath.defs.desc.ellipse.enterkeyhint.exportparts.filter.font.g.glyph.glyphref.hkern.image.inputmode.line.lineargradient.marker.mask.metadata.mpath.part.path.pattern.polygon.polyline.radialgradient.rect.stop.style.switch.symbol.text.textpath.title.tref.tspan.view.vkern`.split(`.`)),Bk=pk([`feBlend`,`feColorMatrix`,`feComponentTransfer`,`feComposite`,`feConvolveMatrix`,`feDiffuseLighting`,`feDisplacementMap`,`feDistantLight`,`feDropShadow`,`feFlood`,`feFuncA`,`feFuncB`,`feFuncG`,`feFuncR`,`feGaussianBlur`,`feImage`,`feMerge`,`feMergeNode`,`feMorphology`,`feOffset`,`fePointLight`,`feSpecularLighting`,`feSpotLight`,`feTile`,`feTurbulence`]),Vk=pk([`animate`,`color-profile`,`cursor`,`discard`,`font-face`,`font-face-format`,`font-face-name`,`font-face-src`,`font-face-uri`,`foreignobject`,`hatch`,`hatchpath`,`mesh`,`meshgradient`,`meshpatch`,`meshrow`,`missing-glyph`,`script`,`set`,`solidcolor`,`unknown`,`use`]),Hk=pk(`math.menclose.merror.mfenced.mfrac.mglyph.mi.mlabeledtr.mmultiscripts.mn.mo.mover.mpadded.mphantom.mroot.mrow.ms.mspace.msqrt.mstyle.msub.msup.msubsup.mtable.mtd.mtext.mtr.munder.munderover.mprescripts`.split(`.`)),Uk=pk([`maction`,`maligngroup`,`malignmark`,`mlongdiv`,`mscarries`,`mscarry`,`msgroup`,`mstack`,`msline`,`msrow`,`semantics`,`annotation`,`annotation-xml`,`mprescripts`,`none`]),Wk=pk([`#text`]),Gk=pk(`accept.action.align.alt.autocapitalize.autocomplete.autopictureinpicture.autoplay.background.bgcolor.border.capture.cellpadding.cellspacing.checked.cite.class.clear.color.cols.colspan.controls.controlslist.coords.crossorigin.datetime.decoding.default.dir.disabled.disablepictureinpicture.disableremoteplayback.download.draggable.enctype.enterkeyhint.exportparts.face.for.headers.height.hidden.high.href.hreflang.id.inert.inputmode.integrity.ismap.kind.label.lang.list.loading.loop.low.max.maxlength.media.method.min.minlength.multiple.muted.name.nonce.noshade.novalidate.nowrap.open.optimum.part.pattern.placeholder.playsinline.popover.popovertarget.popovertargetaction.poster.preload.pubdate.radiogroup.readonly.rel.required.rev.reversed.role.rows.rowspan.spellcheck.scope.selected.shape.size.sizes.slot.span.srclang.start.src.srcset.step.style.summary.tabindex.title.translate.type.usemap.valign.value.width.wrap.xmlns.slot`.split(`.`)),Kk=pk(`accent-height.accumulate.additive.alignment-baseline.amplitude.ascent.attributename.attributetype.azimuth.basefrequency.baseline-shift.begin.bias.by.class.clip.clippathunits.clip-path.clip-rule.color.color-interpolation.color-interpolation-filters.color-profile.color-rendering.cx.cy.d.dx.dy.diffuseconstant.direction.display.divisor.dur.edgemode.elevation.end.exponent.fill.fill-opacity.fill-rule.filter.filterunits.flood-color.flood-opacity.font-family.font-size.font-size-adjust.font-stretch.font-style.font-variant.font-weight.fx.fy.g1.g2.glyph-name.glyphref.gradientunits.gradienttransform.height.href.id.image-rendering.in.in2.intercept.k.k1.k2.k3.k4.kerning.keypoints.keysplines.keytimes.lang.lengthadjust.letter-spacing.kernelmatrix.kernelunitlength.lighting-color.local.marker-end.marker-mid.marker-start.markerheight.markerunits.markerwidth.maskcontentunits.maskunits.max.mask.mask-type.media.method.mode.min.name.numoctaves.offset.operator.opacity.order.orient.orientation.origin.overflow.paint-order.path.pathlength.patterncontentunits.patterntransform.patternunits.points.preservealpha.preserveaspectratio.primitiveunits.r.rx.ry.radius.refx.refy.repeatcount.repeatdur.restart.result.rotate.scale.seed.shape-rendering.slope.specularconstant.specularexponent.spreadmethod.startoffset.stddeviation.stitchtiles.stop-color.stop-opacity.stroke-dasharray.stroke-dashoffset.stroke-linecap.stroke-linejoin.stroke-miterlimit.stroke-opacity.stroke.stroke-width.style.surfacescale.systemlanguage.tabindex.tablevalues.targetx.targety.transform.transform-origin.text-anchor.text-decoration.text-rendering.textlength.type.u1.u2.unicode.values.viewbox.visibility.version.vert-adv-y.vert-origin-x.vert-origin-y.width.word-spacing.wrap.writing-mode.xchannelselector.ychannelselector.x.x1.x2.xmlns.y.y1.y2.z.zoomandpan`.split(`.`)),qk=pk(`accent.accentunder.align.bevelled.close.columnsalign.columnlines.columnspan.denomalign.depth.dir.display.displaystyle.encoding.fence.frame.height.href.id.largeop.length.linethickness.lspace.lquote.mathbackground.mathcolor.mathsize.mathvariant.maxsize.minsize.movablelimits.notation.numalign.open.rowalign.rowlines.rowspacing.rowspan.rspace.rquote.scriptlevel.scriptminsize.scriptsizemultiplier.selection.separator.separators.stretchy.subscriptshift.supscriptshift.symmetric.voffset.width.xmlns`.split(`.`)),Jk=pk([`xlink:href`,`xml:id`,`xlink:title`,`xml:space`,`xmlns:xlink`]),Yk=mk(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Xk=mk(/<%[\w\W]*|[\w\W]*%>/gm),Zk=mk(/\$\{[\w\W]*/gm),Qk=mk(/^data-[\-\w.\u00B7-\uFFFF]+$/),$k=mk(/^aria-[\-\w]+$/),eA=mk(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),tA=mk(/^(?:\w+script|data):/i),nA=mk(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),rA=mk(/^html$/i),iA=mk(/^[a-z][.\w]*(-[.\w]+)+$/i),aA=Object.freeze({__proto__:null,ARIA_ATTR:$k,ATTR_WHITESPACE:nA,CUSTOM_ELEMENT:iA,DATA_ATTR:Qk,DOCTYPE_NAME:rA,ERB_EXPR:Xk,IS_ALLOWED_URI:eA,IS_SCRIPT_OR_DATA:tA,MUSTACHE_EXPR:Yk,TMPLIT_EXPR:Zk}),oA={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},sA=function(){return typeof window>`u`?null:window},cA=function(e,t){if(typeof e!=`object`||typeof e.createPolicy!=`function`)return null;let n=null,r=`data-tt-policy-suffix`;t&&t.hasAttribute(r)&&(n=t.getAttribute(r));let i=`dompurify`+(n?`#`+n:``);try{return e.createPolicy(i,{createHTML(e){return e},createScriptURL(e){return e}})}catch{return console.warn(`TrustedTypes policy `+i+` could not be created.`),null}},lA=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function uA(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:sA(),t=e=>uA(e);if(t.version=`3.3.1`,t.removed=[],!e||!e.document||e.document.nodeType!==oA.document||!e.Element)return t.isSupported=!1,t;let{document:n}=e,r=n,i=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:o,Node:s,Element:c,NodeFilter:l,NamedNodeMap:u=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:d,DOMParser:f,trustedTypes:p}=e,m=c.prototype,h=Lk(m,`cloneNode`),g=Lk(m,`remove`),_=Lk(m,`nextSibling`),v=Lk(m,`childNodes`),ee=Lk(m,`parentNode`);if(typeof o==`function`){let e=n.createElement(`template`);e.content&&e.content.ownerDocument&&(n=e.content.ownerDocument)}let te,ne=``,{implementation:re,createNodeIterator:ie,createDocumentFragment:ae,getElementsByTagName:oe}=n,{importNode:se}=r,ce=lA();t.isSupported=typeof ck==`function`&&typeof ee==`function`&&re&&re.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:le,ERB_EXPR:y,TMPLIT_EXPR:ue,DATA_ATTR:de,ARIA_ATTR:fe,IS_SCRIPT_OR_DATA:pe,ATTR_WHITESPACE:me,CUSTOM_ELEMENT:he}=aA,{IS_ALLOWED_URI:ge}=aA,_e=null,ve=Pk({},[...Rk,...zk,...Bk,...Hk,...Wk]),ye=null,be=Pk({},[...Gk,...Kk,...qk,...Jk]),xe=Object.seal(hk(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Se=null,Ce=null,we=Object.seal(hk(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}})),Te=!0,Ee=!0,De=!1,Oe=!0,ke=!1,Ae=!0,je=!1,Me=!1,Ne=!1,Pe=!1,Fe=!1,Ie=!1,Le=!0,Re=!1,b=!0,ze=!1,Be={},Ve=null,He=Pk({},[`annotation-xml`,`audio`,`colgroup`,`desc`,`foreignobject`,`head`,`iframe`,`math`,`mi`,`mn`,`mo`,`ms`,`mtext`,`noembed`,`noframes`,`noscript`,`plaintext`,`script`,`style`,`svg`,`template`,`thead`,`title`,`video`,`xmp`]),x=null,Ue=Pk({},[`audio`,`video`,`img`,`source`,`image`,`track`]),We=null,Ge=Pk({},[`alt`,`class`,`for`,`id`,`label`,`name`,`pattern`,`placeholder`,`role`,`summary`,`title`,`value`,`style`,`xmlns`]),Ke=`http://www.w3.org/1998/Math/MathML`,qe=`http://www.w3.org/2000/svg`,Je=`http://www.w3.org/1999/xhtml`,Ye=Je,Xe=!1,Ze=null,Qe=Pk({},[Ke,qe,Je],wk),$e=Pk({},[`mi`,`mo`,`mn`,`ms`,`mtext`]),et=Pk({},[`annotation-xml`]),tt=Pk({},[`title`,`style`,`font`,`a`,`script`]),nt=null,rt=[`application/xhtml+xml`,`text/html`],it=null,at=null,ot=n.createElement(`form`),st=function(e){return e instanceof RegExp||e instanceof Function},ct=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(at&&at===e)){if((!e||typeof e!=`object`)&&(e={}),e=Ik(e),nt=rt.indexOf(e.PARSER_MEDIA_TYPE)===-1?`text/html`:e.PARSER_MEDIA_TYPE,it=nt===`application/xhtml+xml`?wk:Ck,_e=kk(e,`ALLOWED_TAGS`)?Pk({},e.ALLOWED_TAGS,it):ve,ye=kk(e,`ALLOWED_ATTR`)?Pk({},e.ALLOWED_ATTR,it):be,Ze=kk(e,`ALLOWED_NAMESPACES`)?Pk({},e.ALLOWED_NAMESPACES,wk):Qe,We=kk(e,`ADD_URI_SAFE_ATTR`)?Pk(Ik(Ge),e.ADD_URI_SAFE_ATTR,it):Ge,x=kk(e,`ADD_DATA_URI_TAGS`)?Pk(Ik(Ue),e.ADD_DATA_URI_TAGS,it):Ue,Ve=kk(e,`FORBID_CONTENTS`)?Pk({},e.FORBID_CONTENTS,it):He,Se=kk(e,`FORBID_TAGS`)?Pk({},e.FORBID_TAGS,it):Ik({}),Ce=kk(e,`FORBID_ATTR`)?Pk({},e.FORBID_ATTR,it):Ik({}),Be=kk(e,`USE_PROFILES`)?e.USE_PROFILES:!1,Te=e.ALLOW_ARIA_ATTR!==!1,Ee=e.ALLOW_DATA_ATTR!==!1,De=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Oe=e.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ke=e.SAFE_FOR_TEMPLATES||!1,Ae=e.SAFE_FOR_XML!==!1,je=e.WHOLE_DOCUMENT||!1,Pe=e.RETURN_DOM||!1,Fe=e.RETURN_DOM_FRAGMENT||!1,Ie=e.RETURN_TRUSTED_TYPE||!1,Ne=e.FORCE_BODY||!1,Le=e.SANITIZE_DOM!==!1,Re=e.SANITIZE_NAMED_PROPS||!1,b=e.KEEP_CONTENT!==!1,ze=e.IN_PLACE||!1,ge=e.ALLOWED_URI_REGEXP||eA,Ye=e.NAMESPACE||Je,$e=e.MATHML_TEXT_INTEGRATION_POINTS||$e,et=e.HTML_INTEGRATION_POINTS||et,xe=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&st(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(xe.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&st(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(xe.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements==`boolean`&&(xe.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ke&&(Ee=!1),Fe&&(Pe=!0),Be&&(_e=Pk({},Wk),ye=[],Be.html===!0&&(Pk(_e,Rk),Pk(ye,Gk)),Be.svg===!0&&(Pk(_e,zk),Pk(ye,Kk),Pk(ye,Jk)),Be.svgFilters===!0&&(Pk(_e,Bk),Pk(ye,Kk),Pk(ye,Jk)),Be.mathMl===!0&&(Pk(_e,Hk),Pk(ye,qk),Pk(ye,Jk))),e.ADD_TAGS&&(typeof e.ADD_TAGS==`function`?we.tagCheck=e.ADD_TAGS:(_e===ve&&(_e=Ik(_e)),Pk(_e,e.ADD_TAGS,it))),e.ADD_ATTR&&(typeof e.ADD_ATTR==`function`?we.attributeCheck=e.ADD_ATTR:(ye===be&&(ye=Ik(ye)),Pk(ye,e.ADD_ATTR,it))),e.ADD_URI_SAFE_ATTR&&Pk(We,e.ADD_URI_SAFE_ATTR,it),e.FORBID_CONTENTS&&(Ve===He&&(Ve=Ik(Ve)),Pk(Ve,e.FORBID_CONTENTS,it)),e.ADD_FORBID_CONTENTS&&(Ve===He&&(Ve=Ik(Ve)),Pk(Ve,e.ADD_FORBID_CONTENTS,it)),b&&(_e[`#text`]=!0),je&&Pk(_e,[`html`,`head`,`body`]),_e.table&&(Pk(_e,[`tbody`]),delete Se.tbody),e.TRUSTED_TYPES_POLICY){if(typeof e.TRUSTED_TYPES_POLICY.createHTML!=`function`)throw jk(`TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.`);if(typeof e.TRUSTED_TYPES_POLICY.createScriptURL!=`function`)throw jk(`TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.`);te=e.TRUSTED_TYPES_POLICY,ne=te.createHTML(``)}else te===void 0&&(te=cA(p,i)),te!==null&&typeof ne==`string`&&(ne=te.createHTML(``));pk&&pk(e),at=e}},lt=Pk({},[...zk,...Bk,...Vk]),ut=Pk({},[...Hk,...Uk]),dt=function(e){let t=ee(e);(!t||!t.tagName)&&(t={namespaceURI:Ye,tagName:`template`});let n=Ck(e.tagName),r=Ck(t.tagName);return Ze[e.namespaceURI]?e.namespaceURI===qe?t.namespaceURI===Je?n===`svg`:t.namespaceURI===Ke?n===`svg`&&(r===`annotation-xml`||$e[r]):!!lt[n]:e.namespaceURI===Ke?t.namespaceURI===Je?n===`math`:t.namespaceURI===qe?n===`math`&&et[r]:!!ut[n]:e.namespaceURI===Je?t.namespaceURI===qe&&!et[r]||t.namespaceURI===Ke&&!$e[r]?!1:!ut[n]&&(tt[n]||!lt[n]):!!(nt===`application/xhtml+xml`&&Ze[e.namespaceURI]):!1},ft=function(e){xk(t.removed,{element:e});try{ee(e).removeChild(e)}catch{g(e)}},pt=function(e,n){try{xk(t.removed,{attribute:n.getAttributeNode(e),from:n})}catch{xk(t.removed,{attribute:null,from:n})}if(n.removeAttribute(e),e===`is`)if(Pe||Fe)try{ft(n)}catch{}else try{n.setAttribute(e,``)}catch{}},mt=function(e){let t=null,r=null;if(Ne)e=`<remove></remove>`+e;else{let t=Tk(e,/^[\r\n\t ]+/);r=t&&t[0]}nt===`application/xhtml+xml`&&Ye===Je&&(e=`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>`+e+`</body></html>`);let i=te?te.createHTML(e):e;if(Ye===Je)try{t=new f().parseFromString(i,nt)}catch{}if(!t||!t.documentElement){t=re.createDocument(Ye,`template`,null);try{t.documentElement.innerHTML=Xe?ne:i}catch{}}let a=t.body||t.documentElement;return e&&r&&a.insertBefore(n.createTextNode(r),a.childNodes[0]||null),Ye===Je?oe.call(t,je?`html`:`body`)[0]:je?t.documentElement:a},ht=function(e){return ie.call(e.ownerDocument||e,e,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT|l.SHOW_PROCESSING_INSTRUCTION|l.SHOW_CDATA_SECTION,null)},gt=function(e){return e instanceof d&&(typeof e.nodeName!=`string`||typeof e.textContent!=`string`||typeof e.removeChild!=`function`||!(e.attributes instanceof u)||typeof e.removeAttribute!=`function`||typeof e.setAttribute!=`function`||typeof e.namespaceURI!=`string`||typeof e.insertBefore!=`function`||typeof e.hasChildNodes!=`function`)},_t=function(e){return typeof s==`function`&&e instanceof s};function vt(e,n,r){vk(e,e=>{e.call(t,n,r,at)})}let yt=function(e){let n=null;if(vt(ce.beforeSanitizeElements,e,null),gt(e))return ft(e),!0;let r=it(e.nodeName);if(vt(ce.uponSanitizeElement,e,{tagName:r,allowedTags:_e}),Ae&&e.hasChildNodes()&&!_t(e.firstElementChild)&&Ak(/<[/\w!]/g,e.innerHTML)&&Ak(/<[/\w!]/g,e.textContent)||e.nodeType===oA.progressingInstruction||Ae&&e.nodeType===oA.comment&&Ak(/<[/\w]/g,e.data))return ft(e),!0;if(!(we.tagCheck instanceof Function&&we.tagCheck(r))&&(!_e[r]||Se[r])){if(!Se[r]&&xt(r)&&(xe.tagNameCheck instanceof RegExp&&Ak(xe.tagNameCheck,r)||xe.tagNameCheck instanceof Function&&xe.tagNameCheck(r)))return!1;if(b&&!Ve[r]){let t=ee(e)||e.parentNode,n=v(e)||e.childNodes;if(n&&t){let r=n.length;for(let i=r-1;i>=0;--i){let r=h(n[i],!0);r.__removalCount=(e.__removalCount||0)+1,t.insertBefore(r,_(e))}}}return ft(e),!0}return e instanceof c&&!dt(e)||(r===`noscript`||r===`noembed`||r===`noframes`)&&Ak(/<\/no(script|embed|frames)/i,e.innerHTML)?(ft(e),!0):(ke&&e.nodeType===oA.text&&(n=e.textContent,vk([le,y,ue],e=>{n=Ek(n,e,` `)}),e.textContent!==n&&(xk(t.removed,{element:e.cloneNode()}),e.textContent=n)),vt(ce.afterSanitizeElements,e,null),!1)},bt=function(e,t,r){if(Le&&(t===`id`||t===`name`)&&(r in n||r in ot))return!1;if(!(Ee&&!Ce[t]&&Ak(de,t))&&!(Te&&Ak(fe,t))&&!(we.attributeCheck instanceof Function&&we.attributeCheck(t,e))){if(!ye[t]||Ce[t]){if(!(xt(e)&&(xe.tagNameCheck instanceof RegExp&&Ak(xe.tagNameCheck,e)||xe.tagNameCheck instanceof Function&&xe.tagNameCheck(e))&&(xe.attributeNameCheck instanceof RegExp&&Ak(xe.attributeNameCheck,t)||xe.attributeNameCheck instanceof Function&&xe.attributeNameCheck(t,e))||t===`is`&&xe.allowCustomizedBuiltInElements&&(xe.tagNameCheck instanceof RegExp&&Ak(xe.tagNameCheck,r)||xe.tagNameCheck instanceof Function&&xe.tagNameCheck(r))))return!1}else if(!We[t]&&!Ak(ge,Ek(r,me,``))&&!((t===`src`||t===`xlink:href`||t===`href`)&&e!==`script`&&Dk(r,`data:`)===0&&x[e])&&!(De&&!Ak(pe,Ek(r,me,``)))&&r)return!1}return!0},xt=function(e){return e!==`annotation-xml`&&Tk(e,he)},St=function(e){vt(ce.beforeSanitizeAttributes,e,null);let{attributes:n}=e;if(!n||gt(e))return;let r={attrName:``,attrValue:``,keepAttr:!0,allowedAttributes:ye,forceKeepAttr:void 0},i=n.length;for(;i--;){let{name:a,namespaceURI:o,value:s}=n[i],c=it(a),l=s,u=a===`value`?l:Ok(l);if(r.attrName=c,r.attrValue=u,r.keepAttr=!0,r.forceKeepAttr=void 0,vt(ce.uponSanitizeAttribute,e,r),u=r.attrValue,Re&&(c===`id`||c===`name`)&&(pt(a,e),u=`user-content-`+u),Ae&&Ak(/((--!?|])>)|<\/(style|title|textarea)/i,u)){pt(a,e);continue}if(c===`attributename`&&Tk(u,`href`)){pt(a,e);continue}if(r.forceKeepAttr)continue;if(!r.keepAttr){pt(a,e);continue}if(!Oe&&Ak(/\/>/i,u)){pt(a,e);continue}ke&&vk([le,y,ue],e=>{u=Ek(u,e,` `)});let d=it(e.nodeName);if(!bt(d,c,u)){pt(a,e);continue}if(te&&typeof p==`object`&&typeof p.getAttributeType==`function`&&!o)switch(p.getAttributeType(d,c)){case`TrustedHTML`:u=te.createHTML(u);break;case`TrustedScriptURL`:u=te.createScriptURL(u);break}if(u!==l)try{o?e.setAttributeNS(o,a,u):e.setAttribute(a,u),gt(e)?ft(e):bk(t.removed)}catch{pt(a,e)}}vt(ce.afterSanitizeAttributes,e,null)},Ct=function e(t){let n=null,r=ht(t);for(vt(ce.beforeSanitizeShadowDOM,t,null);n=r.nextNode();)vt(ce.uponSanitizeShadowNode,n,null),yt(n),St(n),n.content instanceof a&&e(n.content);vt(ce.afterSanitizeShadowDOM,t,null)};return t.sanitize=function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=null,o=null,c=null,l=null;if(Xe=!e,Xe&&(e=`<!-->`),typeof e!=`string`&&!_t(e))if(typeof e.toString==`function`){if(e=e.toString(),typeof e!=`string`)throw jk(`dirty is not a string, aborting`)}else throw jk(`toString is not a function`);if(!t.isSupported)return e;if(Me||ct(n),t.removed=[],typeof e==`string`&&(ze=!1),ze){if(e.nodeName){let t=it(e.nodeName);if(!_e[t]||Se[t])throw jk(`root node is forbidden and cannot be sanitized in-place`)}}else if(e instanceof s)i=mt(`<!---->`),o=i.ownerDocument.importNode(e,!0),o.nodeType===oA.element&&o.nodeName===`BODY`||o.nodeName===`HTML`?i=o:i.appendChild(o);else{if(!Pe&&!ke&&!je&&e.indexOf(`<`)===-1)return te&&Ie?te.createHTML(e):e;if(i=mt(e),!i)return Pe?null:Ie?ne:``}i&&Ne&&ft(i.firstChild);let u=ht(ze?e:i);for(;c=u.nextNode();)yt(c),St(c),c.content instanceof a&&Ct(c.content);if(ze)return e;if(Pe){if(Fe)for(l=ae.call(i.ownerDocument);i.firstChild;)l.appendChild(i.firstChild);else l=i;return(ye.shadowroot||ye.shadowrootmode)&&(l=se.call(r,l,!0)),l}let d=je?i.outerHTML:i.innerHTML;return je&&_e[`!doctype`]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&Ak(rA,i.ownerDocument.doctype.name)&&(d=`<!DOCTYPE `+i.ownerDocument.doctype.name+`>
`+d),ke&&vk([le,y,ue],e=>{d=Ek(d,e,` `)}),te&&Ie?te.createHTML(d):d},t.setConfig=function(){ct(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}),Me=!0},t.clearConfig=function(){at=null,Me=!1},t.isValidAttribute=function(e,t,n){return at||ct({}),bt(it(e),it(t),n)},t.addHook=function(e,t){typeof t==`function`&&xk(ce[e],t)},t.removeHook=function(e,t){if(t!==void 0){let n=yk(ce[e],t);return n===-1?void 0:Sk(ce[e],n,1)[0]}return bk(ce[e])},t.removeHooks=function(e){ce[e]=[]},t.removeAllHooks=function(){ce=lA()},t}var dA=uA(),fA=dA(i),pA=Object.freeze(`a.abbr.b.bdo.blockquote.br.caption.cite.code.col.colgroup.dd.del.details.dfn.div.dl.dt.em.figcaption.figure.h1.h2.h3.h4.h5.h6.hr.i.img.ins.kbd.label.li.mark.ol.p.pre.q.rp.rt.ruby.s.samp.small.small.source.span.strike.strong.sub.summary.sup.table.tbody.td.tfoot.th.thead.time.tr.tt.u.ul.var.video.wbr`.split(`.`)),mA=Object.freeze([`href`,`target`,`src`,`alt`,`title`,`for`,`name`,`role`,`tabindex`,`x-dispatch`,`required`,`checked`,`placeholder`,`type`,`start`,`width`,`height`,`align`]),hA=`vscode-relative-path`;function gA(e,t){if(t.override===`*`)return!0;try{let n=new URL(e,hA+`://`);return!!(t.override.includes(n.protocol.replace(/:$/,``))||t.allowRelativePaths&&n.protocol===hA+`:`&&!e.trim().toLowerCase().startsWith(hA))}catch{return!1}}function _A(e,t){fA.addHook(`afterSanitizeAttributes`,n=>{for(let r of[`href`,`src`])if(n.hasAttribute(r)){let i=n.getAttribute(r);r===`href`?!i.startsWith(`#`)&&!gA(i,e)&&n.removeAttribute(r):gA(i,t)||n.removeAttribute(r)}})}var vA=Object.freeze({ALLOWED_TAGS:[...pA],ALLOWED_ATTR:[...mA],ALLOW_UNKNOWN_PROTOCOLS:!0});function yA(e,t){return bA(e,t,`trusted`)}function bA(e,t,n){try{let r={...vA};t?.allowedTags&&(t.allowedTags.override&&(r.ALLOWED_TAGS=[...t.allowedTags.override]),t.allowedTags.augment&&(r.ALLOWED_TAGS=[...r.ALLOWED_TAGS??[],...t.allowedTags.augment]));let i=[...mA];t?.allowedAttributes&&(t.allowedAttributes.override&&(i=[...t.allowedAttributes.override]),t.allowedAttributes.augment&&(i=[...i,...t.allowedAttributes.augment])),i=i.map(e=>typeof e==`string`?e.toLowerCase():{attributeName:e.attributeName.toLowerCase(),shouldKeep:e.shouldKeep});let a=new Set(i.map(e=>typeof e==`string`?e:e.attributeName)),o=new Map;for(let e of i)typeof e==`string`?o.delete(e):o.set(e.attributeName,e);return r.ALLOWED_ATTR=Array.from(a),_A({override:t?.allowedLinkProtocols?.override??[A.http,A.https],allowRelativePaths:t?.allowRelativeLinkPaths??!1},{override:t?.allowedMediaProtocols?.override??[A.http,A.https],allowRelativePaths:t?.allowRelativeMediaPaths??!1}),t?.replaceWithPlaintext&&fA.addHook(`uponSanitizeElement`,SA),o.size&&fA.addHook(`uponSanitizeAttribute`,(e,t)=>{let n=o.get(t.attrName);if(n){let r=n.shouldKeep(e,t);typeof r==`string`?(t.keepAttr=!0,t.attrValue=r):t.keepAttr=r}else t.keepAttr=a.has(t.attrName)}),n===`dom`?fA.sanitize(e,{...r,RETURN_DOM_FRAGMENT:!0}):fA.sanitize(e,{...r,RETURN_TRUSTED_TYPE:!0})}finally{fA.removeAllHooks()}}var xA=[`area`,`base`,`br`,`col`,`command`,`embed`,`hr`,`img`,`input`,`keygen`,`link`,`meta`,`param`,`source`,`track`,`wbr`],SA=(e,t,n)=>{if(!t.allowedTags[t.tagName]&&t.tagName!==`body`){let t=CA(e);t&&(e.nodeType===Node.COMMENT_NODE?e.parentElement?.insertBefore(t,e):e.parentElement?.replaceChild(t,e))}};function CA(e){if(!e.ownerDocument)return;let t,n;if(e.nodeType===Node.COMMENT_NODE)t=`<!--${e.textContent}-->`;else if(e instanceof Element){let r=e.tagName.toLowerCase(),i=xA.includes(r);t=`<${r}${e.attributes.length?` `+Array.from(e.attributes).map(e=>`${e.name}="${e.value}"`).join(` `):``}>`,i||(n=`</${r}>`)}else return;let r=h_(),i=e.ownerDocument.createTextNode(t);for(r.appendChild(i);e.firstChild;)r.appendChild(e.firstChild);let a=n?e.ownerDocument.createTextNode(n):void 0;return a&&r.appendChild(a),r}function wA(e,t,n){z_(e,bA(t,n,`dom`))}var TA=RegExp(`(\\\\)?\\$\\((${lC.iconNameExpression}(?:${lC.iconModifierExpression})?)\\)`,`g`);function EA(e){let t=[],n,r=0,i=0;for(;(n=TA.exec(e))!==null;){i=n.index||0,r<i&&t.push(e.substring(r,i)),r=(n.index||0)+n[0].length;let[,a,o]=n;t.push(a?`$(${o})`:DA({id:o}))}return r<e.length&&t.push(e.substring(r)),t}function DA(e){let t=B(`span`);return t.classList.add(...lC.asClassNameArray(e)),t}var OA=Object.freeze({image:({href:e,title:t,text:n})=>{let r=[],i=[];return e&&({href:e,dimensions:r}=ED(e),i.push(`src="${wD(e)}"`)),n&&i.push(`alt="${wD(n)}"`),t&&i.push(`title="${wD(t)}"`),r.length&&(i=i.concat(r)),`<img `+i.join(` `)+`>`},paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>`},link({href:e,title:t,tokens:n}){let r=this.parser.parseInline(n);return typeof e==`string`?(e===r&&(r=TD(r)),t=typeof t==`string`?wD(TD(t)):``,e=TD(e),e=e.replace(/&/g,`&amp;`).replace(/</g,`&lt;`).replace(/>/g,`&gt;`).replace(/"/g,`&quot;`).replace(/'/g,`&#39;`),`<a href="${e}" title="${t||e}" draggable="false">${r}</a>`):``}});function kA(e){return function(t){let{tokens:n}=t,r=n[0];if(r?.type!==`paragraph`)return e.call(this,t);let i=r.tokens;if(!i||i.length===0)return e.call(this,t);let a=i[0];if(a?.type!==`text`)return e.call(this,t);let o=/^\s*\[!(NOTE|TIP|IMPORTANT|WARNING|CAUTION)\]\s*?\n*/i,s=a.raw.match(o);if(!s)return e.call(this,t);a.raw=a.raw.replace(o,``),a.text=a.text.replace(o,``);let c={note:`info`,tip:`light-bulb`,important:`comment`,warning:`alert`,caution:`stop`},l=s[1],u=l.charAt(0).toUpperCase()+l.slice(1).toLowerCase(),d=l.toLowerCase();return`<blockquote data-severity="${d}"><p><span>${DA({id:c[d]}).outerHTML}${u}</span>${this.parser.parse(n).substring(3)}</blockquote>\n`}}function AA(e,t={},n){let r=new C,i=!1,a=new KO(...t.markedExtensions??[]),{renderer:o,codeBlocks:s,syncCodeBlocks:c}=MA(a,t,e),l=NA(e),u;if(t.fillInIncompleteTokens){let e={...a.defaults,...t.markedOptions,renderer:o},n=tj(a.lexer(l,e));u=a.parser(n,e)}else u=a.parse(l,{...t?.markedOptions,renderer:o,async:!1});e.supportThemeIcons&&(u=EA(u).map(e=>typeof e==`string`?e:e.outerHTML).join(``));let d=v_(`div`),f=HA(e,t.sanitizerConfig??{});wA(d,u,f),jA(e,t,d);let p;if(n?(p=n,z_(n,...d.childNodes)):p=d,s.length>0)Promise.all(s).then(e=>{if(i)return;let n=new Map(e),r=p.querySelectorAll(`div[data-code]`);for(let e of r){let t=n.get(e.dataset.code??``);t&&z_(e,t)}t.asyncRenderCallback?.()});else if(c.length>0){let e=new Map(c),t=p.querySelectorAll(`div[data-code]`);for(let n of t){let t=e.get(n.dataset.code??``);t&&z_(n,t)}}if(t.asyncRenderCallback)for(let e of p.getElementsByTagName(`img`)){let n=r.add(L(e,`load`,()=>{n.dispose(),t.asyncRenderCallback()}))}if(t.actionHandler){let n=n=>{let r=new wp(Yh(p),n);!r.leftButton&&!r.middleButton||PA(e,t,r)};r.add(L(p,`click`,n)),r.add(L(p,`auxclick`,n)),r.add(L(p,`keydown`,n=>{let r=new vp(n);!r.equals(F.Space)&&!r.equals(F.Enter)||PA(e,t,r)}))}for(let e of[...p.getElementsByTagName(`input`)])if(e.attributes.getNamedItem(`type`)?.value===`checkbox`)e.setAttribute(`disabled`,``);else if(t.sanitizerConfig?.replaceWithPlaintext){let t=CA(e);t?e.parentElement?.replaceChild(t,e):e.remove()}else e.remove();return{element:p,dispose:()=>{i=!0,r.dispose()}}}function jA(e,t,n){for(let r of n.querySelectorAll(`img, audio, video, source`)){let n=r.getAttribute(`src`);if(n){let i=n;try{e.baseUri&&(i=RA(k.from(e.baseUri),i))}catch{}if(r.setAttribute(`src`,IA(e,i,!0)),t.sanitizerConfig?.remoteImageIsAllowed){let e=k.parse(i);e.scheme!==A.file&&e.scheme!==A.data&&!t.sanitizerConfig.remoteImageIsAllowed(e)&&r.replaceWith(B(``,void 0,r.outerHTML))}}}for(let t of n.querySelectorAll(`a`)){let n=t.getAttribute(`href`);if(t.setAttribute(`href`,``),!n||/^data:|javascript:/i.test(n)||/^command:/i.test(n)&&!e.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(n))t.replaceWith(...t.childNodes);else{let r=IA(e,n,!1);e.baseUri&&(r=RA(k.from(e.baseUri),n)),t.dataset.href=r}}}function MA(e,t,n){let r=new e.Renderer(t.markedOptions);r.image=OA.image,r.link=OA.link,r.paragraph=OA.paragraph,n.supportAlertSyntax&&(r.blockquote=kA(r.blockquote));let i=[],a=[];return t.codeBlockRendererSync?r.code=({text:e,lang:n,raw:r})=>{let i=AD.nextId(),o=t.codeBlockRendererSync(LA(n),e,r);return a.push([i,o]),`<div class="code" data-code="${i}">${Ma(e)}</div>`}:t.codeBlockRenderer&&(r.code=({text:e,lang:n})=>{let r=AD.nextId(),a=t.codeBlockRenderer(LA(n),e);return i.push(a.then(e=>[r,e])),`<div class="code" data-code="${r}">${Ma(e)}</div>`}),n.supportHtml||(r.html=({text:e})=>t.sanitizerConfig?.replaceWithPlaintext?Ma(e):n.isTrusted&&e.match(/^(<span[^>]+>)|(<\/\s*span>)$/)?e:``),{renderer:r,codeBlocks:i,syncCodeBlocks:a}}function NA(e){let t=e.value;return t.length>1e5&&(t=`${t.substr(0,1e5)}`),e.supportThemeIcons&&(t=uD(t)),t}function PA(e,t,n){let r=n.target.closest(`a[data-href]`);if(x_(r))try{let n=r.dataset.href;n&&(e.baseUri&&(n=RA(k.from(e.baseUri),n)),t.actionHandler?.(n,e))}catch(e){p(e)}finally{n.preventDefault(),n.stopPropagation()}}function FA(e,t){let n;try{n=ky(decodeURIComponent(t))}catch{}return n?(n=ek(n,t=>{if(e.uris&&e.uris[t])return k.revive(e.uris[t])}),encodeURIComponent(JSON.stringify(n))):t}function IA(e,t,n){let r=e.uris&&e.uris[t],i=k.revive(r);return n?t.startsWith(A.data+`:`)?t:(i||=k.parse(t),Ss.uriToBrowserUri(i).toString(!0)):!i||k.parse(t).toString()===i.toString()?t:(i.query&&(i=i.with({query:FA(e,i.query)})),i.toString())}function LA(e){if(!e)return``;let t=e.split(/[\s+|:|,|\{|\?]/,1);return t.length?t[0]:e}function RA(e,t){return/^\w[\w\d+.-]*:/.test(t)?t:e.path.endsWith(`/`)?Rs(e,t).toString():Rs(Ps(e),t).toString()}function zA(e,t,n={}){return yA(e,HA(t,n))}var BA=Object.freeze([...pA,`input`]),VA=Object.freeze([`align`,`autoplay`,`alt`,`colspan`,`controls`,`draggable`,`height`,`href`,`loop`,`muted`,`playsinline`,`poster`,`rowspan`,`src`,`target`,`title`,`type`,`width`,`start`,`checked`,`disabled`,`value`,`data-code`,`data-href`,`data-severity`,{attributeName:`style`,shouldKeep:(e,t)=>e.tagName===`SPAN`&&t.attrName===`style`?/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z0-9]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z0-9]+)+\));)?(border-radius:[0-9]+px;)?$/.test(t.attrValue):!1},{attributeName:`class`,shouldKeep:(e,t)=>e.tagName===`SPAN`&&t.attrName===`class`?/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(t.attrValue):!1}]);function HA(e,t){let n=e.isTrusted??!1,r=[A.http,A.https,A.mailto,A.file,A.vscodeFileResource,A.vscodeRemote,A.vscodeRemoteResource,A.vscodeNotebookCell,A.internal];return n&&r.push(A.command),t.allowedLinkSchemes?.augment&&r.push(...t.allowedLinkSchemes.augment),{allowedTags:{override:t.allowedTags?.override??BA},allowedAttributes:{override:t.allowedAttributes?.override??VA},allowedLinkProtocols:{override:r},allowRelativeLinkPaths:!!e.baseUri,allowedMediaProtocols:{override:[A.http,A.https,A.data,A.file,A.vscodeFileResource,A.vscodeRemote,A.vscodeRemoteResource]},allowRelativeMediaPaths:!!e.baseUri,replaceWithPlaintext:t.replaceWithPlaintext}}function UA(e,t){if(typeof e==`string`)return e;let n=e.value??``;n.length>1e5&&(n=`${n.substr(0,1e5)}`);let r=GA();return t?.includeCodeBlocksFences&&(r.code=KA),t?.useLinkFormatter&&(r.link=qA),zA(YO(n,{async:!1,renderer:r}),{isTrusted:!1},{}).toString().replace(/&(#\d+|[a-zA-Z]+);/g,e=>WA.get(e)??e).trim()}var WA=new Map([[`&quot;`,`"`],[`&nbsp;`,` `],[`&amp;`,`&`],[`&#39;`,`'`],[`&lt;`,`<`],[`&gt;`,`>`]]);function GA(){let e=new HO;return e.code=({text:e})=>Ma(e),e.blockquote=({text:e})=>e+`
`,e.html=e=>``,e.heading=function({tokens:e}){return this.parser.parseInline(e)+`
`},e.hr=()=>``,e.list=function({items:e}){return e.map(e=>this.listitem(e)).join(`
`)+`
`},e.listitem=({text:e})=>e+`
`,e.paragraph=function({tokens:e}){return this.parser.parseInline(e)+`
`},e.table=function({header:e,rows:t}){return e.map(e=>this.tablecell(e)).join(` `)+`
`+t.map(e=>e.map(e=>this.tablecell(e)).join(` `)).join(`
`)+`
`},e.tablerow=({text:e})=>e,e.tablecell=function({tokens:e}){return this.parser.parseInline(e)},e.strong=({text:e})=>e,e.em=({text:e})=>e,e.codespan=({text:e})=>Ma(e),e.br=e=>`
`,e.del=({text:e})=>e,e.image=e=>``,e.text=({text:e})=>e,e.link=({text:e})=>e,e}var KA=({text:e})=>`\n\`\`\`\n${Ma(e)}\n\`\`\`\n`,qA=({text:e,href:t})=>{try{if(t){let n=k.parse(t);return e.trim()||Ms(n)}}catch{return e.trim()||pa(t)}return e};function JA(e){let t=``;return e.forEach(e=>{t+=e.raw}),t}function YA(e){if(e.tokens)for(let t=e.tokens.length-1;t>=0;t--){let n=e.tokens[t];if(n.type===`text`){let r=n.raw.split(`
`),i=r[r.length-1];if(i.includes("`"))return rj(e);if(i.includes(`**`))return lj(e);if(i.match(/\*\w/))return ij(e);if(i.match(/(^|\s)__\w/))return uj(e);if(i.match(/(^|\s)_\w/))return aj(e);if(XA(i)||ZA(i)&&e.tokens.slice(0,t).some(e=>e.type===`text`&&e.raw.match(/\[[^\]]*$/))){let n=e.tokens.slice(t+1);return n[0]?.type===`link`&&n[1]?.type===`text`&&n[1].raw.match(/^ *"[^"]*$/)||i.match(/^[^"]* +"[^"]*$/)?sj(e):oj(e)}else if(i.match(/(^|\s)\[\w*[^\]]*$/))return cj(e)}}}function XA(e){return!!e.match(/(^|\s)\[.*\]\(\w*/)}function ZA(e){return!!e.match(/^[^\[]*\]\([^\)]*$/)}function QA(e){let t=e.items[e.items.length-1],n=t.tokens?t.tokens[t.tokens.length-1]:void 0,r=e=>{let t=e.items.at(-1)?.tokens.at(-1);return t?.type===`heading`||t?.type===`list`&&r(t)},i;if(n?.type===`text`&&!(`inRawBlock`in t))i=YA(n);else if(r(e)){let t=XO(e.raw.trim()+` &nbsp;`)[0];return t.type===`list`?t:void 0}if(!i||i.type!==`paragraph`)return;let a=JA(e.items.slice(0,-1)),o=t.raw.match(/^(\s*(-|\d+\.|\*) +)/)?.[0];if(!o)return;let s=XO(a+(o+JA(t.tokens.slice(0,-1))+i.raw))[0];if(s.type===`list`)return s}function $A(e,t){if(e.raw.match(/-\s*$/))return XO(t+` &nbsp;`)}var ej=3;function tj(e){for(let t=0;t<ej;t++){let t=nj(e);if(t)e=t;else break}return e}function nj(e){let t,n;for(t=0;t<e.length;t++){let r=e[t];if(r.type===`paragraph`&&r.raw.match(/(\n|^)\|/)){n=fj(e.slice(t));break}}let r=e.at(-1);if(!n&&r?.type===`list`){let i=QA(r);i&&(n=[i],t=e.length-1)}if(!n&&r?.type===`paragraph`){let i=YA(r);i&&(n=[i],t=e.length-1)}if(n){let r=[...e.slice(0,t),...n];return r.links=e.links,r}if(r?.type===`heading`){let t=$A(r,JA(e));if(t)return t}return null}function rj(e){return dj(e,"`")}function ij(e){return dj(e,`*`)}function aj(e){return dj(e,`_`)}function oj(e){return dj(e,`)`,!1)}function sj(e){return dj(e,`")`,!1)}function cj(e){return dj(e,`](https://microsoft.com)`,!1)}function lj(e){return dj(e,`**`)}function uj(e){return dj(e,`__`)}function dj(e,t,n=!0){let r=JA(Array.isArray(e)?e:[e]);return XO((n?r.trimEnd():r)+t)[0]}function fj(e){let t=JA(e),n=t.split(`
`),r,i=!1;for(let e=0;e<n.length;e++){let t=n[e].trim();if(r===void 0&&t.match(/^\s*\|/)){let e=t.match(/(\|[^\|]+)(?=\||$)/g);e&&(r=e.length)}else if(typeof r==`number`)if(t.match(/^\s*\|/)){if(e!==n.length-1)return;i=!0}else return}if(typeof r==`number`&&r>0){let e=i?n.slice(0,-1).join(`
`):t;return XO(e+(e.match(/\|\s*$/)?``:`|`)+`\n|${` --- |`.repeat(r)}`)}}s({});var pj;(function(e){e[e.ABSOLUTE=1]=`ABSOLUTE`,e[e.FIXED=2]=`FIXED`,e[e.FIXED_SHADOW=3]=`FIXED_SHADOW`})(pj||={});function mj(e){let t=e;return!!t&&typeof t.x==`number`&&typeof t.y==`number`}var hj;(function(e){e[e.LEFT=0]=`LEFT`,e[e.RIGHT=1]=`RIGHT`})(hj||={});var gj;(function(e){e[e.BELOW=0]=`BELOW`,e[e.ABOVE=1]=`ABOVE`})(gj||={});var _j;(function(e){e[e.VERTICAL=0]=`VERTICAL`,e[e.HORIZONTAL=1]=`HORIZONTAL`})(_j||={});var vj;(function(e){e[e.Before=0]=`Before`,e[e.After=1]=`After`})(vj||={});var yj;(function(e){e[e.AVOID=0]=`AVOID`,e[e.ALIGN=1]=`ALIGN`})(yj||={});function bj(e,t,n){let r=n.mode===yj.ALIGN?n.offset:n.offset+n.size,i=n.mode===yj.ALIGN?n.offset+n.size:n.offset;return n.position===vj.Before?t<=e-r?r:t<=i?i-t:Math.max(e-t,0):t<=i?i-t:t<=e-r&&i<t/2?r:0}var xj=class e extends w{static#e=this.BUBBLE_UP_EVENTS=[`click`,`keydown`,`focus`,`blur`];static#t=this.BUBBLE_DOWN_EVENTS=[`click`];constructor(e,t){super(),this.container=null,this.useFixedPosition=!1,this.useShadowDOM=!1,this.delegate=null,this.toDisposeOnClean=w.None,this.toDisposeOnSetContainer=w.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=B(`.context-view`),G_(this.view),this.setContainer(e,t),this._register(S(()=>this.setContainer(null,pj.ABSOLUTE)))}setContainer(t,n){this.useFixedPosition=n!==pj.ABSOLUTE;let r=this.useShadowDOM;if(this.useShadowDOM=n===pj.FIXED_SHADOW,!(t===this.container&&r===this.useShadowDOM)&&(this.container&&=(this.toDisposeOnSetContainer.dispose(),this.view.remove(),this.shadowRoot&&(this.shadowRoot=null,this.shadowRootHostElement?.remove(),this.shadowRootHostElement=null),null),t)){if(this.container=t,this.useShadowDOM){this.shadowRootHostElement=B(`.shadow-root-host`),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:`open`});let e=v_(`style`);e.textContent=Sj,this.shadowRoot.appendChild(e),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(B(`slot`))}else this.container.appendChild(this.view);let n=new C;e.BUBBLE_UP_EVENTS.forEach(e=>{n.add(fg(this.container,e,e=>{this.onDOMEvent(e,!1)}))}),e.BUBBLE_DOWN_EVENTS.forEach(e=>{n.add(fg(this.container,e,e=>{this.onDOMEvent(e,!0)},!0))}),this.toDisposeOnSetContainer=n}}show(e){this.isVisible()&&this.hide(),og(this.view),this.view.className=`context-view monaco-component`,this.view.style.top=`0px`,this.view.style.left=`0px`,this.view.style.zIndex=`${2575+(e.layer??0)}`,this.view.style.position=this.useFixedPosition?`fixed`:`absolute`,W_(this.view),this.toDisposeOnClean=e.render(this.view)||w.None,this.delegate=e,this.doLayout(),this.delegate.focus?.()}getViewElement(){return this.view}layout(){if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(mi&&Rf.pointerEvents)){this.hide();return}this.delegate?.layout?.(),this.doLayout()}}doLayout(){if(!this.isVisible())return;let e=this.delegate.getAnchor(),t;if(x_(e)){let n=Rg(e),r=Bg(e);t={top:n.top*r,left:n.left*r,width:n.width*r,height:n.height*r}}else t=mj(e)?{top:e.y,left:e.x,width:e.width||1,height:e.height||2}:{top:e.posy,left:e.posx,width:2,height:2};let n=Vg(this.view),r=Gg(this.view),i=this.delegate.anchorPosition??gj.BELOW,a=this.delegate.anchorAlignment??hj.LEFT,o=this.delegate.anchorAxisAlignment??_j.VERTICAL,s,c,l=d_();if(o===_j.VERTICAL){let e={offset:t.top-l.pageYOffset,size:t.height,position:i===gj.BELOW?vj.Before:vj.After},o={offset:t.left,size:t.width,position:a===hj.LEFT?vj.Before:vj.After,mode:yj.ALIGN};s=bj(l.innerHeight,r,e)+l.pageYOffset,bT.intersects({start:s,end:s+r},{start:e.offset,end:e.offset+e.size})&&(o.mode=yj.AVOID),c=bj(l.innerWidth,n,o)}else{let e={offset:t.left,size:t.width,position:a===hj.LEFT?vj.Before:vj.After},o={offset:t.top,size:t.height,position:i===gj.BELOW?vj.Before:vj.After,mode:yj.ALIGN};c=bj(l.innerWidth,n,e),bT.intersects({start:c,end:c+n},{start:e.offset,end:e.offset+e.size})&&(o.mode=yj.AVOID),s=bj(l.innerHeight,r,o)+l.pageYOffset}this.view.classList.remove(`top`,`bottom`,`left`,`right`),this.view.classList.add(i===gj.BELOW?`bottom`:`top`),this.view.classList.add(a===hj.LEFT?`left`:`right`),this.view.classList.toggle(`fixed`,this.useFixedPosition);let u=Rg(this.container),d=this.container.scrollTop||0,f=this.container.scrollLeft||0;this.view.style.top=`${s-(this.useFixedPosition?Rg(this.view).top:u.top)+d}px`,this.view.style.left=`${c-(this.useFixedPosition?Rg(this.view).left:u.left)+f}px`,this.view.style.width=`initial`}hide(e){let t=this.delegate;this.delegate=null,t?.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),G_(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,i_(Yh(e).document)):t&&!Jg(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}},Sj=`
    :host {
        all: initial; /* 1st rule so subsequent properties are reset. */
    }

    .codicon[class*='codicon-'] {
        font: normal normal normal 16px/1 codicon;
        display: inline-block;
        text-decoration: none;
        text-rendering: auto;
        text-align: center;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        user-select: none;
        -webkit-user-select: none;
        -ms-user-select: none;
    }

    :host {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
    }

    :host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
    :host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
    :host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
    :host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
    :host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", "Nanum Gothic", "AppleGothic", sans-serif; }

    :host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
    :host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
    :host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
    :host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
    :host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

    :host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
    :host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
    :host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
    :host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
    :host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;s({});var Cj=B,wj=`selectOption.entry.template`,Tj=class{get templateId(){return wj}renderTemplate(e){let t=Object.create(null);return t.root=e,t.text=z(e,Cj(`.option-text`)),t.detail=z(e,Cj(`.option-detail`)),t.decoratorRight=z(e,Cj(`.option-decorator-right`)),t}renderElement(e,t,n){let r=n,i=e.text,a=e.detail,o=e.decoratorRight,s=e.isDisabled;r.text.textContent=i,r.detail.textContent=a||``,r.decoratorRight.textContent=o||``,s?r.root.classList.add(`option-disabled`):r.root.classList.remove(`option-disabled`)}disposeTemplate(e){}},Ej=class e extends w{static#e=this.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32;static#t=this.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2;static#n=this.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3;constructor(t,n,r,i,a){super(),this.options=[],this._currentSelection=0,this._hasDetails=!1,this._selectionDetailsDisposables=this._register(new C),this._skipLayout=!1,this._sticky=!1,this._isVisible=!1,this.styles=i,this.selectBoxOptions=a||Object.create(null),typeof this.selectBoxOptions.minBottomMargin==`number`?this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0):this.selectBoxOptions.minBottomMargin=e.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN,this.selectElement=v_(`select`),this.selectElement.className=`monaco-select-box`,typeof this.selectBoxOptions.ariaLabel==`string`&&this.selectElement.setAttribute(`aria-label`,this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription==`string`&&this.selectElement.setAttribute(`aria-description`,this.selectBoxOptions.ariaDescription),this._onDidSelect=new E,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(r),this.selected=n||0,t&&this.setOptions(t,n),this.initStyleSheet()}setTitle(e){!this._hover&&e?this._hover=this._register(wE().setupManagedHover(kE(`mouse`),this.selectElement,e)):this._hover&&this._hover.update(e)}getHeight(){return 22}getTemplateId(){return wj}constructSelectDropDown(e){this.contextViewProvider=e,this.selectDropDownContainer=B(`.monaco-select-box-dropdown-container`),this.selectionDetailsPane=z(this.selectDropDownContainer,Cj(`.select-box-details-pane`));let t=z(z(this.selectDropDownContainer,Cj(`.select-box-dropdown-container-width-control`)),Cj(`.width-control-div`));this.widthControlElement=v_(`span`),this.widthControlElement.className=`option-text-width-control`,z(t,this.widthControlElement),this._dropDownPosition=gj.BELOW,this.styleElement=xC(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute(`draggable`,`true`),this._register(L(this.selectDropDownContainer,R.DRAG_START,e=>{M_.stop(e,!0)}))}registerListeners(){this._register(fg(this.selectElement,`change`,e=>{this.selected=e.target.selectedIndex,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)})),this._register(L(this.selectElement,R.CLICK,e=>{M_.stop(e),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(L(this.selectElement,R.MOUSE_DOWN,e=>{M_.stop(e)}));let e;this._register(L(this.selectElement,`touchstart`,t=>{e=this._isVisible})),this._register(L(this.selectElement,`touchend`,t=>{M_.stop(t),e?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(L(this.selectElement,R.KEY_DOWN,e=>{let t=new vp(e),n=!1;si?(t.keyCode===F.DownArrow||t.keyCode===F.UpArrow||t.keyCode===F.Space||t.keyCode===F.Enter)&&(n=!0):(t.keyCode===F.DownArrow&&t.altKey||t.keyCode===F.UpArrow&&t.altKey||t.keyCode===F.Space||t.keyCode===F.Enter)&&(n=!0),n&&(this.showSelectDropDown(),M_.stop(e,!0))}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){ut(this.options,e)||(this.options=e,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((e,t)=>{this.selectElement.add(this.createOption(e.text,t,e.isDisabled)),typeof e.description==`string`&&(this._hasDetails=!0)})),t!==void 0&&(this.select(t),this._currentSelection=this.selected)}setEnabled(e){this.selectElement.disabled=!e}setOptionsList(){this.selectList?.splice(0,this.selectList.length,this.options)}select(e){e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)}setAriaLabel(e){this.selectBoxOptions.ariaLabel=e,this.selectElement.setAttribute(`aria-label`,this.selectBoxOptions.ariaLabel)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){this.container=e,e.classList.add(`select-container`),e.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){let e=[];this.styles.listFocusBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(e.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }`),e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }`),this.styleElement.textContent=e.join(`
`)}styleSelectElement(){let e=this.styles.selectBackground??``,t=this.styles.selectForeground??``,n=this.styles.selectBorder??``;this.selectElement.style.backgroundColor=e,this.selectElement.style.color=t,this.selectElement.style.borderColor=n}styleList(){let e=this.styles.selectBackground??``,t=kC(this.styles.selectListBackground,e);this.selectDropDownListContainer.style.backgroundColor=t,this.selectionDetailsPane.style.backgroundColor=t;let n=this.styles.focusBorder??``;this.selectDropDownContainer.style.outlineColor=n,this.selectDropDownContainer.style.outlineOffset=`-1px`,this.selectList.style(this.styles)}createOption(e,t,n){let r=v_(`option`);return r.value=e,r.text=e,r.disabled=!!n,r}showSelectDropDown(){this.selectionDetailsPane.textContent=``,!(!this.contextViewProvider||this._isVisible)&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove(`visible`)},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove(`visible`)},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute(`aria-expanded`,`true`))}hideSelectDropDown(e){!this.contextViewProvider||!this._isVisible||(this._isVisible=!1,this.selectElement.setAttribute(`aria-expanded`,`false`),e&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(e,t){return e.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(t),{dispose:()=>{this.selectDropDownContainer.remove()}}}measureMaxDetailsHeight(){let e=0;return this.options.forEach((t,n)=>{this.updateDetail(n),this.selectionDetailsPane.offsetHeight>e&&(e=this.selectionDetailsPane.offsetHeight)}),e}layoutSelectDropDown(t){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add(`visible`);let n=Yh(this.selectElement),r=Rg(this.selectElement),i=n.innerHeight-r.top-r.height-(this.selectBoxOptions.minBottomMargin||0),a=r.top-e.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,o=this.selectElement.offsetWidth,s=this.setWidthControlElement(this.widthControlElement),c=`${Math.max(s,Math.round(o))}px`;this.selectDropDownContainer.style.width=c,this.selectList.getHTMLElement().style.height=``,this.selectList.layout();let l=this.selectList.contentHeight;this._hasDetails&&this._cachedMaxDetailsHeight===void 0&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());let u=this._hasDetails?this._cachedMaxDetailsHeight:0,d=l+u,f=Math.floor((i-u)/this.getHeight()),p=Math.floor((a-u)/this.getHeight());if(t)return r.top+r.height>n.innerHeight-22||r.top<e.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||f<1&&p<1?!1:(f<e.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&p>f&&this.options.length>f?(this._dropDownPosition=gj.ABOVE,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove(`border-top`),this.selectionDetailsPane.classList.add(`border-bottom`)):(this._dropDownPosition=gj.BELOW,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove(`border-bottom`),this.selectionDetailsPane.classList.add(`border-top`)),!0);if(r.top+r.height>n.innerHeight-22||r.top<e.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===gj.BELOW&&f<1||this._dropDownPosition===gj.ABOVE&&p<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===gj.BELOW){if(this._isVisible&&f+p<1)return this.hideSelectDropDown(!0),!1;d>i&&(l=f*this.getHeight())}else d>a&&(l=p*this.getHeight());return this.selectList.layout(l),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=`${l}px`,this.selectDropDownContainer.style.height=``):this.selectDropDownContainer.style.height=`${l}px`,this.updateDetail(this.selected),this.selectDropDownContainer.style.width=c,this.selectDropDownListContainer.setAttribute(`tabindex`,`0`),!0}else return!1}setWidthControlElement(e){let t=0;if(e){let n=0,r=0;this.options.forEach((e,t)=>{let i=e.detail?e.detail.length:0,a=e.decoratorRight?e.decoratorRight.length:0,o=e.text.length+i+a;o>r&&(n=t,r=o)}),e.textContent=this.options[n].text+(this.options[n].decoratorRight?`${this.options[n].decoratorRight} `:``),t=Vg(e)}return t}createSelectList(e){if(this.selectList)return;this.selectDropDownListContainer=z(e,Cj(`.select-box-dropdown-list-container`)),this.listRenderer=new Tj,this.selectList=this._register(new _E(`SelectBoxCustom`,this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:iT.Visible,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:e=>{let t=e.text;return e.detail&&(t+=`. ${e.detail}`),e.decoratorRight&&(t+=`. ${e.decoratorRight}`),e.description&&(t+=`. ${e.description}`),t},getWidgetAriaLabel:()=>D(29,`Select Box`),getRole:()=>si?``:`option`,getWidgetRole:()=>`listbox`}})),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);let t=this._register(new IC(this.selectDropDownListContainer,`keydown`)),n=T.chain(t.event,e=>e.filter(()=>this.selectList.length>0).map(e=>new vp(e)));this._register(T.chain(n,e=>e.filter(e=>e.keyCode===F.Enter))(this.onEnter,this)),this._register(T.chain(n,e=>e.filter(e=>e.keyCode===F.Tab))(this.onEnter,this)),this._register(T.chain(n,e=>e.filter(e=>e.keyCode===F.Escape))(this.onEscape,this)),this._register(T.chain(n,e=>e.filter(e=>e.keyCode===F.UpArrow))(this.onUpArrow,this)),this._register(T.chain(n,e=>e.filter(e=>e.keyCode===F.DownArrow))(this.onDownArrow,this)),this._register(T.chain(n,e=>e.filter(e=>e.keyCode===F.PageDown))(this.onPageDown,this)),this._register(T.chain(n,e=>e.filter(e=>e.keyCode===F.PageUp))(this.onPageUp,this)),this._register(T.chain(n,e=>e.filter(e=>e.keyCode===F.Home))(this.onHome,this)),this._register(T.chain(n,e=>e.filter(e=>e.keyCode===F.End))(this.onEnd,this)),this._register(T.chain(n,e=>e.filter(e=>e.keyCode>=F.Digit0&&e.keyCode<=F.KeyZ||e.keyCode>=F.Semicolon&&e.keyCode<=F.NumpadDivide))(this.onCharacter,this)),this._register(L(this.selectList.getHTMLElement(),R.POINTER_UP,e=>this.onPointerUp(e))),this._register(this.selectList.onMouseOver(e=>e.index!==void 0&&this.selectList.setFocus([e.index]))),this._register(this.selectList.onDidChangeFocus(e=>this.onListFocus(e))),this._register(L(this.selectDropDownContainer,R.FOCUS_OUT,e=>{!this._isVisible||Jg(e.relatedTarget,this.selectDropDownContainer)||this.onListBlur()})),this.selectList.getHTMLElement().setAttribute(`aria-label`,this.selectBoxOptions.ariaLabel||``),this.selectList.getHTMLElement().setAttribute(`aria-expanded`,`true`),this.styleList()}onPointerUp(e){if(!this.selectList.length)return;M_.stop(e);let t=e.target;if(!t||t.classList.contains(`slider`))return;let n=t.closest(`.monaco-list-row`);if(!n)return;let r=Number(n.getAttribute(`data-index`)),i=n.classList.contains(`option-disabled`);r>=0&&r<this.options.length&&!i&&(this.selected=r,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(e,t){let n=e=>{for(let t=0;t<e.childNodes.length;t++){let r=e.childNodes.item(t);(r.tagName&&r.tagName.toLowerCase())===`img`?r.remove():n(r)}},r=AA({value:e,supportThemeIcons:!0},{actionHandler:t});return r.element.classList.add(`select-box-description-markdown`),n(r.element),r}onListFocus(e){!this._isVisible||!this._hasDetails||this.updateDetail(e.indexes[0])}updateDetail(e){this._selectionDetailsDisposables.clear(),this.selectionDetailsPane.textContent=``;let t=this.options[e],n=t?.description??``,r=t?.descriptionIsMarkdown??!1;if(n){if(r){let e=t.descriptionMarkdownActionHandler,r=this._selectionDetailsDisposables.add(this.renderDescriptionMarkdown(n,e));this.selectionDetailsPane.appendChild(r.element)}else this.selectionDetailsPane.textContent=n;this.selectionDetailsPane.style.display=`block`}else this.selectionDetailsPane.style.display=`none`;this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(e){M_.stop(e),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(e){M_.stop(e),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(e){if(this.selected<this.options.length-1){M_.stop(e,!0);let t=this.options[this.selected+1].isDisabled;if(t&&this.options.length>this.selected+2)this.selected+=2;else if(t)return;else this.selected++;this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(e){this.selected>0&&(M_.stop(e,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))}onPageUp(e){M_.stop(e),this.selectList.focusPreviousPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onPageDown(e){M_.stop(e),this.selectList.focusNextPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onHome(e){M_.stop(e),!(this.options.length<2)&&(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(e){M_.stop(e),!(this.options.length<2)&&(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(e){let t=Zf.toString(e.keyCode),n=-1;for(let r=0;r<this.options.length-1;r++)if(n=(r+this.selected+1)%this.options.length,this.options[n].text.charAt(0).toUpperCase()===t&&!this.options[n].isDisabled){this.select(n),this.selectList.setFocus([n]),this.selectList.reveal(this.selectList.getFocus()[0]),M_.stop(e);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}},Dj=class extends w{constructor(e,t,n,r){super(),this.selected=0,this.selectBoxOptions=r||Object.create(null),this.options=[],this.selectElement=v_(`select`),this.selectElement.className=`monaco-select-box`,typeof this.selectBoxOptions.ariaLabel==`string`&&this.selectElement.setAttribute(`aria-label`,this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription==`string`&&this.selectElement.setAttribute(`aria-description`,this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new E),this.styles=n,this.registerListeners(),this.setOptions(e,t)}registerListeners(){this._register(RC.addTarget(this.selectElement)),[LC.Tap].forEach(e=>{this._register(L(this.selectElement,e,e=>{this.selectElement.focus()}))}),this._register(fg(this.selectElement,`click`,e=>{M_.stop(e,!0)})),this._register(fg(this.selectElement,`change`,e=>{this.selectElement.title=e.target.value,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value})})),this._register(fg(this.selectElement,`keydown`,e=>{let t=!1;si?(e.keyCode===F.DownArrow||e.keyCode===F.UpArrow||e.keyCode===F.Space)&&(t=!0):(e.keyCode===F.DownArrow&&e.altKey||e.keyCode===F.Space||e.keyCode===F.Enter)&&(t=!0),t&&e.stopPropagation()}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){(!this.options||!ut(this.options,e))&&(this.options=e,this.selectElement.options.length=0,this.options.forEach((e,t)=>{this.selectElement.add(this.createOption(e.text,t,e.isDisabled))})),t!==void 0&&this.select(t)}select(e){this.options.length===0?this.selected=0:e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&typeof this.options[this.selected].text==`string`?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=``}setAriaLabel(e){this.selectBoxOptions.ariaLabel=e,this.selectElement.setAttribute(`aria-label`,e)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setEnabled(e){this.selectElement.disabled=!e}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){e.classList.add(`select-container`),e.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}style(e){this.styles=e,this.applyStyles()}applyStyles(){this.selectElement&&(this.selectElement.style.backgroundColor=this.styles.selectBackground??``,this.selectElement.style.color=this.styles.selectForeground??``,this.selectElement.style.borderColor=this.styles.selectBorder??``)}createOption(e,t,n){let r=v_(`option`);return r.value=e,r.text=e,r.disabled=!!n,r}};s(iD);var Oj=Object.freeze({text:``,isDisabled:!0}),kj=class extends rT{constructor(e,t,n,r,i){super(),si&&!i?.useCustomDrawn?this.selectBoxDelegate=new Dj(e,t,r,i):this.selectBoxDelegate=new Ej(e,t,n,r,i),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(e,t){this.selectBoxDelegate.setOptions(e,t)}select(e){this.selectBoxDelegate.select(e)}setAriaLabel(e){this.selectBoxDelegate.setAriaLabel(e)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(e){this.selectBoxDelegate.setFocusable(e)}setEnabled(e){this.selectBoxDelegate.setEnabled(e)}render(e){this.selectBoxDelegate.render(e)}},Aj={};s(Aj);var jj=class extends w{get action(){return this._action}constructor(e,t,n={}){super(),this.options=n,this._context=e||this,this._action=t,t instanceof Zx&&this._register(t.onDidChange(e=>{this.element&&this.handleActionChangeEvent(e)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||=this._register(new Qx),this._actionRunner}set actionRunner(e){this._actionRunner=e}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){let t=this.element=e;this._register(RC.addTarget(e));let n=this.options&&this.options.draggable;n&&(e.draggable=!0,Ef&&this._register(L(e,R.DRAG_START,e=>e.dataTransfer?.setData(Qw.TEXT,this._action.label)))),this._register(L(t,LC.Tap,e=>this.onClick(e,!0))),this._register(L(t,R.MOUSE_DOWN,e=>{n||M_.stop(e,!0),this._action.enabled&&e.button===0&&t.classList.add(`active`)})),si&&this._register(L(t,R.CONTEXT_MENU,e=>{e.button===0&&e.ctrlKey===!0&&this.onClick(e)})),this._register(L(t,R.CLICK,e=>{M_.stop(e,!0),this.options&&this.options.isMenu||this.onClick(e)})),this._register(L(t,R.DBLCLICK,e=>{M_.stop(e,!0)})),[R.MOUSE_UP,R.MOUSE_OUT].forEach(e=>{this._register(L(t,e,e=>{M_.stop(e),t.classList.remove(`active`)}))})}onClick(e,t=!1){M_.stop(e,!0);let n=Ee(this._context)?this.options?.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,n)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add(`focused`))}isFocused(){return!!this.element?.classList.contains(`focused`)}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove(`focused`))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getClass(){return this.action.class}getTooltip(){return this.action.tooltip}getHoverContents(){return this.getTooltip()}updateTooltip(){if(!this.element)return;let e=this.getHoverContents()??``;if(this.updateAriaLabel(),!this.customHover&&e!==``){let t=this.options.hoverDelegate??kE(`element`);this.customHover=this._store.add(wE().setupManagedHover(t,this.element,e))}else this.customHover&&this.customHover.update(e)}updateAriaLabel(){if(this.element){let e=this.getTooltip()??``;this.element.setAttribute(`aria-label`,e)}}updateClass(){}updateChecked(){}dispose(){this.element&&=(this.element.remove(),void 0),this._context=void 0,super.dispose()}},Mj=class extends jj{constructor(e,t,n){n={...n,icon:n.icon===void 0?!1:n.icon,label:n.label===void 0?!0:n.label},super(e,t,n),this.options=n,this.cssClass=``}render(e){super.render(e),De(this.element);let t=v_(`a`);if(t.classList.add(`action-label`),t.setAttribute(`role`,this.getDefaultAriaRole()),this.label=t,this.element.appendChild(t),this.options.label&&this.options.keybinding&&!this.options.keybindingNotRenderedWithLabel){let e=v_(`span`);e.classList.add(`keybinding`),e.textContent=this.options.keybinding,this.element.appendChild(e)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===$x.ID?`presentation`:this.options.isMenu?`menuitem`:this.options.isTabList?`tab`:`button`}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}isFocused(){return!!this.label&&this.label?.tabIndex===0}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label,this.options.keybinding&&(e=D(1,`{0} ({1})`,e,this.options.keybinding))),e??void 0}updateClass(){this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(` `)),this.action.id===$x.ID&&this.action.class?this.label?.classList.add(this.action.class):this.options.icon?(this.cssClass=this.getClass(),this.label&&(this.label.classList.add(`codicon`),this.cssClass&&this.label.classList.add(...this.cssClass.split(` `))),this.updateEnabled()):this.label?.classList.remove(`codicon`)}updateEnabled(){this.action.enabled?(this.label&&(this.label.removeAttribute(`aria-disabled`),this.label.classList.remove(`disabled`)),this.element?.classList.remove(`disabled`)):(this.label&&(this.label.setAttribute(`aria-disabled`,`true`),this.label.classList.add(`disabled`)),this.element?.classList.add(`disabled`))}updateAriaLabel(){if(this.label){let e=this.getTooltip()??``;this.label.setAttribute(`aria-label`,e)}}updateChecked(){this.label&&(this.action.checked===void 0?(this.label.classList.remove(`checked`),this.label.removeAttribute(this.options.isTabList?`aria-selected`:`aria-checked`),this.label.setAttribute(`role`,this.getDefaultAriaRole())):(this.label.classList.toggle(`checked`,this.action.checked),this.options.isTabList?this.label.setAttribute(`aria-selected`,this.action.checked?`true`:`false`):(this.label.setAttribute(`aria-checked`,this.action.checked?`true`:`false`),this.label.setAttribute(`role`,`checkbox`))))}},Nj=class extends jj{constructor(e,t,n,r,i,a,o){super(e,t),this.selectBox=new kj(n,r,i,a,o),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}setOptions(e,t){this.selectBox.setOptions(e,t)}select(e){this.selectBox.select(e)}registerListeners(){this._register(this.selectBox.onDidSelect(e=>this.runAction(e.selected,e.index)))}runAction(e,t){this.actionRunner.run(this._action,this.getActionContext(e,t))}getActionContext(e,t){return e}setFocusable(e){this.selectBox.setFocusable(e)}focus(){this.selectBox?.focus()}blur(){this.selectBox?.blur()}render(e){this.selectBox.render(e)}};s(Aj);var Pj;(function(e){e[e.HORIZONTAL=0]=`HORIZONTAL`,e[e.VERTICAL=1]=`VERTICAL`})(Pj||={});var Fj=class extends w{get onDidBlur(){return this._onDidBlur.event}get onDidCancel(){return this._onDidCancel.event}get onDidRun(){return this._onDidRun.event}get onWillRun(){return this._onWillRun.event}constructor(e,t={}){super(),this._actionRunnerDisposables=this._register(new C),this.viewItemDisposables=this._register(new Hn),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new E),this._onDidCancel=this._register(new E({onWillAddFirstListener:()=>this.cancelHasListener=!0})),this.cancelHasListener=!1,this._onDidRun=this._register(new E),this._onWillRun=this._register(new E),this.options=t,this._context=t.context??null,this._orientation=this.options.orientation??Pj.HORIZONTAL,this._triggerKeys={keyDown:this.options.triggerKeys?.keyDown??!1,keys:this.options.triggerKeys?.keys??[F.Enter,F.Space]},this._hoverDelegate=t.hoverDelegate??this._register(AE()),this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new Qx,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(e=>this._onDidRun.fire(e))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(e=>this._onWillRun.fire(e))),this.viewItems=[],this.focusedItem=void 0,this.domNode=v_(`div`),this.domNode.className=`monaco-action-bar`;let n,r;switch(this._orientation){case Pj.HORIZONTAL:n=[F.LeftArrow],r=[F.RightArrow];break;case Pj.VERTICAL:n=[F.UpArrow],r=[F.DownArrow],this.domNode.className+=` vertical`;break}this._register(L(this.domNode,R.KEY_DOWN,e=>{let t=new vp(e),i=!0,a=typeof this.focusedItem==`number`?this.viewItems[this.focusedItem]:void 0;n&&(t.equals(n[0])||t.equals(n[1]))?i=this.focusPrevious():r&&(t.equals(r[0])||t.equals(r[1]))?i=this.focusNext():t.equals(F.Escape)&&this.cancelHasListener?this._onDidCancel.fire():t.equals(F.Home)?i=this.focusFirst():t.equals(F.End)?i=this.focusLast():t.equals(F.Tab)&&a instanceof jj&&a.trapsArrowNavigation?i=this.focusNext(void 0,!0):this.isTriggerKeyEvent(t)?this._triggerKeys.keyDown?this.doTrigger(t):this.triggerKeyDown=!0:i=!1,i&&(t.preventDefault(),t.stopPropagation())})),this._register(L(this.domNode,R.KEY_UP,e=>{let t=new vp(e);this.isTriggerKeyEvent(t)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(t)),t.preventDefault(),t.stopPropagation()):(t.equals(F.Tab)||t.equals(Qf.Shift|F.Tab)||t.equals(F.UpArrow)||t.equals(F.DownArrow)||t.equals(F.LeftArrow)||t.equals(F.RightArrow))&&this.updateFocusedItem()})),this.focusTracker=this._register(I_(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(i_()===this.domNode||!Jg(i_(),this.domNode))&&(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=v_(`ul`),this.actionsList.className=`actions-container`,this.options.highlightToggledItems&&this.actionsList.classList.add(`highlight-toggled`),this.actionsList.setAttribute(`role`,this.options.ariaRole||`toolbar`),this.options.ariaLabel&&this.actionsList.setAttribute(`aria-label`,this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=1?this.actionsList.setAttribute(`role`,this.options.ariaRole||`toolbar`):this.actionsList.setAttribute(`role`,`presentation`)}setAriaLabel(e){e?this.actionsList.setAttribute(`aria-label`,e):this.actionsList.removeAttribute(`aria-label`)}setFocusable(e){if(this.focusable=e,this.focusable){let e=this.viewItems.find(e=>e instanceof jj&&e.isEnabled());e instanceof jj&&e.setFocusable(!0)}else this.viewItems.forEach(e=>{e instanceof jj&&e.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(n=>{t||=e.equals(n)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){let t=this.actionsList.children[e];if(Jg(i_(),t)){this.focusedItem=e,this.viewItems[this.focusedItem]?.showHover?.();break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){this._actionRunner=e,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(e=>this._onDidRun.fire(e))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(e=>this._onWillRun.fire(e))),this.viewItems.forEach(t=>t.actionRunner=e)}getContainer(){return this.domNode}hasAction(e){return this.viewItems.findIndex(t=>t.action.id===e.id)!==-1}getAction(e){if(typeof e==`number`)return this.viewItems[e]?.action;if(x_(e)){for(;e.parentElement!==this.actionsList;){if(!e.parentElement)return;e=e.parentElement}for(let t=0;t<this.actionsList.childNodes.length;t++)if(this.actionsList.childNodes[t]===e)return this.viewItems[t].action}}push(e,t={}){let n=Array.isArray(e)?e:[e],r=xe(t.index)?t.index:null;if(n.forEach(e=>{let n=v_(`li`);n.className=`action-item`,n.setAttribute(`role`,`presentation`);let i,a={hoverDelegate:this._hoverDelegate,...t,isTabList:this.options.ariaRole===`tablist`};this.options.actionViewItemProvider&&(i=this.options.actionViewItemProvider(e,a)),i||=new Mj(this.context,e,a),this.options.allowContextMenu||this.viewItemDisposables.set(i,L(n,R.CONTEXT_MENU,e=>{M_.stop(e,!0)})),i.actionRunner=this._actionRunner,i.setActionContext(this.context),i.render(n),r===null||r<0||r>=this.actionsList.children.length?(this.actionsList.appendChild(n),this.viewItems.push(i)):(this.actionsList.insertBefore(n,this.actionsList.children[r]),this.viewItems.splice(r,0,i),r++)}),this.focusable){let e=!1;for(let t of this.viewItems){if(!(t instanceof jj))continue;let n;n=e||t.action.id===$x.ID?!1:!(!t.isEnabled()&&this.options.focusOnlyEnabledItems),n?(t.setFocusable(!0),e=!0):t.setFocusable(!1)}}typeof this.focusedItem==`number`&&this.focus(this.focusedItem),this.refreshRole()}getWidth(e){if(e>=0&&e<this.actionsList.children.length){let t=this.actionsList.children.item(e);if(t)return t.clientWidth}return 0}getHeight(e){if(e>=0&&e<this.actionsList.children.length){let t=this.actionsList.children.item(e);if(t)return t.clientHeight}return 0}pull(e){e>=0&&e<this.viewItems.length&&(this.actionsList.childNodes[e].remove(),this.viewItemDisposables.deleteAndDispose(this.viewItems[e]),Nn(this.viewItems.splice(e,1)),this.refreshRole())}clear(){this.isEmpty()||(this.viewItems=Nn(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),og(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return this.viewItems.length===0}isFocused(e){return e===void 0?Jg(i_(),this.domNode):Jg(i_(),this.actionsList.children[e])}focus(e){let t=!1,n;if(e===void 0?t=!0:typeof e==`number`?n=e:typeof e==`boolean`&&(t=e),t&&this.focusedItem===void 0){let e=this.viewItems.findIndex(e=>e.isEnabled());this.focusedItem=e===-1?void 0:e,this.updateFocus(void 0,void 0,!0)}else n!==void 0&&(this.focusedItem=n),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e,t){if(this.focusedItem===void 0)this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;let n=this.focusedItem,r;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=n,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,r=this.viewItems[this.focusedItem]}while(this.focusedItem!==n&&(this.options.focusOnlyEnabledItems&&!r.isEnabled()||r.action.id===$x.ID));return this.updateFocus(void 0,void 0,t),!0}focusPrevious(e){if(this.focusedItem===void 0)this.focusedItem=0;else if(this.viewItems.length<=1)return!1;let t=this.focusedItem,n;do{if(--this.focusedItem,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!n.isEnabled()||n.action.id===$x.ID));return this.updateFocus(!0),!0}updateFocus(e,t,n=!1){this.focusedItem===void 0&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&this.viewItems[this.previouslyFocusedItem]?.blur();let r=this.focusedItem===void 0?void 0:this.viewItems[this.focusedItem];if(r){let i=!0;Me(r.focus)||(i=!1),this.options.focusOnlyEnabledItems&&Me(r.isEnabled)&&!r.isEnabled()&&(i=!1),r.action.id===$x.ID&&(i=!1),i?(n||this.previouslyFocusedItem!==this.focusedItem)&&(r.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0),i&&r.showHover?.()}}doTrigger(e){if(this.focusedItem===void 0)return;let t=this.viewItems[this.focusedItem];if(t instanceof jj){let n=t._context===null||t._context===void 0?e:t._context;this.run(t._action,n)}}async run(e,t){await this._actionRunner.run(e,t)}dispose(){this._context=void 0,this.viewItems=Nn(this.viewItems),this.getContainer().remove(),super.dispose()}};function Ij(e){if(!e.length)return e;let t=-1;for(let n=0;n<e.length;n++)if(e[n].id!==$x.ID){t=n;break}if(t===-1)return[];e=e.slice(t);for(let t=e.length-1;t>=0&&e[t].id===$x.ID;t--)e.splice(t,1);let n=!1;for(let t=e.length-1;t>=0;t--){let r=e[t].id===$x.ID;r&&!n?e.splice(t,1):r?r&&(n=!1):n=!0}return e}var Lj;(function(e){e[e.Pointer=1]=`Pointer`,e[e.Mouse=2]=`Mouse`})(Lj||={});function Rj(e){let t=e;return typeof t==`object`&&`markdown`in t&&`markdownNotSupportedFallback`in t}function zj(e){let t=e;return typeof t==`object`&&`element`in t}s({});var Bj={inputActiveOptionBorder:`#007ACC00`,inputActiveOptionForeground:`#FFFFFF`,inputActiveOptionBackground:`#0E639C50`},Vj=class extends jj{constructor(e,t,n){super(e,t,n);let r=this.options.keybinding?`${this._action.label} (${this.options.keybinding})`:this._action.label;this.toggle=this._register(new Hj({actionClassName:this._action.class,isChecked:!!this._action.checked,title:r,notFocusable:!0,inputActiveOptionBackground:n.toggleStyles?.inputActiveOptionBackground,inputActiveOptionBorder:n.toggleStyles?.inputActiveOptionBorder,inputActiveOptionForeground:n.toggleStyles?.inputActiveOptionForeground})),this._register(this.toggle.onChange(()=>{this._action.checked=!!this.toggle&&this.toggle.checked}))}render(e){this.element=e,this.element.appendChild(this.toggle.domNode),this.updateChecked(),this.updateEnabled()}updateEnabled(){this.toggle&&(this.isEnabled()?(this.toggle.enable(),this.element?.classList.remove(`disabled`)):(this.toggle.disable(),this.element?.classList.add(`disabled`)))}updateChecked(){this.toggle.checked=!!this._action.checked}updateLabel(){let e=this.options.keybinding?`${this._action.label} (${this.options.keybinding})`:this._action.label;this.toggle.setTitle(e)}focus(){this.toggle.domNode.tabIndex=0,this.toggle.focus()}blur(){this.toggle.domNode.tabIndex=-1,this.toggle.domNode.blur()}setFocusable(e){this.toggle.domNode.tabIndex=e?0:-1}},Hj=class extends rT{get onChange(){return this._onChange.event}get onKeyDown(){return this._onKeyDown.event}constructor(e){super(),this._onChange=this._register(new E),this._onKeyDown=this._register(new E),this._opts=e,this._title=this._opts.title,this._checked=this._opts.isChecked;let t=[`monaco-custom-toggle`];this._opts.icon&&(this._icon=this._opts.icon,t.push(...lC.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(` `)),this._checked&&t.push(`checked`),this.domNode=v_(`div`),this._register(wE().setupDelayedHover(this.domNode,()=>({content:!bD(this._title)&&!x_(this._title)?fD(this._title):this._title,style:Lj.Pointer}),this._opts.hoverLifecycleOptions)),this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute(`role`,`checkbox`),this.domNode.setAttribute(`aria-checked`,String(this._checked)),this.setTitle(this._opts.title),this.applyStyles(),this.onclick(this.domNode,e=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),e.preventDefault(),e.stopPropagation())}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,e=>{if(this.enabled){if(e.keyCode===F.Space||e.keyCode===F.Enter){this.checked=!this._checked,this._onChange.fire(!0),e.preventDefault(),e.stopPropagation();return}this._onKeyDown.fire(e)}})}get enabled(){return this.domNode.getAttribute(`aria-disabled`)!==`true`}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute(`aria-checked`,String(this._checked)),this.domNode.classList.toggle(`checked`,this._checked),this.applyStyles()}setIcon(e){this._icon&&this.domNode.classList.remove(...lC.asClassNameArray(this._icon)),this._icon=e,this._icon&&this.domNode.classList.add(...lC.asClassNameArray(this._icon))}width(){return 22}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||``,this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||`inherit`,this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||``)}enable(){this.domNode.setAttribute(`aria-disabled`,`false`),this.domNode.classList.remove(`disabled`)}disable(){this.domNode.setAttribute(`aria-disabled`,`true`),this.domNode.classList.add(`disabled`)}setTitle(e){this._title=e;let t=typeof e==`string`?e:bD(e)?e.value:e.textContent;this.domNode.setAttribute(`aria-label`,pD(t))}set visible(e){this.domNode.style.display=e?``:`none`}get visible(){return this.domNode.style.display!==`none`}},Uj=class extends rT{static#e=this.CLASS_NAME=`monaco-checkbox`;constructor(e,t,n){super(),this.checkbox=e,this.domNode=t,this.styles=n,this._onChange=this._register(new E),this.onChange=this._onChange.event,this.applyStyles()}get enabled(){return this.checkbox.enabled}focus(){this.domNode.focus()}hasFocus(){return s_(this.domNode)}enable(){this.checkbox.enable(),this.applyStyles(!0)}disable(){this.checkbox.disable(),this.applyStyles(!1)}setTitle(e){this.checkbox.setTitle(e)}applyStyles(e=this.enabled){this.domNode.style.color=(e?this.styles.checkboxForeground:this.styles.checkboxDisabledForeground)||``,this.domNode.style.backgroundColor=(e?this.styles.checkboxBackground:this.styles.checkboxDisabledBackground)||``,this.domNode.style.borderColor=(e?this.styles.checkboxBorder:this.styles.checkboxDisabledBackground)||``;let t=this.styles.size||18;this.domNode.style.width=this.domNode.style.height=this.domNode.style.fontSize=`${t}px`,this.domNode.style.fontSize=`${t-2}px`}},Wj=class extends Uj{constructor(e,t,n){let r=new Hj({title:e,isChecked:t,icon:x.check,actionClassName:Uj.CLASS_NAME,hoverLifecycleOptions:n.hoverLifecycleOptions,...Bj});super(r,r.domNode,n),this._register(r),this._register(this.checkbox.onChange(e=>{this.applyStyles(),this._onChange.fire(e)}))}get checked(){return this.checkbox.checked}set checked(e){this.checkbox.checked=e,this.applyStyles()}applyStyles(e){this.checkbox.checked?this.checkbox.setIcon(x.check):this.checkbox.setIcon(void 0),super.applyStyles(e)}},Gj=class extends Uj{constructor(e,t,n){let r;switch(t){case!0:r=x.check;break;case`mixed`:r=x.dash;break;case!1:r=void 0;break}let i=new Hj({title:e,isChecked:t===!0,icon:r,actionClassName:Wj.CLASS_NAME,hoverLifecycleOptions:n.hoverLifecycleOptions,...Bj});super(i,i.domNode,n),this._state=t,this._register(i),this._register(this.checkbox.onChange(e=>{this._state=this.checkbox.checked,this.applyStyles(),this._onChange.fire(e)}))}get checked(){return this._state}set checked(e){this._state!==e&&(this._state=e,this.checkbox.checked=e===!0,this.applyStyles())}applyStyles(e){switch(this._state){case!0:this.checkbox.setIcon(x.check);break;case`mixed`:this.checkbox.setIcon(x.dash);break;case!1:this.checkbox.setIcon(void 0);break}super.applyStyles(e)}},Kj=class extends jj{constructor(e,t,n){super(e,t,n),this.toggle=this._register(new Wj(this._action.label,!!this._action.checked,n.checkboxStyles)),this._register(this.toggle.onChange(()=>this.onChange()))}render(e){if(this.element=e,this.element.classList.add(`checkbox-action-item`),this.element.appendChild(this.toggle.domNode),this.options.label&&this._action.label){let e=this.element.appendChild(B(`span.checkbox-label`,void 0,this._action.label));this._register(L(e,R.CLICK,e=>{this.toggle.checked=!this.toggle.checked,e.stopPropagation(),e.preventDefault(),this.onChange()}))}this.updateEnabled(),this.updateClass(),this.updateChecked()}onChange(){this._action.checked=!!this.toggle&&this.toggle.checked,this.actionRunner.run(this._action,this._context)}updateEnabled(){this.isEnabled()?this.toggle.enable():this.toggle.disable(),this.action.enabled?this.element?.classList.remove(`disabled`):this.element?.classList.add(`disabled`)}updateChecked(){this.toggle.checked=!!this._action.checked}updateClass(){this.cssClass&&this.toggle.domNode.classList.remove(...this.cssClass.split(` `)),this.cssClass=this.getClass(),this.cssClass&&this.toggle.domNode.classList.add(...this.cssClass.split(` `))}focus(){this.toggle.domNode.tabIndex=0,this.toggle.focus()}blur(){this.toggle.domNode.tabIndex=-1,this.toggle.domNode.blur()}setFocusable(e){this.toggle.domNode.tabIndex=e?0:-1}};function qj(e){return(t,n)=>{if(t.checked!==void 0)return new Vj(null,t,{...n,toggleStyles:e})}}var Jj=D(11,`Match Case`),Yj=D(12,`Match Whole Word`),Xj=D(13,`Use Regular Expression`),Zj=class extends Hj{constructor(e){super({icon:x.caseSensitive,title:Jj+e.appendTitle,isChecked:e.isChecked,hoverLifecycleOptions:e.hoverLifecycleOptions,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}},Qj=class extends Hj{constructor(e){super({icon:x.wholeWord,title:Yj+e.appendTitle,isChecked:e.isChecked,hoverLifecycleOptions:e.hoverLifecycleOptions,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}},$j=class extends Hj{constructor(e){super({icon:x.regex,title:Xj+e.appendTitle,isChecked:e.isChecked,hoverLifecycleOptions:e.hoverLifecycleOptions,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}};function eM(e,t,n){let r=n??v_(`div`);return r.textContent=e,r}function tM(e,t,n){let r=n??v_(`div`);return r.textContent=``,iM(r,aM(e,!!t?.renderCodeSegments),t?.actionHandler,t?.renderCodeSegments),r}var nM=class{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){let e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}},rM;(function(e){e[e.Invalid=0]=`Invalid`,e[e.Root=1]=`Root`,e[e.Text=2]=`Text`,e[e.Bold=3]=`Bold`,e[e.Italics=4]=`Italics`,e[e.Action=5]=`Action`,e[e.ActionClose=6]=`ActionClose`,e[e.Code=7]=`Code`,e[e.NewLine=8]=`NewLine`})(rM||={});function iM(e,t,n,r){let i;if(t.type===rM.Text)i=g_(t.content||``);else if(t.type===rM.Bold)i=v_(`b`);else if(t.type===rM.Italics)i=v_(`i`);else if(t.type===rM.Code&&r)i=v_(`code`);else if(t.type===rM.Action&&n){let e=v_(`a`);n.disposables.add(fg(e,`click`,e=>{n.callback(String(t.index),e)})),i=e}else t.type===rM.NewLine?i=v_(`br`):t.type===rM.Root&&(i=e);i&&e!==i&&e.appendChild(i),i&&Array.isArray(t.children)&&t.children.forEach(e=>{iM(i,e,n,r)})}function aM(e,t){let n={type:rM.Root,children:[]},r=0,i=n,a=[],o=new nM(e);for(;!o.eos();){let e=o.next(),n=e===`\\`&&sM(o.peek(),t)!==rM.Invalid;if(n&&(e=o.next()),!n&&oM(e,t)&&e===o.peek()){o.advance(),i.type===rM.Text&&(i=a.pop());let n=sM(e,t);if(i.type===n||i.type===rM.Action&&n===rM.ActionClose)i=a.pop();else{let e={type:n,children:[]};n===rM.Action&&(e.index=r,r++),i.children.push(e),a.push(i),i=e}}else if(e===`
`)i.type===rM.Text&&(i=a.pop()),i.children.push({type:rM.NewLine});else if(i.type!==rM.Text){let t={type:rM.Text,content:e};i.children.push(t),a.push(i),i=t}else i.content+=e}return i.type===rM.Text&&(i=a.pop()),n}function oM(e,t){return sM(e,t)!==rM.Invalid}function sM(e,t){switch(e){case`*`:return rM.Bold;case`_`:return rM.Italics;case`[`:return rM.Action;case`]`:return rM.ActionClose;case"`":return t?rM.Code:rM.Invalid;default:return rM.Invalid}}var cM=class{constructor(e,t=0,n=e.length,r=t-1){this.items=e,this.start=t,this.end=n,this.index=r}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}},lM=class{constructor(e=new Set,t=10){this._history=e,this._limit=t,this._onChange(),this._history.onDidChange&&(this._disposable=this._history.onDidChange(()=>this._onChange()))}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._navigator.next()}previous(){return this._currentPosition()===0?null:this._navigator.previous()}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isFirst(){return this._currentPosition()===0}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return this._navigator.current()===null}has(e){return this._history.has(e)}clear(){this._history.clear(),this._onChange()}_onChange(){this._reduceToLimit();let e=this._elements;this._navigator=new cM(e,0,e.length,e.length)}_reduceToLimit(){let e=this._elements;if(e.length>this._limit){let t=e.slice(e.length-this._limit);this._history.replace?this._history.replace(t):this._history=new Set(t)}}_currentPosition(){let e=this._navigator.current();return e?this._elements.indexOf(e):-1}get _elements(){let e=[];return this._history.forEach(t=>e.push(t)),e}dispose(){this._disposable&&=(this._disposable.dispose(),void 0)}};s({});var uM=B,dM;(function(e){e[e.INFO=1]=`INFO`,e[e.WARNING=2]=`WARNING`,e[e.ERROR=3]=`ERROR`})(dM||={});var fM={inputBackground:`#3C3C3C`,inputForeground:`#CCCCCC`,inputValidationInfoBorder:`#55AAFF`,inputValidationInfoBackground:`#063B49`,inputValidationWarningBorder:`#B89500`,inputValidationWarningBackground:`#352A05`,inputValidationErrorBorder:`#BE1100`,inputValidationErrorBackground:`#5A1D1D`,inputBorder:void 0,inputValidationErrorForeground:void 0,inputValidationInfoForeground:void 0,inputValidationWarningForeground:void 0},pM=class extends rT{get onDidChange(){return this._onDidChange.event}get onDidHeightChange(){return this._onDidHeightChange.event}constructor(e,t,n){super(),this.state=`idle`,this.maxHeight=1/0,this.hover=this._register(new Ln),this._onDidChange=this._register(new E),this._onDidHeightChange=this._register(new E),this.contextViewProvider=t,this.options=n,this.message=null,this.placeholder=this.options.placeholder||``,this.tooltip=this.options.tooltip??(this.placeholder||``),this.ariaLabel=this.options.ariaLabel||``,this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=z(e,uM(`.monaco-inputbox.idle`));let r=this.options.flexibleHeight?`textarea`:`input`,i=z(this.element,uM(`.ibwrapper`));if(this.input=z(i,uM(r+`.input.empty`)),this.input.setAttribute(`autocorrect`,`off`),this.input.setAttribute(`autocapitalize`,`off`),this.input.setAttribute(`spellcheck`,`false`),this.onfocus(this.input,()=>this.element.classList.add(`synthetic-focus`)),this.onblur(this.input,()=>this.element.classList.remove(`synthetic-focus`)),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight==`number`?this.options.flexibleMaxHeight:1/0,this.mirror=z(i,uM(`div.mirror`)),this.mirror.innerText=`\xA0`,this.scrollableElement=new gT(this.element,{vertical:iT.Auto}),this.options.flexibleWidth&&(this.input.setAttribute(`wrap`,`off`),this.mirror.style.whiteSpace=`pre`,this.mirror.style.wordWrap=`initial`),z(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(e=>this.input.scrollTop=e.scrollTop));let t=this._register(new IC(e.ownerDocument,`selectionchange`)),n=T.filter(t.event,()=>e.getRootNode().getSelection()?.anchorNode===i);this._register(n(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||`text`,this.input.setAttribute(`wrap`,`off`);this.ariaLabel&&this.input.setAttribute(`aria-label`,this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this._register(this.ignoreGesture(this.input)),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new Fj(this.element,{actionViewItemProvider:this.options.actionViewItemProvider})),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}setActions(e,t){this.actionbar?(this.actionbar.clear(),e&&this.actionbar.push(e,{icon:!0,label:!1})):e&&(this.actionbar=this._register(new Fj(this.element,{actionViewItemProvider:t??this.options.actionViewItemProvider})),this.actionbar.push(e,{icon:!0,label:!1}))}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute(`placeholder`,``)}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute(`placeholder`,this.placeholder||``)}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute(`placeholder`,e)}setTooltip(e){this.tooltip=e,this.hover.value||(this.hover.value=this._register(wE().setupDelayedHoverAtMouse(this.input,()=>({content:this.tooltip,appearance:{compact:!0}}))))}setAriaLabel(e){this.ariaLabel=e,e?this.input.setAttribute(`aria-label`,this.ariaLabel):this.input.removeAttribute(`aria-label`)}getAriaLabel(){return this.ariaLabel}get mirrorElement(){return this.mirror}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get step(){return this.input.step}set step(e){this.input.step=e}get height(){return typeof this.cachedHeight==`number`?this.cachedHeight:Gg(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return s_(this.input)}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}getSelection(){let e=this.input.selectionStart;return e===null?null:{start:e,end:this.input.selectionEnd??e}}enable(){this.input.removeAttribute(`disabled`)}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}setEnabled(e){e?this.enable():this.disable()}get width(){return Vg(this.input)}set width(e){if(this.options.flexibleHeight&&this.options.flexibleWidth){let t=0;this.mirror&&(t=(parseFloat(this.mirror.style.paddingLeft||``)||0)+(parseFloat(this.mirror.style.paddingRight||``)||0)),this.input.style.width=e-t+`px`}else this.input.style.width=e+`px`;this.mirror&&(this.mirror.style.width=e+`px`)}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+`px`)}updateScrollDimensions(){if(typeof this.cachedContentHeight!=`number`||typeof this.cachedHeight!=`number`||!this.scrollableElement)return;let e=this.cachedContentHeight,t=this.cachedHeight,n=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:n})}showMessage(e,t){if(this.state===`open`&&rk(this.message,e))return;this.message=e,this.element.classList.remove(`idle`),this.element.classList.remove(`info`),this.element.classList.remove(`warning`),this.element.classList.remove(`error`),this.element.classList.add(this.classForType(e.type));let n=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${kC(n.border,`transparent`)}`,this.message.content&&(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove(`info`),this.element.classList.remove(`warning`),this.element.classList.remove(`error`),this.element.classList.add(`idle`),this._hideMessage(),this.applyStyles()}isInputValid(){return!!this.validation&&!this.validation(this.value)}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute(`aria-invalid`,`true`),this.showMessage(e)):this.inputElement.hasAttribute(`aria-invalid`)&&(this.inputElement.removeAttribute(`aria-invalid`),this.hideMessage())),e?.type}stylesForType(e){let t=this.options.inputBoxStyles;switch(e){case dM.INFO:return{border:t.inputValidationInfoBorder,background:t.inputValidationInfoBackground,foreground:t.inputValidationInfoForeground};case dM.WARNING:return{border:t.inputValidationWarningBorder,background:t.inputValidationWarningBackground,foreground:t.inputValidationWarningForeground};default:return{border:t.inputValidationErrorBorder,background:t.inputValidationErrorBackground,foreground:t.inputValidationErrorForeground}}}classForType(e){switch(e){case dM.INFO:return`info`;case dM.WARNING:return`warning`;default:return`error`}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e,t=()=>e.style.width=Vg(this.element)+`px`;this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:hj.RIGHT,render:n=>{if(!this.message)return null;e=z(n,uM(`.monaco-inputbox-container`)),t();let r=uM(`span.monaco-inputbox-message`);this.message.formatContent?tM(this.message.content,void 0,r):eM(this.message.content,void 0,r),r.classList.add(this.classForType(this.message.type));let i=this.stylesForType(this.message.type);return r.style.backgroundColor=i.background??``,r.style.color=i.foreground??``,r.style.border=i.border?`1px solid ${i.border}`:``,z(e,r),null},onHide:()=>{this.state=`closed`},layout:t});let n;n=this.message.type===dM.ERROR?D(20,`Error: {0}`,this.message.content):this.message.type===dM.WARNING?D(21,`Warning: {0}`,this.message.content):D(22,`Info: {0}`,this.message.content),GC(n),this.state=`open`}_hideMessage(){this.contextViewProvider&&(this.state===`open`&&this.contextViewProvider.hideContextView(),this.state=`idle`)}layoutMessage(){this.state===`open`&&this.contextViewProvider&&this.contextViewProvider.layout()}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle(`empty`,!this.value),this.state===`open`&&this.contextViewProvider&&this.contextViewProvider.layout(),this.options.hideHoverOnValueChange&&wE().hideHover()}updateMirror(){if(!this.mirror)return;let e=this.value,t=e.charCodeAt(e.length-1)===10?` `:``;(e+t).replace(/\u000c/g,``)?this.mirror.textContent=e+t:this.mirror.innerText=`\xA0`,this.layout()}applyStyles(){let e=this.options.inputBoxStyles,t=e.inputBackground??``,n=e.inputForeground??``,r=e.inputBorder??``;this.element.style.backgroundColor=t,this.element.style.color=n,this.input.style.backgroundColor=`inherit`,this.input.style.color=n,this.element.style.border=`1px solid ${kC(r,`transparent`)}`}layout(){if(!this.mirror){this.layoutMessage();return}let e=this.cachedContentHeight;this.cachedContentHeight=Gg(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+`px`,this._onDidHeightChange.fire(this.cachedContentHeight)),this.layoutMessage()}insertAtCursor(e){let t=this.inputElement,n=t.selectionStart,r=t.selectionEnd,i=t.value;n!==null&&r!==null&&(this.value=i.substr(0,n)+e+i.substr(r),t.setSelectionRange(n+1,n+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar?.dispose(),super.dispose()}},mM=class extends pM{constructor(e,t,n){let r=D(23,` or {0} for history`,``),i=D(24,` ({0} for history)`,``);super(e,t,n),this._onDidFocus=this._register(new E),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new E),this.onDidBlur=this._onDidBlur.event,this.history=this._register(new lM(n.history,100));let a=()=>{if(n.showHistoryHint&&n.showHistoryHint()&&!this.placeholder.endsWith(r)&&!this.placeholder.endsWith(i)&&this.history.getHistory().length){let e=this.placeholder.endsWith(`)`)?r:i,t=this.placeholder+e;n.showPlaceholderOnFocus&&!s_(this.input)?this.placeholder=t:this.setPlaceHolder(t)}};this.observer=new MutationObserver((e,t)=>{e.forEach(e=>{e.target.textContent||a()})}),this.observer.observe(this.input,{attributeFilter:[`class`]}),this.onfocus(this.input,()=>a()),this.onblur(this.input,()=>{let e=e=>{if(this.placeholder.endsWith(e)){let t=this.placeholder.slice(0,this.placeholder.length-e.length);return n.showPlaceholderOnFocus?this.placeholder=t:this.setPlaceHolder(t),!0}else return!1};e(i)||e(r)})}dispose(){super.dispose(),this.observer&&=(this.observer.disconnect(),void 0)}addToHistory(e){this.value&&(e||this.value!==this.getCurrentValue())&&this.history.add(this.value)}prependHistory(e){let t=this.getHistory();this.clearHistory(),e.forEach(e=>{this.history.add(e)}),t.forEach(e=>{this.history.add(e)})}getHistory(){return this.history.getHistory()}isAtFirstInHistory(){return this.history.isFirst()}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&=e===this.value?this.getNextValue():e,this.value=e??``,KC(this.value?this.value:D(25,`Cleared Input`))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&=e===this.value?this.getPreviousValue():e,e&&(this.value=e,KC(this.value))}clearHistory(){this.history.clear()}setPlaceHolder(e){super.setPlaceHolder(e),this.setTooltip(e)}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}},hM={};s(hM);var gM=D(10,`input`),_M=class extends rT{static#e=this.OPTION_CHANGE=`optionChange`;get onDidOptionChange(){return this._onDidOptionChange.event}get onKeyDown(){return this._onKeyDown.event}get onMouseDown(){return this._onMouseDown.event}get onInput(){return this._onInput.event}get onKeyUp(){return this._onKeyUp.event}get onCaseSensitiveKeyDown(){return this._onCaseSensitiveKeyDown.event}get onRegexKeyDown(){return this._onRegexKeyDown.event}constructor(e,t,n){super(),this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalTogglesDisposables=this._register(new Ln),this.additionalToggles=[],this._onDidOptionChange=this._register(new E),this._onKeyDown=this._register(new E),this._onMouseDown=this._register(new E),this._onInput=this._register(new E),this._onKeyUp=this._register(new E),this._onCaseSensitiveKeyDown=this._register(new E),this._onRegexKeyDown=this._register(new E),this._lastHighlightFindOptions=0,this.placeholder=n.placeholder||``,this.validation=n.validation,this.label=n.label||gM,this.showCommonFindToggles=!!n.showCommonFindToggles;let r=n.appendCaseSensitiveLabel||``,i=n.appendWholeWordsLabel||``,a=n.appendRegexLabel||``,o=!!n.flexibleHeight,s=!!n.flexibleWidth,c=n.flexibleMaxHeight;if(this.domNode=v_(`div`),this.domNode.classList.add(`monaco-findInput`),this.inputBox=this._register(new mM(this.domNode,t,{placeholder:this.placeholder||``,ariaLabel:this.label||``,validationOptions:{validation:this.validation},showHistoryHint:n.showHistoryHint,flexibleHeight:o,flexibleWidth:s,flexibleMaxHeight:c,inputBoxStyles:n.inputBoxStyles,history:n.history,actions:n.actions,actionViewItemProvider:n.actionViewItemProvider,hideHoverOnValueChange:n.hideHoverOnValueChange})),this.showCommonFindToggles){let e=n?.hoverLifecycleOptions||{groupId:`find-input`};this.regex=this._register(new $j({appendTitle:a,isChecked:!1,hoverLifecycleOptions:e,...n.toggleStyles})),this._register(this.regex.onChange(e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(e=>{this._onRegexKeyDown.fire(e)})),this.wholeWords=this._register(new Qj({appendTitle:i,isChecked:!1,hoverLifecycleOptions:e,...n.toggleStyles})),this._register(this.wholeWords.onChange(e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new Zj({appendTitle:r,isChecked:!1,hoverLifecycleOptions:e,...n.toggleStyles})),this._register(this.caseSensitive.onChange(e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(e=>{this._onCaseSensitiveKeyDown.fire(e)}));let t=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,e=>{if(e.equals(F.LeftArrow)||e.equals(F.RightArrow)||e.equals(F.Escape)){let n=t.indexOf(i_(this.domNode.ownerDocument));if(n>=0){let r=-1;e.equals(F.RightArrow)?r=(n+1)%t.length:e.equals(F.LeftArrow)&&(r=n===0?t.length-1:n-1),e.equals(F.Escape)?(t[n].blur(),this.inputBox.focus()):r>=0&&t[r].focus(),M_.stop(e,!0)}}})}this.controls=v_(`div`),this.controls.className=`controls`,this.controls.style.display=this.showCommonFindToggles?``:`none`,this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(n?.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),e?.appendChild(this.domNode),this._register(L(this.inputBox.inputElement,`compositionstart`,e=>{this.imeSessionInProgress=!0})),this._register(L(this.inputBox.inputElement,`compositionend`,e=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,e=>this._onKeyDown.fire(e)),this.onkeyup(this.inputBox.inputElement,e=>this._onKeyUp.fire(e)),this.oninput(this.inputBox.inputElement,e=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,e=>this._onMouseDown.fire(e))}get isImeSessionInProgress(){return this.imeSessionInProgress}get onDidChange(){return this.inputBox.onDidChange}layout(e){this.inputBox.layout(),this.updateInputBoxPadding(e.collapsedFindWidget)}enable(){this.domNode.classList.remove(`disabled`),this.inputBox.enable(),this.regex?.enable(),this.wholeWords?.enable(),this.caseSensitive?.enable();for(let e of this.additionalToggles)e.enable()}disable(){this.domNode.classList.add(`disabled`),this.inputBox.disable(),this.regex?.disable(),this.wholeWords?.disable(),this.caseSensitive?.disable();for(let e of this.additionalToggles)e.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}setAdditionalToggles(e){for(let e of this.additionalToggles)e.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.value=new C;for(let t of e??[])this.additionalTogglesDisposables.value.add(t),this.controls.appendChild(t.domNode),this.additionalTogglesDisposables.value.add(t.onChange(e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(t);this.additionalToggles.length>0&&(this.controls.style.display=``),this.updateInputBoxPadding()}setActions(e,t){this.inputBox.setActions(e,t)}updateInputBoxPadding(e=!1){e?this.inputBox.paddingRight=0:this.inputBox.paddingRight=(this.caseSensitive?.width()??0)+(this.wholeWords?.width()??0)+(this.regex?.width()??0)+this.additionalToggles.reduce((e,t)=>e+t.width(),0)}clear(){this.clearValidation(),this.setValue(``),this.focus()}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}onSearchSubmit(){this.inputBox.addToHistory()}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive?.checked??!1}setCaseSensitive(e){this.caseSensitive&&(this.caseSensitive.checked=e)}getWholeWords(){return this.wholeWords?.checked??!1}setWholeWords(e){this.wholeWords&&(this.wholeWords.checked=e)}getRegex(){return this.regex?.checked??!1}setRegex(e){this.regex&&(this.regex.checked=e,this.validate())}focusOnCaseSensitive(){this.caseSensitive?.focus()}focusOnRegex(){this.regex?.focus()}highlightFindOptions(){this.domNode.classList.remove(`highlight-`+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add(`highlight-`+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}clearValidation(){this.inputBox.hideMessage()}},vM;(function(e){e[e.Hidden=0]=`Hidden`,e[e.Visible=1]=`Visible`,e[e.Recurse=2]=`Recurse`})(vM||={});var yM;(function(e){e[e.Expanded=0]=`Expanded`,e[e.Collapsed=1]=`Collapsed`,e[e.PreserveOrExpanded=2]=`PreserveOrExpanded`,e[e.PreserveOrCollapsed=3]=`PreserveOrCollapsed`})(yM||={});var bM;(function(e){e[e.Unknown=0]=`Unknown`,e[e.Twistie=1]=`Twistie`,e[e.Element=2]=`Element`,e[e.Filter=3]=`Filter`})(bM||={});var xM;(function(e){e[e.Down=0]=`Down`,e[e.Up=1]=`Up`})(xM||={});var SM=class extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}},CM=class{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}},wM=class{constructor(e,t,n,r){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=r}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}},TM=class{constructor(e){this.source=e}getElements(){let e=this.source,t=new Int32Array(e.length);for(let n=0,r=e.length;n<r;n++)t[n]=e.charCodeAt(n);return t}};function EM(e,t,n){return new jM(new TM(e),new TM(t)).ComputeDiff(n).changes}var DM=class{static Assert(e,t){if(!e)throw Error(t)}},OM=class{static Copy(e,t,n,r,i){for(let a=0;a<i;a++)n[r+a]=e[t+a]}static Copy2(e,t,n,r,i){for(let a=0;a<i;a++)n[r+a]=e[t+a]}},kM;(function(e){e[e.MaxDifferencesHistory=1447]=`MaxDifferencesHistory`})(kM||={});var AM=class{constructor(){this.m_changes=[],this.m_originalStart=Ca.MAX_SAFE_SMALL_INTEGER,this.m_modifiedStart=Ca.MAX_SAFE_SMALL_INTEGER,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new wM(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=Ca.MAX_SAFE_SMALL_INTEGER,this.m_modifiedStart=Ca.MAX_SAFE_SMALL_INTEGER}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},jM=class e{constructor(t,n,r=null){this.ContinueProcessingPredicate=r,this._originalSequence=t,this._modifiedSequence=n;let[i,a,o]=e._getElements(t),[s,c,l]=e._getElements(n);this._hasStrings=o&&l,this._originalStringElements=i,this._originalElementsOrHash=a,this._modifiedStringElements=s,this._modifiedElementsOrHash=c,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]==`string`}static _getElements(t){let n=t.getElements();if(e._isStringArray(n)){let e=new Int32Array(n.length);for(let t=0,r=n.length;t<r;t++)e[t]=ym(n[t],0);return[n,e,!0]}return n instanceof Int32Array?[[],n,!1]:[[],new Int32Array(n),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]===this._modifiedElementsOrHash[t]?this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0:!1}ElementsAreStrictEqual(t,n){return this.ElementsAreEqual(t,n)?e._getStrictElement(this._originalSequence,t)===e._getStrictElement(this._modifiedSequence,n):!1}static _getStrictElement(e,t){return typeof e.getStrictElement==`function`?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]===this._originalElementsOrHash[t]?this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0:!1}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]===this._modifiedElementsOrHash[t]?this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0:!1}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,n,r,i){let a=[!1],o=this.ComputeDiffRecursive(e,t,n,r,a);return i&&(o=this.PrettifyChanges(o)),{quitEarly:a[0],changes:o}}ComputeDiffRecursive(e,t,n,r,i){for(i[0]=!1;e<=t&&n<=r&&this.ElementsAreEqual(e,n);)e++,n++;for(;t>=e&&r>=n&&this.ElementsAreEqual(t,r);)t--,r--;if(e>t||n>r){let i;return n<=r?(DM.Assert(e===t+1,`originalStart should only be one more than originalEnd`),i=[new wM(e,0,n,r-n+1)]):e<=t?(DM.Assert(n===r+1,`modifiedStart should only be one more than modifiedEnd`),i=[new wM(e,t-e+1,n,0)]):(DM.Assert(e===t+1,`originalStart should only be one more than originalEnd`),DM.Assert(n===r+1,`modifiedStart should only be one more than modifiedEnd`),i=[]),i}let a=[0],o=[0],s=this.ComputeRecursionPoint(e,t,n,r,a,o,i),c=a[0],l=o[0];if(s!==null)return s;if(!i[0]){let a=this.ComputeDiffRecursive(e,c,n,l,i),o=[];return o=i[0]?[new wM(c+1,t-(c+1)+1,l+1,r-(l+1)+1)]:this.ComputeDiffRecursive(c+1,t,l+1,r,i),this.ConcatenateChanges(a,o)}return[new wM(e,t-e+1,n,r-n+1)]}WALKTRACE(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_){let v=null,ee=null,te=new AM,ne=t,re=n,ie=f[0]-h[0]-r,ae=Ca.MIN_SAFE_SMALL_INTEGER,oe=this.m_forwardHistory.length-1;do{let t=ie+e;t===ne||t<re&&c[t-1]<c[t+1]?(u=c[t+1],p=u-ie-r,u<ae&&te.MarkNextChange(),ae=u,te.AddModifiedElement(u+1,p),ie=t+1-e):(u=c[t-1]+1,p=u-ie-r,u<ae&&te.MarkNextChange(),ae=u-1,te.AddOriginalElement(u,p+1),ie=t-1-e),oe>=0&&(c=this.m_forwardHistory[oe],e=c[0],ne=1,re=c.length-1)}while(--oe>=-1);if(v=te.getReverseChanges(),_[0]){let e=f[0]+1,t=h[0]+1;if(v!==null&&v.length>0){let n=v[v.length-1];e=Math.max(e,n.getOriginalEnd()),t=Math.max(t,n.getModifiedEnd())}ee=[new wM(e,d-e+1,t,m-t+1)]}else{te=new AM,ne=a,re=o,ie=f[0]-h[0]-s,ae=Ca.MAX_SAFE_SMALL_INTEGER,oe=g?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let e=ie+i;e===ne||e<re&&l[e-1]>=l[e+1]?(u=l[e+1]-1,p=u-ie-s,u>ae&&te.MarkNextChange(),ae=u+1,te.AddOriginalElement(u+1,p+1),ie=e+1-i):(u=l[e-1],p=u-ie-s,u>ae&&te.MarkNextChange(),ae=u,te.AddModifiedElement(u+1,p+1),ie=e-1-i),oe>=0&&(l=this.m_reverseHistory[oe],i=l[0],ne=1,re=l.length-1)}while(--oe>=-1);ee=te.getChanges()}return this.ConcatenateChanges(v,ee)}ComputeRecursionPoint(e,t,n,r,i,a,o){let s=0,c=0,l=0,u=0,d=0,f=0;e--,n--,i[0]=0,a[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let p=t-e+(r-n),m=p+1,h=new Int32Array(m),g=new Int32Array(m),_=r-n,v=t-e,ee=e-n,te=t-r,ne=(v-_)%2==0;h[_]=e,g[v]=t,o[0]=!1;for(let re=1;re<=p/2+1;re++){let p=0,ie=0;l=this.ClipDiagonalBound(_-re,re,_,m),u=this.ClipDiagonalBound(_+re,re,_,m);for(let e=l;e<=u;e+=2){s=e===l||e<u&&h[e-1]<h[e+1]?h[e+1]:h[e-1]+1,c=s-(e-_)-ee;let n=s;for(;s<t&&c<r&&this.ElementsAreEqual(s+1,c+1);)s++,c++;if(h[e]=s,s+c>p+ie&&(p=s,ie=c),!ne&&Math.abs(e-v)<=re-1&&s>=g[e])return i[0]=s,a[0]=c,n<=g[e]&&kM.MaxDifferencesHistory>0&&re<=kM.MaxDifferencesHistory+1?this.WALKTRACE(_,l,u,ee,v,d,f,te,h,g,s,t,i,c,r,a,ne,o):null}let ae=(p-e+(ie-n)-re)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(p,ae))return o[0]=!0,i[0]=p,a[0]=ie,ae>0&&kM.MaxDifferencesHistory>0&&re<=kM.MaxDifferencesHistory+1?this.WALKTRACE(_,l,u,ee,v,d,f,te,h,g,s,t,i,c,r,a,ne,o):(e++,n++,[new wM(e,t-e+1,n,r-n+1)]);d=this.ClipDiagonalBound(v-re,re,v,m),f=this.ClipDiagonalBound(v+re,re,v,m);for(let p=d;p<=f;p+=2){s=p===d||p<f&&g[p-1]>=g[p+1]?g[p+1]-1:g[p-1],c=s-(p-v)-te;let m=s;for(;s>e&&c>n&&this.ElementsAreEqual(s,c);)s--,c--;if(g[p]=s,ne&&Math.abs(p-_)<=re&&s<=h[p])return i[0]=s,a[0]=c,m>=h[p]&&kM.MaxDifferencesHistory>0&&re<=kM.MaxDifferencesHistory+1?this.WALKTRACE(_,l,u,ee,v,d,f,te,h,g,s,t,i,c,r,a,ne,o):null}if(re<=kM.MaxDifferencesHistory){let e=new Int32Array(u-l+2);e[0]=_-l+1,OM.Copy2(h,l,e,1,u-l+1),this.m_forwardHistory.push(e),e=new Int32Array(f-d+2),e[0]=v-d+1,OM.Copy2(g,d,e,1,f-d+1),this.m_reverseHistory.push(e)}}return this.WALKTRACE(_,l,u,ee,v,d,f,te,h,g,s,t,i,c,r,a,ne,o)}PrettifyChanges(e){for(let t=0;t<e.length;t++){let n=e[t],r=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,i=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,a=n.originalLength>0,o=n.modifiedLength>0;for(;n.originalStart+n.originalLength<r&&n.modifiedStart+n.modifiedLength<i&&(!a||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!o||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){let e=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!e)break;n.originalStart++,n.modifiedStart++}let s=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],s)){e[t]=s[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){let n=e[t],r=0,i=0;if(t>0){let n=e[t-1];r=n.originalStart+n.originalLength,i=n.modifiedStart+n.modifiedLength}let a=n.originalLength>0,o=n.modifiedLength>0,s=0,c=this._boundaryScore(n.originalStart,n.originalLength,n.modifiedStart,n.modifiedLength);for(let e=1;;e++){let t=n.originalStart-e,l=n.modifiedStart-e;if(t<r||l<i||a&&!this.OriginalElementsAreEqual(t,t+n.originalLength)||o&&!this.ModifiedElementsAreEqual(l,l+n.modifiedLength))break;let u=(t===r&&l===i?5:0)+this._boundaryScore(t,n.originalLength,l,n.modifiedLength);u>c&&(c=u,s=e)}n.originalStart-=s,n.modifiedStart-=s;let l=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],l)){e[t-1]=l[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,n=e.length;t<n;t++){let n=e[t-1],r=e[t],i=r.originalStart-n.originalStart-n.originalLength,a=n.originalStart,o=r.originalStart+r.originalLength,s=o-a,c=n.modifiedStart,l=r.modifiedStart+r.modifiedLength,u=l-c;if(i<5&&s<20&&u<20){let e=this._findBetterContiguousSequence(a,s,c,u,i);if(e){let[t,a]=e;(t!==n.originalStart+n.originalLength||a!==n.modifiedStart+n.modifiedLength)&&(n.originalLength=t-n.originalStart,n.modifiedLength=a-n.modifiedStart,r.originalStart=t+i,r.modifiedStart=a+i,r.originalLength=o-r.originalStart,r.modifiedLength=l-r.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,n,r,i){if(t<i||r<i)return null;let a=e+t-i+1,o=n+r-i+1,s=0,c=0,l=0;for(let t=e;t<a;t++)for(let e=n;e<o;e++){let n=this._contiguousSequenceScore(t,e,i);n>0&&n>s&&(s=n,c=t,l=e)}return s>0?[c,l]:null}_contiguousSequenceScore(e,t,n){let r=0;for(let i=0;i<n;i++){if(!this.ElementsAreEqual(e+i,t+i))return 0;r+=this._originalStringElements[e+i].length}return r}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){let n=e+t;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){let n=e+t;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}_boundaryScore(e,t,n,r){return(this._OriginalRegionIsBoundary(e,t)?1:0)+(this._ModifiedRegionIsBoundary(n,r)?1:0)}ConcatenateChanges(e,t){let n=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],n)){let r=Array(e.length+t.length-1);return OM.Copy(e,0,r,0,e.length-1),r[e.length-1]=n[0],OM.Copy(t,1,r,e.length,t.length-1),r}else{let n=Array(e.length+t.length);return OM.Copy(e,0,n,0,e.length),OM.Copy(t,0,n,e.length,t.length),n}}ChangesOverlap(e,t,n){if(DM.Assert(e.originalStart<=t.originalStart,`Left change is not less than or equal to right change`),DM.Assert(e.modifiedStart<=t.modifiedStart,`Left change is not less than or equal to right change`),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){let r=e.originalStart,i=e.originalLength,a=e.modifiedStart,o=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(i=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(o=t.modifiedStart+t.modifiedLength-e.modifiedStart),n[0]=new wM(r,i,a,o),!0}else return n[0]=null,!1}ClipDiagonalBound(e,t,n,r){if(e>=0&&e<r)return e;let i=n,a=r-n-1,o=t%2==0;return e<0?o===(i%2==0)?0:1:o===(a%2==0)?r-1:r-2}};new Uint32Array(65536);function MM(e){return!!e&&e.visibility!==void 0}function NM(e){switch(e){case!0:return vM.Visible;case!1:return vM.Hidden;default:return e}}function PM(e){return`collapsible`in e}var FM=class{constructor(e,t,n={}){this.user=e,this.rootRef=[],this.eventBufferer=new lr,this._onDidSpliceModel=new E,this.onDidSpliceModel=this._onDidSpliceModel.event,this._onDidSpliceRenderedNodes=new E,this.onDidSpliceRenderedNodes=this._onDidSpliceRenderedNodes.event,this._onDidChangeCollapseState=new E,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new E,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this.refilterDelayer=new cc(qs),this.collapseByDefault=n.collapseByDefault===void 0?!1:n.collapseByDefault,this.allowNonCollapsibleParents=n.allowNonCollapsibleParents??!1,this.filter=n.filter,this.autoExpandSingleChildren=n.autoExpandSingleChildren===void 0?!1:n.autoExpandSingleChildren,this.root={parent:void 0,element:t,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:vM.Visible,visible:!0,filterData:void 0}}splice(e,t,n=Cn.empty(),r={}){if(e.length===0)throw new SM(this.user,`Invalid tree location`);r.diffIdentityProvider?this.spliceSmart(r.diffIdentityProvider,e,t,n,r):this.spliceSimple(e,t,n,r)}spliceSmart(e,t,n,r=Cn.empty(),i,a=i.diffDepth??0){let{parentNode:o}=this.getParentNodeWithListIndex(t);if(!o.lastDiffIds)return this.spliceSimple(t,n,r,i);let s=[...r],c=t[t.length-1],l=new jM({getElements:()=>o.lastDiffIds},{getElements:()=>[...o.children.slice(0,c),...s,...o.children.slice(c+n)].map(t=>e.getId(t.element).toString())}).ComputeDiff(!1);if(l.quitEarly)return o.lastDiffIds=void 0,this.spliceSimple(t,n,s,i);let u=t.slice(0,-1),d=(t,n,r)=>{if(a>0)for(let o=0;o<r;o++)t--,n--,this.spliceSmart(e,[...u,t,0],2**53-1,s[n].children,i,a-1)},f=Math.min(o.children.length,c+n),p=s.length;for(let e of l.changes.sort((e,t)=>t.originalStart-e.originalStart))d(f,p,f-(e.originalStart+e.originalLength)),f=e.originalStart,p=e.modifiedStart-c,this.spliceSimple([...u,f],e.originalLength,Cn.slice(s,p,p+e.modifiedLength),i);d(f,p,f)}spliceSimple(e,t,n=Cn.empty(),{onDidCreateNode:r,onDidDeleteNode:i,diffIdentityProvider:a}){let{parentNode:o,listIndex:s,revealed:c,visible:l}=this.getParentNodeWithListIndex(e),u=[],d=Cn.map(n,e=>this.createTreeNode(e,o,o.visible?vM.Visible:vM.Hidden,c,u,r)),f=e[e.length-1],p=0;for(let e=f;e>=0&&e<o.children.length;e--){let t=o.children[e];if(t.visible){p=t.visibleChildIndex;break}}let m=[],h=0,g=0;for(let e of d)m.push(e),g+=e.renderNodeCount,e.visible&&(e.visibleChildIndex=p+ h++);let _=Wt(o.children,f,t,m);a?o.lastDiffIds?Wt(o.lastDiffIds,f,t,m.map(e=>a.getId(e.element).toString())):o.lastDiffIds=o.children.map(e=>a.getId(e.element).toString()):o.lastDiffIds=void 0;let v=0;for(let e of _)e.visible&&v++;if(v!==0)for(let e=f+m.length;e<o.children.length;e++){let t=o.children[e];t.visible&&(t.visibleChildIndex-=v)}if(o.visibleChildrenCount+=h-v,_.length>0&&i){let e=t=>{i(t),t.children.forEach(e)};_.forEach(e)}if(c&&l){let e=_.reduce((e,t)=>e+(t.visible?t.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(o,g-e),this._onDidSpliceRenderedNodes.fire({start:s,deleteCount:e,elements:u})}this._onDidSpliceModel.fire({insertedNodes:m,deletedNodes:_});let ee=o;for(;ee;){if(ee.visibility===vM.Recurse){this.refilterDelayer.trigger(()=>this.refilter());break}ee=ee.parent}}rerender(e){if(e.length===0)throw new SM(this.user,`Invalid tree location`);let{node:t,listIndex:n,revealed:r}=this.getTreeNodeWithListIndex(e);t.visible&&r&&this._onDidSpliceRenderedNodes.fire({start:n,deleteCount:1,elements:[t]})}has(e){return this.hasTreeNode(e)}getListIndex(e){let{listIndex:t,visible:n,revealed:r}=this.getTreeNodeWithListIndex(e);return n&&r?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){let n=this.getTreeNode(e);t===void 0&&(t=!n.collapsible);let r={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,r))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,n){let r=this.getTreeNode(e);t===void 0&&(t=!r.collapsed);let i={collapsed:t,recursive:n||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,i))}_setCollapseState(e,t){let{node:n,listIndex:r,revealed:i}=this.getTreeNodeWithListIndex(e),a=this._setListNodeCollapseState(n,r,i,t);if(n!==this.root&&this.autoExpandSingleChildren&&a&&!PM(t)&&n.collapsible&&!n.collapsed&&!t.recursive){let r=-1;for(let e=0;e<n.children.length;e++)if(n.children[e].visible)if(r>-1){r=-1;break}else r=e;r>-1&&this._setCollapseState([...e,r],t)}return a}_setListNodeCollapseState(e,t,n,r){let i=this._setNodeCollapseState(e,r,!1);if(!n||!e.visible||!i)return i;let a=e.renderNodeCount,o=this.updateNodeAfterCollapseChange(e),s=a-(t===-1?0:1);return this._onDidSpliceRenderedNodes.fire({start:t+1,deleteCount:s,elements:o.slice(1)}),i}_setNodeCollapseState(e,t,n){let r;if(e===this.root?r=!1:(PM(t)?(r=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(r=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):r=!1,r&&this._onDidChangeCollapseState.fire({node:e,deep:n})),!PM(t)&&t.recursive)for(let n of e.children)r=this._setNodeCollapseState(n,t,!0)||r;return r}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){let e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this._onDidSpliceRenderedNodes.fire({start:0,deleteCount:e,elements:t}),this.refilterDelayer.cancel()}createTreeNode(e,t,n,r,i,a){let o={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible==`boolean`?e.collapsible:e.collapsed!==void 0,collapsed:e.collapsed===void 0?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:vM.Visible,visible:!0,filterData:void 0},s=this._filterNode(o,n);o.visibility=s,r&&i.push(o);let c=e.children||Cn.empty(),l=r&&s!==vM.Hidden&&!o.collapsed,u=0,d=1;for(let e of c){let t=this.createTreeNode(e,o,s,l,i,a);o.children.push(t),d+=t.renderNodeCount,t.visible&&(t.visibleChildIndex=u++)}return this.allowNonCollapsibleParents||(o.collapsible=o.collapsible||o.children.length>0),o.visibleChildrenCount=u,o.visible=s===vM.Recurse?u>0:s===vM.Visible,o.visible?o.collapsed||(o.renderNodeCount=d):(o.renderNodeCount=0,r&&i.pop()),a?.(o),o}updateNodeAfterCollapseChange(e){let t=e.renderNodeCount,n=[];return this._updateNodeAfterCollapseChange(e,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(let n of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(n,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){let t=e.renderNodeCount,n=[];return this._updateNodeAfterFilterChange(e,e.visible?vM.Visible:vM.Hidden,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterFilterChange(e,t,n,r=!0){let i;if(e!==this.root){if(i=this._filterNode(e,t),i===vM.Hidden)return e.visible=!1,e.renderNodeCount=0,!1;r&&n.push(e)}let a=n.length;e.renderNodeCount=e===this.root?0:1;let o=!1;if(!e.collapsed||i!==vM.Hidden){let t=0;for(let a of e.children)o=this._updateNodeAfterFilterChange(a,i,n,r&&!e.collapsed)||o,a.visible&&(a.visibleChildIndex=t++);e.visibleChildrenCount=t}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=i===vM.Recurse?o:i===vM.Visible,e.visibility=i),e.visible?e.collapsed||(e.renderNodeCount+=n.length-a):(e.renderNodeCount=0,r&&n.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){let n=this.filter?this.filter.filter(e.element,t):vM.Visible;return typeof n==`boolean`?(e.filterData=void 0,n?vM.Visible:vM.Hidden):MM(n)?(e.filterData=n.data,NM(n.visibility)):(e.filterData=void 0,NM(n))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;let[n,...r]=e;return n<0||n>t.children.length?!1:this.hasTreeNode(r,t.children[n])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;let[n,...r]=e;if(n<0||n>t.children.length)throw new SM(this.user,`Invalid tree location`);return this.getTreeNode(r,t.children[n])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};let{parentNode:t,listIndex:n,revealed:r,visible:i}=this.getParentNodeWithListIndex(e),a=e[e.length-1];if(a<0||a>t.children.length)throw new SM(this.user,`Invalid tree location`);let o=t.children[a];return{node:o,listIndex:n,revealed:r,visible:i&&o.visible}}getParentNodeWithListIndex(e,t=this.root,n=0,r=!0,i=!0){let[a,...o]=e;if(a<0||a>t.children.length)throw new SM(this.user,`Invalid tree location`);for(let e=0;e<a;e++)n+=t.children[e].renderNodeCount;return r&&=!t.collapsed,i&&=t.visible,o.length===0?{parentNode:t,listIndex:n,revealed:r,visible:i}:this.getParentNodeWithListIndex(o,t.children[a],n+1,r,i)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){let t=[],n=e;for(;n.parent;)t.push(n.parent.children.indexOf(n)),n=n.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:lt(e)[0]}getFirstElementChild(e){let t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}getLastElementAncestor(e=[]){let t=this.getTreeNode(e);if(t.children.length!==0)return this._getLastElementAncestor(t)}_getLastElementAncestor(e){return e.children.length===0?e.element:this._getLastElementAncestor(e.children[e.children.length-1])}};s({});var IM=class extends jT{set context(e){this.data.context=e}get context(){return this.data.context}constructor(e){super(e.elements.map(e=>e.element)),this.data=e}};function LM(e){return e instanceof jT?new IM(e):e}var RM=class{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=w.None,this.disposables=new C}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(e=>e.element),t)}onDragStart(e,t){this.dnd.onDragStart?.(LM(e),t)}onDragOver(e,t,n,r,i,a=!0){let o=this.dnd.onDragOver(LM(e),t&&t.element,n,r,i),s=this.autoExpandNode!==t;if(s&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),t===void 0)return o;if(s&&typeof o!=`boolean`&&o.autoExpand&&(this.autoExpandDisposable=fc(()=>{let e=this.modelProvider(),n=e.getNodeLocation(t);e.isCollapsed(n)&&e.setCollapsed(n,!1),this.autoExpandNode=void 0},500,this.disposables)),typeof o==`boolean`||!o.accept||o.bubble===void 0||o.feedback)return a?o:{accept:typeof o==`boolean`?o:o.accept,effect:typeof o==`boolean`?void 0:o.effect,feedback:[n]};if(o.bubble===xM.Up){let n=this.modelProvider(),a=n.getNodeLocation(t),o=n.getParentNodeLocation(a),s=n.getNode(o),c=o&&n.getListIndex(o);return this.onDragOver(e,s,c,r,i,!1)}let c=this.modelProvider(),l=c.getNodeLocation(t),u=c.getListIndex(l),d=c.getListRenderCount(l);return{...o,feedback:Mt(u,u+d)}}drop(e,t,n,r,i){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(LM(e),t&&t.element,n,r,i)}onDragEnd(e){this.dnd.onDragEnd?.(e)}dispose(){this.disposables.dispose(),this.dnd.dispose()}};function zM(e,t,n){return n&&{...n,identityProvider:n.identityProvider&&{getId(e){return n.identityProvider.getId(e.element)},getGroupId:n.identityProvider.getGroupId?e=>n.identityProvider.getGroupId(e.element):void 0},dnd:n.dnd&&t.add(new RM(e,n.dnd)),multipleSelectionController:n.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return n.multipleSelectionController.isSelectionSingleChangeEvent({...e,element:e.element})},isSelectionRangeChangeEvent(e){return n.multipleSelectionController.isSelectionRangeChangeEvent({...e,element:e.element})}},accessibilityProvider:n.accessibilityProvider&&{...n.accessibilityProvider,getSetSize(t){let n=e(),r=n.getNodeLocation(t),i=n.getParentNodeLocation(r);return n.getNode(i).visibleChildrenCount},getPosInSet(e){return e.visibleChildIndex+1},isChecked:n.accessibilityProvider&&n.accessibilityProvider.isChecked?e=>n.accessibilityProvider.isChecked(e.element):void 0,getRole:n.accessibilityProvider&&n.accessibilityProvider.getRole?e=>n.accessibilityProvider.getRole(e.element):()=>`treeitem`,getAriaLabel(e){return n.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return n.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:n.accessibilityProvider&&n.accessibilityProvider.getWidgetRole?()=>n.accessibilityProvider.getWidgetRole():()=>`tree`,getAriaLevel:n.accessibilityProvider&&n.accessibilityProvider.getAriaLevel?e=>n.accessibilityProvider.getAriaLevel(e.element):e=>e.depth,getActiveDescendantId:n.accessibilityProvider.getActiveDescendantId&&(e=>n.accessibilityProvider.getActiveDescendantId(e.element))},keyboardNavigationLabelProvider:n.keyboardNavigationLabelProvider&&{...n.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(e){return n.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}}}}var BM=class{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){this.delegate.setDynamicHeight?.(e.element,t)}},VM=class e{static lift(t){return t instanceof e?t:new e(t)}static empty(t=0){return new e({focus:[],selection:[],expanded:Object.create(null),scrollTop:t})}constructor(e){if(this.focus=new Set(e.focus),this.selection=new Set(e.selection),e.expanded instanceof Array){this.expanded=Object.create(null);for(let t of e.expanded)this.expanded[t]=1}else this.expanded=e.expanded;this.expanded=e.expanded,this.scrollTop=e.scrollTop}toJSON(){return{focus:Array.from(this.focus),selection:Array.from(this.selection),expanded:this.expanded,scrollTop:this.scrollTop}}},HM;(function(e){e.None=`none`,e.OnHover=`onHover`,e.Always=`always`})(HM||={});var UM=class{get elements(){return this._elements}constructor(e,t=[]){this._elements=t,this.disposables=new C,this.onDidChange=T.forEach(e,e=>this._elements=e,this.disposables)}dispose(){this.disposables.dispose()}},WM=class e{static#e=this.DefaultIndent=8;constructor(t,n,r,i,a,o={}){this.renderer=t,this.model=n,this.activeNodes=i,this.renderedIndentGuides=a,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=e.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=w.None,this.disposables=new C,this.templateId=t.templateId,this.updateOptions(o),T.map(r,e=>e.node)(this.onDidChangeNodeTwistieState,this,this.disposables),t.onDidChangeTwistieState?.(this.onDidChangeTwistieState,this,this.disposables)}updateOptions(t={}){if(t.indent!==void 0){let n=Em(t.indent,0,40);if(n!==this.indent){this.indent=n;for(let[t,n]of this.renderedNodes)n.indentSize=e.DefaultIndent+(t.depth-1)*this.indent,this.renderTreeElement(t,n)}}if(t.renderIndentGuides!==void 0){let e=t.renderIndentGuides!==HM.None;if(e!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=e;for(let[e,t]of this.renderedNodes)this._renderIndentGuides(e,t);if(this.indentGuidesDisposable.dispose(),e){let e=new C;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,e),this.indentGuidesDisposable=e,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}t.hideTwistiesOfChildlessElements!==void 0&&(this.hideTwistiesOfChildlessElements=t.hideTwistiesOfChildlessElements),t.twistieAdditionalCssClass!==void 0&&(this.twistieAdditionalCssClass=t.twistieAdditionalCssClass)}renderTemplate(e){let t=z(e,B(`.monaco-tl-row`)),n=z(t,B(`.monaco-tl-indent`)),r=z(t,B(`.monaco-tl-twistie`)),i=z(t,B(`.monaco-tl-contents`)),a=this.renderer.renderTemplate(i);return{container:e,indent:n,twistie:r,indentGuidesDisposable:w.None,indentSize:0,templateData:a}}renderElement(t,n,r,i){r.indentSize=e.DefaultIndent+(t.depth-1)*this.indent,this.renderedNodes.set(t,r),this.renderedElements.set(t.element,t),this.renderTreeElement(t,r),this.renderer.renderElement(t,n,r.templateData,{...i,indent:r.indentSize})}disposeElement(e,t,n,r){n.indentGuidesDisposable.dispose(),this.renderer.disposeElement?.(e,t,n.templateData,{...r,indent:n.indentSize}),typeof r?.height==`number`&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){let t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){let t=this.renderedNodes.get(e);t&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(e,t))}renderTreeElement(e,t){t.twistie.className=t.twistie.classList.item(0),t.twistie.style.paddingLeft=`${t.indentSize}px`,t.indent.style.width=`${t.indentSize+this.indent-16}px`,e.collapsible?t.container.setAttribute(`aria-expanded`,String(!e.collapsed)):t.container.removeAttribute(`aria-expanded`),t.twistie.classList.remove(...lC.asClassNameArray(x.treeItemExpanded));let n=!1;if(this.renderer.renderTwistie&&(n=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(n||t.twistie.classList.add(...lC.asClassNameArray(x.treeItemExpanded)),t.twistie.classList.add(`collapsible`),t.twistie.classList.toggle(`collapsed`,e.collapsed)):t.twistie.classList.remove(`collapsible`,`collapsed`),this.twistieAdditionalCssClass){let n=this.twistieAdditionalCssClass(e.element);n&&t.twistie.classList.add(n)}this._renderIndentGuides(e,t)}_renderIndentGuides(e,t){if(og(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;let n=new C;for(;;){let r=this.model.getNodeLocation(e),i=this.model.getParentNodeLocation(r);if(!i)break;let a=this.model.getNode(i),o=B(`.indent-guide`,{style:`width: ${this.indent}px`});this.activeIndentNodes.has(a)&&o.classList.add(`active`),t.indent.childElementCount===0?t.indent.appendChild(o):t.indent.insertBefore(o,t.indent.firstElementChild),this.renderedIndentGuides.add(a,o),n.add(S(()=>this.renderedIndentGuides.delete(a,o))),e=a}t.indentGuidesDisposable=n}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;let t=new Set;e.forEach(e=>{let n=this.model.getNodeLocation(e);try{let r=this.model.getParentNodeLocation(n);e.collapsible&&e.children.length>0&&!e.collapsed?t.add(e):r&&t.add(this.model.getNode(r))}catch{}}),this.activeIndentNodes.forEach(e=>{t.has(e)||this.renderedIndentGuides.forEach(e,e=>e.classList.remove(`active`))}),t.forEach(e=>{this.activeIndentNodes.has(e)||this.renderedIndentGuides.forEach(e,e=>e.classList.add(`active`))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),Nn(this.disposables)}};function GM(e,t){let n=t.toLowerCase().indexOf(e),r;if(n>-1){r=[2**53-1,0];for(let t=e.length;t>0;t--)r.push(n+t-1)}return r}var KM=class{get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}set findMatchType(e){this._findMatchType=e}get findMatchType(){return this._findMatchType}set findMode(e){this._findMode=e}get findMode(){return this._findMode}set pattern(e){this._pattern=e,this._lowercasePattern=e.toLowerCase()}constructor(e,t,n){this._keyboardNavigationLabelProvider=e,this._filter=t,this._defaultFindVisibility=n,this._totalCount=0,this._matchCount=0,this._findMatchType=ZM.Fuzzy,this._findMode=XM.Highlight,this._pattern=``,this._lowercasePattern=``,this.disposables=new C}filter(e,t){let n=vM.Visible;if(this._filter){let r=this._filter.filter(e,t);if(n=typeof r==`boolean`?r?vM.Visible:vM.Hidden:MM(r)?NM(r.visibility):r,n===vM.Hidden)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:Uw.Default,visibility:n};let r=this._keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),i=Array.isArray(r)?r:[r];for(let e of i){let t=e&&e.toString();if(t===void 0)return{data:Uw.Default,visibility:n};let r;if(r=this._findMatchType===ZM.Contiguous?GM(this._lowercasePattern,t.toLowerCase()):Gw(this._pattern,this._lowercasePattern,0,t,t.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0}),r)return this._matchCount++,i.length===1?{data:r,visibility:n}:{data:{label:t,score:r},visibility:n}}return this._findMode===XM.Filter?typeof this._defaultFindVisibility==`number`?this._defaultFindVisibility:this._defaultFindVisibility?this._defaultFindVisibility(e):vM.Recurse:{data:Uw.Default,visibility:n}}reset(){this._totalCount=0,this._matchCount=0}dispose(){Nn(this.disposables)}},qM=class extends Hj{constructor(e,t,n){super({icon:e.icon,title:e.title,isChecked:e.isChecked,inputActiveOptionBorder:t.inputActiveOptionBorder,inputActiveOptionForeground:t.inputActiveOptionForeground,inputActiveOptionBackground:t.inputActiveOptionBackground,hoverLifecycleOptions:n}),this.id=e.id}},JM=class{constructor(e){this.stateMap=new Map(e.map(e=>[e.id,{...e}]))}states(){return Array.from(this.stateMap.values())}get(e){let t=this.stateMap.get(e);if(t===void 0)throw Error(`No state found for toggle id ${e}`);return t.isChecked}set(e,t){let n=this.stateMap.get(e);if(n===void 0)throw Error(`No state found for toggle id ${e}`);return n.isChecked===t?!1:(n.isChecked=t,!0)}},YM={inputBoxStyles:fM,toggleStyles:Bj,listFilterWidgetBackground:void 0,listFilterWidgetShadow:void 0},XM;(function(e){e[e.Highlight=0]=`Highlight`,e[e.Filter=1]=`Filter`})(XM||={});var ZM;(function(e){e[e.Fuzzy=0]=`Fuzzy`,e[e.Contiguous=1]=`Contiguous`})(ZM||={});var QM=class extends w{get value(){return this.findInput.inputBox.value}set value(e){this.findInput.inputBox.value=e}constructor(e,t,n,r,i=[],a){super(),this.tree=t,this.elements=sv(`.monaco-tree-type-filter`,[sv(`.monaco-tree-type-filter-input@findInput`),sv(`.monaco-tree-type-filter-actionbar@actionbar`)]),this.toggles=[],this._onDidDisable=new E,this.onDidDisable=this._onDidDisable.event,e.appendChild(this.elements.root),this._register(S(()=>this.elements.root.remove()));let o=a?.styles??YM;o.listFilterWidgetBackground&&(this.elements.root.style.backgroundColor=o.listFilterWidgetBackground),o.listFilterWidgetShadow&&(this.elements.root.style.boxShadow=`0 0 8px 2px ${o.listFilterWidgetShadow}`);let s={groupId:`abstract-tree`};this.toggles=i.map(e=>this._register(new qM(e,o.toggleStyles,s))),this.onDidToggleChange=T.any(...this.toggles.map(e=>T.map(e.onChange,()=>({id:e.id,isChecked:e.checked}))));let c=a?.history||[];this.findInput=this._register(new _M(this.elements.findInput,n,{label:D(32,`Type to search`),placeholder:r,additionalToggles:this.toggles,showCommonFindToggles:!1,inputBoxStyles:o.inputBoxStyles,toggleStyles:o.toggleStyles,history:new Set(c),hoverLifecycleOptions:s})),this.actionbar=this._register(new Fj(this.elements.actionbar));let l=this._register(new IC(this.findInput.inputBox.inputElement,`keydown`)),u=T.chain(l.event,e=>e.map(e=>new vp(e)));this._register(u(e=>{if(e.equals(F.Enter)){e.preventDefault(),e.stopPropagation(),this.findInput.inputBox.addToHistory(),this.tree.domFocus();return}if(e.equals(F.DownArrow)){e.preventDefault(),e.stopPropagation(),this.findInput.inputBox.isAtLastInHistory()||this.findInput.inputBox.isNowhereInHistory()?(this.findInput.inputBox.addToHistory(),this.tree.domFocus()):this.findInput.inputBox.showNextValue();return}if(e.equals(F.UpArrow)){e.preventDefault(),e.stopPropagation(),this.findInput.inputBox.showPreviousValue();return}}));let d=this._register(new Zx(`close`,D(33,`Close`),`codicon codicon-close`,!0,()=>this.dispose()));this.actionbar.push(d,{icon:!0,label:!1}),this.onDidChangeValue=this.findInput.onDidChange}setToggleState(e,t){let n=this.toggles.find(t=>t.id===e);n&&(n.checked=t)}setPlaceHolder(e){this.findInput.inputBox.setPlaceHolder(e)}getHistory(){return this.findInput.inputBox.getHistory()}focus(){this.findInput.focus()}select(){this.findInput.select(),this.findInput.inputBox.addToHistory(!0)}showMessage(e){this.findInput.showMessage(e)}clearMessage(){this.findInput.clearMessage()}async dispose(){this._onDidDisable.fire(),this.elements.root.classList.add(`disabled`),await dc(300),super.dispose()}},$M;(function(e){e.Mode=`mode`,e.MatchType=`matchType`})($M||={});var eN=class{get pattern(){return this._pattern}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.widget?.setPlaceHolder(e)}constructor(e,t,n,r={}){this.tree=e,this.filter=t,this.contextViewProvider=n,this.options=r,this._pattern=``,this.previousPattern=``,this._onDidChangePattern=new E,this.onDidChangePattern=this._onDidChangePattern.event,this._onDidChangeOpenState=new E,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new C,this.disposables=new C,this.toggles=new JM(r.toggles??[]),this._placeholder=r.placeholder??D(32,`Type to search`)}isOpened(){return!!this.widget}open(){if(this.widget){this.widget.focus(),this.widget.select();return}this.tree.updateOptions({paddingTop:30}),this.widget=new QM(this.tree.getHTMLElement(),this.tree,this.contextViewProvider,this.placeholder,this.toggles.states(),{...this.options,history:this._history}),this.enabledDisposables.add(this.widget),this.widget.onDidChangeValue(this.onDidChangeValue,this,this.enabledDisposables),this.widget.onDidDisable(this.close,this,this.enabledDisposables),this.widget.onDidToggleChange(this.onDidToggleChange,this,this.enabledDisposables),this.widget.focus(),this.widget.value=this.previousPattern,this.widget.select(),this._onDidChangeOpenState.fire(!0)}close(){this.widget&&(this.tree.updateOptions({paddingTop:0}),this._history=this.widget.getHistory(),this.widget=void 0,this.enabledDisposables.clear(),this.previousPattern=this.pattern,this.onDidChangeValue(``),this.tree.domFocus(),this._onDidChangeOpenState.fire(!1))}onDidChangeValue(e){this._pattern=e,this._onDidChangePattern.fire(e),this.filter.pattern=e,this.applyPattern(e)}onDidToggleChange(e){this.toggles.set(e.id,e.isChecked)}updateToggleState(e,t){this.toggles.set(e,t),this.widget?.setToggleState(e,t)}renderMessage(e,t){e?this.tree.options.showNotFoundMessage??!0?this.widget?.showMessage({type:dM.WARNING,content:t??D(34,`No results found.`)}):this.widget?.showMessage({type:dM.WARNING}):this.widget?.clearMessage()}alertResults(e){GC(e?D(36,`{0} results`,e):D(35,`No results`))}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}},tN=class extends eN{get mode(){return this.toggles.get($M.Mode)?XM.Filter:XM.Highlight}set mode(e){if(e===this.mode)return;let t=e===XM.Filter;this.updateToggleState($M.Mode,t),this.placeholder=t?D(37,`Type to filter`):D(32,`Type to search`),this.filter.findMode=e,this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e)}get matchType(){return this.toggles.get($M.MatchType)?ZM.Fuzzy:ZM.Contiguous}set matchType(e){e!==this.matchType&&(this.updateToggleState($M.MatchType,e===ZM.Fuzzy),this.filter.findMatchType=e,this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(e))}constructor(e,t,n,r={}){let i=r.defaultFindMode??XM.Highlight,a=r.defaultFindMatchType??ZM.Fuzzy,o=[{id:$M.Mode,icon:x.listFilter,title:D(38,`Filter`),isChecked:i===XM.Filter},{id:$M.MatchType,icon:x.searchFuzzy,title:D(39,`Fuzzy Match`),isChecked:a===ZM.Fuzzy}];t.findMatchType=a,t.findMode=i,super(e,t,n,{...r,toggles:o}),this.filter=t,this._onDidChangeMode=new E,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new E,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this.disposables.add(this.tree.onDidChangeModel(()=>{this.isOpened()&&(this.pattern.length!==0&&this.tree.refilter(),this.render())})),this.disposables.add(this.tree.onWillRefilter(()=>this.filter.reset()))}updateOptions(e={}){e.defaultFindMode!==void 0&&(this.mode=e.defaultFindMode),e.defaultFindMatchType!==void 0&&(this.matchType=e.defaultFindMatchType)}applyPattern(e){this.tree.refilter(),e&&this.tree.focusNext(0,!0,void 0,e=>!Uw.isDefault(e.filterData));let t=this.tree.getFocus();if(t.length>0){let e=t[0];this.tree.getRelativeTop(e)===null&&this.tree.reveal(e,.5)}this.render()}shouldAllowFocus(e){return!this.isOpened()||!this.pattern||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!Uw.isDefault(e.filterData)}onDidToggleChange(e){e.id===$M.Mode?this.mode=e.isChecked?XM.Filter:XM.Highlight:e.id===$M.MatchType&&(this.matchType=e.isChecked?ZM.Fuzzy:ZM.Contiguous)}render(){let e=this.filter.matchCount===0&&this.filter.totalCount>0&&this.pattern.length>0;this.renderMessage(e),this.pattern.length&&this.alertResults(this.filter.matchCount)}};function nN(e,t){return e.position===t.position&&rN(e,t)}function rN(e,t){return e.node.element===t.node.element&&e.startIndex===t.startIndex&&e.height===t.height&&e.endIndex===t.endIndex}var iN=class{constructor(e=[]){this.stickyNodes=e}get count(){return this.stickyNodes.length}equal(e){return ut(this.stickyNodes,e.stickyNodes,nN)}contains(e){return this.stickyNodes.some(t=>t.node.element===e.element)}lastNodePartiallyVisible(){if(this.count===0)return!1;let e=this.stickyNodes[this.count-1];if(this.count===1)return e.position!==0;let t=this.stickyNodes[this.count-2];return t.position+t.height!==e.position}animationStateChanged(e){if(!ut(this.stickyNodes,e.stickyNodes,rN)||this.count===0)return!1;let t=this.stickyNodes[this.count-1],n=e.stickyNodes[e.count-1];return t.position!==n.position}},aN=class{constrainStickyScrollNodes(e,t,n){for(let r=0;r<e.length;r++){let i=e[r];if(i.position+i.height>n||r>=t)return e.slice(0,r)}return e}},oN=class extends w{constructor(e,t,n,r,i,a={}){super(),this.tree=e,this.model=t,this.view=n,this.treeDelegate=i,this.maxWidgetViewRatio=.4,this.stickyScrollMaxItemCount=this.validateStickySettings(a).stickyScrollMaxItemCount,this.stickyScrollDelegate=a.stickyScrollDelegate??new aN,this.paddingTop=a.paddingTop??0,this._widget=this._register(new sN(n.getScrollableElement(),n,e,r,i,a.accessibilityProvider)),this.onDidChangeHasFocus=this._widget.onDidChangeHasFocus,this.onContextMenu=this._widget.onContextMenu,this._register(n.onDidScroll(()=>this.update())),this._register(n.onDidChangeContentHeight(()=>this.update())),this._register(e.onDidChangeCollapseState(()=>this.update())),this._register(t.onDidSpliceRenderedNodes(e=>{let t=this._widget.state;if(t){if(e.deleteCount>0&&t.stickyNodes.some(e=>!this.model.has(this.model.getNodeLocation(e.node)))){this.update();return}t.stickyNodes.some(n=>{let r=this.model.getListIndex(this.model.getNodeLocation(n.node));return r>=e.start&&r<e.start+e.deleteCount&&t.contains(n.node)})&&this._widget.rerender()}})),this.update()}get height(){return this._widget.height}get count(){return this._widget.count}getNode(e){return this._widget.getNode(e)}getNodeAtHeight(e){let t;if(t=e===0?this.view.firstVisibleIndex:this.view.indexAt(e+this.view.scrollTop),!(t<0||t>=this.view.length))return this.view.element(t)}update(){let e=this.getNodeAtHeight(this.paddingTop);if(!e||this.tree.scrollTop<=this.paddingTop){this._widget.setState(void 0);return}let t=this.findStickyState(e);this._widget.setState(t)}findStickyState(e){let t=[],n=e,r=0,i=this.getNextStickyNode(n,void 0,r);for(;i&&(t.push(i),r+=i.height,!(t.length<=this.stickyScrollMaxItemCount&&(n=this.getNextVisibleNode(i),!n)));)i=this.getNextStickyNode(n,i.node,r);let a=this.constrainStickyNodes(t);return a.length?new iN(a):void 0}getNextVisibleNode(e){return this.getNodeAtHeight(e.position+e.height)}getNextStickyNode(e,t,n){let r=this.getAncestorUnderPrevious(e,t);if(r&&!(r===e&&(!this.nodeIsUncollapsedParent(e)||this.nodeTopAlignsWithStickyNodesBottom(e,n))))return this.createStickyScrollNode(r,n)}nodeTopAlignsWithStickyNodesBottom(e,t){let n=this.getNodeIndex(e),r=this.view.getElementTop(n),i=t;return this.view.scrollTop===r-i}createStickyScrollNode(e,t){let n=this.treeDelegate.getHeight(e),{startIndex:r,endIndex:i}=this.getNodeRange(e);return{node:e,position:this.calculateStickyNodePosition(i,t,n),height:n,startIndex:r,endIndex:i}}getAncestorUnderPrevious(e,t=void 0){let n=e,r=this.getParentNode(n);for(;r;){if(r===t)return n;n=r,r=this.getParentNode(n)}if(t===void 0)return n}calculateStickyNodePosition(e,t,n){let r=this.view.getRelativeTop(e);if(r===null&&this.view.firstVisibleIndex===e&&e+1<this.view.length){let t=this.treeDelegate.getHeight(this.view.element(e)),n=this.view.getRelativeTop(e+1);r=n?n-t/this.view.renderHeight:null}if(r===null)return t;let i=this.view.element(e),a=this.treeDelegate.getHeight(i),o=r*this.view.renderHeight+a;return t+n>o&&t<=o?o-n:t}constrainStickyNodes(e){if(e.length===0)return[];let t=this.view.renderHeight*this.maxWidgetViewRatio,n=e[e.length-1];if(e.length<=this.stickyScrollMaxItemCount&&n.position+n.height<=t)return e;let r=this.stickyScrollDelegate.constrainStickyScrollNodes(e,this.stickyScrollMaxItemCount,t);if(!r.length)return[];let i=r[r.length-1];if(r.length>this.stickyScrollMaxItemCount||i.position+i.height>t)throw Error(`stickyScrollDelegate violates constraints`);return r}getParentNode(e){let t=this.model.getNodeLocation(e),n=this.model.getParentNodeLocation(t);return n?this.model.getNode(n):void 0}nodeIsUncollapsedParent(e){let t=this.model.getNodeLocation(e);return this.model.getListRenderCount(t)>1}getNodeIndex(e){let t=this.model.getNodeLocation(e);return this.model.getListIndex(t)}getNodeRange(e){let t=this.model.getNodeLocation(e),n=this.model.getListIndex(t);if(n<0)throw Error(`Node not found in tree`);return{startIndex:n,endIndex:n+this.model.getListRenderCount(t)-1}}nodePositionTopBelowWidget(e){let t=[],n=this.getParentNode(e);for(;n;)t.push(n),n=this.getParentNode(n);let r=0;for(let e=0;e<t.length&&e<this.stickyScrollMaxItemCount;e++)r+=this.treeDelegate.getHeight(t[e]);return r}getFocus(){return this._widget.getFocus()}domFocus(){this._widget.domFocus()}focusedLast(){return this._widget.focusedLast()}updateOptions(e={}){if(e.paddingTop!==void 0&&(this.paddingTop=e.paddingTop),e.stickyScrollMaxItemCount!==void 0){let t=this.validateStickySettings(e);this.stickyScrollMaxItemCount!==t.stickyScrollMaxItemCount&&(this.stickyScrollMaxItemCount=t.stickyScrollMaxItemCount,this.update())}}validateStickySettings(e){let t=7;return typeof e.stickyScrollMaxItemCount==`number`&&(t=Math.max(e.stickyScrollMaxItemCount,1)),{stickyScrollMaxItemCount:t}}},sN=class{get state(){return this._previousState}constructor(e,t,n,r,i,a){this.view=t,this.tree=n,this.treeRenderers=r,this.treeDelegate=i,this.accessibilityProvider=a,this._previousElements=[],this._previousStateDisposables=new C,this._rootDomNode=B(`.monaco-tree-sticky-container.empty`),e.appendChild(this._rootDomNode);let o=B(`.monaco-tree-sticky-container-shadow`);this._rootDomNode.appendChild(o),this.stickyScrollFocus=new cN(this._rootDomNode,t),this.onDidChangeHasFocus=this.stickyScrollFocus.onDidChangeHasFocus,this.onContextMenu=this.stickyScrollFocus.onContextMenu}get height(){if(!this._previousState)return 0;let e=this._previousState.stickyNodes[this._previousState.count-1];return e.position+e.height}get count(){return this._previousState?.count??0}getNode(e){return this._previousState?.stickyNodes.find(t=>t.node===e)}setState(e){let t=!!this._previousState&&this._previousState.count>0,n=!!e&&e.count>0;if(!t&&!n||t&&n&&this._previousState.equal(e))return;if(t!==n&&this.setVisible(n),!n){this._previousState=void 0,this._previousElements=[],this._previousStateDisposables.clear();return}let r=e.stickyNodes[e.count-1];this._previousState&&e.animationStateChanged(this._previousState)?this._previousElements[this._previousState.count-1].style.top=`${r.position}px`:this.renderState(e),this._previousState=e,this._rootDomNode.style.height=`${r.position+r.height}px`}renderState(e){this._previousStateDisposables.clear();let t=Array(e.count);for(let n=e.count-1;n>=0;n--){let r=e.stickyNodes[n],{element:i,disposable:a}=this.createElement(r,n,e.count);t[n]=i,this._rootDomNode.appendChild(i),this._previousStateDisposables.add(a)}this.stickyScrollFocus.updateElements(t,e),this._previousElements=t}rerender(){this._previousState&&this.renderState(this._previousState)}createElement(e,t,n){let r=e.startIndex,i=v_(`div`);i.style.top=`${e.position}px`,this.tree.options.setRowHeight!==!1&&(i.style.height=`${e.height}px`),this.tree.options.setRowLineHeight!==!1&&(i.style.lineHeight=`${e.height}px`),i.classList.add(`monaco-tree-sticky-row`),i.classList.add(`monaco-list-row`),i.setAttribute(`data-index`,`${r}`),i.setAttribute(`data-parity`,r%2==0?`even`:`odd`),i.setAttribute(`id`,this.view.getElementID(r));let a=this.setAccessibilityAttributes(i,e.node.element,t,n),o=this.treeDelegate.getTemplateId(e.node),s=this.treeRenderers.find(e=>e.templateId===o);if(!s)throw Error(`No renderer found for template id ${o}`);let c=e.node;c===this.tree.getNode(this.tree.getNodeLocation(e.node))&&(c=new Proxy(e.node,{}));let l=s.renderTemplate(i);return s.renderElement(c,e.startIndex,l,{height:e.height}),{element:i,disposable:S(()=>{a.dispose(),s.disposeElement(c,e.startIndex,l,{height:e.height}),s.disposeTemplate(l),i.remove()})}}setAccessibilityAttributes(e,t,n,r){if(!this.accessibilityProvider)return w.None;this.accessibilityProvider.getSetSize&&e.setAttribute(`aria-setsize`,String(this.accessibilityProvider.getSetSize(t,n,r))),this.accessibilityProvider.getPosInSet&&e.setAttribute(`aria-posinset`,String(this.accessibilityProvider.getPosInSet(t,n))),this.accessibilityProvider.getRole&&e.setAttribute(`role`,this.accessibilityProvider.getRole(t)??`treeitem`);let i=this.accessibilityProvider.getAriaLabel(t),a=i&&typeof i!=`string`?i:LT(i),o=bh(t=>{let n=t.readObservable(a);n?e.setAttribute(`aria-label`,n):e.removeAttribute(`aria-label`)});typeof i==`string`||i&&e.setAttribute(`aria-label`,i.get());let s=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(t);return typeof s==`number`&&e.setAttribute(`aria-level`,`${s}`),e.setAttribute(`aria-selected`,`false`),o}setVisible(e){this._rootDomNode.classList.toggle(`empty`,!e),e||this.stickyScrollFocus.updateElements([],void 0)}getFocus(){return this.stickyScrollFocus.getFocus()}domFocus(){this.stickyScrollFocus.domFocus()}focusedLast(){return this.stickyScrollFocus.focusedLast()}dispose(){this.stickyScrollFocus.dispose(),this._previousStateDisposables.dispose(),this._rootDomNode.remove()}},cN=class extends w{get domHasFocus(){return this._domHasFocus}set domHasFocus(e){e!==this._domHasFocus&&(this._onDidChangeHasFocus.fire(e),this._domHasFocus=e)}constructor(e,t){super(),this.container=e,this.view=t,this.focusedIndex=-1,this.elements=[],this._onDidChangeHasFocus=new E,this.onDidChangeHasFocus=this._onDidChangeHasFocus.event,this._onContextMenu=new E,this.onContextMenu=this._onContextMenu.event,this._domHasFocus=!1,this._register(L(this.container,`focus`,()=>this.onFocus())),this._register(L(this.container,`blur`,()=>this.onBlur())),this._register(this.view.onDidFocus(()=>this.toggleStickyScrollFocused(!1))),this._register(this.view.onKeyDown(e=>this.onKeyDown(e))),this._register(this.view.onMouseDown(e=>this.onMouseDown(e))),this._register(this.view.onContextMenu(e=>this.handleContextMenu(e)))}handleContextMenu(e){let t=e.browserEvent.target;if(!JT(t)&&!qT(t)){this.focusedLast()&&this.view.domFocus();return}if(!k_(e.browserEvent)){if(!this.state)throw Error(`Context menu should not be triggered when state is undefined`);let t=this.state.stickyNodes.findIndex(t=>t.node.element===e.element?.element);if(t===-1)throw Error(`Context menu should not be triggered when element is not in sticky scroll widget`);this.container.focus(),this.setFocus(t);return}if(!this.state||this.focusedIndex<0)throw Error(`Context menu key should not be triggered when focus is not in sticky scroll widget`);let n=this.state.stickyNodes[this.focusedIndex].node.element,r=this.elements[this.focusedIndex];this._onContextMenu.fire({element:n,anchor:r,browserEvent:e.browserEvent,isStickyScroll:!0})}onKeyDown(e){if(this.domHasFocus&&this.state){if(e.key===`ArrowUp`)this.setFocusedElement(Math.max(0,this.focusedIndex-1)),e.preventDefault(),e.stopPropagation();else if(e.key===`ArrowDown`||e.key===`ArrowRight`){if(this.focusedIndex>=this.state.count-1){let e=this.state.stickyNodes[this.state.count-1].startIndex+1;this.view.domFocus(),this.view.setFocus([e]),this.scrollNodeUnderWidget(e,this.state)}else this.setFocusedElement(this.focusedIndex+1);e.preventDefault(),e.stopPropagation()}}}onMouseDown(e){let t=e.browserEvent.target;!JT(t)&&!qT(t)||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation())}updateElements(e,t){if(t&&t.count===0)throw Error(`Sticky scroll state must be undefined when there are no sticky nodes`);if(t&&t.count!==e.length)throw Error(`Sticky scroll focus received illigel state`);let n=this.focusedIndex;if(this.removeFocus(),this.elements=e,this.state=t,t){let e=Em(n,0,t.count-1);this.setFocus(e)}else this.domHasFocus&&this.view.domFocus();this.container.tabIndex=t?0:-1}setFocusedElement(e){let t=this.state;if(!t)throw Error(`Cannot set focus when state is undefined`);if(this.setFocus(e),!(e<t.count-1)&&t.lastNodePartiallyVisible()){let n=t.stickyNodes[e];this.scrollNodeUnderWidget(n.endIndex+1,t)}}scrollNodeUnderWidget(e,t){let n=t.stickyNodes[t.count-1],r=t.count>1?t.stickyNodes[t.count-2]:void 0,i=this.view.getElementTop(e),a=r?r.position+r.height+n.height:n.height;this.view.scrollTop=i-a}getFocus(){if(!(!this.state||this.focusedIndex===-1))return this.state.stickyNodes[this.focusedIndex].node.element}domFocus(){if(!this.state)throw Error(`Cannot focus when state is undefined`);this.container.focus()}focusedLast(){return this.state?this.view.getHTMLElement().classList.contains(`sticky-scroll-focused`):!1}removeFocus(){this.focusedIndex!==-1&&(this.toggleElementFocus(this.elements[this.focusedIndex],!1),this.focusedIndex=-1)}setFocus(e){if(0>e)throw Error(`addFocus() can not remove focus`);if(!this.state&&e>=0)throw Error(`Cannot set focus index when state is undefined`);if(this.state&&e>=this.state.count)throw Error(`Cannot set focus index to an index that does not exist`);let t=this.focusedIndex;t>=0&&this.toggleElementFocus(this.elements[t],!1),e>=0&&this.toggleElementFocus(this.elements[e],!0),this.focusedIndex=e}toggleElementFocus(e,t){this.toggleElementActiveFocus(e,t&&this.domHasFocus),this.toggleElementPassiveFocus(e,t)}toggleCurrentElementActiveFocus(e){this.focusedIndex!==-1&&this.toggleElementActiveFocus(this.elements[this.focusedIndex],e)}toggleElementActiveFocus(e,t){e.classList.toggle(`focused`,t)}toggleElementPassiveFocus(e,t){e.classList.toggle(`passive-focused`,t)}toggleStickyScrollFocused(e){this.view.getHTMLElement().classList.toggle(`sticky-scroll-focused`,e)}onFocus(){if(!this.state||this.elements.length===0)throw Error(`Cannot focus when state is undefined or elements are empty`);this.domHasFocus=!0,this.toggleStickyScrollFocused(!0),this.toggleCurrentElementActiveFocus(!0),this.focusedIndex===-1&&this.setFocus(0)}onBlur(){this.domHasFocus=!1,this.toggleCurrentElementActiveFocus(!1)}dispose(){this.toggleStickyScrollFocused(!1),this._onDidChangeHasFocus.fire(!1),super.dispose()}};function lN(e){let t=bM.Unknown;return e_(e.browserEvent.target,`monaco-tl-twistie`,`monaco-tl-row`)?t=bM.Twistie:e_(e.browserEvent.target,`monaco-tl-contents`,`monaco-tl-row`)?t=bM.Element:e_(e.browserEvent.target,`monaco-tree-type-filter`,`monaco-list`)&&(t=bM.Filter),{browserEvent:e.browserEvent,element:e.element?e.element.element:null,target:t}}function uN(e){let t=JT(e.browserEvent.target);return{element:e.element?e.element.element:null,browserEvent:e.browserEvent,anchor:e.anchor,isStickyScroll:t}}function dN(e,t){t(e),e.children.forEach(e=>dN(e,t))}var fN=class{get nodeSet(){return this._nodeSet||=this.createNodeSet(),this._nodeSet}constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new E,this.onDidChange=this._onDidChange.event}set(e,t){!t?.__forceEvent&&ut(this.nodes,e)||this._set(e,!1,t)}_set(e,t,n){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){let e=this;this._onDidChange.fire({get elements(){return e.get()},browserEvent:n})}}get(){return this.elements||=this.nodes.map(e=>e.element),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){let e=this.createNodeSet(),n=t=>e.delete(t);t.forEach(e=>dN(e,n)),this.set([...e.values()]);return}let n=new Set,r=e=>n.add(this.identityProvider.getId(e.element).toString());t.forEach(e=>dN(e,r));let i=new Map,a=e=>i.set(this.identityProvider.getId(e.element).toString(),e);e.forEach(e=>dN(e,a));let o=[];for(let e of this.nodes){let t=this.identityProvider.getId(e.element).toString();if(!n.has(t))o.push(e);else{let e=i.get(t);e&&e.visible&&o.push(e)}}if(this.nodes.length>0&&o.length===0){let e=this.getFirstViewElementWithTrait();e&&o.push(e)}this._set(o,!0)}createNodeSet(){let e=new Set;for(let t of this.nodes)e.add(t);return e}},pN=class extends oE{constructor(e,t,n){super(e),this.tree=t,this.stickyScrollProvider=n}onViewPointer(e){if(YT(e.browserEvent.target)||fv(e.browserEvent.target)||WT(e.browserEvent.target)||e.browserEvent.isHandledByList)return;let t=e.element;if(!t||this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);let n=e.browserEvent.target,r=n.classList.contains(`monaco-tl-twistie`)||n.classList.contains(`monaco-icon-label`)&&n.classList.contains(`folder-icon`)&&e.browserEvent.offsetX<16,i=qT(e.browserEvent.target),a=!1;if(a=i?!0:typeof this.tree.expandOnlyOnTwistieClick==`function`?this.tree.expandOnlyOnTwistieClick(t.element):!!this.tree.expandOnlyOnTwistieClick,i)this.handleStickyScrollMouseEvent(e,t);else if(a&&!r&&e.browserEvent.detail!==2||!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e);if(t.collapsible&&(!i||r)){let n=this.tree.getNodeLocation(t),i=e.browserEvent.altKey;if(this.tree.setFocus([n]),this.tree.toggleCollapsed(n,i),r){e.browserEvent.isHandledByList=!0;return}}i||super.onViewPointer(e)}handleStickyScrollMouseEvent(e,t){if(GT(e.browserEvent.target)||KT(e.browserEvent.target))return;let n=this.stickyScrollProvider();if(!n)throw Error(`Sticky scroll controller not found`);let r=this.list.indexOf(t),i=this.list.getElementTop(r),a=n.nodePositionTopBelowWidget(t);this.tree.scrollTop=i-a,this.list.domFocus(),this.list.setFocus([r]),this.list.setSelection([r])}onDoubleClick(e){e.browserEvent.target.classList.contains(`monaco-tl-twistie`)||!this.tree.expandOnDoubleClick||e.browserEvent.isHandledByList||super.onDoubleClick(e)}onMouseDown(e){let t=e.browserEvent.target;if(!JT(t)&&!qT(t)){super.onMouseDown(e);return}}onContextMenu(e){let t=e.browserEvent.target;if(!JT(t)&&!qT(t)){super.onContextMenu(e);return}}},mN=class extends _E{constructor(e,t,n,r,i,a,o,s){super(e,t,n,r,s),this.focusTrait=i,this.selectionTrait=a,this.anchorTrait=o}createMouseController(e){return new pN(this,e.tree,e.stickyScrollProvider)}splice(e,t,n=[]){if(super.splice(e,t,n),n.length===0)return;let r=[],i=[],a;n.forEach((t,n)=>{this.focusTrait.has(t)&&r.push(e+n),this.selectionTrait.has(t)&&i.push(e+n),this.anchorTrait.has(t)&&(a=e+n)}),r.length>0&&super.setFocus(kt([...super.getFocus(),...r])),i.length>0&&super.setSelection(kt([...super.getSelection(),...i])),typeof a==`number`&&super.setAnchor(a)}setFocus(e,t,n=!1){super.setFocus(e,t),n||this.focusTrait.set(e.map(e=>this.element(e)),t)}setSelection(e,t,n=!1){super.setSelection(e,t),n||this.selectionTrait.set(e.map(e=>this.element(e)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(e===void 0?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}},hN;(function(e){e[e.Tree=0]=`Tree`,e[e.StickyScroll=1]=`StickyScroll`})(hN||={});var gN=class{get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseClick(){return T.map(this.view.onMouseClick,lN)}get onMouseDblClick(){return T.filter(T.map(this.view.onMouseDblClick,lN),e=>e.target!==bM.Filter)}get onMouseMiddleClick(){return T.filter(T.map(this.view.onMouseMiddleClick,lN),e=>e.target!==bM.Filter)}get onMouseOver(){return T.map(this.view.onMouseOver,lN)}get onMouseOut(){return T.map(this.view.onMouseOut,lN)}get onContextMenu(){return T.any(T.filter(T.map(this.view.onContextMenu,uN),e=>!e.isStickyScroll),this.stickyScrollController?.onContextMenu??T.None)}get onTap(){return T.map(this.view.onTap,lN)}get onPointer(){return T.map(this.view.onPointer,lN)}get onKeyDown(){return this.view.onKeyDown}get onKeyUp(){return this.view.onKeyUp}get onKeyPress(){return this.view.onKeyPress}get onDidFocus(){return this.view.onDidFocus}get onDidBlur(){return this.view.onDidBlur}get onDidChangeModel(){return T.any(this.onDidChangeModelRelay.event,this.onDidSwapModel.event)}get onDidChangeCollapseState(){return this.onDidChangeCollapseStateRelay.event}get onDidChangeRenderNodeCount(){return this.onDidChangeRenderNodeCountRelay.event}get findMode(){return this.findController?.mode??XM.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get findMatchType(){return this.findController?.matchType??ZM.Fuzzy}set findMatchType(e){this.findController&&(this.findController.matchType=e)}get onDidChangeFindPattern(){return this.findController?this.findController.onDidChangePattern:T.None}get expandOnDoubleClick(){return this._options.expandOnDoubleClick===void 0?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return this._options.expandOnlyOnTwistieClick===void 0?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}constructor(e,t,n,r,i={}){this._user=e,this._options=i,this.eventBufferer=new lr,this.onDidChangeFindOpenState=T.None,this.onDidChangeStickyScrollFocused=T.None,this.disposables=new C,this.onDidSwapModel=this.disposables.add(new E),this.onDidChangeModelRelay=this.disposables.add(new ur),this.onDidSpliceModelRelay=this.disposables.add(new ur),this.onDidChangeCollapseStateRelay=this.disposables.add(new ur),this.onDidChangeRenderNodeCountRelay=this.disposables.add(new ur),this.onDidChangeActiveNodesRelay=this.disposables.add(new ur),this._onWillRefilter=new E,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new E,this.onDidUpdateOptions=this._onDidUpdateOptions.event,this.modelDisposables=new C,i.keyboardNavigationLabelProvider&&(i.findWidgetEnabled??!0)&&(this.findFilter=new KM(i.keyboardNavigationLabelProvider,i.filter,i.defaultFindVisibility),i={...i,filter:this.findFilter},this.disposables.add(this.findFilter)),this.model=this.createModel(e,i),this.treeDelegate=new BM(n);let a=this.disposables.add(new UM(this.onDidChangeActiveNodesRelay.event)),o=new bn;this.renderers=r.map(e=>new WM(e,this.model,this.onDidChangeCollapseStateRelay.event,a,o,i));for(let e of this.renderers)this.disposables.add(e);if(this.focus=new fN(()=>this.view.getFocusedElements()[0],i.identityProvider),this.selection=new fN(()=>this.view.getSelectedElements()[0],i.identityProvider),this.anchor=new fN(()=>this.view.getAnchorElement(),i.identityProvider),this.view=new mN(e,t,this.treeDelegate,this.renderers,this.focus,this.selection,this.anchor,{...zM(()=>this.model,this.disposables,i),tree:this,stickyScrollProvider:()=>this.stickyScrollController}),this.setupModel(this.model),i.keyboardSupport!==!1){let e=T.chain(this.view.onKeyDown,e=>e.filter(e=>!fv(e.target)).map(e=>new vp(e)));T.chain(e,e=>e.filter(e=>e.keyCode===F.LeftArrow))(this.onLeftArrow,this,this.disposables),T.chain(e,e=>e.filter(e=>e.keyCode===F.RightArrow))(this.onRightArrow,this,this.disposables),T.chain(e,e=>e.filter(e=>e.keyCode===F.Space))(this.onSpace,this,this.disposables)}if((i.findWidgetEnabled??!0)&&i.keyboardNavigationLabelProvider&&i.contextViewProvider){let e={styles:i.findWidgetStyles,defaultFindMode:i.defaultFindMode,defaultFindMatchType:i.defaultFindMatchType,showNotFoundMessage:i.showNotFoundMessage};this.findController=this.disposables.add(new tN(this,this.findFilter,i.contextViewProvider,e)),this.focusNavigationFilter=e=>this.findController.shouldAllowFocus(e),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=T.None,this.onDidChangeFindMatchType=T.None;i.enableStickyScroll&&(this.stickyScrollController=new oN(this,this.model,this.view,this.renderers,this.treeDelegate,i),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus),this.styleElement=xC(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle(`always`,this._options.renderIndentGuides===HM.Always)}updateOptions(e={}){this._options={...this._options,...e};for(let t of this.renderers)t.updateOptions(e);this.view.updateOptions(this._options),this.findController?.updateOptions(e),this.updateStickyScroll(e),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle(`always`,this._options.renderIndentGuides===HM.Always)}get options(){return this._options}updateStickyScroll(e){!this.stickyScrollController&&this._options.enableStickyScroll?(this.stickyScrollController=new oN(this,this.model,this.view,this.renderers,this.treeDelegate,this._options),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus):this.stickyScrollController&&!this._options.enableStickyScroll&&(this.onDidChangeStickyScrollFocused=T.None,this.stickyScrollController.dispose(),this.stickyScrollController=void 0),this.stickyScrollController?.updateOptions(e)}updateWidth(e){let t=this.model.getListIndex(e);t!==-1&&this.view.updateWidth(t)}getHTMLElement(){return this.view.getHTMLElement()}get contentHeight(){return this.view.contentHeight}get contentWidth(){return this.view.contentWidth}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get onDidChangeContentWidth(){return this.view.onDidChangeContentWidth}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}get scrollLeft(){return this.view.scrollLeft}set scrollLeft(e){this.view.scrollLeft=e}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleElement(){let e=this.view.firstVisibleIndex;if(this.stickyScrollController&&(e+=this.stickyScrollController.count),!(e<0||e>=this.view.length))return this.view.element(e).element}get lastVisibleElement(){let e=this.view.lastVisibleIndex;return this.view.element(e).element}get ariaLabel(){return this.view.ariaLabel}set ariaLabel(e){this.view.ariaLabel=e}get selectionSize(){return this.selection.getNodes().length}domFocus(){this.stickyScrollController?.focusedLast()?this.stickyScrollController.domFocus():this.view.domFocus()}isDOMFocused(){return s_(this.getHTMLElement())}layout(e,t){this.view.layout(e,t)}style(e){let t=`.${this.view.domId}`,n=[];e.treeIndentGuidesStroke&&(n.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { opacity: 1; border-color: ${e.treeInactiveIndentGuidesStroke}; }`),n.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { opacity: 1; border-color: ${e.treeIndentGuidesStroke}; }`));let r=e.treeStickyScrollBackground??e.listBackground;r&&(n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ${r}; }`),n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ${r}; }`)),e.treeStickyScrollBorder&&n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { border-bottom: 1px solid ${e.treeStickyScrollBorder}; }`),e.treeStickyScrollShadow&&n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-container-shadow { box-shadow: ${e.treeStickyScrollShadow} 0 6px 6px -6px inset; height: 3px; }`),e.listFocusForeground&&(n.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),n.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }`));let i=kC(e.listFocusAndSelectionOutline,kC(e.listSelectionOutline,e.listFocusOutline??``));i&&(n.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ${i}; outline-offset: -1px;}`),n.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}`)),e.listFocusOutline&&(n.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),n.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }`),n.push(`.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.passive-focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),n.push(`.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`),n.push(`.context-menu-visible .monaco-list${t}.last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`)),this.styleElement.textContent=n.join(`
`),this.view.style(e)}getParentElement(e){let t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}getNodeLocation(e){return this.model.getNodeLocation(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}toggleCollapsed(e,t=!1){return this.model.setCollapsed(e,void 0,t)}expandAll(){this.model.setCollapsed(this.model.rootRef,!1,!0)}collapseAll(){this.model.setCollapsed(this.model.rootRef,!0,!0)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}expandTo(e){this.model.expandTo(e)}triggerTypeNavigation(){this.view.triggerTypeNavigation()}openFind(){this.findController?.open()}closeFind(){this.findController?.close()}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setAnchor(e){if(e===void 0)return this.view.setAnchor(void 0);this.eventBufferer.bufferEvents(()=>{let t=this.model.getNode(e);this.anchor.set([t]);let n=this.model.getListIndex(e);n>-1&&this.view.setAnchor(n,!0)})}getAnchor(){return this.anchor.get().at(0)}setSelection(e,t){this.eventBufferer.bufferEvents(()=>{let n=e.map(e=>this.model.getNode(e));this.selection.set(n,t);let r=e.map(e=>this.model.getListIndex(e)).filter(e=>e>-1);this.view.setSelection(r,t,!0)})}getSelection(){return this.selection.get()}setFocus(e,t){this.eventBufferer.bufferEvents(()=>{let n=e.map(e=>this.model.getNode(e));this.focus.set(n,t);let r=e.map(e=>this.model.getListIndex(e)).filter(e=>e>-1);this.view.setFocus(r,t,!0)})}focusNext(e=1,t=!1,n,r=k_(n)&&n.altKey?void 0:this.focusNavigationFilter){this.view.focusNext(e,t,n,r)}focusPrevious(e=1,t=!1,n,r=k_(n)&&n.altKey?void 0:this.focusNavigationFilter){this.view.focusPrevious(e,t,n,r)}focusNextPage(e,t=k_(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusNextPage(e,t)}focusPreviousPage(e,t=k_(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusPreviousPage(e,t,()=>this.stickyScrollController?.height??0)}focusLast(e,t=k_(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusLast(e,t)}focusFirst(e,t=k_(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusFirst(e,t)}getFocus(){return this.focus.get()}getStickyScrollFocus(){let e=this.stickyScrollController?.getFocus();return e===void 0?[]:[e]}getFocusedPart(){return this.stickyScrollController?.focusedLast()?hN.StickyScroll:hN.Tree}reveal(e,t){this.model.expandTo(e);let n=this.model.getListIndex(e);if(n!==-1)if(!this.stickyScrollController)this.view.reveal(n,t);else{let r=this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(e));this.view.reveal(n,t,r)}}getRelativeTop(e){let t=this.model.getListIndex(e);if(t===-1)return null;let n=this.stickyScrollController?.getNode(this.getNode(e));return this.view.getRelativeTop(t,n?.position??this.stickyScrollController?.height)}getViewState(e=this.options.identityProvider){if(!e)throw new SM(this._user,`Can't get tree view state without an identity provider`);let t=t=>e.getId(t).toString(),n=VM.empty(this.scrollTop);for(let e of this.getFocus())n.focus.add(t(e));for(let e of this.getSelection())n.selection.add(t(e));let r=this.model.getNode(),i=[r];for(;i.length>0;){let e=i.pop();e!==r&&e.collapsible&&(n.expanded[t(e.element)]=e.collapsed?0:1),Ut(i,i.length,e.children)}return n}onLeftArrow(e){e.preventDefault(),e.stopPropagation();let t=this.view.getFocusedElements();if(t.length===0)return;let n=t[0],r=this.model.getNodeLocation(n);if(!this.model.setCollapsed(r,!0)){let e=this.model.getParentNodeLocation(r);if(!e)return;let t=this.model.getListIndex(e);this.view.reveal(t),this.view.setFocus([t])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();let t=this.view.getFocusedElements();if(t.length===0)return;let n=t[0],r=this.model.getNodeLocation(n);if(!this.model.setCollapsed(r,!1)){if(!n.children.some(e=>e.visible))return;let[e]=this.view.getFocus(),t=e+1;this.view.reveal(t),this.view.setFocus([t])}}onSpace(e){e.preventDefault(),e.stopPropagation();let t=this.view.getFocusedElements();if(t.length===0)return;let n=t[0],r=this.model.getNodeLocation(n),i=e.browserEvent.altKey;this.model.setCollapsed(r,void 0,i)}setupModel(e){this.modelDisposables.clear(),this.modelDisposables.add(e.onDidSpliceRenderedNodes(({start:e,deleteCount:t,elements:n})=>this.view.splice(e,t,n)));let t=T.forEach(e.onDidSpliceModel,e=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(e),this.selection.onDidModelSplice(e)})},this.modelDisposables);t(()=>null,null,this.modelDisposables);let n=this.modelDisposables.add(new E),r=this.modelDisposables.add(new cc(0));this.modelDisposables.add(T.any(t,this.focus.onDidChange,this.selection.onDidChange)(()=>{r.trigger(()=>{let e=new Set;for(let t of this.focus.getNodes())e.add(t);for(let t of this.selection.getNodes())e.add(t);n.fire([...e.values()])})})),this.onDidChangeActiveNodesRelay.input=n.event,this.onDidChangeModelRelay.input=T.signal(e.onDidSpliceModel),this.onDidChangeCollapseStateRelay.input=e.onDidChangeCollapseState,this.onDidChangeRenderNodeCountRelay.input=e.onDidChangeRenderNodeCount,this.onDidSpliceModelRelay.input=e.onDidSpliceModel,si&&this.modelDisposables.add(e.onDidChangeCollapseState(e=>{let{node:t,deep:n}=e;t.collapsible&&!n&&this.isDOMFocused()&&GC(t.collapsed?D(40,`collapsed`):D(41,`expanded`))}))}navigate(e){return new _N(this.view,this.model,e)}delegateScrollFromMouseWheelEvent(e){this.view.delegateScrollFromMouseWheelEvent(e)}dispose(){Nn(this.disposables),this.stickyScrollController?.dispose(),this.view.dispose(),this.modelDisposables.dispose()}},_N=class{constructor(e,t,n){this.view=e,this.model=t,n?this.index=this.model.getListIndex(n):this.index=-1}current(){return this.index<0||this.index>=this.view.length?null:this.view.element(this.index).element}previous(){return this.index--,this.current()}next(){return this.index++,this.current()}first(){return this.index=0,this.current()}last(){return this.index=this.view.length-1,this.current()}},vN=class{get size(){return this.nodes.size}constructor(e,t={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new FM(e,null,t),this.onDidSpliceModel=this.model.onDidSpliceModel,this.onDidSpliceRenderedNodes=this.model.onDidSpliceRenderedNodes,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,t.sorter&&(this.sorter={compare(e,n){return t.sorter.compare(e.element,n.element)}}),this.identityProvider=t.identityProvider}setChildren(e,t=Cn.empty(),n={}){let r=this.getElementLocation(e);this._setChildren(r,this.preserveCollapseState(t),n)}_setChildren(e,t=Cn.empty(),n){let r=new Set,i=new Set,a=e=>{if(e.element===null)return;let t=e;if(r.add(t.element),this.nodes.set(t.element,t),this.identityProvider){let e=this.identityProvider.getId(t.element).toString();i.add(e),this.nodesByIdentity.set(e,t)}n.onDidCreateNode?.(t)},o=e=>{if(e.element===null)return;let t=e;if(r.has(t.element)||this.nodes.delete(t.element),this.identityProvider){let e=this.identityProvider.getId(t.element).toString();i.has(e)||this.nodesByIdentity.delete(e)}n.onDidDeleteNode?.(t)};this.model.splice([...e,0],Number.MAX_VALUE,t,{...n,onDidCreateNode:a,onDidDeleteNode:o})}preserveCollapseState(e=Cn.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),Cn.map(e,e=>{let t=this.nodes.get(e.element);if(!t&&this.identityProvider){let n=this.identityProvider.getId(e.element).toString();t=this.nodesByIdentity.get(n)}if(!t){let t;return t=e.collapsed===void 0?void 0:e.collapsed===yM.Collapsed||e.collapsed===yM.PreserveOrCollapsed?!0:e.collapsed===yM.Expanded||e.collapsed===yM.PreserveOrExpanded?!1:!!e.collapsed,{...e,children:this.preserveCollapseState(e.children),collapsed:t}}let n=typeof e.collapsible==`boolean`?e.collapsible:t.collapsible,r;return r=e.collapsed===void 0||e.collapsed===yM.PreserveOrCollapsed||e.collapsed===yM.PreserveOrExpanded?t.collapsed:e.collapsed===yM.Collapsed?!0:e.collapsed===yM.Expanded?!1:!!e.collapsed,{...e,collapsible:n,collapsed:r,children:this.preserveCollapseState(e.children)}})}rerender(e){let t=this.getElementLocation(e);this.model.rerender(t)}resort(e=null,t=!0){if(!this.sorter)return;let n=this.getElementLocation(e),r=this.model.getNode(n);this._setChildren(n,this.resortChildren(r,t),{})}resortChildren(e,t,n=!0){let r=[...e.children];return(t||n)&&(r=r.sort(this.sorter.compare.bind(this.sorter))),Cn.map(r,e=>({element:e.element,collapsible:e.collapsible,collapsed:e.collapsed,children:this.resortChildren(e,t,!1)}))}getFirstElementChild(e=null){let t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}getLastElementAncestor(e=null){let t=this.getElementLocation(e);return this.model.getLastElementAncestor(t)}has(e){return this.nodes.has(e)}getListIndex(e){let t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){let t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){let t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){let n=this.getElementLocation(e);return this.model.setCollapsible(n,t)}isCollapsed(e){let t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){let r=this.getElementLocation(e);return this.model.setCollapsed(r,t,n)}expandTo(e){let t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);let t=this.nodes.get(e);if(!t)throw new SM(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new SM(this.user,`Invalid getParentNodeLocation call`);let t=this.nodes.get(e);if(!t)throw new SM(this.user,`Tree element not found: ${e}`);let n=this.model.getNodeLocation(t),r=this.model.getParentNodeLocation(n);return this.model.getNode(r).element}getElementLocation(e){if(e===null)return[];let t=this.nodes.get(e);if(!t)throw new SM(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}};function yN(e){return{element:{elements:[e.element],incompressible:e.incompressible||!1},children:Cn.map(Cn.from(e.children),yN),collapsible:e.collapsible,collapsed:e.collapsed}}function bN(e){let t=[e.element],n=e.incompressible||!1,r,i;for(;[i,r]=Cn.consume(Cn.from(e.children),2),!(i.length!==1||i[0].incompressible);)e=i[0],t.push(e.element);return{element:{elements:t,incompressible:n},children:Cn.map(Cn.concat(i,r),bN),collapsible:e.collapsible,collapsed:e.collapsed}}function xN(e,t=0){let n;return n=t<e.element.elements.length-1?[xN(e,t+1)]:Cn.map(Cn.from(e.children),e=>xN(e,0)),t===0&&e.element.incompressible?{element:e.element.elements[t],children:n,incompressible:!0,collapsible:e.collapsible,collapsed:e.collapsed}:{element:e.element.elements[t],children:n,collapsible:e.collapsible,collapsed:e.collapsed}}function SN(e){return xN(e,0)}function CN(e,t,n){return e.element===t?{...e,children:n}:{...e,children:Cn.map(Cn.from(e.children),e=>CN(e,t,n))}}var wN=e=>({getId(t){return t.elements.map(t=>e.getId(t).toString()).join(`\0`)}}),TN=class{get onDidSpliceRenderedNodes(){return this.model.onDidSpliceRenderedNodes}get onDidSpliceModel(){return this.model.onDidSpliceModel}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}get size(){return this.nodes.size}constructor(e,t={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new vN(e,t),this.enabled=t.compressionEnabled===void 0?!0:t.compressionEnabled,this.identityProvider=t.identityProvider}setChildren(e,t=Cn.empty(),n){let r=n.diffIdentityProvider&&wN(n.diffIdentityProvider);if(e===null){let e=Cn.map(t,this.enabled?bN:yN);this._setChildren(null,e,{diffIdentityProvider:r,diffDepth:1/0});return}let i=this.nodes.get(e);if(!i)throw new SM(this.user,`Unknown compressed tree node`);let a=this.model.getNode(i),o=this.model.getParentNodeLocation(i),s=this.model.getNode(o),c=CN(SN(a),e,t),l=(this.enabled?bN:yN)(c),u=n.diffIdentityProvider?((e,t)=>n.diffIdentityProvider.getId(e)===n.diffIdentityProvider.getId(t)):void 0;if(ut(l.element.elements,a.element.elements,u)){this._setChildren(i,l.children||Cn.empty(),{diffIdentityProvider:r,diffDepth:1});return}let d=s.children.map(e=>e===a?l:e);this._setChildren(s.element,d,{diffIdentityProvider:r,diffDepth:a.depth-s.depth})}isCompressionEnabled(){return this.enabled}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;let t=this.model.getNode().children,n=Cn.map(t,SN),r=Cn.map(n,e?bN:yN);this._setChildren(null,r,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,n){let r=new Set,i=e=>{for(let t of e.element.elements)r.add(t),this.nodes.set(t,e.element)},a=e=>{for(let t of e.element.elements)r.has(t)||this.nodes.delete(t)};this.model.setChildren(e,t,{...n,onDidCreateNode:i,onDidDeleteNode:a})}has(e){return this.nodes.has(e)}getListIndex(e){let t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){let t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(e===void 0)return this.model.getNode();let t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){let t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){let t=this.getCompressedNode(e),n=this.model.getParentNodeLocation(t);return n===null?null:n.elements[n.elements.length-1]}getFirstElementChild(e){let t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}getLastElementAncestor(e){let t=e===void 0?void 0:this.getCompressedNode(e);return this.model.getLastElementAncestor(t)}isCollapsible(e){let t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){let n=this.getCompressedNode(e);return this.model.setCollapsible(n,t)}isCollapsed(e){let t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){let r=this.getCompressedNode(e);return this.model.setCollapsed(r,t,n)}expandTo(e){let t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){let t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}resort(e=null,t=!0){let n=this.getCompressedNode(e);this.model.resort(n,t)}getCompressedNode(e){if(e===null)return null;let t=this.nodes.get(e);if(!t)throw new SM(this.user,`Tree element not found: ${e}`);return t}},EN=e=>e[e.length-1],DN=class e{get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(t=>new e(this.unwrapper,t))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e,t){this.unwrapper=e,this.node=t}};function ON(e,t){return{...t,identityProvider:t.identityProvider&&{getId(n){return t.identityProvider.getId(e(n))}},sorter:t.sorter&&{compare(e,n){return t.sorter.compare(e.elements[0],n.elements[0])}},filter:t.filter&&{filter(e,n){let r=e.elements;for(let e=0;e<r.length-1;e++){let i=t.filter.filter(r[e],n);n=NM(MM(i)?i.visibility:i)}return t.filter.filter(r[r.length-1],n)}}}}var kN=class{get onDidSpliceModel(){return T.map(this.model.onDidSpliceModel,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(e=>this.nodeMapper.map(e)),deletedNodes:t.map(e=>this.nodeMapper.map(e))}))}get onDidSpliceRenderedNodes(){return T.map(this.model.onDidSpliceRenderedNodes,({start:e,deleteCount:t,elements:n})=>({start:e,deleteCount:t,elements:n.map(e=>this.nodeMapper.map(e))}))}get onDidChangeCollapseState(){return T.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return T.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}constructor(e,t={}){this.rootRef=null,this.elementMapper=t.elementMapper||EN;let n=e=>this.elementMapper(e.elements);this.nodeMapper=new CM(e=>new DN(n,e)),this.model=new TN(e,ON(n,t))}setChildren(e,t=Cn.empty(),n={}){this.model.setChildren(e,t,n)}isCompressionEnabled(){return this.model.isCompressionEnabled()}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){let t=this.model.getFirstElementChild(e);return t==null?t:this.elementMapper(t.elements)}getLastElementAncestor(e){let t=this.model.getLastElementAncestor(e);return t==null?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,n){return this.model.setCollapsed(e,t,n)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}resort(e=null,t=!0){return this.model.resort(e,t)}getCompressedTreeNode(e=null){return this.model.getNode(e)}},AN=class extends gN{get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}constructor(e,t,n,r,i={}){super(e,t,n,r,i),this.user=e}setChildren(e,t=Cn.empty(),n){this.model.setChildren(e,t,n)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}updateElementHeight(e,t){let n=this.model.getListIndex(e);n!==-1&&this.view.updateElementHeight(n,t)}resort(e,t=!0){this.model.resort(e,t)}hasElement(e){return this.model.has(e)}createModel(e,t){return new vN(e,t)}},jN=class{get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}constructor(e,t,n){this._compressedTreeNodeProvider=e,this.stickyScrollDelegate=t,this.renderer=n,this.templateId=n.templateId,n.onDidChangeTwistieState&&(this.onDidChangeTwistieState=n.onDidChangeTwistieState)}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,n,r){let i=this.stickyScrollDelegate.getCompressedNode(e);i||=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element),i.element.elements.length===1?(n.compressedTreeNode=void 0,this.renderer.renderElement(e,t,n.data,r)):(n.compressedTreeNode=i,this.renderer.renderCompressedElements(i,t,n.data,r))}disposeElement(e,t,n,r){n.compressedTreeNode?this.renderer.disposeCompressedElements?.(n.compressedTreeNode,t,n.data,r):this.renderer.disposeElement?.(e,t,n.data,r)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?.(e,t)??!1}};jN.__decorator=t([iS],jN.prototype,`compressedTreeNodeProvider`,null);var MN=class{constructor(e){this.modelProvider=e,this.compressedStickyNodes=new Map}getCompressedNode(e){return this.compressedStickyNodes.get(e)}constrainStickyScrollNodes(e,t,n){if(this.compressedStickyNodes.clear(),e.length===0)return[];for(let r=0;r<e.length;r++){let i=e[r],a=i.position+i.height;if(r+1<e.length&&a+e[r+1].height>n||r>=t-1&&t<e.length){let t=e.slice(0,r),n=e.slice(r),i=this.compressStickyNodes(n);return[...t,i]}}return e}compressStickyNodes(e){if(e.length===0)throw Error(`Can't compress empty sticky nodes`);let t=this.modelProvider();if(!t.isCompressionEnabled())return e[0];let n=[];for(let r=0;r<e.length;r++){let i=e[r],a=t.getCompressedTreeNode(i.node.element);if(a.element){if(r!==0&&a.element.incompressible)break;n.push(...a.element.elements)}}if(n.length<2)return e[0];let r=e[e.length-1],i={elements:n,incompressible:!1},a={...r.node,children:[],element:i},o=new Proxy(e[0].node,{}),s={node:o,startIndex:e[0].startIndex,endIndex:r.endIndex,position:e[0].position,height:e[0].height};return this.compressedStickyNodes.set(o,a),s}};function NN(e,t){return t&&{...t,keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(n){let r;try{r=e().getCompressedTreeNode(n)}catch{return t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(n)}return r.element.elements.length===1?t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(n):t.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(r.element.elements)}}}}var PN=class extends AN{constructor(e,t,n,r,i={}){let a=()=>this,o=new MN(()=>this.model),s=r.map(e=>new jN(a,o,e));super(e,t,n,s,{...NN(a,i),stickyScrollDelegate:o})}setChildren(e,t=Cn.empty(),n){this.model.setChildren(e,t,n)}createModel(e,t){return new kN(e,t)}updateOptions(e={}){super.updateOptions(e),e.compressionEnabled!==void 0&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}};function FN(e){return{...e,children:[],refreshPromise:void 0,stale:!0,slow:!1,forceExpanded:!1}}function IN(e,t){return t.parent?t.parent===e?!0:IN(e,t.parent):!1}function LN(e,t){return e===t||IN(e,t)||IN(t,e)}var RN=class e{get element(){return this.node.element.element}get children(){return this.node.children.map(t=>new e(t))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}},zN=class{constructor(e,t,n){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,r){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,r)}renderTwistie(e,t){return e.slow?(t.classList.add(...lC.asClassNameArray(x.treeItemLoading)),!0):(t.classList.remove(...lC.asClassNameArray(x.treeItemLoading)),!1)}disposeElement(e,t,n,r){this.renderer.disposeElement?.(this.nodeMapper.map(e),t,n.templateData,r)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}};function BN(e){return{browserEvent:e.browserEvent,elements:e.elements.map(e=>e.element)}}function VN(e){return{browserEvent:e.browserEvent,element:e.element&&e.element.element,target:e.target}}function HN(e){return{browserEvent:e.browserEvent,element:e.element&&e.element.element,anchor:e.anchor,isStickyScroll:e.isStickyScroll}}var UN=class extends jT{set context(e){this.data.context=e}get context(){return this.data.context}constructor(e){super(e.elements.map(e=>e.element)),this.data=e}};function WN(e){return e instanceof jT?new UN(e):e}var GN=class{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(e=>e.element),t)}onDragStart(e,t){this.dnd.onDragStart?.(WN(e),t)}onDragOver(e,t,n,r,i,a=!0){return this.dnd.onDragOver(WN(e),t&&t.element,n,r,i)}drop(e,t,n,r,i){this.dnd.drop(WN(e),t&&t.element,n,r,i)}onDragEnd(e){this.dnd.onDragEnd?.(e)}dispose(){this.dnd.dispose()}},KN=class extends KM{constructor(e,t,n){super(t,n),this.findProvider=e,this.isFindSessionActive=!1}filter(e,t){let n=super.filter(e,t);return!this.isFindSessionActive||this.findMode===XM.Highlight||!this.findProvider.isVisible?n:NM(MM(n)?n.visibility:n)===vM.Hidden?vM.Hidden:this.findProvider.isVisible(e)?n:vM.Hidden}},qN=class extends tN{constructor(e,t,n,r,i){super(e,n,r,i),this.findProvider=t,this.filter=n,this.activeSession=!1,this.asyncWorkInProgress=!1,this.taskQueue=new lc(250),this.disposables.add(S(async()=>{this.activeSession&&await this.findProvider.endSession?.()}))}applyPattern(e){this.renderMessage(!1),this.activeTokenSource?.cancel(),this.activeTokenSource=new Lr,this.taskQueue.trigger(()=>this.applyPatternAsync())}async applyPatternAsync(){let e=this.activeTokenSource?.token;if(!e||e.isCancellationRequested)return;let t=this.pattern;if(t===``){this.activeSession&&(this.asyncWorkInProgress=!0,await this.deactivateFindSession(),this.asyncWorkInProgress=!1,e.isCancellationRequested||(this.filter.reset(),super.applyPattern(``)));return}this.activeSession||this.activateFindSession(),this.asyncWorkInProgress=!0,this.activeFindMetadata=void 0;let n=await this.findProvider.find(t,{matchType:this.matchType,findMode:this.mode},e);e.isCancellationRequested||n===void 0||(this.asyncWorkInProgress=!1,this.activeFindMetadata=n,this.filter.reset(),super.applyPattern(t),n.warningMessage&&this.renderMessage(!0,n.warningMessage))}activateFindSession(){this.activeSession=!0,this.filter.isFindSessionActive=!0,this.findProvider.startSession?.()}async deactivateFindSession(){this.activeSession=!1,this.filter.isFindSessionActive=!1,await this.findProvider.endSession?.()}render(){if(this.asyncWorkInProgress||!this.activeFindMetadata)return;let e=this.activeFindMetadata.matchCount===0&&this.pattern.length>0;this.renderMessage(e),this.pattern.length&&this.alertResults(this.activeFindMetadata.matchCount)}onDidToggleChange(e){this.toggles.set(e.id,e.isChecked),this.filter.findMode=this.mode,this.filter.findMatchType=this.matchType,this.placeholder=this.mode===XM.Filter?D(42,`Type to filter`):D(43,`Type to search`),this.applyPattern(this.pattern)}shouldAllowFocus(e){return this.shouldFocusWhenNavigating(e)}shouldFocusWhenNavigating(e){if(!this.activeSession||!this.activeFindMetadata)return!0;let t=e.element?.element;return t&&this.activeFindMetadata.isMatch(t)?!0:!Uw.isDefault(e.filterData)}};function JN(e){return e&&{...e,collapseByDefault:!0,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)},getGroupId:e.identityProvider.getGroupId?t=>e.identityProvider.getGroupId(t.element):void 0},dnd:e.dnd&&new GN(e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent({...t,element:t.element})},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent({...t,element:t.element})}},accessibilityProvider:e.accessibilityProvider&&{...e.accessibilityProvider,getPosInSet:void 0,getSetSize:void 0,getRole:e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>`treeitem`,isChecked:e.accessibilityProvider.isChecked?t=>!!e.accessibilityProvider?.isChecked(t.element):void 0,getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>`tree`,getAriaLevel:e.accessibilityProvider.getAriaLevel&&(t=>e.accessibilityProvider.getAriaLevel(t.element)),getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))},filter:e.filter&&{filter(t,n){return e.filter.filter(t.element,n)}},keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}},sorter:void 0,expandOnlyOnTwistieClick:e.expandOnlyOnTwistieClick===void 0?void 0:typeof e.expandOnlyOnTwistieClick==`function`?(t=>e.expandOnlyOnTwistieClick(t.element)):e.expandOnlyOnTwistieClick,twistieAdditionalCssClass:e.twistieAdditionalCssClass===void 0?void 0:(t=>e.twistieAdditionalCssClass(t.element)),defaultFindVisibility:t=>t.hasChildren&&t.stale?vM.Visible:typeof e.defaultFindVisibility==`number`?e.defaultFindVisibility:e.defaultFindVisibility===void 0?vM.Recurse:e.defaultFindVisibility(t.element),stickyScrollDelegate:e.stickyScrollDelegate}}function YN(e,t){t(e),e.children.forEach(e=>YN(e,t))}var XN=class{get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return T.map(this.tree.onDidChangeFocus,BN)}get onDidChangeSelection(){return T.map(this.tree.onDidChangeSelection,BN)}get onKeyDown(){return this.tree.onKeyDown}get onMouseClick(){return T.map(this.tree.onMouseClick,VN)}get onMouseDblClick(){return T.map(this.tree.onMouseDblClick,VN)}get onContextMenu(){return T.map(this.tree.onContextMenu,HN)}get onTap(){return T.map(this.tree.onTap,VN)}get onPointer(){return T.map(this.tree.onPointer,VN)}get onDidFocus(){return this.tree.onDidFocus}get onDidBlur(){return this.tree.onDidBlur}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidUpdateOptions(){return this.tree.onDidUpdateOptions}get onDidChangeStickyScrollFocused(){return this.tree.onDidChangeStickyScrollFocused}get findMode(){return this.findController?this.findController.mode:this.tree.findMode}set findMode(e){this.findController?this.findController.mode=e:this.tree.findMode=e}get findMatchType(){return this.findController?this.findController.matchType:this.tree.findMatchType}set findMatchType(e){this.findController?this.findController.matchType=e:this.tree.findMatchType=e}get expandOnlyOnTwistieClick(){if(typeof this.tree.expandOnlyOnTwistieClick==`boolean`)return this.tree.expandOnlyOnTwistieClick;let e=this.tree.expandOnlyOnTwistieClick;return t=>e(this.nodes.get(t===this.root.element?null:t)||null)}get onDidDispose(){return this.tree.onDidDispose}constructor(e,t,n,r,i,a={}){this.user=e,this.dataSource=i,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new E,this._onDidChangeNodeSlowState=new E,this.nodeMapper=new CM(e=>new RN(e)),this.disposables=new C,this.identityProvider=a.identityProvider,this.autoExpandSingleChildren=a.autoExpandSingleChildren===void 0?!1:a.autoExpandSingleChildren,this.sorter=a.sorter,this.getDefaultCollapseState=e=>a.collapseByDefault?a.collapseByDefault(e)?yM.PreserveOrCollapsed:yM.PreserveOrExpanded:void 0;let o=!1,s;if(a.findProvider&&(a.findWidgetEnabled??!0)&&a.keyboardNavigationLabelProvider&&a.contextViewProvider&&(o=!0,s=new KN(a.findProvider,a.keyboardNavigationLabelProvider,a.filter)),this.tree=this.createTree(e,t,n,r,{...a,findWidgetEnabled:!o,filter:s??a.filter}),this.root=FN({element:void 0,parent:null,hasChildren:!0,defaultCollapseState:void 0}),this.identityProvider&&(this.root={...this.root,id:null}),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables),o){let e={styles:a.findWidgetStyles,showNotFoundMessage:a.showNotFoundMessage,defaultFindMatchType:a.defaultFindMatchType,defaultFindMode:a.defaultFindMode};this.findController=this.disposables.add(new qN(this.tree,a.findProvider,s,this.tree.options.contextViewProvider,e)),this.focusNavigationFilter=e=>this.findController.shouldFocusWhenNavigating(e),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindOpenState=this.tree.onDidChangeFindOpenState,this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.onDidChangeFindMatchType=this.tree.onDidChangeFindMatchType}createTree(e,t,n,r,i){return new AN(e,t,new BM(n),r.map(e=>new zN(e,this.nodeMapper,this._onDidChangeNodeSlowState.event)),JN(i)||{})}updateOptions(e={}){this.findController&&(e.defaultFindMode!==void 0&&(this.findController.mode=e.defaultFindMode),e.defaultFindMatchType!==void 0&&(this.findController.matchType=e.defaultFindMatchType)),this.tree.updateOptions(e)}get options(){return this.tree.options}getHTMLElement(){return this.tree.getHTMLElement()}get contentHeight(){return this.tree.contentHeight}get contentWidth(){return this.tree.contentWidth}get onDidChangeContentHeight(){return this.tree.onDidChangeContentHeight}get onDidChangeContentWidth(){return this.tree.onDidChangeContentWidth}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}get scrollLeft(){return this.tree.scrollLeft}set scrollLeft(e){this.tree.scrollLeft=e}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}get lastVisibleElement(){return this.tree.lastVisibleElement.element}get ariaLabel(){return this.tree.ariaLabel}set ariaLabel(e){this.tree.ariaLabel=e}domFocus(){this.tree.domFocus()}isDOMFocused(){return this.tree.isDOMFocused()}navigate(e){let t;return e&&(t=this.getDataNode(e)),new nP(this.tree.navigate(t))}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}async setInput(e,t){this.cancelAllRefreshPromises(),this.root.element=e;let n=t&&{viewState:t,focus:[],selection:[]};await this._updateChildren(e,!0,!1,n),n&&(this.tree.setFocus(n.focus),this.tree.setSelection(n.selection)),t&&typeof t.scrollTop==`number`&&(this.scrollTop=t.scrollTop)}async updateChildren(e=this.root.element,t=!0,n=!1,r){await this._updateChildren(e,t,n,void 0,r)}cancelAllRefreshPromises(e=!1){this.refreshPromises.forEach(e=>e.cancel()),this.refreshPromises.clear(),e&&(this.subTreeRefreshPromises.forEach(e=>e.cancel()),this.subTreeRefreshPromises.clear())}async _updateChildren(e=this.root.element,t=!0,n=!1,r,i){if(this.root.element===void 0)throw new SM(this.user,`Tree input not set`);this.root.refreshPromise&&(await this.root.refreshPromise,await T.toPromise(this._onDidRender.event));let a=this.getDataNode(e);if(await this.refreshAndRenderNode(a,t,r,i),n)try{this.tree.rerender(a)}catch{}}resort(e=this.root.element,t=!0){this.tree.resort(this.getDataNode(e),t)}hasNode(e){return e===this.root.element||this.nodes.has(e)}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}let t=this.getDataNode(e);this.tree.rerender(t)}updateElementHeight(e,t){let n=this.getDataNode(e);this.tree.updateElementHeight(n,t)}updateWidth(e){let t=this.getDataNode(e);this.tree.updateWidth(t)}getNode(e=this.root.element){let t=this.getDataNode(e),n=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(n)}collapse(e,t=!1){let n=this.getDataNode(e);return this.tree.collapse(n===this.root?null:n,t)}async expand(e,t=!1){if(this.root.element===void 0)throw new SM(this.user,`Tree input not set`);this.root.refreshPromise&&(await this.root.refreshPromise,await T.toPromise(this._onDidRender.event));let n=this.getDataNode(e);if(this.tree.hasElement(n)&&!this.tree.isCollapsible(n)||(n.refreshPromise&&(await n.refreshPromise,await T.toPromise(this._onDidRender.event)),n!==this.root&&!n.refreshPromise&&!this.tree.isCollapsed(n)))return!1;let r=this.tree.expand(n===this.root?null:n,t);return n.refreshPromise&&(await n.refreshPromise,await T.toPromise(this._onDidRender.event)),r}toggleCollapsed(e,t=!1){return this.tree.toggleCollapsed(this.getDataNode(e),t)}expandAll(){this.tree.expandAll()}async expandTo(e){if(!this.dataSource.getParent)throw Error(`Can't expand to element without getParent method`);let t=[];for(;!this.hasNode(e);)e=this.dataSource.getParent(e),e!==this.root.element&&t.push(e);for(let e of Cn.reverse(t))await this.expand(e);this.tree.expandTo(this.getDataNode(e))}collapseAll(){this.tree.collapseAll()}isCollapsible(e){return this.tree.isCollapsible(this.getDataNode(e))}isCollapsed(e){return this.tree.isCollapsed(this.getDataNode(e))}triggerTypeNavigation(){this.tree.triggerTypeNavigation()}openFind(){this.findController?this.findController.open():this.tree.openFind()}closeFind(){this.findController?this.findController.close():this.tree.closeFind()}refilter(){this.tree.refilter()}setAnchor(e){this.tree.setAnchor(e===void 0?void 0:this.getDataNode(e))}getAnchor(){return this.tree.getAnchor()?.element}setSelection(e,t){let n=e.map(e=>this.getDataNode(e));this.tree.setSelection(n,t)}getSelection(){return this.tree.getSelection().map(e=>e.element)}setFocus(e,t){let n=e.map(e=>this.getDataNode(e));this.tree.setFocus(n,t)}focusNext(e=1,t=!1,n){this.tree.focusNext(e,t,n,this.focusNavigationFilter)}focusPrevious(e=1,t=!1,n){this.tree.focusPrevious(e,t,n,this.focusNavigationFilter)}focusNextPage(e){return this.tree.focusNextPage(e,this.focusNavigationFilter)}focusPreviousPage(e){return this.tree.focusPreviousPage(e,this.focusNavigationFilter)}focusLast(e){this.tree.focusLast(e,this.focusNavigationFilter)}focusFirst(e){this.tree.focusFirst(e,this.focusNavigationFilter)}getFocus(){return this.tree.getFocus().map(e=>e.element)}getStickyScrollFocus(){return this.tree.getStickyScrollFocus().map(e=>e.element)}getFocusedPart(){return this.tree.getFocusedPart()}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getRelativeTop(e){return this.tree.getRelativeTop(this.getDataNode(e))}getParentElement(e){let t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){let t=this.getDataNode(e),n=this.tree.getFirstElementChild(t===this.root?null:t);return n&&n.element}getDataNode(e){let t=this.nodes.get(e===this.root.element?null:e);if(!t){let t=this.identityProvider?.getId(e).toString();throw new SM(this.user,`Data tree node not found${t?`: ${t}`:``}`)}return t}async refreshAndRenderNode(e,t,n,r){this.disposables.isDisposed||(await this.refreshNode(e,t,n),!this.disposables.isDisposed&&this.render(e,n,r))}async refreshNode(e,t,n){let r;if(this.subTreeRefreshPromises.forEach((i,a)=>{!r&&LN(a,e)&&(r=i.then(()=>this.refreshNode(e,t,n)))}),r)return r;if(e!==this.root&&this.tree.getNode(e).collapsed){e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0,this.setChildren(e,[],t,n);return}return this.doRefreshSubTree(e,t,n)}async doRefreshSubTree(e,t,n){let r=Ys(async()=>{let r=await this.doRefreshNode(e,t,n);e.stale=!1,await Ac.settled(r.map(e=>this.doRefreshSubTree(e,t,n)))});return e.refreshPromise=r,this.subTreeRefreshPromises.set(e,r),r.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)}),r}async doRefreshNode(e,t,n){e.hasChildren=!!this.dataSource.hasChildren(e.element);let r;if(!e.hasChildren)r=Promise.resolve(Cn.empty());else{let t=this.doGetChildren(e);if(Se(t))r=Promise.resolve(t);else{let n=dc(800);n.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},e=>null),r=t.finally(()=>n.cancel())}}try{let i=await r;return this.setChildren(e,i,t,n)}catch(t){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),v(t))return[];throw t}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;let n=this.dataSource.getChildren(e.element);return Se(n)?this.processChildren(n):(t=Ys(async()=>this.processChildren(await n)),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(p))}setChildren(e,t,n,r){let i=[...t];if(e.children.length===0&&i.length===0)return[];let a=new Map,o=new Map;for(let t of e.children)a.set(t.element,t),this.identityProvider&&o.set(t.id,{node:t,collapsed:this.tree.hasElement(t)&&this.tree.isCollapsed(t)});let s=[],c=i.map(t=>{let i=!!this.dataSource.hasChildren(t);if(!this.identityProvider){let n=FN({element:t,parent:e,hasChildren:i,defaultCollapseState:this.getDefaultCollapseState(t)});return i&&n.defaultCollapseState===yM.PreserveOrExpanded&&s.push(n),n}let c=this.identityProvider.getId(t).toString(),l=o.get(c);if(l){let e=l.node;return a.delete(e.element),this.nodes.delete(e.element),this.nodes.set(t,e),e.element=t,e.hasChildren=i,n?l.collapsed?(e.children.forEach(e=>YN(e,e=>this.nodes.delete(e.element))),e.children.splice(0,e.children.length),e.stale=!0):s.push(e):i&&!l.collapsed&&s.push(e),e}let u=FN({element:t,parent:e,id:c,hasChildren:i,defaultCollapseState:this.getDefaultCollapseState(t)});return r&&r.viewState.focus&&r.viewState.focus.indexOf(c)>-1&&r.focus.push(u),r&&r.viewState.selection&&r.viewState.selection.indexOf(c)>-1&&r.selection.push(u),(r&&r.viewState.expanded&&r.viewState.expanded.indexOf(c)>-1||i&&u.defaultCollapseState===yM.PreserveOrExpanded)&&s.push(u),u});for(let e of a.values())YN(e,e=>this.nodes.delete(e.element));for(let e of c)this.nodes.set(e.element,e);return Wt(e.children,0,e.children.length,c),e!==this.root&&this.autoExpandSingleChildren&&c.length===1&&s.length===0&&(c[0].forceExpanded=!0,s.push(c[0])),s}render(e,t,n){let r=e.children.map(e=>this.asTreeElement(e,t)),i=n&&{...n,diffIdentityProvider:n.diffIdentityProvider&&{getId(e){return n.diffIdentityProvider.getId(e.element)}}};this.tree.setChildren(e===this.root?null:e,r,i),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let n;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?n=!1:e.forceExpanded?(n=!1,e.forceExpanded=!1):n=e.defaultCollapseState,{element:e,children:e.hasChildren?Cn.map(e.children,e=>this.asTreeElement(e,t)):[],collapsible:e.hasChildren,collapsed:n}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}getViewState(){if(!this.identityProvider)throw new SM(this.user,`Can't get tree view state without an identity provider`);let e=e=>this.identityProvider.getId(e).toString(),t=this.getFocus().map(e),n=this.getSelection().map(e),r=[],i=this.tree.getNode(),a=[i];for(;a.length>0;){let t=a.pop();t!==i&&t.collapsible&&!t.collapsed&&r.push(e(t.element.element)),Ut(a,a.length,t.children)}return{focus:t,selection:n,expanded:r,scrollTop:this.scrollTop}}dispose(){this.disposables.dispose(),this.tree.dispose()}},ZN=class e{get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(t=>new e(t))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}},QN=class{constructor(e,t,n,r){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=n,this.onDidChangeTwistieState=r,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,r){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,r)}renderCompressedElements(e,t,n,r){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,r)}renderTwistie(e,t){return e.slow?(t.classList.add(...lC.asClassNameArray(x.treeItemLoading)),!0):(t.classList.remove(...lC.asClassNameArray(x.treeItemLoading)),!1)}disposeElement(e,t,n,r){this.renderer.disposeElement?.(this.nodeMapper.map(e),t,n.templateData,r)}disposeCompressedElements(e,t,n,r){this.renderer.disposeCompressedElements?.(this.compressibleNodeMapperProvider().map(e),t,n.templateData,r)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=Nn(this.disposables)}};function $N(e){let t=e&&JN(e);return t&&{...t,keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&{...t.keyboardNavigationLabelProvider,getCompressedNodeKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(e=>e.element))}},stickyScrollDelegate:t.stickyScrollDelegate}}var eP=class extends XN{constructor(e,t,n,r,i,a,o={}){super(e,t,n,i,a,o),this.compressionDelegate=r,this.compressibleNodeMapper=new CM(e=>new ZN(e)),this.filter=o.filter}getCompressedTreeNode(e){let t=this.getDataNode(e);return this.tree.getCompressedTreeNode(t).element}createTree(e,t,n,r,i){return new PN(e,t,new BM(n),r.map(e=>new QN(e,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),$N(i)||{})}asTreeElement(e,t){return{incompressible:this.compressionDelegate.isIncompressible(e.element),...super.asTreeElement(e,t)}}getViewState(){if(!this.identityProvider)throw new SM(this.user,`Can't get tree view state without an identity provider`);let e=e=>this.identityProvider.getId(e).toString(),t=this.getFocus().map(e),n=this.getSelection().map(e),r=[],i=this.tree.getCompressedTreeNode(),a=[i];for(;a.length>0;){let t=a.pop();if(t!==i&&t.collapsible&&!t.collapsed)for(let n of t.element.elements)r.push(e(n.element));a.push(...t.children)}return{focus:t,selection:n,expanded:r,scrollTop:this.scrollTop}}render(e,t,n){if(!this.identityProvider)return super.render(e,t);let r=e=>this.identityProvider.getId(e).toString(),i=e=>{let t=new Set;for(let n of e){let e=this.tree.getCompressedTreeNode(n===this.root?null:n);if(e.element)for(let n of e.element.elements)t.add(r(n.element))}return t},a=i(this.tree.getSelection()),o=i(this.tree.getFocus());super.render(e,t,n);let s=this.getSelection(),c=!1,l=this.getFocus(),u=!1,d=e=>{let t=e.element;if(t)for(let e=0;e<t.elements.length;e++){let n=r(t.elements[e].element),i=t.elements[t.elements.length-1].element;a.has(n)&&s.indexOf(i)===-1&&(s.push(i),c=!0),o.has(n)&&l.indexOf(i)===-1&&(l.push(i),u=!0)}e.children.forEach(d)};d(this.tree.getCompressedTreeNode(e===this.root?null:e)),c&&this.setSelection(s),u&&this.setFocus(l)}processChildren(e){return this.filter&&(e=Cn.filter(e,e=>{let t=tP(this.filter.filter(e,vM.Visible));if(t===vM.Recurse)throw Error(`Recursive tree visibility not supported in async data compressed trees`);return t===vM.Visible})),super.processChildren(e)}navigate(e){return super.navigate(e)}};function tP(e){return typeof e==`boolean`?e?vM.Visible:vM.Hidden:MM(e)?NM(e.visibility):NM(e)}var nP=class{constructor(e){this.navigator=e}current(){let e=this.navigator.current();return e===null?null:e.element}previous(){return this.navigator.previous(),this.current()}first(){return this.navigator.first(),this.current()}last(){return this.navigator.last(),this.current()}next(){return this.navigator.next(),this.current()}},rP=class extends gN{constructor(e,t,n,r,i,a={}){super(e,t,n,r,a),this.user=e,this.dataSource=i,this.nodesByIdentity=new Map,this.identityProvider=a.identityProvider}getInput(){return this.input}setInput(e,t){if(t&&!this.identityProvider)throw new SM(this.user,`Can't restore tree view state without an identity provider`);if(this.input=e,!e){this.nodesByIdentity.clear(),this.model.setChildren(null,Cn.empty());return}if(!t){this._refresh(e);return}let n=[],r=[];this._refresh(e,e=>{let n=this.identityProvider.getId(e).toString();return!t.expanded[n]},e=>{let i=this.identityProvider.getId(e.element).toString();t.focus.has(i)&&n.push(e.element),t.selection.has(i)&&r.push(e.element)}),this.setFocus(n),this.setSelection(r),t&&typeof t.scrollTop==`number`&&(this.scrollTop=t.scrollTop)}updateChildren(e=this.input){if(this.input===void 0)throw new SM(this.user,`Tree input not set`);let t;this.identityProvider&&(t=e=>{let t=this.identityProvider.getId(e).toString(),n=this.nodesByIdentity.get(t);if(n)return n.collapsed}),this._refresh(e,t)}resort(e=this.input,t=!0){this.model.resort(e===this.input?null:e,t)}refresh(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}_refresh(e,t,n){let r;if(this.identityProvider){let e=new Set,t=n;n=n=>{let r=this.identityProvider.getId(n.element).toString();e.add(r),this.nodesByIdentity.set(r,n),t?.(n)},r=t=>{let n=this.identityProvider.getId(t.element).toString();e.has(n)||this.nodesByIdentity.delete(n)}}this.model.setChildren(e===this.input?null:e,this.iterate(e,t).elements,{onDidCreateNode:n,onDidDeleteNode:r})}iterate(e,t){let n=[...this.dataSource.getChildren(e)];return{elements:Cn.map(n,e=>{let{elements:n,size:r}=this.iterate(e,t);return{element:e,children:n,collapsible:this.dataSource.hasChildren?this.dataSource.hasChildren(e):void 0,collapsed:r===0?void 0:t&&t(e)}}),size:n.length}}createModel(e,t){return new vN(e,t)}};function iP(e){let t=e;return t&&typeof t==`object`&&(!t.overrideIdentifier||typeof t.overrideIdentifier==`string`)&&(!t.resource||t.resource instanceof k)}function aP(e){let t=e;return t&&typeof t==`object`&&(!t.overrideIdentifiers||Array.isArray(t.overrideIdentifiers))&&!t.overrideIdentifier&&(!t.resource||t.resource instanceof k)}var oP;(function(e){e[e.APPLICATION=1]=`APPLICATION`,e[e.USER=2]=`USER`,e[e.USER_LOCAL=3]=`USER_LOCAL`,e[e.USER_REMOTE=4]=`USER_REMOTE`,e[e.WORKSPACE=5]=`WORKSPACE`,e[e.WORKSPACE_FOLDER=6]=`WORKSPACE_FOLDER`,e[e.DEFAULT=7]=`DEFAULT`,e[e.MEMORY=8]=`MEMORY`})(oP||={});function sP(e){switch(e){case oP.APPLICATION:return`APPLICATION`;case oP.USER:return`USER`;case oP.USER_LOCAL:return`USER_LOCAL`;case oP.USER_REMOTE:return`USER_REMOTE`;case oP.WORKSPACE:return`WORKSPACE`;case oP.WORKSPACE_FOLDER:return`WORKSPACE_FOLDER`;case oP.DEFAULT:return`DEFAULT`;case oP.MEMORY:return`MEMORY`}}function cP(e){return e.applicationValue!==void 0||e.userValue!==void 0||e.userLocalValue!==void 0||e.userRemoteValue!==void 0||e.workspaceValue!==void 0||e.workspaceFolderValue!==void 0}function lP(e,t){let n=Object.create(null);for(let r in e)uP(n,r,e[r],t);return n}function uP(e,t,n,r){let i=t.split(`.`),a=i.pop(),o=e;for(let e=0;e<i.length;e++){let n=i[e],a=o[n];switch(typeof a){case`undefined`:a=o[n]=Object.create(null);break;case`object`:if(a===null){r(`Ignoring ${t} as ${i.slice(0,e+1).join(`.`)} is null`);return}break;default:r(`Ignoring ${t} as ${i.slice(0,e+1).join(`.`)} is ${JSON.stringify(a)}`);return}o=a}if(typeof o==`object`&&o)try{o[a]=n}catch{r(`Ignoring ${t} as ${i.join(`.`)} is ${JSON.stringify(o)}`)}else r(`Ignoring ${t} as ${i.join(`.`)} is ${JSON.stringify(o)}`)}function dP(e,t){fP(e,t.split(`.`))}function fP(e,t){if(!e)return;let n=e,r=t.shift();if(t.length===0){delete n[r];return}if(Object.keys(n).indexOf(r)!==-1){let e=n[r];typeof e==`object`&&!Array.isArray(e)&&(fP(e,t),Object.keys(e).length===0&&delete n[r])}}function pP(e,t,n){function r(e,t){let n=e;for(let e of t){if(typeof n!=`object`||!n)return;n=n[e]}return n}let i=r(e,t.split(`.`));return i===void 0?n:i}function mP(e){return e.replace(/^\[/,``).replace(/]$/g,``).replace(/\]\[/g,`, `)}var hP={nameShort:`Code - OSS`,nameLong:`Code - OSS`,applicationName:`code-oss`,dataFolderName:`.vscode-oss`,win32MutexName:`vscodeoss`,licenseName:`MIT`,licenseUrl:`https://github.com/microsoft/vscode/blob/main/LICENSE.txt`,serverLicenseUrl:`https://github.com/microsoft/vscode/blob/main/LICENSE.txt`,serverGreeting:[],serverLicense:[],serverLicensePrompt:``,serverApplicationName:`code-server-oss`,serverDataFolderName:`.vscode-server-oss`,tunnelApplicationName:`code-tunnel-oss`,win32DirName:`Microsoft Code OSS`,win32NameVersion:`Microsoft Code OSS`,win32RegValueName:`CodeOSS`,win32x64AppId:`{{D77B7E06-80BA-4137-BCF4-654B95CCEBC5}`,win32arm64AppId:`{{D1ACE434-89C5-48D1-88D3-E2991DF85475}`,win32x64UserAppId:`{{CC6B787D-37A0-49E8-AE24-8559A032BE0C}`,win32arm64UserAppId:`{{3AEBF0C8-F733-4AD4-BADE-FDB816D53D7B}`,win32AppUserModelId:`Microsoft.CodeOSS`,win32ShellNameShort:`C&ode - OSS`,win32TunnelServiceMutex:`vscodeoss-tunnelservice`,win32TunnelMutex:`vscodeoss-tunnel`,darwinBundleIdentifier:`com.visualstudio.code.oss`,darwinProfileUUID:`47827DD9-4734-49A0-AF80-7E19B11495CC`,darwinProfilePayloadUUID:`CF808BE7-53F3-46C6-A7E2-7EDB98A5E959`,linuxIconName:`code-oss`,licenseFileName:`LICENSE.txt`,reportIssueUrl:`https://github.com/microsoft/vscode/issues/new`,nodejsRepository:`https://nodejs.org`,urlProtocol:`code-oss`,webviewContentExternalBaseUrlTemplate:`https://{{uuid}}.vscode-cdn.net/insider/ef65ac1ba57f57f2a3961bfe94aa20481caca4c6/out/vs/workbench/contrib/webview/browser/pre/`,builtInExtensions:[{name:`ms-vscode.js-debug-companion`,version:`1.1.3`,sha256:`7380a890787452f14b2db7835dfa94de538caf358ebc263f9d46dd68ac52de93`,repo:`https://github.com/microsoft/vscode-js-debug-companion`,metadata:{id:`99cb0b7f-7354-4278-b8da-6cc79972169d`,publisherId:{publisherId:`5f5636e7-69ed-4afe-b5d6-8d231fb3d3ee`,publisherName:`ms-vscode`,displayName:`Microsoft`,flags:`verified`},publisherDisplayName:`Microsoft`}},{name:`ms-vscode.js-debug`,version:`1.105.0`,sha256:`0c45b90342e8aafd4ff2963b4006de64208ca58c2fd01fea7a710fe61dcfd12a`,repo:`https://github.com/microsoft/vscode-js-debug`,metadata:{id:`25629058-ddac-4e17-abba-74678e126c5d`,publisherId:{publisherId:`5f5636e7-69ed-4afe-b5d6-8d231fb3d3ee`,publisherName:`ms-vscode`,displayName:`Microsoft`,flags:`verified`},publisherDisplayName:`Microsoft`}},{name:`ms-vscode.vscode-js-profile-table`,version:`1.0.10`,sha256:`7361748ddf9fd09d8a2ed1f2a2d7376a2cf9aae708692820b799708385c38e08`,repo:`https://github.com/microsoft/vscode-js-profile-visualizer`,metadata:{id:`7e52b41b-71ad-457b-ab7e-0620f1fc4feb`,publisherId:{publisherId:`5f5636e7-69ed-4afe-b5d6-8d231fb3d3ee`,publisherName:`ms-vscode`,displayName:`Microsoft`,flags:`verified`},publisherDisplayName:`Microsoft`}}],defaultChatAgent:{extensionId:`GitHub.copilot`,chatExtensionId:`GitHub.copilot-chat`,chatExtensionOutputId:`GitHub.copilot-chat.GitHub Copilot Chat.log`,documentationUrl:`https://aka.ms/github-copilot-overview`,termsStatementUrl:`https://aka.ms/github-copilot-terms-statement`,privacyStatementUrl:`https://aka.ms/github-copilot-privacy-statement`,skusDocumentationUrl:`https://aka.ms/github-copilot-plans`,publicCodeMatchesUrl:`https://aka.ms/github-copilot-match-public-code`,manageSettingsUrl:`https://aka.ms/github-copilot-settings`,managePlanUrl:`https://aka.ms/github-copilot-manage-plan`,manageOverageUrl:`https://aka.ms/github-copilot-manage-overage`,upgradePlanUrl:`https://aka.ms/github-copilot-upgrade-plan`,signUpUrl:`https://aka.ms/github-sign-up`,provider:{default:{id:`github`,name:`GitHub`},enterprise:{id:`github-enterprise`,name:`GHE.com`},google:{id:`google`,name:`Google`},apple:{id:`apple`,name:`Apple`}},providerUriSetting:`github-enterprise.uri`,providerScopes:[[`read:user`,`user:email`,`repo`,`workflow`],[`user:email`],[`read:user`]],entitlementUrl:`https://api.github.com/copilot_internal/user`,entitlementSignupLimitedUrl:`https://api.github.com/copilot_internal/subscribe_limited_user`,chatQuotaExceededContext:`github.copilot.chat.quotaExceeded`,completionsQuotaExceededContext:`github.copilot.completions.quotaExceeded`,walkthroughCommand:`github.copilot.open.walkthrough`,completionsMenuCommand:`github.copilot.toggleStatusMenu`,completionsRefreshTokenCommand:`github.copilot.signIn`,chatRefreshTokenCommand:`github.copilot.refreshToken`,generateCommitMessageCommand:`github.copilot.git.generateCommitMessage`,resolveMergeConflictsCommand:`github.copilot.git.resolveMergeConflicts`,completionsAdvancedSetting:`github.copilot.advanced`,completionsEnablementSetting:`github.copilot.enable`,nextEditSuggestionsSetting:`github.copilot.nextEditSuggestions.enabled`,tokenEntitlementUrl:`https://api.github.com/copilot_internal/v2/token`,mcpRegistryDataUrl:`https://api.github.com/copilot/mcp_registry`},trustedExtensionAuthAccess:{github:[`GitHub.copilot-chat`],"github-enterprise":[`GitHub.copilot-chat`]},quality:`stable`,version:`1.109.3`,commit:`b6a47e94e326b5c209d118cf0f994d6065585705`,date:`2026-02-23T13:31:10.887Z`,...globalThis._VSCODE_PRODUCT_JSON??{}},gP;(function(e){e.Multiline=`multilineText`,e.Singleline=`singlelineText`})(gP||={});var _P={Configuration:`base.contributions.configuration`},vP;(function(e){e[e.APPLICATION=1]=`APPLICATION`,e[e.MACHINE=2]=`MACHINE`,e[e.APPLICATION_MACHINE=3]=`APPLICATION_MACHINE`,e[e.WINDOW=4]=`WINDOW`,e[e.RESOURCE=5]=`RESOURCE`,e[e.LANGUAGE_OVERRIDABLE=6]=`LANGUAGE_OVERRIDABLE`,e[e.MACHINE_OVERRIDABLE=7]=`MACHINE_OVERRIDABLE`})(vP||={});var yP={properties:{},patternProperties:{}},bP={properties:{},patternProperties:{}},xP={properties:{},patternProperties:{}},SP={properties:{},patternProperties:{}},CP={properties:{},patternProperties:{}},wP={properties:{},patternProperties:{}},TP={properties:{},patternProperties:{}},EP=`vscode://schemas/settings/resourceLanguage`,DP=`vscode://schemas/settings/configurationDefaults`,OP=hr.as(Kc.JSONContribution),kP=class extends w{constructor(){super(),this.registeredConfigurationDefaults=[],this.overrideIdentifiers=new Set,this._onDidSchemaChange=this._register(new E),this.onDidSchemaChange=this._onDidSchemaChange.event,this._onDidUpdateConfiguration=this._register(new E),this.onDidUpdateConfiguration=this._onDidUpdateConfiguration.event,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:`defaultOverrides`,title:D(1767,`Default Language Configuration Overrides`),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},OP.registerSchema(EP,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){return this.registerConfigurations([e],t),e}registerConfigurations(e,t=!0){let n=new Set;this.doRegisterConfigurations(e,t,n),OP.registerSchema(EP,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}deregisterConfigurations(e){let t=new Set;this.doDeregisterConfigurations(e,t),OP.registerSchema(EP,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t})}updateConfigurations({add:e,remove:t}){let n=new Set;this.doDeregisterConfigurations(t,n),this.doRegisterConfigurations(e,!1,n),OP.registerSchema(EP,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}registerDefaultConfigurations(e){let t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){this.registeredConfigurationDefaults.push(...e);let n=[];for(let{overrides:r,source:i}of e)for(let e in r){t.add(e);let a=this.configurationDefaultsOverrides.get(e)??this.configurationDefaultsOverrides.set(e,{configurationDefaultOverrides:[]}).get(e),o=r[e];if(a.configurationDefaultOverrides.push({value:o,source:i}),NP.test(e)){let t=this.mergeDefaultConfigurationsForOverrideIdentifier(e,o,i,a.configurationDefaultOverrideValue);if(!t)continue;a.configurationDefaultOverrideValue=t,this.updateDefaultOverrideProperty(e,t,i),n.push(...PP(e))}else{let t=this.mergeDefaultConfigurationsForConfigurationProperty(e,o,i,a.configurationDefaultOverrideValue);if(!t)continue;a.configurationDefaultOverrideValue=t;let n=this.configurationProperties[e];n&&(this.updatePropertyDefaultValue(e,n),this.updateSchema(e,n))}}this.doRegisterOverrideIdentifiers(n)}deregisterDefaultConfigurations(e){let t=new Set;this.doDeregisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doDeregisterDefaultConfigurations(e,t){for(let t of e){let e=this.registeredConfigurationDefaults.indexOf(t);e!==-1&&this.registeredConfigurationDefaults.splice(e,1)}for(let{overrides:n,source:r}of e)for(let e in n){let i=this.configurationDefaultsOverrides.get(e);if(!i)continue;let a=i.configurationDefaultOverrides.findIndex(t=>r?t.source?.id===r.id:t.value===n[e]);if(a!==-1){if(i.configurationDefaultOverrides.splice(a,1),i.configurationDefaultOverrides.length===0&&this.configurationDefaultsOverrides.delete(e),NP.test(e)){let t;for(let n of i.configurationDefaultOverrides)t=this.mergeDefaultConfigurationsForOverrideIdentifier(e,n.value,n.source,t);t&&!je(t.value)?(i.configurationDefaultOverrideValue=t,this.updateDefaultOverrideProperty(e,t,r)):(this.configurationDefaultsOverrides.delete(e),delete this.configurationProperties[e],delete this.defaultLanguageConfigurationOverridesNode.properties[e])}else{let t;for(let n of i.configurationDefaultOverrides)t=this.mergeDefaultConfigurationsForConfigurationProperty(e,n.value,n.source,t);i.configurationDefaultOverrideValue=t;let n=this.configurationProperties[e];n&&(this.updatePropertyDefaultValue(e,n),this.updateSchema(e,n))}t.add(e)}}this.updateOverridePropertyPatternKey()}updateDefaultOverrideProperty(e,t,n){let r={section:{id:this.defaultLanguageConfigurationOverridesNode.id,title:this.defaultLanguageConfigurationOverridesNode.title,order:this.defaultLanguageConfigurationOverridesNode.order,extensionInfo:this.defaultLanguageConfigurationOverridesNode.extensionInfo},type:`object`,default:t.value,description:D(1768,`Configure settings to be overridden for {0}.`,mP(e)),$ref:EP,defaultDefaultValue:t.value,source:n,defaultValueSource:n};this.configurationProperties[e]=r,this.defaultLanguageConfigurationOverridesNode.properties[e]=r}mergeDefaultConfigurationsForOverrideIdentifier(e,t,n,r){let i=r?.value||{},a=r?.source??new Map;if(!(a instanceof Map)){console.error(`objectConfigurationSources is not a Map`);return}for(let e of Object.keys(t)){let r=t[e];if(ye(r)&&(we(i[e])||ye(i[e]))){if(i[e]={...i[e]??{},...r},n)for(let t in r)a.set(`${e}.${t}`,n)}else i[e]=r,n?a.set(e,n):a.delete(e)}return{value:i,source:a}}mergeDefaultConfigurationsForConfigurationProperty(e,t,n,r){let i=this.configurationProperties[e],a=r?.value??i?.defaultDefaultValue,o=n;if(ye(t)&&(i!==void 0&&i.type===`object`||i===void 0&&(we(a)||ye(a)))){if(o=r?.source??new Map,!(o instanceof Map)){console.error(`defaultValueSource is not a Map`);return}for(let r in t)n&&o.set(`${e}.${r}`,n);t={...ye(a)?a:{},...t}}return{value:t,source:o}}deltaConfiguration(e){let t=!1,n=new Set;e.removedDefaults&&(this.doDeregisterDefaultConfigurations(e.removedDefaults,n),t=!0),e.addedDefaults&&(this.doRegisterDefaultConfigurations(e.addedDefaults,n),t=!0),e.removedConfigurations&&this.doDeregisterConfigurations(e.removedConfigurations,n),e.addedConfigurations&&this.doRegisterConfigurations(e.addedConfigurations,!1,n),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n,defaultsOverrides:t})}notifyConfigurationSchemaUpdated(...e){this._onDidSchemaChange.fire()}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(let t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,n){e.forEach(e=>{this.validateAndRegisterProperties(e,t,e.extensionInfo,e.restrictedProperties,void 0,n),this.configurationContributors.push(e),this.registerJSONConfiguration(e)})}doDeregisterConfigurations(e,t){let n=e=>{if(e.properties)for(let n in e.properties){t.add(n);let r=this.configurationProperties[n];r?.policy?.name&&this.policyConfigurations.delete(r.policy.name),delete this.configurationProperties[n],this.removeFromSchema(n,e.properties[n])}e.allOf?.forEach(e=>n(e))};for(let t of e){n(t);let e=this.configurationContributors.indexOf(t);e!==-1&&this.configurationContributors.splice(e,1)}}validateAndRegisterProperties(e,t=!0,n,r,i=vP.WINDOW,a){i=Ee(e.scope)?i:e.scope;let o=e.properties;if(o)for(let s in o){let c=o[s];if(c.section={id:e.id,title:e.title,order:e.order,extensionInfo:e.extensionInfo},t&&RP(s,c,n?.id)){delete o[s];continue}c.source=n,c.defaultDefaultValue=o[s].default,this.updatePropertyDefaultValue(s,c),NP.test(s)?c.scope=void 0:(c.scope=Ee(c.scope)?i:c.scope,c.restricted=Ee(c.restricted)?!!r?.includes(s):c.restricted),c.experiment?c.tags?.some(e=>e.toLowerCase()===`onexp`)||(c.tags=c.tags??[],c.tags.push(`onExP`)):c.tags?.some(e=>e.toLowerCase()===`onexp`)&&(console.error(`Invalid tag 'onExP' found for property '${s}'. Please use 'experiment' property instead.`),c.experiment={mode:`startup`});let l=o[s].hasOwnProperty(`included`)&&!o[s].included,u=o[s].policy?.name;l?(this.excludedConfigurationProperties[s]=o[s],u&&(this.policyConfigurations.set(u,s),a.add(s)),delete o[s]):(a.add(s),u&&this.policyConfigurations.set(u,s),this.configurationProperties[s]=o[s],!o[s].deprecationMessage&&o[s].markdownDeprecationMessage&&(o[s].deprecationMessage=o[s].markdownDeprecationMessage))}let s=e.allOf;if(s)for(let e of s)this.validateAndRegisterProperties(e,t,n,r,i,a)}getConfigurations(){return this.configurationContributors}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}getExcludedConfigurationProperties(){return this.excludedConfigurationProperties}getRegisteredDefaultConfigurations(){return[...this.registeredConfigurationDefaults]}getConfigurationDefaultsOverrides(){let e=new Map;for(let[t,n]of this.configurationDefaultsOverrides)n.configurationDefaultOverrideValue&&e.set(t,n.configurationDefaultOverrideValue);return e}registerJSONConfiguration(e){let t=e=>{let n=e.properties;if(n)for(let e in n)this.updateSchema(e,n[e]);e.allOf?.forEach(t)};t(e)}updateSchema(e,t){switch(yP.properties[e]=t,t.scope){case vP.APPLICATION:bP.properties[e]=t;break;case vP.MACHINE:SP.properties[e]=t;break;case vP.APPLICATION_MACHINE:xP.properties[e]=t;break;case vP.MACHINE_OVERRIDABLE:CP.properties[e]=t;break;case vP.WINDOW:wP.properties[e]=t;break;case vP.RESOURCE:TP.properties[e]=t;break;case vP.LANGUAGE_OVERRIDABLE:TP.properties[e]=t,this.resourceLanguageSettingsSchema.properties[e]=t;break}}removeFromSchema(e,t){switch(delete yP.properties[e],t.scope){case vP.APPLICATION:delete bP.properties[e];break;case vP.MACHINE:delete SP.properties[e];break;case vP.APPLICATION_MACHINE:delete xP.properties[e];break;case vP.MACHINE_OVERRIDABLE:delete CP.properties[e];break;case vP.WINDOW:delete wP.properties[e];break;case vP.RESOURCE:case vP.LANGUAGE_OVERRIDABLE:delete TP.properties[e],delete this.resourceLanguageSettingsSchema.properties[e];break}}updateOverridePropertyPatternKey(){for(let e of this.overrideIdentifiers.values()){let t=`[${e}]`,n={type:`object`,description:D(1769,`Configure editor settings to be overridden for a language.`),errorMessage:D(1770,`This setting does not support per-language configuration.`),$ref:EP};this.updatePropertyDefaultValue(t,n),yP.properties[t]=n,bP.properties[t]=n,xP.properties[t]=n,SP.properties[t]=n,CP.properties[t]=n,wP.properties[t]=n,TP.properties[t]=n}}registerOverridePropertyPatternKey(){let e={type:`object`,description:D(1769,`Configure editor settings to be overridden for a language.`),errorMessage:D(1770,`This setting does not support per-language configuration.`),$ref:EP};yP.patternProperties[MP]=e,bP.patternProperties[MP]=e,xP.patternProperties[MP]=e,SP.patternProperties[MP]=e,CP.patternProperties[MP]=e,wP.patternProperties[MP]=e,TP.patternProperties[MP]=e,this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){let n=this.configurationDefaultsOverrides.get(e)?.configurationDefaultOverrideValue,r,i;n&&(!t.disallowConfigurationDefault||!n.source)&&(r=n.value,i=n.source),we(r)&&(r=t.defaultDefaultValue,i=void 0),we(r)&&(r=IP(t.type)),t.default=r,t.defaultValueSource=i}},AP=`\\[([^\\]]+)\\]`,jP=new RegExp(AP,`g`),MP=`^(${AP})+$`,NP=new RegExp(MP);function PP(e){let t=[];if(NP.test(e)){let n=jP.exec(e);for(;n?.length;){let r=n[1].trim();r&&t.push(r),n=jP.exec(e)}}return kt(t)}function FP(e){return e.reduce((e,t)=>`${e}[${t}]`,``)}function IP(e){switch(Array.isArray(e)?e[0]:e){case`boolean`:return!1;case`integer`:case`number`:return 0;case`string`:return``;case`array`:return[];case`object`:return{};default:return null}}var LP=new kP;hr.add(_P.Configuration,LP);function RP(e,t,n){return e.trim()?NP.test(e)?D(1772,`Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.`,e):LP.getConfigurationProperties()[e]!==void 0&&(!n||!HP.has(n.toLowerCase()))?D(1773,`Cannot register '{0}'. This property is already registered.`,e):t.policy?.name&&LP.getPolicyConfigurations().get(t.policy?.name)!==void 0?D(1774,`Cannot register '{0}'. The associated policy {1} is already registered with {2}.`,e,t.policy?.name,LP.getPolicyConfigurations().get(t.policy?.name)):null:D(1771,`Cannot register an empty property`)}function zP(){let e=[],t=LP.getConfigurationProperties();for(let n of Object.keys(t))e.push([n,t[n].scope]);return e.push([`launch`,vP.RESOURCE]),e.push([`task`,vP.RESOURCE]),e}function BP(e){let t={};for(let n of e){let e=n.properties;if(ye(e))for(let n in e)t[n]=e[n];n.allOf&&Object.assign(t,BP(n.allOf))}return t}function VP(e){switch(e){case`application`:return vP.APPLICATION;case`machine`:return vP.MACHINE;case`resource`:return vP.RESOURCE;case`machine-overridable`:return vP.MACHINE_OVERRIDABLE;case`language-overridable`:return vP.LANGUAGE_OVERRIDABLE;default:return vP.WINDOW}}var HP=new Set(hP.defaultChatAgent?[hP.defaultChatAgent.extensionId,hP.defaultChatAgent.chatExtensionId].map(e=>e.toLowerCase()):[]),UP=new W(`isMac`,si,D(1787,`Whether the operating system is macOS`)),WP=new W(`isLinux`,ci,D(1788,`Whether the operating system is Linux`)),GP=new W(`isWindows`,oi,D(1789,`Whether the operating system is Windows`)),KP=new W(`isWeb`,di,D(1790,`Whether the platform is a web browser`)),qP=new W(`isMacNative`,si&&!di,D(1791,`Whether the operating system is macOS on a non-browser platform`)),JP=new W(`isIOS`,mi,D(1792,`Whether the operating system is iOS`)),YP=new W(`isMobile`,hi,D(1793,`Whether the platform is a mobile web browser`)),XP=new W(`isDevelopment`,!1,!0),ZP=new W(`productQualityType`,``,D(1794,`Quality type of VS Code`)),QP=`inputFocus`,$P=new W(QP,!1,D(1795,`Whether keyboard focus is inside an input box`)),eF=V(`contextViewService`),tF=V(`contextMenuService`),nF=V(`keybindingService`),rF;(function(e){e[e.NoMatchingKb=0]=`NoMatchingKb`,e[e.MoreChordsNeeded=1]=`MoreChordsNeeded`,e[e.KbFound=2]=`KbFound`})(rF||={});var iF={kind:rF.NoMatchingKb},aF={kind:rF.MoreChordsNeeded};function oF(e,t,n){return{kind:rF.KbFound,commandId:e,commandArgs:t,isBubble:n}}var sF=class e{constructor(t,n,r){this._log=r,this._defaultKeybindings=t,this._defaultBoundCommands=new Map;for(let e of t){let t=e.command;t&&t.charAt(0)!==`-`&&this._defaultBoundCommands.set(t,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=e.handleRemovals([].concat(t,n));for(let e=0,t=this._keybindings.length;e<t;e++){let t=this._keybindings[e];if(t.chords.length===0)continue;let n=t.when?.substituteConstants();n&&n.type===bS.False||this._addKeyPress(t.chords[0],t)}}static _isTargetedForRemoval(e,t,n){if(t){for(let n=0;n<t.length;n++)if(t[n]!==e.chords[n])return!1}return!(n&&n.type!==bS.True&&(!e.when||!NS(n,e.when)))}static handleRemovals(e){let t=new Map;for(let n=0,r=e.length;n<r;n++){let r=e[n];if(r.command&&r.command.charAt(0)===`-`){let e=r.command.substring(1);t.has(e)?t.get(e).push(r):t.set(e,[r])}}if(t.size===0)return e;let n=[];for(let r=0,i=e.length;r<i;r++){let i=e[r];if(!i.command||i.command.length===0){n.push(i);continue}if(i.command.charAt(0)===`-`)continue;let a=t.get(i.command);if(!a||!i.isDefault){n.push(i);continue}let o=!1;for(let e of a){let t=e.when;if(this._isTargetedForRemoval(i,e.chords,t)){o=!0;break}}if(!o){n.push(i);continue}}return n}_addKeyPress(t,n){let r=this._map.get(t);if(r===void 0){this._map.set(t,[n]),this._addToLookupMap(n);return}for(let t=r.length-1;t>=0;t--){let i=r[t];if(i.command===n.command)continue;let a=!0;for(let e=1;e<i.chords.length&&e<n.chords.length;e++)if(i.chords[e]!==n.chords[e]){a=!1;break}a&&e.whenIsEntirelyIncluded(i.when,n.when)&&this._removeFromLookupMap(i)}r.push(n),this._addToLookupMap(n)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);t===void 0?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);if(t!==void 0){for(let n=0,r=t.length;n<r;n++)if(t[n]===e){t.splice(n,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===bS.True?!0:!e||e.type===bS.True?!1:tC(e,t)}getDefaultBoundCommands(){return this._defaultBoundCommands}getDefaultKeybindings(){return this._defaultKeybindings}getKeybindings(){return this._keybindings}lookupKeybindings(e){let t=this._lookupMap.get(e);if(t===void 0||t.length===0)return[];let n=[],r=0;for(let e=t.length-1;e>=0;e--)n[r++]=t[e];return n}lookupPrimaryKeybinding(e,t,n=!1){let r=this._lookupMap.get(e);if(r===void 0||r.length===0)return null;if(r.length===1&&!n)return r[0];for(let e=r.length-1;e>=0;e--){let n=r[e];if(t.contextMatchesRules(n.when))return n}return n?null:r[r.length-1]}resolve(e,t,n){let r=[...t,n];this._log(`| Resolving ${r}`);let i=this._map.get(r[0]);if(i===void 0)return this._log(`\\ No keybinding entries.`),iF;let a=null;if(r.length<2)a=i;else{a=[];for(let e=0,t=i.length;e<t;e++){let t=i[e];if(r.length>t.chords.length)continue;let n=!0;for(let e=1;e<r.length;e++)if(t.chords[e]!==r[e]){n=!1;break}n&&a.push(t)}}let o=this._findCommand(e,a);return o?r.length<o.chords.length?(this._log(`\\ From ${a.length} keybinding entries, awaiting ${o.chords.length-r.length} more chord(s), when: ${cF(o.when)}, source: ${lF(o)}.`),aF):(this._log(`\\ From ${a.length} keybinding entries, matched ${o.command}, when: ${cF(o.when)}, source: ${lF(o)}.`),oF(o.command,o.commandArgs,o.bubble)):(this._log(`\\ From ${a.length} keybinding entries, no when clauses matched the context.`),iF)}_findCommand(t,n){for(let r=n.length-1;r>=0;r--){let i=n[r];if(e._contextMatchesRules(t,i.when))return i}return null}static _contextMatchesRules(e,t){return t?t.evaluate(e):!0}};function cF(e){return e?`${e.serialize()}`:`no when condition`}function lF(e){return e.extensionId?e.isBuiltinExtension?`built-in extension ${e.extensionId}`:`user extension ${e.extensionId}`:e.isDefault?`built-in`:`user`}function uF(e,t){let n={...t};for(let t in e){let r=e[t];n[t]=r===void 0?void 0:N(r)}return n}var dF={keybindingLabelBackground:N(Zd),keybindingLabelForeground:N(Qd),keybindingLabelBorder:N($d),keybindingLabelBottomBorder:N(ef),keybindingLabelShadow:N(tu)},fF={buttonForeground:N(Ad),buttonSeparator:N(jd),buttonBackground:N(Md),buttonHoverBackground:N(Nd),buttonSecondaryForeground:N(Fd),buttonSecondaryBackground:N(Id),buttonSecondaryHoverBackground:N(Rd),buttonSecondaryBorder:N(Pd),buttonBorder:N(Pd)},pF={progressBarBackground:N(Oee)},mF={inputActiveOptionBorder:N(fd),inputActiveOptionForeground:N(hd),inputActiveOptionBackground:N(md)};N(zd),N(Bd),N(Vd),N(Hd),N(Ud),N(Wd),N(Gd);var hF={checkboxBackground:N(Kd),checkboxBorder:N(Jd),checkboxForeground:N(qd),checkboxDisabledBackground:N(Yd),checkboxDisabledForeground:N(Xd)},gF={dialogBackground:N(Il),dialogForeground:N(Ll),dialogShadow:N(tu),dialogBorder:N(nu),errorIconForeground:N(_u),warningIconForeground:N(vu),infoIconForeground:N(yu),textLinkForeground:N(wl)},_F={inputBackground:N(ld),inputForeground:N(ud),inputBorder:N(dd),inputValidationInfoBorder:N(yd),inputValidationInfoBackground:N(_d),inputValidationInfoForeground:N(vd),inputValidationWarningBorder:N(Sd),inputValidationWarningBackground:N(bd),inputValidationWarningForeground:N(xd),inputValidationErrorBorder:N(Td),inputValidationErrorBackground:N(Cd),inputValidationErrorForeground:N(wd)};function vF(e){return uF(e,_F)}var yF={listFilterWidgetBackground:N(Zu),listFilterWidgetOutline:N(Qu),listFilterWidgetNoMatchesOutline:N($u),listFilterWidgetShadow:N(ed),inputBoxStyles:_F,toggleStyles:mF},bF={badgeBackground:N(El),badgeForeground:N(Dl),badgeBorder:N(xl)},xF={breadcrumbsBackground:N(tte),breadcrumbsForeground:N(ete),breadcrumbsHoverForeground:N(iu),breadcrumbsFocusForeground:N(iu),breadcrumbsFocusAndSelectionForeground:N(nte)},SF={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:N(Au),listFocusForeground:N(ju),listFocusOutline:N(Mu),listActiveSelectionBackground:N(Pu),listActiveSelectionForeground:N(Fu),listActiveSelectionIconForeground:N(Iu),listFocusAndSelectionOutline:N(Nu),listFocusAndSelectionBackground:N(Pu),listFocusAndSelectionForeground:N(Fu),listInactiveSelectionBackground:N(Lu),listInactiveSelectionIconForeground:N(zu),listInactiveSelectionForeground:N(Ru),listInactiveFocusBackground:N(Bu),listInactiveFocusOutline:N(Vu),listHoverBackground:N(Hu),listHoverForeground:N(Uu),listDropOverBackground:N(Wu),listDropBetweenBackground:N(Gu),listSelectionOutline:N(Sl),listHoverOutline:N(Sl),treeIndentGuidesStroke:N(id),treeInactiveIndentGuidesStroke:N(ad),treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:N(Al),tableColumnsBorder:N(od),tableOddRowsBackgroundColor:N(sd)};function CF(e){return uF(e,SF)}var wF={selectBackground:N(Ed),selectListBackground:N(Dd),selectForeground:N(Od),decoratorRightForeground:N(ff),selectBorder:N(kd),focusBorder:N(bl),listFocusBackground:N(_f),listInactiveSelectionIconForeground:N(gf),listFocusForeground:N(hf),listFocusOutline:Xc(Sl,M.transparent.toString()),listHoverBackground:N(Hu),listHoverForeground:N(Uu),listHoverOutline:N(Sl),selectListBorder:N(Rl),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0};function TF(e){return uF(e,wF)}var EF={shadowColor:N(tu),borderColor:N(tf),foregroundColor:N(nf),backgroundColor:N(rf),selectionForegroundColor:N(af),selectionBackgroundColor:N(of),selectionBorderColor:N(sf),separatorColor:N(cf),scrollbarShadow:N(Al),scrollbarSliderBackground:N(jl),scrollbarSliderHoverBackground:N(Ml),scrollbarSliderActiveBackground:N(Nl)},DF=V(`listService`),OF=class{get lastFocusedList(){return this._lastFocusedWidget}constructor(){this.disposables=new C,this.lists=[],this._lastFocusedWidget=void 0}setLastFocusedList(e){e!==this._lastFocusedWidget&&(this._lastFocusedWidget?.getHTMLElement().classList.remove(`last-focused`),this._lastFocusedWidget=e,this._lastFocusedWidget?.getHTMLElement().classList.add(`last-focused`))}register(e,t){if(this.lists.some(t=>t.widget===e))throw Error(`Cannot register the same widget multiple times`);let n={widget:e,extraContextKeys:t};return this.lists.push(n),s_(e.getHTMLElement())&&this.setLastFocusedList(e),Fn(e.onDidFocus(()=>this.setLastFocusedList(e)),S(()=>this.lists.splice(this.lists.indexOf(n),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(e=>e!==n),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}},kF=new W(`listScrollAtBoundary`,`none`),AF=jS.or(kF.isEqualTo(`top`),kF.isEqualTo(`both`)),jF=jS.or(kF.isEqualTo(`bottom`),kF.isEqualTo(`both`)),MF=new W(`listFocus`,!0),NF=new W(`treestickyScrollFocused`,!1),PF=new W(`listSupportsMultiselect`,!0),FF=jS.and(MF,jS.not(QP),NF.negate()),IF=new W(`listHasSelectionOrFocus`,!1),LF=new W(`listDoubleSelection`,!1),RF=new W(`listMultiSelection`,!1),zF=new W(`listSelectionNavigation`,!1),BF=new W(`listSupportsFind`,!0),VF=new W(`treeElementCanCollapse`,!1),HF=new W(`treeElementHasParent`,!1),UF=new W(`treeElementCanExpand`,!1),WF=new W(`treeElementHasChild`,!1),GF=new W(`treeFindOpen`,!1),KF=`listTypeNavigationMode`,qF=`listAutomaticKeyboardNavigation`;function JF(e,t){let n=e.createScoped(t.getHTMLElement());return MF.bindTo(n),n}function YF(e,t){let n=kF.bindTo(e),r=()=>{let e=t.scrollTop===0,r=t.scrollHeight-t.renderHeight-t.scrollTop<1;e&&r?n.set(`both`):e?n.set(`top`):r?n.set(`bottom`):n.set(`none`)};return r(),t.onDidScroll(r)}var XF=`workbench.list.multiSelectModifier`,ZF=`workbench.list.openMode`,QF=`workbench.list.horizontalScrolling`,$F=`workbench.list.defaultFindMode`,eI=`workbench.list.typeNavigationMode`,tI=`workbench.list.keyboardNavigation`,nI=`workbench.list.scrollByPage`,rI=`workbench.list.defaultFindMatchType`,iI=`workbench.tree.indent`,aI=`workbench.tree.renderIndentGuides`,oI=`workbench.list.smoothScrolling`,sI=`workbench.list.mouseWheelScrollSensitivity`,cI=`workbench.list.fastScrollSensitivity`,lI=`workbench.tree.expandMode`,uI=`workbench.tree.enableStickyScroll`,dI=`workbench.tree.stickyScrollMaxItemCount`;function fI(e){return e.getValue(XF)===`alt`}var pI=class extends w{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=fI(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(XF)&&(this.useAltAsMultipleSelectionModifier=fI(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:nE(e)}isSelectionRangeChangeEvent(e){return rE(e)}};function mI(e,t){let n=e.get(Dx),r=e.get(nF),i=new C;return[{...t,keyboardNavigationDelegate:{mightProducePrintableCharacter(e){return r.mightProducePrintableCharacter(e)}},smoothScrolling:!!n.getValue(oI),mouseWheelScrollSensitivity:n.getValue(sI),fastScrollSensitivity:n.getValue(cI),multipleSelectionController:t.multipleSelectionController??i.add(new pI(n)),keyboardNavigationEventFilter:CI(r),scrollByPage:!!n.getValue(nI)},i]}var hI=class extends _E{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,n,r,i,a,o,s,c){let l=i.horizontalScrolling===void 0?!!s.getValue(QF):i.horizontalScrolling,[u,d]=c.invokeFunction(mI,i);super(e,t,n,r,{keyboardSupport:!1,...u,horizontalScrolling:l}),this.disposables.add(d),this.contextKeyService=JF(a,this),this.disposables.add(YF(this.contextKeyService,this)),this.listSupportsMultiSelect=PF.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(i.multipleSelectionSupport!==!1),zF.bindTo(this.contextKeyService).set(!!i.selectionNavigation),this.listHasSelectionOrFocus=IF.bindTo(this.contextKeyService),this.listDoubleSelection=LF.bindTo(this.contextKeyService),this.listMultiSelection=RF.bindTo(this.contextKeyService),this.horizontalScrolling=i.horizontalScrolling,this._useAltAsMultipleSelectionModifier=fI(s),this.disposables.add(this.contextKeyService),this.disposables.add(o.register(this)),this.updateStyles(i.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{let e=this.getSelection(),t=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(e.length>0||t.length>0),this.listMultiSelection.set(e.length>1),this.listDoubleSelection.set(e.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{let e=this.getSelection(),t=this.getFocus();this.listHasSelectionOrFocus.set(e.length>0||t.length>0)})),this.disposables.add(s.onDidChangeConfiguration(e=>{e.affectsConfiguration(XF)&&(this._useAltAsMultipleSelectionModifier=fI(s));let t={};if(e.affectsConfiguration(QF)&&this.horizontalScrolling===void 0){let e=!!s.getValue(QF);t={...t,horizontalScrolling:e}}if(e.affectsConfiguration(nI)){let e=!!s.getValue(nI);t={...t,scrollByPage:e}}if(e.affectsConfiguration(oI)){let e=!!s.getValue(oI);t={...t,smoothScrolling:e}}if(e.affectsConfiguration(sI)){let e=s.getValue(sI);t={...t,mouseWheelScrollSensitivity:e}}if(e.affectsConfiguration(cI)){let e=s.getValue(cI);t={...t,fastScrollSensitivity:e}}Object.keys(t).length>0&&this.updateOptions(t)})),this.navigator=new bI(this,{configurationService:s,...i}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?CF(e):SF)}get useAltAsMultipleSelectionModifier(){return this._useAltAsMultipleSelectionModifier}};hI=t([n(5,uS),n(6,DF),n(7,Dx),n(8,Cy)],hI);var gI=class extends xE{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,n,r,i,a,o,s,c){let l=i.horizontalScrolling===void 0?!!s.getValue(QF):i.horizontalScrolling,[u,d]=c.invokeFunction(mI,i);super(e,t,n,r,{keyboardSupport:!1,...u,horizontalScrolling:l}),this.disposables=new C,this.disposables.add(d),this.contextKeyService=JF(a,this),this.disposables.add(YF(this.contextKeyService,this.widget)),this.horizontalScrolling=i.horizontalScrolling,this.listSupportsMultiSelect=PF.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(i.multipleSelectionSupport!==!1),zF.bindTo(this.contextKeyService).set(!!i.selectionNavigation),this._useAltAsMultipleSelectionModifier=fI(s),this.disposables.add(this.contextKeyService),this.disposables.add(o.register(this)),this.updateStyles(i.overrideStyles),this.disposables.add(s.onDidChangeConfiguration(e=>{e.affectsConfiguration(XF)&&(this._useAltAsMultipleSelectionModifier=fI(s));let t={};if(e.affectsConfiguration(QF)&&this.horizontalScrolling===void 0){let e=!!s.getValue(QF);t={...t,horizontalScrolling:e}}if(e.affectsConfiguration(nI)){let e=!!s.getValue(nI);t={...t,scrollByPage:e}}if(e.affectsConfiguration(oI)){let e=!!s.getValue(oI);t={...t,smoothScrolling:e}}if(e.affectsConfiguration(sI)){let e=s.getValue(sI);t={...t,mouseWheelScrollSensitivity:e}}if(e.affectsConfiguration(cI)){let e=s.getValue(cI);t={...t,fastScrollSensitivity:e}}Object.keys(t).length>0&&this.updateOptions(t)})),this.navigator=new bI(this,{configurationService:s,...i}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?CF(e):SF)}get useAltAsMultipleSelectionModifier(){return this._useAltAsMultipleSelectionModifier}dispose(){this.disposables.dispose(),super.dispose()}};gI=t([n(5,uS),n(6,DF),n(7,Dx),n(8,Cy)],gI);var _I=class extends rD{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,n,r,i,a,o,s,c,l){let u=a.horizontalScrolling===void 0?!!c.getValue(QF):a.horizontalScrolling,[d,f]=l.invokeFunction(mI,a);super(e,t,n,r,i,{keyboardSupport:!1,...d,horizontalScrolling:u}),this.disposables.add(f),this.contextKeyService=JF(o,this),this.disposables.add(YF(this.contextKeyService,this)),this.listSupportsMultiSelect=PF.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(a.multipleSelectionSupport!==!1),zF.bindTo(this.contextKeyService).set(!!a.selectionNavigation),this.listHasSelectionOrFocus=IF.bindTo(this.contextKeyService),this.listDoubleSelection=LF.bindTo(this.contextKeyService),this.listMultiSelection=RF.bindTo(this.contextKeyService),this.horizontalScrolling=a.horizontalScrolling,this._useAltAsMultipleSelectionModifier=fI(c),this.disposables.add(this.contextKeyService),this.disposables.add(s.register(this)),this.updateStyles(a.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{let e=this.getSelection(),t=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(e.length>0||t.length>0),this.listMultiSelection.set(e.length>1),this.listDoubleSelection.set(e.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{let e=this.getSelection(),t=this.getFocus();this.listHasSelectionOrFocus.set(e.length>0||t.length>0)})),this.disposables.add(c.onDidChangeConfiguration(e=>{e.affectsConfiguration(XF)&&(this._useAltAsMultipleSelectionModifier=fI(c));let t={};if(e.affectsConfiguration(QF)&&this.horizontalScrolling===void 0){let e=!!c.getValue(QF);t={...t,horizontalScrolling:e}}if(e.affectsConfiguration(nI)){let e=!!c.getValue(nI);t={...t,scrollByPage:e}}if(e.affectsConfiguration(oI)){let e=!!c.getValue(oI);t={...t,smoothScrolling:e}}if(e.affectsConfiguration(sI)){let e=c.getValue(sI);t={...t,mouseWheelScrollSensitivity:e}}if(e.affectsConfiguration(cI)){let e=c.getValue(cI);t={...t,fastScrollSensitivity:e}}Object.keys(t).length>0&&this.updateOptions(t)})),this.navigator=new xI(this,{configurationService:c,...a}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?CF(e):SF)}get useAltAsMultipleSelectionModifier(){return this._useAltAsMultipleSelectionModifier}dispose(){this.disposables.dispose(),super.dispose()}};_I=t([n(6,uS),n(7,DF),n(8,Dx),n(9,Cy)],_I);function vI(e=`keydown`,t,n){let r=new KeyboardEvent(e);return r.preserveFocus=t,r.pinned=n,r.__forceEvent=!0,r}var yI=class extends w{constructor(e,t){super(),this.widget=e,this._onDidOpen=this._register(new E),this.onDidOpen=this._onDidOpen.event,this._register(T.filter(this.widget.onDidChangeSelection,e=>k_(e.browserEvent))(e=>this.onSelectionFromKeyboard(e))),this._register(this.widget.onPointer(e=>this.onPointer(e.element,e.browserEvent))),this._register(this.widget.onMouseDblClick(e=>this.onMouseDblClick(e.element,e.browserEvent))),typeof t?.openOnSingleClick!=`boolean`&&t?.configurationService?(this.openOnSingleClick=t?.configurationService.getValue(ZF)!==`doubleClick`,this._register(t?.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(ZF)&&(this.openOnSingleClick=t?.configurationService.getValue(ZF)!==`doubleClick`)}))):this.openOnSingleClick=t?.openOnSingleClick??!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;let t=e.browserEvent,n=typeof t.preserveFocus==`boolean`?t.preserveFocus:!0,r=typeof t.pinned==`boolean`?t.pinned:!n;this._open(this.getSelectedElement(),n,r,!1,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;let n=t.button===1,r=t.ctrlKey||t.metaKey||t.altKey;this._open(e,!0,n,r,t)}onMouseDblClick(e,t){if(!t)return;let n=t.target;if(n.classList.contains(`monaco-tl-twistie`)||n.classList.contains(`monaco-icon-label`)&&n.classList.contains(`folder-icon`)&&t.offsetX<16)return;let r=t.ctrlKey||t.metaKey||t.altKey;this._open(e,!1,!0,r,t)}_open(e,t,n,r,i){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:n,revealIfVisible:!0},sideBySide:r,element:e,browserEvent:i})}},bI=class extends yI{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}},xI=class extends yI{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}},SI=class extends yI{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelection()[0]??void 0}};function CI(e){let t=!1;return n=>{if(n.toKeyCodeChord().isModifierKey())return!1;if(t)return t=!1,!1;let r=e.softDispatch(n,n.target);return r.kind===rF.MoreChordsNeeded?(t=!0,!1):(t=!1,r.kind===rF.NoMatchingKb)}}var wI=class extends AN{get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,n,r,i,a,o,s,c){let{options:l,getTypeNavigationMode:u,disposable:d}=a.invokeFunction(jI,i);super(e,t,n,r,l),this.disposables.add(d),this.internals=new MI(this,i,u,i.overrideStyles,o,s,c),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};wI=t([n(5,Cy),n(6,uS),n(7,DF),n(8,Dx)],wI);var TI=class extends PN{get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,n,r,i,a,o,s,c){let{options:l,getTypeNavigationMode:u,disposable:d}=a.invokeFunction(jI,i);super(e,t,n,r,l),this.disposables.add(d),this.internals=new MI(this,i,u,i.overrideStyles,o,s,c),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};TI=t([n(5,Cy),n(6,uS),n(7,DF),n(8,Dx)],TI);var EI=class extends rP{get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,n,r,i,a,o,s,c,l){let{options:u,getTypeNavigationMode:d,disposable:f}=o.invokeFunction(jI,a);super(e,t,n,r,i,u),this.disposables.add(f),this.internals=new MI(this,a,d,a.overrideStyles,s,c,l),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles!==void 0&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};EI=t([n(6,Cy),n(7,uS),n(8,DF),n(9,Dx)],EI);var DI=class extends XN{get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,n,r,i,a,o,s,c,l){let{options:u,getTypeNavigationMode:d,disposable:f}=o.invokeFunction(jI,a);super(e,t,n,r,i,u),this.disposables.add(f),this.internals=new MI(this,a,d,a.overrideStyles,s,c,l),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};DI=t([n(6,Cy),n(7,uS),n(8,DF),n(9,Dx)],DI);var OI=class extends eP{get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,n,r,i,a,o,s,c,l,u){let{options:d,getTypeNavigationMode:f,disposable:p}=s.invokeFunction(jI,o);super(e,t,n,r,i,a,d),this.disposables.add(p),this.internals=new MI(this,o,f,o.overrideStyles,c,l,u),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};OI=t([n(7,Cy),n(8,uS),n(9,DF),n(10,Dx)],OI);function kI(e){let t=e.getValue($F);if(t===`highlight`)return XM.Highlight;if(t===`filter`)return XM.Filter;let n=e.getValue(tI);if(n===`simple`||n===`highlight`)return XM.Highlight;if(n===`filter`)return XM.Filter}function AI(e){let t=e.getValue(rI);if(t===`fuzzy`)return ZM.Fuzzy;if(t===`contiguous`)return ZM.Contiguous}function jI(e,t){let n=e.get(Dx),r=e.get(eF),i=e.get(uS),a=e.get(Cy),o=()=>{let e=i.getContextKeyValue(KF);if(e===`automatic`)return ZT.Automatic;if(e===`trigger`||i.getContextKeyValue(qF)===!1)return ZT.Trigger;let t=n.getValue(eI);if(t===`automatic`)return ZT.Automatic;if(t===`trigger`)return ZT.Trigger},s=t.horizontalScrolling===void 0?!!n.getValue(QF):t.horizontalScrolling,[c,l]=a.invokeFunction(mI,t),u=t.paddingBottom,d=t.renderIndentGuides===void 0?n.getValue(aI):t.renderIndentGuides;return{getTypeNavigationMode:o,disposable:l,options:{keyboardSupport:!1,...c,indent:typeof n.getValue(iI)==`number`?n.getValue(iI):void 0,renderIndentGuides:d,smoothScrolling:!!n.getValue(oI),defaultFindMode:t.defaultFindMode??kI(n),defaultFindMatchType:t.defaultFindMatchType??AI(n),horizontalScrolling:s,scrollByPage:!!n.getValue(nI),paddingBottom:u,hideTwistiesOfChildlessElements:t.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:t.expandOnlyOnTwistieClick??n.getValue(lI)===`doubleClick`,contextViewProvider:r,findWidgetStyles:yF,enableStickyScroll:!!n.getValue(uI),stickyScrollMaxItemCount:Number(n.getValue(dI))}}}var MI=class{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,n,r,i,a,o){this.tree=e,this.disposables=[],this.contextKeyService=JF(i,e),this.disposables.push(YF(this.contextKeyService,e)),this.listSupportsMultiSelect=PF.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),zF.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.listSupportFindWidget=BF.bindTo(this.contextKeyService),this.listSupportFindWidget.set(t.findWidgetEnabled??!0),this.hasSelectionOrFocus=IF.bindTo(this.contextKeyService),this.hasDoubleSelection=LF.bindTo(this.contextKeyService),this.hasMultiSelection=RF.bindTo(this.contextKeyService),this.treeElementCanCollapse=VF.bindTo(this.contextKeyService),this.treeElementHasParent=HF.bindTo(this.contextKeyService),this.treeElementCanExpand=UF.bindTo(this.contextKeyService),this.treeElementHasChild=WF.bindTo(this.contextKeyService),this.treeFindOpen=GF.bindTo(this.contextKeyService),this.treeStickyScrollFocused=NF.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=fI(o),this.updateStyleOverrides(r);let s=()=>{let t=e.getFocus()[0];if(!t)return;let n=e.getNode(t);this.treeElementCanCollapse.set(n.collapsible&&!n.collapsed),this.treeElementHasParent.set(!!e.getParentElement(t)),this.treeElementCanExpand.set(n.collapsible&&n.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(t))},c=new Set;c.add(KF),c.add(qF),this.disposables.push(this.contextKeyService,a.register(e),e.onDidChangeSelection(()=>{let t=e.getSelection(),n=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(t.length>0||n.length>0),this.hasMultiSelection.set(t.length>1),this.hasDoubleSelection.set(t.length===2)})}),e.onDidChangeFocus(()=>{let t=e.getSelection(),n=e.getFocus();this.hasSelectionOrFocus.set(t.length>0||n.length>0),s()}),e.onDidChangeCollapseState(s),e.onDidChangeModel(s),e.onDidChangeFindOpenState(e=>this.treeFindOpen.set(e)),e.onDidChangeStickyScrollFocused(e=>this.treeStickyScrollFocused.set(e)),o.onDidChangeConfiguration(r=>{let i={};if(r.affectsConfiguration(XF)&&(this._useAltAsMultipleSelectionModifier=fI(o)),r.affectsConfiguration(iI)){let e=o.getValue(iI);i={...i,indent:e}}if(r.affectsConfiguration(aI)&&t.renderIndentGuides===void 0){let e=o.getValue(aI);i={...i,renderIndentGuides:e}}if(r.affectsConfiguration(oI)){let e=!!o.getValue(oI);i={...i,smoothScrolling:e}}if(r.affectsConfiguration($F)||r.affectsConfiguration(tI)){let e=kI(o);i={...i,defaultFindMode:e}}if(r.affectsConfiguration(eI)||r.affectsConfiguration(tI)){let e=n();i={...i,typeNavigationMode:e}}if(r.affectsConfiguration(rI)){let e=AI(o);i={...i,defaultFindMatchType:e}}if(r.affectsConfiguration(QF)&&t.horizontalScrolling===void 0){let e=!!o.getValue(QF);i={...i,horizontalScrolling:e}}if(r.affectsConfiguration(nI)){let e=!!o.getValue(nI);i={...i,scrollByPage:e}}if(r.affectsConfiguration(lI)&&t.expandOnlyOnTwistieClick===void 0&&(i={...i,expandOnlyOnTwistieClick:o.getValue(lI)===`doubleClick`}),r.affectsConfiguration(uI)){let e=o.getValue(uI);i={...i,enableStickyScroll:e}}if(r.affectsConfiguration(dI)){let e=Math.max(1,o.getValue(dI));i={...i,stickyScrollMaxItemCount:e}}if(r.affectsConfiguration(sI)){let e=o.getValue(sI);i={...i,mouseWheelScrollSensitivity:e}}if(r.affectsConfiguration(cI)){let e=o.getValue(cI);i={...i,fastScrollSensitivity:e}}Object.keys(i).length>0&&e.updateOptions(i)}),this.contextKeyService.onDidChangeContext(t=>{t.affectsSome(c)&&e.updateOptions({typeNavigationMode:n()})})),this.navigator=new SI(e,{configurationService:o,...t}),this.disposables.push(this.navigator)}get useAltAsMultipleSelectionModifier(){return this._useAltAsMultipleSelectionModifier}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){this.tree.style(e?CF(e):SF)}dispose(){this.disposables=Nn(this.disposables)}};MI=t([n(4,uS),n(5,DF),n(6,Dx)],MI),hr.as(_P.Configuration).registerConfiguration({id:`workbench`,order:7,title:D(1961,`Workbench`),type:`object`,properties:{[XF]:{type:`string`,enum:[`ctrlCmd`,`alt`],markdownEnumDescriptions:[D(1962,"Maps to `Control` on Windows and Linux and to `Command` on macOS."),D(1963,"Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:`ctrlCmd`,description:D(1964,`The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.`)},[ZF]:{type:`string`,enum:[`singleClick`,`doubleClick`],default:`singleClick`,description:D(1965,`Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.`)},[QF]:{type:`boolean`,default:!1,description:D(1966,`Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.`)},[nI]:{type:`boolean`,default:!1,description:D(1967,`Controls whether clicks in the scrollbar scroll page by page.`)},[iI]:{type:`number`,default:8,minimum:4,maximum:40,description:D(1968,`Controls tree indentation in pixels.`)},[aI]:{type:`string`,enum:[`none`,`onHover`,`always`],default:`onHover`,description:D(1969,`Controls whether the tree should render indent guides.`)},[oI]:{type:`boolean`,default:!1,description:D(1970,`Controls whether lists and trees have smooth scrolling.`)},[sI]:{type:`number`,default:1,markdownDescription:D(1971,"A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[cI]:{type:`number`,default:5,markdownDescription:D(1972,"Scrolling speed multiplier when pressing `Alt`.")},[$F]:{type:`string`,enum:[`highlight`,`filter`],enumDescriptions:[D(1973,`Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements.`),D(1974,`Filter elements when searching.`)],default:`highlight`,description:D(1975,`Controls the default find mode for lists and trees in the workbench.`)},[tI]:{type:`string`,enum:[`simple`,`highlight`,`filter`],enumDescriptions:[D(1976,`Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes.`),D(1977,`Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements.`),D(1978,`Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.`)],default:`highlight`,description:D(1979,`Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter.`),deprecated:!0,deprecationMessage:D(1980,`Please use 'workbench.list.defaultFindMode' and	'workbench.list.typeNavigationMode' instead.`)},[rI]:{type:`string`,enum:[`fuzzy`,`contiguous`],enumDescriptions:[D(1981,`Use fuzzy matching when searching.`),D(1982,`Use contiguous matching when searching.`)],default:`fuzzy`,description:D(1983,`Controls the type of matching used when searching lists and trees in the workbench.`)},[lI]:{type:`string`,enum:[`singleClick`,`doubleClick`],default:`singleClick`,description:D(1984,`Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.`)},[uI]:{type:`boolean`,default:!0,description:D(1985,`Controls whether sticky scrolling is enabled in trees.`)},[dI]:{type:`number`,minimum:1,default:7,markdownDescription:D(1986,`Controls the number of sticky elements displayed in the tree when {0} is enabled.`,"`#workbench.tree.enableStickyScroll#`")},[eI]:{type:`string`,enum:[`automatic`,`trigger`],default:`automatic`,markdownDescription:D(1987,"Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")}}});var NI=V(`telemetryService`),PI=V(`customEndpointTelemetryService`),FI=V(`languageService`),II=V(`modelService`),LI={EditorPane:`workbench.contributions.editors`,EditorFactory:`workbench.contributions.editor.inputFactories`},RI={id:`default`,displayName:D(4058,`Text Editor`),providerDisplayName:D(4059,`Built-in`)},zI=`workbench.editor.sidebysideEditor`,BI=`workbench.editors.textDiffEditor`,VI=`workbench.editors.binaryResourceDiffEditor`,HI;(function(e){e[e.PROGRAMMATIC=1]=`PROGRAMMATIC`,e[e.USER=2]=`USER`,e[e.EDIT=3]=`EDIT`,e[e.NAVIGATION=4]=`NAVIGATION`,e[e.JUMP=5]=`JUMP`})(HI||={});var UI;(function(e){e[e.IDENTICAL=1]=`IDENTICAL`,e[e.SIMILAR=2]=`SIMILAR`,e[e.DIFFERENT=3]=`DIFFERENT`})(UI||={});function $ne(e){let t=e;return!!t&&typeof t.getSelection==`function`&&!!t.onDidChangeSelection}function ere(e){let t=e;return!!t&&typeof t.getScrollPosition==`function`&&typeof t.setScrollPosition==`function`&&!!t.onDidChangeScroll}function WI(e,t,n){for(let r of n.visibleEditorPanes)if(r.group.id===t&&e.matches(r.input))return r.getViewState()}function GI(e){if(tL(e))return!1;let t=e;return k.isUri(t?.resource)}function KI(e){if(tL(e))return!1;let t=e;return t?.original!==void 0&&t.modified!==void 0}function qI(e){if(tL(e))return!1;let t=e;return!t||t.resources&&!Array.isArray(t.resources)?!1:!!t.resources||!!t.multiDiffSource}function JI(e){if(tL(e)||KI(e))return!1;let t=e;return t?.primary!==void 0&&t.secondary!==void 0}function tre(e){if(tL(e))return!1;let t=e;return t?t.resource===void 0||t.resource.scheme===A.untitled||t.forceUntitled===!0:!1}function YI(e){if(tL(e))return!1;let t=e;return k.isUri(t?.base?.resource)&&k.isUri(t?.input1?.resource)&&k.isUri(t?.input2?.resource)&&k.isUri(t?.result?.resource)}var XI;(function(e){e[e.SHORT=0]=`SHORT`,e[e.MEDIUM=1]=`MEDIUM`,e[e.LONG=2]=`LONG`})(XI||={});var ZI;(function(e){e[e.EXPLICIT=1]=`EXPLICIT`,e[e.AUTO=2]=`AUTO`,e[e.FOCUS_CHANGE=3]=`FOCUS_CHANGE`,e[e.WINDOW_CHANGE=4]=`WINDOW_CHANGE`})(ZI||={});var QI=new class{constructor(){this.mapIdToSaveSource=new Map}registerSource(e,t){let n=this.mapIdToSaveSource.get(e);return n||(n={source:e,label:t},this.mapIdToSaveSource.set(e,n)),n.source}getSourceLabel(e){return this.mapIdToSaveSource.get(e)?.label??e}},$I;(function(e){e[e.None=0]=`None`,e[e.Readonly=2]=`Readonly`,e[e.Untitled=4]=`Untitled`,e[e.Singleton=8]=`Singleton`,e[e.RequiresTrust=16]=`RequiresTrust`,e[e.CanSplitInGroup=32]=`CanSplitInGroup`,e[e.ForceDescription=64]=`ForceDescription`,e[e.CanDropIntoEditor=128]=`CanDropIntoEditor`,e[e.MultipleEditors=256]=`MultipleEditors`,e[e.Scratchpad=512]=`Scratchpad`})($I||={});var eL=class extends w{};function tL(e){return e instanceof eL}function nre(e){let t=e;return k.isUri(t?.preferredResource)}function nL(e){let t=e;return tL(t?.primary)&&tL(t?.secondary)}function rL(e){let t=e;return tL(t?.modified)&&tL(t?.original)}function rre(e,t,n,r,i){return pL(r,[nS({id:`workbench.action.openLargeFile`,label:D(4060,`Open Anyway`),run:()=>{let r={...n,limits:{size:Number.MAX_VALUE}};e.openEditor(t,r)}}),nS({id:`workbench.action.configureEditorLargeFileConfirmation`,label:D(4061,`Configure Limit`),run:()=>i.openUserSettings({query:`workbench.editorLargeFileConfirmation`})})],{forceMessage:!0,forceSeverity:Lx.Warning})}function iL(e){return tL(e?.editor)}function ire(e){let t=e;return iL(e)&&t?.group!==void 0}function are(e){let t=e;return typeof t?.groupId==`number`&&tL(t.editor)}function ore(e){return typeof e?.groupId==`number`}var aL;(function(e){e[e.UNKNOWN=0]=`UNKNOWN`,e[e.REPLACE=1]=`REPLACE`,e[e.MOVE=2]=`MOVE`,e[e.UNPIN=3]=`UNPIN`})(aL||={});var oL;(function(e){e[e.GROUP_ACTIVE=0]=`GROUP_ACTIVE`,e[e.GROUP_INDEX=1]=`GROUP_INDEX`,e[e.GROUP_LABEL=2]=`GROUP_LABEL`,e[e.GROUP_LOCKED=3]=`GROUP_LOCKED`,e[e.EDITORS_SELECTION=4]=`EDITORS_SELECTION`,e[e.EDITOR_OPEN=5]=`EDITOR_OPEN`,e[e.EDITOR_CLOSE=6]=`EDITOR_CLOSE`,e[e.EDITOR_MOVE=7]=`EDITOR_MOVE`,e[e.EDITOR_ACTIVE=8]=`EDITOR_ACTIVE`,e[e.EDITOR_LABEL=9]=`EDITOR_LABEL`,e[e.EDITOR_CAPABILITIES=10]=`EDITOR_CAPABILITIES`,e[e.EDITOR_PIN=11]=`EDITOR_PIN`,e[e.EDITOR_TRANSIENT=12]=`EDITOR_TRANSIENT`,e[e.EDITOR_STICKY=13]=`EDITOR_STICKY`,e[e.EDITOR_DIRTY=14]=`EDITOR_DIRTY`,e[e.EDITOR_WILL_DISPOSE=15]=`EDITOR_WILL_DISPOSE`})(oL||={});var sL;(function(e){e[e.PRIMARY=1]=`PRIMARY`,e[e.SECONDARY=2]=`SECONDARY`,e[e.BOTH=3]=`BOTH`,e[e.ANY=4]=`ANY`})(sL||={});var sre=class{getOriginalUri(e,t){if(!e)return;if(YI(e))return lL.getOriginalUri(e.result,t);if(t?.supportSideBySide){let{primary:n,secondary:r}=this.getSideEditors(e);if(n&&r){if(t?.supportSideBySide===sL.BOTH)return{primary:this.getOriginalUri(n,{filterByScheme:t.filterByScheme}),secondary:this.getOriginalUri(r,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===sL.ANY)return this.getOriginalUri(n,{filterByScheme:t.filterByScheme})??this.getOriginalUri(r,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===sL.PRIMARY?n:r}}if(KI(e)||qI(e)||JI(e)||YI(e))return;let n=nre(e)?e.preferredResource:e.resource;return!n||!t?.filterByScheme?n:this.filterUri(n,t.filterByScheme)}getSideEditors(e){return nL(e)||JI(e)?{primary:e.primary,secondary:e.secondary}:rL(e)||KI(e)?{primary:e.modified,secondary:e.original}:{primary:void 0,secondary:void 0}}getCanonicalUri(e,t){if(!e)return;if(YI(e))return lL.getCanonicalUri(e.result,t);if(t?.supportSideBySide){let{primary:n,secondary:r}=this.getSideEditors(e);if(n&&r){if(t?.supportSideBySide===sL.BOTH)return{primary:this.getCanonicalUri(n,{filterByScheme:t.filterByScheme}),secondary:this.getCanonicalUri(r,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===sL.ANY)return this.getCanonicalUri(n,{filterByScheme:t.filterByScheme})??this.getCanonicalUri(r,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===sL.PRIMARY?n:r}}if(KI(e)||qI(e)||JI(e)||YI(e))return;let n=e.resource;return!n||!t?.filterByScheme?n:this.filterUri(n,t.filterByScheme)}filterUri(e,t){if(Array.isArray(t)){if(t.some(t=>e.scheme===t))return e}else if(t===e.scheme)return e}},cL;(function(e){e[e.UNKNOWN=0]=`UNKNOWN`,e[e.KEYBOARD=1]=`KEYBOARD`,e[e.MOUSE=2]=`MOUSE`})(cL||={});function cre(e,t,n,r){if(!e.isSticky(t))return!1;switch(r.preventPinnedEditorClose){case`keyboardAndMouse`:return n===cL.MOUSE||n===cL.KEYBOARD;case`mouse`:return n===cL.MOUSE;case`keyboard`:return n===cL.KEYBOARD}return!1}var lL=new sre,uL;(function(e){e[e.LEFT=0]=`LEFT`,e[e.RIGHT=1]=`RIGHT`})(uL||={});var lre=class{constructor(){this.editorSerializerConstructors=new Map,this.editorSerializerInstances=new Map}start(e){let t=this.instantiationService=e.get(Cy);for(let[e,n]of this.editorSerializerConstructors)this.createEditorSerializer(e,n,t);this.editorSerializerConstructors.clear()}createEditorSerializer(e,t,n){let r=n.createInstance(t);this.editorSerializerInstances.set(e,r)}registerFileEditorFactory(e){if(this.fileEditorFactory)throw Error(`Can only register one file editor factory.`);this.fileEditorFactory=e}getFileEditorFactory(){return Oe(this.fileEditorFactory)}registerEditorSerializer(e,t){if(this.editorSerializerConstructors.has(e)||this.editorSerializerInstances.has(e))throw Error(`A editor serializer with type ID '${e}' was already registered.`);return this.instantiationService?this.createEditorSerializer(e,t,this.instantiationService):this.editorSerializerConstructors.set(e,t),S(()=>{this.editorSerializerConstructors.delete(e),this.editorSerializerInstances.delete(e)})}getEditorSerializer(e){return this.editorSerializerInstances.get(typeof e==`string`?e:e.typeId)}};hr.add(LI.EditorFactory,new lre);async function ure(e,t,n){return e?.length?await Promise.all(e.map(async e=>{let r=k.revive(e.fileUri);if(!r){n.info(`Cannot resolve the path because it is not valid.`,e);return}if(!await t.canHandleResource(r)){n.info(`Cannot resolve the path because it cannot be handled`,e);return}let i=e.exists,a=e.type;if(typeof i!=`boolean`||typeof a!=`number`)try{a=(await t.stat(r)).isDirectory?Jy.Directory:Jy.Unknown,i=!0}catch(e){n.error(e),i=!1}if(!i&&e.openOnlyIfExists){n.info(`Cannot resolve the path because it does not exist`,e);return}if(a===Jy.Directory){n.info(`Cannot resolve the path because it is a directory`,e);return}let o={...e.options,pinned:!0};return i?{resource:r,options:o}:{resource:r,options:o,forceUntitled:!0}})):[]}var dL;(function(e){e[e.MOST_RECENTLY_ACTIVE=0]=`MOST_RECENTLY_ACTIVE`,e[e.SEQUENTIAL=1]=`SEQUENTIAL`})(dL||={});function fL(e){let t=e;if(!t)return!1;let n=t;if(n.modified)return fL(n.modified);let r=t;return!!(r.contributionsState&&r.viewState&&Array.isArray(r.cursorState))}function dre(e){return Yx(e)}function pL(e,t,n){let r=Xx(e,t);return r.forceMessage=n?.forceMessage,r.forceSeverity=n?.forceSeverity,r.allowDialog=n?.allowDialog,r}var mL=class extends eL{constructor(){super(...arguments),this._onDidChangeDirty=this._register(new E),this._onDidChangeLabel=this._register(new E),this._onDidChangeCapabilities=this._register(new E),this._onWillDispose=this._register(new E),this.onDidChangeDirty=this._onDidChangeDirty.event,this.onDidChangeLabel=this._onDidChangeLabel.event,this.onDidChangeCapabilities=this._onDidChangeCapabilities.event,this.onWillDispose=this._onWillDispose.event}get editorId(){}get capabilities(){return $I.Readonly}hasCapability(e){return e===$I.None?this.capabilities===$I.None:(this.capabilities&e)!==0}isReadonly(){return this.hasCapability($I.Readonly)}getName(){return`Editor ${this.typeId}`}getDescription(e){}getTitle(e){return this.getName()}getLabelExtraClasses(){return[]}getAriaLabel(){return this.getTitle(XI.SHORT)}getIcon(){}getTelemetryDescriptor(){return{typeId:this.typeId}}isDirty(){return!1}isModified(){return this.isDirty()}isSaving(){return!1}async resolve(){return null}async save(e,t){return this}async saveAs(e,t){return this}async revert(e,t){}async rename(e,t){}copy(){return this}canMove(e,t){return!0}canReopen(){return!0}matches(e){if(tL(e))return this===e;let t=e.options?.override;return this.editorId!==t&&t!==void 0&&this.editorId!==void 0?!1:ks(this.resource,lL.getCanonicalUri(e))}prefersEditorPane(e){return e.at(0)}toUntyped(e){}isDisposed(){return this._store.isDisposed}dispose(){this.isDisposed()||this._onWillDispose.fire(),super.dispose()}},hL=V(`editorService`),gL,_L=class extends mL{static#e=gL=this;static#t=this.ID=`workbench.editorinputs.sidebysideEditorInput`;get typeId(){return gL.ID}get capabilities(){let e=this.primary.capabilities;return e&=~$I.CanSplitInGroup,this.secondary.hasCapability($I.RequiresTrust)&&(e|=$I.RequiresTrust),this.secondary.hasCapability($I.Singleton)&&(e|=$I.Singleton),e|=$I.MultipleEditors,e}get resource(){if(this.hasIdenticalSides)return this.primary.resource}constructor(e,t,n,r,i){super(),this.preferredName=e,this.preferredDescription=t,this.secondary=n,this.primary=r,this.editorService=i,this.hasIdenticalSides=this.primary.matches(this.secondary),this.registerListeners()}registerListeners(){this._register(T.once(T.any(this.primary.onWillDispose,this.secondary.onWillDispose))(()=>{this.isDisposed()||this.dispose()})),this._register(this.primary.onDidChangeDirty(()=>this._onDidChangeDirty.fire())),this._register(this.primary.onDidChangeCapabilities(()=>this._onDidChangeCapabilities.fire())),this._register(this.secondary.onDidChangeCapabilities(()=>this._onDidChangeCapabilities.fire())),this._register(this.primary.onDidChangeLabel(()=>this._onDidChangeLabel.fire())),this._register(this.secondary.onDidChangeLabel(()=>this._onDidChangeLabel.fire()))}getName(){return this.getPreferredName()||(this.hasIdenticalSides?this.primary.getName():D(4063,`{0} - {1}`,this.secondary.getName(),this.primary.getName()))}getPreferredName(){return this.preferredName}getDescription(e){return this.getPreferredDescription()||(this.hasIdenticalSides?this.primary.getDescription(e):super.getDescription(e))}getPreferredDescription(){return this.preferredDescription}getTitle(e){let t;t=this.hasIdenticalSides?this.primary.getTitle(e)??this.getName():super.getTitle(e);let n=this.getPreferredTitle();return n&&(t=`${n} (${t})`),t}getPreferredTitle(){if(this.preferredName&&this.preferredDescription)return`${this.preferredName} ${this.preferredDescription}`;if(this.preferredName||this.preferredDescription)return this.preferredName??this.preferredDescription}getLabelExtraClasses(){return this.hasIdenticalSides?this.primary.getLabelExtraClasses():super.getLabelExtraClasses()}getAriaLabel(){return this.hasIdenticalSides?this.primary.getAriaLabel():super.getAriaLabel()}getTelemetryDescriptor(){return{...this.primary.getTelemetryDescriptor(),...super.getTelemetryDescriptor()}}isDirty(){return this.primary.isDirty()}isSaving(){return this.primary.isSaving()}async save(e,t){let n=await this.primary.save(e,t);return this.saveResultToEditor(n)}async saveAs(e,t){let n=await this.primary.saveAs(e,t);return this.saveResultToEditor(n)}saveResultToEditor(e){if(!e||!this.hasIdenticalSides)return e;if(this.primary.matches(e))return this;if(e instanceof mL)return new gL(this.preferredName,this.preferredDescription,e,e,this.editorService);if(!KI(e)&&!qI(e)&&!JI(e)&&!YI(e))return{primary:e,secondary:e,label:this.preferredName,description:this.preferredDescription}}revert(e,t){return this.primary.revert(e,t)}async rename(e,t){if(!this.hasIdenticalSides)return;let n=await this.primary.rename(e,t);if(n){if(tL(n.editor))return{editor:new gL(this.preferredName,this.preferredDescription,n.editor,n.editor,this.editorService),options:{...n.options,viewState:WI(this,e,this.editorService)}};if(GI(n.editor))return{editor:{label:this.preferredName,description:this.preferredDescription,primary:n.editor,secondary:n.editor,options:{...n.options,viewState:WI(this,e,this.editorService)}}}}}isReadonly(){return this.primary.isReadonly()}toUntyped(e){let t=this.primary.toUntyped(e),n=this.secondary.toUntyped(e);if(t&&n&&!KI(t)&&!KI(n)&&!qI(t)&&!qI(n)&&!JI(t)&&!JI(n)&&!YI(t)&&!YI(n)){let r={label:this.preferredName,description:this.preferredDescription,primary:t,secondary:n};return typeof e?.preserveViewState==`number`&&(r.options={viewState:WI(this,e.preserveViewState,this.editorService)}),r}}matches(e){return this===e?!0:rL(e)||KI(e)?!1:e instanceof gL||JI(e)?this.primary.matches(e.primary)&&this.secondary.matches(e.secondary):!1}};_L=gL=t([n(4,hL)],_L);var vL=class{canSerialize(e){let t=e;if(t.primary&&t.secondary){let[e,n]=this.getSerializers(t.secondary.typeId,t.primary.typeId);return!!(e?.canSerialize(t.secondary)&&n?.canSerialize(t.primary))}return!1}serialize(e){let t=e;if(t.primary&&t.secondary){let[e,n]=this.getSerializers(t.secondary.typeId,t.primary.typeId);if(n&&e){let r=n.serialize(t.primary),i=e.serialize(t.secondary);if(r&&i){let e={name:t.getPreferredName(),description:t.getPreferredDescription(),primarySerialized:r,secondarySerialized:i,primaryTypeId:t.primary.typeId,secondaryTypeId:t.secondary.typeId};return JSON.stringify(e)}}}}deserialize(e,t){let n=JSON.parse(t),[r,i]=this.getSerializers(n.secondaryTypeId,n.primaryTypeId);if(i&&r){let t=i.deserialize(e,n.primarySerialized),a=r.deserialize(e,n.secondarySerialized);if(t instanceof mL&&a instanceof mL)return this.createEditorInput(e,n.name,n.description,a,t)}}getSerializers(e,t){let n=hr.as(LI.EditorFactory);return[n.getEditorSerializer(e),n.getEditorSerializer(t)]}},fre=class extends vL{createEditorInput(e,t,n,r,i){return e.createInstance(_L,t,n,r,i)}},yL;(function(e){e[e.Left=1]=`Left`,e[e.Center=2]=`Center`,e[e.Right=4]=`Right`,e[e.Full=7]=`Full`})(yL||={});var bL;(function(e){e[e.Left=1]=`Left`,e[e.Center=2]=`Center`,e[e.Right=3]=`Right`})(bL||={});var xL;(function(e){e[e.Inline=1]=`Inline`,e[e.Gutter=2]=`Gutter`})(xL||={});var SL;(function(e){e[e.Normal=1]=`Normal`,e[e.Underlined=2]=`Underlined`})(SL||={});var CL;(function(e){e[e.LTR=0]=`LTR`,e[e.RTL=1]=`RTL`})(CL||={});var wL;(function(e){e[e.Both=0]=`Both`,e[e.Right=1]=`Right`,e[e.Left=2]=`Left`,e[e.None=3]=`None`})(wL||={});var TL;(function(e){e[e.TextDefined=0]=`TextDefined`,e[e.LF=1]=`LF`,e[e.CRLF=2]=`CRLF`})(TL||={});var EL;(function(e){e[e.LF=1]=`LF`,e[e.CRLF=2]=`CRLF`})(EL||={});var DL;(function(e){e[e.LF=0]=`LF`,e[e.CRLF=1]=`CRLF`})(DL||={});var OL=class{get originalIndentSize(){return this._indentSizeIsTabSize?`tabSize`:this.indentSize}constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),e.indentSize===`tabSize`?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,e.indentSize|0),this._indentSizeIsTabSize=!1),this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&rk(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}},kL=class{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}},AL;(function(e){e[e.AlwaysGrowsWhenTypingAtEdges=0]=`AlwaysGrowsWhenTypingAtEdges`,e[e.NeverGrowsWhenTypingAtEdges=1]=`NeverGrowsWhenTypingAtEdges`,e[e.GrowsOnlyWhenTypingBefore=2]=`GrowsOnlyWhenTypingBefore`,e[e.GrowsOnlyWhenTypingAfter=3]=`GrowsOnlyWhenTypingAfter`})(AL||={});function pre(e){return!!e&&typeof e.read==`function`}function jL(e){return!!(e&&e.uri)}var ML;(function(e){e[e.Left=0]=`Left`,e[e.Right=1]=`Right`,e[e.None=2]=`None`,e[e.LeftOfInjectedText=3]=`LeftOfInjectedText`,e[e.RightOfInjectedText=4]=`RightOfInjectedText`})(ML||={});var NL;(function(e){e[e.FIRST_LINE_DETECTION_LENGTH_LIMIT=1e3]=`FIRST_LINE_DETECTION_LENGTH_LIMIT`})(NL||={});var PL=class{constructor(e,t,n,r,i,a){this.identifier=e,this.range=t,this.text=n,this.forceMoveMarkers=r,this.isAutoWhitespaceEdit=i,this._isTracked=a}},mre=class{constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}},hre=class{constructor(e,t,n){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=n}};function gre(e){return!e.isTooLargeForSyncing()&&!e.isForSimpleWidget}var FL=class extends w{constructor(){super(...arguments),this._onWillDispose=this._register(new E),this.onWillDispose=this._onWillDispose.event,this.resolved=!1}async resolve(){this.resolved=!0}isResolved(){return this.resolved}isDisposed(){return this._store.isDisposed}dispose(){this._onWillDispose.fire(),super.dispose()}},_re={ModesRegistry:`editor.modesRegistry`},IL=new class extends w{constructor(){super(),this._onDidChangeLanguages=this._register(new E),this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}};hr.add(_re.ModesRegistry,IL);var LL=`plaintext`,RL=`.txt`;IL.registerLanguage({id:LL,extensions:[RL],aliases:[D(859,`Plain Text`),`text`],mimetypes:[Yw.text]}),hr.as(_P.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1},"[go]":{"editor.insertSpaces":!1},"[makefile]":{"editor.insertSpaces":!1},"[shellscript]":{"files.eol":`
`},"[yaml]":{"editor.insertSpaces":!0,"editor.tabSize":2}}}]);var zL=`languageDetection`,vre=`automaticlanguagedetection.likelywrong`,yre=`automaticlanguagedetection.stats`,BL=V(`ILanguageDetectionService`),VL=V(`accessibilityService`),HL,UL=class extends FL{static#e=HL=this;static#t=this.AUTO_DETECT_LANGUAGE_THROTTLE_DELAY=600;constructor(e,t,n,r,i){super(),this.modelService=e,this.languageService=t,this.languageDetectionService=n,this.accessibilityService=r,this.textEditorModelHandle=void 0,this.modelDisposeListener=this._register(new Ln),this.autoDetectLanguageThrottler=this._register(new lc(HL.AUTO_DETECT_LANGUAGE_THROTTLE_DELAY)),this._blockLanguageChangeListener=!1,this._languageChangeSource=void 0,i&&this.handleExistingModel(i)}handleExistingModel(e){let t=this.modelService.getModel(e);if(!t)throw Error(`Document with resource ${e.toString(!0)} does not exist`);this.textEditorModelHandle=e,this.registerModelDisposeListener(t)}registerModelDisposeListener(e){this.modelDisposeListener.value=e.onWillDispose(()=>{this.textEditorModelHandle=void 0,this.dispose()})}get textEditorModel(){return this.textEditorModelHandle?this.modelService.getModel(this.textEditorModelHandle):null}isReadonly(){return!0}get languageChangeSource(){return this._languageChangeSource}get hasLanguageSetExplicitly(){return typeof this._languageChangeSource==`string`}setLanguageId(e,t){this._languageChangeSource=`user`,this.setLanguageIdInternal(e,t)}setLanguageIdInternal(e,t){if(this.isResolved()&&!(!e||e===this.textEditorModel.getLanguageId())){this._blockLanguageChangeListener=!0;try{this.textEditorModel.setLanguage(this.languageService.createById(e),t)}finally{this._blockLanguageChangeListener=!1}}}installModelListeners(e){let t=this._register(e.onDidChangeLanguage(e=>{e.source===`languageDetection`||this._blockLanguageChangeListener||(this._languageChangeSource=`api`,t.dispose())}))}getLanguageId(){return this.textEditorModel?.getLanguageId()}autoDetectLanguage(){return this.autoDetectLanguageThrottler.trigger(()=>this.doAutoDetectLanguage())}async doAutoDetectLanguage(){if(this.hasLanguageSetExplicitly||!this.textEditorModelHandle||!this.languageDetectionService.isEnabledForLanguage(this.getLanguageId()??`plaintext`))return;let e=await this.languageDetectionService.detectLanguage(this.textEditorModelHandle),t=this.getLanguageId();if(e&&e!==t&&!this.isDisposed()){this.setLanguageIdInternal(e,zL);let t=this.languageService.getLanguageName(e);this.accessibilityService.alert(D(4064,`Language {0} was automatically detected and set as the language mode.`,t??e))}}createTextEditorModel(e,t,n){let r=this.getFirstLineText(e),i=this.getOrCreateLanguage(t,this.languageService,n,r);return this.doCreateTextEditorModel(e,i,t)}doCreateTextEditorModel(e,t,n){let r=n&&this.modelService.getModel(n);return r?this.updateTextEditorModel(e,t.languageId):(r=this.modelService.createModel(e,t,n),this.createdEditorModel=!0,this.registerModelDisposeListener(r)),this.textEditorModelHandle=r.uri,r}getFirstLineText(e){let t=e;return typeof t.getFirstLineText==`function`?t.getFirstLineText(NL.FIRST_LINE_DETECTION_LENGTH_LIMIT):e.getLineContent(1).substr(0,NL.FIRST_LINE_DETECTION_LENGTH_LIMIT)}getOrCreateLanguage(e,t,n,r){return!n||n===`plaintext`?t.createByFilepathOrFirstLine(e??null,r):t.createById(n)}updateTextEditorModel(e,t,n){this.isResolved()&&(e&&this.modelService.updateModel(this.textEditorModel,e,n),t&&t!==`plaintext`&&this.textEditorModel.getLanguageId()!==t&&this.textEditorModel.setLanguage(this.languageService.createById(t)))}createSnapshot(){return this.textEditorModel?this.textEditorModel.createSnapshot(!0):null}isResolved(){return!!this.textEditorModelHandle}dispose(){this.modelDisposeListener.dispose(),this.textEditorModelHandle&&this.createdEditorModel&&this.modelService.destroyModel(this.textEditorModelHandle),this.textEditorModelHandle=void 0,this.createdEditorModel=!1,super.dispose()}};UL=HL=t([n(0,II),n(1,FI),n(2,BL),n(3,VL)],UL);var WL=class extends FL{get originalModel(){return this._originalModel}get modifiedModel(){return this._modifiedModel}constructor(e,t){super(),this._originalModel=e,this._modifiedModel=t}async resolve(){await Promise.all([this._originalModel?.resolve(),this._modifiedModel?.resolve()])}isResolved(){return!!(this._originalModel?.isResolved()&&this._modifiedModel?.isResolved())}dispose(){super.dispose()}},GL=class extends WL{get originalModel(){return this._originalModel}get modifiedModel(){return this._modifiedModel}get textDiffEditorModel(){return this._textDiffEditorModel}constructor(e,t){super(e,t),this._textDiffEditorModel=void 0,this._originalModel=e,this._modifiedModel=t,this.updateTextDiffEditorModel()}async resolve(){await super.resolve(),this.updateTextDiffEditorModel()}updateTextDiffEditorModel(){this.originalModel?.isResolved()&&this.modifiedModel?.isResolved()&&(this._textDiffEditorModel?(this._textDiffEditorModel.original=this.originalModel.textEditorModel,this._textDiffEditorModel.modified=this.modifiedModel.textEditorModel):this._textDiffEditorModel={original:this.originalModel.textEditorModel,modified:this.modifiedModel.textEditorModel})}isResolved(){return!!this._textDiffEditorModel}isReadonly(){return!!this.modifiedModel&&this.modifiedModel.isReadonly()}dispose(){this._textDiffEditorModel=void 0,super.dispose()}};function bre(e,t){let{os:n,tildify:r,relative:i}=t;if(i){let t=xre(e,i,n);if(typeof t==`string`)return t}let a=e.fsPath;if(n===Ti.Windows&&!oi?a=a.replace(/\//g,`\\`):n!==Ti.Windows&&oi&&(a=a.replace(/\\/g,`/`)),n!==Ti.Windows&&r?.userHome){let t=r.userHome.fsPath,i;i=e.scheme!==r.userHome.scheme&&e.path[0]===oa.sep&&e.path[1]!==oa.sep?r.userHome.with({path:e.path}).fsPath:a,a=JL(i,t,n)}return(n===Ti.Windows?aa:oa).normalize(KL(a,n===Ti.Windows))}function xre(e,t,n){let r=n===Ti.Windows?aa:oa,i=n===Ti.Linux?Es:Os,a=t.getWorkspace(),o=a.folders.at(0);if(!o)return;e.scheme!==o.uri.scheme&&e.path[0]===oa.sep&&e.path[1]!==oa.sep&&(e=o.uri.with({path:e.path}));let s=t.getWorkspaceFolder(e);if(!s)return;let c;if(c=i.isEqual(s.uri,e)?``:i.relativePath(s.uri,e)??``,c&&=r.normalize(c),a.folders.length>1&&!t.noPrefix){let e=s.name?s.name:i.basenameOrAuthority(s.uri);c=c?`${e}  ${c}`:e}return c}function KL(e,t=oi){return ts(e,t)?e.charAt(0).toUpperCase()+e.slice(1):e}var qL=Object.create(null);function JL(e,t,n=Ei){if(n===Ti.Windows||!e||!t)return e;let r=qL.original===t?qL.normalized:void 0;r||(r=t,oi&&(r=Zo(r)),r=`${Ra(r,oa.sep)}${oa.sep}`,qL={original:t,normalized:r});let i=e;return oi&&(i=Zo(i)),(n===Ti.Linux?i.startsWith(r):no(i,r))?`~/${i.substr(r.length)}`:e}function Sre(e,t){return e.replace(/^~($|\/|\\)/,`${t}$1`)}var YL=``,XL=`\\\\`,ZL=`~`;function QL(e,t=ga){let n=Array(e.length),r=!1;for(let i=0;i<e.length;i++){let a=e[i];if(a===``){n[i]=`.${t}`;continue}if(!a){n[i]=a;continue}r=!0;let o=``,s=a;s.indexOf(XL)===0?(o=s.substr(0,s.indexOf(XL)+2),s=s.substr(s.indexOf(XL)+2)):s.indexOf(t)===0?(o=s.substr(0,s.indexOf(t)+t.length),s=s.substr(s.indexOf(t)+t.length)):s.indexOf(ZL)===0&&(o=s.substr(0,s.indexOf(ZL)+1),s=s.substr(s.indexOf(ZL)+1));let c=s.split(t);for(let a=1;r&&a<=c.length;a++)for(let s=c.length-a;r&&s>=0;s--){r=!1;let l=c.slice(s,s+a).join(t);for(let n=0;!r&&n<e.length;n++)if(n!==i&&e[n]&&e[n].indexOf(l)>-1){let i=s+a===c.length,o=s>0&&e[n].indexOf(t)>-1?t+l:l,u=e[n].endsWith(o);r=!i||u}if(!r){let e=``;(c[0].endsWith(`:`)||o!==``)&&(s===1&&(s=0,a++,l=c[0]+t+l),s>0&&(e=c[0]+t),e=o+e),s>0&&(e=e+YL+t),e+=l,s+a<c.length&&(e=e+t+YL),n[i]=e}}r&&(n[i]=a)}return n}var $L;(function(e){e[e.TEXT=0]=`TEXT`,e[e.VARIABLE=1]=`VARIABLE`,e[e.SEPARATOR=2]=`SEPARATOR`})($L||={});function Cre(e,t=Object.create(null)){let n=[],r=!1,i=``;for(let a of e)if(a===`$`||r&&a===`{`)i&&n.push({value:i,type:$L.TEXT}),i=``,r=!0;else if(a===`}`&&r){let e=t[i];if(typeof e==`string`)e.length&&n.push({value:e,type:$L.VARIABLE});else if(e){let t=n[n.length-1];(!t||t.type!==$L.SEPARATOR)&&n.push({value:e.label,type:$L.SEPARATOR})}i=``,r=!1}else i+=a;return i&&!r&&n.push({value:i,type:$L.TEXT}),n.filter((e,t)=>e.type===$L.SEPARATOR?[n[t-1],n[t+1]].every(e=>e&&(e.type===$L.VARIABLE||e.type===$L.TEXT)&&e.value.length>0):!0).map(e=>e.value).join(``)}function wre(e,t){return si||t?e.replace(/\(&&\w\)|&&/g,``).replace(/&/g,si?`&`:`&&`):e.replace(/&&|&/g,e=>e===`&`?`&&`:`&`)}function Tre(e,t){let n=e.replace(/\(&&\w\)|&&/g,``);if(t)return n;if(si)return{withMnemonic:n,withoutMnemonic:n};let r;return r=oi?e.replace(/&&|&/g,e=>e===`&`?`&&`:`&`):e.replace(/&&/g,`_`),{withMnemonic:r,withoutMnemonic:n}}function Ere(e){return e.replace(/&/g,`&&`)}function Dre(e){if(e.endsWith(`]`)){let t=e.lastIndexOf(` [`,e.length-2);if(t!==-1){let n=eR(e.substring(0,t)),r=e.substring(t);return{name:n.name+r,parentPath:n.parentPath}}}return eR(e)}function eR(e){let t=e.indexOf(`/`)===-1?aa:oa,n=t.basename(e),r=t.dirname(e);return n.length?{name:n,parentPath:r}:{name:r,parentPath:``}}function tR(e){let t=e;return typeof t?.resolve==`function`&&typeof t?.isResolved==`function`}var nR;(function(e){e[e.ACTIVATE=1]=`ACTIVATE`,e[e.RESTORE=2]=`RESTORE`,e[e.PRESERVE=3]=`PRESERVE`})(nR||={});var rR;(function(e){e[e.PICK=0]=`PICK`,e[e.EXCLUSIVE_ONLY=1]=`EXCLUSIVE_ONLY`})(rR||={});var iR;(function(e){e[e.API=0]=`API`,e[e.USER=1]=`USER`})(iR||={});var aR;(function(e){e[e.Center=0]=`Center`,e[e.CenterIfOutsideViewport=1]=`CenterIfOutsideViewport`,e[e.NearTop=2]=`NearTop`,e[e.NearTopIfOutsideViewport=3]=`NearTopIfOutsideViewport`})(aR||={});var oR;(function(e){e.PROGRAMMATIC=`api`,e.NAVIGATION=`code.navigation`,e.JUMP=`code.jump`})(oR||={});function Ore(e,t,n){return t?.documentVersion===n?.documentVersion&&e.extUri.isEqual(t?.original,n?.original)&&e.extUri.isEqual(t?.modified,n?.modified)&&ut(t?.changes,n?.changes,(e,t)=>e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3])}var sR,cR=class extends _L{static#e=sR=this;static#t=this.ID=`workbench.editors.diffEditorInput`;get typeId(){return sR.ID}get editorId(){return this.modified.editorId===this.original.editorId?this.modified.editorId:void 0}get capabilities(){let e=super.capabilities;return this.labels.forceDescription&&(e|=$I.ForceDescription),e}constructor(e,t,n,r,i,a){super(e,t,n,r,a),this.original=n,this.modified=r,this.forceOpenAsBinary=i,this.cachedModel=void 0,this.labels=this.computeLabels()}computeLabels(){let e,t=!1;if(this.preferredName)e=this.preferredName;else{let n=this.original.getName(),r=this.modified.getName();e=D(4062,`{0}  {1}`,n,r),t=n===r}let n,r,i;if(this.preferredDescription)n=this.preferredDescription,r=this.preferredDescription,i=this.preferredDescription;else{n=this.computeLabel(this.original.getDescription(XI.SHORT),this.modified.getDescription(XI.SHORT)),i=this.computeLabel(this.original.getDescription(XI.LONG),this.modified.getDescription(XI.LONG));let e=this.original.getDescription(XI.MEDIUM),t=this.modified.getDescription(XI.MEDIUM);if(typeof e==`string`&&typeof t==`string`&&(e||t)){let[n,i]=QL([e,t]);r=this.computeLabel(n,i)}}let a=this.computeLabel(this.original.getTitle(XI.SHORT)??this.original.getName(),this.modified.getTitle(XI.SHORT)??this.modified.getName(),`  `),o=this.computeLabel(this.original.getTitle(XI.MEDIUM)??this.original.getName(),this.modified.getTitle(XI.MEDIUM)??this.modified.getName(),`  `),s=this.computeLabel(this.original.getTitle(XI.LONG)??this.original.getName(),this.modified.getTitle(XI.LONG)??this.modified.getName(),`  `),c=this.getPreferredTitle();return c&&(a=`${c} (${a})`,o=`${c} (${o})`,s=`${c} (${s})`),{name:e,shortDescription:n,mediumDescription:r,longDescription:i,forceDescription:t,shortTitle:a,mediumTitle:o,longTitle:s}}computeLabel(e,t,n=` - `){if(!(!e||!t))return e===t?t:`${e}${n}${t}`}getName(){return this.labels.name}getDescription(e=XI.MEDIUM){switch(e){case XI.SHORT:return this.labels.shortDescription;case XI.LONG:return this.labels.longDescription;case XI.MEDIUM:default:return this.labels.mediumDescription}}getTitle(e){switch(e){case XI.SHORT:return this.labels.shortTitle;case XI.LONG:return this.labels.longTitle;default:case XI.MEDIUM:return this.labels.mediumTitle}}async resolve(){let e=await this.createModel();return this.cachedModel?.dispose(),this.cachedModel=e,this.cachedModel}prefersEditorPane(e){return this.forceOpenAsBinary?e.find(e=>e.typeId===VI):e.find(e=>e.typeId===BI)}async createModel(){let[e,t]=await Promise.all([this.original.resolve(),this.modified.resolve()]);return t instanceof UL&&e instanceof UL?new GL(e,t):new WL(tR(e)?e:void 0,tR(t)?t:void 0)}toUntyped(e){let t=super.toUntyped(e);if(t)return{...t,modified:t.primary,original:t.secondary}}matches(e){return this===e?!0:e instanceof sR?this.modified.matches(e.modified)&&this.original.matches(e.original)&&e.forceOpenAsBinary===this.forceOpenAsBinary:KI(e)?this.modified.matches(e.modified)&&this.original.matches(e.original):!1}dispose(){this.cachedModel&&=(this.cachedModel.dispose(),void 0),super.dispose()}};cR=sR=t([n(5,hL)],cR);var kre=class extends vL{createEditorInput(e,t,n,r,i){return e.createInstance(cR,t,n,r,i,void 0)}},lR,uR=new W(`workbenchState`,void 0,{type:`string`,description:D(3983,`The kind of workspace opened in the window, either 'empty' (no workspace), 'folder' (single folder) or 'workspace' (multi-root workspace)`)}),dR=new W(`workspaceFolderCount`,0,D(3984,`The number of root folders in the workspace`)),fR=new W(`openFolderWorkspaceSupport`,!0,!0),pR=new W(`enterMultiRootWorkspaceSupport`,!0,!0),mR=new W(`emptyWorkspaceSupport`,!0,!0),hR=new W(`dirtyWorkingCopies`,!1,D(3985,`Whether there are any working copies with unsaved changes`)),gR=new W(`remoteName`,``,D(3986,`The name of the remote the window is connected to or an empty string if not connected to any remote`)),_R=new W(`virtualWorkspace`,``,D(3987,`The scheme of the current workspace is from a virtual file system or an empty string.`)),vR=new W(`temporaryWorkspace`,!1,D(3988,`The scheme of the current workspace is from a temporary file system.`)),Are=new W(`isAgentSessionsWorkspace`,!1,D(3989,`Whether the current workspace is the agent sessions workspace.`)),jre=new W(`workbenchMode`,``,D(3990,`The current workbench mode.`)),yR=new W(`hasWebFileSystemAccess`,!1,!0),Mre=new W(`embedderIdentifier`,void 0,D(3991,`The identifier of the embedder according to the product service, if one is defined`)),bR=new W(`inAutomation`,!1,D(3992,`Whether VS Code is running under automation/smoke test`)),xR=new W(`isSandboxWorkspace`,!1,!0),SR=new W(`isFullscreen`,!1,D(3993,`Whether the main window is in fullscreen mode`)),CR=new W(`isAuxiliaryWindowFocusedContext`,!1,D(3994,`Whether an auxiliary window is focused`)),Nre=new W(`isAuxiliaryWindow`,!1,D(3995,`Window is an auxiliary window`)),Pre=new W(`activeEditorIsDirty`,!1,D(3996,`Whether the active editor has unsaved changes`)),Fre=new W(`activeEditorIsNotPreview`,!1,D(3997,`Whether the active editor is not in preview mode`)),Ire=new W(`activeEditorIsFirstInGroup`,!1,D(3998,`Whether the active editor is the first one in its group`)),Lre=new W(`activeEditorIsLastInGroup`,!1,D(3999,`Whether the active editor is the last one in its group`)),Rre=new W(`activeEditorIsPinned`,!1,D(4e3,`Whether the active editor is pinned`)),zre=new W(`activeEditorIsReadonly`,!1,D(4001,`Whether the active editor is read-only`)),Bre=new W(`activeCompareEditorCanSwap`,!1,D(4002,`Whether the active compare editor can swap sides`)),Vre=new W(`activeEditorCanToggleReadonly`,!0,D(4003,`Whether the active editor can toggle between being read-only or writeable`)),Hre=new W(`activeEditorCanRevert`,!1,D(4004,`Whether the active editor can revert`)),Ure=new W(`activeEditorCanSplitInGroup`,!0),Wre=new W(`activeEditor`,null,{type:`string`,description:D(4005,`The identifier of the active editor`)}),Gre=new W(`activeEditorAvailableEditorIds`,``,D(4006,`The available editor identifiers that are usable for the active editor`)),Kre=new W(`textCompareEditorVisible`,!1,D(4007,`Whether a text compare editor is visible`)),qre=new W(`textCompareEditorActive`,!1,D(4008,`Whether a text compare editor is active`)),Jre=new W(`sideBySideEditorActive`,!1,D(4009,`Whether a side by side editor is active`)),Yre=new W(`groupEditorsCount`,0,D(4010,`The number of opened editor groups`)),wR=new W(`activeEditorGroupEmpty`,!1,D(4011,`Whether the active editor group is empty`)),Xre=new W(`activeEditorGroupIndex`,0,D(4012,`The index of the active editor group`)),Zre=new W(`activeEditorGroupLast`,!1,D(4013,`Whether the active editor group is the last group`)),TR=new W(`activeEditorGroupLocked`,!1,D(4014,`Whether the active editor group is locked`)),ER=new W(`multipleEditorGroups`,!1,D(4015,`Whether there are multiple editor groups opened`)),Qre=new W(`multipleEditorsSelectedInGroup`,!1,D(4016,`Whether multiple editors have been selected in an editor group`)),$re=new W(`twoEditorsSelectedInGroup`,!1,D(4017,`Whether exactly two editors have been selected in an editor group`)),eie=new W(`SelectedEditorsInGroupFileOrUntitledResourceContextKey`,!0,D(4018,`Whether all selected editors in a group have a file or untitled resource associated`)),tie=new W(`editorPartMultipleEditorGroups`,!1,D(4019,`Whether there are multiple editor groups opened in an editor part`)),nie=new W(`editorPartMaximizedEditorGroup`,!1,D(4020,`Editor Part has a maximized group`)),rie=new W(`editorIsOpen`,!1,D(4021,`Whether an editor is open`)),DR=new W(`inZenMode`,!1,D(4022,`Whether Zen mode is enabled`)),OR=new W(`isCenteredLayout`,!1,D(4023,`Whether centered layout is enabled for the main editor`)),kR=new W(`splitEditorsVertically`,!1,D(4024,`Whether editors split vertically`)),AR=new W(`mainEditorAreaVisible`,!0,D(4025,`Whether the editor area in the main window is visible`)),jR=new W(`editorTabsVisible`,!0,D(4026,`Whether editor tabs are visible`)),MR=new W(`sideBarVisible`,!1,D(4027,`Whether the sidebar is visible`)),iie=new W(`sideBarFocus`,!1,D(4028,`Whether the sidebar has keyboard focus`)),aie=new W(`activeViewlet`,``,D(4029,`The identifier of the active viewlet`)),oie=new W(`statusBarFocused`,!1,D(4030,`Whether the status bar has keyboard focus`)),NR=new W(`titleBarStyle`,`custom`,D(4031,`Style of the window title bar`)),PR=new W(`titleBarVisible`,!1,D(4032,`Whether the title bar is visible`)),sie=new W(`isCompactTitleBar`,!1,D(4033,`Title bar is in compact mode`)),cie=new W(`bannerFocused`,!1,D(4034,`Whether the banner has keyboard focus`)),lie=new W(`notificationFocus`,!0,D(4035,`Whether a notification has keyboard focus`)),uie=new W(`notificationCenterVisible`,!1,D(4036,`Whether the notifications center is visible`)),die=new W(`notificationToastsVisible`,!1,D(4037,`Whether a notification toast is visible`)),fie=new W(`activeAuxiliary`,``,D(4038,`The identifier of the active auxiliary panel`)),pie=new W(`auxiliaryBarFocus`,!1,D(4039,`Whether the auxiliary bar has keyboard focus`)),FR=new W(`auxiliaryBarVisible`,!1,D(4040,`Whether the auxiliary bar is visible`)),IR=new W(`auxiliaryBarMaximized`,!1,D(4041,`Whether the auxiliary bar is maximized`)),mie=new W(`activePanel`,``,D(4042,`The identifier of the active panel`)),hie=new W(`panelFocus`,!1,D(4043,`Whether the panel has keyboard focus`)),LR=new W(`panelPosition`,`bottom`,D(4044,`The position of the panel, always 'bottom'`)),RR=new W(`panelAlignment`,`center`,D(4045,`The alignment of the panel, either 'center', 'left', 'right' or 'justify'`)),zR=new W(`panelVisible`,!1,D(4046,`Whether the panel is visible`)),BR=new W(`panelMaximized`,!1,D(4047,`Whether the panel is maximized`)),gie=new W(`focusedView`,``,D(4048,`The identifier of the view that has keyboard focus`));function _ie(e){return`view.${e}.visible`}var VR=class{static#e=lR=this;static#t=this.Scheme=new W(`resourceScheme`,void 0,{type:`string`,description:D(4049,`The scheme of the resource`)});static#n=this.Filename=new W(`resourceFilename`,void 0,{type:`string`,description:D(4050,`The file name of the resource`)});static#r=this.Dirname=new W(`resourceDirname`,void 0,{type:`string`,description:D(4051,`The folder name the resource is contained in`)});static#i=this.Path=new W(`resourcePath`,void 0,{type:`string`,description:D(4052,`The full path of the resource`)});static#a=this.LangId=new W(`resourceLangId`,void 0,{type:`string`,description:D(4053,`The language identifier of the resource`)});static#o=this.Resource=new W(`resource`,void 0,{type:`URI`,description:D(4054,`The full value of the resource including scheme and path`)});static#s=this.Extension=new W(`resourceExtname`,void 0,{type:`string`,description:D(4055,`The extension name of the resource`)});static#c=this.HasResource=new W(`resourceSet`,void 0,{type:`boolean`,description:D(4056,`Whether a resource is present or not`)});static#l=this.IsFileSystemResource=new W(`isFileSystemResource`,void 0,{type:`boolean`,description:D(4057,`Whether the resource is backed by a file system provider`)});constructor(e,t,n,r){this._contextKeyService=e,this._fileService=t,this._languageService=n,this._modelService=r,this._schemeKey=lR.Scheme.bindTo(this._contextKeyService),this._filenameKey=lR.Filename.bindTo(this._contextKeyService),this._dirnameKey=lR.Dirname.bindTo(this._contextKeyService),this._pathKey=lR.Path.bindTo(this._contextKeyService),this._langIdKey=lR.LangId.bindTo(this._contextKeyService),this._resourceKey=lR.Resource.bindTo(this._contextKeyService),this._extensionKey=lR.Extension.bindTo(this._contextKeyService),this._hasResource=lR.HasResource.bindTo(this._contextKeyService),this._isFileSystemResource=lR.IsFileSystemResource.bindTo(this._contextKeyService)}_setLangId(){let e=this.get();if(!e){this._langIdKey.set(null);return}let t=this._modelService.getModel(e)?.getLanguageId()??this._languageService.guessLanguageIdByFilepathOrFirstLine(e);this._langIdKey.set(t)}set(e){e??=void 0,!ks(this._value,e)&&(this._value=e,this._contextKeyService.bufferChangeEvents(()=>{this._resourceKey.set(e?e.toString():null),this._schemeKey.set(e?e.scheme:null),this._filenameKey.set(e?Ms(e):null),this._dirnameKey.set(e?this.uriToPath(Ps(e)):null),this._pathKey.set(e?this.uriToPath(e):null),this._setLangId(),this._extensionKey.set(e?Ns(e):null),this._hasResource.set(!!e),this._isFileSystemResource.set(e?this._fileService.hasProvider(e):!1)}))}uriToPath(e){return e.scheme===A.file?e.fsPath:e.path}reset(){this._value=void 0,this._contextKeyService.bufferChangeEvents(()=>{this._resourceKey.reset(),this._schemeKey.reset(),this._filenameKey.reset(),this._dirnameKey.reset(),this._pathKey.reset(),this._langIdKey.reset(),this._extensionKey.reset(),this._hasResource.reset(),this._isFileSystemResource.reset()})}get(){return this._value}};VR=lR=t([n(0,uS),n(1,Ib),n(2,FI),n(3,II)],VR);var HR=class extends VR{constructor(e,t,n,r){super(e,t,n,r),this._disposables=new C,this._disposables.add(t.onDidChangeFileSystemProviderRegistrations(()=>{let e=this.get();this._isFileSystemResource.set(!!(e&&t.hasProvider(e)))})),this._disposables.add(r.onModelAdded(e=>{ks(e.uri,this.get())&&this._setLangId()})),this._disposables.add(r.onModelLanguageChanged(e=>{ks(e.model.uri,this.get())&&this._setLangId()}))}dispose(){this._disposables.dispose()}};HR=t([n(0,uS),n(1,Ib),n(2,FI),n(3,II)],HR);function vie(e,t,n){if(!t){e.set(``);return}let r=UR(t,n);e.set(r.join(`,`))}function UR(e,t){if(e.resource?.scheme===A.untitled&&e.editorId!==RI.id)return[];if(e instanceof cR){let n=UR(e.original,t),r=new Set(UR(e.modified,t));return n.filter(e=>r.has(e))}return e.resource?t.getEditors(e.resource).map(e=>e.id):[]}var WR=V(`quickInputService`),GR=V(`accessibilitySignalService`),KR=V(`openerService`);s({}),M.white.toString(),M.white.toString();var yie=Object.freeze({allowedTags:{override:[`b`,`i`,`u`,`code`,`span`]},allowedAttributes:{override:[`class`]}}),qR=class extends w{get onDidClick(){return this._onDidClick.event}get onDidEscape(){return this._onDidEscape.event}constructor(e,t){super(),this._label=``,this._onDidClick=this._register(new E),this._onDidEscape=this._register(new E),this.options=t,this._element=v_(`a`),this._element.classList.add(`monaco-button`),this._element.tabIndex=0,this._element.setAttribute(`role`,`button`),this._element.classList.toggle(`secondary`,!!t.secondary),this._element.classList.toggle(`small`,!!t.small);let n=t.secondary?t.buttonSecondaryBackground:t.buttonBackground,r=t.secondary?t.buttonSecondaryForeground:t.buttonForeground,i=t.secondary?t.buttonSecondaryBorder:t.buttonBorder;this._element.style.color=r||``,this._element.style.backgroundColor=n||``,i&&(this._element.style.border=`1px solid ${i}`),t.supportShortLabel&&(this._labelShortElement=v_(`div`),this._labelShortElement.classList.add(`monaco-button-label-short`),this._element.appendChild(this._labelShortElement),this._labelElement=v_(`div`),this._labelElement.classList.add(`monaco-button-label`),this._element.appendChild(this._labelElement),this._element.classList.add(`monaco-text-button-with-short-label`)),typeof t.title==`string`&&this.setTitle(t.title),typeof t.ariaLabel==`string`&&this._element.setAttribute(`aria-label`,t.ariaLabel),e.appendChild(this._element),this.enabled=!t.disabled,this._register(RC.addTarget(this._element)),[R.CLICK,LC.Tap].forEach(e=>{this._register(L(this._element,e,e=>{if(!this.enabled){M_.stop(e);return}this._onDidClick.fire(e)}))}),this._register(L(this._element,R.KEY_DOWN,e=>{let t=new vp(e),n=!1;this.enabled&&(t.equals(F.Enter)||t.equals(F.Space))?(this._onDidClick.fire(e),n=!0):t.equals(F.Escape)&&(this._onDidEscape.fire(e),this._element.blur(),n=!0),n&&M_.stop(t,!0)})),this._register(L(this._element,R.MOUSE_OVER,e=>{this._element.classList.contains(`disabled`)||this.updateStyles(!0)})),this._register(L(this._element,R.MOUSE_OUT,e=>{this.updateStyles(!1)})),this.focusTracker=this._register(I_(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.updateStyles(!0)})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.updateStyles(!1)}))}dispose(){super.dispose(),this._element.remove()}getContentElements(e){let t=[];for(let n of EA(e))if(typeof n==`string`){if(n=n.trim(),n===``)continue;let e=v_(`span`);e.textContent=n,t.push(e)}else t.push(n);return t}updateStyles(e){let t,n,r;this.options.secondary?(t=e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground,n=this.options.buttonSecondaryForeground,r=this.options.buttonSecondaryBorder):(t=e?this.options.buttonHoverBackground:this.options.buttonBackground,n=this.options.buttonForeground,r=this.options.buttonBorder),this._element.style.backgroundColor=t||``,this._element.style.color=n||``,this._element.style.border=r?`1px solid ${r}`:``}get element(){return this._element}set label(e){if(this._label===e||bD(this._label)&&bD(e)&&xD(this._label,e))return;this._element.classList.add(`monaco-text-button`);let t=this.options.supportShortLabel?this._labelElement:this._element;if(bD(e)){let n=AA(e,void 0,v_(`span`));n.dispose();let r=n.element.querySelector(`p`)?.innerHTML;r?wA(t,r,yie):z_(t)}else this.options.supportIcons?z_(t,...this.getContentElements(e)):t.textContent=e;let n=``;typeof this.options.title==`string`?n=this.options.title:this.options.title&&(n=UA(e)),this.setTitle(n),this._setAriaLabel(),this._label=e}get label(){return this._label}set labelShort(e){!this.options.supportShortLabel||!this._labelShortElement||(this.options.supportIcons?z_(this._labelShortElement,...this.getContentElements(e)):this._labelShortElement.textContent=e)}_setAriaLabel(){typeof this.options.ariaLabel==`string`?this._element.setAttribute(`aria-label`,this.options.ariaLabel):typeof this.options.title==`string`&&this._element.setAttribute(`aria-label`,this.options.title)}set icon(e){this._setAriaLabel();let t=Array.from(this._element.classList).filter(e=>e.startsWith(`codicon-`));this._element.classList.remove(...t),this._element.classList.add(...lC.asClassNameArray(e))}set enabled(e){e?(this._element.classList.remove(`disabled`),this._element.setAttribute(`aria-disabled`,`false`),this._element.tabIndex=0):(this._element.classList.add(`disabled`),this._element.setAttribute(`aria-disabled`,`true`))}get enabled(){return!this._element.classList.contains(`disabled`)}set secondary(e){this._element.classList.toggle(`secondary`,e),this.options.secondary=e,this.updateStyles(!1)}set checked(e){e?(this._element.classList.add(`checked`),this._element.setAttribute(`aria-checked`,`true`)):(this._element.classList.remove(`checked`),this._element.setAttribute(`aria-checked`,`false`))}get checked(){return this._element.classList.contains(`checked`)}setTitle(e){!this._hover&&e!==``?this._hover=this._register(wE().setupManagedHover(this.options.hoverDelegate??kE(`element`),this._element,e)):this._hover&&this._hover.update(e)}focus(){this._element.focus()}hasFocus(){return s_(this._element)}},JR=class extends w{constructor(e,t){super(),this._onDidClick=this._register(new E),this.onDidClick=this._onDidClick.event,this.element=v_(`div`),this.element.classList.add(`monaco-button-dropdown`),e.appendChild(this.element),t.hoverDelegate||(t={...t,hoverDelegate:this._register(AE())}),this.primaryButton=this._register(new qR(this.element,t)),this._register(this.primaryButton.onDidClick(e=>this._onDidClick.fire(e))),this.action=nS({id:`primaryAction`,label:UA(this.primaryButton.label),run:async()=>this._onDidClick.fire(void 0)}),this.separatorContainer=v_(`div`),this.separatorContainer.classList.add(`monaco-button-dropdown-separator`),this.separator=v_(`div`),this.separatorContainer.appendChild(this.separator),this.element.appendChild(this.separatorContainer);let n=t.buttonBorder;n&&(this.separatorContainer.style.borderTop=`1px solid `+n,this.separatorContainer.style.borderBottom=`1px solid `+n);let r=t.secondary?t.buttonSecondaryBackground:t.buttonBackground;this.separatorContainer.style.backgroundColor=r??``,this.separator.style.backgroundColor=t.buttonSeparator??``,this.dropdownButton=this._register(new qR(this.element,{...t,title:D(2,`More Actions...`),supportIcons:!0})),this.dropdownButton.element.setAttribute(`aria-haspopup`,`true`),this.dropdownButton.element.setAttribute(`aria-expanded`,`false`),this.dropdownButton.element.classList.add(`monaco-dropdown-button`),this.dropdownButton.icon=x.dropDownButton,this._register(this.dropdownButton.onDidClick(e=>{let n=Array.isArray(t.actions)?t.actions:t.actions.getActions();t.contextMenuProvider.showContextMenu({getAnchor:()=>this.dropdownButton.element,getActions:()=>t.addPrimaryActionToDropdown===!1?[...n]:[this.action,...n],actionRunner:t.actionRunner,onHide:()=>this.dropdownButton.element.setAttribute(`aria-expanded`,`false`),layer:t.dropdownLayer}),this.dropdownButton.element.setAttribute(`aria-expanded`,`true`)}))}dispose(){super.dispose(),this.element.remove()}set label(e){this.primaryButton.label=e,this.action.label=e}set icon(e){this.primaryButton.icon=e}set enabled(e){this.primaryButton.enabled=e,this.dropdownButton.enabled=e,this.element.classList.toggle(`disabled`,!e)}get enabled(){return this.primaryButton.enabled}set checked(e){this.primaryButton.checked=e}get checked(){return this.primaryButton.checked}focus(){this.primaryButton.focus()}hasFocus(){return this.primaryButton.hasFocus()||this.dropdownButton.hasFocus()}},YR=class{constructor(e,t){this.options=t,this._element=v_(`div`),this._element.classList.add(`monaco-description-button`),this._button=new qR(this._element,t),this._descriptionElement=v_(`div`),this._descriptionElement.classList.add(`monaco-button-description`),this._element.appendChild(this._descriptionElement),e.appendChild(this._element)}get onDidClick(){return this._button.onDidClick}get element(){return this._element}set label(e){this._button.label=e}set icon(e){this._button.icon=e}get enabled(){return this._button.enabled}set enabled(e){this._button.enabled=e}set checked(e){this._button.checked=e}get checked(){return this._button.checked}focus(){this._button.focus()}hasFocus(){return this._button.hasFocus()}dispose(){this._button.dispose()}set description(e){this.options.supportIcons?z_(this._descriptionElement,...EA(e)):this._descriptionElement.textContent=e}},XR;(function(e){e[e.Horizontal=0]=`Horizontal`,e[e.Vertical=1]=`Vertical`})(XR||={});var bie=class{constructor(e,t){this.container=e,this.options=t,this._buttons=[],this._buttonStore=new C}dispose(){this._buttonStore.dispose()}get buttons(){return this._buttons}clear(){this._buttonStore.clear(),this._buttons.length=0}addButton(e){let t=this._buttonStore.add(new qR(this.container,e));return this.pushButton(t),t}addButtonWithDescription(e){let t=this._buttonStore.add(new YR(this.container,e));return this.pushButton(t),t}addButtonWithDropdown(e){let t=this._buttonStore.add(new JR(this.container,e));return this.pushButton(t),t}pushButton(e){this._buttons.push(e);let t=this._buttons.length-1;this._buttonStore.add(L(e.element,R.KEY_DOWN,e=>{let n=new vp(e),r=!0,i;n.equals(this.options?.alignment===XR.Vertical?F.UpArrow:F.LeftArrow)?i=t>0?t-1:this._buttons.length-1:n.equals(this.options?.alignment===XR.Vertical?F.DownArrow:F.RightArrow)?i=t===this._buttons.length-1?0:t+1:r=!1,r&&typeof i==`number`&&(this._buttons[i].focus(),M_.stop(e,!0))}))}},ZR=V(`clipboardService`),QR={IconContribution:`base.contributions.icons`},xie;(function(e){function t(e,t){let n=e.defaults;for(;lC.isThemeIcon(n);){let e=nz.getIcon(n.id);if(!e)return;n=e.defaults}return n}e.getDefinition=t})(xie||={});var $R;(function(e){function t(e){return{weight:e.weight,style:e.style,src:e.src.map(e=>({format:e.format,location:e.location.toString()}))}}e.toJSONObject=t;function n(e){let t=e=>ge(e)?e:void 0;if(e&&Array.isArray(e.src)&&e.src.every(e=>ge(e.format)&&ge(e.location)))return{weight:t(e.weight),style:t(e.style),src:e.src.map(e=>({format:e.format,location:k.parse(e.location)}))}}e.fromJSONObject=n})($R||={});var ez=/^([\w_-]+)$/,Sie=/^(normal|italic|(oblique[ \w\s-]+))$/,Cie=/^(normal|bold|lighter|bolder|(\d{0-1000}))$/,wie=/^([\w_.%+-]+)$/,Tie=/^woff|woff2|truetype|opentype|embedded-opentype|svg$/,Eie=/^#[0-9a-fA-F]{0,6}$/,tz=D(2369,`The font ID must only contain letters, numbers, underscores and dashes.`),nz=new class extends w{constructor(){super(),this._onDidChange=this._register(new E),this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:`object`,properties:{fontId:{type:`string`,description:D(2370,`The id of the font to use. If not set, the font that is defined first is used.`),pattern:ez.source,patternErrorMessage:tz},fontCharacter:{type:`string`,description:D(2371,`The font character associated with the icon definition.`)}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:`\\\\e030`}}]}},type:`object`,properties:{}},this.iconReferenceSchema={type:`string`,pattern:`^${lC.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,n,r){let i=this.iconsById[e];if(i){if(n&&!i.description){i.description=n,this.iconSchema.properties[e].markdownDescription=`${n} $(${e})`;let t=this.iconReferenceSchema.enum.indexOf(e);t!==-1&&(this.iconReferenceSchema.enumDescriptions[t]=n),this._onDidChange.fire()}return i}let a={id:e,description:n,defaults:t,deprecationMessage:r};this.iconsById[e]=a;let o={$ref:`#/definitions/icons`};return r&&(o.deprecationMessage=r),n&&(o.markdownDescription=`${n}: $(${e})`),this.iconSchema.properties[e]=o,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||``),this._onDidChange.fire(),{id:e}}deregisterIcon(e){delete this.iconsById[e],delete this.iconSchema.properties[e];let t=this.iconReferenceSchema.enum.indexOf(e);t!==-1&&(this.iconReferenceSchema.enum.splice(t,1),this.iconReferenceSchema.enumDescriptions.splice(t,1)),this._onDidChange.fire()}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}getIconReferenceSchema(){return this.iconReferenceSchema}registerIconFont(e,t){return this.iconFontsById[e]||(this.iconFontsById[e]=t,this._onDidChange.fire(),t)}deregisterIconFont(e){delete this.iconFontsById[e]}getIconFont(e){return this.iconFontsById[e]}toString(){let e=(e,t)=>e.id.localeCompare(t.id),t=e=>{for(;lC.isThemeIcon(e.defaults);)e=this.iconsById[e.defaults.id];return`codicon codicon-${e?e.id:``}`},n=[];n.push(`| preview     | identifier                        | default codicon ID                | description`),n.push(`| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |`);let r=Object.keys(this.iconsById).map(e=>this.iconsById[e]);for(let i of r.filter(e=>!!e.description).sort(e))n.push(`|<i class="${t(i)}"></i>|${i.id}|${lC.isThemeIcon(i.defaults)?i.defaults.id:i.id}|${i.description||``}|`);n.push(`| preview     | identifier                        `),n.push(`| ----------- | --------------------------------- |`);for(let i of r.filter(e=>!lC.isThemeIcon(e.defaults)).sort(e))n.push(`|<i class="${t(i)}"></i>|${i.id}|`);return n.join(`
`)}};hr.add(QR.IconContribution,nz);function rz(e,t,n,r){return nz.registerIcon(e,t,n,r)}function iz(){return nz}function Die(){let e=ze();for(let t in e){let n=`\\`+e[t].toString(16);nz.registerIcon(t,{fontCharacter:n})}}Die();var az=`vscode://schemas/icons`,oz=hr.as(Kc.JSONContribution);oz.registerSchema(az,nz.getIconSchema());var sz=new bc(()=>oz.notifySchemaChanged(az),200);nz.onDidChange(()=>{sz.isScheduled()||sz.schedule()});var Oie=rz(`widget-close`,x.close,D(2372,`Icon for the close action in widgets.`));rz(`goto-previous-location`,x.arrowUp,D(2373,`Icon for goto previous editor location.`)),rz(`goto-next-location`,x.arrowDown,D(2374,`Icon for goto next editor location.`));var kie=lC.modify(x.sync,`spin`),Aie=lC.modify(x.loading,`spin`),cz=()=>({msLoopTime:-1,msDelayTime:-1,dispose:()=>{}});function jie(e){cz=e}function Mie(e,t){return cz(e,t)}s({});var lz=`done`,uz=`active`,dz=`infinite`,fz=`infinite-long-running`,pz=`discrete`,mz=class e extends w{static#e=this.LONG_RUNNING_INFINITE_THRESHOLD=1e4;static#t=this.PROGRESS_SIGNAL_DEFAULT_DELAY=3e3;constructor(t,n){super(),this.progressSignal=this._register(new Ln),this.workedVal=0,this.showDelayedScheduler=this._register(new bc(()=>W_(this.element),0)),this.longRunningScheduler=this._register(new bc(()=>this.infiniteLongRunning(),e.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(t,n)}create(e,t){this.element=v_(`div`),this.element.classList.add(`monaco-progress-container`),this.element.setAttribute(`role`,`progressbar`),this.element.setAttribute(`aria-valuemin`,`0`),e.appendChild(this.element),this.bit=v_(`div`),this.bit.classList.add(`progress-bit`),this.bit.style.backgroundColor=t?.progressBarBackground||`#0E70C0`,this.element.appendChild(this.bit)}off(){this.bit.style.width=`inherit`,this.bit.style.opacity=`1`,this.element.classList.remove(uz,dz,fz,pz),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel(),this.progressSignal.clear()}done(){return this.doDone(!0)}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(lz),this.element.classList.contains(dz)?(this.bit.style.opacity=`0`,e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width=`inherit`,e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width=`2%`,this.bit.style.opacity=`1`,this.element.classList.remove(pz,lz,fz),this.element.classList.add(uz,dz),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(fz)}total(e){return this.workedVal=0,this.totalWork=e,this.element.setAttribute(`aria-valuemax`,e.toString()),this}hasTotal(){return xe(this.totalWork)}worked(e){return e=Math.max(1,Number(e)),this.doSetWorked(this.workedVal+e)}setWorked(e){return e=Math.max(1,Number(e)),this.doSetWorked(e)}doSetWorked(e){let t=this.totalWork||100;return this.workedVal=e,this.workedVal=Math.min(t,this.workedVal),this.element.classList.remove(dz,fz,lz),this.element.classList.add(uz,pz),this.element.setAttribute(`aria-valuenow`,e.toString()),this.bit.style.width=100*(this.workedVal/t)+`%`,this}getContainer(){return this.element}show(t){this.showDelayedScheduler.cancel(),this.progressSignal.value=Mie(e.PROGRESS_SIGNAL_DEFAULT_DELAY),typeof t==`number`?this.showDelayedScheduler.schedule(t):W_(this.element)}hide(){G_(this.element),this.showDelayedScheduler.cancel(),this.progressSignal.clear()}},hz={};s(hz);var Nie=class extends Qx{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new E),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=z(e,B(`.monaco-dropdown`)),this._label=z(this._element,B(`.dropdown-label`));let n=t.labelRenderer;n||=e=>(e.textContent=t.label||``,null);for(let e of[R.CLICK,R.MOUSE_DOWN,LC.Tap])this._register(L(this.element,e,e=>M_.stop(e,!0)));for(let e of[R.MOUSE_DOWN,LC.Tap])this._register(L(this._label,e,e=>{O_(e)&&e.button!==0||(this.visible?this.hide():this.show())}));this._register(L(this._label,R.KEY_DOWN,e=>{let t=new vp(e);(t.equals(F.Enter)||t.equals(F.Space))&&(M_.stop(e,!0),this.visible?this.hide():this.show())}));let r=n(this._label);r&&this._register(r),this._register(RC.addTarget(this._label))}get element(){return this._element}get label(){return this._label}set tooltip(e){this._label&&(!this.hover&&e!==``?this.hover=this._register(wE().setupManagedHover(kE(`mouse`),this._label,e)):this.hover&&this.hover.update(e))}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}isVisible(){return!!this.visible}onEvent(e,t){this.hide()}dispose(){super.dispose(),this.hide(),this.boxContainer&&=(this.boxContainer.remove(),void 0),this.contents&&=(this.contents.remove(),void 0),this._label&&=(this._label.remove(),void 0)}};function Pie(e){return typeof e?.getActions==`function`}var Fie=class extends Nie{constructor(e,t){super(e,t),this._options=t,this._actions=[],this.actions=t.actions||[]}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add(`active`),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(e,t)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e,t):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this._options.menuClassName||``,onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:hj.LEFT,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove(`active`)}};s(hz);var gz=class extends jj{get onDidChangeVisibility(){return this._onDidChangeVisibility.event}constructor(e,t,n,r=Object.create(null)){super(null,e,r),this.actionItem=null,this._onDidChangeVisibility=this._register(new E),this.menuActionsOrProvider=t,this.contextMenuProvider=n,this.options=r,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;let t=e=>(this.element=z(e,B(`a.action-label`)),this.setAriaLabelAttributes(this.element),this.renderLabel(this.element)),n=Array.isArray(this.menuActionsOrProvider),r={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:n?this.menuActionsOrProvider:void 0,actionProvider:n?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new Fie(e,r)),this._register(this.dropdownMenu.onDidChangeVisibility(e=>{this.element?.setAttribute(`aria-expanded`,`${e}`),this._onDidChangeVisibility.fire(e)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){let e=this;this.dropdownMenu.menuOptions={...this.dropdownMenu.menuOptions,get anchorAlignment(){return e.options.anchorAlignmentProvider()}}}this.updateTooltip(),this.updateEnabled()}renderLabel(e){let t=[];return typeof this.options.classNames==`string`?t=this.options.classNames.split(/\s+/g).filter(e=>!!e):this.options.classNames&&(t=this.options.classNames),t.find(e=>e===`icon`)||t.push(`codicon`),e.classList.add(...t),this._action.label&&this._register(wE().setupManagedHover(this.options.hoverDelegate??kE(`mouse`),e,this._action.label)),null}setAriaLabelAttributes(e){e.setAttribute(`role`,`button`),e.setAttribute(`aria-haspopup`,`true`),e.setAttribute(`aria-expanded`,`false`),e.ariaLabel=this._action.label||``}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label),e??void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}show(){this.dropdownMenu?.show()}updateEnabled(){let e=!this.action.enabled;this.actionItem?.classList.toggle(`disabled`,e),this.element?.classList.toggle(`disabled`,e)}},Iie=class extends Mj{constructor(e,t,n,r){super(e,t,n),this.contextMenuProvider=r}render(e){if(super.render(e),this.element){this.element.classList.add(`action-dropdown-item`);let e={getActions:()=>{let e=this.options.menuActionsOrProvider;return Array.isArray(e)?e:e.getActions()}},t=this.options.menuActionClassNames||[],n=sv(`div.action-dropdown-item-separator`,[sv(`div`,{})]).root;n.classList.toggle(`prominent`,t.includes(`prominent`)),z(this.element,n),this.dropdownMenuActionViewItem=this._register(new gz(this._register(new Zx(`dropdownAction`,D(9,`More Actions...`))),e,this.contextMenuProvider,{classNames:[`dropdown`,...lC.asClassNameArray(x.dropDownButton),...t],hoverDelegate:this.options.hoverDelegate})),this.dropdownMenuActionViewItem.render(this.element),this._register(L(this.element,R.KEY_DOWN,t=>{if(e.getActions().length===0)return;let n=new vp(t),r=!1;this.dropdownMenuActionViewItem?.isFocused()&&n.equals(F.LeftArrow)?(r=!0,this.dropdownMenuActionViewItem?.blur(),this.focus()):this.isFocused()&&n.equals(F.RightArrow)&&(r=!0,this.blur(),this.dropdownMenuActionViewItem?.focus()),r&&(n.preventDefault(),n.stopPropagation())}))}}blur(){super.blur(),this.dropdownMenuActionViewItem?.blur()}setFocusable(e){super.setFocusable(e),this.dropdownMenuActionViewItem?.setFocusable(e)}},_z=V(`hoverService`),vz=V(`editorGroupsService`),yz=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new E,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(e){e=Math.min(Math.max(-5,e),20),this._zoomLevel!==e&&(this._zoomLevel=e,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},Lie=si?1.5:1.35,bz=class e{static _create(t,n,r,i,a,o,s,c,l){o===0?o=Lie*r:o<8&&(o*=r),o=Math.round(o),o<8&&(o=8);let u=1+(l?0:yz.getZoomLevel()*.1);return r*=u,o*=u,a===`translate`&&(n===`normal`||n===`bold`?a=Sz:(a=`'wght' ${parseInt(n,10)}`,n=`normal`)),new e({pixelRatio:c,fontFamily:t,fontWeight:n,fontSize:r,fontFeatureSettings:i,fontVariationSettings:a,lineHeight:o,letterSpacing:s})}constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.fontVariationSettings=e.fontVariationSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){let t=Cz.fontFamily,n=e._wrapInQuotes(this.fontFamily);return this.fontFamily===t?n:`${n}, ${t}`}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}},Rie=2,xz=class extends bz{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=2,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}},Sz=`normal`,zie=`translate`,Cz={fontFamily:si?`Menlo, Monaco, 'Courier New', monospace`:oi?`Consolas, 'Courier New', monospace`:`'Droid Sans Mono', monospace`,fontWeight:`normal`,fontSize:si?12:14,lineHeight:0,letterSpacing:0},wz={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}},Tz=`\`~!@#$%^&*()-=+[{]}\\|;:'",.<>/?`;function Bie(e=``){let t=`(-?\\d*\\.\\d\\w*)|([^`;for(let n of Tz)e.indexOf(n)>=0||(t+=`\\`+n);return t+=`\\s]+)`,new RegExp(t,`g`)}var Ez=Bie();function Dz(e){let t=Ez;if(e&&e instanceof RegExp)if(e.global)t=e;else{let n=`g`;e.ignoreCase&&(n+=`i`),e.multiline&&(n+=`m`),e.unicode&&(n+=`u`),t=new RegExp(e.source,n)}return t.lastIndex=0,t}var Oz=new Kn;Oz.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function kz(e,t,n,r,i){if(t=Dz(t),i||=Cn.first(Oz),n.length>i.maxLen){let a=e-i.maxLen/2;return a<0?a=0:r+=a,n=n.substring(a,e+i.maxLen/2),kz(e,t,n,r,i)}let a=Date.now(),o=e-1-r,s=-1,c=null;for(let e=1;!(Date.now()-a>=i.timeBudget);e++){let r=o-i.windowSize*e;t.lastIndex=Math.max(0,r);let a=Vie(t,n,o,s);if(!a&&c||(c=a,r<=0))break;s=r}if(c){let e={word:c[0],startColumn:r+1+c.index,endColumn:r+1+c.index+c[0].length};return t.lastIndex=0,e}return null}function Vie(e,t,n,r){let i;for(;i=e.exec(t);){let t=i.index||0;if(t<=n&&e.lastIndex>=n)return i;if(r>0&&t>r)return null}return null}var Az;(function(e){e[e.Unknown=0]=`Unknown`,e[e.Disabled=1]=`Disabled`,e[e.Enabled=2]=`Enabled`})(Az||={});var jz=new W(`accessibilityModeEnabled`,!1);function Hie(e){if(!e||typeof e!=`object`)return!1;let t=e;return typeof t.label==`string`&&(t.role===void 0||typeof t.role==`string`)}var Uie=`ACCESSIBLE_VIEW_SHOWN_`,Mz;(function(e){e[e.None=0]=`None`,e[e.Keep=1]=`Keep`,e[e.Brackets=2]=`Brackets`,e[e.Advanced=3]=`Advanced`,e[e.Full=4]=`Full`})(Mz||={});var Wie=8,Gie=class{constructor(e){this._values=e}hasChanged(e){return this._values[e]}},Nz=class{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}},Pz=class{constructor(e,t,n,r){this.id=e,this.name=t,this.defaultValue=n,this.schema=r}applyUpdate(e,t){return Iz(e,t)}compute(e,t,n){return n}},Fz=class{constructor(e,t){this.newValue=e,this.didChange=t}};function Iz(e,t){if(typeof e!=`object`||typeof t!=`object`||!e||!t)return new Fz(t,e!==t);if(Array.isArray(e)||Array.isArray(t))return new Fz(t,!(Array.isArray(e)&&Array.isArray(t)&&ut(e,t)));let n=!1;for(let r in t)if(t.hasOwnProperty(r)){let i=Iz(e[r],t[r]);i.didChange&&(e[r]=i.newValue,n=!0)}return new Fz(e,n)}var Lz=class{constructor(e,t){this.schema=void 0,this.id=e,this.name=`_never_`,this.defaultValue=t}applyUpdate(e,t){return Iz(e,t)}validate(e){return this.defaultValue}},Rz=class{constructor(e,t,n,r){this.id=e,this.name=t,this.defaultValue=n,this.schema=r}applyUpdate(e,t){return Iz(e,t)}compute(e,t,n){return n}};function K(e,t){return e===void 0?t:e===`false`?!1:!!e}var zz=class extends Rz{constructor(e,t,n,r=void 0){r!==void 0&&(r.type=`boolean`,r.default=n),super(e,t,n,r)}validate(e){return K(e,this.defaultValue)}};function Bz(e,t,n,r){if(typeof e==`string`&&(e=parseInt(e,10)),typeof e!=`number`||isNaN(e))return t;let i=e;return i=Math.max(n,i),i=Math.min(r,i),i|0}var Vz=class e extends Rz{static clampedInt(e,t,n,r){return Bz(e,t,n,r)}constructor(e,t,n,r,i,a=void 0){a!==void 0&&(a.type=`integer`,a.default=n,a.minimum=r,a.maximum=i),super(e,t,n,a),this.minimum=r,this.maximum=i}validate(t){return e.clampedInt(t,this.defaultValue,this.minimum,this.maximum)}};function Hz(e,t,n,r){if(e===void 0)return t;let i=Uz.float(e,t);return Uz.clamp(i,n,r)}var Uz=class e extends Rz{static clamp(e,t,n){return e<t?t:e>n?n:e}static float(e,t){return typeof e==`string`&&(e=parseFloat(e)),typeof e!=`number`||isNaN(e)?t:e}constructor(e,t,n,r,i,a,o){i!==void 0&&(i.type=`number`,i.default=n,i.minimum=a,i.maximum=o),super(e,t,n,i),this.validationFn=r,this.minimum=a,this.maximum=o}validate(t){return this.validationFn(e.float(t,this.defaultValue))}},Wz=class e extends Rz{static string(e,t){return typeof e==`string`?e:t}constructor(e,t,n,r=void 0){r!==void 0&&(r.type=`string`,r.default=n),super(e,t,n,r)}validate(t){return e.string(t,this.defaultValue)}};function Gz(e,t,n,r){return typeof e==`string`?r&&e in r?r[e]:n.indexOf(e)===-1?t:e:t}var Kz=class extends Rz{constructor(e,t,n,r,i=void 0){i!==void 0&&(i.type=`string`,i.enum=r.slice(0),i.default=n),super(e,t,n,i),this._allowedValues=r}validate(e){return Gz(e,this.defaultValue,this._allowedValues)}},qz=class extends Pz{constructor(e,t,n,r,i,a,o=void 0){o!==void 0&&(o.type=`string`,o.enum=i,o.default=r),super(e,t,n,o),this._allowedValues=i,this._convert=a}validate(e){return typeof e!=`string`||this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}};function Jz(e){switch(e){case`none`:return Mz.None;case`keep`:return Mz.Keep;case`brackets`:return Mz.Brackets;case`advanced`:return Mz.Advanced;case`full`:return Mz.Full}}var Yz=class extends Pz{constructor(){super(J.accessibilitySupport,`accessibilitySupport`,Az.Unknown,{type:`string`,enum:[`auto`,`on`,`off`],enumDescriptions:[D(270,`Use platform APIs to detect when a Screen Reader is attached.`),D(271,`Optimize for usage with a Screen Reader.`),D(272,`Assume a screen reader is not attached.`)],default:`auto`,tags:[`accessibility`],description:D(273,`Controls if the UI should run in a mode where it is optimized for screen readers.`)})}validate(e){switch(e){case`auto`:return Az.Unknown;case`off`:return Az.Disabled;case`on`:return Az.Enabled}return this.defaultValue}compute(e,t,n){return n===Az.Unknown?e.accessibilitySupport:n}},Xz=class extends Pz{constructor(){let e={insertSpace:!0,ignoreEmptyLines:!0};super(J.comments,`comments`,e,{"editor.comments.insertSpace":{type:`boolean`,default:e.insertSpace,description:D(274,`Controls whether a space character is inserted when commenting.`)},"editor.comments.ignoreEmptyLines":{type:`boolean`,default:e.ignoreEmptyLines,description:D(275,`Controls if empty lines should be ignored with toggle, add or remove actions for line comments.`)}})}validate(e){if(!e||typeof e!=`object`)return this.defaultValue;let t=e;return{insertSpace:K(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:K(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}},Zz;(function(e){e[e.Hidden=0]=`Hidden`,e[e.Blink=1]=`Blink`,e[e.Smooth=2]=`Smooth`,e[e.Phase=3]=`Phase`,e[e.Expand=4]=`Expand`,e[e.Solid=5]=`Solid`})(Zz||={});function Qz(e){switch(e){case`blink`:return Zz.Blink;case`smooth`:return Zz.Smooth;case`phase`:return Zz.Phase;case`expand`:return Zz.Expand;case`solid`:return Zz.Solid}}var $z;(function(e){e[e.Line=1]=`Line`,e[e.Block=2]=`Block`,e[e.Underline=3]=`Underline`,e[e.LineThin=4]=`LineThin`,e[e.BlockOutline=5]=`BlockOutline`,e[e.UnderlineThin=6]=`UnderlineThin`})($z||={});function eB(e){switch(e){case $z.Line:return`line`;case $z.Block:return`block`;case $z.Underline:return`underline`;case $z.LineThin:return`line-thin`;case $z.BlockOutline:return`block-outline`;case $z.UnderlineThin:return`underline-thin`}}function tB(e){switch(e){case`line`:return $z.Line;case`block`:return $z.Block;case`underline`:return $z.Underline;case`line-thin`:return $z.LineThin;case`block-outline`:return $z.BlockOutline;case`underline-thin`:return $z.UnderlineThin}}var nB=class extends Lz{constructor(){super(J.editorClassName,``)}compute(e,t,n){let r=[`monaco-editor`];return t.get(J.extraEditorClassName)&&r.push(t.get(J.extraEditorClassName)),e.extraEditorClassName&&r.push(e.extraEditorClassName),t.get(J.mouseStyle)===`default`?r.push(`mouse-default`):t.get(J.mouseStyle)===`copy`&&r.push(`mouse-copy`),t.get(J.showUnused)&&r.push(`showUnused`),t.get(J.showDeprecated)&&r.push(`showDeprecated`),r.join(` `)}},rB=class extends zz{constructor(){super(J.emptySelectionClipboard,`emptySelectionClipboard`,!0,{description:D(276,`Controls whether copying without a selection copies the current line.`)})}compute(e,t,n){return n&&e.emptySelectionClipboard}},iB=class extends Pz{constructor(){let e={cursorMoveOnType:!0,findOnType:!0,seedSearchStringFromSelection:`always`,autoFindInSelection:`never`,globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0,history:`workspace`,replaceHistory:`workspace`};super(J.find,`find`,e,{"editor.find.cursorMoveOnType":{type:`boolean`,default:e.cursorMoveOnType,description:D(277,`Controls whether the cursor should jump to find matches while typing.`)},"editor.find.seedSearchStringFromSelection":{type:`string`,enum:[`never`,`always`,`selection`],default:e.seedSearchStringFromSelection,enumDescriptions:[D(278,`Never seed search string from the editor selection.`),D(279,`Always seed search string from the editor selection, including word at cursor position.`),D(280,`Only seed search string from the editor selection.`)],description:D(281,`Controls whether the search string in the Find Widget is seeded from the editor selection.`)},"editor.find.autoFindInSelection":{type:`string`,enum:[`never`,`always`,`multiline`],default:e.autoFindInSelection,enumDescriptions:[D(282,`Never turn on Find in Selection automatically (default).`),D(283,`Always turn on Find in Selection automatically.`),D(284,`Turn on Find in Selection automatically when multiple lines of content are selected.`)],description:D(285,`Controls the condition for turning on Find in Selection automatically.`)},"editor.find.globalFindClipboard":{type:`boolean`,default:e.globalFindClipboard,description:D(286,`Controls whether the Find Widget should read or modify the shared find clipboard on macOS.`),included:si},"editor.find.addExtraSpaceOnTop":{type:`boolean`,default:e.addExtraSpaceOnTop,description:D(287,`Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.`)},"editor.find.loop":{type:`boolean`,default:e.loop,description:D(288,`Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.`)},"editor.find.history":{type:`string`,enum:[`never`,`workspace`],default:`workspace`,enumDescriptions:[D(289,`Do not store search history from the find widget.`),D(290,`Store search history across the active workspace`)],description:D(291,`Controls how the find widget history should be stored`)},"editor.find.replaceHistory":{type:`string`,enum:[`never`,`workspace`],default:`workspace`,enumDescriptions:[D(292,`Do not store history from the replace widget.`),D(293,`Store replace history across the active workspace`)],description:D(294,`Controls how the replace widget history should be stored`)},"editor.find.findOnType":{type:`boolean`,default:e.findOnType,description:D(295,`Controls whether the Find Widget should search as you type.`)}})}validate(e){if(!e||typeof e!=`object`)return this.defaultValue;let t=e;return{cursorMoveOnType:K(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),findOnType:K(t.findOnType,this.defaultValue.findOnType),seedSearchStringFromSelection:typeof t.seedSearchStringFromSelection==`boolean`?t.seedSearchStringFromSelection?`always`:`never`:Gz(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,[`never`,`always`,`selection`]),autoFindInSelection:typeof t.autoFindInSelection==`boolean`?t.autoFindInSelection?`always`:`never`:Gz(t.autoFindInSelection,this.defaultValue.autoFindInSelection,[`never`,`always`,`multiline`]),globalFindClipboard:K(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:K(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:K(t.loop,this.defaultValue.loop),history:Gz(t.history,this.defaultValue.history,[`never`,`workspace`]),replaceHistory:Gz(t.replaceHistory,this.defaultValue.replaceHistory,[`never`,`workspace`])}}},aB=class e extends Pz{static#e=this.OFF=`"liga" off, "calt" off`;static#t=this.ON=`"liga" on, "calt" on`;constructor(){super(J.fontLigatures,`fontLigatures`,e.OFF,{anyOf:[{type:`boolean`,description:D(296,`Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.`)},{type:`string`,description:D(297,`Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.`)}],description:D(298,`Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property.`),default:!1})}validate(t){return t===void 0?this.defaultValue:typeof t==`string`?t===`false`||t.length===0?e.OFF:t===`true`?e.ON:t:t?e.ON:e.OFF}},oB=class e extends Pz{static#e=this.OFF=Sz;static#t=this.TRANSLATE=zie;constructor(){super(J.fontVariations,`fontVariations`,e.OFF,{anyOf:[{type:`boolean`,description:D(299,`Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.`)},{type:`string`,description:D(300,`Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.`)}],description:D(301,`Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property.`),default:!1})}validate(t){return t===void 0?this.defaultValue:typeof t==`string`?t===`false`?e.OFF:t===`true`?e.TRANSLATE:t:t?e.TRANSLATE:e.OFF}compute(e,t,n){return e.fontInfo.fontVariationSettings}},sB=class extends Lz{constructor(){super(J.fontInfo,new xz({pixelRatio:0,fontFamily:``,fontWeight:``,fontSize:0,fontFeatureSettings:``,fontVariationSettings:``,lineHeight:0,letterSpacing:0,isMonospace:!1,typicalHalfwidthCharacterWidth:0,typicalFullwidthCharacterWidth:0,canUseHalfwidthRightwardsArrow:!1,spaceWidth:0,middotWidth:0,wsmiddotWidth:0,maxDigitWidth:0},!1))}compute(e,t,n){return e.fontInfo}},cB=class extends Lz{constructor(){super(J.effectiveCursorStyle,$z.Line)}compute(e,t,n){return e.inputMode===`overtype`?t.get(J.overtypeCursorStyle):t.get(J.cursorStyle)}},lB=class extends Lz{constructor(){super(J.effectiveEditContext,!1)}compute(e,t){return e.editContextSupported&&t.get(J.editContext)}},uB=class extends Lz{constructor(){super(J.effectiveAllowVariableFonts,!1)}compute(e,t){return e.accessibilitySupport===Az.Enabled?t.get(J.allowVariableFontsInAccessibilityMode):t.get(J.allowVariableFonts)}},dB=class extends Rz{constructor(){super(J.fontSize,`fontSize`,Cz.fontSize,{type:`number`,minimum:6,maximum:100,default:Cz.fontSize,description:D(302,`Controls the font size in pixels.`)})}validate(e){let t=Uz.float(e,this.defaultValue);return t===0?Cz.fontSize:Uz.clamp(t,6,100)}compute(e,t,n){return e.fontInfo.fontSize}},fB=class e extends Pz{static#e=this.SUGGESTION_VALUES=[`normal`,`bold`,`100`,`200`,`300`,`400`,`500`,`600`,`700`,`800`,`900`];static#t=this.MINIMUM_VALUE=1;static#n=this.MAXIMUM_VALUE=1e3;constructor(){super(J.fontWeight,`fontWeight`,Cz.fontWeight,{anyOf:[{type:`number`,minimum:e.MINIMUM_VALUE,maximum:e.MAXIMUM_VALUE,errorMessage:D(303,`Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.`)},{type:`string`,pattern:`^(normal|bold|1000|[1-9][0-9]{0,2})$`},{enum:e.SUGGESTION_VALUES}],default:Cz.fontWeight,description:D(304,`Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.`)})}validate(t){return t===`normal`||t===`bold`?t:String(Vz.clampedInt(t,Cz.fontWeight,e.MINIMUM_VALUE,e.MAXIMUM_VALUE))}},pB=class extends Pz{constructor(){let e={multiple:`peek`,multipleDefinitions:`peek`,multipleTypeDefinitions:`peek`,multipleDeclarations:`peek`,multipleImplementations:`peek`,multipleReferences:`peek`,multipleTests:`peek`,alternativeDefinitionCommand:`editor.action.goToReferences`,alternativeTypeDefinitionCommand:`editor.action.goToReferences`,alternativeDeclarationCommand:`editor.action.goToReferences`,alternativeImplementationCommand:``,alternativeReferenceCommand:``,alternativeTestsCommand:``},t={type:`string`,enum:[`peek`,`gotoAndPeek`,`goto`],default:e.multiple,enumDescriptions:[D(305,`Show Peek view of the results (default)`),D(306,`Go to the primary result and show a Peek view`),D(307,`Go to the primary result and enable Peek-less navigation to others`)]},n=[``,`editor.action.referenceSearch.trigger`,`editor.action.goToReferences`,`editor.action.peekImplementation`,`editor.action.goToImplementation`,`editor.action.peekTypeDefinition`,`editor.action.goToTypeDefinition`,`editor.action.peekDeclaration`,`editor.action.revealDeclaration`,`editor.action.peekDefinition`,`editor.action.revealDefinitionAside`,`editor.action.revealDefinition`];super(J.gotoLocation,`gotoLocation`,e,{"editor.gotoLocation.multiple":{deprecationMessage:D(308,`This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.`)},"editor.gotoLocation.multipleDefinitions":{description:D(309,`Controls the behavior the 'Go to Definition'-command when multiple target locations exist.`),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:D(310,`Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.`),...t},"editor.gotoLocation.multipleDeclarations":{description:D(311,`Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.`),...t},"editor.gotoLocation.multipleImplementations":{description:D(312,`Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.`),...t},"editor.gotoLocation.multipleReferences":{description:D(313,`Controls the behavior the 'Go to References'-command when multiple target locations exist.`),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:`string`,default:e.alternativeDefinitionCommand,enum:n,description:D(314,`Alternative command id that is being executed when the result of 'Go to Definition' is the current location.`)},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:`string`,default:e.alternativeTypeDefinitionCommand,enum:n,description:D(315,`Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.`)},"editor.gotoLocation.alternativeDeclarationCommand":{type:`string`,default:e.alternativeDeclarationCommand,enum:n,description:D(316,`Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.`)},"editor.gotoLocation.alternativeImplementationCommand":{type:`string`,default:e.alternativeImplementationCommand,enum:n,description:D(317,`Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.`)},"editor.gotoLocation.alternativeReferenceCommand":{type:`string`,default:e.alternativeReferenceCommand,enum:n,description:D(318,`Alternative command id that is being executed when the result of 'Go to Reference' is the current location.`)}})}validate(e){if(!e||typeof e!=`object`)return this.defaultValue;let t=e;return{multiple:Gz(t.multiple,this.defaultValue.multiple,[`peek`,`gotoAndPeek`,`goto`]),multipleDefinitions:Gz(t.multipleDefinitions,`peek`,[`peek`,`gotoAndPeek`,`goto`]),multipleTypeDefinitions:Gz(t.multipleTypeDefinitions,`peek`,[`peek`,`gotoAndPeek`,`goto`]),multipleDeclarations:Gz(t.multipleDeclarations,`peek`,[`peek`,`gotoAndPeek`,`goto`]),multipleImplementations:Gz(t.multipleImplementations,`peek`,[`peek`,`gotoAndPeek`,`goto`]),multipleReferences:Gz(t.multipleReferences,`peek`,[`peek`,`gotoAndPeek`,`goto`]),multipleTests:Gz(t.multipleTests,`peek`,[`peek`,`gotoAndPeek`,`goto`]),alternativeDefinitionCommand:Wz.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:Wz.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:Wz.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:Wz.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:Wz.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:Wz.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}},mB=class extends Pz{constructor(){let e={enabled:`on`,delay:300,hidingDelay:300,sticky:!0,above:!0};super(J.hover,`hover`,e,{"editor.hover.enabled":{type:`string`,enum:[`on`,`off`,`onKeyboardModifier`],default:e.enabled,markdownEnumDescriptions:[D(319,`Hover is enabled.`),D(320,`Hover is disabled.`),D(321,"Hover is shown when holding `{0}` or `Alt` (the opposite modifier of `#editor.multiCursorModifier#`)",si?`Command`:`Control`)],description:D(322,`Controls whether the hover is shown.`)},"editor.hover.delay":{type:`number`,default:e.delay,minimum:0,maximum:1e4,description:D(323,`Controls the delay in milliseconds after which the hover is shown.`)},"editor.hover.sticky":{type:`boolean`,default:e.sticky,description:D(324,`Controls whether the hover should remain visible when mouse is moved over it.`)},"editor.hover.hidingDelay":{type:`integer`,minimum:0,default:e.hidingDelay,markdownDescription:D(325,"Controls the delay in milliseconds after which the hover is hidden. Requires `#editor.hover.sticky#` to be enabled.")},"editor.hover.above":{type:`boolean`,default:e.above,description:D(326,`Prefer showing hovers above the line, if there's space.`)}})}validate(e){if(!e||typeof e!=`object`)return this.defaultValue;let t=e;return{enabled:Gz(t.enabled,this.defaultValue.enabled,[`on`,`off`,`onKeyboardModifier`]),delay:Vz.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:K(t.sticky,this.defaultValue.sticky),hidingDelay:Vz.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:K(t.above,this.defaultValue.above)}}},hB;(function(e){e[e.None=0]=`None`,e[e.Text=1]=`Text`,e[e.Blocks=2]=`Blocks`})(hB||={});var gB=class e extends Lz{constructor(){super(J.layoutInfo,{width:0,height:0,glyphMarginLeft:0,glyphMarginWidth:0,glyphMarginDecorationLaneCount:0,lineNumbersLeft:0,lineNumbersWidth:0,decorationsLeft:0,decorationsWidth:0,contentLeft:0,contentWidth:0,minimap:{renderMinimap:hB.None,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:0,minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:0},viewportColumn:0,isWordWrapMinified:!1,isViewportWrapping:!1,wrappingColumn:-1,verticalScrollbarWidth:0,horizontalScrollbarHeight:0,overviewRuler:{top:0,width:0,height:0,right:0}})}compute(t,n,r){return e.computeLayout(n,{memory:t.memory,outerWidth:t.outerWidth,outerHeight:t.outerHeight,isDominatedByLongLines:t.isDominatedByLongLines,lineHeight:t.fontInfo.lineHeight,viewLineCount:t.viewLineCount,lineNumbersDigitCount:t.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:t.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:t.fontInfo.maxDigitWidth,pixelRatio:t.pixelRatio,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){let t=e.height/e.lineHeight,n=Math.floor(e.paddingTop/e.lineHeight),r=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(r=Math.max(r,t-1));let i=(n+e.viewLineCount+r)/(e.pixelRatio*e.height),a=Math.floor(e.viewLineCount/i);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:n,extraLinesBeyondLastLine:r,desiredRatio:i,minimapLineCount:a}}static _computeMinimapLayout(t,n){let r=t.outerWidth,i=t.outerHeight,a=t.pixelRatio;if(!t.minimap.enabled)return{renderMinimap:hB.None,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(a*i),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:i};let o=n.stableMinimapLayoutInput,s=o&&t.outerHeight===o.outerHeight&&t.lineHeight===o.lineHeight&&t.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&t.pixelRatio===o.pixelRatio&&t.scrollBeyondLastLine===o.scrollBeyondLastLine&&t.paddingTop===o.paddingTop&&t.paddingBottom===o.paddingBottom&&t.minimap.enabled===o.minimap.enabled&&t.minimap.side===o.minimap.side&&t.minimap.size===o.minimap.size&&t.minimap.showSlider===o.minimap.showSlider&&t.minimap.renderCharacters===o.minimap.renderCharacters&&t.minimap.maxColumn===o.minimap.maxColumn&&t.minimap.scale===o.minimap.scale&&t.verticalScrollbarWidth===o.verticalScrollbarWidth&&t.isViewportWrapping===o.isViewportWrapping,c=t.lineHeight,l=t.typicalHalfwidthCharacterWidth,u=t.scrollBeyondLastLine,d=t.minimap.renderCharacters,f=a>=2?Math.round(t.minimap.scale*2):t.minimap.scale,p=t.minimap.maxColumn,m=t.minimap.size,h=t.minimap.side,g=t.verticalScrollbarWidth,_=t.viewLineCount,v=t.remainingWidth,ee=t.isViewportWrapping,te=d?2:3,ne=Math.floor(a*i),re=ne/a,ie=!1,ae=!1,oe=te*f,se=f/a,ce=1;if(m===`fill`||m===`fit`){let{typicalViewportLineCount:r,extraLinesBeforeFirstLine:o,extraLinesBeyondLastLine:l,desiredRatio:d,minimapLineCount:p}=e.computeContainedMinimapLineCount({viewLineCount:_,scrollBeyondLastLine:u,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom,height:i,lineHeight:c,pixelRatio:a});if(_/p>1)ie=!0,ae=!0,f=1,oe=1,se=f/a;else{let e=!1,i=f+1;if(m===`fit`){let t=Math.ceil((o+_+l)*oe);ee&&s&&v<=n.stableFitRemainingWidth?(e=!0,i=n.stableFitMaxMinimapScale):e=t>ne}if(m===`fill`||e){ie=!0;let e=f;oe=Math.min(c*a,Math.max(1,Math.floor(1/d))),ee&&s&&v<=n.stableFitRemainingWidth&&(i=n.stableFitMaxMinimapScale),f=Math.min(i,Math.max(1,Math.floor(oe/te))),f>e&&(ce=Math.min(2,f/e)),se=f/a/ce,ne=Math.ceil(Math.max(r,o+_+l)*oe),ee?(n.stableMinimapLayoutInput=t,n.stableFitRemainingWidth=v,n.stableFitMaxMinimapScale=f):(n.stableMinimapLayoutInput=null,n.stableFitRemainingWidth=0)}}}let le=Math.floor(p*se),y=Math.min(le,Math.max(0,Math.floor((v-g-2)*se/(l+se)))+8),ue=Math.floor(a*y),de=ue/a;return ue=Math.floor(ue*ce),{renderMinimap:d?hB.Text:hB.Blocks,minimapLeft:h===`left`?0:r-y-g,minimapWidth:y,minimapHeightIsEditorHeight:ie,minimapIsSampling:ae,minimapScale:f,minimapLineHeight:oe,minimapCanvasInnerWidth:ue,minimapCanvasInnerHeight:ne,minimapCanvasOuterWidth:de,minimapCanvasOuterHeight:re}}static computeLayout(t,n){let r=n.outerWidth|0,i=n.outerHeight|0,a=n.lineHeight|0,o=n.lineNumbersDigitCount|0,s=n.typicalHalfwidthCharacterWidth,c=n.maxDigitWidth,l=n.pixelRatio,u=n.viewLineCount,d=t.get(J.wordWrapOverride2),f=d===`inherit`?t.get(J.wordWrapOverride1):d,p=f===`inherit`?t.get(J.wordWrap):f,m=t.get(J.wordWrapColumn),h=n.isDominatedByLongLines,g=t.get(J.glyphMargin),_=t.get(J.lineNumbers).renderType!==jB.Off,v=t.get(J.lineNumbersMinChars),ee=t.get(J.scrollBeyondLastLine),te=t.get(J.padding),ne=t.get(J.minimap),re=t.get(J.scrollbar),ie=re.verticalScrollbarSize,ae=re.verticalHasArrows,oe=re.arrowSize,se=re.horizontalScrollbarSize,ce=t.get(J.folding),le=t.get(J.showFoldingControls)!==`never`,y=t.get(J.lineDecorationsWidth);ce&&le&&(y+=16);let ue=0;if(_){let e=Math.max(o,v);ue=Math.round(e*c)}let de=0;g&&(de=a*n.glyphMarginDecorationLaneCount);let fe=0,pe=fe+de,me=pe+ue,he=me+y,ge=r-de-ue-y,_e=!1,ve=!1,ye=-1;t.get(J.accessibilitySupport)===Az.Enabled&&f===`inherit`&&h?(_e=!0,ve=!0):p===`on`||p===`bounded`?ve=!0:p===`wordWrapColumn`&&(ye=m);let be=e._computeMinimapLayout({outerWidth:r,outerHeight:i,lineHeight:a,typicalHalfwidthCharacterWidth:s,pixelRatio:l,scrollBeyondLastLine:ee,paddingTop:te.top,paddingBottom:te.bottom,minimap:ne,verticalScrollbarWidth:ie,viewLineCount:u,remainingWidth:ge,isViewportWrapping:ve},n.memory||new Nz);be.renderMinimap!==hB.None&&be.minimapLeft===0&&(fe+=be.minimapWidth,pe+=be.minimapWidth,me+=be.minimapWidth,he+=be.minimapWidth);let xe=ge-be.minimapWidth,Se=Math.max(1,Math.floor((xe-ie-2)/s)),Ce=ae?oe:0;return ve&&(ye=Math.max(1,Se),p===`bounded`&&(ye=Math.min(ye,m))),{width:r,height:i,glyphMarginLeft:fe,glyphMarginWidth:de,glyphMarginDecorationLaneCount:n.glyphMarginDecorationLaneCount,lineNumbersLeft:pe,lineNumbersWidth:ue,decorationsLeft:me,decorationsWidth:y,contentLeft:he,contentWidth:xe,minimap:be,viewportColumn:Se,isWordWrapMinified:_e,isViewportWrapping:ve,wrappingColumn:ye,verticalScrollbarWidth:ie,horizontalScrollbarHeight:se,overviewRuler:{top:Ce,width:ie,height:i-2*Ce,right:0}}}},_B=class extends Pz{constructor(){super(J.wrappingStrategy,`wrappingStrategy`,`simple`,{"editor.wrappingStrategy":{enumDescriptions:[D(327,`Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width.`),D(328,`Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.`)],type:`string`,enum:[`simple`,`advanced`],default:`simple`,description:D(329,`Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.`)}})}validate(e){return Gz(e,`simple`,[`simple`,`advanced`])}compute(e,t,n){return t.get(J.accessibilitySupport)===Az.Enabled?`advanced`:n}},vB;(function(e){e.Off=`off`,e.OnCode=`onCode`,e.On=`on`})(vB||={});var yB=class extends Pz{constructor(){let e={enabled:vB.OnCode};super(J.lightbulb,`lightbulb`,e,{"editor.lightbulb.enabled":{type:`string`,enum:[vB.Off,vB.OnCode,vB.On],default:e.enabled,enumDescriptions:[D(330,`Disable the code action menu.`),D(331,`Show the code action menu when the cursor is on lines with code.`),D(332,`Show the code action menu when the cursor is on lines with code or on empty lines.`)],description:D(333,`Enables the Code Action lightbulb in the editor.`)}})}validate(e){return!e||typeof e!=`object`?this.defaultValue:{enabled:Gz(e.enabled,this.defaultValue.enabled,[vB.Off,vB.OnCode,vB.On])}}},bB=class extends Pz{constructor(){let e={enabled:!0,maxLineCount:5,defaultModel:`outlineModel`,scrollWithEditor:!0};super(J.stickyScroll,`stickyScroll`,e,{"editor.stickyScroll.enabled":{type:`boolean`,default:e.enabled,description:D(334,`Shows the nested current scopes during the scroll at the top of the editor.`)},"editor.stickyScroll.maxLineCount":{type:`number`,default:e.maxLineCount,minimum:1,maximum:20,description:D(335,`Defines the maximum number of sticky lines to show.`)},"editor.stickyScroll.defaultModel":{type:`string`,enum:[`outlineModel`,`foldingProviderModel`,`indentationModel`],default:e.defaultModel,description:D(336,`Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.`)},"editor.stickyScroll.scrollWithEditor":{type:`boolean`,default:e.scrollWithEditor,description:D(337,`Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.`)}})}validate(e){if(!e||typeof e!=`object`)return this.defaultValue;let t=e;return{enabled:K(t.enabled,this.defaultValue.enabled),maxLineCount:Vz.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:Gz(t.defaultModel,this.defaultValue.defaultModel,[`outlineModel`,`foldingProviderModel`,`indentationModel`]),scrollWithEditor:K(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}},xB=class extends Pz{constructor(){let e={enabled:`on`,fontSize:0,fontFamily:``,padding:!1,maximumLength:43};super(J.inlayHints,`inlayHints`,e,{"editor.inlayHints.enabled":{type:`string`,default:e.enabled,description:D(338,`Enables the inlay hints in the editor.`),enum:[`on`,`onUnlessPressed`,`offUnlessPressed`,`off`],markdownEnumDescriptions:[D(339,`Inlay hints are enabled`),D(340,`Inlay hints are showing by default and hide when holding {0}`,si?`Ctrl+Option`:`Ctrl+Alt`),D(341,`Inlay hints are hidden by default and show when holding {0}`,si?`Ctrl+Option`:`Ctrl+Alt`),D(342,`Inlay hints are disabled`)]},"editor.inlayHints.fontSize":{type:`number`,default:e.fontSize,markdownDescription:D(343,`Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.`,"`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:`string`,default:e.fontFamily,markdownDescription:D(344,`Controls font family of inlay hints in the editor. When set to empty, the {0} is used.`,"`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:`boolean`,default:e.padding,description:D(345,`Enables the padding around the inlay hints in the editor.`)},"editor.inlayHints.maximumLength":{type:`number`,default:e.maximumLength,markdownDescription:D(346,"Maximum overall length of inlay hints, for a single line, before they get truncated by the editor. Set to `0` to never truncate")}})}validate(e){if(!e||typeof e!=`object`)return this.defaultValue;let t=e;return typeof t.enabled==`boolean`&&(t.enabled=t.enabled?`on`:`off`),{enabled:Gz(t.enabled,this.defaultValue.enabled,[`on`,`off`,`offUnlessPressed`,`onUnlessPressed`]),fontSize:Vz.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:Wz.string(t.fontFamily,this.defaultValue.fontFamily),padding:K(t.padding,this.defaultValue.padding),maximumLength:Vz.clampedInt(t.maximumLength,this.defaultValue.maximumLength,0,2**53-1)}}},SB=class extends Pz{constructor(){super(J.lineDecorationsWidth,`lineDecorationsWidth`,10)}validate(e){return typeof e==`string`&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):Vz.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,n){return n<0?Vz.clampedInt(-n*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):n}},CB=class extends Uz{constructor(){super(J.lineHeight,`lineHeight`,Cz.lineHeight,e=>Uz.clamp(e,0,150),{markdownDescription:D(347,`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)},0,150)}compute(e,t,n){return e.fontInfo.lineHeight}},wB=class extends Pz{constructor(){let e={enabled:!0,size:`proportional`,side:`right`,showSlider:`mouseover`,autohide:`none`,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,markSectionHeaderRegex:`\\bMARK:\\s*(?<separator>-?)\\s*(?<label>.*)$`,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(J.minimap,`minimap`,e,{"editor.minimap.enabled":{type:`boolean`,default:e.enabled,description:D(348,`Controls whether the minimap is shown.`)},"editor.minimap.autohide":{type:`string`,enum:[`none`,`mouseover`,`scroll`],enumDescriptions:[D(349,`The minimap is always shown.`),D(350,`The minimap is hidden when mouse is not over the minimap and shown when mouse is over the minimap.`),D(351,`The minimap is only shown when the editor is scrolled`)],default:e.autohide,description:D(352,`Controls whether the minimap is hidden automatically.`)},"editor.minimap.size":{type:`string`,enum:[`proportional`,`fill`,`fit`],enumDescriptions:[D(353,`The minimap has the same size as the editor contents (and might scroll).`),D(354,`The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling).`),D(355,`The minimap will shrink as necessary to never be larger than the editor (no scrolling).`)],default:e.size,description:D(356,`Controls the size of the minimap.`)},"editor.minimap.side":{type:`string`,enum:[`left`,`right`],default:e.side,description:D(357,`Controls the side where to render the minimap.`)},"editor.minimap.showSlider":{type:`string`,enum:[`always`,`mouseover`],default:e.showSlider,description:D(358,`Controls when the minimap slider is shown.`)},"editor.minimap.scale":{type:`number`,default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:D(359,`Scale of content drawn in the minimap: 1, 2 or 3.`)},"editor.minimap.renderCharacters":{type:`boolean`,default:e.renderCharacters,description:D(360,`Render the actual characters on a line as opposed to color blocks.`)},"editor.minimap.maxColumn":{type:`number`,default:e.maxColumn,description:D(361,`Limit the width of the minimap to render at most a certain number of columns.`)},"editor.minimap.showRegionSectionHeaders":{type:`boolean`,default:e.showRegionSectionHeaders,description:D(362,`Controls whether named regions are shown as section headers in the minimap.`)},"editor.minimap.showMarkSectionHeaders":{type:`boolean`,default:e.showMarkSectionHeaders,description:D(363,`Controls whether MARK: comments are shown as section headers in the minimap.`)},"editor.minimap.markSectionHeaderRegex":{type:`string`,default:e.markSectionHeaderRegex,description:D(364,"Defines the regular expression used to find section headers in comments. The regex must contain a named match group `label` (written as `(?<label>.+)`) that encapsulates the section header, otherwise it will not work. Optionally you can include another match group named `separator`. Use \\n in the pattern to match multi-line headers.")},"editor.minimap.sectionHeaderFontSize":{type:`number`,default:e.sectionHeaderFontSize,description:D(365,`Controls the font size of section headers in the minimap.`)},"editor.minimap.sectionHeaderLetterSpacing":{type:`number`,default:e.sectionHeaderLetterSpacing,description:D(366,`Controls the amount of space (in pixels) between characters of section header. This helps the readability of the header in small font sizes.`)}})}validate(e){if(!e||typeof e!=`object`)return this.defaultValue;let t=e,n=this.defaultValue.markSectionHeaderRegex,r=t.markSectionHeaderRegex;if(typeof r==`string`)try{new RegExp(r,`d`),n=r}catch{}return{enabled:K(t.enabled,this.defaultValue.enabled),autohide:Gz(t.autohide,this.defaultValue.autohide,[`none`,`mouseover`,`scroll`]),size:Gz(t.size,this.defaultValue.size,[`proportional`,`fill`,`fit`]),side:Gz(t.side,this.defaultValue.side,[`right`,`left`]),showSlider:Gz(t.showSlider,this.defaultValue.showSlider,[`always`,`mouseover`]),renderCharacters:K(t.renderCharacters,this.defaultValue.renderCharacters),scale:Vz.clampedInt(t.scale,1,1,3),maxColumn:Vz.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:K(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:K(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),markSectionHeaderRegex:n,sectionHeaderFontSize:Uz.clamp(Uz.float(t.sectionHeaderFontSize,this.defaultValue.sectionHeaderFontSize),4,32),sectionHeaderLetterSpacing:Uz.clamp(Uz.float(t.sectionHeaderLetterSpacing,this.defaultValue.sectionHeaderLetterSpacing),0,5)}}};function TB(e){return e===`ctrlCmd`?si?`metaKey`:`ctrlKey`:`altKey`}var EB=class extends Pz{constructor(){super(J.padding,`padding`,{top:0,bottom:0},{"editor.padding.top":{type:`number`,default:0,minimum:0,maximum:1e3,description:D(367,`Controls the amount of space between the top edge of the editor and the first line.`)},"editor.padding.bottom":{type:`number`,default:0,minimum:0,maximum:1e3,description:D(368,`Controls the amount of space between the bottom edge of the editor and the last line.`)}})}validate(e){if(!e||typeof e!=`object`)return this.defaultValue;let t=e;return{top:Vz.clampedInt(t.top,0,0,1e3),bottom:Vz.clampedInt(t.bottom,0,0,1e3)}}},DB=class extends Pz{constructor(){let e={enabled:!0,cycle:!0};super(J.parameterHints,`parameterHints`,e,{"editor.parameterHints.enabled":{type:`boolean`,default:e.enabled,description:D(369,`Enables a pop-up that shows parameter documentation and type information as you type.`)},"editor.parameterHints.cycle":{type:`boolean`,default:e.cycle,description:D(370,`Controls whether the parameter hints menu cycles or closes when reaching the end of the list.`)}})}validate(e){if(!e||typeof e!=`object`)return this.defaultValue;let t=e;return{enabled:K(t.enabled,this.defaultValue.enabled),cycle:K(t.cycle,this.defaultValue.cycle)}}},OB=class extends Lz{constructor(){super(J.pixelRatio,1)}compute(e,t,n){return e.pixelRatio}},kB=class extends Pz{constructor(){super(J.placeholder,`placeholder`,void 0)}validate(e){return e===void 0?this.defaultValue:typeof e==`string`?e:this.defaultValue}},AB=class extends Pz{constructor(){let e={other:`on`,comments:`off`,strings:`off`},t=[{type:`boolean`},{type:`string`,enum:[`on`,`inline`,`off`],enumDescriptions:[D(371,`Quick suggestions show inside the suggest widget`),D(372,`Quick suggestions show as ghost text`),D(373,`Quick suggestions are disabled`)]}];super(J.quickSuggestions,`quickSuggestions`,e,{type:`object`,additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:D(374,`Enable quick suggestions inside strings.`)},comments:{anyOf:t,default:e.comments,description:D(375,`Enable quick suggestions inside comments.`)},other:{anyOf:t,default:e.other,description:D(376,`Enable quick suggestions outside of strings and comments.`)}},default:e,markdownDescription:D(377,`Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the {0}-setting which controls if suggestions are triggered by special characters.`,"`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e==`boolean`){let t=e?`on`:`off`;return{comments:t,strings:t,other:t}}if(!e||typeof e!=`object`)return this.defaultValue;let{other:t,comments:n,strings:r}=e,i=[`on`,`inline`,`off`],a,o,s;return a=typeof t==`boolean`?t?`on`:`off`:Gz(t,this.defaultValue.other,i),o=typeof n==`boolean`?n?`on`:`off`:Gz(n,this.defaultValue.comments,i),s=typeof r==`boolean`?r?`on`:`off`:Gz(r,this.defaultValue.strings,i),{other:a,comments:o,strings:s}}},jB;(function(e){e[e.Off=0]=`Off`,e[e.On=1]=`On`,e[e.Relative=2]=`Relative`,e[e.Interval=3]=`Interval`,e[e.Custom=4]=`Custom`})(jB||={});var MB=class extends Pz{constructor(){super(J.lineNumbers,`lineNumbers`,{renderType:jB.On,renderFn:null},{type:`string`,enum:[`off`,`on`,`relative`,`interval`],enumDescriptions:[D(378,`Line numbers are not rendered.`),D(379,`Line numbers are rendered as absolute number.`),D(380,`Line numbers are rendered as distance in lines to cursor position.`),D(381,`Line numbers are rendered every 10 lines.`)],default:`on`,description:D(382,`Controls the display of line numbers.`)})}validate(e){let t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return e!==void 0&&(typeof e==`function`?(t=jB.Custom,n=e):t=e===`interval`?jB.Interval:e===`relative`?jB.Relative:e===`on`?jB.On:jB.Off),{renderType:t,renderFn:n}}};function NB(e){let t=e.get(J.renderValidationDecorations);return t===`editable`?e.get(J.readOnly):t!==`on`}function PB(e){return!e.get(J.effectiveAllowVariableFonts)}var FB=class extends Pz{constructor(){let e=[],t={type:`number`,description:D(383,`Number of monospace characters at which this editor ruler will render.`)};super(J.rulers,`rulers`,e,{type:`array`,items:{anyOf:[t,{type:[`object`],properties:{column:t,color:{type:`string`,description:D(384,`Color of this editor ruler.`),format:`color-hex`}}}]},default:e,description:D(385,`Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.`)})}validate(e){if(Array.isArray(e)){let t=[];for(let n of e)if(typeof n==`number`)t.push({column:Vz.clampedInt(n,0,0,1e4),color:null});else if(n&&typeof n==`object`){let e=n;t.push({column:Vz.clampedInt(e.column,0,0,1e4),color:e.color})}return t.sort((e,t)=>e.column-t.column),t}return this.defaultValue}},IB=class extends Pz{constructor(){super(J.readOnlyMessage,`readOnlyMessage`,void 0)}validate(e){return!e||typeof e!=`object`?this.defaultValue:e}};function LB(e,t){if(typeof e!=`string`)return t;switch(e){case`hidden`:return iT.Hidden;case`visible`:return iT.Visible;default:return iT.Auto}}var RB=class extends Pz{constructor(){let e={vertical:iT.Auto,horizontal:iT.Auto,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(J.scrollbar,`scrollbar`,e,{"editor.scrollbar.vertical":{type:`string`,enum:[`auto`,`visible`,`hidden`],enumDescriptions:[D(386,`The vertical scrollbar will be visible only when necessary.`),D(387,`The vertical scrollbar will always be visible.`),D(388,`The vertical scrollbar will always be hidden.`)],default:`auto`,description:D(389,`Controls the visibility of the vertical scrollbar.`)},"editor.scrollbar.horizontal":{type:`string`,enum:[`auto`,`visible`,`hidden`],enumDescriptions:[D(390,`The horizontal scrollbar will be visible only when necessary.`),D(391,`The horizontal scrollbar will always be visible.`),D(392,`The horizontal scrollbar will always be hidden.`)],default:`auto`,description:D(393,`Controls the visibility of the horizontal scrollbar.`)},"editor.scrollbar.verticalScrollbarSize":{type:`number`,default:e.verticalScrollbarSize,description:D(394,`The width of the vertical scrollbar.`)},"editor.scrollbar.horizontalScrollbarSize":{type:`number`,default:e.horizontalScrollbarSize,description:D(395,`The height of the horizontal scrollbar.`)},"editor.scrollbar.scrollByPage":{type:`boolean`,default:e.scrollByPage,description:D(396,`Controls whether clicks scroll by page or jump to click position.`)},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:`boolean`,default:e.ignoreHorizontalScrollbarInContentHeight,description:D(397,`When set, the horizontal scrollbar will not increase the size of the editor's content.`)}})}validate(e){if(!e||typeof e!=`object`)return this.defaultValue;let t=e,n=Vz.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),r=Vz.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Vz.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:LB(t.vertical,this.defaultValue.vertical),horizontal:LB(t.horizontal,this.defaultValue.horizontal),useShadows:K(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:K(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:K(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:K(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:K(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:n,horizontalSliderSize:Vz.clampedInt(t.horizontalSliderSize,n,0,1e3),verticalScrollbarSize:r,verticalSliderSize:Vz.clampedInt(t.verticalSliderSize,r,0,1e3),scrollByPage:K(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:K(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}},zB=`inUntrustedWorkspace`,BB={allowedCharacters:`editor.unicodeHighlight.allowedCharacters`,invisibleCharacters:`editor.unicodeHighlight.invisibleCharacters`,nonBasicASCII:`editor.unicodeHighlight.nonBasicASCII`,ambiguousCharacters:`editor.unicodeHighlight.ambiguousCharacters`,includeComments:`editor.unicodeHighlight.includeComments`,includeStrings:`editor.unicodeHighlight.includeStrings`,allowedLocales:`editor.unicodeHighlight.allowedLocales`},VB=class extends Pz{constructor(){let e={nonBasicASCII:zB,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:zB,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(J.unicodeHighlighting,`unicodeHighlight`,e,{[BB.nonBasicASCII]:{restricted:!0,type:[`boolean`,`string`],enum:[!0,!1,zB],default:e.nonBasicASCII,description:D(398,`Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.`)},[BB.invisibleCharacters]:{restricted:!0,type:`boolean`,default:e.invisibleCharacters,description:D(399,`Controls whether characters that just reserve space or have no width at all are highlighted.`)},[BB.ambiguousCharacters]:{restricted:!0,type:`boolean`,default:e.ambiguousCharacters,description:D(400,`Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.`)},[BB.includeComments]:{restricted:!0,type:[`boolean`,`string`],enum:[!0,!1,zB],default:e.includeComments,description:D(401,`Controls whether characters in comments should also be subject to Unicode highlighting.`)},[BB.includeStrings]:{restricted:!0,type:[`boolean`,`string`],enum:[!0,!1,zB],default:e.includeStrings,description:D(402,`Controls whether characters in strings should also be subject to Unicode highlighting.`)},[BB.allowedCharacters]:{restricted:!0,type:`object`,default:e.allowedCharacters,description:D(403,`Defines allowed characters that are not being highlighted.`),additionalProperties:{type:`boolean`}},[BB.allowedLocales]:{restricted:!0,type:`object`,additionalProperties:{type:`boolean`},default:e.allowedLocales,description:D(404,`Unicode characters that are common in allowed locales are not being highlighted.`)}})}applyUpdate(e,t){let n=!1;t.allowedCharacters&&e&&(rk(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},n=!0)),t.allowedLocales&&e&&(rk(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},n=!0));let r=super.applyUpdate(e,t);return n?new Fz(r.newValue,!0):r}validate(e){if(!e||typeof e!=`object`)return this.defaultValue;let t=e;return{nonBasicASCII:GB(t.nonBasicASCII,zB,[!0,!1,zB]),invisibleCharacters:K(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:K(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:GB(t.includeComments,zB,[!0,!1,zB]),includeStrings:GB(t.includeStrings,zB,[!0,!1,zB]),allowedCharacters:this.validateBooleanMap(t.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(t.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!=`object`||!e)return t;let n={};for(let[t,r]of Object.entries(e))r===!0&&(n[t]=!0);return n}},HB=class extends Pz{constructor(){let e={enabled:!0,mode:`subwordSmart`,showToolbar:`onHover`,suppressSuggestions:!1,keepOnBlur:!1,fontFamily:`default`,syntaxHighlightingEnabled:!0,minShowDelay:0,suppressInSnippetMode:!0,edits:{enabled:!0,showCollapsed:!1,renderSideBySide:`auto`,allowCodeShifting:`always`,showLongDistanceHint:!0},triggerCommandOnProviderChange:!1,experimental:{suppressInlineSuggestions:``,showOnSuggestConflict:`never`,emptyResponseInformation:!0}};super(J.inlineSuggest,`inlineSuggest`,e,{"editor.inlineSuggest.enabled":{type:`boolean`,default:e.enabled,description:D(405,`Controls whether to automatically show inline suggestions in the editor.`)},"editor.inlineSuggest.showToolbar":{type:`string`,default:e.showToolbar,enum:[`always`,`onHover`,`never`],enumDescriptions:[D(406,`Show the inline suggestion toolbar whenever an inline suggestion is shown.`),D(407,`Show the inline suggestion toolbar when hovering over an inline suggestion.`),D(408,`Never show the inline suggestion toolbar.`)],description:D(409,`Controls when to show the inline suggestion toolbar.`)},"editor.inlineSuggest.syntaxHighlightingEnabled":{type:`boolean`,default:e.syntaxHighlightingEnabled,description:D(410,`Controls whether to show syntax highlighting for inline suggestions in the editor.`)},"editor.inlineSuggest.suppressSuggestions":{type:`boolean`,default:e.suppressSuggestions,description:D(411,`Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.`)},"editor.inlineSuggest.suppressInSnippetMode":{type:`boolean`,default:e.suppressInSnippetMode,description:D(412,`Controls whether inline suggestions are suppressed when in snippet mode.`)},"editor.inlineSuggest.minShowDelay":{type:`number`,default:0,minimum:0,maximum:1e4,description:D(413,`Controls the minimal delay in milliseconds after which inline suggestions are shown after typing.`)},"editor.inlineSuggest.experimental.suppressInlineSuggestions":{type:`string`,default:e.experimental.suppressInlineSuggestions,tags:[`experimental`],description:D(414,`Suppresses inline completions for specified extension IDs -- comma separated.`),experiment:{mode:`auto`}},"editor.inlineSuggest.experimental.emptyResponseInformation":{type:`boolean`,default:e.experimental.emptyResponseInformation,tags:[`experimental`],description:D(415,`Controls whether to send request information from the inline suggestion provider.`),experiment:{mode:`auto`}},"editor.inlineSuggest.triggerCommandOnProviderChange":{type:`boolean`,default:e.triggerCommandOnProviderChange,tags:[`experimental`],description:D(416,`Controls whether to trigger a command when the inline suggestion provider changes.`),experiment:{mode:`auto`}},"editor.inlineSuggest.experimental.showOnSuggestConflict":{type:`string`,default:e.experimental.showOnSuggestConflict,tags:[`experimental`],enum:[`always`,`never`,`whenSuggestListIsIncomplete`],description:D(417,`Controls whether to show inline suggestions when there is a suggest conflict.`),experiment:{mode:`auto`}},"editor.inlineSuggest.fontFamily":{type:`string`,default:e.fontFamily,description:D(418,`Controls the font family of the inline suggestions.`)},"editor.inlineSuggest.edits.allowCodeShifting":{type:`string`,default:e.edits.allowCodeShifting,description:D(419,`Controls whether showing a suggestion will shift the code to make space for the suggestion inline.`),enum:[`always`,`horizontal`,`never`],tags:[`nextEditSuggestions`]},"editor.inlineSuggest.edits.showLongDistanceHint":{type:`boolean`,default:e.edits.showLongDistanceHint,description:D(420,`Controls whether long distance inline suggestions are shown.`),tags:[`nextEditSuggestions`,`experimental`]},"editor.inlineSuggest.edits.renderSideBySide":{type:`string`,default:e.edits.renderSideBySide,description:D(421,`Controls whether larger suggestions can be shown side by side.`),enum:[`auto`,`never`],enumDescriptions:[D(422,`Larger suggestions will show side by side if there is enough space, otherwise they will be shown below.`),D(423,`Larger suggestions are never shown side by side and will always be shown below.`)],tags:[`nextEditSuggestions`]},"editor.inlineSuggest.edits.showCollapsed":{type:`boolean`,default:e.edits.showCollapsed,description:D(424,`Controls whether the suggestion will show as collapsed until jumping to it.`),tags:[`nextEditSuggestions`]}})}validate(e){if(!e||typeof e!=`object`)return this.defaultValue;let t=e;return{enabled:K(t.enabled,this.defaultValue.enabled),mode:Gz(t.mode,this.defaultValue.mode,[`prefix`,`subword`,`subwordSmart`]),showToolbar:Gz(t.showToolbar,this.defaultValue.showToolbar,[`always`,`onHover`,`never`]),suppressSuggestions:K(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:K(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:Wz.string(t.fontFamily,this.defaultValue.fontFamily),syntaxHighlightingEnabled:K(t.syntaxHighlightingEnabled,this.defaultValue.syntaxHighlightingEnabled),minShowDelay:Vz.clampedInt(t.minShowDelay,0,0,1e4),suppressInSnippetMode:K(t.suppressInSnippetMode,this.defaultValue.suppressInSnippetMode),edits:this._validateEdits(t.edits),triggerCommandOnProviderChange:K(t.triggerCommandOnProviderChange,this.defaultValue.triggerCommandOnProviderChange),experimental:this._validateExperimental(t.experimental)}}_validateEdits(e){if(!e||typeof e!=`object`)return this.defaultValue.edits;let t=e;return{enabled:K(t.enabled,this.defaultValue.edits.enabled),showCollapsed:K(t.showCollapsed,this.defaultValue.edits.showCollapsed),allowCodeShifting:Gz(t.allowCodeShifting,this.defaultValue.edits.allowCodeShifting,[`always`,`horizontal`,`never`]),showLongDistanceHint:K(t.showLongDistanceHint,this.defaultValue.edits.showLongDistanceHint),renderSideBySide:Gz(t.renderSideBySide,this.defaultValue.edits.renderSideBySide,[`never`,`auto`])}}_validateExperimental(e){if(!e||typeof e!=`object`)return this.defaultValue.experimental;let t=e;return{suppressInlineSuggestions:Wz.string(t.suppressInlineSuggestions,this.defaultValue.experimental.suppressInlineSuggestions),showOnSuggestConflict:Gz(t.showOnSuggestConflict,this.defaultValue.experimental.showOnSuggestConflict,[`always`,`never`,`whenSuggestListIsIncomplete`]),emptyResponseInformation:K(t.emptyResponseInformation,this.defaultValue.experimental.emptyResponseInformation)}}},UB=class extends Pz{constructor(){let e={enabled:wz.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:wz.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(J.bracketPairColorization,`bracketPairColorization`,e,{"editor.bracketPairColorization.enabled":{type:`boolean`,default:e.enabled,markdownDescription:D(425,`Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.`,"`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:`boolean`,default:e.independentColorPoolPerBracketType,description:D(426,`Controls whether each bracket type has its own independent color pool.`)}})}validate(e){if(!e||typeof e!=`object`)return this.defaultValue;let t=e;return{enabled:K(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:K(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}},WB=class extends Pz{constructor(){let e={bracketPairs:!1,bracketPairsHorizontal:`active`,highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(J.guides,`guides`,e,{"editor.guides.bracketPairs":{type:[`boolean`,`string`],enum:[!0,`active`,!1],enumDescriptions:[D(427,`Enables bracket pair guides.`),D(428,`Enables bracket pair guides only for the active bracket pair.`),D(429,`Disables bracket pair guides.`)],default:e.bracketPairs,description:D(430,`Controls whether bracket pair guides are enabled or not.`)},"editor.guides.bracketPairsHorizontal":{type:[`boolean`,`string`],enum:[!0,`active`,!1],enumDescriptions:[D(431,`Enables horizontal guides as addition to vertical bracket pair guides.`),D(432,`Enables horizontal guides only for the active bracket pair.`),D(433,`Disables horizontal bracket pair guides.`)],default:e.bracketPairsHorizontal,description:D(434,`Controls whether horizontal bracket pair guides are enabled or not.`)},"editor.guides.highlightActiveBracketPair":{type:`boolean`,default:e.highlightActiveBracketPair,description:D(435,`Controls whether the editor should highlight the active bracket pair.`)},"editor.guides.indentation":{type:`boolean`,default:e.indentation,description:D(436,`Controls whether the editor should render indent guides.`)},"editor.guides.highlightActiveIndentation":{type:[`boolean`,`string`],enum:[!0,`always`,!1],enumDescriptions:[D(437,`Highlights the active indent guide.`),D(438,`Highlights the active indent guide even if bracket guides are highlighted.`),D(439,`Do not highlight the active indent guide.`)],default:e.highlightActiveIndentation,description:D(440,`Controls whether the editor should highlight the active indent guide.`)}})}validate(e){if(!e||typeof e!=`object`)return this.defaultValue;let t=e;return{bracketPairs:GB(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,`active`]),bracketPairsHorizontal:GB(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,`active`]),highlightActiveBracketPair:K(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:K(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:GB(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,`always`])}}};function GB(e,t,n){let r=n.indexOf(e);return r===-1?t:n[r]}var KB=class extends Pz{constructor(){let e={insertMode:`insert`,filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:`always`,showIcons:!0,showStatusBar:!1,preview:!1,previewMode:`subwordSmart`,showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(J.suggest,`suggest`,e,{"editor.suggest.insertMode":{type:`string`,enum:[`insert`,`replace`],enumDescriptions:[D(441,`Insert suggestion without overwriting text right of the cursor.`),D(442,`Insert suggestion and overwrite text right of the cursor.`)],default:e.insertMode,description:D(443,`Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.`)},"editor.suggest.filterGraceful":{type:`boolean`,default:e.filterGraceful,description:D(444,`Controls whether filtering and sorting suggestions accounts for small typos.`)},"editor.suggest.localityBonus":{type:`boolean`,default:e.localityBonus,description:D(445,`Controls whether sorting favors words that appear close to the cursor.`)},"editor.suggest.shareSuggestSelections":{type:`boolean`,default:e.shareSuggestSelections,markdownDescription:D(446,"Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:`string`,enum:[`always`,`never`,`whenTriggerCharacter`,`whenQuickSuggestion`],enumDescriptions:[D(447,`Always select a suggestion when automatically triggering IntelliSense.`),D(448,`Never select a suggestion when automatically triggering IntelliSense.`),D(449,`Select a suggestion only when triggering IntelliSense from a trigger character.`),D(450,`Select a suggestion only when triggering IntelliSense as you type.`)],default:e.selectionMode,markdownDescription:D(451,"Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions ({0} and {1}) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.","`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:`boolean`,default:e.snippetsPreventQuickSuggestions,description:D(452,`Controls whether an active snippet prevents quick suggestions.`)},"editor.suggest.showIcons":{type:`boolean`,default:e.showIcons,description:D(453,`Controls whether to show or hide icons in suggestions.`)},"editor.suggest.showStatusBar":{type:`boolean`,default:e.showStatusBar,description:D(454,`Controls the visibility of the status bar at the bottom of the suggest widget.`)},"editor.suggest.preview":{type:`boolean`,default:e.preview,description:D(455,`Controls whether to preview the suggestion outcome in the editor.`)},"editor.suggest.showInlineDetails":{type:`boolean`,default:e.showInlineDetails,description:D(456,`Controls whether suggest details show inline with the label or only in the details widget.`)},"editor.suggest.maxVisibleSuggestions":{type:`number`,deprecationMessage:D(457,`This setting is deprecated. The suggest widget can now be resized.`)},"editor.suggest.filteredTypes":{type:`object`,deprecationMessage:D(458,`This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.`)},"editor.suggest.showMethods":{type:`boolean`,default:!0,markdownDescription:D(459,"When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:`boolean`,default:!0,markdownDescription:D(460,"When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:`boolean`,default:!0,markdownDescription:D(461,"When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:`boolean`,default:!0,markdownDescription:D(462,"When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:`boolean`,default:!0,markdownDescription:D(463,"When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:`boolean`,default:!0,markdownDescription:D(464,"When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:`boolean`,default:!0,markdownDescription:D(465,"When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:`boolean`,default:!0,markdownDescription:D(466,"When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:`boolean`,default:!0,markdownDescription:D(467,"When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:`boolean`,default:!0,markdownDescription:D(468,"When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:`boolean`,default:!0,markdownDescription:D(469,"When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:`boolean`,default:!0,markdownDescription:D(470,"When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:`boolean`,default:!0,markdownDescription:D(471,"When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:`boolean`,default:!0,markdownDescription:D(472,"When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:`boolean`,default:!0,markdownDescription:D(473,"When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:`boolean`,default:!0,markdownDescription:D(474,"When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:`boolean`,default:!0,markdownDescription:D(475,"When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:`boolean`,default:!0,markdownDescription:D(476,"When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:`boolean`,default:!0,markdownDescription:D(477,"When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:`boolean`,default:!0,markdownDescription:D(478,"When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:`boolean`,default:!0,markdownDescription:D(479,"When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:`boolean`,default:!0,markdownDescription:D(480,"When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:`boolean`,default:!0,markdownDescription:D(481,"When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:`boolean`,default:!0,markdownDescription:D(482,"When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:`boolean`,default:!0,markdownDescription:D(483,"When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:`boolean`,default:!0,markdownDescription:D(484,"When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:`boolean`,default:!0,markdownDescription:D(485,"When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:`boolean`,default:!0,markdownDescription:D(486,"When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:`boolean`,default:!0,markdownDescription:D(487,"When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:`boolean`,default:!0,markdownDescription:D(488,"When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!=`object`)return this.defaultValue;let t=e;return{insertMode:Gz(t.insertMode,this.defaultValue.insertMode,[`insert`,`replace`]),filterGraceful:K(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:K(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:K(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:K(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:Gz(t.selectionMode,this.defaultValue.selectionMode,[`always`,`never`,`whenQuickSuggestion`,`whenTriggerCharacter`]),showIcons:K(t.showIcons,this.defaultValue.showIcons),showStatusBar:K(t.showStatusBar,this.defaultValue.showStatusBar),preview:K(t.preview,this.defaultValue.preview),previewMode:Gz(t.previewMode,this.defaultValue.previewMode,[`prefix`,`subword`,`subwordSmart`]),showInlineDetails:K(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:K(t.showMethods,this.defaultValue.showMethods),showFunctions:K(t.showFunctions,this.defaultValue.showFunctions),showConstructors:K(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:K(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:K(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:K(t.showFields,this.defaultValue.showFields),showVariables:K(t.showVariables,this.defaultValue.showVariables),showClasses:K(t.showClasses,this.defaultValue.showClasses),showStructs:K(t.showStructs,this.defaultValue.showStructs),showInterfaces:K(t.showInterfaces,this.defaultValue.showInterfaces),showModules:K(t.showModules,this.defaultValue.showModules),showProperties:K(t.showProperties,this.defaultValue.showProperties),showEvents:K(t.showEvents,this.defaultValue.showEvents),showOperators:K(t.showOperators,this.defaultValue.showOperators),showUnits:K(t.showUnits,this.defaultValue.showUnits),showValues:K(t.showValues,this.defaultValue.showValues),showConstants:K(t.showConstants,this.defaultValue.showConstants),showEnums:K(t.showEnums,this.defaultValue.showEnums),showEnumMembers:K(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:K(t.showKeywords,this.defaultValue.showKeywords),showWords:K(t.showWords,this.defaultValue.showWords),showColors:K(t.showColors,this.defaultValue.showColors),showFiles:K(t.showFiles,this.defaultValue.showFiles),showReferences:K(t.showReferences,this.defaultValue.showReferences),showFolders:K(t.showFolders,this.defaultValue.showFolders),showTypeParameters:K(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:K(t.showSnippets,this.defaultValue.showSnippets),showUsers:K(t.showUsers,this.defaultValue.showUsers),showIssues:K(t.showIssues,this.defaultValue.showIssues)}}},qB=class extends Pz{constructor(){super(J.smartSelect,`smartSelect`,{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:D(489,`Whether leading and trailing whitespace should always be selected.`),default:!0,type:`boolean`},"editor.smartSelect.selectSubwords":{description:D(490,`Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected.`),default:!0,type:`boolean`}})}validate(e){return!e||typeof e!=`object`?this.defaultValue:{selectLeadingAndTrailingWhitespace:K(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:K(e.selectSubwords,this.defaultValue.selectSubwords)}}},JB=class extends Pz{constructor(){let e=[];super(J.wordSegmenterLocales,`wordSegmenterLocales`,e,{anyOf:[{type:`string`},{type:`array`,items:{type:`string`}}],description:D(491,`Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.).`),type:`array`,items:{type:`string`},default:e})}validate(e){if(typeof e==`string`&&(e=[e]),Array.isArray(e)){let t=[];for(let n of e)if(typeof n==`string`)try{Intl.Segmenter.supportedLocalesOf(n).length>0&&t.push(n)}catch{}return t}return this.defaultValue}},YB;(function(e){e[e.None=0]=`None`,e[e.Same=1]=`Same`,e[e.Indent=2]=`Indent`,e[e.DeepIndent=3]=`DeepIndent`})(YB||={});var XB=class extends Pz{constructor(){super(J.wrappingIndent,`wrappingIndent`,YB.Same,{"editor.wrappingIndent":{type:`string`,enum:[`none`,`same`,`indent`,`deepIndent`],enumDescriptions:[D(492,`No indentation. Wrapped lines begin at column 1.`),D(493,`Wrapped lines get the same indentation as the parent.`),D(494,`Wrapped lines get +1 indentation toward the parent.`),D(495,`Wrapped lines get +2 indentation toward the parent.`)],description:D(496,`Controls the indentation of wrapped lines.`),default:`same`}})}validate(e){switch(e){case`none`:return YB.None;case`same`:return YB.Same;case`indent`:return YB.Indent;case`deepIndent`:return YB.DeepIndent}return YB.Same}compute(e,t,n){return t.get(J.accessibilitySupport)===Az.Enabled?YB.None:n}},ZB=class extends Lz{constructor(){super(J.wrappingInfo,{isDominatedByLongLines:!1,isWordWrapMinified:!1,isViewportWrapping:!1,wrappingColumn:-1})}compute(e,t,n){let r=t.get(J.layoutInfo);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:r.isWordWrapMinified,isViewportWrapping:r.isViewportWrapping,wrappingColumn:r.wrappingColumn}}},QB=class extends Pz{constructor(){let e={enabled:!0,showDropSelector:`afterDrop`};super(J.dropIntoEditor,`dropIntoEditor`,e,{"editor.dropIntoEditor.enabled":{type:`boolean`,default:e.enabled,markdownDescription:D(497,"Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:`string`,markdownDescription:D(498,`Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped.`),enum:[`afterDrop`,`never`],enumDescriptions:[D(499,`Show the drop selector widget after a file is dropped into the editor.`),D(500,`Never show the drop selector widget. Instead the default drop provider is always used.`)],default:`afterDrop`}})}validate(e){if(!e||typeof e!=`object`)return this.defaultValue;let t=e;return{enabled:K(t.enabled,this.defaultValue.enabled),showDropSelector:Gz(t.showDropSelector,this.defaultValue.showDropSelector,[`afterDrop`,`never`])}}},$B=class extends Pz{constructor(){let e={enabled:!0,showPasteSelector:`afterPaste`};super(J.pasteAs,`pasteAs`,e,{"editor.pasteAs.enabled":{type:`boolean`,default:e.enabled,markdownDescription:D(501,`Controls whether you can paste content in different ways.`)},"editor.pasteAs.showPasteSelector":{type:`string`,markdownDescription:D(502,`Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted.`),enum:[`afterPaste`,`never`],enumDescriptions:[D(503,`Show the paste selector widget after content is pasted into the editor.`),D(504,`Never show the paste selector widget. Instead the default pasting behavior is always used.`)],default:`afterPaste`}})}validate(e){if(!e||typeof e!=`object`)return this.defaultValue;let t=e;return{enabled:K(t.enabled,this.defaultValue.enabled),showPasteSelector:Gz(t.showPasteSelector,this.defaultValue.showPasteSelector,[`afterPaste`,`never`])}}},eV=[];function q(e){return eV[e.id]=e,e}var J;(function(e){e[e.acceptSuggestionOnCommitCharacter=0]=`acceptSuggestionOnCommitCharacter`,e[e.acceptSuggestionOnEnter=1]=`acceptSuggestionOnEnter`,e[e.accessibilitySupport=2]=`accessibilitySupport`,e[e.accessibilityPageSize=3]=`accessibilityPageSize`,e[e.allowOverflow=4]=`allowOverflow`,e[e.allowVariableLineHeights=5]=`allowVariableLineHeights`,e[e.allowVariableFonts=6]=`allowVariableFonts`,e[e.allowVariableFontsInAccessibilityMode=7]=`allowVariableFontsInAccessibilityMode`,e[e.ariaLabel=8]=`ariaLabel`,e[e.ariaRequired=9]=`ariaRequired`,e[e.autoClosingBrackets=10]=`autoClosingBrackets`,e[e.autoClosingComments=11]=`autoClosingComments`,e[e.screenReaderAnnounceInlineSuggestion=12]=`screenReaderAnnounceInlineSuggestion`,e[e.autoClosingDelete=13]=`autoClosingDelete`,e[e.autoClosingOvertype=14]=`autoClosingOvertype`,e[e.autoClosingQuotes=15]=`autoClosingQuotes`,e[e.autoIndent=16]=`autoIndent`,e[e.autoIndentOnPaste=17]=`autoIndentOnPaste`,e[e.autoIndentOnPasteWithinString=18]=`autoIndentOnPasteWithinString`,e[e.automaticLayout=19]=`automaticLayout`,e[e.autoSurround=20]=`autoSurround`,e[e.bracketPairColorization=21]=`bracketPairColorization`,e[e.guides=22]=`guides`,e[e.codeLens=23]=`codeLens`,e[e.codeLensFontFamily=24]=`codeLensFontFamily`,e[e.codeLensFontSize=25]=`codeLensFontSize`,e[e.colorDecorators=26]=`colorDecorators`,e[e.colorDecoratorsLimit=27]=`colorDecoratorsLimit`,e[e.columnSelection=28]=`columnSelection`,e[e.comments=29]=`comments`,e[e.contextmenu=30]=`contextmenu`,e[e.copyWithSyntaxHighlighting=31]=`copyWithSyntaxHighlighting`,e[e.cursorBlinking=32]=`cursorBlinking`,e[e.cursorSmoothCaretAnimation=33]=`cursorSmoothCaretAnimation`,e[e.cursorStyle=34]=`cursorStyle`,e[e.cursorSurroundingLines=35]=`cursorSurroundingLines`,e[e.cursorSurroundingLinesStyle=36]=`cursorSurroundingLinesStyle`,e[e.cursorWidth=37]=`cursorWidth`,e[e.cursorHeight=38]=`cursorHeight`,e[e.disableLayerHinting=39]=`disableLayerHinting`,e[e.disableMonospaceOptimizations=40]=`disableMonospaceOptimizations`,e[e.domReadOnly=41]=`domReadOnly`,e[e.dragAndDrop=42]=`dragAndDrop`,e[e.dropIntoEditor=43]=`dropIntoEditor`,e[e.editContext=44]=`editContext`,e[e.emptySelectionClipboard=45]=`emptySelectionClipboard`,e[e.experimentalGpuAcceleration=46]=`experimentalGpuAcceleration`,e[e.experimentalWhitespaceRendering=47]=`experimentalWhitespaceRendering`,e[e.extraEditorClassName=48]=`extraEditorClassName`,e[e.fastScrollSensitivity=49]=`fastScrollSensitivity`,e[e.find=50]=`find`,e[e.fixedOverflowWidgets=51]=`fixedOverflowWidgets`,e[e.folding=52]=`folding`,e[e.foldingStrategy=53]=`foldingStrategy`,e[e.foldingHighlight=54]=`foldingHighlight`,e[e.foldingImportsByDefault=55]=`foldingImportsByDefault`,e[e.foldingMaximumRegions=56]=`foldingMaximumRegions`,e[e.unfoldOnClickAfterEndOfLine=57]=`unfoldOnClickAfterEndOfLine`,e[e.fontFamily=58]=`fontFamily`,e[e.fontInfo=59]=`fontInfo`,e[e.fontLigatures=60]=`fontLigatures`,e[e.fontSize=61]=`fontSize`,e[e.fontWeight=62]=`fontWeight`,e[e.fontVariations=63]=`fontVariations`,e[e.formatOnPaste=64]=`formatOnPaste`,e[e.formatOnType=65]=`formatOnType`,e[e.glyphMargin=66]=`glyphMargin`,e[e.gotoLocation=67]=`gotoLocation`,e[e.hideCursorInOverviewRuler=68]=`hideCursorInOverviewRuler`,e[e.hover=69]=`hover`,e[e.inDiffEditor=70]=`inDiffEditor`,e[e.inlineSuggest=71]=`inlineSuggest`,e[e.letterSpacing=72]=`letterSpacing`,e[e.lightbulb=73]=`lightbulb`,e[e.lineDecorationsWidth=74]=`lineDecorationsWidth`,e[e.lineHeight=75]=`lineHeight`,e[e.lineNumbers=76]=`lineNumbers`,e[e.lineNumbersMinChars=77]=`lineNumbersMinChars`,e[e.linkedEditing=78]=`linkedEditing`,e[e.links=79]=`links`,e[e.matchBrackets=80]=`matchBrackets`,e[e.minimap=81]=`minimap`,e[e.mouseStyle=82]=`mouseStyle`,e[e.mouseWheelScrollSensitivity=83]=`mouseWheelScrollSensitivity`,e[e.mouseWheelZoom=84]=`mouseWheelZoom`,e[e.multiCursorMergeOverlapping=85]=`multiCursorMergeOverlapping`,e[e.multiCursorModifier=86]=`multiCursorModifier`,e[e.mouseMiddleClickAction=87]=`mouseMiddleClickAction`,e[e.multiCursorPaste=88]=`multiCursorPaste`,e[e.multiCursorLimit=89]=`multiCursorLimit`,e[e.occurrencesHighlight=90]=`occurrencesHighlight`,e[e.occurrencesHighlightDelay=91]=`occurrencesHighlightDelay`,e[e.overtypeCursorStyle=92]=`overtypeCursorStyle`,e[e.overtypeOnPaste=93]=`overtypeOnPaste`,e[e.overviewRulerBorder=94]=`overviewRulerBorder`,e[e.overviewRulerLanes=95]=`overviewRulerLanes`,e[e.padding=96]=`padding`,e[e.pasteAs=97]=`pasteAs`,e[e.parameterHints=98]=`parameterHints`,e[e.peekWidgetDefaultFocus=99]=`peekWidgetDefaultFocus`,e[e.placeholder=100]=`placeholder`,e[e.definitionLinkOpensInPeek=101]=`definitionLinkOpensInPeek`,e[e.quickSuggestions=102]=`quickSuggestions`,e[e.quickSuggestionsDelay=103]=`quickSuggestionsDelay`,e[e.readOnly=104]=`readOnly`,e[e.readOnlyMessage=105]=`readOnlyMessage`,e[e.renameOnType=106]=`renameOnType`,e[e.renderRichScreenReaderContent=107]=`renderRichScreenReaderContent`,e[e.renderControlCharacters=108]=`renderControlCharacters`,e[e.renderFinalNewline=109]=`renderFinalNewline`,e[e.renderLineHighlight=110]=`renderLineHighlight`,e[e.renderLineHighlightOnlyWhenFocus=111]=`renderLineHighlightOnlyWhenFocus`,e[e.renderValidationDecorations=112]=`renderValidationDecorations`,e[e.renderWhitespace=113]=`renderWhitespace`,e[e.revealHorizontalRightPadding=114]=`revealHorizontalRightPadding`,e[e.roundedSelection=115]=`roundedSelection`,e[e.rulers=116]=`rulers`,e[e.scrollbar=117]=`scrollbar`,e[e.scrollBeyondLastColumn=118]=`scrollBeyondLastColumn`,e[e.scrollBeyondLastLine=119]=`scrollBeyondLastLine`,e[e.scrollPredominantAxis=120]=`scrollPredominantAxis`,e[e.selectionClipboard=121]=`selectionClipboard`,e[e.selectionHighlight=122]=`selectionHighlight`,e[e.selectionHighlightMaxLength=123]=`selectionHighlightMaxLength`,e[e.selectionHighlightMultiline=124]=`selectionHighlightMultiline`,e[e.selectOnLineNumbers=125]=`selectOnLineNumbers`,e[e.showFoldingControls=126]=`showFoldingControls`,e[e.showUnused=127]=`showUnused`,e[e.snippetSuggestions=128]=`snippetSuggestions`,e[e.smartSelect=129]=`smartSelect`,e[e.smoothScrolling=130]=`smoothScrolling`,e[e.stickyScroll=131]=`stickyScroll`,e[e.stickyTabStops=132]=`stickyTabStops`,e[e.stopRenderingLineAfter=133]=`stopRenderingLineAfter`,e[e.suggest=134]=`suggest`,e[e.suggestFontSize=135]=`suggestFontSize`,e[e.suggestLineHeight=136]=`suggestLineHeight`,e[e.suggestOnTriggerCharacters=137]=`suggestOnTriggerCharacters`,e[e.suggestSelection=138]=`suggestSelection`,e[e.tabCompletion=139]=`tabCompletion`,e[e.tabIndex=140]=`tabIndex`,e[e.trimWhitespaceOnDelete=141]=`trimWhitespaceOnDelete`,e[e.unicodeHighlighting=142]=`unicodeHighlighting`,e[e.unusualLineTerminators=143]=`unusualLineTerminators`,e[e.useShadowDOM=144]=`useShadowDOM`,e[e.useTabStops=145]=`useTabStops`,e[e.wordBreak=146]=`wordBreak`,e[e.wordSegmenterLocales=147]=`wordSegmenterLocales`,e[e.wordSeparators=148]=`wordSeparators`,e[e.wordWrap=149]=`wordWrap`,e[e.wordWrapBreakAfterCharacters=150]=`wordWrapBreakAfterCharacters`,e[e.wordWrapBreakBeforeCharacters=151]=`wordWrapBreakBeforeCharacters`,e[e.wordWrapColumn=152]=`wordWrapColumn`,e[e.wordWrapOverride1=153]=`wordWrapOverride1`,e[e.wordWrapOverride2=154]=`wordWrapOverride2`,e[e.wrappingIndent=155]=`wrappingIndent`,e[e.wrappingStrategy=156]=`wrappingStrategy`,e[e.showDeprecated=157]=`showDeprecated`,e[e.inertialScroll=158]=`inertialScroll`,e[e.inlayHints=159]=`inlayHints`,e[e.wrapOnEscapedLineFeeds=160]=`wrapOnEscapedLineFeeds`,e[e.effectiveCursorStyle=161]=`effectiveCursorStyle`,e[e.editorClassName=162]=`editorClassName`,e[e.pixelRatio=163]=`pixelRatio`,e[e.tabFocusMode=164]=`tabFocusMode`,e[e.layoutInfo=165]=`layoutInfo`,e[e.wrappingInfo=166]=`wrappingInfo`,e[e.defaultColorDecorators=167]=`defaultColorDecorators`,e[e.colorDecoratorsActivatedOn=168]=`colorDecoratorsActivatedOn`,e[e.inlineCompletionsAccessibilityVerbose=169]=`inlineCompletionsAccessibilityVerbose`,e[e.effectiveEditContext=170]=`effectiveEditContext`,e[e.scrollOnMiddleClick=171]=`scrollOnMiddleClick`,e[e.effectiveAllowVariableFonts=172]=`effectiveAllowVariableFonts`})(J||={});var tV={acceptSuggestionOnCommitCharacter:q(new zz(J.acceptSuggestionOnCommitCharacter,`acceptSuggestionOnCommitCharacter`,!0,{markdownDescription:D(505,"Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:q(new Kz(J.acceptSuggestionOnEnter,`acceptSuggestionOnEnter`,`on`,[`on`,`smart`,`off`],{markdownEnumDescriptions:[``,D(506,"Only accept a suggestion with `Enter` when it makes a textual change."),``],markdownDescription:D(507,"Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:q(new Yz),accessibilityPageSize:q(new Vz(J.accessibilityPageSize,`accessibilityPageSize`,500,1,Ca.MAX_SAFE_SMALL_INTEGER,{description:D(508,`Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default.`),tags:[`accessibility`]})),allowOverflow:q(new zz(J.allowOverflow,`allowOverflow`,!0)),allowVariableLineHeights:q(new zz(J.allowVariableLineHeights,`allowVariableLineHeights`,!0,{description:D(509,`Controls whether to allow using variable line heights in the editor.`)})),allowVariableFonts:q(new zz(J.allowVariableFonts,`allowVariableFonts`,!0,{description:D(510,`Controls whether to allow using variable fonts in the editor.`)})),allowVariableFontsInAccessibilityMode:q(new zz(J.allowVariableFontsInAccessibilityMode,`allowVariableFontsInAccessibilityMode`,!1,{description:D(511,`Controls whether to allow using variable fonts in the editor in the accessibility mode.`),tags:[`accessibility`]})),ariaLabel:q(new Wz(J.ariaLabel,`ariaLabel`,D(512,`Editor content`))),ariaRequired:q(new zz(J.ariaRequired,`ariaRequired`,!1,void 0)),screenReaderAnnounceInlineSuggestion:q(new zz(J.screenReaderAnnounceInlineSuggestion,`screenReaderAnnounceInlineSuggestion`,!0,{description:D(513,`Control whether inline suggestions are announced by a screen reader.`),tags:[`accessibility`]})),autoClosingBrackets:q(new Kz(J.autoClosingBrackets,`autoClosingBrackets`,`languageDefined`,[`always`,`languageDefined`,`beforeWhitespace`,`never`],{enumDescriptions:[``,D(514,`Use language configurations to determine when to autoclose brackets.`),D(515,`Autoclose brackets only when the cursor is to the left of whitespace.`),``],description:D(516,`Controls whether the editor should automatically close brackets after the user adds an opening bracket.`)})),autoClosingComments:q(new Kz(J.autoClosingComments,`autoClosingComments`,`languageDefined`,[`always`,`languageDefined`,`beforeWhitespace`,`never`],{enumDescriptions:[``,D(517,`Use language configurations to determine when to autoclose comments.`),D(518,`Autoclose comments only when the cursor is to the left of whitespace.`),``],description:D(519,`Controls whether the editor should automatically close comments after the user adds an opening comment.`)})),autoClosingDelete:q(new Kz(J.autoClosingDelete,`autoClosingDelete`,`auto`,[`always`,`auto`,`never`],{enumDescriptions:[``,D(520,`Remove adjacent closing quotes or brackets only if they were automatically inserted.`),``],description:D(521,`Controls whether the editor should remove adjacent closing quotes or brackets when deleting.`)})),autoClosingOvertype:q(new Kz(J.autoClosingOvertype,`autoClosingOvertype`,`auto`,[`always`,`auto`,`never`],{enumDescriptions:[``,D(522,`Type over closing quotes or brackets only if they were automatically inserted.`),``],description:D(523,`Controls whether the editor should type over closing quotes or brackets.`)})),autoClosingQuotes:q(new Kz(J.autoClosingQuotes,`autoClosingQuotes`,`languageDefined`,[`always`,`languageDefined`,`beforeWhitespace`,`never`],{enumDescriptions:[``,D(524,`Use language configurations to determine when to autoclose quotes.`),D(525,`Autoclose quotes only when the cursor is to the left of whitespace.`),``],description:D(526,`Controls whether the editor should automatically close quotes after the user adds an opening quote.`)})),autoIndent:q(new qz(J.autoIndent,`autoIndent`,Mz.Full,`full`,[`none`,`keep`,`brackets`,`advanced`,`full`],Jz,{enumDescriptions:[D(527,`The editor will not insert indentation automatically.`),D(528,`The editor will keep the current line's indentation.`),D(529,`The editor will keep the current line's indentation and honor language defined brackets.`),D(530,`The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages.`),D(531,`The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.`)],description:D(532,`Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.`)})),autoIndentOnPaste:q(new zz(J.autoIndentOnPaste,`autoIndentOnPaste`,!1,{description:D(533,`Controls whether the editor should automatically auto-indent the pasted content.`)})),autoIndentOnPasteWithinString:q(new zz(J.autoIndentOnPasteWithinString,`autoIndentOnPasteWithinString`,!0,{description:D(534,`Controls whether the editor should automatically auto-indent the pasted content when pasted within a string. This takes effect when autoIndentOnPaste is true.`)})),automaticLayout:q(new zz(J.automaticLayout,`automaticLayout`,!1)),autoSurround:q(new Kz(J.autoSurround,`autoSurround`,`languageDefined`,[`languageDefined`,`quotes`,`brackets`,`never`],{enumDescriptions:[D(535,`Use language configurations to determine when to automatically surround selections.`),D(536,`Surround with quotes but not brackets.`),D(537,`Surround with brackets but not quotes.`),``],description:D(538,`Controls whether the editor should automatically surround selections when typing quotes or brackets.`)})),bracketPairColorization:q(new UB),bracketPairGuides:q(new WB),stickyTabStops:q(new zz(J.stickyTabStops,`stickyTabStops`,!1,{description:D(539,`Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.`)})),codeLens:q(new zz(J.codeLens,`codeLens`,!0,{description:D(540,`Controls whether the editor shows CodeLens.`)})),codeLensFontFamily:q(new Wz(J.codeLensFontFamily,`codeLensFontFamily`,``,{description:D(541,`Controls the font family for CodeLens.`)})),codeLensFontSize:q(new Vz(J.codeLensFontSize,`codeLensFontSize`,0,0,100,{type:`number`,default:0,minimum:0,maximum:100,markdownDescription:D(542,"Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:q(new zz(J.colorDecorators,`colorDecorators`,!0,{description:D(543,`Controls whether the editor should render the inline color decorators and color picker.`)})),colorDecoratorActivatedOn:q(new Kz(J.colorDecoratorsActivatedOn,`colorDecoratorsActivatedOn`,`clickAndHover`,[`clickAndHover`,`hover`,`click`],{enumDescriptions:[D(544,`Make the color picker appear both on click and hover of the color decorator`),D(545,`Make the color picker appear on hover of the color decorator`),D(546,`Make the color picker appear on click of the color decorator`)],description:D(547,`Controls the condition to make a color picker appear from a color decorator.`)})),colorDecoratorsLimit:q(new Vz(J.colorDecoratorsLimit,`colorDecoratorsLimit`,500,1,1e6,{markdownDescription:D(548,`Controls the max number of color decorators that can be rendered in an editor at once.`)})),columnSelection:q(new zz(J.columnSelection,`columnSelection`,!1,{description:D(549,`Enable that the selection with the mouse and keys is doing column selection.`)})),comments:q(new Xz),contextmenu:q(new zz(J.contextmenu,`contextmenu`,!0)),copyWithSyntaxHighlighting:q(new zz(J.copyWithSyntaxHighlighting,`copyWithSyntaxHighlighting`,!0,{description:D(550,`Controls whether syntax highlighting should be copied into the clipboard.`)})),cursorBlinking:q(new qz(J.cursorBlinking,`cursorBlinking`,Zz.Blink,`blink`,[`blink`,`smooth`,`phase`,`expand`,`solid`],Qz,{description:D(551,`Control the cursor animation style.`)})),cursorSmoothCaretAnimation:q(new Kz(J.cursorSmoothCaretAnimation,`cursorSmoothCaretAnimation`,`off`,[`off`,`explicit`,`on`],{enumDescriptions:[D(552,`Smooth caret animation is disabled.`),D(553,`Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture.`),D(554,`Smooth caret animation is always enabled.`)],description:D(555,`Controls whether the smooth caret animation should be enabled.`)})),cursorStyle:q(new qz(J.cursorStyle,`cursorStyle`,$z.Line,`line`,[`line`,`block`,`underline`,`line-thin`,`block-outline`,`underline-thin`],tB,{description:D(556,`Controls the cursor style in insert input mode.`)})),overtypeCursorStyle:q(new qz(J.overtypeCursorStyle,`overtypeCursorStyle`,$z.Block,`block`,[`line`,`block`,`underline`,`line-thin`,`block-outline`,`underline-thin`],tB,{description:D(557,`Controls the cursor style in overtype input mode.`)})),cursorSurroundingLines:q(new Vz(J.cursorSurroundingLines,`cursorSurroundingLines`,0,0,Ca.MAX_SAFE_SMALL_INTEGER,{description:D(558,`Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.`)})),cursorSurroundingLinesStyle:q(new Kz(J.cursorSurroundingLinesStyle,`cursorSurroundingLinesStyle`,`default`,[`default`,`all`],{enumDescriptions:[D(559,"`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),D(560,"`cursorSurroundingLines` is enforced always.")],markdownDescription:D(561,"Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),cursorWidth:q(new Vz(J.cursorWidth,`cursorWidth`,0,0,Ca.MAX_SAFE_SMALL_INTEGER,{markdownDescription:D(562,"Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),cursorHeight:q(new Vz(J.cursorHeight,`cursorHeight`,0,0,Ca.MAX_SAFE_SMALL_INTEGER,{markdownDescription:D(563,"Controls the height of the cursor when `#editor.cursorStyle#` is set to `line`. Cursor's max height depends on line height.")})),disableLayerHinting:q(new zz(J.disableLayerHinting,`disableLayerHinting`,!1)),disableMonospaceOptimizations:q(new zz(J.disableMonospaceOptimizations,`disableMonospaceOptimizations`,!1)),domReadOnly:q(new zz(J.domReadOnly,`domReadOnly`,!1)),dragAndDrop:q(new zz(J.dragAndDrop,`dragAndDrop`,!0,{description:D(564,`Controls whether the editor should allow moving selections via drag and drop.`)})),emptySelectionClipboard:q(new rB),dropIntoEditor:q(new QB),editContext:q(new zz(J.editContext,`editContext`,!0,{description:D(565,`Sets whether the EditContext API should be used instead of the text area to power input in the editor.`),included:Ai||Ni||li})),renderRichScreenReaderContent:q(new zz(J.renderRichScreenReaderContent,`renderRichScreenReaderContent`,!1,{markdownDescription:D(566,"Whether to render rich screen reader content when the `#editor.editContext#` setting is enabled.")})),stickyScroll:q(new bB),experimentalGpuAcceleration:q(new Kz(J.experimentalGpuAcceleration,`experimentalGpuAcceleration`,`off`,[`off`,`on`],{tags:[`experimental`],enumDescriptions:[D(567,`Use regular DOM-based rendering.`),D(568,`Use GPU acceleration.`)],description:D(569,`Controls whether to use the experimental GPU acceleration to render the editor.`)})),experimentalWhitespaceRendering:q(new Kz(J.experimentalWhitespaceRendering,`experimentalWhitespaceRendering`,`svg`,[`svg`,`font`,`off`],{enumDescriptions:[D(570,`Use a new rendering method with svgs.`),D(571,`Use a new rendering method with font characters.`),D(572,`Use the stable rendering method.`)],description:D(573,`Controls whether whitespace is rendered with a new, experimental method.`)})),extraEditorClassName:q(new Wz(J.extraEditorClassName,`extraEditorClassName`,``)),fastScrollSensitivity:q(new Uz(J.fastScrollSensitivity,`fastScrollSensitivity`,5,e=>e<=0?5:e,{markdownDescription:D(574,"Scrolling speed multiplier when pressing `Alt`.")})),find:q(new iB),fixedOverflowWidgets:q(new zz(J.fixedOverflowWidgets,`fixedOverflowWidgets`,!1)),folding:q(new zz(J.folding,`folding`,!0,{description:D(575,`Controls whether the editor has code folding enabled.`)})),foldingStrategy:q(new Kz(J.foldingStrategy,`foldingStrategy`,`auto`,[`auto`,`indentation`],{enumDescriptions:[D(576,`Use a language-specific folding strategy if available, else the indentation-based one.`),D(577,`Use the indentation-based folding strategy.`)],description:D(578,`Controls the strategy for computing folding ranges.`)})),foldingHighlight:q(new zz(J.foldingHighlight,`foldingHighlight`,!0,{description:D(579,`Controls whether the editor should highlight folded ranges.`)})),foldingImportsByDefault:q(new zz(J.foldingImportsByDefault,`foldingImportsByDefault`,!1,{description:D(580,`Controls whether the editor automatically collapses import ranges.`)})),foldingMaximumRegions:q(new Vz(J.foldingMaximumRegions,`foldingMaximumRegions`,5e3,10,65e3,{description:D(581,`The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.`)})),unfoldOnClickAfterEndOfLine:q(new zz(J.unfoldOnClickAfterEndOfLine,`unfoldOnClickAfterEndOfLine`,!1,{description:D(582,`Controls whether clicking on the empty content after a folded line will unfold the line.`)})),fontFamily:q(new Wz(J.fontFamily,`fontFamily`,Cz.fontFamily,{description:D(583,`Controls the font family.`)})),fontInfo:q(new sB),fontLigatures2:q(new aB),fontSize:q(new dB),fontWeight:q(new fB),fontVariations:q(new oB),formatOnPaste:q(new zz(J.formatOnPaste,`formatOnPaste`,!1,{description:D(584,`Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.`)})),formatOnType:q(new zz(J.formatOnType,`formatOnType`,!1,{description:D(585,`Controls whether the editor should automatically format the line after typing.`)})),glyphMargin:q(new zz(J.glyphMargin,`glyphMargin`,!0,{description:D(586,`Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.`)})),gotoLocation:q(new pB),hideCursorInOverviewRuler:q(new zz(J.hideCursorInOverviewRuler,`hideCursorInOverviewRuler`,!1,{description:D(587,`Controls whether the cursor should be hidden in the overview ruler.`)})),hover:q(new mB),inDiffEditor:q(new zz(J.inDiffEditor,`inDiffEditor`,!1)),inertialScroll:q(new zz(J.inertialScroll,`inertialScroll`,!1,{description:D(588,`Make scrolling inertial - mostly useful with touchpad on linux.`)})),letterSpacing:q(new Uz(J.letterSpacing,`letterSpacing`,Cz.letterSpacing,e=>Uz.clamp(e,-5,20),{description:D(589,`Controls the letter spacing in pixels.`)})),lightbulb:q(new yB),lineDecorationsWidth:q(new SB),lineHeight:q(new CB),lineNumbers:q(new MB),lineNumbersMinChars:q(new Vz(J.lineNumbersMinChars,`lineNumbersMinChars`,5,1,300)),linkedEditing:q(new zz(J.linkedEditing,`linkedEditing`,!1,{description:D(590,`Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.`)})),links:q(new zz(J.links,`links`,!0,{description:D(591,`Controls whether the editor should detect links and make them clickable.`)})),matchBrackets:q(new Kz(J.matchBrackets,`matchBrackets`,`always`,[`always`,`near`,`never`],{description:D(592,`Highlight matching brackets.`)})),minimap:q(new wB),mouseStyle:q(new Kz(J.mouseStyle,`mouseStyle`,`text`,[`text`,`default`,`copy`])),mouseWheelScrollSensitivity:q(new Uz(J.mouseWheelScrollSensitivity,`mouseWheelScrollSensitivity`,1,e=>e===0?1:e,{markdownDescription:D(593,"A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:q(new zz(J.mouseWheelZoom,`mouseWheelZoom`,!1,{markdownDescription:si?D(594,"Zoom the font of the editor when using mouse wheel and holding `Cmd`."):D(595,"Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:q(new zz(J.multiCursorMergeOverlapping,`multiCursorMergeOverlapping`,!0,{description:D(596,`Merge multiple cursors when they are overlapping.`)})),multiCursorModifier:q(new qz(J.multiCursorModifier,`multiCursorModifier`,`altKey`,`alt`,[`ctrlCmd`,`alt`],TB,{markdownEnumDescriptions:[D(597,"Maps to `Control` on Windows and Linux and to `Command` on macOS."),D(598,"Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:D(599,`The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).`)})),mouseMiddleClickAction:q(new Kz(J.mouseMiddleClickAction,`mouseMiddleClickAction`,`default`,[`default`,`openLink`,`ctrlLeftClick`],{description:D(600,`Controls what happens when middle mouse button is clicked in the editor.`)})),multiCursorPaste:q(new Kz(J.multiCursorPaste,`multiCursorPaste`,`spread`,[`spread`,`full`],{markdownEnumDescriptions:[D(601,`Each cursor pastes a single line of the text.`),D(602,`Each cursor pastes the full text.`)],markdownDescription:D(603,`Controls pasting when the line count of the pasted text matches the cursor count.`)})),multiCursorLimit:q(new Vz(J.multiCursorLimit,`multiCursorLimit`,1e4,1,1e5,{markdownDescription:D(604,`Controls the max number of cursors that can be in an active editor at once.`)})),occurrencesHighlight:q(new Kz(J.occurrencesHighlight,`occurrencesHighlight`,`singleFile`,[`off`,`singleFile`,`multiFile`],{markdownEnumDescriptions:[D(605,`Does not highlight occurrences.`),D(606,`Highlights occurrences only in the current file.`),D(607,`Experimental: Highlights occurrences across all valid open files.`)],markdownDescription:D(608,`Controls whether occurrences should be highlighted across open files.`)})),occurrencesHighlightDelay:q(new Vz(J.occurrencesHighlightDelay,`occurrencesHighlightDelay`,0,0,2e3,{description:D(609,`Controls the delay in milliseconds after which occurrences are highlighted.`),tags:[`preview`]})),overtypeOnPaste:q(new zz(J.overtypeOnPaste,`overtypeOnPaste`,!0,{description:D(610,`Controls whether pasting should overtype.`)})),overviewRulerBorder:q(new zz(J.overviewRulerBorder,`overviewRulerBorder`,!0,{description:D(611,`Controls whether a border should be drawn around the overview ruler.`)})),overviewRulerLanes:q(new Vz(J.overviewRulerLanes,`overviewRulerLanes`,3,0,3)),padding:q(new EB),pasteAs:q(new $B),parameterHints:q(new DB),peekWidgetDefaultFocus:q(new Kz(J.peekWidgetDefaultFocus,`peekWidgetDefaultFocus`,`tree`,[`tree`,`editor`],{enumDescriptions:[D(612,`Focus the tree when opening peek`),D(613,`Focus the editor when opening peek`)],description:D(614,`Controls whether to focus the inline editor or the tree in the peek widget.`)})),placeholder:q(new kB),definitionLinkOpensInPeek:q(new zz(J.definitionLinkOpensInPeek,`definitionLinkOpensInPeek`,!1,{description:D(615,`Controls whether the Go to Definition mouse gesture always opens the peek widget.`)})),quickSuggestions:q(new AB),quickSuggestionsDelay:q(new Vz(J.quickSuggestionsDelay,`quickSuggestionsDelay`,10,0,Ca.MAX_SAFE_SMALL_INTEGER,{description:D(616,`Controls the delay in milliseconds after which quick suggestions will show up.`),experiment:{mode:`auto`}})),readOnly:q(new zz(J.readOnly,`readOnly`,!1)),readOnlyMessage:q(new IB),renameOnType:q(new zz(J.renameOnType,`renameOnType`,!1,{description:D(617,`Controls whether the editor auto renames on type.`),markdownDeprecationMessage:D(618,"Deprecated, use `#editor.linkedEditing#` instead.")})),renderControlCharacters:q(new zz(J.renderControlCharacters,`renderControlCharacters`,!0,{description:D(619,`Controls whether the editor should render control characters.`),restricted:!0})),renderFinalNewline:q(new Kz(J.renderFinalNewline,`renderFinalNewline`,ci?`dimmed`:`on`,[`off`,`on`,`dimmed`],{description:D(620,`Render last line number when the file ends with a newline.`)})),renderLineHighlight:q(new Kz(J.renderLineHighlight,`renderLineHighlight`,`line`,[`none`,`gutter`,`line`,`all`],{enumDescriptions:[``,``,``,D(621,`Highlights both the gutter and the current line.`)],description:D(622,`Controls how the editor should render the current line highlight.`)})),renderLineHighlightOnlyWhenFocus:q(new zz(J.renderLineHighlightOnlyWhenFocus,`renderLineHighlightOnlyWhenFocus`,!1,{description:D(623,`Controls if the editor should render the current line highlight only when the editor is focused.`)})),renderValidationDecorations:q(new Kz(J.renderValidationDecorations,`renderValidationDecorations`,`editable`,[`editable`,`on`,`off`])),renderWhitespace:q(new Kz(J.renderWhitespace,`renderWhitespace`,`selection`,[`none`,`boundary`,`selection`,`trailing`,`all`],{enumDescriptions:[``,D(624,`Render whitespace characters except for single spaces between words.`),D(625,`Render whitespace characters only on selected text.`),D(626,`Render only trailing whitespace characters.`),``],description:D(627,`Controls how the editor should render whitespace characters.`)})),revealHorizontalRightPadding:q(new Vz(J.revealHorizontalRightPadding,`revealHorizontalRightPadding`,15,0,1e3)),roundedSelection:q(new zz(J.roundedSelection,`roundedSelection`,!0,{description:D(628,`Controls whether selections should have rounded corners.`)})),rulers:q(new FB),scrollbar:q(new RB),scrollBeyondLastColumn:q(new Vz(J.scrollBeyondLastColumn,`scrollBeyondLastColumn`,4,0,Ca.MAX_SAFE_SMALL_INTEGER,{description:D(629,`Controls the number of extra characters beyond which the editor will scroll horizontally.`)})),scrollBeyondLastLine:q(new zz(J.scrollBeyondLastLine,`scrollBeyondLastLine`,!0,{description:D(630,`Controls whether the editor will scroll beyond the last line.`)})),scrollOnMiddleClick:q(new zz(J.scrollOnMiddleClick,`scrollOnMiddleClick`,!1,{description:D(631,`Controls whether the editor will scroll when the middle button is pressed.`)})),scrollPredominantAxis:q(new zz(J.scrollPredominantAxis,`scrollPredominantAxis`,!0,{description:D(632,`Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.`)})),selectionClipboard:q(new zz(J.selectionClipboard,`selectionClipboard`,!0,{description:D(633,`Controls whether the Linux primary clipboard should be supported.`),included:ci})),selectionHighlight:q(new zz(J.selectionHighlight,`selectionHighlight`,!0,{description:D(634,`Controls whether the editor should highlight matches similar to the selection.`)})),selectionHighlightMaxLength:q(new Vz(J.selectionHighlightMaxLength,`selectionHighlightMaxLength`,200,0,Ca.MAX_SAFE_SMALL_INTEGER,{description:D(635,`Controls how many characters can be in the selection before similiar matches are not highlighted. Set to zero for unlimited.`)})),selectionHighlightMultiline:q(new zz(J.selectionHighlightMultiline,`selectionHighlightMultiline`,!1,{description:D(636,`Controls whether the editor should highlight selection matches that span multiple lines.`)})),selectOnLineNumbers:q(new zz(J.selectOnLineNumbers,`selectOnLineNumbers`,!0)),showFoldingControls:q(new Kz(J.showFoldingControls,`showFoldingControls`,`mouseover`,[`always`,`never`,`mouseover`],{enumDescriptions:[D(637,`Always show the folding controls.`),D(638,`Never show the folding controls and reduce the gutter size.`),D(639,`Only show the folding controls when the mouse is over the gutter.`)],description:D(640,`Controls when the folding controls on the gutter are shown.`)})),showUnused:q(new zz(J.showUnused,`showUnused`,!0,{description:D(641,`Controls fading out of unused code.`)})),showDeprecated:q(new zz(J.showDeprecated,`showDeprecated`,!0,{description:D(642,`Controls strikethrough deprecated variables.`)})),inlayHints:q(new xB),snippetSuggestions:q(new Kz(J.snippetSuggestions,`snippetSuggestions`,`inline`,[`top`,`bottom`,`inline`,`none`],{enumDescriptions:[D(643,`Show snippet suggestions on top of other suggestions.`),D(644,`Show snippet suggestions below other suggestions.`),D(645,`Show snippets suggestions with other suggestions.`),D(646,`Do not show snippet suggestions.`)],description:D(647,`Controls whether snippets are shown with other suggestions and how they are sorted.`)})),smartSelect:q(new qB),smoothScrolling:q(new zz(J.smoothScrolling,`smoothScrolling`,!1,{description:D(648,`Controls whether the editor will scroll using an animation.`)})),stopRenderingLineAfter:q(new Vz(J.stopRenderingLineAfter,`stopRenderingLineAfter`,1e4,-1,Ca.MAX_SAFE_SMALL_INTEGER)),suggest:q(new KB),inlineSuggest:q(new HB),inlineCompletionsAccessibilityVerbose:q(new zz(J.inlineCompletionsAccessibilityVerbose,`inlineCompletionsAccessibilityVerbose`,!1,{description:D(649,`Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.`)})),suggestFontSize:q(new Vz(J.suggestFontSize,`suggestFontSize`,0,0,1e3,{markdownDescription:D(650,`Font size for the suggest widget. When set to {0}, the value of {1} is used.`,"`0`","`#editor.fontSize#`")})),suggestLineHeight:q(new Vz(J.suggestLineHeight,`suggestLineHeight`,0,0,1e3,{markdownDescription:D(651,`Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.`,"`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:q(new zz(J.suggestOnTriggerCharacters,`suggestOnTriggerCharacters`,!0,{description:D(652,`Controls whether suggestions should automatically show up when typing trigger characters.`)})),suggestSelection:q(new Kz(J.suggestSelection,`suggestSelection`,`first`,[`first`,`recentlyUsed`,`recentlyUsedByPrefix`],{markdownEnumDescriptions:[D(653,`Always select the first suggestion.`),D(654,"Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),D(655,"Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:D(656,`Controls how suggestions are pre-selected when showing the suggest list.`)})),tabCompletion:q(new Kz(J.tabCompletion,`tabCompletion`,`off`,[`on`,`off`,`onlySnippets`],{enumDescriptions:[D(657,`Tab complete will insert the best matching suggestion when pressing tab.`),D(658,`Disable tab completions.`),D(659,`Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.`)],description:D(660,`Enables tab completions.`)})),tabIndex:q(new Vz(J.tabIndex,`tabIndex`,0,-1,Ca.MAX_SAFE_SMALL_INTEGER)),trimWhitespaceOnDelete:q(new zz(J.trimWhitespaceOnDelete,`trimWhitespaceOnDelete`,!1,{description:D(661,`Controls whether the editor will also delete the next line's indentation whitespace when deleting a newline.`)})),unicodeHighlight:q(new VB),unusualLineTerminators:q(new Kz(J.unusualLineTerminators,`unusualLineTerminators`,`prompt`,[`auto`,`off`,`prompt`],{enumDescriptions:[D(662,`Unusual line terminators are automatically removed.`),D(663,`Unusual line terminators are ignored.`),D(664,`Unusual line terminators prompt to be removed.`)],description:D(665,`Remove unusual line terminators that might cause problems.`)})),useShadowDOM:q(new zz(J.useShadowDOM,`useShadowDOM`,!0)),useTabStops:q(new zz(J.useTabStops,`useTabStops`,!0,{description:D(666,`Spaces and tabs are inserted and deleted in alignment with tab stops.`)})),wordBreak:q(new Kz(J.wordBreak,`wordBreak`,`normal`,[`normal`,`keepAll`],{markdownEnumDescriptions:[D(667,`Use the default line break rule.`),D(668,`Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.`)],description:D(669,`Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.`)})),wordSegmenterLocales:q(new JB),wordSeparators:q(new Wz(J.wordSeparators,`wordSeparators`,Tz,{description:D(670,`Characters that will be used as word separators when doing word related navigations or operations.`)})),wordWrap:q(new Kz(J.wordWrap,`wordWrap`,`off`,[`off`,`on`,`wordWrapColumn`,`bounded`],{markdownEnumDescriptions:[D(671,`Lines will never wrap.`),D(672,`Lines will wrap at the viewport width.`),D(673,"Lines will wrap at `#editor.wordWrapColumn#`."),D(674,"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:D(675,`Controls how lines should wrap.`)})),wordWrapBreakAfterCharacters:q(new Wz(J.wordWrapBreakAfterCharacters,`wordWrapBreakAfterCharacters`,` 	})]?|/&.,;`)),wordWrapBreakBeforeCharacters:q(new Wz(J.wordWrapBreakBeforeCharacters,`wordWrapBreakBeforeCharacters`,`([{+`)),wordWrapColumn:q(new Vz(J.wordWrapColumn,`wordWrapColumn`,80,1,Ca.MAX_SAFE_SMALL_INTEGER,{markdownDescription:D(676,"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:q(new Kz(J.wordWrapOverride1,`wordWrapOverride1`,`inherit`,[`off`,`on`,`inherit`])),wordWrapOverride2:q(new Kz(J.wordWrapOverride2,`wordWrapOverride2`,`inherit`,[`off`,`on`,`inherit`])),wrapOnEscapedLineFeeds:q(new zz(J.wrapOnEscapedLineFeeds,`wrapOnEscapedLineFeeds`,!1,{markdownDescription:D(677,'Controls whether literal `\\n` shall trigger a wordWrap when `#editor.wordWrap#` is enabled.\n\nFor example:\n```c\nchar* str="hello\\nworld"\n```\nwill be displayed as\n```c\nchar* str="hello\\n\n           world"\n```')})),effectiveCursorStyle:q(new cB),editorClassName:q(new nB),defaultColorDecorators:q(new Kz(J.defaultColorDecorators,`defaultColorDecorators`,`auto`,[`auto`,`always`,`never`],{enumDescriptions:[D(678,`Show default color decorators only when no extension provides colors decorators.`),D(679,`Always show default color decorators.`),D(680,`Never show default color decorators.`)],description:D(681,`Controls whether inline color decorations should be shown using the default document color provider.`)})),pixelRatio:q(new OB),tabFocusMode:q(new zz(J.tabFocusMode,`tabFocusMode`,!1,{markdownDescription:D(682,`Controls whether the editor receives tabs or defers them to the workbench for navigation.`)})),layoutInfo:q(new gB),wrappingInfo:q(new ZB),wrappingIndent:q(new XB),wrappingStrategy:q(new _B),effectiveEditContextEnabled:q(new lB),effectiveAllowVariableFonts:q(new uB)},nV=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}},rV=class{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){let e=[];for(let t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){let n=this.lookupOrInsertNode(e),r=this.lookupOrInsertNode(t);n.outgoing.set(r.key,r),r.incoming.set(n.key,n)}removeNode(e){let t=this._hashFn(e);this._nodes.delete(t);for(let e of this._nodes.values())e.outgoing.delete(t),e.incoming.delete(t)}lookupOrInsertNode(e){let t=this._hashFn(e),n=this._nodes.get(t);return n||(n=new nV(t,e),this._nodes.set(t,n)),n}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[t,n]of this._nodes)e.push(`${t}\n\t(-> incoming)[${[...n.incoming.keys()].join(`, `)}]\n\t(outgoing ->)[${[...n.outgoing.keys()].join(`,`)}]\n`);return e.join(`
`)}findCycleSlow(){for(let[e,t]of this._nodes){let n=new Set([e]),r=this._findCycle(t,n);if(r)return r}}_findCycle(e,t){for(let[n,r]of e.outgoing){if(t.has(n))return[...t,n].join(` -> `);t.add(n);let e=this._findCycle(r,t);if(e)return e;t.delete(n)}}},iV=class{constructor(...e){this._entries=new Map;for(let[t,n]of e)this.set(t,n)}set(e,t){let n=this._entries.get(e);return this._entries.set(e,t),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}},aV=!1,oV=class extends Error{constructor(e){super(`cyclic dependency between services`),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: \n${e.toString()}`}},sV=class e{constructor(e=new iV,t=!1,n,r=aV){this._services=e,this._strict=t,this._parent=n,this._enableTracing=r,this._isDisposed=!1,this._servicesToMaybeDispose=new Set,this._children=new Set,this._activeInstantiations=new Set,this._services.set(Cy,this),this._globalGraph=r?n?._globalGraph??new rV(e=>e):void 0}dispose(){if(!this._isDisposed){this._isDisposed=!0,Nn(this._children),this._children.clear();for(let e of this._servicesToMaybeDispose)Mn(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw Error(`InstantiationService has been disposed`)}createChild(t,n){this._throwIfDisposed();let r=this,i=new class extends e{dispose(){r._children.delete(i),super.dispose()}}(t,this._strict,this,this._enableTracing);return this._children.add(i),n?.add(i),i}invokeFunction(e,...t){this._throwIfDisposed();let n=lV.traceInvocation(this._enableTracing,e),r=!1;try{return e({get:e=>{if(r)throw ie(`service accessor is only valid during the invocation of its target method`);let t=this._getOrCreateServiceInstance(e,n);return t||this._throwIfStrict(`[invokeFunction] unknown service '${e}'`,!1),t}},...t)}finally{r=!0,n.stop()}}createInstance(e,...t){this._throwIfDisposed();let n,r;return e instanceof jv?(n=lV.traceCreation(this._enableTracing,e.ctor),r=this._createInstance(e.ctor,e.staticArguments.concat(t),n)):(n=lV.traceCreation(this._enableTracing,e),r=this._createInstance(e,t,n)),n.stop(),r}_createInstance(e,t=[],n){let r=Sy.getServiceDependencies(e).sort((e,t)=>e.index-t.index),i=[];for(let t of r){let r=this._getOrCreateServiceInstance(t.id,n);r||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${t.id}.`,!1),i.push(r)}let a=r.length>0?r[0].index:t.length;if(t.length!==a){console.trace(`[createInstance] First service dependency of ${e.name} at position ${a+1} conflicts with ${t.length} static arguments`);let n=a-t.length;t=n>0?t.concat(Array(n)):t.slice(0,a)}return Reflect.construct(e,t.concat(i))}_setCreatedServiceInstance(e,t){if(this._services.get(e)instanceof jv)this._services.set(e,t);else if(this._parent)this._parent._setCreatedServiceInstance(e,t);else throw Error(`illegalState - setting UNKNOWN service instance`)}_getServiceInstanceOrDescriptor(e){let t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));let n=this._getServiceInstanceOrDescriptor(e);return n instanceof jv?this._safeCreateAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,t,n){if(this._activeInstantiations.has(e))throw Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,n){let r=new rV(e=>e.id.toString()),i=0,a=[{id:e,desc:t,_trace:n}],o=new Set;for(;a.length;){let t=a.pop();if(!o.has(String(t.id))){if(o.add(String(t.id)),r.lookupOrInsertNode(t),i++>1e3)throw new oV(r);for(let n of Sy.getServiceDependencies(t.desc.ctor)){let i=this._getServiceInstanceOrDescriptor(n.id);if(i||this._throwIfStrict(`[createInstance] ${e} depends on ${n.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(t.id),String(n.id)),i instanceof jv){let e={id:n.id,desc:i,_trace:t._trace.branch(n.id,!0)};r.lookup(e)||a.push(e),r.insertEdge(t,e)}}}}for(;;){let e=r.roots();if(e.length===0){if(!r.isEmpty())throw new oV(r);break}for(let{data:t}of e){if(this._getServiceInstanceOrDescriptor(t.id)instanceof jv){let e=this._createServiceInstanceWithOwner(t.id,t.desc.ctor,t.desc.staticArguments,t.desc.supportsDelayedInstantiation,t._trace);this._setCreatedServiceInstance(t.id,e)}r.removeNode(t)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,n=[],r,i){if(this._services.get(e)instanceof jv)return this._createServiceInstance(e,t,n,r,i,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,r,i);throw Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(t,n,r=[],i,a,o){if(i){let i=new e(void 0,this._strict,this,this._enableTracing);i._globalGraphImplicitDependency=String(t);let s=new Map,c=new Tc(()=>{let e=i._createInstance(n,r,a);for(let[t,n]of s){let r=e[t];if(typeof r==`function`)for(let t of n)t.disposable=r.apply(e,t.listener)}return s.clear(),o.add(e),e});return new Proxy(Object.create(null),{get(e,t){if(!c.isInitialized&&typeof t==`string`&&(t.startsWith(`onDid`)||t.startsWith(`onWill`))){let e=s.get(t);return e||(e=new Kn,s.set(t,e)),(n,r,i)=>{if(c.isInitialized)return c.value[t](n,r,i);{let t={listener:[n,r,i],disposable:void 0},a=e.push(t);return S(()=>{a(),t.disposable?.dispose()})}}}if(t in e)return e[t];let n=c.value,r=n[t];return typeof r==`function`?(r=r.bind(n),e[t]=r,r):r},set(e,t,n){return c.value[t]=n,!0},getPrototypeOf(e){return n.prototype}})}else{let e=this._createInstance(n,r,a);return o.add(e),e}}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw Error(e)}},cV;(function(e){e[e.None=0]=`None`,e[e.Creation=1]=`Creation`,e[e.Invocation=2]=`Invocation`,e[e.Branch=3]=`Branch`})(cV||={});var lV=class e{static#e=this.all=new Set;static#t=this._None=new class extends e{constructor(){super(cV.None,null)}stop(){}branch(){return this}};static traceInvocation(t,n){return t?new e(cV.Invocation,n.name||Error().stack.split(`
`).slice(3,4).join(`
`)):e._None}static traceCreation(t,n){return t?new e(cV.Creation,n.name):e._None}static#n=this._totals=0;constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}branch(t,n){let r=new e(cV.Branch,t.toString());return this._dep.push([t,n,r]),r}stop(){let t=Date.now()-this._start;e._totals+=t;let n=!1;function r(e,t){let i=[],a=Array(e+1).join(`	`);for(let[o,s,c]of t._dep)if(s&&c){n=!0,i.push(`${a}CREATES -> ${o}`);let t=r(e+1,c);t&&i.push(t)}else i.push(`${a}uses -> ${o}`);return i.join(`
`)}let i=[`${this.type===cV.Creation?`CREATE`:`CALL`} ${this.name}`,`${r(1,this)}`,`DONE, took ${t.toFixed(2)}ms (grand total ${e._totals.toFixed(2)}ms)`];(t>2||n)&&e.all.add(i.join(`
`))}},uV=V(`paneCompositePartService`),dV=V(`extensionService`),fV=V(`contextService`),pV=class{constructor(e,t,n=t){this.modifierLabels=[null],this.modifierLabels[Ti.Macintosh]=e,this.modifierLabels[Ti.Windows]=t,this.modifierLabels[Ti.Linux]=n}toLabel(e,t,n){if(t.length===0)return null;let r=[];for(let i=0,a=t.length;i<a;i++){let a=t[i],o=n(a);if(o===null)return null;r[i]=vV(a,o,this.modifierLabels[e])}return r.join(` `)}},mV=new pV({ctrlKey:``,shiftKey:``,altKey:``,metaKey:``,separator:``},{ctrlKey:D(123,`Ctrl`),shiftKey:D(124,`Shift`),altKey:D(125,`Alt`),metaKey:D(126,`Windows`),separator:`+`},{ctrlKey:D(123,`Ctrl`),shiftKey:D(124,`Shift`),altKey:D(125,`Alt`),metaKey:D(127,`Super`),separator:`+`}),hV=new pV({ctrlKey:D(128,`Control`),shiftKey:D(129,`Shift`),altKey:D(130,`Option`),metaKey:D(131,`Command`),separator:`+`},{ctrlKey:D(128,`Control`),shiftKey:D(129,`Shift`),altKey:D(132,`Alt`),metaKey:D(133,`Windows`),separator:`+`},{ctrlKey:D(128,`Control`),shiftKey:D(129,`Shift`),altKey:D(132,`Alt`),metaKey:D(134,`Super`),separator:`+`}),gV=new pV({ctrlKey:`Ctrl`,shiftKey:`Shift`,altKey:`Alt`,metaKey:`Cmd`,separator:`+`},{ctrlKey:`Ctrl`,shiftKey:`Shift`,altKey:`Alt`,metaKey:`Super`,separator:`+`}),_V=new pV({ctrlKey:`ctrl`,shiftKey:`shift`,altKey:`alt`,metaKey:`cmd`,separator:`+`},{ctrlKey:`ctrl`,shiftKey:`shift`,altKey:`alt`,metaKey:`win`,separator:`+`},{ctrlKey:`ctrl`,shiftKey:`shift`,altKey:`alt`,metaKey:`meta`,separator:`+`});function vV(e,t,n){if(t===null)return``;let r=[];return e.ctrlKey&&r.push(n.ctrlKey),e.shiftKey&&r.push(n.shiftKey),e.altKey&&r.push(n.altKey),e.metaKey&&r.push(n.metaKey),t!==``&&r.push(t),r.join(n.separator)}function yV(e){return!!e&&typeof e==`object`&&typeof e.original==`string`&&typeof e.value==`string`}function bV(e){return e?e.condition!==void 0:!1}var xV=V(`menuService`);s({});function SV(e,t){let n={primary:[],secondary:[]};return wV(e,n,t),n}function CV(e,t){let n=[];return wV(e,n,t),n}function wV(e,t,n){let r=iv.getInstance();OV(e,t,r.keyStatus.altKey||(oi||ci)&&r.keyStatus.shiftKey,n?e=>e===n:e=>e===`navigation`)}function TV(e,t,n,r){let i={primary:[],secondary:[]};return DV(e,i,t,n,r),i}function EV(e,t,n,r){let i=[];return DV(e,i,t,n,r),i}function DV(e,t,n,r,i){OV(e,t,!1,typeof n==`string`?e=>e===n:n,r,i)}function OV(e,t,n,r=e=>e===`navigation`,i=()=>!1,a=!1){let o,s;Array.isArray(t)?(o=t,s=t):(o=t.primary,s=t.secondary);let c=new Set;for(let[t,i]of e){let e;r(t)?(e=o,e.length>0&&a&&e.push(new $x)):(e=s,e.length>0&&e.push(new $x));for(let r of i){n&&(r=r instanceof gC&&r.alt?r.alt:r);let i=e.push(r);r instanceof eS&&c.add({group:t,action:r,index:i-1})}}for(let{group:e,action:t,index:n}of c){let a=r(e)?o:s,c=t.actions;i(t,e,a.length)&&a.splice(n,1,...c)}}var kV=class extends Mj{constructor(e,t,n,r,i,a,o,s){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t?.draggable,keybinding:t?.keybinding,hoverDelegate:t?.hoverDelegate,keybindingNotRenderedWithLabel:t?.keybindingNotRenderedWithLabel}),this._options=t,this._keybindingService=n,this._notificationService=r,this._contextKeyService=i,this._themeService=a,this._contextMenuService=o,this._accessibilityService=s,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new Ln),this._altKey=iv.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}async onClick(e){e.preventDefault(),e.stopPropagation();try{await this.actionRunner.run(this._commandAction,this._context)}catch(e){this._notificationService.error(e)}}render(e){if(super.render(e),e.classList.add(`menu-entry`),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let t=!1,n=()=>{let e=!!this._menuItemAction.alt?.enabled&&(!this._accessibilityService.isMotionReduced()||t)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&t);e!==this._wantsAltCommand&&(this._wantsAltCommand=e,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._register(this._altKey.event(n)),this._register(L(e,`mouseleave`,e=>{t=!1,n()})),this._register(L(e,`mouseenter`,e=>{t=!0,n()})),n()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){let e=this._commandAction.tooltip||this._commandAction.label,t=this._keybindingService.appendKeybinding(e,this._commandAction.id,this._contextKeyService);if(!this._wantsAltCommand&&this._menuItemAction.alt?.enabled){let e=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,n=this._keybindingService.appendKeybinding(e,this._menuItemAction.alt.id,this._contextKeyService);t=D(1759,`{0}
[{1}] {2}`,t,mV.modifierLabels[Ei].altKey,n)}return t}updateClass(){this.options.icon&&(this._commandAction===this._menuItemAction?this._updateItemClass(this._menuItemAction.item):this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item))}_updateItemClass(e){this._itemClassDispose.value=void 0;let{element:t,label:n}=this;if(!t||!n)return;let r=this._commandAction.checked&&bV(e.toggled)&&e.toggled.icon?e.toggled.icon:e.icon;if(r)if(lC.isThemeIcon(r)){let e=lC.asClassNameArray(r);n.classList.add(...e),this._itemClassDispose.value=S(()=>{n.classList.remove(...e)})}else n.style.backgroundImage=yr(this._themeService.getColorTheme().type)?MC(r.dark):MC(r.light),n.classList.add(`icon`),this._itemClassDispose.value=Fn(S(()=>{n.style.backgroundImage=``,n.classList.remove(`icon`)}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}};kV=t([n(2,nF),n(3,Px),n(4,uS),n(5,Fx),n(6,tF),n(7,VL)],kV);var AV=class e extends kV{render(e){this.options.label=!0,this.options.icon=!1,super.render(e),e.classList.add(`text-only`),e.classList.toggle(`use-comma`,this._options?.useComma??!1)}updateLabel(){let t=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!t)return super.updateLabel();if(this.label){let n=e._symbolPrintEnter(t);this._options?.conversational?this.label.textContent=D(1760,`{1} to {0}`,this._action.label,n):this.label.textContent=D(1761,`{0} ({1})`,this._action.label,n)}}static _symbolPrintEnter(e){return e.getLabel()?.replace(/\benter\b/gi,``).replace(/\bEscape\b/gi,`Esc`)}},jV=class extends gz{constructor(e,t,n,r,i){let a={...t,menuAsChild:t?.menuAsChild??!1,classNames:t?.classNames??(lC.isThemeIcon(e.item.icon)?lC.asClassName(e.item.icon):void 0),keybindingProvider:t?.keybindingProvider??(e=>n.lookupKeybinding(e.id))};super(e,{getActions:()=>e.actions},r,a),this._keybindingService=n,this._contextMenuService=r,this._themeService=i}render(e){super.render(e),De(this.element),e.classList.add(`menu-entry`);let{icon:t}=this._action.item;if(t&&!lC.isThemeIcon(t)){this.element.classList.add(`icon`);let e=()=>{this.element&&(this.element.style.backgroundImage=yr(this._themeService.getColorTheme().type)?MC(t.dark):MC(t.light))};e(),this._register(this._themeService.onDidColorThemeChange(()=>{e()}))}}};jV=t([n(2,nF),n(3,tF),n(4,Fx)],jV);var MV=class extends jj{get onDidChangeDropdownVisibility(){return this._dropdown.onDidChangeVisibility}constructor(e,t,n,r,i,a,o,s){super(null,e),this._keybindingService=n,this._notificationService=r,this._contextMenuService=i,this._menuService=a,this._instaService=o,this._storageService=s,this._defaultActionDisposables=this._register(new C),this._container=null,this._primaryActionListener=this._register(new Ln),this._options=t,this._storageKey=`${e.item.submenu.id}_lastActionId`;let c,l=t?.togglePrimaryAction?s.get(this._storageKey,yx.WORKSPACE):void 0;l&&(c=e.actions.find(e=>l===e.id)),c||=e.actions[0],this._defaultAction=this._defaultActionDisposables.add(this._instaService.createInstance(kV,c,{keybinding:this._getDefaultActionKeybindingLabel(c)}));let u={keybindingProvider:e=>this._keybindingService.lookupKeybinding(e.id),...t,menuAsChild:t?.menuAsChild??!0,classNames:t?.classNames??[`codicon`,`codicon-chevron-down`],actionRunner:t?.actionRunner??this._register(new Qx)};this._dropdown=this._register(new gz(e,e.actions,this._contextMenuService,u)),t?.togglePrimaryAction&&this.registerTogglePrimaryActionListener()}registerTogglePrimaryActionListener(){this._primaryActionListener.value=this._dropdown.actionRunner.onDidRun(e=>{e.action instanceof gC&&this.update(e.action)})}update(e){this._options?.togglePrimaryAction&&this._storageService.store(this._storageKey,e.id,yx.WORKSPACE,bx.MACHINE),this._defaultActionDisposables.clear(),this._defaultAction=this._defaultActionDisposables.add(this._instaService.createInstance(kV,e,{keybinding:this._getDefaultActionKeybindingLabel(e)})),this._defaultAction.actionRunner=this._defaultActionDisposables.add(new class extends Qx{async runAction(e,t){await e.run(void 0)}}),this._container&&this._defaultAction.render(R_(this._container,B(`.action-container`)))}_getDefaultActionKeybindingLabel(e){let t;if(this._options?.renderKeybindingWithDefaultActionLabel){let n=this._keybindingService.lookupKeybinding(e.id);n&&(t=`(${n.getLabel()})`)}return t}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}set actionRunner(e){super.actionRunner=e,this._defaultAction.actionRunner=e,this._dropdown.actionRunner=e,this._primaryActionListener.value&&this.registerTogglePrimaryActionListener()}get actionRunner(){return super.actionRunner}render(e){this._container=e,super.render(this._container),this._container.classList.add(`monaco-dropdown-with-default`);let t=B(`.action-container`);this._defaultAction.render(z(this._container,t)),this._register(L(t,R.KEY_DOWN,e=>{let t=new vp(e);t.equals(F.RightArrow)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),t.stopPropagation())}));let n=B(`.dropdown-action-container`);this._dropdown.render(z(this._container,n)),this._register(L(n,R.KEY_DOWN,e=>{let t=new vp(e);t.equals(F.LeftArrow)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),this._defaultAction.element?.focus(),t.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}};MV=t([n(2,nF),n(3,Px),n(4,tF),n(5,xV),n(6,Cy),n(7,Ex)],MV);var NV=class extends Nj{constructor(e,t,n){super(null,e,e.actions.map(e=>e.id===$x.ID?Oj:{text:e.label,isDisabled:!e.enabled}),0,t,wF,{ariaLabel:e.tooltip||e.label,optionsAsChildren:!0,useCustomDrawn:!Hv(n)}),this.select(Math.max(0,e.actions.findIndex(e=>e.checked)))}render(e){super.render(e),e.style.borderColor=N(kd)}runAction(e,t){let n=this.action.actions[t];n&&this.actionRunner.run(n)}};NV=t([n(1,eF),n(2,Dx)],NV);function PV(e,t,n){if(t instanceof gC)return e.createInstance(kV,t,n);if(t instanceof hC)return t.item.isSelection?e.createInstance(NV,t):t.item.isSplitButton?e.createInstance(MV,t,{...n,togglePrimaryAction:typeof t.item.isSplitButton==`boolean`?!1:t.item.isSplitButton.togglePrimaryAction}):e.createInstance(jV,t,n)}var FV=V(`dialogService`),IV=V(`fileDialogService`),LV;(function(e){function t(e){return typeof e?.showDirectoryPicker==`function`}e.supported=t;function n(e){let t=e;return t?typeof t.kind==`string`&&typeof t.queryPermission==`function`&&typeof t.requestPermission==`function`:!1}e.isFileSystemHandle=n;function r(e){return e.kind===`file`}e.isFileSystemFileHandle=r;function i(e){return e.kind===`directory`}e.isFileSystemDirectoryHandle=i})(LV||={});var RV;(function(e){function t(e){return typeof e?.FileSystemObserver==`function`}e.supported=t})(RV||={});function zV(e){return xe(e)}var BV;(function(e){e[e.Off=0]=`Off`,e[e.Trace=1]=`Trace`,e[e.Debug=2]=`Debug`,e[e.Info=3]=`Info`,e[e.Warning=4]=`Warning`,e[e.Error=5]=`Error`})(BV||={});var VV=BV.Info;function HV(e,t){return e!==BV.Off&&e<=t}function UV(e,t,n){switch(t){case BV.Trace:e.trace(n);break;case BV.Debug:e.debug(n);break;case BV.Info:e.info(n);break;case BV.Warning:e.warn(n);break;case BV.Error:e.error(n);break;case BV.Off:break;default:throw Error(`Invalid log level ${t}`)}}function WV(e,t=!1){let n=``;for(let r=0;r<e.length;r++){let i=e[r];if(i instanceof Error&&(i=Jx(i,t)),typeof i==`object`)try{i=JSON.stringify(i)}catch{}n+=(r>0?` `:``)+i}return n}var GV=class extends w{constructor(){super(...arguments),this.level=VV,this._onDidChangeLogLevel=this._register(new E)}get onDidChangeLogLevel(){return this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(e){return HV(this.level,e)}canLog(e){return this._store.isDisposed?!1:this.checkLogLevel(e)}},KV=class extends GV{constructor(e){super(),this.logAlways=e}checkLogLevel(e){return this.logAlways||super.checkLogLevel(e)}trace(e,...t){this.canLog(BV.Trace)&&this.log(BV.Trace,WV([e,...t],!0))}debug(e,...t){this.canLog(BV.Debug)&&this.log(BV.Debug,WV([e,...t]))}info(e,...t){this.canLog(BV.Info)&&this.log(BV.Info,WV([e,...t]))}warn(e,...t){this.canLog(BV.Warning)&&this.log(BV.Warning,WV([e,...t]))}error(e,...t){if(this.canLog(BV.Error))if(e instanceof Error){let t=Array.prototype.slice.call(arguments);t[0]=e.stack,this.log(BV.Error,WV(t))}else this.log(BV.Error,WV([e,...t]))}flush(){}},qV=class extends GV{constructor(e=VV,t=!0){super(),this.useColors=t,this.setLevel(e)}trace(e,...t){this.canLog(BV.Trace)&&(this.useColors?console.log(`%cTRACE`,`color: #888`,e,...t):console.log(e,...t))}debug(e,...t){this.canLog(BV.Debug)&&(this.useColors?console.log(`%cDEBUG`,`background: #eee; color: #888`,e,...t):console.log(e,...t))}info(e,...t){this.canLog(BV.Info)&&(this.useColors?console.log(`%c INFO`,`color: #33f`,e,...t):console.log(e,...t))}warn(e,...t){this.canLog(BV.Warning)&&(this.useColors?console.warn(`%c WARN`,`color: #993`,e,...t):console.log(e,...t))}error(e,...t){this.canLog(BV.Error)&&(this.useColors?console.error(`%c  ERR`,`color: #f33`,e,...t):console.error(e,...t))}flush(){}},JV=class extends GV{constructor(e){super(),this.loggers=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(let t of this.loggers)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(let n of this.loggers)n.trace(e,...t)}debug(e,...t){for(let n of this.loggers)n.debug(e,...t)}info(e,...t){for(let n of this.loggers)n.info(e,...t)}warn(e,...t){for(let n of this.loggers)n.warn(e,...t)}error(e,...t){for(let n of this.loggers)n.error(e,...t)}flush(){for(let e of this.loggers)e.flush()}dispose(){for(let e of this.loggers)e.dispose();super.dispose()}},YV=class extends w{constructor(e,t,n){if(super(),this.logLevel=e,this.logsHome=t,this._loggers=new dn,this._onDidChangeLoggers=this._register(new E),this.onDidChangeLoggers=this._onDidChangeLoggers.event,this._onDidChangeLogLevel=this._register(new E),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event,this._onDidChangeVisibility=this._register(new E),this.onDidChangeVisibility=this._onDidChangeVisibility.event,n)for(let e of n)this._loggers.set(e.resource,{logger:void 0,info:e})}getLoggerEntry(e){return ge(e)?[...this._loggers.values()].find(t=>t.info.id===e):this._loggers.get(e)}getLogger(e){return this.getLoggerEntry(e)?.logger}createLogger(e,t){let n=this.toResource(e),r=ge(e)?e:t?.id??hm(n.toString()).toString(16),i=this._loggers.get(n)?.logger,a=t?.logLevel===`always`?BV.Trace:t?.logLevel;i||=this.doCreateLogger(n,a??this.getLogLevel(n)??this.logLevel,{...t,id:r});let o={logger:i,info:{resource:n,id:r,logLevel:a,name:t?.name,hidden:t?.hidden,group:t?.group,extensionId:t?.extensionId,when:t?.when}};return this.registerLogger(o.info),this._loggers.set(n,o),i}toResource(e){return ge(e)?Fs(this.logsHome,`${e.replace(/[\\/:\*\?"<>\|]/g,``)}.log`):e}setLogLevel(e,t){if(k.isUri(e)){let n=e,r=t,i=this._loggers.get(n);i&&r!==i.info.logLevel&&(i.info.logLevel=r===this.logLevel?void 0:r,i.logger?.setLevel(r),this._loggers.set(i.info.resource,i),this._onDidChangeLogLevel.fire([n,r]))}else{this.logLevel=e;for(let[e,t]of this._loggers.entries())this._loggers.get(e)?.info.logLevel===void 0&&t.logger?.setLevel(this.logLevel);this._onDidChangeLogLevel.fire(this.logLevel)}}setVisibility(e,t){let n=this.getLoggerEntry(e);n&&t!==!n.info.hidden&&(n.info.hidden=!t,this._loggers.set(n.info.resource,n),this._onDidChangeVisibility.fire([n.info.resource,t]))}getLogLevel(e){let t;return e&&(t=this._loggers.get(e)?.info.logLevel),t??this.logLevel}registerLogger(e){let t=this._loggers.get(e.resource);t?t.info.hidden!==e.hidden&&this.setVisibility(e.resource,!e.hidden):(this._loggers.set(e.resource,{info:e,logger:void 0}),this._onDidChangeLoggers.fire({added:[e],removed:[]}))}deregisterLogger(e){let t=this.toResource(e),n=this._loggers.get(t);n&&(n.logger&&n.logger.dispose(),this._loggers.delete(t),this._onDidChangeLoggers.fire({added:[],removed:[n.info]}))}*getRegisteredLoggers(){for(let e of this._loggers.values())yield e.info}getRegisteredLogger(e){return this._loggers.get(e)?.info}dispose(){this._loggers.forEach(e=>e.logger?.dispose()),this._loggers.clear(),super.dispose()}},XV=class{constructor(){this.onDidChangeLogLevel=new E().event}setLevel(e){}getLevel(){return BV.Info}trace(e,...t){}debug(e,...t){}info(e,...t){}warn(e,...t){}error(e,...t){}critical(e,...t){}dispose(){}flush(){}},ZV=class extends XV{},QV=class extends YV{constructor(){super(BV.Off,k.parse(`log:///log`))}doCreateLogger(e,t,n){return new XV}};function $V(e){if(e.verbose)return BV.Trace;if(typeof e.logLevel==`string`){let t=nH(e.logLevel.toLowerCase());if(t!==void 0)return t}return VV}function eH(e){switch(e){case BV.Trace:return`trace`;case BV.Debug:return`debug`;case BV.Info:return`info`;case BV.Warning:return`warn`;case BV.Error:return`error`;case BV.Off:return`off`}}function tH(e){switch(e){case BV.Trace:return{original:`Trace`,value:D(1988,`Trace`)};case BV.Debug:return{original:`Debug`,value:D(1989,`Debug`)};case BV.Info:return{original:`Info`,value:D(1990,`Info`)};case BV.Warning:return{original:`Warning`,value:D(1991,`Warning`)};case BV.Error:return{original:`Error`,value:D(1992,`Error`)};case BV.Off:return{original:`Off`,value:D(1993,`Off`)}}}function nH(e){switch(e){case`trace`:return BV.Trace;case`debug`:return BV.Debug;case`info`:return BV.Info;case`warn`:return BV.Warning;case`error`:return BV.Error;case`critical`:return BV.Error;case`off`:return BV.Off}}var rH=new W(`logLevel`,eH(BV.Info)),iH=class extends w{get capabilities(){return this._capabilities||(this._capabilities=Zy.FileReadWrite|Zy.FileReadStream,ci&&(this._capabilities|=Zy.PathCaseSensitive)),this._capabilities}constructor(e,t,n){super(),this.indexedDB=e,this.store=t,this.logService=n,this.onDidChangeCapabilities=T.None,this.extUri=ci?Es:Os,this._onDidChangeFileEmitter=this._register(new E),this.onDidChangeFile=this._onDidChangeFileEmitter.event,this._files=new Map,this._directories=new Map}async stat(e){try{let t=await this.getHandle(e);if(!t)throw this.createFileSystemProviderError(e,`No such file or directory, stat`,H.FileNotFound);if(LV.isFileSystemFileHandle(t)){let e=await t.getFile();return{type:Jy.File,mtime:e.lastModified,ctime:0,size:e.size}}return{type:Jy.Directory,mtime:0,ctime:0,size:0}}catch(e){throw this.toFileSystemProviderError(e)}}async readdir(e){try{let t=await this.getDirectoryHandle(e);if(!t)throw this.createFileSystemProviderError(e,`No such file or directory, readdir`,H.FileNotFound);let n=[];for await(let[e,r]of t)n.push([e,LV.isFileSystemFileHandle(r)?Jy.File:Jy.Directory]);return n}catch(e){throw this.toFileSystemProviderError(e)}}readFileStream(e,t,n){let r=Op(e=>Up.concat(e.map(e=>Up.wrap(e))).buffer,{highWaterMark:10});return(async()=>{try{let i=await this.getFileHandle(e);if(!i)throw this.createFileSystemProviderError(e,`No such file or directory, readFile`,H.FileNotFound);let a=await i.getFile();if(typeof t.length==`number`||typeof t.position==`number`){let e=new Uint8Array(await a.arrayBuffer());typeof t?.position==`number`&&(e=e.slice(t.position)),typeof t?.length==`number`&&(e=e.slice(0,t.length)),r.end(e)}else{let e=a.stream().getReader(),t=await e.read();for(;!t.done&&!(n.isCancellationRequested||(await r.write(t.value),n.isCancellationRequested));)t=await e.read();r.end(void 0)}}catch(e){r.error(this.toFileSystemProviderError(e)),r.end()}})(),r}async readFile(e){try{let t=await this.getFileHandle(e);if(!t)throw this.createFileSystemProviderError(e,`No such file or directory, readFile`,H.FileNotFound);let n=await t.getFile();return new Uint8Array(await n.arrayBuffer())}catch(e){throw this.toFileSystemProviderError(e)}}async writeFile(e,t,n){try{let r=await this.getFileHandle(e);if(!n.create||!n.overwrite){if(r){if(!n.overwrite)throw this.createFileSystemProviderError(e,`File already exists, writeFile`,H.FileExists)}else if(!n.create)throw this.createFileSystemProviderError(e,`No such file, writeFile`,H.FileNotFound)}if(!r){let t=await this.getDirectoryHandle(this.extUri.dirname(e));if(!t)throw this.createFileSystemProviderError(e,`No such parent directory, writeFile`,H.FileNotFound);if(r=await t.getFileHandle(this.extUri.basename(e),{create:!0}),!r)throw this.createFileSystemProviderError(e,`Unable to create file , writeFile`,H.Unknown)}let i=await r.createWritable();await i.write(t),await i.close()}catch(e){throw this.toFileSystemProviderError(e)}}async mkdir(e){try{let t=await this.getDirectoryHandle(this.extUri.dirname(e));if(!t)throw this.createFileSystemProviderError(e,`No such parent directory, mkdir`,H.FileNotFound);await t.getDirectoryHandle(this.extUri.basename(e),{create:!0})}catch(e){throw this.toFileSystemProviderError(e)}}async delete(e,t){try{let n=await this.getDirectoryHandle(this.extUri.dirname(e));if(!n)throw this.createFileSystemProviderError(e,`No such parent directory, delete`,H.FileNotFound);return n.removeEntry(this.extUri.basename(e),{recursive:t.recursive})}catch(e){throw this.toFileSystemProviderError(e)}}async rename(e,t,n){try{if(this.extUri.isEqual(e,t))return;let r=await this.getFileHandle(e);if(r){let i=await r.getFile(),a=new Uint8Array(await i.arrayBuffer());await this.writeFile(t,a,{create:!0,overwrite:n.overwrite,unlock:!1,atomic:!1}),await this.delete(e,{recursive:!1,useTrash:!1,atomic:!1})}else throw this.createFileSystemProviderError(e,D(1905,`Rename is only supported for files.`),H.Unavailable)}catch(e){throw this.toFileSystemProviderError(e)}}watch(e,t){let n=new C;return this.doWatch(e,t,n).catch(t=>this.logService.error(`[File Watcher ('FileSystemObserver')] Error: ${t} (${e})`)),n}async doWatch(e,t,n){if(!RV.supported(globalThis))return;let r=await this.getHandle(e);if(!r||n.isDisposed)return;let i=new globalThis.FileSystemObserver(t=>{if(n.isDisposed)return;let r=[];for(let i of t)switch(this.logService.getLevel()===BV.Trace&&this.logService.trace(`[File Watcher ('FileSystemObserver')] [${i.type}] ${Fs(e,...i.relativePathComponents)}`),i.type){case`appeared`:r.push({resource:Fs(e,...i.relativePathComponents),type:_b.ADDED});break;case`disappeared`:r.push({resource:Fs(e,...i.relativePathComponents),type:_b.DELETED});break;case`modified`:r.push({resource:Fs(e,...i.relativePathComponents),type:_b.UPDATED});break;case`errored`:this.logService.trace(`[File Watcher ('FileSystemObserver')] errored, disposing observer (${e})`),n.dispose()}r.length&&this._onDidChangeFileEmitter.fire(r)});try{await i.observe(r,t.recursive?{recursive:!0}:void 0)}finally{n.isDisposed?i.disconnect():n.add(S(()=>i.disconnect()))}}registerFileHandle(e){return this.registerHandle(e,this._files)}registerDirectoryHandle(e){return this.registerHandle(e,this._directories)}get directories(){return this._directories.values()}async registerHandle(e,t){let n=`/${e.name}`;if(t.has(n)&&!await t.get(n)?.isSameEntry(e)){let r=ma(e.name),i=pa(e.name,r),a=1;do n=`/${i}-${a++}${r}`;while(t.has(n)&&!await t.get(n)?.isSameEntry(e))}t.set(n,e);try{await this.indexedDB?.runInTransaction(this.store,`readwrite`,t=>t.put(e,n))}catch(e){this.logService.error(e)}return k.from({scheme:A.file,path:n})}async getHandle(e){let t=await this.doGetHandle(e);if(!t){let n=await this.getDirectoryHandle(this.extUri.dirname(e));if(n){let r=Es.basename(e);try{t=await n.getFileHandle(r)}catch{try{t=await n.getDirectoryHandle(r)}catch{}}}}return t}async getFileHandle(e){let t=await this.doGetHandle(e);if(t instanceof FileSystemFileHandle)return t;let n=await this.getDirectoryHandle(this.extUri.dirname(e));try{return await n?.getFileHandle(Es.basename(e))}catch{return}}async getDirectoryHandle(e){let t=await this.doGetHandle(e);if(t instanceof FileSystemDirectoryHandle)return t;let n=this.extUri.dirname(e);if(this.extUri.isEqual(n,e))return;let r=await this.getDirectoryHandle(n);try{return await r?.getDirectoryHandle(Es.basename(e))}catch{return}}async doGetHandle(e){if(this.extUri.dirname(e).path!==`/`)return;let t=e.path.replace(/\/$/,``),n=this._files.get(t)??this._directories.get(t);if(n)return n;let r=await this.indexedDB?.runInTransaction(this.store,`readonly`,e=>e.get(t));if(LV.isFileSystemHandle(r)){let e=await r.queryPermission()===`granted`;try{e||=await r.requestPermission()===`granted`}catch(e){this.logService.error(e)}if(e)return LV.isFileSystemFileHandle(r)?this._files.set(t,r):LV.isFileSystemDirectoryHandle(r)&&this._directories.set(t,r),r}throw this.createFileSystemProviderError(e,`No file system handle registered`,H.Unavailable)}toFileSystemProviderError(e){if(e instanceof lb)return e;let t=H.Unknown;return e.name===`NotAllowedError`&&(e=Error(D(1906,`Insufficient permissions. Please retry and allow the operation.`)),t=H.Unavailable),ub(e,t)}createFileSystemProviderError(e,t,n){return ub(Error(`${t} (${sa(e.path)})`),n)}};function aH(e,t){return e.with({fragment:`${t.startLineNumber},${t.startColumn}${t.endLineNumber?`-${t.endLineNumber}${t.endColumn?`,${t.endColumn}`:``}`:``}`})}function oH(e){let t,n=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(e.fragment);return n&&(t={startLineNumber:parseInt(n[1]),startColumn:n[2]?parseInt(n[2]):1,endLineNumber:n[4]?parseInt(n[4]):void 0,endColumn:n[4]?n[5]?parseInt(n[5]):1:void 0},e=e.with({fragment:``})),{selection:t,uri:e}}var sH=V(`labelService`),cH=V(`textFileService`),lH=class extends w{constructor(e){if(super(),this.channelName=e,this._onDidReceiveData=this._register(new E),this.onDidReceiveData=this._onDidReceiveData.event,`BroadcastChannel`in i)try{this.broadcastChannel=new BroadcastChannel(e);let t=e=>{this._onDidReceiveData.fire(e.data)};this.broadcastChannel.addEventListener(`message`,t),this._register(S(()=>{this.broadcastChannel&&(this.broadcastChannel.removeEventListener(`message`,t),this.broadcastChannel.close())}))}catch(e){console.warn(`Error while creating broadcast channel. Falling back to localStorage.`,oe(e))}this.broadcastChannel||(this.channelName=`BroadcastDataChannel.${e}`,this.createBroadcastChannel())}createBroadcastChannel(){let e=e=>{e.key===this.channelName&&e.newValue&&this._onDidReceiveData.fire(JSON.parse(e.newValue))};i.addEventListener(`storage`,e),this._register(S(()=>i.removeEventListener(`storage`,e)))}postData(e){this.broadcastChannel?this.broadcastChannel.postMessage(e):(localStorage.removeItem(this.channelName),localStorage.setItem(this.channelName,JSON.stringify(e)))}},uH=V(`progressService`),dH=V(`editorProgressService`),fH;(function(e){e[e.Explorer=1]=`Explorer`,e[e.Scm=3]=`Scm`,e[e.Extensions=5]=`Extensions`,e[e.Window=10]=`Window`,e[e.Notification=15]=`Notification`,e[e.Dialog=20]=`Dialog`})(fH||={});var pH=Object.freeze({total(){},worked(){},done(){}}),mH=class{static#e=this.None=Object.freeze({report(){}});get value(){return this._value}constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}},hH=class extends w{constructor(e,t){super(),this.deferred=new kc,t.withProgress(e,e=>(this.reporter=e,this.lastStep&&e.report(this.lastStep),this.deferred.p)),this._register(S(()=>this.deferred.complete()))}report(e){this.reporter?this.reporter.report(e):this.lastStep=e}};hH=t([n(1,uH)],hH);var gH=class extends w{constructor(e){super(),this.progressIndicator=e,this.currentOperationId=0,this.currentOperationDisposables=this._register(new C),this.currentProgressTimeout=void 0}start(e){this.stop();let t=++this.currentOperationId,n=new Lr;return this.currentProgressTimeout=setTimeout(()=>{t===this.currentOperationId&&(this.currentProgressRunner=this.progressIndicator.show(!0))},e),this.currentOperationDisposables.add(S(()=>clearTimeout(this.currentProgressTimeout))),this.currentOperationDisposables.add(S(()=>n.cancel())),this.currentOperationDisposables.add(S(()=>this.currentProgressRunner?this.currentProgressRunner.done():void 0)),{id:t,token:n.token,stop:()=>this.doStop(t),isCurrent:()=>this.currentOperationId===t}}stop(){this.doStop(this.currentOperationId)}doStop(e){this.currentOperationId===e&&this.currentOperationDisposables.clear()}};s({});var _H=20,vH=4,yH=`--vscode-toolbar-action-min-width`,bH=class extends w{get onDidChangeDropdownVisibility(){return this._onDidChangeDropdownVisibility.event}constructor(e,t,n={orientation:Pj.HORIZONTAL}){if(super(),this.container=e,this.submenuActionViewItems=[],this.hasSecondaryActions=!1,this._onDidChangeDropdownVisibility=this._register(new sr),this.originalPrimaryActions=[],this.originalSecondaryActions=[],this.hiddenActions=[],this.disposables=this._register(new C),n.hoverDelegate=n.hoverDelegate??this._register(AE()),this.options=n,this.toggleMenuAction=this._register(new xH(()=>this.toggleMenuActionViewItem?.show(),n.toggleMenuTitle)),this.element=v_(`div`),this.element.className=`monaco-toolbar`,e.appendChild(this.element),this.actionBar=this._register(new Fj(this.element,{orientation:n.orientation,ariaLabel:n.ariaLabel,actionRunner:n.actionRunner,allowContextMenu:n.allowContextMenu,highlightToggledItems:n.highlightToggledItems,hoverDelegate:n.hoverDelegate,actionViewItemProvider:(e,r)=>{if(e.id===xH.ID)return this.toggleMenuActionViewItem=new gz(e,{getActions:()=>this.toggleMenuAction.menuActions},t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:lC.asClassNameArray(n.moreIcon??x.toolBarMore),anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,isMenu:!0,hoverDelegate:this.options.hoverDelegate}),this.toggleMenuActionViewItem.setActionContext(this.actionBar.context),this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility)),this.toggleMenuActionViewItem;if(n.actionViewItemProvider){let t=n.actionViewItemProvider(e,r);if(t)return t}if(e instanceof eS){let n=new gz(e,e.actions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:e.class,anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,hoverDelegate:this.options.hoverDelegate});return n.setActionContext(this.actionBar.context),this.submenuActionViewItems.push(n),this.disposables.add(this._onDidChangeDropdownVisibility.add(n.onDidChangeVisibility)),n}}})),this.actionMinWidth=(n.responsiveBehavior?.actionMinWidth??_H)+vH,this.options.responsiveBehavior?.enabled){this.element.classList.toggle(`responsive`,!0),this.element.classList.toggle(`responsive-all`,this.options.responsiveBehavior.kind===`all`),this.element.classList.toggle(`responsive-last`,this.options.responsiveBehavior.kind===`last`),this.element.style.setProperty(yH,`${this.actionMinWidth-vH}px`);let e=new ResizeObserver(()=>{this.updateActions(this.element.getBoundingClientRect().width)});e.observe(this.element),this._store.add(S(()=>e.disconnect()))}}set actionRunner(e){this.actionBar.actionRunner=e}get actionRunner(){return this.actionBar.actionRunner}set context(e){this.actionBar.context=e,this.toggleMenuActionViewItem?.setActionContext(e);for(let t of this.submenuActionViewItems)t.setActionContext(e)}getElement(){return this.element}focus(){this.actionBar.focus()}getItemsWidth(){let e=0;for(let t=0;t<this.actionBar.length();t++)e+=this.actionBar.getWidth(t);return e}getItemAction(e){return this.actionBar.getAction(e)}getItemWidth(e){return this.actionBar.getWidth(e)}getItemsLength(){return this.actionBar.length()}setAriaLabel(e){this.actionBar.setAriaLabel(e)}setActions(e,t){this.clear(),this.originalPrimaryActions=e?e.slice(0):[],this.originalSecondaryActions=t?t.slice(0):[];let n=e?e.slice(0):[];if(this.hasSecondaryActions=!!(t&&t.length>0),this.hasSecondaryActions&&t&&(this.toggleMenuAction.menuActions=t.slice(0),n.push(this.toggleMenuAction)),n.length>0&&this.options.trailingSeparator&&n.push(new $x),n.forEach(e=>{this.actionBar.push(e,{icon:this.options.icon??!0,label:this.options.label??!1,keybinding:this.getKeybindingLabel(e)})}),this.actionBar.domNode.classList.toggle(`has-overflow`,this.actionBar.hasAction(this.toggleMenuAction)),this.options.responsiveBehavior?.enabled){if(this.hiddenActions.length=0,this.options.responsiveBehavior?.minItems!==void 0){let e=this.options.responsiveBehavior.minItems,t=0;(this.originalSecondaryActions.length>0||e<this.originalPrimaryActions.length)&&(t=_H+vH),this.container.style.minWidth=`${e*this.actionMinWidth+t}px`,this.element.style.minWidth=`${e*this.actionMinWidth+t}px`}else this.container.style.minWidth=`${_H+vH}px`,this.element.style.minWidth=`${_H+vH}px`;this.updateActions(this.element.getBoundingClientRect().width)}}isEmpty(){return this.actionBar.isEmpty()}getKeybindingLabel(e){return(this.options.getKeyBinding?.(e))?.getLabel()??void 0}updateActions(e){if(this.actionBar.isEmpty())return;e=Math.max(e,parseInt(this.element.style.minWidth));let t=e=>{if(this.options.responsiveBehavior?.kind===`last`){let t=this.actionBar.hasAction(this.toggleMenuAction),n=t?this.actionBar.length()-1:this.actionBar.length(),r=0;for(let e=0;e<n-1;e++)r+=this.actionBar.getWidth(e)+vH;return r+=e?this.actionBar.getWidth(n-1):this.actionMinWidth,r+=t?_H+vH:0,r}else return this.actionBar.length()*this.actionMinWidth};if(t(!1)<=e&&this.hiddenActions.length===0)return;if(t(!1)>e){if(this.options.responsiveBehavior?.minItems!==void 0&&(this.actionBar.hasAction(this.toggleMenuAction)?this.actionBar.length()-1:this.actionBar.length())<=this.options.responsiveBehavior.minItems)return;for(;t(!0)>e&&this.actionBar.length()>0;){let e=this.originalPrimaryActions.length-this.hiddenActions.length-1;if(e<0)break;let t=Math.min(this.actionMinWidth,this.getItemWidth(e)),n=this.originalPrimaryActions[e];this.hiddenActions.unshift({action:n,size:t}),this.actionBar.pull(e),this.originalSecondaryActions.length===0&&this.hiddenActions.length===1&&this.actionBar.push(this.toggleMenuAction,{icon:this.options.icon??!0,label:this.options.label??!1,keybinding:this.getKeybindingLabel(this.toggleMenuAction)})}}else for(;this.hiddenActions.length>0;){let n=this.hiddenActions.shift();if(t(!0)+n.size>e){this.hiddenActions.unshift(n);break}this.actionBar.push(n.action,{icon:this.options.icon??!0,label:this.options.label??!1,keybinding:this.getKeybindingLabel(n.action),index:this.originalPrimaryActions.length-this.hiddenActions.length-1}),this.originalSecondaryActions.length===0&&this.hiddenActions.length===0&&(this.toggleMenuAction.menuActions=[],this.actionBar.pull(this.actionBar.length()-1))}let n=this.hiddenActions.map(e=>e.action);if(this.originalSecondaryActions.length>0||n.length>0){let e=this.originalSecondaryActions.slice(0);this.toggleMenuAction.menuActions=$x.join(n,e)}this.actionBar.domNode.classList.toggle(`has-overflow`,this.actionBar.hasAction(this.toggleMenuAction))}clear(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}dispose(){this.clear(),this.disposables.dispose(),this.element.remove(),super.dispose()}},xH=class e extends Zx{static#e=this.ID=`toolbar.toggle.more`;constructor(t,n){n||=D(31,`More Actions...`),super(e.ID,n,void 0,!0),this._menuActions=[],this.toggleDropdownMenu=t}async run(){this.toggleDropdownMenu()}get menuActions(){return this._menuActions}set menuActions(e){this._menuActions=e}},SH,CH,wH=class{constructor(e,t,n){this._commandService=e,this._keybindingService=t,this._hiddenStates=new TH(n)}createMenu(e,t,n){return new OH(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...n},this._commandService,this._keybindingService,t)}getMenuActions(e,t,n){let r=new OH(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...n},this._commandService,this._keybindingService,t),i=r.getActions(n);return r.dispose(),i}getMenuContexts(e){let t=new EH(e,!1);return new Set([...t.structureContextKeys,...t.preconditionContextKeys,...t.toggledContextKeys])}resetHiddenStates(e){this._hiddenStates.reset(e)}};wH=t([n(0,dS),n(1,nF),n(2,Ex)],wH);var TH=class{static#e=SH=this;static#t=this._key=`menu.hiddenCommands`;constructor(e){this._storageService=e,this._disposables=new C,this._onDidChange=new E,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{let t=e.get(SH._key,yx.PROFILE,`{}`);this._data=JSON.parse(t)}catch{this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(yx.PROFILE,SH._key,this._disposables)(()=>{if(!this._ignoreChangeEvent)try{let t=e.get(SH._key,yx.PROFILE,`{}`);this._data=JSON.parse(t)}catch(e){console.log(`FAILED to read storage after UPDATE`,e)}this._onDidChange.fire()}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(e,t){return this._hiddenByDefaultCache.get(`${e.id}/${t}`)??!1}setDefaultState(e,t,n){this._hiddenByDefaultCache.set(`${e.id}/${t}`,n)}isHidden(e,t){let n=this._isHiddenByDefault(e,t),r=this._data[e.id]?.includes(t)??!1;return n?!r:r}updateHidden(e,t,n){this._isHiddenByDefault(e,t)&&(n=!n);let r=this._data[e.id];if(n)r?r.indexOf(t)<0&&r.push(t):this._data[e.id]=[t];else if(r){let n=r.indexOf(t);n>=0&&dt(r,n),r.length===0&&delete this._data[e.id]}this._persist()}reset(e){if(e===void 0)this._data=Object.create(null),this._persist();else{for(let{id:t}of e)this._data[t]&&delete this._data[t];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;let e=JSON.stringify(this._data);this._storageService.store(SH._key,e,yx.PROFILE,bx.USER)}finally{this._ignoreChangeEvent=!1}}};TH=SH=t([n(0,Ex)],TH);var EH=class e{constructor(e,t){this._id=e,this._collectContextKeysForSubmenus=t,this._menuGroups=[],this._allMenuIds=new Set,this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}get allMenuIds(){return this._allMenuIds}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._allMenuIds.clear(),this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();let e=this._sort(mC.getMenuItems(this._id)),t;for(let n of e){let e=n.group||``;(!t||t[0]!==e)&&(t=[e,[]],this._menuGroups.push(t)),t[1].push(n),this._collectContextKeysAndSubmenuIds(n)}this._allMenuIds.add(this._id)}_sort(e){return e}_collectContextKeysAndSubmenuIds(t){if(e._fillInKbExprKeys(t.when,this._structureContextKeys),dC(t)){if(t.command.precondition&&e._fillInKbExprKeys(t.command.precondition,this._preconditionContextKeys),t.command.toggled){let n=t.command.toggled.condition||t.command.toggled;e._fillInKbExprKeys(n,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&(mC.getMenuItems(t.submenu).forEach(this._collectContextKeysAndSubmenuIds,this),this._allMenuIds.add(t.submenu))}static _fillInKbExprKeys(e,t){if(e)for(let n of e.keys())t.add(n)}},DH=CH=class extends EH{constructor(e,t,n,r,i,a){super(e,n),this._hiddenStates=t,this._commandService=r,this._keybindingService=i,this._contextKeyService=a,this.refresh()}createActionGroups(e){let t=[];for(let n of this._menuGroups){let[r,i]=n,a;for(let t of i)if(this._contextKeyService.contextMatchesRules(t.when)){let n=dC(t);n&&this._hiddenStates.setDefaultState(this._id,t.command.id,!!t.isHiddenByDefault);let r=kH(this._id,n?t.command:t,this._hiddenStates);if(n){let n=AH(this._commandService,this._keybindingService,t.command.id,t.when);(a??=[]).push(new gC(t.command,t.alt,e,r,n,this._contextKeyService,this._commandService))}else{let n=new CH(t.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._keybindingService,this._contextKeyService).createActionGroups(e),i=$x.join(...n.map(e=>e[1]));i.length>0&&(a??=[]).push(new hC(t,r,i))}}a&&a.length>0&&t.push([r,a])}return t}_sort(e){return e.sort(CH._compareMenuItems)}static _compareMenuItems(e,t){let n=e.group,r=t.group;if(n!==r){if(n){if(!r)return-1}else return 1;if(n===`navigation`)return-1;if(r===`navigation`)return 1;let e=n.localeCompare(r);if(e!==0)return e}let i=e.order||0,a=t.order||0;return i<a?-1:i>a?1:CH._compareTitles(dC(e)?e.command.title:e.title,dC(t)?t.command.title:t.title)}static _compareTitles(e,t){let n=typeof e==`string`?e:e.original,r=typeof t==`string`?t:t.original;return n.localeCompare(r)}};DH=CH=t([n(3,dS),n(4,nF),n(5,uS)],DH);var OH=class{constructor(e,t,n,r,i,a){this._disposables=new C,this._menuInfo=new DH(e,t,n.emitEventsForSubmenuChanges,r,i,a);let o=new bc(()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})},n.eventDebounceDelay);this._disposables.add(o),this._disposables.add(mC.onDidChangeMenu(e=>{for(let t of this._menuInfo.allMenuIds)if(e.has(t)){o.schedule();break}}));let s=this._disposables.add(new C);this._onDidChange=new ar({onWillAddFirstListener:()=>{s.add(a.onDidChangeContext(e=>{let t=e.affectsSome(this._menuInfo.structureContextKeys),n=e.affectsSome(this._menuInfo.preconditionContextKeys),r=e.affectsSome(this._menuInfo.toggledContextKeys);(t||n||r)&&this._onDidChange.fire({menu:this,isStructuralChange:t,isEnablementChange:n,isToggleChange:r})})),s.add(t.onDidChange(e=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})}))},onDidRemoveLastListener:s.clear.bind(s),delay:n.eventDebounceDelay,merge:e=>{let t=!1,n=!1,r=!1;for(let i of e)if(t||=i.isStructuralChange,n||=i.isEnablementChange,r||=i.isToggleChange,t&&n&&r)break;return{menu:this,isStructuralChange:t,isEnablementChange:n,isToggleChange:r}}}),this.onDidChange=this._onDidChange.event}getActions(e){return this._menuInfo.createActionGroups(e)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};OH=t([n(3,dS),n(4,nF),n(5,uS)],OH);function kH(e,t,n){let r=tne(t)?t.submenu.id:t.id,i=typeof t.title==`string`?t.title:t.title.value,a=nS({id:`hide/${e.id}/${r}`,label:D(1765,`Hide '{0}'`,i),run(){n.updateHidden(e,r,!0)}}),o=nS({id:`toggle/${e.id}/${r}`,label:i,get checked(){return!n.isHidden(e,r)},run(){n.updateHidden(e,r,!!this.checked)}});return{hide:a,toggle:o,get isHidden(){return!o.checked}}}function AH(e,t,n,r=void 0,i=!0){return nS({id:`configureKeybinding/${n}`,label:D(1766,`Configure Keybinding`),enabled:i,run(){let i=!t.lookupKeybinding(n)&&r?r.serialize():void 0;e.executeCommand(`workbench.action.openGlobalKeybindings`,`@command:${n}`+(i?` +when:${i}`:``))}})}var jH=Ty(Ly),MH={},NH={ctrlCmd:!1,alt:!1},PH;(function(e){e[e.Blur=1]=`Blur`,e[e.Gesture=2]=`Gesture`,e[e.Other=3]=`Other`})(PH||={});var FH;(function(e){e.QuickPick=`quickPick`,e.InputBox=`inputBox`,e.QuickWidget=`quickWidget`,e.QuickTree=`quickTree`})(FH||={});var IH;(function(e){e[e.NONE=0]=`NONE`,e[e.FIRST=1]=`FIRST`,e[e.SECOND=2]=`SECOND`,e[e.LAST=3]=`LAST`})(IH||={});var LH;(function(e){e[e.First=1]=`First`,e[e.Second=2]=`Second`,e[e.Last=3]=`Last`,e[e.Next=4]=`Next`,e[e.Previous=5]=`Previous`,e[e.NextPage=6]=`NextPage`,e[e.PreviousPage=7]=`PreviousPage`,e[e.NextSeparator=8]=`NextSeparator`,e[e.PreviousSeparator=9]=`PreviousSeparator`})(LH||={});var RH;(function(e){e[e.Title=1]=`Title`,e[e.Inline=2]=`Inline`,e[e.Input=3]=`Input`})(RH||={});var zH=class{constructor(e){this.options=e}getItemLabel(e){return e.label}getItemDescription(e){if(!this.options?.skipDescription)return e.description}getItemPath(e){if(!this.options?.skipPath)return e.resource?.scheme===A.file?e.resource.fsPath:e.resource?.path}},BH=new zH;s(MH);var VH={},HH=new kD(`quick-input-button-icon-`);function UH(e){if(!e)return;let t,n=e.dark.toString();return VH[n]?t=VH[n]:(t=HH.nextId(),EC(`.${t}, .hc-light .${t}`,`background-image: ${MC(e.light||e.dark)}`),EC(`.vs-dark .${t}, .hc-black .${t}`,`background-image: ${MC(e.dark)}`),VH[n]=t),t}var WH=class{constructor(e,t,n,r,i,a,o){this.id=e,this.label=t,this.tooltip=n,this.enabled=i,this._checked=a,this._run=o,this.class=r}get checked(){return this._checked}set checked(e){this._checked=e,this._run()}run(){return this._checked=!this._checked,this._run()}};function GH(e,t,n){let r=e.iconClass||UH(e.iconPath);e.alwaysVisible&&(r=r?`${r} always-visible`:`always-visible`);let i=()=>(e.toggle&&(e.toggle.checked=!e.toggle.checked),n());return e.toggle?new WH(t,e.tooltip||``,``,r,!0,e.toggle.checked,i):{id:t,label:``,tooltip:e.tooltip||``,class:r,enabled:!0,run:i}}function KH(e,t,n){let r=[],i=[];return e.forEach((e,a)=>{let o=GH(e,`${t}-${a}`,async()=>n(e));e.label&&(o.label=e.label),e.secondary?i.push(o):r.push(o)}),{primary:r,secondary:i}}function qH(e,t,n){z_(t);let r=lS(e),i=0;for(let e of r.nodes)if(typeof e==`string`)t.append(...EA(e));else{let r=e.title;!r&&e.href.startsWith(`command:`)?r=D(2040,`Click to execute command '{0}'`,e.href.substring(8)):r||=e.href;let a=B(`a`,{href:e.href,title:r,tabIndex:i++},e.label);a.style.textDecoration=`underline`;let o=t=>{j_(t)&&M_.stop(t,!0),n.callback(e.href)},s=n.disposables.add(new IC(a,R.CLICK)).event,c=n.disposables.add(new IC(a,R.KEY_DOWN)).event,l=T.chain(c,e=>e.filter(e=>{let t=new vp(e);return t.equals(F.Space)||t.equals(F.Enter)}));n.disposables.add(RC.addTarget(a));let u=n.disposables.add(new IC(a,LC.Tap)).event;T.any(s,u,l)(o,null,n.disposables),t.appendChild(a)}}var JH=class extends w{get delay(){return this.isInstantlyHovering()?0:this.hoverOptions?.dynamicDelay?e=>this.hoverOptions?.dynamicDelay?.(e)??this._delay:this._delay}constructor(e,t,n={},r,i){super(),this.placement=e,this.hoverOptions=t,this.overrideOptions=n,this.configurationService=r,this.hoverService=i,this.lastHoverHideTime=0,this.timeLimit=200,this.hoverDisposables=this._register(new C),this._delay=this.configurationService.getValue(`workbench.hover.delay`),this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(`workbench.hover.delay`)&&(this._delay=this.configurationService.getValue(`workbench.hover.delay`))}))}showHover(e,t){let n=typeof this.overrideOptions==`function`?this.overrideOptions(e,t):this.overrideOptions;this.hoverDisposables.clear();let r=x_(e.target)?[e.target]:e.target.targetElements;for(let e of r)this.hoverDisposables.add(fg(e,`keydown`,e=>{e.equals(F.Escape)&&this.hoverService.hideHover()}));let i=x_(e.content)?void 0:typeof e.content==`string`?e.content.toString():e.content.value;return this.hoverService.showInstantHover({...e,...n,persistence:{hideOnKeyDown:!0,...n.persistence},id:i,appearance:{...e.appearance,compact:!0,skipFadeInAnimation:this.isInstantlyHovering(),...n.appearance}},t)}isInstantlyHovering(){return!!this.hoverOptions?.instantHover&&Date.now()-this.lastHoverHideTime<this.timeLimit}setInstantHoverTimeLimit(e){if(!this.hoverOptions?.instantHover)throw Error(`Instant hover is not enabled`);this.timeLimit=e}onDidHideHover(){this.hoverDisposables.clear(),this.hoverOptions?.instantHover&&(this.lastHoverHideTime=Date.now())}};JH=t([n(3,Dx),n(4,_z)],JH);var YH={showHover:function(){throw Error(`Native hover function not implemented.`)},delay:0,showNativeHover:!0};s(MH);var XH=`inQuickInput`,ZH=new W(XH,!1,D(2017,`Whether keyboard focus is inside the quick input control`)),QH=jS.has(XH),$H=new W(`quickInputAlignment`,`top`,D(2018,`The alignment of the quick input`)),eU=`quickInputType`,tU=new W(eU,void 0,D(2019,`The type of the currently visible quick input`)),nU=`cursorAtEndOfQuickInputBox`,rU=new W(nU,!1,D(2020,`Whether the cursor in the quick input is at the end of the input box`)),iU=jS.has(nU),aU={iconClass:lC.asClassName(x.quickInputBack),tooltip:D(2021,`Back`),handle:-1},oU=class e extends w{static#e=this.noPromptMessage=D(2022,`Press 'Enter' to confirm your input or 'Escape' to cancel`);constructor(t){super(),this.ui=t,this._visible=Oh(`visible`,!1),this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._leftButtons=[],this._rightButtons=[],this._inlineButtons=[],this._inputButtons=[],this.buttonsUpdated=!1,this.noValidationMessage=e.noPromptMessage,this._severity=Lx.Ignore,this.onDidTriggerButtonEmitter=this._register(new E),this.onDidHideEmitter=this._register(new E),this.onWillHideEmitter=this._register(new E),this.onDisposeEmitter=this._register(new E),this.visibleDisposables=this._register(new C),this.onDidTriggerButton=this.onDidTriggerButtonEmitter.event,this.onDidHide=this.onDidHideEmitter.event,this.onWillHide=this.onWillHideEmitter.event,this.onDispose=this.onDisposeEmitter.event}get visible(){return this._visible.get()}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){let t=this._ignoreFocusOut!==e&&!mi;this._ignoreFocusOut=e&&!mi,t&&this.update()}get titleButtons(){return this._leftButtons.length?[...this._leftButtons,this._rightButtons]:this._rightButtons}get buttons(){return[...this._leftButtons,...this._rightButtons,...this._inlineButtons,...this._inputButtons]}set buttons(e){let t=[],n=[],r=[],i=[];for(let a of e)if(a===aU)t.push(a);else switch(a.location){case RH.Inline:r.push(a);break;case RH.Input:i.push(a);break;default:n.push(a);break}this._leftButtons=t,this._rightButtons=n,this._inlineButtons=r,this._inputButtons=i,this.buttonsUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this._visible.set(!0,void 0),this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=PH.Other){this._visible.set(!1,void 0),this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}willHide(e=PH.Other){this.onWillHideEmitter.fire({reason:e})}update(){if(!this.visible)return;let e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!==`&nbsp;`&&(this.ui.title.innerText=`\xA0`);let t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this.busy&&!this.busyDelay&&(this.busyDelay=new vc,this.busyDelay.setIfNotSet(()=>{this.visible&&(this.ui.progressBar.infinite(),this.ui.progressBar.getContainer().removeAttribute(`aria-hidden`))},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.ui.progressBar.getContainer().setAttribute(`aria-hidden`,`true`),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1;let e=KH(this._leftButtons,`left-button`,e=>this.onDidTriggerButtonEmitter.fire(e));this.ui.leftActionBar.setActions(e.primary,e.secondary);let t=KH(this._rightButtons,`right-button`,e=>this.onDidTriggerButtonEmitter.fire(e));this.ui.rightActionBar.setActions(t.primary,t.secondary);let n=KH(this._inlineButtons,`inline-button`,e=>this.onDidTriggerButtonEmitter.fire(e));this.ui.inlineActionBar.setActions(n.primary,n.secondary);let r=this._inputButtons.length*22;this.ui.countContainer.style.right=r>0?`${4+r}px`:`4px`,this.ui.inputBox.actions=this._inputButtons.map((e,t)=>GH(e,`id-${t}`,async()=>this.onDidTriggerButtonEmitter.fire(e)))}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);let n=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==n&&(this._lastValidationMessage=n,z_(this.ui.message),n&&qH(n,this.ui.message,{callback:e=>{this.ui.linkOpenerDelegate(e)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():``}getDescription(){return this.description||``}getSteps(){return this.step&&this.totalSteps?D(2023,`{0}/{1}`,this.step,this.totalSteps):this.step?String(this.step):``}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==Lx.Ignore){let t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:``,this.ui.message.style.backgroundColor=t.background?`${t.background}`:``,this.ui.message.style.border=t.border?`1px solid ${t.border}`:``,this.ui.message.style.marginBottom=`-2px`}else this.ui.message.style.color=``,this.ui.message.style.backgroundColor=``,this.ui.message.style.border=``,this.ui.message.style.marginBottom=``}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}},sU=class e extends oU{static#e=this.DEFAULT_ARIA_LABEL=D(2024,`Type to narrow down results.`);constructor(e){super(e),this._value=``,this.onDidChangeValueEmitter=this._register(new E),this.onWillAcceptEmitter=this._register(new E),this.onDidAcceptEmitter=this._register(new E),this.onDidCustomEmitter=this._register(new E),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode=`fuzzy`,this._sortByLabel=!0,this._keepScrollPosition=!1,this._itemActivation=IH.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new E),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new E),this.onDidTriggerItemButtonEmitter=this._register(new E),this.onDidTriggerSeparatorButtonEmitter=this._register(new E),this.valueSelectionUpdated=!0,this._ok=`default`,this._customButton=!1,this._customButtonSecondary=!1,this._focusEventBufferer=new lr,this.type=FH.QuickPick,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidCustom=this.onDidCustomEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event,this.noValidationMessage=void 0}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){this._value!==e&&(this._value=e,t||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get prompt(){return this.noValidationMessage}set prompt(e){this.noValidationMessage=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?NH:this.ui.keyMods}get valueSelection(){let e=this.ui.inputBox.getSelection();if(e)return[e.start,e.end]}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get customButtonSecondary(){return this._customButtonSecondary}set customButtonSecondary(e){this._customButtonSecondary=e??!1,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get okLabel(){return this._okLabel??D(2025,`OK`)}set okLabel(e){this._okLabel=e,this.update()}inputHasFocus(){return this.visible?this.ui.inputBox.hasFocus():!1}focusOnInput(){this.ui.inputBox.setFocus()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}get hideCountBadge(){return!!this._hideCountBadge}set hideCountBadge(e){this._hideCountBadge=e,this.update()}get hideCheckAll(){return!!this._hideCheckAll}set hideCheckAll(e){this._hideCheckAll=e,this.update()}trySelectFirst(){this.canSelectMany||this.ui.list.focus(LH.First)}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this.doSetValue(e,!0)})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this._focusEventBufferer.wrapEvent(this.ui.list.onDidChangeFocus,(e,t)=>t)(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&ut(e,this._activeItems,(e,t)=>e===t)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany&&!e.some(e=>e.pickable===!1)){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&ut(e,this._selectedItems,(e,t)=>e===t)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(O_(t)&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{!this.canSelectMany||!this.visible||this.selectedItemsToConfirm!==this._selectedItems&&ut(e,this._selectedItems,(e,t)=>e===t)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered(e=>this.onDidTriggerSeparatorButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return L(this.ui.container,R.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;let t=new vp(e),n=t.keyCode;this._quickNavigate.keybindings.some(e=>{let r=e.getChords();return r.length>1?!1:r[0].shiftKey&&n===F.Shift?!(t.ctrlKey||t.altKey||t.metaKey):!!(r[0].altKey&&n===F.Alt||r[0].ctrlKey&&n===F.Ctrl||r[0].metaKey&&n===F.Meta)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;let t=this.keepScrollPosition?this.scrollTop:0,n=!!this.description,r={title:!!this.title||!!this.step||!!this.titleButtons.length,description:n,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||n,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:this.ok===`default`?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage||!!this.prompt,customButton:this.customButton};this.ui.setVisibilities(r),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||``)&&(this.ui.inputBox.placeholder=this.placeholder||``);let i=this.ariaLabel;!i&&r.inputBox&&(i=this.placeholder,this.title&&(i=i?`${i} - ${this.title}`:this.title),i||=e.DEFAULT_ARIA_LABEL),this.ui.list.ariaLabel!==i&&(this.ui.list.ariaLabel=i??null),this.ui.inputBox.ariaLabel!==i&&(this.ui.inputBox.ariaLabel=i??`input`),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated&&(this.itemsUpdated=!1,this._focusEventBufferer.bufferEvents(()=>{switch(this.ui.list.setElements(this.items),this.ui.list.shouldLoop=!this.canSelectMany,this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this._itemActivation){case IH.NONE:this._itemActivation=IH.FIRST;break;case IH.SECOND:this.ui.list.focus(LH.Second),this._itemActivation=IH.FIRST;break;case IH.LAST:this.ui.list.focus(LH.Last),this._itemActivation=IH.FIRST;break;default:this.trySelectFirst();break}})),this.ui.container.classList.contains(`show-checkboxes`)!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.ok.label=this.okLabel||``,this.ui.customButton.label=this.customLabel||``,this.ui.customButton.element.title=this.customHover||``,this.ui.customButton.secondary=this.customButtonSecondary||!1,r.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(LH.First)),this.keepScrollPosition&&(this.scrollTop=t)}focus(e){this.ui.list.focus(e),this.canSelectMany&&this.ui.list.domFocus()}accept(e){e&&!this._canAcceptInBackground||(this.activeItems[0]&&!this._canSelectMany&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(e??!1))}},cU=class extends oU{constructor(){super(...arguments),this._value=``,this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new E),this.onDidAcceptEmitter=this._register(new E),this.type=FH.InputBox,this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(e){this._value=e||``,this.update()}get valueSelection(){let e=this.ui.inputBox.getSelection();if(e)return[e.start,e.end]}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.update()}get password(){return this._password}set password(e){this._password=e,this.update()}get prompt(){return this._prompt}set prompt(e){this._prompt=e,this.noValidationMessage=e?D(2026,`{0} (Press 'Enter' to confirm or 'Escape' to cancel)`,e):oU.noPromptMessage,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{e!==this.value&&(this._value=e,this.onDidValueChangeEmitter.fire(e))})),this.visibleDisposables.add(this.ui.onDidAccept(()=>this.onDidAcceptEmitter.fire())),this.valueSelectionUpdated=!0),super.show()}accept(){this.onDidAcceptEmitter.fire()}update(){if(!this.visible)return;this.ui.container.classList.remove(`hidden-input`);let e={title:!!this.title||!!this.step||!!this.titleButtons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};this.ui.setVisibilities(e),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||``)&&(this.ui.inputBox.placeholder=this.placeholder||``),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password);let t=this.ariaLabel;!t&&e.inputBox&&(t=this.placeholder?this.title?`${this.placeholder} - ${this.title}`:this.placeholder:this.title?this.title:`input`),this.ui.inputBox.ariaLabel!==t&&(this.ui.inputBox.ariaLabel=t||`input`)}},lU=class extends oU{constructor(){super(...arguments),this.type=FH.QuickWidget,this._widgetUpdated=!1}get widget(){return this._widget}set widget(e){this._widget!==e&&(this._widget=e,this._widgetUpdated=!0,this.update())}update(){this.visible&&(this.ui.setVisibilities({title:!!this.title||!!this.step||!!this.titleButtons.length,description:!!this.description||!!this.step}),this._widgetUpdated&&(this._widgetUpdated=!1,this._widget?z_(this.ui.widget,this._widget):z_(this.ui.widget)),super.update())}},uU=class extends JH{constructor(e,t){super(`mouse`,void 0,e=>this.getOverrideOptions(e),e,t)}getOverrideOptions(e){return{persistence:{hideOnKeyDown:!1},appearance:{showHoverHint:(x_(e.content)?e.content.textContent??``:typeof e.content==`string`?e.content:e.content.value).includes(`
`),skipFadeInAnimation:!0}}}};uU=t([n(0,Dx),n(1,_z)],uU);var dU;(function(e){e[e.None=0]=`None`,e[e.UnexpectedEndOfComment=1]=`UnexpectedEndOfComment`,e[e.UnexpectedEndOfString=2]=`UnexpectedEndOfString`,e[e.UnexpectedEndOfNumber=3]=`UnexpectedEndOfNumber`,e[e.InvalidUnicode=4]=`InvalidUnicode`,e[e.InvalidEscapeCharacter=5]=`InvalidEscapeCharacter`,e[e.InvalidCharacter=6]=`InvalidCharacter`})(dU||={});var fU;(function(e){e[e.OpenBraceToken=1]=`OpenBraceToken`,e[e.CloseBraceToken=2]=`CloseBraceToken`,e[e.OpenBracketToken=3]=`OpenBracketToken`,e[e.CloseBracketToken=4]=`CloseBracketToken`,e[e.CommaToken=5]=`CommaToken`,e[e.ColonToken=6]=`ColonToken`,e[e.NullKeyword=7]=`NullKeyword`,e[e.TrueKeyword=8]=`TrueKeyword`,e[e.FalseKeyword=9]=`FalseKeyword`,e[e.StringLiteral=10]=`StringLiteral`,e[e.NumericLiteral=11]=`NumericLiteral`,e[e.LineCommentTrivia=12]=`LineCommentTrivia`,e[e.BlockCommentTrivia=13]=`BlockCommentTrivia`,e[e.LineBreakTrivia=14]=`LineBreakTrivia`,e[e.Trivia=15]=`Trivia`,e[e.Unknown=16]=`Unknown`,e[e.EOF=17]=`EOF`})(fU||={});var pU;(function(e){e[e.InvalidSymbol=1]=`InvalidSymbol`,e[e.InvalidNumberFormat=2]=`InvalidNumberFormat`,e[e.PropertyNameExpected=3]=`PropertyNameExpected`,e[e.ValueExpected=4]=`ValueExpected`,e[e.ColonExpected=5]=`ColonExpected`,e[e.CommaExpected=6]=`CommaExpected`,e[e.CloseBraceExpected=7]=`CloseBraceExpected`,e[e.CloseBracketExpected=8]=`CloseBracketExpected`,e[e.EndOfFileExpected=9]=`EndOfFileExpected`,e[e.InvalidCommentToken=10]=`InvalidCommentToken`,e[e.UnexpectedEndOfComment=11]=`UnexpectedEndOfComment`,e[e.UnexpectedEndOfString=12]=`UnexpectedEndOfString`,e[e.UnexpectedEndOfNumber=13]=`UnexpectedEndOfNumber`,e[e.InvalidUnicode=14]=`InvalidUnicode`,e[e.InvalidEscapeCharacter=15]=`InvalidEscapeCharacter`,e[e.InvalidCharacter=16]=`InvalidCharacter`})(pU||={});var mU;(function(e){e.DEFAULT={allowTrailingComma:!0}})(mU||={});function hU(e,t=!1){let n=0,r=e.length,i=``,a=0,o=fU.Unknown,s=dU.None;function c(t){let r=0,i=0;for(;r<t;){let t=e.charCodeAt(n);if(t>=Y._0&&t<=Y._9)i=i*16+t-Y._0;else if(t>=Y.A&&t<=Y.F)i=i*16+t-Y.A+10;else if(t>=Y.a&&t<=Y.f)i=i*16+t-Y.a+10;else break;n++,r++}return r<t&&(i=-1),i}function l(e){n=e,i=``,a=0,o=fU.Unknown,s=dU.None}function u(){let t=n;if(e.charCodeAt(n)===Y._0)n++;else for(n++;n<e.length&&vU(e.charCodeAt(n));)n++;if(n<e.length&&e.charCodeAt(n)===Y.dot)if(n++,n<e.length&&vU(e.charCodeAt(n)))for(n++;n<e.length&&vU(e.charCodeAt(n));)n++;else return s=dU.UnexpectedEndOfNumber,e.substring(t,n);let r=n;if(n<e.length&&(e.charCodeAt(n)===Y.E||e.charCodeAt(n)===Y.e))if(n++,(n<e.length&&e.charCodeAt(n)===Y.plus||e.charCodeAt(n)===Y.minus)&&n++,n<e.length&&vU(e.charCodeAt(n))){for(n++;n<e.length&&vU(e.charCodeAt(n));)n++;r=n}else s=dU.UnexpectedEndOfNumber;return e.substring(t,r)}function d(){let t=``,i=n;for(;;){if(n>=r){t+=e.substring(i,n),s=dU.UnexpectedEndOfString;break}let a=e.charCodeAt(n);if(a===Y.doubleQuote){t+=e.substring(i,n),n++;break}if(a===Y.backslash){if(t+=e.substring(i,n),n++,n>=r){s=dU.UnexpectedEndOfString;break}switch(e.charCodeAt(n++)){case Y.doubleQuote:t+=`"`;break;case Y.backslash:t+=`\\`;break;case Y.slash:t+=`/`;break;case Y.b:t+=`\b`;break;case Y.f:t+=`\f`;break;case Y.n:t+=`
`;break;case Y.r:t+=`\r`;break;case Y.t:t+=`	`;break;case Y.u:{let e=c(4);e>=0?t+=String.fromCharCode(e):s=dU.InvalidUnicode;break}default:s=dU.InvalidEscapeCharacter}i=n;continue}if(a>=0&&a<=31)if(_U(a)){t+=e.substring(i,n),s=dU.UnexpectedEndOfString;break}else s=dU.InvalidCharacter;n++}return t}function f(){if(i=``,s=dU.None,a=n,n>=r)return a=r,o=fU.EOF;let t=e.charCodeAt(n);if(gU(t)){do n++,i+=String.fromCharCode(t),t=e.charCodeAt(n);while(gU(t));return o=fU.Trivia}if(_U(t))return n++,i+=String.fromCharCode(t),t===Y.carriageReturn&&e.charCodeAt(n)===Y.lineFeed&&(n++,i+=`
`),o=fU.LineBreakTrivia;switch(t){case Y.openBrace:return n++,o=fU.OpenBraceToken;case Y.closeBrace:return n++,o=fU.CloseBraceToken;case Y.openBracket:return n++,o=fU.OpenBracketToken;case Y.closeBracket:return n++,o=fU.CloseBracketToken;case Y.colon:return n++,o=fU.ColonToken;case Y.comma:return n++,o=fU.CommaToken;case Y.doubleQuote:return n++,i=d(),o=fU.StringLiteral;case Y.slash:{let a=n-1;if(e.charCodeAt(n+1)===Y.slash){for(n+=2;n<r&&!_U(e.charCodeAt(n));)n++;return i=e.substring(a,n),o=fU.LineCommentTrivia}if(e.charCodeAt(n+1)===Y.asterisk){n+=2;let t=r-1,c=!1;for(;n<t;){if(e.charCodeAt(n)===Y.asterisk&&e.charCodeAt(n+1)===Y.slash){n+=2,c=!0;break}n++}return c||(n++,s=dU.UnexpectedEndOfComment),i=e.substring(a,n),o=fU.BlockCommentTrivia}return i+=String.fromCharCode(t),n++,o=fU.Unknown}case Y.minus:if(i+=String.fromCharCode(t),n++,n===r||!vU(e.charCodeAt(n)))return o=fU.Unknown;case Y._0:case Y._1:case Y._2:case Y._3:case Y._4:case Y._5:case Y._6:case Y._7:case Y._8:case Y._9:return i+=u(),o=fU.NumericLiteral;default:for(;n<r&&p(t);)n++,t=e.charCodeAt(n);if(a!==n){switch(i=e.substring(a,n),i){case`true`:return o=fU.TrueKeyword;case`false`:return o=fU.FalseKeyword;case`null`:return o=fU.NullKeyword}return o=fU.Unknown}return i+=String.fromCharCode(t),n++,o=fU.Unknown}}function p(e){if(gU(e)||_U(e))return!1;switch(e){case Y.closeBrace:case Y.closeBracket:case Y.openBrace:case Y.openBracket:case Y.doubleQuote:case Y.colon:case Y.comma:case Y.slash:return!1}return!0}function m(){let e;do e=f();while(e>=fU.LineCommentTrivia&&e<=fU.Trivia);return e}return{setPosition:l,getPosition:()=>n,scan:t?m:f,getToken:()=>o,getTokenValue:()=>i,getTokenOffset:()=>a,getTokenLength:()=>n-a,getTokenError:()=>s}}function gU(e){return e===Y.space||e===Y.tab||e===Y.verticalTab||e===Y.formFeed||e===Y.nonBreakingSpace||e===Y.ogham||e>=Y.enQuad&&e<=Y.zeroWidthSpace||e===Y.narrowNoBreakSpace||e===Y.mathematicalSpace||e===Y.ideographicSpace||e===Y.byteOrderMark}function _U(e){return e===Y.lineFeed||e===Y.carriageReturn||e===Y.lineSeparator||e===Y.paragraphSeparator}function vU(e){return e>=Y._0&&e<=Y._9}var Y;(function(e){e[e.nullCharacter=0]=`nullCharacter`,e[e.maxAsciiCharacter=127]=`maxAsciiCharacter`,e[e.lineFeed=10]=`lineFeed`,e[e.carriageReturn=13]=`carriageReturn`,e[e.lineSeparator=8232]=`lineSeparator`,e[e.paragraphSeparator=8233]=`paragraphSeparator`,e[e.nextLine=133]=`nextLine`,e[e.space=32]=`space`,e[e.nonBreakingSpace=160]=`nonBreakingSpace`,e[e.enQuad=8192]=`enQuad`,e[e.emQuad=8193]=`emQuad`,e[e.enSpace=8194]=`enSpace`,e[e.emSpace=8195]=`emSpace`,e[e.threePerEmSpace=8196]=`threePerEmSpace`,e[e.fourPerEmSpace=8197]=`fourPerEmSpace`,e[e.sixPerEmSpace=8198]=`sixPerEmSpace`,e[e.figureSpace=8199]=`figureSpace`,e[e.punctuationSpace=8200]=`punctuationSpace`,e[e.thinSpace=8201]=`thinSpace`,e[e.hairSpace=8202]=`hairSpace`,e[e.zeroWidthSpace=8203]=`zeroWidthSpace`,e[e.narrowNoBreakSpace=8239]=`narrowNoBreakSpace`,e[e.ideographicSpace=12288]=`ideographicSpace`,e[e.mathematicalSpace=8287]=`mathematicalSpace`,e[e.ogham=5760]=`ogham`,e[e._=95]=`_`,e[e.$=36]=`$`,e[e._0=48]=`_0`,e[e._1=49]=`_1`,e[e._2=50]=`_2`,e[e._3=51]=`_3`,e[e._4=52]=`_4`,e[e._5=53]=`_5`,e[e._6=54]=`_6`,e[e._7=55]=`_7`,e[e._8=56]=`_8`,e[e._9=57]=`_9`,e[e.a=97]=`a`,e[e.b=98]=`b`,e[e.c=99]=`c`,e[e.d=100]=`d`,e[e.e=101]=`e`,e[e.f=102]=`f`,e[e.g=103]=`g`,e[e.h=104]=`h`,e[e.i=105]=`i`,e[e.j=106]=`j`,e[e.k=107]=`k`,e[e.l=108]=`l`,e[e.m=109]=`m`,e[e.n=110]=`n`,e[e.o=111]=`o`,e[e.p=112]=`p`,e[e.q=113]=`q`,e[e.r=114]=`r`,e[e.s=115]=`s`,e[e.t=116]=`t`,e[e.u=117]=`u`,e[e.v=118]=`v`,e[e.w=119]=`w`,e[e.x=120]=`x`,e[e.y=121]=`y`,e[e.z=122]=`z`,e[e.A=65]=`A`,e[e.B=66]=`B`,e[e.C=67]=`C`,e[e.D=68]=`D`,e[e.E=69]=`E`,e[e.F=70]=`F`,e[e.G=71]=`G`,e[e.H=72]=`H`,e[e.I=73]=`I`,e[e.J=74]=`J`,e[e.K=75]=`K`,e[e.L=76]=`L`,e[e.M=77]=`M`,e[e.N=78]=`N`,e[e.O=79]=`O`,e[e.P=80]=`P`,e[e.Q=81]=`Q`,e[e.R=82]=`R`,e[e.S=83]=`S`,e[e.T=84]=`T`,e[e.U=85]=`U`,e[e.V=86]=`V`,e[e.W=87]=`W`,e[e.X=88]=`X`,e[e.Y=89]=`Y`,e[e.Z=90]=`Z`,e[e.ampersand=38]=`ampersand`,e[e.asterisk=42]=`asterisk`,e[e.at=64]=`at`,e[e.backslash=92]=`backslash`,e[e.bar=124]=`bar`,e[e.caret=94]=`caret`,e[e.closeBrace=125]=`closeBrace`,e[e.closeBracket=93]=`closeBracket`,e[e.closeParen=41]=`closeParen`,e[e.colon=58]=`colon`,e[e.comma=44]=`comma`,e[e.dot=46]=`dot`,e[e.doubleQuote=34]=`doubleQuote`,e[e.equals=61]=`equals`,e[e.exclamation=33]=`exclamation`,e[e.greaterThan=62]=`greaterThan`,e[e.lessThan=60]=`lessThan`,e[e.minus=45]=`minus`,e[e.openBrace=123]=`openBrace`,e[e.openBracket=91]=`openBracket`,e[e.openParen=40]=`openParen`,e[e.percent=37]=`percent`,e[e.plus=43]=`plus`,e[e.question=63]=`question`,e[e.semicolon=59]=`semicolon`,e[e.singleQuote=39]=`singleQuote`,e[e.slash=47]=`slash`,e[e.tilde=126]=`tilde`,e[e.backspace=8]=`backspace`,e[e.formFeed=12]=`formFeed`,e[e.byteOrderMark=65279]=`byteOrderMark`,e[e.tab=9]=`tab`,e[e.verticalTab=11]=`verticalTab`})(Y||={});function yU(e,t){let n=[],r={},i,a={value:{},offset:0,length:0,type:`object`,parent:void 0},o=!1;function s(e,t,n,r){a.value=e,a.offset=t,a.length=n,a.type=r,a.colonOffset=void 0,i=a}try{CU(e,{onObjectBegin:(e,a)=>{if(t<=e)throw r;i=void 0,o=t>e,n.push(``)},onObjectProperty:(e,i,a)=>{if(t<i||(s(e,i,a,`property`),n[n.length-1]=e,t<=i+a))throw r},onObjectEnd:(e,a)=>{if(t<=e)throw r;i=void 0,n.pop()},onArrayBegin:(e,a)=>{if(t<=e)throw r;i=void 0,n.push(0)},onArrayEnd:(e,a)=>{if(t<=e)throw r;i=void 0,n.pop()},onLiteralValue:(e,n,i)=>{if(t<n||(s(e,n,i,wU(e)),t<=n+i))throw r},onSeparator:(e,a,s)=>{if(t<=a)throw r;if(e===`:`&&i&&i.type===`property`)i.colonOffset=a,o=!1,i=void 0;else if(e===`,`){let e=n[n.length-1];typeof e==`number`?n[n.length-1]=e+1:(o=!0,n[n.length-1]=``),i=void 0}}})}catch(e){if(e!==r)throw e}return{path:n,previousNode:i,isAtPropertyKey:o,matches:e=>{let t=0;for(let r=0;t<e.length&&r<n.length;r++)if(e[t]===n[r]||e[t]===`*`)t++;else if(e[t]!==`**`)return!1;return t===e.length}}}function bU(e,t=[],n=mU.DEFAULT){let r=null,i=[],a=[];function o(e){Array.isArray(i)?i.push(e):r!==null&&(i[r]=e)}return CU(e,{onObjectBegin:()=>{let e={};o(e),a.push(i),i=e,r=null},onObjectProperty:e=>{r=e},onObjectEnd:()=>{i=a.pop()},onArrayBegin:()=>{let e=[];o(e),a.push(i),i=e,r=null},onArrayEnd:()=>{i=a.pop()},onLiteralValue:o,onError:(e,n,r)=>{t.push({error:e,offset:n,length:r})}},n),i[0]}function xU(e,t=[],n=mU.DEFAULT){let r={type:`array`,offset:-1,length:-1,children:[],parent:void 0};function i(e){r.type===`property`&&(r.length=e-r.offset,r=r.parent)}function a(e){return r.children.push(e),e}CU(e,{onObjectBegin:e=>{r=a({type:`object`,offset:e,length:-1,parent:r,children:[]})},onObjectProperty:(e,t,n)=>{r=a({type:`property`,offset:t,length:-1,parent:r,children:[]}),r.children.push({type:`string`,value:e,offset:t,length:n,parent:r})},onObjectEnd:(e,t)=>{r.length=e+t-r.offset,r=r.parent,i(e+t)},onArrayBegin:(e,t)=>{r=a({type:`array`,offset:e,length:-1,parent:r,children:[]})},onArrayEnd:(e,t)=>{r.length=e+t-r.offset,r=r.parent,i(e+t)},onLiteralValue:(e,t,n)=>{a({type:wU(e),offset:t,length:n,parent:r,value:e}),i(t+n)},onSeparator:(e,t,n)=>{r.type===`property`&&(e===`:`?r.colonOffset=t:e===`,`&&i(t))},onError:(e,n,r)=>{t.push({error:e,offset:n,length:r})}},n);let o=r.children[0];return o&&delete o.parent,o}function SU(e,t){if(!e)return;let n=e;for(let e of t)if(typeof e==`string`){if(n.type!==`object`||!Array.isArray(n.children))return;let t=!1;for(let r of n.children)if(Array.isArray(r.children)&&r.children[0].value===e){n=r.children[1],t=!0;break}if(!t)return}else{let t=e;if(n.type!==`array`||t<0||!Array.isArray(n.children)||t>=n.children.length)return;n=n.children[t]}return n}function CU(e,t,n=mU.DEFAULT){let r=hU(e,!1);function i(e){return e?()=>e(r.getTokenOffset(),r.getTokenLength()):()=>!0}function a(e){return e?t=>e(t,r.getTokenOffset(),r.getTokenLength()):()=>!0}let o=i(t.onObjectBegin),s=a(t.onObjectProperty),c=i(t.onObjectEnd),l=i(t.onArrayBegin),u=i(t.onArrayEnd),d=a(t.onLiteralValue),f=a(t.onSeparator),p=i(t.onComment),m=a(t.onError),h=n&&n.disallowComments,g=n&&n.allowTrailingComma;function _(){for(;;){let e=r.scan();switch(r.getTokenError()){case dU.InvalidUnicode:v(pU.InvalidUnicode);break;case dU.InvalidEscapeCharacter:v(pU.InvalidEscapeCharacter);break;case dU.UnexpectedEndOfNumber:v(pU.UnexpectedEndOfNumber);break;case dU.UnexpectedEndOfComment:h||v(pU.UnexpectedEndOfComment);break;case dU.UnexpectedEndOfString:v(pU.UnexpectedEndOfString);break;case dU.InvalidCharacter:v(pU.InvalidCharacter);break}switch(e){case fU.LineCommentTrivia:case fU.BlockCommentTrivia:h?v(pU.InvalidCommentToken):p();break;case fU.Unknown:v(pU.InvalidSymbol);break;case fU.Trivia:case fU.LineBreakTrivia:break;default:return e}}}function v(e,t=[],n=[]){if(m(e),t.length+n.length>0){let e=r.getToken();for(;e!==fU.EOF;){if(t.indexOf(e)!==-1){_();break}else if(n.indexOf(e)!==-1)break;e=_()}}}function ee(e){let t=r.getTokenValue();return e?d(t):s(t),_(),!0}function te(){switch(r.getToken()){case fU.NumericLiteral:{let e=0;try{e=JSON.parse(r.getTokenValue()),typeof e!=`number`&&(v(pU.InvalidNumberFormat),e=0)}catch{v(pU.InvalidNumberFormat)}d(e);break}case fU.NullKeyword:d(null);break;case fU.TrueKeyword:d(!0);break;case fU.FalseKeyword:d(!1);break;default:return!1}return _(),!0}function ne(){return r.getToken()===fU.StringLiteral?(ee(!1),r.getToken()===fU.ColonToken?(f(`:`),_(),ae()||v(pU.ValueExpected,[],[fU.CloseBraceToken,fU.CommaToken])):v(pU.ColonExpected,[],[fU.CloseBraceToken,fU.CommaToken]),!0):(v(pU.PropertyNameExpected,[],[fU.CloseBraceToken,fU.CommaToken]),!1)}function re(){o(),_();let e=!1;for(;r.getToken()!==fU.CloseBraceToken&&r.getToken()!==fU.EOF;){if(r.getToken()===fU.CommaToken){if(e||v(pU.ValueExpected,[],[]),f(`,`),_(),r.getToken()===fU.CloseBraceToken&&g)break}else e&&v(pU.CommaExpected,[],[]);ne()||v(pU.ValueExpected,[],[fU.CloseBraceToken,fU.CommaToken]),e=!0}return c(),r.getToken()===fU.CloseBraceToken?_():v(pU.CloseBraceExpected,[fU.CloseBraceToken],[]),!0}function ie(){l(),_();let e=!1;for(;r.getToken()!==fU.CloseBracketToken&&r.getToken()!==fU.EOF;){if(r.getToken()===fU.CommaToken){if(e||v(pU.ValueExpected,[],[]),f(`,`),_(),r.getToken()===fU.CloseBracketToken&&g)break}else e&&v(pU.CommaExpected,[],[]);ae()||v(pU.ValueExpected,[],[fU.CloseBracketToken,fU.CommaToken]),e=!0}return u(),r.getToken()===fU.CloseBracketToken?_():v(pU.CloseBracketExpected,[fU.CloseBracketToken],[]),!0}function ae(){switch(r.getToken()){case fU.OpenBracketToken:return ie();case fU.OpenBraceToken:return re();case fU.StringLiteral:return ee(!0);default:return te()}}return _(),r.getToken()===fU.EOF?n.allowEmptyContent?!0:(v(pU.ValueExpected,[],[]),!1):ae()?(r.getToken()!==fU.EOF&&v(pU.EndOfFileExpected,[],[]),!0):(v(pU.ValueExpected,[],[]),!1)}function wU(e){switch(typeof e){case`boolean`:return`boolean`;case`number`:return`number`;case`string`:return`string`;case`object`:if(e){if(Array.isArray(e))return`array`}else return`null`;return`object`;default:return`null`}}function TU(e){return e.scheme===A.vscodeRemote?e.authority:void 0}function EU(e){if(!e)return;let t=e.indexOf(`+`);return t<0?e:e.substr(0,t)}var DU=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,OU=/(&amp;)?(&amp;)([^\s&])/g,kU;(function(e){e[e.Right=0]=`Right`,e[e.Left=1]=`Left`})(kU||={});var AU;(function(e){e[e.Above=0]=`Above`,e[e.Below=1]=`Below`})(AU||={});var jU=class e extends Fj{constructor(e,t,n,r){e.classList.add(`monaco-menu-container`),e.setAttribute(`role`,`presentation`);let i=v_(`div`);i.classList.add(`monaco-menu`),i.setAttribute(`role`,`presentation`),super(i,{orientation:Pj.VERTICAL,actionViewItemProvider:e=>this.doGetActionViewItem(e,n,a),context:n.context,actionRunner:n.actionRunner,ariaLabel:n.ariaLabel,ariaRole:`menu`,focusOnlyEnabledItems:!0,triggerKeys:{keys:[F.Enter,...si||ci?[F.Space]:[]],keyDown:!0}}),this.menuStyles=r,this.menuElement=i,this.actionsList.tabIndex=0,this.initializeOrUpdateStyleSheet(e,r),this._register(RC.addTarget(i)),this._register(L(i,R.KEY_DOWN,e=>{new vp(e).equals(F.Tab)&&e.preventDefault()})),n.enableMnemonics&&this._register(L(i,R.KEY_DOWN,e=>{let t=e.key.toLocaleLowerCase(),n=this.mnemonics.get(t);if(n!==void 0&&(M_.stop(e,!0),n.length===1&&(n[0]instanceof NU&&n[0].container&&this.focusItemByElement(n[0].container),n[0].onClick(e)),n.length>1)){let e=n.shift();e&&e.container&&(this.focusItemByElement(e.container),n.push(e)),this.mnemonics.set(t,n)}})),ci&&this._register(L(i,R.KEY_DOWN,e=>{let t=new vp(e);t.equals(F.Home)||t.equals(F.PageUp)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),M_.stop(e,!0)):(t.equals(F.End)||t.equals(F.PageDown))&&(this.focusedItem=0,this.focusPrevious(),M_.stop(e,!0))})),this._register(L(this.domNode,R.MOUSE_OUT,e=>{let t=e.relatedTarget;Jg(t,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),e.stopPropagation())})),this._register(L(this.actionsList,R.MOUSE_OVER,e=>{let t=e.target;if(!(!t||!Jg(t,this.actionsList)||t===this.actionsList)){for(;t.parentElement!==this.actionsList&&t.parentElement!==null;)t=t.parentElement;if(t.classList.contains(`action-item`)){let e=this.focusedItem;this.setFocusedItem(t),e!==this.focusedItem&&this.updateFocus()}}})),this._register(RC.addTarget(this.actionsList)),this._register(L(this.actionsList,LC.Tap,e=>{let t=e.initialTarget;if(!(!t||!Jg(t,this.actionsList)||t===this.actionsList)){for(;t.parentElement!==this.actionsList&&t.parentElement!==null;)t=t.parentElement;if(t.classList.contains(`action-item`)){let e=this.focusedItem;this.setFocusedItem(t),e!==this.focusedItem&&this.updateFocus()}}}));let a={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new vT(i,{alwaysConsumeMouseWheel:!0,horizontal:iT.Hidden,vertical:iT.Visible,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));let o=this.scrollableElement.getDomNode();o.style.position=``,this.styleScrollElement(o,r),this._register(L(i,LC.Change,e=>{M_.stop(e,!0);let t=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:t-e.translationY})})),this._register(L(o,R.MOUSE_UP,e=>{e.preventDefault()}));let s=Yh(e);i.style.maxHeight=`${Math.max(10,s.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter((e,r)=>n.submenuIds?.has(e.id)?(console.warn(`Found submenu cycle: ${e.id}`),!1):!(e instanceof $x&&(r===t.length-1||r===0||t[r-1]instanceof $x))),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(e=>!(e instanceof PU)).forEach((e,t,n)=>{e.updatePositionInSet(t+1,n.length)})}initializeOrUpdateStyleSheet(t,n){this.styleSheet||(n_(t)?this.styleSheet=xC(t):(e.globalStyleSheet||=xC(),this.styleSheet=e.globalStyleSheet)),this.styleSheet.textContent=LU(n,n_(t))}styleScrollElement(e,t){let n=t.foregroundColor??``,r=t.backgroundColor??``,i=t.borderColor?`1px solid ${t.borderColor}`:``,a=t.shadowColor?`0 2px 8px ${t.shadowColor}`:``;e.style.outline=i,e.style.borderRadius=`5px`,e.style.color=n,e.style.backgroundColor=r,e.style.boxShadow=a}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}get scrollOffset(){return this.menuElement.scrollTop}trigger(e){if(e<=this.viewItems.length&&e>=0){let t=this.viewItems[e];if(t instanceof NU)super.focus(e),t.open(!0);else if(t instanceof MU)super.run(t._action,t._context);else return}}focusItemByElement(e){let t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++)if(e===this.actionsList.children[t]){this.focusedItem=t;break}}updateFocus(e){super.updateFocus(e,!0,!0),this.focusedItem!==void 0&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,n){if(e instanceof $x)return new PU(t.context,e,{icon:!0},this.menuStyles);if(e instanceof eS){let r=new NU(e,e.actions,n,{...t,submenuIds:new Set([...t.submenuIds||[],e.id])},this.menuStyles);if(t.enableMnemonics){let e=r.getMnemonic();if(e&&r.isEnabled()){let t=this.mnemonics.get(e);t===void 0?this.mnemonics.set(e,[r]):t.push(r)}}return r}else{let n=t.getKeyBinding?.(e)?.getLabel(),r={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext,keybinding:n},i=new MU(t.context,e,r,this.menuStyles);if(t.enableMnemonics){let e=i.getMnemonic();if(e&&i.isEnabled()){let t=this.mnemonics.get(e);t===void 0?this.mnemonics.set(e,[i]):t.push(i)}}return i}}},MU=class extends jj{constructor(e,t,n,r){if(n={...n,isMenu:!0,icon:n.icon===void 0?!1:n.icon,label:n.label===void 0?!0:n.label},super(t,t,n),this.menuStyle=r,this.options=n,this.cssClass=``,this.options.label&&n.enableMnemonics){let e=this.action.label;if(e){let t=DU.exec(e);t&&(this.mnemonic=(t[1]?t[1]:t[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new bc(()=>{this.element&&(this._register(L(this.element,R.MOUSE_UP,e=>{if(M_.stop(e,!0),Ef){if(new wp(Yh(this.element),e).rightButton)return;this.onClick(e)}else setTimeout(()=>{this.onClick(e)},0)})),this._register(L(this.element,R.CONTEXT_MENU,e=>{M_.stop(e,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=z(this.element,B(`a.action-menu-item`)),this._action.id===$x.ID?this.item.setAttribute(`role`,`presentation`):(this.item.setAttribute(`role`,`menuitem`),this.mnemonic&&this.item.setAttribute(`aria-keyshortcuts`,`${this.mnemonic}`)),this.check=z(this.item,B(`span.menu-item-check`+lC.asCSSSelector(x.menuSelection))),this.check.setAttribute(`role`,`none`),this.label=z(this.item,B(`span.action-label`)),this.options.label&&this.options.keybinding&&(z(this.item,B(`span.keybinding`)).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item?.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute(`aria-posinset`,`${e}`),this.item.setAttribute(`aria-setsize`,`${t}`))}updateLabel(){if(this.label&&this.options.label){og(this.label);let e=fD(this.action.label);if(e){let t=FU(e);this.options.enableMnemonics||(e=t),this.label.setAttribute(`aria-label`,t.replace(/&&/g,`&`));let n=DU.exec(e);if(n){e=Ma(e),OU.lastIndex=0;let t=OU.exec(e);for(;t&&t[1];)t=OU.exec(e);let r=e=>e.replace(/&amp;&amp;/g,`&amp;`);t?this.label.append(La(r(e.substr(0,t.index)),` `),B(`u`,{"aria-hidden":`true`},t[3]),Ra(r(e.substr(t.index+t[0].length)),` `)):this.label.textContent=r(e).trim(),this.item?.setAttribute(`aria-keyshortcuts`,(n[1]?n[1]:n[3]).toLocaleLowerCase())}else this.label.textContent=e.replace(/&&/g,`&`).trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(` `)),this.options.icon&&this.label?(this.cssClass=this.action.class||``,this.label.classList.add(`icon`),this.cssClass&&this.label.classList.add(...this.cssClass.split(` `)),this.updateEnabled()):this.label&&this.label.classList.remove(`icon`)}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove(`disabled`),this.element.removeAttribute(`aria-disabled`)),this.item&&(this.item.classList.remove(`disabled`),this.item.removeAttribute(`aria-disabled`),this.item.tabIndex=0)):(this.element&&(this.element.classList.add(`disabled`),this.element.setAttribute(`aria-disabled`,`true`)),this.item&&(this.item.classList.add(`disabled`),this.item.setAttribute(`aria-disabled`,`true`)))}updateChecked(){if(!this.item)return;let e=this.action.checked;this.item.classList.toggle(`checked`,!!e),e===void 0?(this.item.setAttribute(`role`,`menuitem`),this.item.setAttribute(`aria-checked`,``)):(this.item.setAttribute(`role`,`menuitemcheckbox`),this.item.setAttribute(`aria-checked`,e?`true`:`false`))}getMnemonic(){return this.mnemonic}applyStyle(){let e=this.element&&this.element.classList.contains(`focused`),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,n=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,r=e&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:``,i=e&&this.menuStyle.selectionBorderColor?`-1px`:``;this.item&&(this.item.style.color=t??``,this.item.style.backgroundColor=n??``,this.item.style.outline=r,this.item.style.outlineOffset=i),this.check&&(this.check.style.color=t??``)}},NU=class extends MU{constructor(e,t,n,r,i){super(e,e,r,i),this.submenuActions=t,this.parentData=n,this.submenuOptions=r,this.mysubmenu=null,this.submenuDisposables=this._register(new C),this.mouseOver=!1,this.expandDirection=r&&r.expandDirection!==void 0?r.expandDirection:{horizontal:kU.Right,vertical:AU.Below},this.showScheduler=new bc(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new bc(()=>{this.element&&!Jg(i_(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add(`monaco-submenu-item`),this.item.tabIndex=0,this.item.setAttribute(`aria-haspopup`,`true`),this.updateAriaExpanded(`false`),this.submenuIndicator=z(this.item,B(`span.submenu-indicator`+lC.asCSSSelector(x.menuSubmenu))),this.submenuIndicator.setAttribute(`aria-hidden`,`true`)),this._register(L(this.element,R.KEY_UP,e=>{let t=new vp(e);(t.equals(F.RightArrow)||t.equals(F.Enter))&&(M_.stop(e,!0),this.createSubmenu(!0))})),this._register(L(this.element,R.KEY_DOWN,e=>{let t=new vp(e);i_()===this.item&&(t.equals(F.RightArrow)||t.equals(F.Enter))&&M_.stop(e,!0)})),this._register(L(this.element,R.MOUSE_OVER,e=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(L(this.element,R.MOUSE_LEAVE,e=>{this.mouseOver=!1})),this._register(L(this.element,R.FOCUS_OUT,e=>{this.element&&!Jg(i_(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}open(e){this.cleanupExistingSubmenu(!1),this.createSubmenu(e)}onClick(e){M_.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded(`false`),this.submenuContainer&&=(this.submenuDisposables.clear(),void 0)}}calculateSubmenuMenuLayout(e,t,n,r){let i={top:0,left:0};return i.left=bj(e.width,t.width,{position:r.horizontal===kU.Right?vj.Before:vj.After,offset:n.left,size:n.width}),i.left>=n.left&&i.left<n.left+n.width&&(n.left+10+t.width<=e.width&&(i.left=n.left+10),n.top+=10,n.height=0),i.top=bj(e.height,t.height,{position:vj.Before,offset:n.top,size:0}),i.top+t.height===n.top&&i.top+n.height+t.height<=e.height&&(i.top+=n.height),i}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded(`true`),this.submenuContainer=z(this.element,B(`div.monaco-submenu`)),this.submenuContainer.classList.add(`menubar-menu-items-holder`,`context-view`);let t=Yh(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode),n=parseFloat(t.paddingTop||`0`)||0;this.submenuContainer.style.position=`fixed`,this.submenuContainer.style.top=`0`,this.submenuContainer.style.left=`0`,this.submenuContainer.style.zIndex=`1`,this.parentData.submenu=new jU(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new tS],this.submenuOptions,this.menuStyle);let r=this.element.getBoundingClientRect(),i={top:r.top-n,left:r.left,height:r.height+2*n,width:r.width},a=this.submenuContainer.getBoundingClientRect(),o=Yh(this.element),{top:s,left:c}=this.calculateSubmenuMenuLayout(new Pg(o.innerWidth,o.innerHeight),Pg.lift(a),i,this.expandDirection);this.submenuContainer.style.left=`${c-a.left}px`,this.submenuContainer.style.top=`${s-a.top}px`,this.submenuDisposables.add(L(this.submenuContainer,R.KEY_UP,e=>{new vp(e).equals(F.LeftArrow)&&(M_.stop(e,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(L(this.submenuContainer,R.KEY_DOWN,e=>{new vp(e).equals(F.LeftArrow)&&M_.stop(e,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){this.item&&this.item?.setAttribute(`aria-expanded`,e)}applyStyle(){super.applyStyle();let e=this.element&&this.element.classList.contains(`focused`)&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=e??``)}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&=(this.mysubmenu.dispose(),null),this.submenuContainer&&=void 0}},PU=class extends Mj{constructor(e,t,n,r){super(e,t,n),this.menuStyles=r}render(e){super.render(e),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?`${this.menuStyles.separatorColor}`:``)}};function FU(e){let t=DU,n=t.exec(e);if(!n)return e;let r=!n[1];return e.replace(t,r?`$2$3`:``).trim()}function IU(e){let t=ze()[e.id];return`.codicon-${e.id}:before { content: '\\${t.toString(16)}'; }`}function LU(e,t){let n=`
.monaco-menu {
    font-size: 13px;
    border-radius: 5px;
    min-width: 160px;
}

${IU(x.menuSelection)}
${IU(x.menuSubmenu)}

.monaco-menu .monaco-action-bar {
    text-align: right;
    overflow: hidden;
    white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
    display: flex;
    margin: 0 auto;
    padding: 0;
    width: 100%;
    justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
    display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
    flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
    cursor: pointer;
    display: inline-block;
    transition: transform 50ms ease;
    position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
    cursor: default;
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
    display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
    display: flex;
    align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
    font-size: 11px;
    margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
    color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
    text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
    display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
    display: block;
    border-bottom: 1px solid var(--vscode-menu-separatorBackground);
    padding-top: 1px;
    padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
    margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
    overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
    flex: 1;
    max-width: 170px;
    min-width: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
    margin-left: 0;
    overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
    display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
    padding: 0;
    transform: none;
    display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
    transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
    flex: 1 1 auto;
    display: flex;
    height: 2em;
    align-items: center;
    position: relative;
    margin: 0 4px;
    border-radius: 4px;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
    opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
    flex: 1 1 auto;
    text-decoration: none;
    padding: 0 1em;
    background: none;
    font-size: 12px;
    line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
    display: inline-block;
    flex: 2 1 auto;
    padding: 0 1em;
    text-align: right;
    font-size: 12px;
    line-height: 1;
    opacity: 0.7;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
    height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
    font-size: 16px !important;
    display: flex;
    align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
    margin-left: auto;
    margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
    opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
    display: inline-block;
    box-sizing: border-box;
    margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
    position: static;
    overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
    position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
    width: 100%;
    height: 0px !important;
    opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
    padding: 0.7em 1em 0.1em 1em;
    font-weight: bold;
    opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
    color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
    position: absolute;
    visibility: hidden;
    width: 1em;
    height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
    visibility: visible;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
    outline: 0;
    border: none;
    animation: fadeIn 0.083s linear;
    -webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
    outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
    box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
    background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
    padding: 4px 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
    height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
    font-size: inherit;
    padding: 0 2em;
    max-height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
    font-size: inherit;
    width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
    font-size: inherit;
    margin: 5px 0 !important;
    padding: 0;
    border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
    margin-left: 0;
    margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
    font-size: 60%;
    padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
    height: 100%;
    mask-size: 10px 10px;
    -webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
    cursor: default;
}`;if(t){n+=`
            /* Arrows */
            .monaco-scrollable-element > .scrollbar > .scra {
                cursor: pointer;
                font-size: 11px !important;
            }

            .monaco-scrollable-element > .visible {
                opacity: 1;

                /* Background rule added for IE9 - to allow clicks on dom node */
                background:rgba(0,0,0,0);

                transition: opacity 100ms linear;
            }
            .monaco-scrollable-element > .invisible {
                opacity: 0;
                pointer-events: none;
            }
            .monaco-scrollable-element > .invisible.fade {
                transition: opacity 800ms linear;
            }

            /* Scrollable Content Inset Shadow */
            .monaco-scrollable-element > .shadow {
                position: absolute;
                display: none;
            }
            .monaco-scrollable-element > .shadow.top {
                display: block;
                top: 0;
                left: 3px;
                height: 3px;
                width: 100%;
            }
            .monaco-scrollable-element > .shadow.left {
                display: block;
                top: 3px;
                left: 0;
                height: 100%;
                width: 3px;
            }
            .monaco-scrollable-element > .shadow.top-left-corner {
                display: block;
                top: 0;
                left: 0;
                height: 3px;
                width: 3px;
            }
            /* Fix for https://github.com/microsoft/vscode/issues/103170 */
            .monaco-menu .action-item .monaco-submenu {
                z-index: 1;
            }
        `;let t=e.scrollbarShadow;t&&(n+=`
                .monaco-scrollable-element > .shadow.top {
                    box-shadow: ${t} 0 6px 6px -6px inset;
                }

                .monaco-scrollable-element > .shadow.left {
                    box-shadow: ${t} 6px 0 6px -6px inset;
                }

                .monaco-scrollable-element > .shadow.top.left {
                    box-shadow: ${t} 6px 6px 6px -6px inset;
                }
            `);let r=e.scrollbarSliderBackground;r&&(n+=`
                .monaco-scrollable-element > .scrollbar > .slider {
                    background: ${r};
                }
            `);let i=e.scrollbarSliderHoverBackground;i&&(n+=`
                .monaco-scrollable-element > .scrollbar > .slider:hover {
                    background: ${i};
                }
            `);let a=e.scrollbarSliderActiveBackground;a&&(n+=`
                .monaco-scrollable-element > .scrollbar > .slider.active {
                    background: ${a};
                }
            `)}return n}var RU;(function(e){e[e.Smooth=0]=`Smooth`,e[e.Immediate=1]=`Immediate`})(RU||={});function zU(e){return!!e&&typeof e.id==`string`}var BU={ICodeEditor:`vs.editor.ICodeEditor`,IDiffEditor:`vs.editor.IDiffEditor`},VU;(function(e){e.CompositionStart=`compositionStart`,e.CompositionEnd=`compositionEnd`,e.Type=`type`,e.ReplacePreviousChar=`replacePreviousChar`,e.CompositionType=`compositionType`,e.Paste=`paste`,e.Cut=`cut`})(VU||={}),s({});var HU=B,UU;(function(e){e[e.LEFT=0]=`LEFT`,e[e.RIGHT=1]=`RIGHT`,e[e.BELOW=2]=`BELOW`,e[e.ABOVE=3]=`ABOVE`})(UU||={});var WU=class extends w{constructor(e){super(),this.containerDomNode=v_(`div`),this.containerDomNode.className=`monaco-hover`,this.containerDomNode.classList.toggle(`fade-in`,!!e),this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute(`role`,`tooltip`),this.contentsDomNode=v_(`div`),this.contentsDomNode.className=`monaco-hover-content`,this.scrollbar=this._register(new vT(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}},GU=class e extends w{static render(t,n,r){return new e(t,n,r)}constructor(e,t,n){super(),this.actionLabel=t.label,this.actionKeybindingLabel=n,this.actionContainer=z(e,HU(`div.action-container`)),this.actionContainer.setAttribute(`tabindex`,`0`),this.action=z(this.actionContainer,HU(`a.action`)),this.action.setAttribute(`role`,`button`),t.iconClass&&z(this.action,HU(`span.icon`)).classList.add(...t.iconClass.split(` `)),this.actionRenderedLabel=n?`${t.label} (${n})`:t.label;let r=z(this.action,HU(`span`));r.textContent=this.actionRenderedLabel,this._store.add(new qU(this.actionContainer,t.run)),this._store.add(new JU(this.actionContainer,t.run,[F.Enter,F.Space])),this.setEnabled(!0)}setEnabled(e){e?(this.actionContainer.classList.remove(`disabled`),this.actionContainer.removeAttribute(`aria-disabled`)):(this.actionContainer.classList.add(`disabled`),this.actionContainer.setAttribute(`aria-disabled`,`true`))}};function KU(e,t){return e&&t?D(16,`Inspect this in the accessible view with {0}.`,t):e?D(17,`Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding.`):``}var qU=class extends w{constructor(e,t){super(),this._register(L(e,R.CLICK,n=>{n.stopPropagation(),n.preventDefault(),t(e)}))}},JU=class extends w{constructor(e,t,n){super(),this._register(L(e,R.KEY_DOWN,r=>{let i=new vp(r);n.some(e=>i.equals(e))&&(r.stopPropagation(),r.preventDefault(),t(e))}))}},YU=V(`productService`),XU;(function(e){e.Extensions=`Extensions`,e.IntegratedTerminal=`IntegratedTerminal`,e.InteractiveSession=`InteractiveSession`,e.Telemetry=`Telemetry`,e.Update=`Update`})(XU||={});var ZU=`extensions.user.cache`,QU=`extensions.builtin.cache`,$U=`undefined_publisher`,eW=[`ui`,`workspace`,`web`];function tW(e){if(typeof e==`object`&&e&&e.supported!==!0)return e.description}var nW=[`AI`,`Azure`,`Chat`,`Data Science`,`Debuggers`,`Extension Packs`,`Education`,`Formatters`,`Keymaps`,`Language Packs`,`Linters`,`Machine Learning`,`Notebooks`,`Programming Languages`,`SCM Providers`,`Snippets`,`Testing`,`Themes`,`Visualization`,`Other`],rW;(function(e){e[e.System=0]=`System`,e[e.User=1]=`User`})(rW||={});var iW;(function(e){e.WIN32_X64=`win32-x64`,e.WIN32_ARM64=`win32-arm64`,e.LINUX_X64=`linux-x64`,e.LINUX_ARM64=`linux-arm64`,e.LINUX_ARMHF=`linux-armhf`,e.ALPINE_X64=`alpine-x64`,e.ALPINE_ARM64=`alpine-arm64`,e.DARWIN_X64=`darwin-x64`,e.DARWIN_ARM64=`darwin-arm64`,e.WEB=`web`,e.UNIVERSAL=`universal`,e.UNKNOWN=`unknown`,e.UNDEFINED=`undefined`})(iW||={});var aW=class{constructor(e){this.value=e,this._lower=e.toLowerCase()}static equals(e,t){return e==null?t==null:t==null?!1:typeof e==`string`||typeof t==`string`?eo(typeof e==`string`?e:e.value,typeof t==`string`?t:t.value):e._lower===t._lower}static toKey(e){return typeof e==`string`?e.toLowerCase():e._lower}},oW=class{get size(){return this._set.size}constructor(e){if(this._set=new Set,e)for(let t of e)this.add(t)}add(e){this._set.add(aW.toKey(e))}delete(e){return this._set.delete(aW.toKey(e))}has(e){return this._set.has(aW.toKey(e))}},sW=class{constructor(){this._map=new Map}clear(){this._map.clear()}delete(e){this._map.delete(aW.toKey(e))}get(e){return this._map.get(aW.toKey(e))}has(e){return this._map.has(aW.toKey(e))}set(e,t){this._map.set(aW.toKey(e),t)}values(){return this._map.values()}forEach(e){this._map.forEach(e)}[Symbol.iterator](){return this._map[Symbol.iterator]()}},cW=class extends Error{constructor(e,t,n){super(`Error in extension ${aW.toKey(e)}: ${n??t.message}`,{cause:t}),this.name=`ExtensionError`,this.extension=e}};function lW(e){return uW(e)}function uW(e){return e.contributes&&e.contributes.localizations?e.contributes.localizations.length>0:!1}function dW(e){return e.contributes&&e.contributes.authentication?e.contributes.authentication.length>0:!1}function fW(e,t){if(t){let n=`onResolveRemoteAuthority:${EU(t)}`;return!!e.activationEvents?.includes(n)}return!1}function pW(e){return e.map(e=>{let[t,n]=e.split(`@`);return{proposalName:t,version:n?parseInt(n):void 0}})}function mW(e){return e.map(e=>e.split(`@`)[0])}var hW=`^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$`,gW=new RegExp(hW),_W=`__web_extension`,vW=`skipPublisherTrust`,yW=`extensionInstallSource`,bW=`dependecyOrPackExtensionInstall`,xW;(function(e){e.COMMAND=`command`,e.SETTINGS_SYNC=`settingsSync`})(xW||={});function SW(e){switch(e){case iW.WIN32_X64:return`Windows 64 bit`;case iW.WIN32_ARM64:return`Windows ARM`;case iW.LINUX_X64:return`Linux 64 bit`;case iW.LINUX_ARM64:return`Linux ARM 64`;case iW.LINUX_ARMHF:return`Linux ARM`;case iW.ALPINE_X64:return`Alpine Linux 64 bit`;case iW.ALPINE_ARM64:return`Alpine ARM 64`;case iW.DARWIN_X64:return`Mac`;case iW.DARWIN_ARM64:return`Mac Silicon`;case iW.WEB:return`Web`;case iW.UNIVERSAL:return iW.UNIVERSAL;case iW.UNKNOWN:return iW.UNKNOWN;case iW.UNDEFINED:return iW.UNDEFINED}}function CW(e){switch(e){case iW.WIN32_X64:return iW.WIN32_X64;case iW.WIN32_ARM64:return iW.WIN32_ARM64;case iW.LINUX_X64:return iW.LINUX_X64;case iW.LINUX_ARM64:return iW.LINUX_ARM64;case iW.LINUX_ARMHF:return iW.LINUX_ARMHF;case iW.ALPINE_X64:return iW.ALPINE_X64;case iW.ALPINE_ARM64:return iW.ALPINE_ARM64;case iW.DARWIN_X64:return iW.DARWIN_X64;case iW.DARWIN_ARM64:return iW.DARWIN_ARM64;case iW.WEB:return iW.WEB;case iW.UNIVERSAL:return iW.UNIVERSAL;default:return iW.UNKNOWN}}function wW(e,t){switch(e){case ri.Windows:return t===`x64`?iW.WIN32_X64:t===`arm64`?iW.WIN32_ARM64:iW.UNKNOWN;case ri.Linux:return t===`x64`?iW.LINUX_X64:t===`arm64`?iW.LINUX_ARM64:t===`arm`?iW.LINUX_ARMHF:iW.UNKNOWN;case`alpine`:return t===`x64`?iW.ALPINE_X64:t===`arm64`?iW.ALPINE_ARM64:iW.UNKNOWN;case ri.Mac:return t===`x64`?iW.DARWIN_X64:t===`arm64`?iW.DARWIN_ARM64:iW.UNKNOWN;case ri.Web:return iW.WEB}}function TW(e,t){return t===iW.WEB&&!e.includes(iW.WEB)}function EW(e,t,n){return TW(t,n)?!1:e===iW.UNDEFINED||e===iW.UNIVERSAL?!0:e===iW.UNKNOWN?!1:e===n}function DW(e){let t=e;return!!t&&typeof t==`object`&&typeof t.id==`string`&&(!t.uuid||typeof t.uuid==`string`)}var OW;(function(e){e.NoneOrRelevance=`NoneOrRelevance`,e.LastUpdatedDate=`LastUpdatedDate`,e.Title=`Title`,e.PublisherName=`PublisherName`,e.InstallCount=`InstallCount`,e.PublishedDate=`PublishedDate`,e.AverageRating=`AverageRating`,e.WeightedRating=`WeightedRating`})(OW||={});var kW;(function(e){e[e.Default=0]=`Default`,e[e.Ascending=1]=`Ascending`,e[e.Descending=2]=`Descending`})(kW||={});var AW;(function(e){e.Category=`Category`,e.ExtensionId=`ExtensionId`,e.ExtensionName=`ExtensionName`,e.ExcludeWithFlags=`ExcludeWithFlags`,e.Featured=`Featured`,e.SearchText=`SearchText`,e.Tag=`Tag`,e.Target=`Target`})(AW||={});var jW;(function(e){e.Install=`install`,e.Uninstall=`uninstall`})(jW||={});var MW;(function(e){e[e.None=1]=`None`,e[e.Install=2]=`Install`,e[e.Update=3]=`Update`,e[e.Migrate=4]=`Migrate`})(MW||={});var NW;(function(e){e.Timeout=`Timeout`,e.Cancelled=`Cancelled`,e.ClientError=`ClientError`,e.ServerError=`ServerError`,e.Failed=`Failed`,e.DownloadFailedWriting=`DownloadFailedWriting`,e.Offline=`Offline`})(NW||={});var PW=class extends Error{constructor(e,t){super(e),this.code=t,this.name=t}},FW;(function(e){e.NotFound=`NotFound`,e.Unsupported=`Unsupported`,e.Deprecated=`Deprecated`,e.Malicious=`Malicious`,e.Incompatible=`Incompatible`,e.IncompatibleApi=`IncompatibleApi`,e.IncompatibleTargetPlatform=`IncompatibleTargetPlatform`,e.ReleaseVersionNotFound=`ReleaseVersionNotFound`,e.Invalid=`Invalid`,e.Download=`Download`,e.DownloadSignature=`DownloadSignature`,e.DownloadFailedWriting=`DownloadFailedWriting`,e.UpdateMetadata=`UpdateMetadata`,e.Extract=`Extract`,e.Scanning=`Scanning`,e.ScanningExtension=`ScanningExtension`,e.ReadRemoved=`ReadRemoved`,e.UnsetRemoved=`UnsetRemoved`,e.Delete=`Delete`,e.Rename=`Rename`,e.IntializeDefaultProfile=`IntializeDefaultProfile`,e.AddToProfile=`AddToProfile`,e.InstalledExtensionNotFound=`InstalledExtensionNotFound`,e.PostInstall=`PostInstall`,e.CorruptZip=`CorruptZip`,e.IncompleteZip=`IncompleteZip`,e.PackageNotSigned=`PackageNotSigned`,e.SignatureVerificationInternal=`SignatureVerificationInternal`,e.SignatureVerificationFailed=`SignatureVerificationFailed`,e.NotAllowed=`NotAllowed`,e.Gallery=`Gallery`,e.Cancelled=`Cancelled`,e.Unknown=`Unknown`,e.Internal=`Internal`})(FW||={});var IW;(function(e){e.NotSigned=`NotSigned`,e.Success=`Success`,e.RequiredArgumentMissing=`RequiredArgumentMissing`,e.InvalidArgument=`InvalidArgument`,e.PackageIsUnreadable=`PackageIsUnreadable`,e.UnhandledException=`UnhandledException`,e.SignatureManifestIsMissing=`SignatureManifestIsMissing`,e.SignatureManifestIsUnreadable=`SignatureManifestIsUnreadable`,e.SignatureIsMissing=`SignatureIsMissing`,e.SignatureIsUnreadable=`SignatureIsUnreadable`,e.CertificateIsUnreadable=`CertificateIsUnreadable`,e.SignatureArchiveIsUnreadable=`SignatureArchiveIsUnreadable`,e.FileAlreadyExists=`FileAlreadyExists`,e.SignatureArchiveIsInvalidZip=`SignatureArchiveIsInvalidZip`,e.SignatureArchiveHasSameSignatureFile=`SignatureArchiveHasSameSignatureFile`,e.PackageIntegrityCheckFailed=`PackageIntegrityCheckFailed`,e.SignatureIsInvalid=`SignatureIsInvalid`,e.SignatureManifestIsInvalid=`SignatureManifestIsInvalid`,e.SignatureIntegrityCheckFailed=`SignatureIntegrityCheckFailed`,e.EntryIsMissing=`EntryIsMissing`,e.EntryIsTampered=`EntryIsTampered`,e.Untrusted=`Untrusted`,e.CertificateRevoked=`CertificateRevoked`,e.SignatureIsNotValid=`SignatureIsNotValid`,e.UnknownError=`UnknownError`,e.PackageIsInvalidZip=`PackageIsInvalidZip`,e.SignatureArchiveHasTooManyEntries=`SignatureArchiveHasTooManyEntries`})(IW||={});var LW=class extends Error{constructor(e,t){super(e),this.code=t,this.name=t}},RW=`extensionsIdentifiers/disabled`,zW=`extensionsIdentifiers/enabled`;async function BW(e,t){let n;try{n=await t.resolve(e)}catch(e){if(e.fileOperationResult===Sb.FILE_NOT_FOUND)return 0;throw e}return n.children?(await Promise.all(n.children.map(e=>BW(e.resource,t)))).reduce((e,t)=>e+t,0):n.size??0}var VW=Nr(1828,`Extensions`),HW=Nr(1829,`Preferences`),UW=`extensions.allowed`,WW=`extensions.verifySignature`,GW=`extensions.requestTimeout`;hr.as(_P.Configuration).registerConfiguration({id:`extensions`,order:30,title:D(1830,`Extensions`),type:`object`,properties:{[UW]:{type:`object`,markdownDescription:D(1831,`Specify a list of extensions that are allowed to use. This helps maintain a secure and consistent development environment by restricting the use of unauthorized extensions. For more information on how to configure this setting, please visit the [Configure Allowed Extensions](https://aka.ms/vscode/enterprise/extensions/allowed) section.`),default:`*`,defaultSnippets:[{body:{},description:D(1832,`No extensions are allowed.`)},{body:{"*":!0},description:D(1833,`All extensions are allowed.`)}],scope:vP.APPLICATION,policy:{name:`AllowedExtensions`,category:XU.Extensions,minimumVersion:`1.96`,localization:{description:{key:`extensions.allowed.policy`,value:D(1834,`Specify a list of extensions that are allowed to use. This helps maintain a secure and consistent development environment by restricting the use of unauthorized extensions. More information: https://aka.ms/vscode/enterprise/extensions/allowed`)}}},additionalProperties:!1,patternProperties:{"([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$":{anyOf:[{type:[`boolean`,`string`],enum:[!0,!1,`stable`],description:D(1835,`Allow or disallow the extension.`),enumDescriptions:[D(1836,`Extension is allowed.`),D(1837,`Extension is not allowed.`),D(1838,`Allow only stable versions of the extension.`)]},{type:`array`,items:{type:`string`},description:D(1839,"Allow or disallow specific versions of the extension. To specifcy a platform specific version, use the format `platform@1.2.3`, e.g. `win32-x64@1.2.3`. Supported platforms are `win32-x64`, `win32-arm64`, `linux-x64`, `linux-arm64`, `linux-armhf`, `alpine-x64`, `alpine-arm64`, `darwin-x64`, `darwin-arm64`")}]},"([a-z0-9A-Z][a-z0-9-A-Z]*)$":{type:[`boolean`,`string`],enum:[!0,!1,`stable`],description:D(1840,`Allow or disallow all extensions from the publisher.`),enumDescriptions:[D(1841,`All extensions from the publisher are allowed.`),D(1842,`All extensions from the publisher are not allowed.`),D(1843,`Allow only stable versions of the extensions from the publisher.`)]},"\\*":{type:`boolean`,enum:[!0,!1],description:D(1844,`Allow or disallow all extensions.`),enumDescriptions:[D(1845,`Allow all extensions.`),D(1846,`Disallow all extensions.`)]}}}}});function KW(e,t){return e?t?.capabilities.signing?.allPrivateRepositorySigned===!0:t?.capabilities.signing?.allPublicRepositorySigned===!0}var qW=`telemetry.telemetryLevel`,JW=`telemetry.enableCrashReporter`,YW=`telemetry.enableTelemetry`,XW;(function(e){e[e.NONE=0]=`NONE`,e[e.CRASH=1]=`CRASH`,e[e.ERROR=2]=`ERROR`,e[e.USAGE=3]=`USAGE`})(XW||={});var ZW;(function(e){e.OFF=`off`,e.CRASH=`crash`,e.ERROR=`error`,e.ON=`all`})(ZW||={});var QW=class{constructor(e){this.value=e,this.isTrustedTelemetryValue=!0}};new class{constructor(){this.telemetryLevel=XW.NONE,this.sessionId=`someValue.sessionId`,this.machineId=`someValue.machineId`,this.sqmId=`someValue.sqmId`,this.devDeviceId=`someValue.devDeviceId`,this.firstSessionDate=`someValue.firstSessionDate`,this.sendErrorTelemetry=!1}publicLog(){}publicLog2(){}publicLogError(){}publicLogError2(){}setExperimentProperty(){}};var $W=class{async publicLog(e,t,n){}async publicLogError(e,t,n){}},eG=`telemetry`,tG={id:eG,name:D(2084,`Telemetry`)};function nG(e,t){return!t.isBuilt&&!t.disableTelemetry?!0:!(t.disableTelemetry||!e.enableTelemetry)}function rG(e,t){return t.extensionTestsLocationURI?!0:!(t.isBuilt||t.disableTelemetry||e.enableTelemetry&&e.aiConfig?.ariaKey)}function iG(e){let t=e.getValue(qW),n=e.getValue(JW);if(e.getValue(`telemetry.enableTelemetry`)===!1||n===!1)return XW.NONE;switch(t??ZW.ON){case ZW.ON:return XW.USAGE;case ZW.ERROR:return XW.ERROR;case ZW.CRASH:return XW.CRASH;case ZW.OFF:return XW.NONE}}function aG(e,t){if(!e)return`none`;let n=EU(e),r=t?.remoteExtensionTips;if(r&&Object.prototype.hasOwnProperty.call(r,n))return n;let i=t?.virtualWorkspaceExtensionTips;return i&&Object.prototype.hasOwnProperty.call(i,n)?n:`other`}function oG(e,t){if(!e||!e.includes(`/`)&&!e.includes(`\\`))return e;let n=e,r=[];for(let n of t)for(;;){let t=n.exec(e);if(!t)break;r.push([t.index,n.lastIndex])}let i=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,a=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g,o=0;for(n=``;;){let t=a.exec(e);if(!t)break;let s=r.some(([e,n])=>t.index<n&&e<a.lastIndex);!i.test(t[0])&&!s&&(n+=e.substring(o,t.index)+`<REDACTED: user-file-path>`,o=a.lastIndex)}return o<e.length&&(n+=e.substr(o)),n}function sG(e){if(!e)return e;for(let t of[{label:`URL`,regex:/[a-zA-Z][a-zA-Z0-9+.-]*:\/\/[^\s]*/},{label:`Google API Key`,regex:/AIza[A-Za-z0-9_\\\-]{35}/},{label:`JWT`,regex:/eyJ[0eXAiOiJKV1Qi|hbGci|a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+/},{label:`Slack Token`,regex:/xox[pbar]\-[A-Za-z0-9]/},{label:`GitHub Token`,regex:/(gh[psuro]_[a-zA-Z0-9]{36}|github_pat_[a-zA-Z0-9]{22}_[a-zA-Z0-9]{59})/},{label:`Generic Secret`,regex:/(key|token|sig|secret|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/i},{label:`CLI Credentials`,regex:/((login|psexec|(certutil|psexec)\.exe).{1,50}(\s-u(ser(name)?)?\s+.{3,100})?\s-(admin|user|vm|root)?p(ass(word)?)?\s+["']?[^$\-\/\s]|(^|[\s\r\n\\])net(\.exe)?.{1,5}(user\s+|share\s+\/user:| user -? secrets ? set) \s + [^ $\s \/])/},{label:`Microsoft Entra ID`,regex:/eyJ(?:0eXAiOiJKV1Qi|hbGci|[a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+\.)/},{label:`Email`,regex:/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/}])if(t.regex.test(e))return`<REDACTED: ${t.label}>`;return e}function cG(e,t){return e?ek(e,e=>{if(e instanceof QW||Object.hasOwnProperty.call(e,`isTrustedTelemetryValue`))return e.value;if(typeof e==`string`){let n=e.replaceAll(`%20`,` `);n=oG(n,t);for(let e of t)n=n.replace(e,``);return n=sG(n),n}}):{}}function lG(e,t){return e.uuid&&t.uuid?e.uuid===t.uuid:e.id===t.id?!0:Ya(e.id,t.id)===0}var uG=/^([^.]+\..+)-(\d+\.\d+\.\d+)(-(.+))?$/,dG=class e{static create(t){let n=t.manifest?t.manifest.version:t.version,r=t.manifest?t.targetPlatform:t.properties.targetPlatform;return new e(t.identifier,n,r)}static parse(t){let n=uG.exec(t);return n&&n[1]&&n[2]?new e({id:n[1]},n[2],n[4]||void 0):null}constructor(e,t,n=iW.UNDEFINED){this.identifier=e,this.version=t,this.targetPlatform=n,this.id=e.id}toString(){return`${this.id}-${this.version}${this.targetPlatform===iW.UNDEFINED?``:`-${this.targetPlatform}`}`}equals(t){return t instanceof e?lG(this,t)&&this.version===t.version&&this.targetPlatform===t.targetPlatform:!1}},fG=/^([^.]+\..+)@((prerelease)|(\d+\.\d+\.\d+(-.*)?))$/;function pG(e){let t=fG.exec(e);return t&&t[1]?[hG(t[1]),t[2]]:[hG(e),void 0]}function mG(e,t){return`${e}.${t}`}function hG(e){return e.toLowerCase()}function gG(e,t){return hG(mG(e??`undefined_publisher`,t))}function _G(e,t){let n=[],r=e=>{for(let r of n)if(r.some(n=>lG(t(n),t(e))))return r;return null};for(let t of e){let e=r(t);e?e.push(t):n.push([t])}return n}function vG(e){return{id:e.identifier.id,name:e.manifest.name,galleryId:null,publisherId:e.publisherId,publisherName:e.manifest.publisher,publisherDisplayName:e.publisherDisplayName,dependencies:e.manifest.extensionDependencies&&e.manifest.extensionDependencies.length>0}}function yG(e){return{id:new QW(e.identifier.id),name:new QW(e.name),extensionVersion:e.version,galleryId:e.identifier.uuid,publisherId:e.publisherId,publisherName:e.publisher,publisherDisplayName:e.publisherDisplayName,isPreReleaseVersion:e.properties.isPreReleaseVersion,dependencies:!!(e.properties.dependencies&&e.properties.dependencies.length>0),isSigned:e.isSigned,...e.telemetryData}}var bG=new aW(`pprice.better-merge`);function xG(e,t){let n=[],r=t.manifest.extensionDependencies?.slice(0)??[];for(;r.length;){let t=r.shift();if(t&&n.every(e=>!lG(e.identifier,{id:t}))){let i=e.filter(e=>lG(e.identifier,{id:t}));i.length===1&&(n.push(i[0]),r.push(...i[0].manifest.extensionDependencies?.slice(0)??[]))}}return n}async function SG(e,t){if(!ci)return!1;let n;try{n=(await e.readFile(k.file(`/etc/os-release`))).value.toString()}catch{try{n=(await e.readFile(k.file(`/usr/lib/os-release`))).value.toString()}catch(e){t.debug(`Error while getting the os-release file.`,oe(e))}}return!!n&&(n.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]===`alpine`}async function CG(e,t){let n=wW(await SG(e,t)?`alpine`:_i,Bi);return t.debug(`ComputeTargetPlatform:`,n),n}function wG(e,t){return TG(e,t)!==void 0}function TG(e,t){return t.find(({extensionOrPublisher:t})=>ge(t)?Ya(e.id.split(`.`)[0],t)===0:lG(e,t))}var EG=new class{constructor(){this._generators=new Map,this._cache=new WeakMap}register(e,t){this._generators.set(e,t)}readActivationEvents(e){return this._cache.has(e)||this._cache.set(e,this._readActivationEvents(e)),this._cache.get(e)}createActivationEventsMap(e){let t=Object.create(null);for(let n of e){let e=this.readActivationEvents(n);e.length>0&&(t[aW.toKey(n.identifier)]=e)}return t}_readActivationEvents(e){if(e.main===void 0&&e.browser===void 0)return[];let t=Array.isArray(e.activationEvents)?e.activationEvents.slice(0):[];for(let n=0;n<t.length;n++)t[n]===`onUri`&&(t[n]=`onUri:${aW.toKey(e.identifier)}`);if(!e.contributes)return t;for(let n in e.contributes){let r=this._generators.get(n);if(!r)continue;let i=e.contributes[n],a=Array.isArray(i)?i:[i];try{t.push(...r(a))}catch(e){p(e)}}return t}},DG=Object.freeze({identifier:new aW(`nullExtensionDescription`),name:`Null Extension Description`,version:`0.0.0`,publisher:`vscode`,engines:{vscode:``},extensionLocation:k.parse(`void:location`),isBuiltin:!1,targetPlatform:iW.UNDEFINED,isUserBuiltin:!1,isUnderDevelopment:!1,preRelease:!1}),OG=`extensions.webWorker`,kG=class{constructor(e){this.dependency=e}},AG;(function(e){e[e.EagerAutoStart=1]=`EagerAutoStart`,e[e.EagerManualStart=2]=`EagerManualStart`,e[e.LazyAutoStart=3]=`LazyAutoStart`})(AG||={});var jG=class{get versionId(){return this._versionId}get allExtensions(){return this._allExtensions}get myExtensions(){return this._myExtensions}constructor(e,t,n){this._versionId=e,this._allExtensions=t.slice(0),this._myExtensions=n.slice(0),this._myActivationEvents=null}toSnapshot(){return{versionId:this._versionId,allExtensions:this._allExtensions,myExtensions:this._myExtensions,activationEvents:EG.createActivationEventsMap(this._allExtensions)}}set(e,t,n){if(this._versionId>e)throw Error(`ExtensionHostExtensions: invalid versionId ${e} (current: ${this._versionId})`);let r=[],i=[],a=[],o=[],s=MG(this._allExtensions),c=MG(t),l=(e,t)=>e.extensionLocation.toString()===t.extensionLocation.toString()||e.isBuiltin===t.isBuiltin||e.isUserBuiltin===t.isUserBuiltin||e.isUnderDevelopment===t.isUnderDevelopment;for(let e of this._allExtensions){let t=c.get(e.identifier);if(!t){r.push(e.identifier),s.delete(e.identifier);continue}if(!l(e,t)){r.push(e.identifier),s.delete(e.identifier);continue}}for(let e of t){let t=s.get(e.identifier);if(!t){i.push(e);continue}if(!l(t,e)){r.push(t.identifier),s.delete(t.identifier);continue}}let u=new oW(this._myExtensions),d=new oW(n);for(let e of this._myExtensions)d.has(e)||a.push(e);for(let e of n)u.has(e)||o.push(e);let f={versionId:e,toRemove:r,toAdd:i,addActivationEvents:EG.createActivationEventsMap(i),myToRemove:a,myToAdd:o};return this.delta(f),f}delta(e){if(this._versionId>=e.versionId)return null;let{toRemove:t,toAdd:n,myToRemove:r,myToAdd:i}=e,a=new oW(t),o=new oW(r);for(let e=0;e<this._allExtensions.length;e++)a.has(this._allExtensions[e].identifier)&&(this._allExtensions.splice(e,1),e--);for(let e=0;e<this._myExtensions.length;e++)o.has(this._myExtensions[e])&&(this._myExtensions.splice(e,1),e--);for(let e of n)this._allExtensions.push(e);for(let e of i)this._myExtensions.push(e);return this._myActivationEvents=null,e}containsExtension(e){for(let t of this._myExtensions)if(aW.equals(t,e))return!0;return!1}containsActivationEvent(e){return this._myActivationEvents||=this._readMyActivationEvents(),this._myActivationEvents.has(e)}_readMyActivationEvents(){let e=new Set;for(let t of this._allExtensions){if(!this.containsExtension(t.identifier))continue;let n=EG.readActivationEvents(t);for(let t of n)e.add(t)}return e}};function MG(e){let t=new sW;for(let n of e)t.set(n.identifier,n);return t}function NG(e,t){return e.enabledApiProposals?e.enabledApiProposals.includes(t):!1}function PG(e,t){if(!NG(e,t))throw Error(`Extension '${e.identifier.value}' CANNOT use API proposal: ${t}.\nIts package.json#enabledApiProposals-property declares: ${e.enabledApiProposals?.join(`, `)??`[]`} but NOT ${t}.\n The missing proposal MUST be added and you must start in extension development mode or use the following command line switch: --enable-proposed-api ${e.identifier.value}`)}var FG=class{constructor(e,t,n,r){this.codeLoadingTime=e,this.activateCallTime=t,this.activateResolvedTime=n,this.activationReason=r}},IG=class{constructor(e,t){this.description=e,this.value=t}},LG;(function(e){e[e.Normal=0]=`Normal`,e[e.Immediate=1]=`Immediate`})(LG||={});function RG(e){return{type:e.isBuiltin?rW.System:rW.User,isBuiltin:e.isBuiltin||e.isUserBuiltin,identifier:{id:gG(e.publisher,e.name),uuid:e.uuid},manifest:e,location:e.extensionLocation,targetPlatform:e.targetPlatform,validations:[],isValid:!0,preRelease:e.preRelease,publisherDisplayName:e.publisherDisplayName}}function zG(e,t){let n=mG(e.manifest.publisher,e.manifest.name);return{id:n,identifier:new aW(n),isBuiltin:e.type===rW.System,isUserBuiltin:e.type===rW.User&&e.isBuiltin,isUnderDevelopment:!!t,extensionLocation:e.location,uuid:e.identifier.uuid,targetPlatform:e.targetPlatform,publisherDisplayName:e.publisherDisplayName,preRelease:e.preRelease,...e.manifest}}var BG=class{constructor(){this.onDidRegisterExtensions=T.None,this.onDidChangeExtensionsStatus=T.None,this.onDidChangeExtensions=T.None,this.onWillActivateByEvent=T.None,this.onDidChangeResponsiveChange=T.None,this.onWillStop=T.None,this.extensions=[]}activateByEvent(e){return Promise.resolve(void 0)}activateById(e,t){return Promise.resolve(void 0)}activationEventIsDone(e){return!1}whenInstalledExtensionsRegistered(){return Promise.resolve(!0)}getExtension(){return Promise.resolve(void 0)}readExtensionPointContributions(e){return Promise.resolve(Object.create(null))}getExtensionsStatus(){return Object.create(null)}getInspectPorts(e,t){return Promise.resolve([])}async stopExtensionHosts(){return!0}async startExtensionHosts(){}async setRemoteEnvironment(e){}canAddExtension(){return!1}canRemoveExtension(){return!1}},VG=Object.freeze({activeComment:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.activeComment.d.ts`},agentSessionsWorkspace:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.agentSessionsWorkspace.d.ts`},aiRelatedInformation:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiRelatedInformation.d.ts`},aiSettingsSearch:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiSettingsSearch.d.ts`},aiTextSearchProvider:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProvider.d.ts`,version:2},authIssuers:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authIssuers.d.ts`},authLearnMore:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authLearnMore.d.ts`},authProviderSpecific:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authProviderSpecific.d.ts`},authSession:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authSession.d.ts`},authenticationChallenges:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authenticationChallenges.d.ts`},canonicalUriProvider:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.canonicalUriProvider.d.ts`},chatContextProvider:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatContextProvider.d.ts`},chatHooks:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatHooks.d.ts`,version:6},chatOutputRenderer:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatOutputRenderer.d.ts`},chatParticipantAdditions:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantAdditions.d.ts`},chatParticipantPrivate:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantPrivate.d.ts`,version:13},chatPromptFiles:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatPromptFiles.d.ts`,version:1},chatProvider:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatProvider.d.ts`,version:4},chatReferenceBinaryData:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatReferenceBinaryData.d.ts`},chatReferenceDiagnostic:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatReferenceDiagnostic.d.ts`},chatSessionsProvider:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatSessionsProvider.d.ts`,version:3},chatStatusItem:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatStatusItem.d.ts`},chatTab:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatTab.d.ts`},codeActionAI:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionAI.d.ts`},codeActionRanges:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionRanges.d.ts`},codiconDecoration:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codiconDecoration.d.ts`},commentReactor:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReactor.d.ts`},commentReveal:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReveal.d.ts`},commentThreadApplicability:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentThreadApplicability.d.ts`},commentingRangeHint:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentingRangeHint.d.ts`},commentsDraftState:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentsDraftState.d.ts`},contribAccessibilityHelpContent:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribAccessibilityHelpContent.d.ts`},contribChatEditorInlineGutterMenu:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribChatEditorInlineGutterMenu.d.ts`},contribCommentEditorActionsMenu:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentEditorActionsMenu.d.ts`},contribCommentPeekContext:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentPeekContext.d.ts`},contribCommentThreadAdditionalMenu:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentThreadAdditionalMenu.d.ts`},contribCommentsViewThreadMenus:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentsViewThreadMenus.d.ts`},contribDebugCreateConfiguration:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDebugCreateConfiguration.d.ts`},contribDiffEditorGutterToolBarMenus:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDiffEditorGutterToolBarMenus.d.ts`},contribEditSessions:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditSessions.d.ts`},contribEditorContentMenu:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditorContentMenu.d.ts`},contribLabelFormatterWorkspaceTooltip:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLabelFormatterWorkspaceTooltip.d.ts`},contribLanguageModelToolSets:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLanguageModelToolSets.d.ts`},contribMenuBarHome:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMenuBarHome.d.ts`},contribMergeEditorMenus:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMergeEditorMenus.d.ts`},contribMultiDiffEditorMenus:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMultiDiffEditorMenus.d.ts`},contribNotebookStaticPreloads:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribNotebookStaticPreloads.d.ts`},contribRemoteHelp:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribRemoteHelp.d.ts`},contribShareMenu:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribShareMenu.d.ts`},contribSourceControlArtifactGroupMenu:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlArtifactGroupMenu.d.ts`},contribSourceControlArtifactMenu:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlArtifactMenu.d.ts`},contribSourceControlHistoryItemMenu:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemMenu.d.ts`},contribSourceControlHistoryTitleMenu:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryTitleMenu.d.ts`},contribSourceControlInputBoxMenu:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlInputBoxMenu.d.ts`},contribSourceControlTitleMenu:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlTitleMenu.d.ts`},contribStatusBarItems:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribStatusBarItems.d.ts`},contribViewContainerTitle:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewContainerTitle.d.ts`},contribViewsRemote:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsRemote.d.ts`},contribViewsWelcome:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsWelcome.d.ts`},css:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.css.d.ts`},customEditorMove:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.customEditorMove.d.ts`},dataChannels:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.dataChannels.d.ts`},debugVisualization:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.debugVisualization.d.ts`},defaultChatParticipant:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.defaultChatParticipant.d.ts`,version:4},devDeviceId:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.devDeviceId.d.ts`},diffCommand:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffCommand.d.ts`},diffContentOptions:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffContentOptions.d.ts`},documentFiltersExclusive:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentFiltersExclusive.d.ts`},editSessionIdentityProvider:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editSessionIdentityProvider.d.ts`},editorHoverVerbosityLevel:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorHoverVerbosityLevel.d.ts`},editorInsets:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorInsets.d.ts`},embeddings:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.embeddings.d.ts`},envIsAppPortable:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.envIsAppPortable.d.ts`},extensionAffinity:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionAffinity.d.ts`},extensionRuntime:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionRuntime.d.ts`},extensionsAny:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionsAny.d.ts`},externalUriOpener:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.externalUriOpener.d.ts`},fileSearchProvider:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider.d.ts`},fileSearchProvider2:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider2.d.ts`},findFiles2:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2.d.ts`,version:2},findTextInFiles:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles.d.ts`},findTextInFiles2:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles2.d.ts`},fsChunks:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fsChunks.d.ts`},inlineCompletionsAdditions:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineCompletionsAdditions.d.ts`},interactive:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactive.d.ts`},interactiveWindow:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactiveWindow.d.ts`},ipc:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.ipc.d.ts`},languageModelCapabilities:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelCapabilities.d.ts`},languageModelProxy:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelProxy.d.ts`},languageModelSystem:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelSystem.d.ts`},languageModelThinkingPart:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelThinkingPart.d.ts`,version:1},languageModelToolResultAudience:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelToolResultAudience.d.ts`},languageModelToolSupportsModel:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelToolSupportsModel.d.ts`,version:1},languageStatusText:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageStatusText.d.ts`},mappedEditsProvider:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mappedEditsProvider.d.ts`},markdownAlertSyntax:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.markdownAlertSyntax.d.ts`},mcpServerDefinitions:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mcpServerDefinitions.d.ts`},mcpToolDefinitions:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mcpToolDefinitions.d.ts`},multiDocumentHighlightProvider:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.multiDocumentHighlightProvider.d.ts`},nativeWindowHandle:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.nativeWindowHandle.d.ts`},newSymbolNamesProvider:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.newSymbolNamesProvider.d.ts`},notebookCellExecution:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecution.d.ts`},notebookControllerAffinityHidden:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookControllerAffinityHidden.d.ts`},notebookDeprecated:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookDeprecated.d.ts`},notebookExecution:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookExecution.d.ts`},notebookKernelSource:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookKernelSource.d.ts`},notebookLiveShare:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookLiveShare.d.ts`},notebookMessaging:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMessaging.d.ts`},notebookMime:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMime.d.ts`},notebookReplDocument:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookReplDocument.d.ts`},notebookVariableProvider:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookVariableProvider.d.ts`},portsAttributes:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.portsAttributes.d.ts`},profileContentHandlers:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.profileContentHandlers.d.ts`},quickDiffProvider:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickDiffProvider.d.ts`},quickPickItemTooltip:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickItemTooltip.d.ts`},quickPickSortByLabel:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickSortByLabel.d.ts`},remoteCodingAgents:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.remoteCodingAgents.d.ts`},resolvers:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.resolvers.d.ts`},scmActionButton:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmActionButton.d.ts`},scmArtifactProvider:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmArtifactProvider.d.ts`},scmHistoryProvider:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmHistoryProvider.d.ts`},scmMultiDiffEditor:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmMultiDiffEditor.d.ts`},scmProviderOptions:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmProviderOptions.d.ts`},scmSelectedProvider:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmSelectedProvider.d.ts`},scmTextDocument:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmTextDocument.d.ts`},scmValidation:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmValidation.d.ts`},shareProvider:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.shareProvider.d.ts`},speech:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.speech.d.ts`},statusBarItemTooltip:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.statusBarItemTooltip.d.ts`},tabInputMultiDiff:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputMultiDiff.d.ts`},tabInputTextMerge:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputTextMerge.d.ts`},taskExecutionTerminal:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskExecutionTerminal.d.ts`},taskPresentationGroup:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskPresentationGroup.d.ts`},taskProblemMatcherStatus:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskProblemMatcherStatus.d.ts`},telemetry:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.telemetry.d.ts`},terminalCompletionProvider:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalCompletionProvider.d.ts`},terminalDataWriteEvent:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDataWriteEvent.d.ts`},terminalDimensions:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDimensions.d.ts`},terminalExecuteCommandEvent:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalExecuteCommandEvent.d.ts`},terminalQuickFixProvider:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalQuickFixProvider.d.ts`},terminalSelection:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalSelection.d.ts`},terminalShellEnv:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalShellEnv.d.ts`},testObserver:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testObserver.d.ts`},testRelatedCode:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testRelatedCode.d.ts`},textDocumentChangeReason:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textDocumentChangeReason.d.ts`},textEditorDiffInformation:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textEditorDiffInformation.d.ts`},textSearchComplete2:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchComplete2.d.ts`},textSearchProvider:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider.d.ts`},textSearchProvider2:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider2.d.ts`},timeline:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.timeline.d.ts`},tokenInformation:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tokenInformation.d.ts`},toolProgress:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.toolProgress.d.ts`},treeItemMarkdownLabel:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeItemMarkdownLabel.d.ts`},treeViewActiveItem:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewActiveItem.d.ts`},treeViewMarkdownMessage:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewMarkdownMessage.d.ts`},treeViewReveal:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewReveal.d.ts`},tunnelFactory:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnelFactory.d.ts`},tunnels:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnels.d.ts`},valueSelectionInQuickPick:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.valueSelectionInQuickPick.d.ts`},workspaceTrust:{proposal:`https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.workspaceTrust.d.ts`}});function HG(){return Object.create(null)}var UG=`**`,WG=`/`,GG=`[/\\\\]`,KG=`[^/\\\\]`,qG=/\//g;function JG(e,t){switch(e){case 0:return``;case 1:return`${KG}*?`;default:return`(?:${GG}|${KG}+${GG}${t?`|${GG}${KG}+`:``})*?`}}function YG(e,t){if(!e)return[];let n=[],r=!1,i=!1,a=``;for(let o of e){switch(o){case t:if(!r&&!i){n.push(a),a=``;continue}break;case`{`:r=!0;break;case`}`:r=!1;break;case`[`:i=!0;break;case`]`:i=!1;break}a+=o}return a&&n.push(a),n}function XG(e){if(!e)return``;let t=``,n=YG(e,`/`);if(n.every(e=>e===`**`))t=`.*`;else{let e=!1;n.forEach((r,i)=>{if(r===`**`){if(e)return;t+=JG(2,i===n.length-1)}else{let e=!1,a=``,o=!1,s=``;for(let n of r){if(n!==`}`&&e){a+=n;continue}if(o&&(n!==`]`||!s)){let e;e=n===`-`?n:(n===`^`||n===`!`)&&!s?`^`:n===`/`?``:Na(n),s+=e;continue}switch(n){case`{`:e=!0;continue;case`[`:o=!0;continue;case`}`:{let n=`(?:${YG(a,`,`).map(e=>XG(e)).join(`|`)})`;t+=n,e=!1,a=``;break}case`]`:t+=`[`+s+`]`,o=!1,s=``;break;case`?`:t+=KG;continue;case`*`:t+=JG(1);continue;default:t+=Na(n)}}i<n.length-1&&(n[i+1]!==`**`||i+2<n.length)&&(t+=GG)}e=r===`**`})}return t}var ZG=/^\*\*\/\*\.[\w\.-]+$/,QG=/^\*\*\/([\w\.-]+)\/?$/,$G=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,eK=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,tK=/^\*\*((\/[\w\.-]+)+)\/?$/,nK=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,rK=new gn(1e4),iK=function(){return!1},aK=function(){return null};function oK(e,t){if(!e)return aK;let n;n=typeof e==`string`?e:e.pattern,n=n.trim();let r=t.ignoreCase??!1,i={...t,equals:r?eo:(e,t)=>e===t,endsWith:r?ro:(e,t)=>e.endsWith(t),isEqualOrParent:(e,t)=>$o(e,t,!ci||r)},a=`${r?n.toLowerCase():n}_${!!t.trimForExclusions}_${r}`,o=rK.get(a);if(o)return sK(o,e,i);let s;return o=ZG.test(n)?lK(n.substring(4),n,i):(s=QG.exec(cK(n,i)))?uK(s[1],n,i):(t.trimForExclusions?eK:$G).test(n)?dK(n,i):(s=tK.exec(cK(n,i)))?fK(s[1].substring(1),n,!0,i):(s=nK.exec(cK(n,i)))?fK(s[1],n,!1,i):pK(n,i),rK.set(a,o),sK(o,e,i)}function sK(e,t,n){if(typeof t==`string`)return e;let r=function(r,i){return n.isEqualOrParent(r,t.base)?e(La(r.substring(t.base.length),ga),i):null};return r.allBasenames=e.allBasenames,r.allPaths=e.allPaths,r.basenames=e.basenames,r.patterns=e.patterns,r}function cK(e,t){return t.trimForExclusions&&e.endsWith(`/**`)?e.substring(0,e.length-2):e}function lK(e,t,n){return function(r,i){return typeof r==`string`&&n.endsWith(r,e)?t:null}}function uK(e,t,n){let r=`/${e}`,i=`\\${e}`,a=function(a,o){return typeof a==`string`?o?n.equals(o,e)?t:null:n.equals(a,e)||n.endsWith(a,r)||n.endsWith(a,i)?t:null:null},o=[e];return a.basenames=o,a.patterns=[t],a.allBasenames=o,a}function dK(e,t){let n=yK(e.slice(1,-1).split(`,`).map(e=>oK(e,t)).filter(e=>e!==aK),e),r=n.length;if(!r)return aK;if(r===1)return n[0];let i=function(t,r){for(let i=0,a=n.length;i<a;i++)if(n[i](t,r))return e;return null},a=n.find(e=>!!e.allBasenames);a&&(i.allBasenames=a.allBasenames);let o=n.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);return o.length&&(i.allPaths=o),i}function fK(e,t,n,r){let i=ga===oa.sep,a=i?e:e.replace(qG,ga),o=ga+a,s=oa.sep+e,c;return c=n?function(n,c){return typeof n==`string`&&(r.equals(n,a)||r.endsWith(n,o)||!i&&(r.equals(n,e)||r.endsWith(n,s)))?t:null}:function(n,o){return typeof n==`string`&&(r.equals(n,a)||!i&&r.equals(n,e))?t:null},c.allPaths=[(n?`*/`:`./`)+e],c}function pK(e,t){try{let n=RegExp(`^${XG(e)}$`,t.ignoreCase?`i`:void 0);return function(t){return n.lastIndex=0,typeof t==`string`&&n.test(t)?e:null}}catch{return aK}}function mK(e,t,n){return!e||typeof t!=`string`?!1:hK(e,n)(t)}function hK(e,t={}){if(!e)return iK;if(typeof e==`string`||gK(e)){let n=oK(e,t);if(n===aK)return iK;let r=function(e,t){return!!n(e,t)};return n.allBasenames&&(r.allBasenames=n.allBasenames),n.allPaths&&(r.allPaths=n.allPaths),r}return _K(e,t)}function gK(e){let t=e;return t?typeof t.base==`string`&&typeof t.pattern==`string`:!1}function _K(e,t){let n=yK(Object.getOwnPropertyNames(e).map(n=>vK(n,e[n],t)).filter(e=>e!==aK)),r=n.length;if(!r)return aK;if(!n.some(e=>!!e.requiresSiblings)){if(r===1)return n[0];let e=function(e,t){let r;for(let i=0,a=n.length;i<a;i++){let a=n[i](e,t);if(typeof a==`string`)return a;Js(a)&&(r||=[],r.push(a))}return r?(async()=>{for(let e of r){let t=await e;if(typeof t==`string`)return t}return null})():null},t=n.find(e=>!!e.allBasenames);t&&(e.allBasenames=t.allBasenames);let i=n.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);return i.length&&(e.allPaths=i),e}let i=function(e,t,r){let i,a;for(let o=0,s=n.length;o<s;o++){let s=n[o];s.requiresSiblings&&r&&(t||=pa(e),i||=t.substring(0,t.length-ma(e).length));let c=s(e,t,i,r);if(typeof c==`string`)return c;Js(c)&&(a||=[],a.push(c))}return a?(async()=>{for(let e of a){let t=await e;if(typeof t==`string`)return t}return null})():null},a=n.find(e=>!!e.allBasenames);a&&(i.allBasenames=a.allBasenames);let o=n.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);return o.length&&(i.allPaths=o),i}function vK(e,t,n){if(t===!1)return aK;let r=oK(e,n);if(r===aK)return aK;if(typeof t==`boolean`)return r;if(t){let n=t.when;if(typeof n==`string`){let t=(t,i,a,o)=>{if(!o||!r(t,i))return null;let s=o(n.replace(`$(basename)`,()=>a));return Js(s)?s.then(t=>t?e:null):s?e:null};return t.requiresSiblings=!0,t}}return r}function yK(e,t){let n=e.filter(e=>!!e.basenames);if(n.length<2)return e;let r=n.reduce((e,t)=>{let n=t.basenames;return n?e.concat(n):e},[]),i;if(t){i=[];for(let e=0,n=r.length;e<n;e++)i.push(t)}else i=n.reduce((e,t)=>{let n=t.patterns;return n?e.concat(n):e},[]);let a=function(e,t){if(typeof e!=`string`)return null;if(!t){let n;for(n=e.length;n>0;n--){let t=e.charCodeAt(n-1);if(t===O.Slash||t===O.Backslash)break}t=e.substring(n)}let n=r.indexOf(t);return n===-1?null:i[n]};a.basenames=r,a.patterns=i,a.allBasenames=r;let o=e.filter(e=>!e.basenames);return o.push(a),o}var bK;(function(e){e[e.UP=0]=`UP`,e[e.DOWN=1]=`DOWN`,e[e.LEFT=2]=`LEFT`,e[e.RIGHT=3]=`RIGHT`})(bK||={});var xK;(function(e){e[e.HORIZONTAL=0]=`HORIZONTAL`,e[e.VERTICAL=1]=`VERTICAL`})(xK||={});var SK;(function(e){e[e.FIRST=0]=`FIRST`,e[e.LAST=1]=`LAST`,e[e.NEXT=2]=`NEXT`,e[e.PREVIOUS=3]=`PREVIOUS`})(SK||={});var CK;(function(e){e[e.MAXIMIZE=0]=`MAXIMIZE`,e[e.EXPAND=1]=`EXPAND`,e[e.EVEN=2]=`EVEN`})(CK||={});var wK;(function(e){e[e.COPY_EDITORS=0]=`COPY_EDITORS`,e[e.MOVE_EDITORS=1]=`MOVE_EDITORS`})(wK||={});function TK(e){let t=e;return tL(t?.editor)&&tL(t?.replacement)}var EK;(function(e){e[e.CREATION_TIME=0]=`CREATION_TIME`,e[e.MOST_RECENTLY_ACTIVE=1]=`MOST_RECENTLY_ACTIVE`,e[e.GRID_APPEARANCE=2]=`GRID_APPEARANCE`})(EK||={});var DK;(function(e){e[e.NEW_EDITOR=1]=`NEW_EDITOR`,e[e.MOVE_EDITOR=2]=`MOVE_EDITOR`,e[e.COPY_EDITOR=3]=`COPY_EDITOR`})(DK||={});function OK(e){let t=e;return!!t&&typeof t.id==`number`&&Array.isArray(t.editors)}function kK(e){return e.getValue(`workbench.editor.openSideBySideDirection`)===`down`?bK.DOWN:bK.RIGHT}var AK=V(`markdownRendererService`);function jK(e,t){let n=If();if(n?.createTrustedTypesPolicy)try{return n.createTrustedTypesPolicy(e,t)}catch(e){p(e);return}try{return globalThis.trustedTypes?.createPolicy(e,t)}catch(e){p(e);return}}var MK;(function(e){e[e.Null=0]=`Null`,e[e.PlainText=1]=`PlainText`})(MK||={});var NK;(function(e){e[e.NotSet=-1]=`NotSet`,e[e.None=0]=`None`,e[e.Italic=1]=`Italic`,e[e.Bold=2]=`Bold`,e[e.Underline=4]=`Underline`,e[e.Strikethrough=8]=`Strikethrough`})(NK||={});var PK;(function(e){e[e.None=0]=`None`,e[e.DefaultForeground=1]=`DefaultForeground`,e[e.DefaultBackground=2]=`DefaultBackground`})(PK||={});var FK;(function(e){e[e.Other=0]=`Other`,e[e.Comment=1]=`Comment`,e[e.String=2]=`String`,e[e.RegEx=3]=`RegEx`})(FK||={});var IK;(function(e){e[e.LANGUAGEID_MASK=255]=`LANGUAGEID_MASK`,e[e.TOKEN_TYPE_MASK=768]=`TOKEN_TYPE_MASK`,e[e.BALANCED_BRACKETS_MASK=1024]=`BALANCED_BRACKETS_MASK`,e[e.FONT_STYLE_MASK=30720]=`FONT_STYLE_MASK`,e[e.FOREGROUND_MASK=16744448]=`FOREGROUND_MASK`,e[e.BACKGROUND_MASK=4278190080]=`BACKGROUND_MASK`,e[e.ITALIC_MASK=2048]=`ITALIC_MASK`,e[e.BOLD_MASK=4096]=`BOLD_MASK`,e[e.UNDERLINE_MASK=8192]=`UNDERLINE_MASK`,e[e.STRIKETHROUGH_MASK=16384]=`STRIKETHROUGH_MASK`,e[e.SEMANTIC_USE_ITALIC=1]=`SEMANTIC_USE_ITALIC`,e[e.SEMANTIC_USE_BOLD=2]=`SEMANTIC_USE_BOLD`,e[e.SEMANTIC_USE_UNDERLINE=4]=`SEMANTIC_USE_UNDERLINE`,e[e.SEMANTIC_USE_STRIKETHROUGH=8]=`SEMANTIC_USE_STRIKETHROUGH`,e[e.SEMANTIC_USE_FOREGROUND=16]=`SEMANTIC_USE_FOREGROUND`,e[e.SEMANTIC_USE_BACKGROUND=32]=`SEMANTIC_USE_BACKGROUND`,e[e.LANGUAGEID_OFFSET=0]=`LANGUAGEID_OFFSET`,e[e.TOKEN_TYPE_OFFSET=8]=`TOKEN_TYPE_OFFSET`,e[e.BALANCED_BRACKETS_OFFSET=10]=`BALANCED_BRACKETS_OFFSET`,e[e.FONT_STYLE_OFFSET=11]=`FONT_STYLE_OFFSET`,e[e.FOREGROUND_OFFSET=15]=`FOREGROUND_OFFSET`,e[e.BACKGROUND_OFFSET=24]=`BACKGROUND_OFFSET`})(IK||={});var LK=class{static getLanguageId(e){return(e&IK.LANGUAGEID_MASK)>>>IK.LANGUAGEID_OFFSET}static getTokenType(e){return(e&IK.TOKEN_TYPE_MASK)>>>IK.TOKEN_TYPE_OFFSET}static containsBalancedBrackets(e){return(e&IK.BALANCED_BRACKETS_MASK)!==0}static getFontStyle(e){return(e&IK.FONT_STYLE_MASK)>>>IK.FONT_STYLE_OFFSET}static getForeground(e){return(e&IK.FOREGROUND_MASK)>>>IK.FOREGROUND_OFFSET}static getBackground(e){return(e&IK.BACKGROUND_MASK)>>>IK.BACKGROUND_OFFSET}static getClassNameFromMetadata(e){let t=`mtk`+this.getForeground(e),n=this.getFontStyle(e);return n&NK.Italic&&(t+=` mtki`),n&NK.Bold&&(t+=` mtkb`),n&NK.Underline&&(t+=` mtku`),n&NK.Strikethrough&&(t+=` mtks`),t}static getInlineStyleFromMetadata(e,t){let n=this.getForeground(e),r=this.getFontStyle(e),i=`color: ${t[n]};`;r&NK.Italic&&(i+=`font-style: italic;`),r&NK.Bold&&(i+=`font-weight: bold;`);let a=``;return r&NK.Underline&&(a+=` underline`),r&NK.Strikethrough&&(a+=` line-through`),a&&(i+=`text-decoration:${a};`),i}static getPresentationFromMetadata(e){let t=this.getForeground(e),n=this.getFontStyle(e);return{foreground:t,italic:!!(n&NK.Italic),bold:!!(n&NK.Bold),underline:!!(n&NK.Underline),strikethrough:!!(n&NK.Strikethrough)}}},RK=class e{static fromTo(t,n){return new e(t,n)}static equals(e,t){return e.start===t.start&&e.endExclusive===t.endExclusive}static addRange(t,n){let r=0;for(;r<n.length&&n[r].endExclusive<t.start;)r++;let i=r;for(;i<n.length&&n[i].start<=t.endExclusive;)i++;if(r===i)n.splice(r,0,t);else{let a=Math.min(t.start,n[r].start),o=Math.max(t.endExclusive,n[i-1].endExclusive);n.splice(r,i-r,new e(a,o))}}static tryCreate(t,n){if(!(t>n))return new e(t,n)}static ofLength(t){return new e(0,t)}static ofStartAndLength(t,n){return new e(t,t+n)}static emptyAt(t){return new e(t,t)}constructor(e,t){if(this.start=e,this.endExclusive=t,e>t)throw new y(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(t){return new e(this.start+t,this.endExclusive+t)}deltaStart(t){return new e(this.start+t,this.endExclusive)}deltaEnd(t){return new e(this.start,this.endExclusive+t)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(t){return new e(Math.min(this.start,t.start),Math.max(this.endExclusive,t.endExclusive))}intersect(t){let n=Math.max(this.start,t.start),r=Math.min(this.endExclusive,t.endExclusive);if(n<=r)return new e(n,r)}intersectionLength(e){let t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,n-t)}intersects(e){return Math.max(this.start,e.start)<Math.min(this.endExclusive,e.endExclusive)}intersectsOrTouches(e){return Math.max(this.start,e.start)<=Math.min(this.endExclusive,e.endExclusive)}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new y(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new y(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let t=[];for(let n=this.start;n<this.endExclusive;n++)t.push(e(n));return t}forEach(e){for(let t=this.start;t<this.endExclusive;t++)e(t)}joinRightTouching(t){if(this.endExclusive!==t.start)throw new y(`Invalid join: ${this.toString()} and ${t.toString()}`);return new e(this.start,t.endExclusive)}withMargin(t,n){return n===void 0&&(n=t),new e(this.start-t,this.endExclusive+n)}},zK=class e{constructor(){this._sortedRanges=[]}get ranges(){return[...this._sortedRanges]}addRange(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<e.start;)t++;let n=t;for(;n<this._sortedRanges.length&&this._sortedRanges[n].start<=e.endExclusive;)n++;if(t===n)this._sortedRanges.splice(t,0,e);else{let r=Math.min(e.start,this._sortedRanges[t].start),i=Math.max(e.endExclusive,this._sortedRanges[n-1].endExclusive);this._sortedRanges.splice(t,n-t,new RK(r,i))}}toString(){return this._sortedRanges.map(e=>e.toString()).join(`, `)}intersectsStrict(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<=e.start;)t++;return t<this._sortedRanges.length&&this._sortedRanges[t].start<e.endExclusive}intersectWithRange(t){let n=new e;for(let e of this._sortedRanges){let r=e.intersect(t);r&&n.addRange(r)}return n}intersectWithRangeLength(e){return this.intersectWithRange(e).length}get length(){return this._sortedRanges.reduce((e,t)=>e+t.length,0)}},BK=class e{static createEmpty(t,n){let r=e.defaultTokenMetadata,i=new Uint32Array(2);return i[0]=t.length,i[1]=r,new e(i,t,n)}static createFromTextAndMetadata(t,n){let r=0,i=``,a=[];for(let{text:e,metadata:n}of t)a.push(r+e.length,n),r+=e.length,i+=e;return new e(new Uint32Array(a),i,n)}static convertToEndOffset(e,t){let n=(e.length>>>1)-1;for(let t=0;t<n;t++)e[t<<1]=e[t+1<<1];e[n<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,r=(e.length>>>1)-1;for(;n<r;){let i=n+Math.floor((r-n)/2),a=e[i<<1];if(a===t)return i+1;a<t?n=i+1:a>t&&(r=i)}return n}static#e=this.defaultTokenMetadata=(NK.None<<IK.FONT_STYLE_OFFSET|PK.DefaultForeground<<IK.FOREGROUND_OFFSET|PK.DefaultBackground<<IK.BACKGROUND_OFFSET)>>>0;constructor(e,t,n){this._lineTokensBrand=void 0,(e.length>1?e[e.length-2]:0)!==t.length&&p(Error(`Token length and text length do not match!`)),this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this.languageIdCodec=n}getTextLength(){return this._text.length}equals(t){return t instanceof e?this.slicedEquals(t,0,this._tokensCount):!1}slicedEquals(e,t,n){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;let r=t<<1,i=r+(n<<1);for(let t=r;t<i;t++)if(this._tokens[t]!==e._tokens[t])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){let t=this._tokens[(e<<1)+1],n=LK.getLanguageId(t);return this.languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){let t=this._tokens[(e<<1)+1];return LK.getTokenType(t)}getForeground(e){let t=this._tokens[(e<<1)+1];return LK.getForeground(t)}getClassName(e){let t=this._tokens[(e<<1)+1];return LK.getClassNameFromMetadata(t)}getInlineStyle(e,t){let n=this._tokens[(e<<1)+1];return LK.getInlineStyleFromMetadata(n,t)}getPresentation(e){let t=this._tokens[(e<<1)+1];return LK.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(t){return e.findIndexInTokensArray(this._tokens,t)}inflate(){return this}sliceAndInflate(e,t,n){return new VK(this,e,t,n)}sliceZeroCopy(e){return this.sliceAndInflate(e.start,e.endExclusive,0)}withInserted(t){if(t.length===0)return this;let n=0,r=0,i=``,a=[],o=0;for(;;){let e=n<this._tokensCount?this._tokens[n<<1]:-1,s=r<t.length?t[r]:null;if(e!==-1&&(s===null||e<=s.offset)){i+=this._text.substring(o,e);let t=this._tokens[(n<<1)+1];a.push(i.length,t),n++,o=e}else if(s){if(s.offset>o){i+=this._text.substring(o,s.offset);let e=this._tokens[(n<<1)+1];a.push(i.length,e),o=s.offset}i+=s.text,a.push(i.length,s.tokenMetadata),r++}else break}return new e(new Uint32Array(a),i,this.languageIdCodec)}getTokensInRange(e){let t=new GK,n=this.findTokenIndexAtOffset(e.start),r=this.findTokenIndexAtOffset(e.endExclusive);for(let i=n;i<=r;i++){let n=new RK(this.getStartOffset(i),this.getEndOffset(i)).intersectionLength(e);n>0&&t.add(n,this.getMetadata(i))}return t.build()}getTokenText(e){let t=this.getStartOffset(e),n=this.getEndOffset(e);return this._text.substring(t,n)}forEach(e){let t=this.getCount();for(let n=0;n<t;n++)e(n)}toString(){let e=``;return this.forEach(t=>{e+=`[${this.getTokenText(t)}]{${this.getClassName(t)}}`}),e}},VK=class e{constructor(e,t,n,r){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=r,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this.languageIdCodec=e.languageIdCodec,this._tokensCount=0;for(let t=this._firstTokenIndex,r=e.getCount();t<r&&!(e.getStartOffset(t)>=n);t++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(t){return t instanceof e?this._startOffset===t._startOffset&&this._endOffset===t._endOffset&&this._deltaOffset===t._deltaOffset&&this._source.slicedEquals(t._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getStandardTokenType(e){return this._source.getStandardTokenType(this._firstTokenIndex+e)}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){let t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}getTokenText(e){let t=this._firstTokenIndex+e,n=this._source.getStartOffset(t),r=this._source.getEndOffset(t),i=this._source.getTokenText(t);return n<this._startOffset&&(i=i.substring(this._startOffset-n)),r>this._endOffset&&(i=i.substring(0,i.length-(r-this._endOffset))),i}forEach(e){for(let t=0;t<this.getCount();t++)e(t)}};function HK(e,t){let n=t.lineNumber;if(!e.tokenization.isCheapToTokenize(n))return;e.tokenization.forceTokenization(n);let r=e.tokenization.getLineTokens(n),i=r.findTokenIndexAtOffset(t.column-1);return r.getStandardTokenType(i)}var UK=class e{static fromLineTokens(t){let n=[];for(let e=0;e<t.getCount();e++)n.push(new WK(t.getEndOffset(e)-t.getStartOffset(e),t.getMetadata(e)));return e.create(n)}static create(t){return new e(t)}constructor(e){this._tokenInfo=e}toLineTokens(e,t){return BK.createFromTextAndMetadata(this.map((t,n)=>({text:t.substring(e),metadata:n.metadata})),t)}forEach(e){let t=0;for(let n of this._tokenInfo)e(new RK(t,t+n.length),n),t+=n.length}map(e){let t=[],n=0;for(let r of this._tokenInfo){let i=new RK(n,n+r.length);t.push(e(i,r)),n+=r.length}return t}slice(t){let n=[],r=0;for(let e of this._tokenInfo){let i=r,a=i+e.length;if(a>t.start){if(i>=t.endExclusive)break;let r=Math.max(0,t.start-i),o=Math.max(0,a-t.endExclusive);n.push(new WK(e.length-r-o,e.metadata))}r+=e.length}return e.create(n)}append(t){let n=this._tokenInfo.concat(t._tokenInfo);return e.create(n)}},WK=class{constructor(e,t){this.length=e,this.metadata=t}},GK=class{constructor(){this._tokens=[]}add(e,t){this._tokens.push(new WK(e,t))}build(){return UK.create(this._tokens)}},KK=class e{constructor(e,t){this.lineNumber=e,this.column=t}with(t=this.lineNumber,n=this.column){return t===this.lineNumber&&n===this.column?this:new e(t,n)}delta(e=0,t=0){return this.with(Math.max(1,this.lineNumber+e),Math.max(1,this.column+t))}equals(t){return e.equals(this,t)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(t){return e.isBefore(this,t)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(t){return e.isBeforeOrEqual(this,t)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){let n=e.lineNumber|0,r=t.lineNumber|0;return n===r?(e.column|0)-(t.column|0):n-r}clone(){return new e(this.lineNumber,this.column)}toString(){return`(`+this.lineNumber+`,`+this.column+`)`}static lift(t){return new e(t.lineNumber,t.column)}static isIPosition(e){return!!e&&typeof e.lineNumber==`number`&&typeof e.column==`number`}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}},X=class e{constructor(e,t,n,r){e>n||e===n&&t>r?(this.startLineNumber=n,this.startColumn=r,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=r)}isEmpty(){return e.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(t){return e.containsPosition(this,t)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(t){return e.containsRange(this,t)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(t){return e.strictContainsRange(this,t)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(t){return e.plusRange(this,t)}static plusRange(t,n){let r,i,a,o;return n.startLineNumber<t.startLineNumber?(r=n.startLineNumber,i=n.startColumn):n.startLineNumber===t.startLineNumber?(r=n.startLineNumber,i=Math.min(n.startColumn,t.startColumn)):(r=t.startLineNumber,i=t.startColumn),n.endLineNumber>t.endLineNumber?(a=n.endLineNumber,o=n.endColumn):n.endLineNumber===t.endLineNumber?(a=n.endLineNumber,o=Math.max(n.endColumn,t.endColumn)):(a=t.endLineNumber,o=t.endColumn),new e(r,i,a,o)}intersectRanges(t){return e.intersectRanges(this,t)}static intersectRanges(t,n){let r=t.startLineNumber,i=t.startColumn,a=t.endLineNumber,o=t.endColumn,s=n.startLineNumber,c=n.startColumn,l=n.endLineNumber,u=n.endColumn;return r<s?(r=s,i=c):r===s&&(i=Math.max(i,c)),a>l?(a=l,o=u):a===l&&(o=Math.min(o,u)),r>a||r===a&&i>o?null:new e(r,i,a,o)}equalsRange(t){return e.equalsRange(this,t)}static equalsRange(e,t){return!e&&!t?!0:!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return e.getEndPosition(this)}static getEndPosition(e){return new KK(e.endLineNumber,e.endColumn)}getStartPosition(){return e.getStartPosition(this)}static getStartPosition(e){return new KK(e.startLineNumber,e.startColumn)}toString(){return`[`+this.startLineNumber+`,`+this.startColumn+` -> `+this.endLineNumber+`,`+this.endColumn+`]`}setEndPosition(t,n){return new e(this.startLineNumber,this.startColumn,t,n)}setStartPosition(t,n){return new e(t,n,this.endLineNumber,this.endColumn)}collapseToStart(){return e.collapseToStart(this)}static collapseToStart(t){return new e(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn)}collapseToEnd(){return e.collapseToEnd(this)}static collapseToEnd(t){return new e(t.endLineNumber,t.endColumn,t.endLineNumber,t.endColumn)}delta(t){return new e(this.startLineNumber+t,this.startColumn,this.endLineNumber+t,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(t,n=t){return new e(t.lineNumber,t.column,n.lineNumber,n.column)}static lift(t){return t?new e(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):null}static isIRange(e){return!!e&&typeof e.startLineNumber==`number`&&typeof e.startColumn==`number`&&typeof e.endLineNumber==`number`&&typeof e.endColumn==`number`}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static areOnlyIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber-1||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn-1||t.endLineNumber<e.startLineNumber-1||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn-1)}static compareRangesUsingStarts(e,t){if(e&&t){let n=e.startLineNumber|0,r=t.startLineNumber|0;if(n===r){let n=e.startColumn|0,r=t.startColumn|0;if(n===r){let n=e.endLineNumber|0,r=t.endLineNumber|0;return n===r?(e.endColumn|0)-(t.endColumn|0):n-r}return n-r}return n-r}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}},qK=class{static insert(e,t){return{range:new X(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}},JK=class{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new E,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),S(()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))})}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){this._factories.get(e)?.dispose();let n=new YK(this,e,t);return this._factories.set(e,n),S(()=>{let t=this._factories.get(e);!t||t!==n||(this._factories.delete(e),t.dispose())})}async getOrCreate(e){let t=this.get(e);if(t)return t;let n=this._factories.get(e);return!n||n.isResolved?null:(await n.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;let t=this._factories.get(e);return!!(!t||t.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>PK.DefaultBackground?this._colorMap[PK.DefaultBackground]:null}},YK=class extends w{get isResolved(){return this._isResolved}constructor(e,t,n){super(),this._registry=e,this._languageId=t,this._factory=n,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||=this._create(),this._resolvePromise}async _create(){let e=await this._factory.tokenizationSupport;this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))}},XK=class{constructor(e,t,n){this.offset=e,this.type=t,this.language=n,this._tokenBrand=void 0}toString(){return`(`+this.offset+`, `+this.type+`)`}},ZK=class{constructor(e,t){this.tokens=e,this.endState=t,this._tokenizationResultBrand=void 0}},QK=class{constructor(e,t,n){this.tokens=e,this.fontInfo=t,this.endState=n,this._encodedTokenizationResultBrand=void 0}},$K;(function(e){e[e.Increase=0]=`Increase`,e[e.Decrease=1]=`Decrease`})($K||={});var Z;(function(e){e[e.Method=0]=`Method`,e[e.Function=1]=`Function`,e[e.Constructor=2]=`Constructor`,e[e.Field=3]=`Field`,e[e.Variable=4]=`Variable`,e[e.Class=5]=`Class`,e[e.Struct=6]=`Struct`,e[e.Interface=7]=`Interface`,e[e.Module=8]=`Module`,e[e.Property=9]=`Property`,e[e.Event=10]=`Event`,e[e.Operator=11]=`Operator`,e[e.Unit=12]=`Unit`,e[e.Value=13]=`Value`,e[e.Constant=14]=`Constant`,e[e.Enum=15]=`Enum`,e[e.EnumMember=16]=`EnumMember`,e[e.Keyword=17]=`Keyword`,e[e.Text=18]=`Text`,e[e.Color=19]=`Color`,e[e.File=20]=`File`,e[e.Reference=21]=`Reference`,e[e.Customcolor=22]=`Customcolor`,e[e.Folder=23]=`Folder`,e[e.TypeParameter=24]=`TypeParameter`,e[e.User=25]=`User`,e[e.Issue=26]=`Issue`,e[e.Tool=27]=`Tool`,e[e.Snippet=28]=`Snippet`})(Z||={});var eq;(function(e){let t=new Map;t.set(Z.Method,x.symbolMethod),t.set(Z.Function,x.symbolFunction),t.set(Z.Constructor,x.symbolConstructor),t.set(Z.Field,x.symbolField),t.set(Z.Variable,x.symbolVariable),t.set(Z.Class,x.symbolClass),t.set(Z.Struct,x.symbolStruct),t.set(Z.Interface,x.symbolInterface),t.set(Z.Module,x.symbolModule),t.set(Z.Property,x.symbolProperty),t.set(Z.Event,x.symbolEvent),t.set(Z.Operator,x.symbolOperator),t.set(Z.Unit,x.symbolUnit),t.set(Z.Value,x.symbolValue),t.set(Z.Enum,x.symbolEnum),t.set(Z.Constant,x.symbolConstant),t.set(Z.Enum,x.symbolEnum),t.set(Z.EnumMember,x.symbolEnumMember),t.set(Z.Keyword,x.symbolKeyword),t.set(Z.Snippet,x.symbolSnippet),t.set(Z.Text,x.symbolText),t.set(Z.Color,x.symbolColor),t.set(Z.File,x.symbolFile),t.set(Z.Reference,x.symbolReference),t.set(Z.Customcolor,x.symbolCustomColor),t.set(Z.Folder,x.symbolFolder),t.set(Z.TypeParameter,x.symbolTypeParameter),t.set(Z.User,x.account),t.set(Z.Issue,x.issues),t.set(Z.Tool,x.tools);function n(e){let n=t.get(e);return n||=(console.info(`No codicon found for CompletionItemKind `+e),x.symbolProperty),n}e.toIcon=n;function r(e){switch(e){case Z.Method:return D(803,`Method`);case Z.Function:return D(804,`Function`);case Z.Constructor:return D(805,`Constructor`);case Z.Field:return D(806,`Field`);case Z.Variable:return D(807,`Variable`);case Z.Class:return D(808,`Class`);case Z.Struct:return D(809,`Struct`);case Z.Interface:return D(810,`Interface`);case Z.Module:return D(811,`Module`);case Z.Property:return D(812,`Property`);case Z.Event:return D(813,`Event`);case Z.Operator:return D(814,`Operator`);case Z.Unit:return D(815,`Unit`);case Z.Value:return D(816,`Value`);case Z.Constant:return D(817,`Constant`);case Z.Enum:return D(818,`Enum`);case Z.EnumMember:return D(819,`Enum Member`);case Z.Keyword:return D(820,`Keyword`);case Z.Text:return D(821,`Text`);case Z.Color:return D(822,`Color`);case Z.File:return D(823,`File`);case Z.Reference:return D(824,`Reference`);case Z.Customcolor:return D(825,`Custom Color`);case Z.Folder:return D(826,`Folder`);case Z.TypeParameter:return D(827,`Type Parameter`);case Z.User:return D(828,`User`);case Z.Issue:return D(829,`Issue`);case Z.Tool:return D(830,`Tool`);case Z.Snippet:return D(831,`Snippet`);default:return``}}e.toLabel=r;let i=new Map;i.set(`method`,Z.Method),i.set(`function`,Z.Function),i.set(`constructor`,Z.Constructor),i.set(`field`,Z.Field),i.set(`variable`,Z.Variable),i.set(`class`,Z.Class),i.set(`struct`,Z.Struct),i.set(`interface`,Z.Interface),i.set(`module`,Z.Module),i.set(`property`,Z.Property),i.set(`event`,Z.Event),i.set(`operator`,Z.Operator),i.set(`unit`,Z.Unit),i.set(`value`,Z.Value),i.set(`constant`,Z.Constant),i.set(`enum`,Z.Enum),i.set(`enum-member`,Z.EnumMember),i.set(`enumMember`,Z.EnumMember),i.set(`keyword`,Z.Keyword),i.set(`snippet`,Z.Snippet),i.set(`text`,Z.Text),i.set(`color`,Z.Color),i.set(`file`,Z.File),i.set(`reference`,Z.Reference),i.set(`customcolor`,Z.Customcolor),i.set(`folder`,Z.Folder),i.set(`type-parameter`,Z.TypeParameter),i.set(`typeParameter`,Z.TypeParameter),i.set(`account`,Z.User),i.set(`issue`,Z.Issue),i.set(`tool`,Z.Tool);function a(e,t){let n=i.get(e);return n===void 0&&!t&&(n=Z.Property),n}e.fromString=a})(eq||={});var tq;(function(e){e[e.Deprecated=1]=`Deprecated`})(tq||={});var nq;(function(e){e[e.None=0]=`None`,e[e.KeepWhitespace=1]=`KeepWhitespace`,e[e.InsertAsSnippet=4]=`InsertAsSnippet`})(nq||={});var rq;(function(e){e[e.Word=0]=`Word`,e[e.Line=1]=`Line`,e[e.Suggest=2]=`Suggest`})(rq||={});var iq;(function(e){e[e.Invoke=0]=`Invoke`,e[e.TriggerCharacter=1]=`TriggerCharacter`,e[e.TriggerForIncompleteCompletions=2]=`TriggerForIncompleteCompletions`})(iq||={});var aq;(function(e){e[e.Automatic=0]=`Automatic`,e[e.Explicit=1]=`Explicit`})(aq||={});var oq=class{constructor(e,t,n,r){this.range=e,this.text=t,this.completionKind=n,this.isSnippetText=r}equals(e){return X.lift(this.range).equalsRange(e.range)&&this.text===e.text&&this.completionKind===e.completionKind&&this.isSnippetText===e.isSnippetText}},sq;(function(e){e[e.Code=1]=`Code`,e[e.Label=2]=`Label`})(sq||={});var cq=class e{static fromExtensionId(t){return new e(t,void 0,void 0)}constructor(e,t,n){this.extensionId=e,this.extensionVersion=t,this.providerId=n}toString(){let e=``;return this.extensionId&&(e+=this.extensionId),this.extensionVersion&&(e+=`@${this.extensionVersion}`),this.providerId&&(e+=`:${this.providerId}`),e.length===0&&(e=`unknown`),e}toStringWithoutVersion(){let e=``;return this.extensionId&&(e+=this.extensionId),this.providerId&&(e+=`:${this.providerId}`),e}},lq;(function(e){e[e.Accepted=0]=`Accepted`,e[e.Rejected=1]=`Rejected`,e[e.Ignored=2]=`Ignored`})(lq||={});var uq;(function(e){e[e.Invoke=1]=`Invoke`,e[e.Auto=2]=`Auto`})(uq||={});var dq;(function(e){e[e.Automatic=0]=`Automatic`,e[e.PasteAs=1]=`PasteAs`})(dq||={});var fq;(function(e){e[e.Invoke=1]=`Invoke`,e[e.TriggerCharacter=2]=`TriggerCharacter`,e[e.ContentChange=3]=`ContentChange`})(fq||={});var pq;(function(e){e[e.Text=0]=`Text`,e[e.Read=1]=`Read`,e[e.Write=2]=`Write`})(pq||={});function mq(e){return!!e&&k.isUri(e.uri)&&X.isIRange(e.range)&&(X.isIRange(e.originSelectionRange)||X.isIRange(e.targetSelectionRange))}function hq(e){return!!e&&k.isUri(e.uri)&&X.isIRange(e.range)}var Q;(function(e){e[e.File=0]=`File`,e[e.Module=1]=`Module`,e[e.Namespace=2]=`Namespace`,e[e.Package=3]=`Package`,e[e.Class=4]=`Class`,e[e.Method=5]=`Method`,e[e.Property=6]=`Property`,e[e.Field=7]=`Field`,e[e.Constructor=8]=`Constructor`,e[e.Enum=9]=`Enum`,e[e.Interface=10]=`Interface`,e[e.Function=11]=`Function`,e[e.Variable=12]=`Variable`,e[e.Constant=13]=`Constant`,e[e.String=14]=`String`,e[e.Number=15]=`Number`,e[e.Boolean=16]=`Boolean`,e[e.Array=17]=`Array`,e[e.Object=18]=`Object`,e[e.Key=19]=`Key`,e[e.Null=20]=`Null`,e[e.EnumMember=21]=`EnumMember`,e[e.Struct=22]=`Struct`,e[e.Event=23]=`Event`,e[e.Operator=24]=`Operator`,e[e.TypeParameter=25]=`TypeParameter`})(Q||={});var gq={[Q.Array]:D(832,`array`),[Q.Boolean]:D(833,`boolean`),[Q.Class]:D(834,`class`),[Q.Constant]:D(835,`constant`),[Q.Constructor]:D(836,`constructor`),[Q.Enum]:D(837,`enumeration`),[Q.EnumMember]:D(838,`enumeration member`),[Q.Event]:D(839,`event`),[Q.Field]:D(840,`field`),[Q.File]:D(841,`file`),[Q.Function]:D(842,`function`),[Q.Interface]:D(843,`interface`),[Q.Key]:D(844,`key`),[Q.Method]:D(845,`method`),[Q.Module]:D(846,`module`),[Q.Namespace]:D(847,`namespace`),[Q.Null]:D(848,`null`),[Q.Number]:D(849,`number`),[Q.Object]:D(850,`object`),[Q.Operator]:D(851,`operator`),[Q.Package]:D(852,`package`),[Q.Property]:D(853,`property`),[Q.String]:D(854,`string`),[Q.Struct]:D(855,`struct`),[Q.TypeParameter]:D(856,`type parameter`),[Q.Variable]:D(857,`variable`)};function _q(e,t){return D(858,`{0} ({1})`,e,gq[t])}var vq;(function(e){e[e.Deprecated=1]=`Deprecated`})(vq||={});var yq;(function(e){let t=new Map;t.set(Q.File,x.symbolFile),t.set(Q.Module,x.symbolModule),t.set(Q.Namespace,x.symbolNamespace),t.set(Q.Package,x.symbolPackage),t.set(Q.Class,x.symbolClass),t.set(Q.Method,x.symbolMethod),t.set(Q.Property,x.symbolProperty),t.set(Q.Field,x.symbolField),t.set(Q.Constructor,x.symbolConstructor),t.set(Q.Enum,x.symbolEnum),t.set(Q.Interface,x.symbolInterface),t.set(Q.Function,x.symbolFunction),t.set(Q.Variable,x.symbolVariable),t.set(Q.Constant,x.symbolConstant),t.set(Q.String,x.symbolString),t.set(Q.Number,x.symbolNumber),t.set(Q.Boolean,x.symbolBoolean),t.set(Q.Array,x.symbolArray),t.set(Q.Object,x.symbolObject),t.set(Q.Key,x.symbolKey),t.set(Q.Null,x.symbolNull),t.set(Q.EnumMember,x.symbolEnumMember),t.set(Q.Struct,x.symbolStruct),t.set(Q.Event,x.symbolEvent),t.set(Q.Operator,x.symbolOperator),t.set(Q.TypeParameter,x.symbolTypeParameter);function n(e){let n=t.get(e);return n||=(console.info(`No codicon found for SymbolKind `+e),x.symbolProperty),n}e.toIcon=n;let r=new Map;r.set(Q.File,Z.File),r.set(Q.Module,Z.Module),r.set(Q.Namespace,Z.Module),r.set(Q.Package,Z.Module),r.set(Q.Class,Z.Class),r.set(Q.Method,Z.Method),r.set(Q.Property,Z.Property),r.set(Q.Field,Z.Field),r.set(Q.Constructor,Z.Constructor),r.set(Q.Enum,Z.Enum),r.set(Q.Interface,Z.Interface),r.set(Q.Function,Z.Function),r.set(Q.Variable,Z.Variable),r.set(Q.Constant,Z.Constant),r.set(Q.String,Z.Text),r.set(Q.Number,Z.Value),r.set(Q.Boolean,Z.Value),r.set(Q.Array,Z.Value),r.set(Q.Object,Z.Value),r.set(Q.Key,Z.Keyword),r.set(Q.Null,Z.Value),r.set(Q.EnumMember,Z.EnumMember),r.set(Q.Struct,Z.Struct),r.set(Q.Event,Z.Event),r.set(Q.Operator,Z.Operator),r.set(Q.TypeParameter,Z.TypeParameter);function i(e){let t=r.get(e);return t===void 0&&(console.info(`No completion kind found for SymbolKind `+e),t=Z.File),t}e.toCompletionKind=i})(yq||={});var bq=class{static asEditOperation(e){let t=X.lift(e.range);return t.isEmpty()?qK.insert(t.getStartPosition(),e.text):qK.replace(t,e.text)}static isTextEdit(e){let t=e;return typeof t.text==`string`&&X.isIRange(t.range)}},xq=class e{static#e=this.Comment=new e(`comment`);static#t=this.Imports=new e(`imports`);static#n=this.Region=new e(`region`);static fromValue(t){switch(t){case`comment`:return e.Comment;case`imports`:return e.Imports;case`region`:return e.Region}return new e(t)}constructor(e){this.value=e}},Sq;(function(e){e[e.AIGenerated=1]=`AIGenerated`})(Sq||={});var Cq;(function(e){e[e.Invoke=0]=`Invoke`,e[e.Automatic=1]=`Automatic`})(Cq||={});var wq;(function(e){function t(e){return!e||typeof e!=`object`?!1:typeof e.id==`string`&&typeof e.title==`string`}e.is=t})(wq||={});var Tq;(function(e){e[e.Collapsed=0]=`Collapsed`,e[e.Expanded=1]=`Expanded`})(Tq||={});var Eq;(function(e){e[e.Unresolved=0]=`Unresolved`,e[e.Resolved=1]=`Resolved`})(Eq||={});var Dq;(function(e){e[e.Current=0]=`Current`,e[e.Outdated=1]=`Outdated`})(Dq||={});var Oq;(function(e){e[e.Editing=0]=`Editing`,e[e.Preview=1]=`Preview`})(Oq||={});var kq;(function(e){e[e.Published=0]=`Published`,e[e.Draft=1]=`Draft`})(kq||={});var Aq;(function(e){e[e.Type=1]=`Type`,e[e.Parameter=2]=`Parameter`})(Aq||={});var jq=class{constructor(e){this.createSupport=e,this._tokenizationSupport=null}dispose(){this._tokenizationSupport&&this._tokenizationSupport.then(e=>{e&&e.dispose()})}get tokenizationSupport(){return this._tokenizationSupport||=this.createSupport(),this._tokenizationSupport}},Mq=new JK,Nq;(function(e){e[e.None=0]=`None`,e[e.Option=1]=`Option`,e[e.Default=2]=`Default`,e[e.Preferred=3]=`Preferred`})(Nq||={});var Pq=new class{clone(){return this}equals(e){return this===e}};function Fq(e,t){return new ZK([new XK(0,``,e)],t)}function Iq(e,t){let n=new Uint32Array(2);return n[0]=0,n[1]=(e<<IK.LANGUAGEID_OFFSET|FK.Other<<IK.TOKEN_TYPE_OFFSET|NK.None<<IK.FONT_STYLE_OFFSET|PK.DefaultForeground<<IK.FOREGROUND_OFFSET|PK.DefaultBackground<<IK.BACKGROUND_OFFSET)>>>0,new QK(n,[],t===null?Pq:t)}var Lq=V(`textResourceConfigurationService`),Rq=V(`textResourcePropertiesService`),zq=V(`IUserDataProfilesService`),Bq=V(`workspaceTrustEnablementService`),Vq=V(`workspaceTrustManagementService`),Hq=V(`workspaceTrustRequestService`),Uq=V(`workingCopyService`),Wq=[],Gq=[],Kq=[];function qq(e,t=!1){Yq(e,!1,t)}function Jq(e){Yq(e,!0,!1)}function Yq(e,t,n){let r=Xq(e,t);Wq.push(r),r.userConfigured?Kq.push(r):Gq.push(r),n&&!r.userConfigured&&Wq.forEach(e=>{e.mime===r.mime||e.userConfigured||(r.extension&&e.extension===r.extension&&console.warn(`Overwriting extension <<${r.extension}>> to now point to mime <<${r.mime}>>`),r.filename&&e.filename===r.filename&&console.warn(`Overwriting filename <<${r.filename}>> to now point to mime <<${r.mime}>>`),r.filepattern&&e.filepattern===r.filepattern&&console.warn(`Overwriting filepattern <<${r.filepattern}>> to now point to mime <<${r.mime}>>`),r.firstline&&e.firstline===r.firstline&&console.warn(`Overwriting firstline <<${r.firstline}>> to now point to mime <<${r.mime}>>`))})}function Xq(e,t){return{id:e.id,mime:e.mime,filename:e.filename,extension:e.extension,filepattern:e.filepattern,firstline:e.firstline,userConfigured:t,filepatternParsed:e.filepattern?hK(e.filepattern,{ignoreCase:!0}):void 0,filepatternOnPath:e.filepattern?e.filepattern.indexOf(oa.sep)>=0:!1}}function Zq(){Wq=Wq.filter(e=>e.userConfigured),Gq=[]}function Qq(){Wq=Wq.filter(e=>!e.userConfigured),Kq=[]}function $q(e,t){return tJ(e,t).map(e=>e.mime)}function eJ(e,t){return tJ(e,t).map(e=>e.id)}function tJ(e,t){let n;if(e)switch(e.scheme){case A.file:n=e.fsPath;break;case A.data:n=Gs.parseMetaData(e).get(Gs.META_DATA_LABEL);break;case A.vscodeNotebookCell:n=void 0;break;default:n=e.path}if(!n)return[{id:`unknown`,mime:Yw.unknown}];n=n.toLowerCase();let r=pa(n),i=nJ(n,r,Kq);if(i)return[i,{id:LL,mime:Yw.text}];let a=nJ(n,r,Gq);if(a)return[a,{id:LL,mime:Yw.text}];if(t){let e=rJ(t);if(e)return[e,{id:LL,mime:Yw.text}]}return[{id:`unknown`,mime:Yw.unknown}]}function nJ(e,t,n){let r,i,a;for(let o=n.length-1;o>=0;o--){let s=n[o];if(to(t,s.filename,!0)){r=s;break}if(s.filepattern&&(!i||s.filepattern.length>i.filepattern.length)){let n=s.filepatternOnPath?e:t;s.filepatternParsed?.(n)&&(i=s)}s.extension&&(!a||s.extension.length>a.extension.length)&&ro(t,s.extension)&&(a=s)}if(r)return r;if(i)return i;if(a)return a}function rJ(e){if(Ao(e)&&(e=e.substring(1)),e.length>0)for(let t=Wq.length-1;t>=0;t--){let n=Wq[t];if(!n.firstline)continue;let r=e.match(n.firstline);if(r&&r.length>0)return n}}var iJ,aJ=class extends w{static#e=iJ=this;static#t=this.NO_FOLDER=null;constructor(e,t,n,r){super(),this.getExpression=e,this.shouldUpdate=t,this.contextService=n,this.configurationService=r,this._onExpressionChange=this._register(new E),this.onExpressionChange=this._onExpressionChange.event,this.mapFolderToParsedExpression=new Map,this.mapFolderToConfiguredExpression=new Map,this.updateExpressions(!1),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{this.shouldUpdate(e)&&this.updateExpressions(!0)})),this._register(this.contextService.onDidChangeWorkspaceFolders(()=>this.updateExpressions(!0)))}updateExpressions(e){let t=!1;for(let e of this.contextService.getWorkspace().folders){let n=e.uri.toString(),r=this.doGetExpression(e.uri),i=this.mapFolderToConfiguredExpression.get(n);r?(!i||!rk(i.expression,r.expression))&&(t=!0,this.mapFolderToParsedExpression.set(n,hK(r.expression)),this.mapFolderToConfiguredExpression.set(n,r)):i&&(t=!0,this.mapFolderToParsedExpression.delete(n),this.mapFolderToConfiguredExpression.delete(n))}let n=new fn(this.contextService.getWorkspace().folders.map(e=>e.uri));for(let[e]of this.mapFolderToConfiguredExpression)e!==iJ.NO_FOLDER&&(n.has(k.parse(e))||(this.mapFolderToParsedExpression.delete(e),this.mapFolderToConfiguredExpression.delete(e),t=!0));let r=this.doGetExpression(void 0),i=this.mapFolderToConfiguredExpression.get(iJ.NO_FOLDER);r?(!i||!rk(i.expression,r.expression))&&(t=!0,this.mapFolderToParsedExpression.set(iJ.NO_FOLDER,hK(r.expression)),this.mapFolderToConfiguredExpression.set(iJ.NO_FOLDER,r)):i&&(t=!0,this.mapFolderToParsedExpression.delete(iJ.NO_FOLDER),this.mapFolderToConfiguredExpression.delete(iJ.NO_FOLDER)),e&&t&&this._onExpressionChange.fire()}doGetExpression(e){let t=this.getExpression(e);if(!t)return;let n=Object.keys(t);if(n.length===0)return;let r=!1,i=Object.create(null);for(let e of n){r||=ca(e);let n=e,a=hee(n,!0);if(a){let e=a.toLowerCase();a!==a.toLowerCase()&&(n=`${e}${n.substring(1)}`)}i[n]=t[e]}return{expression:i,hasAbsolutePath:r}}matches(e,t){if(this.mapFolderToParsedExpression.size===0)return!1;let n=this.contextService.getWorkspaceFolder(e),r,i;if(n&&this.mapFolderToParsedExpression.has(n.uri.toString())?(r=this.mapFolderToParsedExpression.get(n.uri.toString()),i=this.mapFolderToConfiguredExpression.get(n.uri.toString())):(r=this.mapFolderToParsedExpression.get(iJ.NO_FOLDER),i=this.mapFolderToConfiguredExpression.get(iJ.NO_FOLDER)),!r)return!1;let a;return a=n?Ls(n.uri,e):this.uriToPath(e),typeof a==`string`&&r(a,void 0,t)?!0:a!==this.uriToPath(e)&&i?.hasAbsolutePath?!!r(this.uriToPath(e),void 0,t):!1}uriToPath(e){return e.scheme===A.file?e.fsPath:e.path}};aJ=iJ=t([n(2,fV),n(3,Dx)],aJ);var oJ;(function(e){e[e.Unnecessary=1]=`Unnecessary`,e[e.Deprecated=2]=`Deprecated`})(oJ||={});var sJ;(function(e){e[e.Hint=1]=`Hint`,e[e.Info=2]=`Info`,e[e.Warning=4]=`Warning`,e[e.Error=8]=`Error`})(sJ||={}),(function(e){function t(e,t){return t-e}e.compare=t;let n=Object.create(null);n[e.Error]=D(1996,`Error`),n[e.Warning]=D(1997,`Warning`),n[e.Info]=D(1998,`Info`);function r(e){return n[e]||``}e.toString=r;let i=Object.create(null);i[e.Error]=D(1999,`Errors`),i[e.Warning]=D(2e3,`Warnings`),i[e.Info]=D(2001,`Infos`);function a(e){return i[e]||``}e.toStringPlural=a;function o(t){switch(t){case Lx.Error:return e.Error;case Lx.Warning:return e.Warning;case Lx.Info:return e.Info;case Lx.Ignore:return e.Hint}}e.fromSeverity=o;function s(t){switch(t){case e.Error:return Lx.Error;case e.Warning:return Lx.Warning;case e.Info:return Lx.Info;case e.Hint:return Lx.Ignore}}e.toSeverity=s})(sJ||={});var cJ;(function(e){function t(e){return n(e,!0)}e.makeKey=t;function n(e,t){let n=[``];return e.source?n.push(e.source.replace(``,`\\`)):n.push(``),e.code?typeof e.code==`string`?n.push(e.code.replace(``,`\\`)):n.push(e.code.value.replace(``,`\\`)):n.push(``),e.severity!==void 0&&e.severity!==null?n.push(sJ.toString(e.severity)):n.push(``),e.message&&t?n.push(e.message.replace(``,`\\`)):n.push(``),e.startLineNumber!==void 0&&e.startLineNumber!==null?n.push(e.startLineNumber.toString()):n.push(``),e.startColumn!==void 0&&e.startColumn!==null?n.push(e.startColumn.toString()):n.push(``),e.endLineNumber!==void 0&&e.endLineNumber!==null?n.push(e.endLineNumber.toString()):n.push(``),e.endColumn!==void 0&&e.endColumn!==null?n.push(e.endColumn.toString()):n.push(``),n.push(``),n.join(``)}e.makeKeyOptionalMessage=n})(cJ||={});var lJ=V(`markerService`),uJ,dJ=new W(`autoSaveAfterShortDelayContext`,!1,!0),fJ;(function(e){e[e.OFF=0]=`OFF`,e[e.AFTER_SHORT_DELAY=1]=`AFTER_SHORT_DELAY`,e[e.AFTER_LONG_DELAY=2]=`AFTER_LONG_DELAY`,e[e.ON_FOCUS_CHANGE=3]=`ON_FOCUS_CHANGE`,e[e.ON_WINDOW_CHANGE=4]=`ON_WINDOW_CHANGE`})(fJ||={});var pJ;(function(e){e[e.SETTINGS=1]=`SETTINGS`,e[e.OUT_OF_WORKSPACE=2]=`OUT_OF_WORKSPACE`,e[e.ERRORS=3]=`ERRORS`,e[e.DISABLED=4]=`DISABLED`})(pJ||={});var mJ=class extends w{static#e=uJ=this;static#t=this.DEFAULT_AUTO_SAVE_MODE=di?Cb.AFTER_DELAY:Cb.OFF;static#n=this.DEFAULT_AUTO_SAVE_DELAY=1e3;static#r=this.READONLY_MESSAGES={providerReadonly:{value:D(14678,`Editor is read-only because the file system of the file is read-only.`),isTrusted:!0},sessionReadonly:{value:D(14679,`Editor is read-only because the file was set read-only in this session. [Click here](command:{0}) to set writeable.`,`workbench.action.files.setActiveEditorWriteableInSession`),isTrusted:!0},configuredReadonly:{value:D(14680,`Editor is read-only because the file was set read-only via settings. [Click here](command:{0}) to configure or [toggle for this session](command:{1}).`,`workbench.action.openSettings?%5B%22files.readonly%22%5D`,`workbench.action.files.toggleActiveEditorReadonlyInSession`),isTrusted:!0},fileLocked:{value:D(14681,`Editor is read-only because of file permissions. [Click here](command:{0}) to set writeable anyway.`,`workbench.action.files.setActiveEditorWriteableInSession`),isTrusted:!0},fileReadonly:{value:D(14682,`Editor is read-only because the file is read-only.`),isTrusted:!0}};constructor(e,t,n,r,i,a,o,s){super(),this.configurationService=t,this.contextService=n,this.environmentService=r,this.uriIdentityService=i,this.fileService=a,this.markerService=o,this.textResourceConfigurationService=s,this._onDidChangeAutoSaveConfiguration=this._register(new E),this.onDidChangeAutoSaveConfiguration=this._onDidChangeAutoSaveConfiguration.event,this._onDidChangeAutoSaveDisabled=this._register(new E),this.onDidChangeAutoSaveDisabled=this._onDidChangeAutoSaveDisabled.event,this._onDidChangeFilesAssociation=this._register(new E),this.onDidChangeFilesAssociation=this._onDidChangeFilesAssociation.event,this._onDidChangeReadonly=this._register(new E),this.onDidChangeReadonly=this._onDidChangeReadonly.event,this.autoSaveConfigurationCache=new gn(1e3),this.autoSaveAfterShortDelayOverrides=new dn,this.autoSaveDisabledOverrides=new dn,this.readonlyIncludeMatcher=this._register(new Tc(()=>this.createReadonlyMatcher(Db))),this.readonlyExcludeMatcher=this._register(new Tc(()=>this.createReadonlyMatcher(Ob))),this.sessionReadonlyOverrides=new dn(e=>this.uriIdentityService.extUri.getComparisonKey(e)),this.autoSaveAfterShortDelayContext=dJ.bindTo(e);let c=t.getValue();this.currentGlobalAutoSaveConfiguration=this.computeAutoSaveConfiguration(void 0,c.files),this.currentFilesAssociationConfiguration=c?.files?.associations,this.currentHotExitConfiguration=c?.files?.hotExit||wb.ON_EXIT,this.onFilesConfigurationChange(c,!1),this.registerListeners()}createReadonlyMatcher(e){let t=this._register(new aJ(t=>this.configurationService.getValue(e,{resource:t}),t=>t.affectsConfiguration(e),this.contextService,this.configurationService));return this._register(t.onExpressionChange(()=>this._onDidChangeReadonly.fire())),t}isReadonly(e,t){let n=this.fileService.getProvider(e.scheme);if(n&&cb(n))return n.readOnlyMessage??uJ.READONLY_MESSAGES.providerReadonly;let r=this.sessionReadonlyOverrides.get(e);return typeof r==`boolean`?r===!0?uJ.READONLY_MESSAGES.sessionReadonly:!1:this.uriIdentityService.extUri.isEqualOrParent(e,this.environmentService.userRoamingDataHome)||this.uriIdentityService.extUri.isEqual(e,this.contextService.getWorkspace().configuration??void 0)?!1:this.readonlyIncludeMatcher.value.matches(e)?this.readonlyExcludeMatcher.value.matches(e)?!1:uJ.READONLY_MESSAGES.configuredReadonly:this.configuredReadonlyFromPermissions&&t?.locked?uJ.READONLY_MESSAGES.fileLocked:t?.readonly?uJ.READONLY_MESSAGES.fileReadonly:!1}async updateReadonly(e,t){if(t===`toggle`){let n;try{n=await this.fileService.resolve(e,{resolveMetadata:!0})}catch{}t=!this.isReadonly(e,n)}t===`reset`?this.sessionReadonlyOverrides.delete(e):this.sessionReadonlyOverrides.set(e,t),this._onDidChangeReadonly.fire()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(`files`)&&this.onFilesConfigurationChange(this.configurationService.getValue(),!0)}))}onFilesConfigurationChange(e,t){this.currentGlobalAutoSaveConfiguration=this.computeAutoSaveConfiguration(void 0,e.files),this.autoSaveConfigurationCache.clear(),this.autoSaveAfterShortDelayContext.set(this.getAutoSaveMode(void 0).mode===fJ.AFTER_SHORT_DELAY),t&&this._onDidChangeAutoSaveConfiguration.fire();let n=e?.files?.associations;rk(this.currentFilesAssociationConfiguration,n)||(this.currentFilesAssociationConfiguration=n,t&&this._onDidChangeFilesAssociation.fire());let r=e?.files?.hotExit;r===wb.OFF||r===wb.ON_EXIT_AND_WINDOW_CLOSE?this.currentHotExitConfiguration=r:this.currentHotExitConfiguration=wb.ON_EXIT;let i=!!e?.files?.readonlyFromPermissions;i!==!!this.configuredReadonlyFromPermissions&&(this.configuredReadonlyFromPermissions=i,t&&this._onDidChangeReadonly.fire())}getAutoSaveConfiguration(e){let t=this.toResource(e);if(t){let e=this.autoSaveConfigurationCache.get(t);return e||(e=this.computeAutoSaveConfiguration(t,this.textResourceConfigurationService.getValue(t,`files`)),this.autoSaveConfigurationCache.set(t,e)),e}return this.currentGlobalAutoSaveConfiguration}computeAutoSaveConfiguration(e,t){let n,r,i,a,o,s;switch(t?.autoSave??uJ.DEFAULT_AUTO_SAVE_MODE){case Cb.AFTER_DELAY:n=`afterDelay`,r=typeof t?.autoSaveDelay==`number`&&t.autoSaveDelay>=0?t.autoSaveDelay:uJ.DEFAULT_AUTO_SAVE_DELAY,s=r<=uJ.DEFAULT_AUTO_SAVE_DELAY;break;case Cb.ON_FOCUS_CHANGE:n=`onFocusChange`;break;case Cb.ON_WINDOW_CHANGE:n=`onWindowChange`;break}return t?.autoSaveWorkspaceFilesOnly===!0&&(i=!0,e&&!this.contextService.isInsideWorkspace(e)&&(o=!0,s=void 0)),t?.autoSaveWhenNoErrors===!0&&(a=!0,s=void 0),{autoSave:n,autoSaveDelay:r,autoSaveWorkspaceFilesOnly:i,autoSaveWhenNoErrors:a,isOutOfWorkspace:o,isShortAutoSaveDelay:s}}toResource(e){return e instanceof mL?lL.getOriginalUri(e,{supportSideBySide:sL.PRIMARY}):e}hasShortAutoSaveDelay(e){let t=this.toResource(e);return t&&this.autoSaveAfterShortDelayOverrides.has(t)?!0:this.getAutoSaveConfiguration(t).isShortAutoSaveDelay?!t||!this.autoSaveDisabledOverrides.has(t):!1}getAutoSaveMode(e,t){let n=this.toResource(e);if(n&&this.autoSaveAfterShortDelayOverrides.has(n))return{mode:fJ.AFTER_SHORT_DELAY};if(n&&this.autoSaveDisabledOverrides.has(n))return{mode:fJ.OFF,reason:pJ.DISABLED};let r=this.getAutoSaveConfiguration(n);if(r.autoSave===void 0||typeof t==`number`&&(r.autoSave===`afterDelay`&&t!==ZI.AUTO||r.autoSave===`onFocusChange`&&t!==ZI.FOCUS_CHANGE&&t!==ZI.WINDOW_CHANGE||r.autoSave===`onWindowChange`&&t!==ZI.WINDOW_CHANGE))return{mode:fJ.OFF,reason:pJ.SETTINGS};if(n){if(r.autoSaveWorkspaceFilesOnly&&r.isOutOfWorkspace)return{mode:fJ.OFF,reason:pJ.OUT_OF_WORKSPACE};if(r.autoSaveWhenNoErrors&&this.markerService.read({resource:n,take:1,severities:sJ.Error}).length>0)return{mode:fJ.OFF,reason:pJ.ERRORS}}switch(r.autoSave){case`afterDelay`:return typeof r.autoSaveDelay==`number`&&r.autoSaveDelay<=uJ.DEFAULT_AUTO_SAVE_DELAY?{mode:r.autoSaveWhenNoErrors?fJ.AFTER_LONG_DELAY:fJ.AFTER_SHORT_DELAY}:{mode:fJ.AFTER_LONG_DELAY};case`onFocusChange`:return{mode:fJ.ON_FOCUS_CHANGE};case`onWindowChange`:return{mode:fJ.ON_WINDOW_CHANGE}}}async toggleAutoSave(){let e=this.configurationService.getValue(`files.autoSave`),t;return t=[Cb.AFTER_DELAY,Cb.ON_FOCUS_CHANGE,Cb.ON_WINDOW_CHANGE].some(t=>t===e)?Cb.OFF:Cb.AFTER_DELAY,this.configurationService.updateValue(`files.autoSave`,t)}enableAutoSaveAfterShortDelay(e){let t=this.toResource(e);if(!t)return w.None;let n=this.autoSaveAfterShortDelayOverrides.get(t)??0;return this.autoSaveAfterShortDelayOverrides.set(t,n+1),S(()=>{let e=this.autoSaveAfterShortDelayOverrides.get(t)??0;e<=1?this.autoSaveAfterShortDelayOverrides.delete(t):this.autoSaveAfterShortDelayOverrides.set(t,e-1)})}disableAutoSave(e){let t=this.toResource(e);if(!t)return w.None;let n=this.autoSaveDisabledOverrides.get(t)??0;return this.autoSaveDisabledOverrides.set(t,n+1),n===0&&this._onDidChangeAutoSaveDisabled.fire(t),S(()=>{let e=this.autoSaveDisabledOverrides.get(t)??0;e<=1?(this.autoSaveDisabledOverrides.delete(t),this._onDidChangeAutoSaveDisabled.fire(t)):this.autoSaveDisabledOverrides.set(t,e-1)})}get isHotExitEnabled(){return this.contextService.getWorkspace().transient?!1:this.currentHotExitConfiguration!==wb.OFF}get hotExitConfiguration(){return this.currentHotExitConfiguration}preventSaveConflicts(e,t){return this.configurationService.getValue(`files.saveConflictResolution`,{resource:e,overrideIdentifier:t})!==`overwriteFileOnDisk`}};mJ=uJ=t([n(0,uS),n(1,Dx),n(2,fV),n(3,Ly),n(4,ox),n(5,Ib),n(6,lJ),n(7,Lq)],mJ);var hJ=V(`filesConfigurationService`);s({});var gJ=B,_J={keybindingLabelBackground:void 0,keybindingLabelForeground:void 0,keybindingLabelBorder:void 0,keybindingLabelBottomBorder:void 0,keybindingLabelShadow:void 0},vJ=class e extends w{constructor(e,t,n){super(),this.os=t,this.keyElements=new Set,this.options=n||Object.create(null);let r=this.options.keybindingLabelForeground;this.domNode=z(e,gJ(`.monaco-keybinding`)),r&&(this.domNode.style.color=r),this.hover=this._register(wE().setupManagedHover(kE(`mouse`),this.domNode,``)),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(t,n){this.didEverRender&&this.keybinding===t&&e.areSame(this.matches,n)||(this.keybinding=t,this.matches=n,this.render())}render(){if(this.clear(),this.keybinding){let e=this.keybinding.getChords();e[0]&&this.renderChord(this.domNode,e[0],this.matches?this.matches.firstPart:null);for(let t=1;t<e.length;t++)z(this.domNode,gJ(`span.monaco-keybinding-key-chord-separator`,void 0,` `)),this.renderChord(this.domNode,e[t],this.matches?this.matches.chordPart:null);let t=this.options.disableTitle??!1?void 0:this.keybinding.getAriaLabel()||void 0;this.hover.update(t),this.domNode.setAttribute(`aria-label`,t||``)}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){og(this.domNode),this.keyElements.clear()}renderChord(e,t,n){let r=mV.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,r.ctrlKey,!!n?.ctrlKey,r.separator),t.shiftKey&&this.renderKey(e,r.shiftKey,!!n?.shiftKey,r.separator),t.altKey&&this.renderKey(e,r.altKey,!!n?.altKey,r.separator),t.metaKey&&this.renderKey(e,r.metaKey,!!n?.metaKey,r.separator);let i=t.keyLabel;i&&this.renderKey(e,i,!!n?.keyCode,``)}renderKey(e,t,n,r){z(e,this.createKeyElement(t,n?`.highlight`:``)),r&&z(e,gJ(`span.monaco-keybinding-key-separator`,void 0,r))}renderUnbound(e){z(e,this.createKeyElement(D(26,`Unbound`)))}createKeyElement(e,t=``){let n=gJ(`span.monaco-keybinding-key`+t,void 0,e);return this.keyElements.add(n),this.options.keybindingLabelBackground&&(n.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(n.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(n.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(n.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`),n}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&rk(e.firstPart,t.firstPart)&&rk(e.chordPart,t.chordPart)}},yJ={},bJ=class e extends w{constructor(e,t){super(),this.options=t,this.text=``,this.title=``,this.highlights=[],this.didEverRender=!1,this.domNode=z(e,B(`span.monaco-highlighted-label`))}get element(){return this.domNode}set(t,n=[],r=``,i,a){t||=``,i&&(t=e.escapeNewLines(t,n)),!(this.didEverRender&&this.text===t&&this.title===r&&rk(this.highlights,n))&&(this.text=t,this.title=r,this.highlights=n,this.render(a))}render(e){let t=[],n=0;for(let r of this.highlights){if(r.end===r.start)continue;if(n<r.start){let i=this.text.substring(n,r.start);e?t.push(...EA(i)):t.push(i),n=r.start}let i=this.text.substring(n,r.end),a=B(`span.highlight`,void 0,...e?EA(i):[i]);r.extraClasses&&a.classList.add(...r.extraClasses),t.push(a),n=r.end}if(n<this.text.length){let r=this.text.substring(n);e?t.push(...EA(r)):t.push(r)}if(z_(this.domNode,...t),!this.customHover&&this.title!==``){let e=this.options?.hoverDelegate??kE(`mouse`);this.customHover=this._register(wE().setupManagedHover(e,this.domNode,this.title))}else this.customHover&&this.customHover.update(this.title);this.didEverRender=!0}static escapeNewLines(e,t){let n=0,r=0;return e.replace(/\r\n|\r|\n/g,(e,i)=>{r=e===`\r
`?-1:0,i+=n;for(let e of t)e.end<=i||(e.start>=i&&(e.start+=r),e.end>=i&&(e.end+=r));return n+=r,``})}};s(yJ);var xJ=class{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set classNames(e){this.disposed||rk(e,this._classNames)||(this._classNames=e,this._element.classList.value=``,this._element.classList.add(...e))}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?`0`:``)}dispose(){this.disposed=!0}},SJ=class extends w{constructor(e,t){super(),this.customHovers=new Map,this.creationOptions=t,this.domNode=this._register(new xJ(z(e,B(`.monaco-icon-label`)))),this.labelContainer=z(this.domNode.element,B(`.monaco-icon-label-container`)),this.nameContainer=z(this.labelContainer,B(`span.monaco-icon-name-container`)),t?.supportHighlights||t?.supportIcons?this.nameNode=this._register(new TJ(this.nameContainer,!!t.supportIcons)):this.nameNode=new CJ(this.nameContainer),this.hoverDelegate=t?.hoverDelegate??kE(`mouse`)}get element(){return this.domNode.element}setLabel(e,t,n){let r=[`monaco-icon-label`],i=[`monaco-icon-label-container`],a=``;n&&(n.extraClasses&&r.push(...n.extraClasses),n.bold&&r.push(`bold`),n.italic&&r.push(`italic`),n.strikethrough&&r.push(`strikethrough`),n.disabledCommand&&i.push(`disabled`),n.title&&(typeof n.title==`string`?a+=n.title:a+=e));let o=this.domNode.element.querySelector(`.monaco-icon-label-iconpath`);if(n?.iconPath){let e;if(!o||!x_(o)?(e=B(`.monaco-icon-label-iconpath`),this.domNode.element.prepend(e)):e=o,lC.isThemeIcon(n.iconPath)){let t=lC.asClassName(n.iconPath);e.className=`monaco-icon-label-iconpath ${t}`,e.style.backgroundImage=``}else e.style.backgroundImage=MC(n?.iconPath);e.style.backgroundRepeat=`no-repeat`,e.style.backgroundPosition=`center`,e.style.backgroundSize=`contain`}else o&&o.remove();if(this.domNode.classNames=r,this.domNode.element.setAttribute(`aria-label`,a),this.labelContainer.classList.value=``,this.labelContainer.classList.add(...i),this.setupHover(n?.descriptionTitle?this.labelContainer:this.element,n?.title),this.nameNode.setLabel(e,n),t||this.descriptionNode){let e=this.getOrCreateDescriptionNode();if(e instanceof bJ){let r=n?.supportIcons??this.creationOptions?.supportIcons;e.set(t||``,n?n.descriptionMatches:void 0,void 0,n?.labelEscapeNewLines,r),this.setupHover(e.element,n?.descriptionTitle)}else e.textContent=t&&n?.labelEscapeNewLines?bJ.escapeNewLines(t,[]):t||``,this.setupHover(e.element,n?.descriptionTitle||``),e.empty=!t}if(n?.suffix||this.suffixNode){let e=this.getOrCreateSuffixNode();e.textContent=n?.suffix??``}}setupHover(e,t){let n=this.customHovers.get(e);if(n&&(n.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute(`title`);return}let r=e;if(this.creationOptions?.hoverTargetOverride){if(!Jg(e,this.creationOptions.hoverTargetOverride))throw Error(`hoverTargetOverrride must be an ancestor of the htmlElement`);r=this.creationOptions.hoverTargetOverride}let i=wE().setupManagedHover(this.hoverDelegate,r,t);i&&this.customHovers.set(e,i)}dispose(){super.dispose();for(let e of this.customHovers.values())e.dispose();this.customHovers.clear()}getOrCreateSuffixNode(){if(!this.suffixNode){let e=this._register(new xJ(L_(this.nameContainer,B(`span.monaco-icon-suffix-container`))));this.suffixNode=this._register(new xJ(z(e.element,B(`span.label-suffix`))))}return this.suffixNode}getOrCreateDescriptionNode(){if(!this.descriptionNode){let e=this._register(new xJ(z(this.labelContainer,B(`span.monaco-icon-description-container`))));this.creationOptions?.supportDescriptionHighlights?this.descriptionNode=this._register(new bJ(z(e.element,B(`span.label-description`)))):this.descriptionNode=this._register(new xJ(z(e.element,B(`span.label-description`))))}return this.descriptionNode}},CJ=class{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&rk(this.options,t)))if(this.label=e,this.options=t,typeof e==`string`)this.singleLabel||=(this.container.textContent=``,this.container.classList.remove(`multiple`),z(this.container,B(`a.label-name`,{id:t?.domId}))),this.singleLabel.textContent=e;else{this.container.textContent=``,this.container.classList.add(`multiple`),this.singleLabel=void 0;for(let n=0;n<e.length;n++){let r=e[n],i=t?.domId&&`${t?.domId}_${n}`;z(this.container,B(`a.label-name`,{id:i,"data-icon-label-count":e.length,"data-icon-label-index":n,role:`treeitem`},r)),n<e.length-1&&z(this.container,B(`span.label-separator`,void 0,t?.separator||`/`))}}}};function wJ(e,t,n){if(!n)return;let r=0;return e.map(e=>{let i={start:r,end:r+e.length},a=n.map(e=>bT.intersect(i,e)).filter(e=>!bT.isEmpty(e)).map(({start:e,end:t})=>({start:e-r,end:t-r}));return r=i.end+t.length,a})}var TJ=class extends w{constructor(e,t){super(),this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(this.label===e&&rk(this.options,t))return;this.label=e,this.options=t;let n=t?.supportIcons??this.supportIcons;if(typeof e==`string`)this.singleLabel||=(this.container.textContent=``,this.container.classList.remove(`multiple`),this._register(new bJ(z(this.container,B(`a.label-name`,{id:t?.domId}))))),this.singleLabel.set(e,t?.matches,void 0,t?.labelEscapeNewLines,n);else{this.container.textContent=``,this.container.classList.add(`multiple`),this.singleLabel=void 0;let r=t?.separator||`/`,i=wJ(e,r,t?.matches);for(let a=0;a<e.length;a++){let o=e[a],s=i?i[a]:void 0,c=B(`a.label-name`,{id:t?.domId&&`${t?.domId}_${a}`,"data-icon-label-count":e.length,"data-icon-label-index":a,role:`treeitem`});this._register(new bJ(z(this.container,c))).set(o,s,void 0,t?.labelEscapeNewLines,n),a<e.length-1&&z(c,B(`span.label-separator`,void 0,r))}}}},EJ=V(`IFileDecorationsService`),DJ=60,OJ=DJ*60,kJ=OJ*24,AJ=kJ*7,jJ=kJ*30,MJ=kJ*365;function NJ(e,t,n,r){if(e===void 0)return D(46,`unknown`);typeof e!=`number`&&(e=e.getTime());let i=Math.round((new Date().getTime()-e)/1e3);if(i<-30)return D(47,`in {0}`,NJ(new Date().getTime()+i*1e3,!1));if(!r&&i<30)return D(48,`now`);let a;return i<DJ?(a=i,t?a===1?n?D(49,`{0} second ago`,a):D(50,`{0} sec ago`,a):n?D(51,`{0} seconds ago`,a):D(52,`{0} secs ago`,a):a===1?n?D(53,`{0} second`,a):D(54,`{0} sec`,a):n?D(55,`{0} seconds`,a):D(56,`{0} secs`,a)):i<OJ?(a=Math.floor(i/DJ),t?a===1?n?D(57,`{0} minute ago`,a):D(58,`{0} min ago`,a):n?D(59,`{0} minutes ago`,a):D(60,`{0} mins ago`,a):a===1?n?D(61,`{0} minute`,a):D(62,`{0} min`,a):n?D(63,`{0} minutes`,a):D(64,`{0} mins`,a)):i<kJ?(a=Math.floor(i/OJ),t?a===1?n?D(65,`{0} hour ago`,a):D(66,`{0} hr ago`,a):n?D(67,`{0} hours ago`,a):D(68,`{0} hrs ago`,a):a===1?n?D(69,`{0} hour`,a):D(70,`{0} hr`,a):n?D(71,`{0} hours`,a):D(72,`{0} hrs`,a)):i<AJ?(a=Math.floor(i/kJ),t?a===1?D(73,`{0} day ago`,a):D(74,`{0} days ago`,a):a===1?D(75,`{0} day`,a):D(76,`{0} days`,a)):i<jJ?(a=Math.floor(i/AJ),t?a===1?n?D(77,`{0} week ago`,a):D(78,`{0} wk ago`,a):n?D(79,`{0} weeks ago`,a):D(80,`{0} wks ago`,a):a===1?n?D(81,`{0} week`,a):D(82,`{0} wk`,a):n?D(83,`{0} weeks`,a):D(84,`{0} wks`,a)):i<MJ?(a=Math.floor(i/jJ),t?a===1?n?D(85,`{0} month ago`,a):D(86,`{0} mo ago`,a):n?D(87,`{0} months ago`,a):D(88,`{0} mos ago`,a):a===1?n?D(89,`{0} month`,a):D(90,`{0} mo`,a):n?D(91,`{0} months`,a):D(92,`{0} mos`,a)):(a=Math.floor(i/MJ),t?a===1?n?D(93,`{0} year ago`,a):D(94,`{0} yr ago`,a):n?D(95,`{0} years ago`,a):D(96,`{0} yrs ago`,a):a===1?n?D(97,`{0} year`,a):D(98,`{0} yr`,a):n?D(99,`{0} years`,a):D(100,`{0} yrs`,a))}function PJ(e){return e.getFullYear()+`-`+String(e.getMonth()+1).padStart(2,`0`)+`-`+String(e.getDate()).padStart(2,`0`)+`T`+String(e.getHours()).padStart(2,`0`)+`:`+String(e.getMinutes()).padStart(2,`0`)+`:`+String(e.getSeconds()).padStart(2,`0`)+`.`+(e.getMilliseconds()/1e3).toFixed(3).slice(2,5)+`Z`}var FJ={DateTimeFormat(e,t){return new Sa(()=>{try{return new Intl.DateTimeFormat(e,t)}catch{return new Intl.DateTimeFormat(void 0,t)}})},Collator(e,t){return new Sa(()=>{try{return new Intl.Collator(e,t)}catch{return new Intl.Collator(void 0,t)}})},Segmenter(e,t){return new Sa(()=>{try{return new Intl.Segmenter(e,t)}catch{return new Intl.Segmenter(void 0,t)}})},Locale(e,t){return new Sa(()=>{try{return new Intl.Locale(e,t)}catch{return new Intl.Locale(`en`,t)}})},NumberFormat(e,t){return new Sa(()=>{try{return new Intl.NumberFormat(e,t)}catch{return new Intl.NumberFormat(void 0,t)}})}},IJ=new Sa(()=>{let e=FJ.Collator(void 0,{numeric:!0,sensitivity:`base`}).value;return{collator:e,collatorIsNumeric:e.resolvedOptions().numeric}}),LJ=new Sa(()=>({collator:FJ.Collator(void 0,{numeric:!0}).value})),RJ=new Sa(()=>({collator:FJ.Collator(void 0,{numeric:!0,sensitivity:`accent`}).value}));function zJ(e,t,n=!1){let r=e||``,i=t||``,a=IJ.value.collator.compare(r,i);return IJ.value.collatorIsNumeric&&a===0&&r!==i?r<i?-1:1:a}function BJ(e,t){let n=LJ.value.collator;return e||=``,t||=``,QJ(n,e,t)}function VJ(e,t){let n=LJ.value.collator;return e||=``,t||=``,nY(e,t)||QJ(n,e,t)}function HJ(e,t){let n=LJ.value.collator;return e||=``,t||=``,tY(e,t)||QJ(n,e,t)}function UJ(e,t){return e||=``,t||=``,e===t?0:e<t?-1:1}function WJ(e,t){let[n,r]=XJ(e),[i,a]=XJ(t),o=IJ.value.collator.compare(r,a);if(o===0){if(IJ.value.collatorIsNumeric&&r!==a)return r<a?-1:1;if(o=IJ.value.collator.compare(n,i),IJ.value.collatorIsNumeric&&o===0&&n!==i)return n<i?-1:1}return o}function GJ(e,t){e||=``,t||=``;let n=ZJ(e),r=ZJ(t),i=LJ.value.collator,a=RJ.value.collator;return QJ(a,n,r)||QJ(i,e,t)}function KJ(e,t){e||=``,t||=``;let n=ZJ(e),r=ZJ(t),i=LJ.value.collator,a=RJ.value.collator;return QJ(a,n,r)||nY(e,t)||QJ(i,e,t)}function qJ(e,t){e||=``,t||=``;let n=ZJ(e),r=ZJ(t),i=LJ.value.collator,a=RJ.value.collator;return QJ(a,n,r)||tY(e,t)||QJ(i,e,t)}function JJ(e,t){e||=``,t||=``;let n=ZJ(e).toLowerCase(),r=ZJ(t).toLowerCase();return n===r?e===t?0:e<t?-1:1:n<r?-1:1}var YJ=/^(.*?)(\.([^.]*))?$/;function XJ(e,t=!1){let n=e?YJ.exec(e):[],r=[n&&n[1]||``,n&&n[3]||``];return t&&(!r[0]&&r[1]||r[0]&&r[0].charAt(0)===`.`)&&(r=[r[0]+`.`+r[1],``]),r}function ZJ(e){let t=e?YJ.exec(e):[];return t&&t[1]&&t[1].charAt(0)!==`.`&&t[3]||``}function QJ(e,t,n){let r=e.compare(t,n);return r===0?t.length===n.length?0:t.length<n.length?-1:1:r}function $J(e){let t=e.charAt(0);return t.toLocaleUpperCase()!==t}function eY(e){let t=e.charAt(0);return t.toLocaleLowerCase()!==t}function tY(e,t){return $J(e)&&eY(t)?-1:eY(e)&&$J(t)?1:0}function nY(e,t){return eY(e)&&$J(t)?-1:$J(e)&&eY(t)?1:0}function rY(e,t,n=!1){return n||(e&&=e.toLowerCase(),t&&=t.toLowerCase()),e===t?0:e<t?-1:1}function iY(e,t,n=!1){let r=e.split(ga),i=t.split(ga),a=r.length-1,o=i.length-1,s,c;for(let e=0;;e++){if(s=a===e,c=o===e,s&&c)return zJ(r[e],i[e],n);if(s)return-1;if(c)return 1;let t=rY(r[e],i[e],n);if(t!==0)return t}}function aY(e,t,n){let r=e.toLowerCase(),i=t.toLowerCase(),a=oY(e,t,n);if(a)return a;let o=r.endsWith(n);if(o!==i.endsWith(n))return o?-1:1;let s=zJ(r,i);return s===0?r.localeCompare(i):s}function oY(e,t,n){let r=e.toLowerCase(),i=t.toLowerCase(),a=r.startsWith(n),o=i.startsWith(n);if(a!==o)return a?-1:1;if(a&&o){if(r.length<i.length)return-1;if(r.length>i.length)return 1}return 0}var sY;(function(e){e[e.FILE_IS_BINARY=0]=`FILE_IS_BINARY`})(sY||={});var cY=class extends yb{static isTextFileOperationError(e){return e instanceof Error&&!Ee(e.textFileOperationResult)}constructor(e,t,n){super(e,Sb.FILE_OTHER_ERROR),this.textFileOperationResult=t,this.options=n}},lY;(function(e){e[e.SAVED=0]=`SAVED`,e[e.DIRTY=1]=`DIRTY`,e[e.PENDING_SAVE=2]=`PENDING_SAVE`,e[e.CONFLICT=3]=`CONFLICT`,e[e.ORPHAN=4]=`ORPHAN`,e[e.ERROR=5]=`ERROR`})(lY||={});var uY;(function(e){e[e.EDITOR=1]=`EDITOR`,e[e.REFERENCE=2]=`REFERENCE`,e[e.OTHER=3]=`OTHER`})(uY||={});var dY;(function(e){e[e.Encode=0]=`Encode`,e[e.Decode=1]=`Decode`})(dY||={});function fY(e){let t=!1;return{read(){return t?null:(t=!0,e)}}}function pY(e){if(e!==void 0)return typeof e==`string`?Up.fromString(e):{read:()=>{let t=e.read();return typeof t==`string`?Up.fromString(t):null}}}var mY=class e{static ofLength(t,n){return new e(t,t+n)}static fromRange(t){return new e(t.startLineNumber,t.endLineNumber)}static fromRangeInclusive(t){return new e(t.startLineNumber,t.endLineNumber+1)}static#e=this.compareByStart=qt(e=>e.startLineNumber,Yt);static subtract(t,n){return n?t.startLineNumber<n.startLineNumber&&n.endLineNumberExclusive<t.endLineNumberExclusive?[new e(t.startLineNumber,n.startLineNumber),new e(n.endLineNumberExclusive,t.endLineNumberExclusive)]:n.startLineNumber<=t.startLineNumber&&t.endLineNumberExclusive<=n.endLineNumberExclusive?[]:n.endLineNumberExclusive<t.endLineNumberExclusive?[new e(Math.max(n.endLineNumberExclusive,t.startLineNumber),t.endLineNumberExclusive)]:[new e(t.startLineNumber,Math.min(n.startLineNumber,t.endLineNumberExclusive))]:[t]}static joinMany(e){if(e.length===0)return[];let t=new hY(e[0].slice());for(let n=1;n<e.length;n++)t=t.getUnion(new hY(e[n].slice()));return t.ranges}static join(t){if(t.length===0)throw new y(`lineRanges cannot be empty`);let n=t[0].startLineNumber,r=t[0].endLineNumberExclusive;for(let e=1;e<t.length;e++)n=Math.min(n,t[e].startLineNumber),r=Math.max(r,t[e].endLineNumberExclusive);return new e(n,r)}static deserialize(t){return new e(t[0],t[1])}constructor(e,t){if(e>t)throw new y(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}containsRange(e){return this.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(t){return new e(this.startLineNumber+t,this.endLineNumberExclusive+t)}deltaLength(t){return new e(this.startLineNumber,this.endLineNumberExclusive+t)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(t){return new e(Math.min(this.startLineNumber,t.startLineNumber),Math.max(this.endLineNumberExclusive,t.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(t){let n=Math.max(this.startLineNumber,t.startLineNumber),r=Math.min(this.endLineNumberExclusive,t.endLineNumberExclusive);if(n<=r)return new e(n,r)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}intersectsOrTouches(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new X(this.startLineNumber,1,this.endLineNumberExclusive-1,2**53-1)}toExclusiveRange(){return new X(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let t=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)t.push(e(n));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}toOffsetRange(){return new RK(this.startLineNumber-1,this.endLineNumberExclusive-1)}distanceToRange(e){return this.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-this.endLineNumberExclusive:e.endLineNumberExclusive<=this.startLineNumber?this.startLineNumber-e.endLineNumberExclusive:0}distanceToLine(e){return this.contains(e)?0:e<this.startLineNumber?this.startLineNumber-e:e-this.endLineNumberExclusive}addMargin(t,n){return new e(this.startLineNumber-t,this.endLineNumberExclusive+n)}},hY=class e{constructor(e=[]){this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;let t=nt(this._normalizedRanges,t=>t.endLineNumberExclusive>=e.startLineNumber),n=et(this._normalizedRanges,t=>t.startLineNumber<=e.endLineNumberExclusive)+1;if(t===n)this._normalizedRanges.splice(t,0,e);else if(t===n-1){let n=this._normalizedRanges[t];this._normalizedRanges[t]=n.join(e)}else{let r=this._normalizedRanges[t].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(t,n-t,r)}}contains(e){let t=$e(this._normalizedRanges,t=>t.startLineNumber<=e);return!!t&&t.endLineNumberExclusive>e}intersects(e){let t=$e(this._normalizedRanges,t=>t.startLineNumber<e.endLineNumberExclusive);return!!t&&t.endLineNumberExclusive>e.startLineNumber}getUnion(t){if(this._normalizedRanges.length===0)return t;if(t._normalizedRanges.length===0)return this;let n=[],r=0,i=0,a=null;for(;r<this._normalizedRanges.length||i<t._normalizedRanges.length;){let e=null;if(r<this._normalizedRanges.length&&i<t._normalizedRanges.length){let n=this._normalizedRanges[r],a=t._normalizedRanges[i];n.startLineNumber<a.startLineNumber?(e=n,r++):(e=a,i++)}else r<this._normalizedRanges.length?(e=this._normalizedRanges[r],r++):(e=t._normalizedRanges[i],i++);a===null?a=e:a.endLineNumberExclusive>=e.startLineNumber?a=new mY(a.startLineNumber,Math.max(a.endLineNumberExclusive,e.endLineNumberExclusive)):(n.push(a),a=e)}return a!==null&&n.push(a),new e(n)}subtractFrom(t){let n=nt(this._normalizedRanges,e=>e.endLineNumberExclusive>=t.startLineNumber),r=et(this._normalizedRanges,e=>e.startLineNumber<=t.endLineNumberExclusive)+1;if(n===r)return new e([t]);let i=[],a=t.startLineNumber;for(let e=n;e<r;e++){let t=this._normalizedRanges[e];t.startLineNumber>a&&i.push(new mY(a,t.startLineNumber)),a=t.endLineNumberExclusive}return a<t.endLineNumberExclusive&&i.push(new mY(a,t.endLineNumberExclusive)),new e(i)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(`, `)}getIntersection(t){let n=[],r=0,i=0;for(;r<this._normalizedRanges.length&&i<t._normalizedRanges.length;){let e=this._normalizedRanges[r],a=t._normalizedRanges[i],o=e.intersect(a);o&&!o.isEmpty&&n.push(o),e.endLineNumberExclusive<a.endLineNumberExclusive?r++:i++}return new e(n)}getWithDelta(t){return new e(this._normalizedRanges.map(e=>e.delta(t)))}},gY=V(`codeEditorService`),_Y=V(`textModelService`),vY=class e{static#e=this.REGISTERED_COMMANDS=new Set;static getRegisteredCommands(){return[...e.REGISTERED_COMMANDS]}static registerCommand(t){e.REGISTERED_COMMANDS.add(t)}},yY;(function(e){e[e.Eager=0]=`Eager`,e[e.AfterFirstRender=1]=`AfterFirstRender`,e[e.BeforeFirstInteraction=2]=`BeforeFirstInteraction`,e[e.Eventually=3]=`Eventually`,e[e.Lazy=4]=`Lazy`})(yY||={});var bY=class{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this.metadata=e.metadata,this.canTriggerInlineEdits=e.canTriggerInlineEdits}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){let e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(let t of e){let e=t.kbExpr;this.precondition&&(e=e?jS.and(e,this.precondition):this.precondition);let n={id:this.id,weight:t.weight,args:t.args,when:e,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};aC.registerKeybindingRule(n)}}fS.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),metadata:this.metadata}),this.canTriggerInlineEdits&&vY.registerCommand(this.id)}_registerMenuItem(e){mC.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}},xY=class extends bY{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,n,r){return this._implementations.push({priority:e,name:t,implementation:n,when:r}),this._implementations.sort((e,t)=>t.priority-e.priority),{dispose:()=>{for(let e=0;e<this._implementations.length;e++)if(this._implementations[e].implementation===n){this._implementations.splice(e,1);return}}}}runCommand(e,t){let n=e.get(Lb),r=e.get(uS);n.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(let i of this._implementations){if(i.when){let e=r.getContext(i_());if(!i.when.evaluate(e))continue}let a=i.implementation(e,t);if(a)return n.trace(`Command '${this.id}' was handled by '${i.name}'.`),typeof a==`boolean`?void 0:a}n.trace(`The Command '${this.id}' was not handled by any implementation.`)}},SY=class extends bY{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}},CY=class e extends bY{static bindToContribution(t){return class extends e{constructor(e){super(e),this._callback=e.handler}runEditorCommand(e,n,r){let i=t(n);i&&this._callback(i,r)}}}static runEditorCommand(e,t,n,r){let i=e.get(gY),a=i.getFocusedCodeEditor()||i.getActiveCodeEditor();if(a)return a.invokeWithinContext(e=>{if(e.get(uS).contextMatchesRules(n??void 0))return r(e,a,t)})}runCommand(t,n){return e.runEditorCommand(t,n,this.precondition,(e,t,n)=>this.runEditorCommand(e,t,n))}},wY=class e extends CY{static convertOptions(e){let t;t=Array.isArray(e.menuOpts)?e.menuOpts:e.menuOpts?[e.menuOpts]:[];function n(t){return t.menuId||=fC.EditorContext,t.title||=typeof e.label==`string`?e.label:e.label.value,t.when=jS.and(e.precondition,t.when),t}return Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(n)):e.contextMenuOpts&&t.push(n(e.contextMenuOpts)),e.menuOpts=t,e}constructor(t){super(e.convertOptions(t)),typeof t.label==`string`?(this.label=t.label,this.alias=t.alias??t.label):(this.label=t.label.value,this.alias=t.alias??t.label.original)}runEditorCommand(e,t,n){return this.reportTelemetry(e,t),this.run(e,t,n||{})}reportTelemetry(e,t){e.get(NI).publicLog2(`editorActionInvoked`,{name:this.label,id:this.id})}},TY=class extends wY{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((e,t)=>t[0]-e[0]),{dispose:()=>{for(let e=0;e<this._implementations.length;e++)if(this._implementations[e][1]===t){this._implementations.splice(e,1);return}}}}run(e,t,n){for(let r of this._implementations){let i=r[1](e,t,n);if(i)return typeof i==`boolean`?void 0:i}}},EY=class extends _C{run(e,...t){let n=e.get(gY),r=n.getFocusedCodeEditor()||n.getActiveCodeEditor();if(r)return r.invokeWithinContext(e=>{let n=e.get(uS),i=e.get(Lb);if(!n.contextMatchesRules(this.desc.precondition??void 0)){i.debug(`[EditorAction2] NOT running command because its precondition is FALSE`,this.desc.id,this.desc.precondition?.serialize());return}return this.runEditorCommand(e,r,...t)})}};function DY(e,t){fS.registerCommand(e,function(e,...n){let r=e.get(Cy),[i,a]=n;De(k.isUri(i)),De(KK.isIPosition(a));let o=e.get(II).getModel(i);if(o){let e=KK.lift(a);return r.invokeFunction(t,o,e,...n.slice(2))}return e.get(_Y).createModelReference(i).then(e=>new Promise((i,o)=>{try{i(r.invokeFunction(t,e.object.textEditorModel,KK.lift(a),n.slice(2)))}catch(e){o(e)}}).finally(()=>{e.dispose()}))})}function OY(e){return IY.INSTANCE.registerEditorCommand(e),e}function kY(e){let t=new e;return IY.INSTANCE.registerEditorAction(t),t}function AY(e){return IY.INSTANCE.registerEditorAction(e),e}function jY(e){IY.INSTANCE.registerEditorAction(e)}function MY(e,t,n){IY.INSTANCE.registerEditorContribution(e,t,n)}function NY(e,t){IY.INSTANCE.registerDiffEditorContribution(e,t)}var PY;(function(e){function t(e){return IY.INSTANCE.getEditorCommand(e)}e.getEditorCommand=t;function n(){return IY.INSTANCE.getEditorActions()}e.getEditorActions=n;function r(){return IY.INSTANCE.getEditorContributions()}e.getEditorContributions=r;function i(e){return IY.INSTANCE.getEditorContributions().filter(t=>e.indexOf(t.id)>=0)}e.getSomeEditorContributions=i;function a(){return IY.INSTANCE.getDiffEditorContributions()}e.getDiffEditorContributions=a})(PY||={});var FY={EditorCommonContributions:`editor.contributions`},IY=class e{static#e=this.INSTANCE=new e;constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t,n){this.editorContributions.push({id:e,ctor:t,instantiation:n})}getEditorContributions(){return this.editorContributions.slice(0)}registerDiffEditorContribution(e,t){this.diffEditorContributions.push({id:e,ctor:t})}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}};hr.add(FY.EditorCommonContributions,IY.INSTANCE);function LY(e){return e.register(),e}var RY=LY(new xY({id:`undo`,precondition:void 0,kbOpts:{weight:iC.EditorCore,primary:Qf.CtrlCmd|F.KeyZ},menuOpts:[{menuId:fC.MenubarEditMenu,group:`1_do`,title:D(143,`&&Undo`),order:1},{menuId:fC.CommandPalette,group:``,title:D(144,`Undo`),order:1},{menuId:fC.SimpleEditorContext,group:`1_do`,title:D(144,`Undo`),order:1}]}));LY(new SY(RY,{id:`default:undo`,precondition:void 0}));var zY=LY(new xY({id:`redo`,precondition:void 0,kbOpts:{weight:iC.EditorCore,primary:Qf.CtrlCmd|F.KeyY,secondary:[Qf.CtrlCmd|Qf.Shift|F.KeyZ],mac:{primary:Qf.CtrlCmd|Qf.Shift|F.KeyZ}},menuOpts:[{menuId:fC.MenubarEditMenu,group:`1_do`,title:D(145,`&&Redo`),order:2},{menuId:fC.CommandPalette,group:``,title:D(146,`Redo`),order:1},{menuId:fC.SimpleEditorContext,group:`1_do`,title:D(146,`Redo`),order:2}]}));LY(new SY(zY,{id:`default:redo`,precondition:void 0}));var BY=LY(new xY({id:`editor.action.selectAll`,precondition:void 0,kbOpts:{weight:iC.EditorCore,kbExpr:null,primary:Qf.CtrlCmd|F.KeyA},menuOpts:[{menuId:fC.MenubarSelectionMenu,group:`1_basic`,title:D(147,`&&Select All`),order:1},{menuId:fC.CommandPalette,group:``,title:D(148,`Select All`),order:1},{menuId:fC.SimpleEditorContext,group:`9_select`,title:D(148,`Select All`),order:1}]})),VY=`default`,HY=`$initialize`,UY=!1;function WY(e){di&&(UY||(UY=!0,console.warn(`Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq`)),console.warn(e.message))}var GY;(function(e){e[e.Request=0]=`Request`,e[e.Reply=1]=`Reply`,e[e.SubscribeEvent=2]=`SubscribeEvent`,e[e.Event=3]=`Event`,e[e.UnsubscribeEvent=4]=`UnsubscribeEvent`})(GY||={});var KY=class{constructor(e,t,n,r,i){this.vsWorker=e,this.req=t,this.channel=n,this.method=r,this.args=i,this.type=GY.Request}},qY=class{constructor(e,t,n,r){this.vsWorker=e,this.seq=t,this.res=n,this.err=r,this.type=GY.Reply}},JY=class{constructor(e,t,n,r,i){this.vsWorker=e,this.req=t,this.channel=n,this.eventName=r,this.arg=i,this.type=GY.SubscribeEvent}},YY=class{constructor(e,t,n){this.vsWorker=e,this.req=t,this.event=n,this.type=GY.Event}},XY=class{constructor(e,t){this.vsWorker=e,this.req=t,this.type=GY.UnsubscribeEvent}},ZY=class{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}async sendMessage(e,t,n){let r=String(++this._lastSentReq);return new Promise((i,a)=>{this._pendingReplies[r]={resolve:i,reject:a},this._send(new KY(this._workerId,r,e,t,n))})}listen(e,t,n){let r=null,i=new E({onWillAddFirstListener:()=>{r=String(++this._lastSentReq),this._pendingEmitters.set(r,i),this._send(new JY(this._workerId,r,e,t,n))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(r),this._send(new XY(this._workerId,r)),r=null}});return i.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}createProxyToRemoteChannel(e,t){return new Proxy(Object.create(null),{get:(n,r)=>(typeof r==`string`&&!n[r]&&(eX(r)?n[r]=t=>this.listen(e,r,t):$Y(r)?n[r]=this.listen(e,r,void 0):r.charCodeAt(0)===O.DollarSign&&(n[r]=async(...n)=>(await t?.(),this.sendMessage(e,r,n)))),n[r])})}_handleMessage(e){switch(e.type){case GY.Reply:return this._handleReplyMessage(e);case GY.Request:return this._handleRequestMessage(e);case GY.SubscribeEvent:return this._handleSubscribeEventMessage(e);case GY.Event:return this._handleEventMessage(e);case GY.UnsubscribeEvent:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn(`Got reply to unknown seq`);return}let t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let n=e.err;if(e.err.$isError){let t=Error();t.name=e.err.name,t.message=e.err.message,t.stack=e.err.stack,n=t}t.reject(n);return}t.resolve(e.res)}_handleRequestMessage(e){let t=e.req;this._handler.handleMessage(e.channel,e.method,e.args).then(e=>{this._send(new qY(this._workerId,t,e,void 0))},e=>{e.detail instanceof Error&&(e.detail=h(e.detail)),this._send(new qY(this._workerId,t,void 0,h(e)))})}_handleSubscribeEventMessage(e){let t=e.req,n=this._handler.handleEvent(e.channel,e.eventName,e.arg)(e=>{this._send(new YY(this._workerId,t,e))});this._pendingEvents.set(t,n)}_handleEventMessage(e){let t=this._pendingEmitters.get(e.req);if(t===void 0){console.warn(`Got event for unknown req`);return}t.fire(e.event)}_handleUnsubscribeEventMessage(e){let t=this._pendingEvents.get(e.req);if(t===void 0){console.warn(`Got unsubscribe for unknown req`);return}t.dispose(),this._pendingEvents.delete(e.req)}_send(e){let t=[];if(e.type===GY.Request)for(let n=0;n<e.args.length;n++){let r=e.args[n];r instanceof ArrayBuffer&&t.push(r)}else e.type===GY.Reply&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}},QY=class extends w{constructor(e){super(),this._localChannels=new Map,this._remoteChannels=new Map,this._worker=this._register(e),this._register(this._worker.onMessage(e=>{this._protocol.handleMessage(e)})),this._register(this._worker.onError(e=>{WY(e),p(e)})),this._protocol=new ZY({sendMessage:(e,t)=>{this._worker.postMessage(e,t)},handleMessage:(e,t,n)=>this._handleMessage(e,t,n),handleEvent:(e,t,n)=>this._handleEvent(e,t,n)}),this._protocol.setWorkerId(this._worker.getId()),this._onModuleLoaded=this._protocol.sendMessage(VY,HY,[this._worker.getId()]).then(()=>{}),this.proxy=this._protocol.createProxyToRemoteChannel(VY,async()=>{await this._onModuleLoaded}),this._onModuleLoaded.catch(e=>{this._onError(`Worker failed to load `,e)})}_handleMessage(e,t,n){let r=this._localChannels.get(e);if(!r)return Promise.reject(Error(`Missing channel ${e} on main thread`));let i=r[t];if(typeof i!=`function`)return Promise.reject(Error(`Missing method ${t} on main thread channel ${e}`));try{return Promise.resolve(i.apply(r,n))}catch(e){return Promise.reject(e)}}_handleEvent(e,t,n){let r=this._localChannels.get(e);if(!r)throw Error(`Missing channel ${e} on main thread`);if(eX(t)){let i=r[t];if(typeof i!=`function`)throw Error(`Missing dynamic event ${t} on main thread channel ${e}.`);let a=i.call(r,n);if(typeof a!=`function`)throw Error(`Missing dynamic event ${t} on main thread channel ${e}.`);return a}if($Y(t)){let n=r[t];if(typeof n!=`function`)throw Error(`Missing event ${t} on main thread channel ${e}.`);return n}throw Error(`Malformed event name ${t}`)}setChannel(e,t){this._localChannels.set(e,t)}getChannel(e){let t=this._remoteChannels.get(e);return t===void 0&&(t=this._protocol.createProxyToRemoteChannel(e,async()=>{await this._onModuleLoaded}),this._remoteChannels.set(e,t)),t}_onError(e,t){console.error(e),console.info(t)}};function $Y(e){return e[0]===`o`&&e[1]===`n`&&$a(e.charCodeAt(2))}function eX(e){return/^onDynamic/.test(e)&&$a(e.charCodeAt(9))}var tX=V(`IWebWorkerService`),nX=V(`languageConfigurationService`),rX=class e{constructor(t){let n=wa(t);this._defaultValue=n,this._asciiMap=e._createAsciiMap(n),this._map=new Map}static _createAsciiMap(e){let t=new Uint8Array(256);return t.fill(e),t}set(e,t){let n=wa(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}},iX;(function(e){e[e.False=0]=`False`,e[e.True=1]=`True`})(iX||={});var aX=class{constructor(){this._actual=new rX(iX.False)}add(e){this._actual.set(e,iX.True)}has(e){return this._actual.get(e)===iX.True}clear(){return this._actual.clear()}},oX;(function(e){e[e.LTR=0]=`LTR`,e[e.RTL=1]=`RTL`})(oX||={});var sX=class e extends X{constructor(e,t,n,r){super(e,t,n,r),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=n,this.positionColumn=r}toString(){return`[`+this.selectionStartLineNumber+`,`+this.selectionStartColumn+` -> `+this.positionLineNumber+`,`+this.positionColumn+`]`}equalsSelection(t){return e.selectionsEqual(this,t)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?oX.LTR:oX.RTL}setEndPosition(t,n){return this.getDirection()===oX.LTR?new e(this.startLineNumber,this.startColumn,t,n):new e(t,n,this.startLineNumber,this.startColumn)}getPosition(){return new KK(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new KK(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(t,n){return this.getDirection()===oX.LTR?new e(t,n,this.endLineNumber,this.endColumn):new e(this.endLineNumber,this.endColumn,t,n)}static fromPositions(t,n=t){return new e(t.lineNumber,t.column,n.lineNumber,n.column)}static fromRange(t,n){return n===oX.LTR?new e(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):new e(t.endLineNumber,t.endColumn,t.startLineNumber,t.startColumn)}static liftSelection(t){return new e(t.selectionStartLineNumber,t.selectionStartColumn,t.positionLineNumber,t.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}static isISelection(e){return!!e&&typeof e.selectionStartLineNumber==`number`&&typeof e.selectionStartColumn==`number`&&typeof e.positionLineNumber==`number`&&typeof e.positionColumn==`number`}static createWithDirection(t,n,r,i,a){return a===oX.LTR?new e(t,n,r,i):new e(r,i,t,n)}},cX;(function(e){e[e.Regular=0]=`Regular`,e[e.Whitespace=1]=`Whitespace`,e[e.WordSeparator=2]=`WordSeparator`})(cX||={});var lX=class extends rX{constructor(e,t){super(cX.Regular),this._segmenter=null,this._cachedLine=null,this._cachedSegments=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this._segmenter=FJ.Segmenter(this.intlSegmenterLocales,{granularity:`word`}):this._segmenter=null;for(let t=0,n=e.length;t<n;t++)this.set(e.charCodeAt(t),cX.WordSeparator);this.set(O.Space,cX.Whitespace),this.set(O.Tab,cX.Whitespace)}findPrevIntlWordBeforeOrAtOffset(e,t){let n=null;for(let r of this._getIntlSegmenterWordsOnLine(e)){if(r.index>t)break;n=r}return n}findNextIntlWordAtOrAfterOffset(e,t){for(let n of this._getIntlSegmenterWordsOnLine(e))if(!(n.index<t))return n;return null}_getIntlSegmenterWordsOnLine(e){return this._segmenter?this._cachedLine===e?this._cachedSegments:(this._cachedLine=e,this._cachedSegments=this._filterWordSegments(this._segmenter.value.segment(e)),this._cachedSegments):[]}_filterWordSegments(e){let t=[];for(let n of e)this._isWordLike(n)&&t.push(n);return t}_isWordLike(e){return!!e.isWordLike}},uX=new gn(10);function dX(e,t){let n=`${e}/${t.join(`,`)}`,r=uX.get(n);return r||(r=new lX(e,t),uX.set(n,r)),r}var fX=999,pX=class{constructor(e,t,n,r){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=r}parseSearchRequest(){if(this.searchString===``)return null;let e;e=this.isRegex?mX(this.searchString):this.searchString.indexOf(`
`)>=0;let t=null;try{t=Ba(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new mre(t,this.wordSeparators?dX(this.wordSeparators,[]):null,n?this.searchString:null)}};function mX(e){if(!e||e.length===0)return!1;for(let t=0,n=e.length;t<n;t++){let r=e.charCodeAt(t);if(r===O.LineFeed)return!0;if(r===O.Backslash){if(t++,t>=n)break;let r=e.charCodeAt(t);if(r===O.n||r===O.r||r===O.W)return!0}}return!1}function hX(e,t,n){if(!n)return new kL(e,null);let r=[];for(let e=0,n=t.length;e<n;e++)r[e]=t[e];return new kL(e,r)}var gX=class{constructor(e){let t=[],n=0;for(let r=0,i=e.length;r<i;r++)e.charCodeAt(r)===O.LineFeed&&(t[n++]=r);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){let t=this._lineFeedsOffsets,n=0,r=t.length-1;if(r===-1||e<=t[0])return 0;for(;n<r;){let i=n+((r-n)/2>>0);t[i]>=e?r=i-1:t[i+1]>=e?(n=i,r=i):n=i+1}return n+1}},_X=class{static findMatches(e,t,n,r,i){let a=t.parseSearchRequest();return a?a.regex.multiline?this._doFindMatchesMultiline(e,n,new xX(a.wordSeparators,a.regex),r,i):this._doFindMatchesLineByLine(e,n,a,r,i):[]}static _getMultilineMatchRange(e,t,n,r,i,a){let o,s=0;r?(s=r.findLineFeedCountBeforeOffset(i),o=t+i+s):o=t+i;let c;if(r){let e=r.findLineFeedCountBeforeOffset(i+a.length)-s;c=o+a.length+e}else c=o+a.length;let l=e.getPositionAt(o),u=e.getPositionAt(c);return new X(l.lineNumber,l.column,u.lineNumber,u.column)}static _doFindMatchesMultiline(e,t,n,r,i){let a=e.getOffsetAt(t.getStartPosition()),o=e.getValueInRange(t,TL.LF),s=e.getEOL()===`\r
`?new gX(o):null,c=[],l=0,u;for(n.reset(0);u=n.next(o);)if(c[l++]=hX(this._getMultilineMatchRange(e,a,o,s,u.index,u[0]),u,r),l>=i)return c;return c}static _doFindMatchesLineByLine(e,t,n,r,i){let a=[],o=0;if(t.startLineNumber===t.endLineNumber){let s=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return o=this._findMatchesInLine(n,s,t.startLineNumber,t.startColumn-1,o,a,r,i),a}let s=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);o=this._findMatchesInLine(n,s,t.startLineNumber,t.startColumn-1,o,a,r,i);for(let s=t.startLineNumber+1;s<t.endLineNumber&&o<i;s++)o=this._findMatchesInLine(n,e.getLineContent(s),s,0,o,a,r,i);if(o<i){let s=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);o=this._findMatchesInLine(n,s,t.endLineNumber,0,o,a,r,i)}return a}static _findMatchesInLine(e,t,n,r,i,a,o,s){let c=e.wordSeparators;if(!o&&e.simpleSearch){let o=e.simpleSearch,l=o.length,u=t.length,d=-l;for(;(d=t.indexOf(o,d+l))!==-1;)if((!c||bX(c,t,u,d,l))&&(a[i++]=new kL(new X(n,d+1+r,n,d+1+l+r),null),i>=s))return i;return i}let l=new xX(e.wordSeparators,e.regex),u;l.reset(0);do if(u=l.next(t),u&&(a[i++]=hX(new X(n,u.index+1+r,n,u.index+1+u[0].length+r),u,o),i>=s))return i;while(u);return i}static findNextMatch(e,t,n,r){let i=t.parseSearchRequest();if(!i)return null;let a=new xX(i.wordSeparators,i.regex);return i.regex.multiline?this._doFindNextMatchMultiline(e,n,a,r):this._doFindNextMatchLineByLine(e,n,a,r)}static _doFindNextMatchMultiline(e,t,n,r){let i=new KK(t.lineNumber,1),a=e.getOffsetAt(i),o=e.getLineCount(),s=e.getValueInRange(new X(i.lineNumber,i.column,o,e.getLineMaxColumn(o)),TL.LF),c=e.getEOL()===`\r
`?new gX(s):null;n.reset(t.column-1);let l=n.next(s);return l?hX(this._getMultilineMatchRange(e,a,s,c,l.index,l[0]),l,r):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new KK(1,1),n,r):null}static _doFindNextMatchLineByLine(e,t,n,r){let i=e.getLineCount(),a=t.lineNumber,o=e.getLineContent(a),s=this._findFirstMatchInLine(n,o,a,t.column,r);if(s)return s;for(let t=1;t<=i;t++){let o=(a+t-1)%i,s=e.getLineContent(o+1),c=this._findFirstMatchInLine(n,s,o+1,1,r);if(c)return c}return null}static _findFirstMatchInLine(e,t,n,r,i){e.reset(r-1);let a=e.next(t);return a?hX(new X(n,a.index+1,n,a.index+1+a[0].length),a,i):null}static findPreviousMatch(e,t,n,r){let i=t.parseSearchRequest();if(!i)return null;let a=new xX(i.wordSeparators,i.regex);return i.regex.multiline?this._doFindPreviousMatchMultiline(e,n,a,r):this._doFindPreviousMatchLineByLine(e,n,a,r)}static _doFindPreviousMatchMultiline(e,t,n,r){let i=this._doFindMatchesMultiline(e,new X(1,1,t.lineNumber,t.column),n,r,10*fX);if(i.length>0)return i[i.length-1];let a=e.getLineCount();return t.lineNumber!==a||t.column!==e.getLineMaxColumn(a)?this._doFindPreviousMatchMultiline(e,new KK(a,e.getLineMaxColumn(a)),n,r):null}static _doFindPreviousMatchLineByLine(e,t,n,r){let i=e.getLineCount(),a=t.lineNumber,o=e.getLineContent(a).substring(0,t.column-1),s=this._findLastMatchInLine(n,o,a,r);if(s)return s;for(let t=1;t<=i;t++){let o=(i+a-t-1)%i,s=e.getLineContent(o+1),c=this._findLastMatchInLine(n,s,o+1,r);if(c)return c}return null}static _findLastMatchInLine(e,t,n,r){let i=null,a;for(e.reset(0);a=e.next(t);)i=hX(new X(n,a.index+1,n,a.index+1+a[0].length),a,r);return i}};function vX(e,t,n,r,i){if(r===0)return!0;let a=t.charCodeAt(r-1);if(e.get(a)!==cX.Regular||a===O.CarriageReturn||a===O.LineFeed)return!0;if(i>0){let n=t.charCodeAt(r);if(e.get(n)!==cX.Regular)return!0}return!1}function yX(e,t,n,r,i){if(r+i===n)return!0;let a=t.charCodeAt(r+i);if(e.get(a)!==cX.Regular||a===O.CarriageReturn||a===O.LineFeed)return!0;if(i>0){let n=t.charCodeAt(r+i-1);if(e.get(n)!==cX.Regular)return!0}return!1}function bX(e,t,n,r,i){return vX(e,t,n,r,i)&&yX(e,t,n,r,i)}var xX=class{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){let t=e.length,n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(n=this._searchRegex.exec(e),!n))return null;let r=n.index,i=n[0].length;if(r===this._prevMatchStartIndex&&i===this._prevMatchLength){if(i===0){lo(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=r,this._prevMatchLength=i,!this._wordSeparators||bX(this._wordSeparators,e,t,r,i))return n}while(n);return null}},SX=class e{static#e=this.zero=new e(0,0);static lengthDiffNonNegative(t,n){return n.isLessThan(t)?e.zero:t.lineCount===n.lineCount?new e(0,n.columnCount-t.columnCount):new e(n.lineCount-t.lineCount,n.columnCount)}static betweenPositions(t,n){return t.lineNumber===n.lineNumber?new e(0,n.column-t.column):new e(n.lineNumber-t.lineNumber,n.column-1)}static fromPosition(t){return new e(t.lineNumber-1,t.column-1)}static ofRange(t){return e.betweenPositions(t.getStartPosition(),t.getEndPosition())}static ofText(t){let n=0,r=0;for(let e of t)e===`
`?(n++,r=0):r++;return new e(n,r)}static ofSubstr(t,n){return e.ofText(n.substring(t))}static sum(t,n){return t.reduce((e,t)=>e.add(n(t)),e.zero)}constructor(e,t){this.lineCount=e,this.columnCount=t}isZero(){return this.lineCount===0&&this.columnCount===0}isLessThan(e){return this.lineCount===e.lineCount?this.columnCount<e.columnCount:this.lineCount<e.lineCount}isGreaterThan(e){return this.lineCount===e.lineCount?this.columnCount>e.columnCount:this.lineCount>e.lineCount}isGreaterThanOrEqualTo(e){return this.lineCount===e.lineCount?this.columnCount>=e.columnCount:this.lineCount>e.lineCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount===e.lineCount?this.columnCount-e.columnCount:this.lineCount-e.lineCount}add(t){return t.lineCount===0?new e(this.lineCount,this.columnCount+t.columnCount):new e(this.lineCount+t.lineCount,t.columnCount)}createRange(e){return this.lineCount===0?new X(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new X(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new X(1,1,this.lineCount+1,this.columnCount+1)}toLineRange(){return mY.ofLength(1,this.lineCount+1)}addToPosition(e){return this.lineCount===0?new KK(e.lineNumber,e.column+this.columnCount):new KK(e.lineNumber+this.lineCount,this.columnCount+1)}addToRange(e){return X.fromPositions(this.addToPosition(e.getStartPosition()),this.addToPosition(e.getEndPosition()))}toString(){return`${this.lineCount},${this.columnCount}`}},CX=class{getOffsetRange(e){return new RK(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getRange(e){return X.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getStringEdit(e){let t=e.replacements.map(e=>this.getStringReplacement(e));return new wX.deps.StringEdit(t)}getStringReplacement(e){return new wX.deps.StringReplacement(this.getOffsetRange(e.range),e.text)}getTextReplacement(e){return new wX.deps.TextReplacement(this.getRange(e.replaceRange),e.newText)}getTextEdit(e){let t=e.replacements.map(e=>this.getTextReplacement(e));return new wX.deps.TextEdit(t)}},wX=class{static#e=this._deps=void 0;static get deps(){if(!this._deps)throw Error(`Dependencies not set. Call _setDependencies first.`);return this._deps}};function TX(e){wX._deps=e}var EX=class extends CX{constructor(e){super(),this.text=e}get lineStartOffsetByLineIdx(){return this._lineStartOffsetByLineIdx||this._computeLineOffsets(),this._lineStartOffsetByLineIdx}get lineEndOffsetByLineIdx(){return this._lineEndOffsetByLineIdx||this._computeLineOffsets(),this._lineEndOffsetByLineIdx}_computeLineOffsets(){this._lineStartOffsetByLineIdx=[],this._lineEndOffsetByLineIdx=[],this._lineStartOffsetByLineIdx.push(0);for(let e=0;e<this.text.length;e++)this.text.charAt(e)===`
`&&(this._lineStartOffsetByLineIdx.push(e+1),e>0&&this.text.charAt(e-1)===`\r`?this._lineEndOffsetByLineIdx.push(e-1):this._lineEndOffsetByLineIdx.push(e));this._lineEndOffsetByLineIdx.push(this.text.length)}getOffset(e){let t=this._validatePosition(e);return this.lineStartOffsetByLineIdx[t.lineNumber-1]+t.column-1}_validatePosition(e){if(e.lineNumber<1)return new KK(1,1);let t=this.textLength.lineCount+1;if(e.lineNumber>t)return new KK(t,this.getLineLength(t)+1);if(e.column<1)return new KK(e.lineNumber,1);let n=this.getLineLength(e.lineNumber);return e.column-1>n?new KK(e.lineNumber,n+1):e}getPosition(e){let t=et(this.lineStartOffsetByLineIdx,t=>t<=e);return new KK(t+1,e-this.lineStartOffsetByLineIdx[t]+1)}getTextLength(e){return wX.deps.TextLength.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new wX.deps.TextLength(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}},DX=class{constructor(){this._transformer=void 0}get endPositionExclusive(){return this.length.addToPosition(new KK(1,1))}get lineRange(){return this.length.toLineRange()}getValue(){return this.getValueOfRange(this.length.toRange())}getValueOfOffsetRange(e){return this.getValueOfRange(this.getTransformer().getRange(e))}getLineLength(e){return this.getValueOfRange(new X(e,1,e,2**53-1)).length}getTransformer(){return this._transformer||=new EX(this.getValue()),this._transformer}getLineAt(e){return this.getValueOfRange(new X(e,1,e,2**53-1))}getLines(){return Ua(this.getValue())}getLinesOfRange(e){return e.mapToLineArray(e=>this.getLineAt(e))}equals(e){return this===e?!0:this.getValue()===e.getValue()}},OX=class extends DX{constructor(e,t){fe(t>=1),super(),this._getLineContent=e,this._lineCount=t}getValueOfRange(e){if(e.startLineNumber===e.endLineNumber)return this._getLineContent(e.startLineNumber).substring(e.startColumn-1,e.endColumn-1);let t=this._getLineContent(e.startLineNumber).substring(e.startColumn-1);for(let n=e.startLineNumber+1;n<e.endLineNumber;n++)t+=`
`+this._getLineContent(n);return t+=`
`+this._getLineContent(e.endLineNumber).substring(0,e.endColumn-1),t}getLineLength(e){return this._getLineContent(e).length}get length(){let e=this._getLineContent(this._lineCount);return new SX(this._lineCount-1,e.length)}},kX=class extends OX{constructor(e){super(t=>e[t-1],e.length)}},AX=class extends DX{constructor(e){super(),this.value=e,this._t=new EX(this.value)}getValueOfRange(e){return this._t.getOffsetRange(e).substring(this.value)}get length(){return this._t.textLength}getTransformer(){return this._t}},jX=class e{static fromStringEdit(t,n){return new e(t.replacements.map(e=>MX.fromStringReplacement(e,n)))}static replace(t,n){return new e([new MX(t,n)])}static delete(t){return new e([new MX(t,``)])}static insert(t,n){return new e([new MX(X.fromPositions(t,t),n)])}static fromParallelReplacementsUnsorted(t){return new e(t.slice().sort(qt(e=>e.range,X.compareRangesUsingStarts)))}constructor(e){this.replacements=e,me(()=>he(e,(e,t)=>e.range.getEndPosition().isBeforeOrEqual(t.range.getStartPosition())))}normalize(){let t=[];for(let e of this.replacements)if(t.length>0&&t[t.length-1].range.getEndPosition().equals(e.range.getStartPosition())){let n=t[t.length-1];t[t.length-1]=new MX(n.range.plusRange(e.range),n.text+e.text)}else e.isEmpty||t.push(e);return new e(t)}mapPosition(e){let t=0,n=0,r=0;for(let i of this.replacements){let a=i.range.getStartPosition();if(e.isBeforeOrEqual(a))break;let o=i.range.getEndPosition(),s=SX.ofText(i.text);if(e.isBefore(o)){let e=new KK(a.lineNumber+t,a.column+(a.lineNumber+t===n?r:0));return NX(e,s.addToPosition(e))}a.lineNumber+t!==n&&(r=0),t+=s.lineCount-(i.range.endLineNumber-i.range.startLineNumber),s.lineCount===0?o.lineNumber===a.lineNumber?r+=s.columnCount-(o.column-a.column):r+=s.columnCount-(o.column-1):r=s.columnCount,n=o.lineNumber+t}return new KK(e.lineNumber+t,e.column+(e.lineNumber+t===n?r:0))}mapRange(e){function t(e){return e instanceof KK?e:e.getStartPosition()}function n(e){return e instanceof KK?e:e.getEndPosition()}return NX(t(this.mapPosition(e.getStartPosition())),n(this.mapPosition(e.getEndPosition())))}inverseMapPosition(e,t){return this.inverse(t).mapPosition(e)}inverseMapRange(e,t){return this.inverse(t).mapRange(e)}apply(e){let t=``,n=new KK(1,1);for(let r of this.replacements){let i=r.range,a=i.getStartPosition(),o=i.getEndPosition(),s=NX(n,a);s.isEmpty()||(t+=e.getValueOfRange(s)),t+=r.text,n=o}let r=NX(n,e.endPositionExclusive);return r.isEmpty()||(t+=e.getValueOfRange(r)),t}applyToString(e){let t=new AX(e);return this.apply(t)}inverse(t){let n=this.getNewRanges();return new e(this.replacements.map((e,r)=>new MX(n[r],t.getValueOfRange(e.range))))}getNewRanges(){let e=[],t=0,n=0,r=0;for(let i of this.replacements){let a=SX.ofText(i.text),o=KK.lift({lineNumber:i.range.startLineNumber+n,column:i.range.startColumn+(i.range.startLineNumber===t?r:0)}),s=a.createRange(o);e.push(s),n=s.endLineNumber-i.range.endLineNumber,r=s.endColumn-i.range.endColumn,t=i.range.endLineNumber}return e}toReplacement(e){if(this.replacements.length===0)throw new y;if(this.replacements.length===1)return this.replacements[0];let t=this.replacements[0].range.getStartPosition(),n=this.replacements[this.replacements.length-1].range.getEndPosition(),r=``;for(let t=0;t<this.replacements.length;t++){let n=this.replacements[t];if(r+=n.text,t<this.replacements.length-1){let i=this.replacements[t+1],a=X.fromPositions(n.range.getEndPosition(),i.range.getStartPosition()),o=e.getValueOfRange(a);r+=o}}return new MX(X.fromPositions(t,n),r)}equals(e){return ut(this.replacements,e.replacements,(e,t)=>e.equals(t))}compose(t){let n=this.normalize(),r=t.normalize();if(n.replacements.length===0)return r;if(r.replacements.length===0)return n;let i=[],a=0,o=1,s=1,c=0,l=0,u=0,d=0,f=null,p=0,m=0,h=!1,g=!1,_=1,v=1;function ee(){if(!h)if(a<n.replacements.length){let e=n.replacements[a],t=e.range.getStartPosition();if(!(o===t.lineNumber&&s===t.column))c=o,l=s,u=t.lineNumber,d=t.column,f=null,o===t.lineNumber?(p=0,m=t.column-s):(p=t.lineNumber-o,m=t.column-1),h=!0,o=t.lineNumber,s=t.column;else{let n=e.range.getEndPosition();c=t.lineNumber,l=t.column,u=n.lineNumber,d=n.column,f=e.text;let r=0,i=0,g=e.text;for(let e=0;e<g.length;e++)g.charCodeAt(e)===10?(r++,i=0):i++;p=r,m=i,h=!0,o=n.lineNumber,s=n.column,a++}}else g=!0,c=o,l=s,h=!0}function te(e,t,n){if(t===0&&n===0)return[``,e];let r=0,i=0;for(;r<t;){let t=e.indexOf(`
`,i);if(t===-1)throw new y(`Text length mismatch`);i=t+1,r++}return i+=n,[e.substring(0,i),e.substring(i)]}for(let e of r.replacements){let t=e.range.getStartPosition(),n=e.range.getEndPosition();for(;!(_===t.lineNumber&&v===t.column);){if(ee(),g){let e,n;_===t.lineNumber?(e=0,n=t.column-v):(e=t.lineNumber-_,n=t.column-1),_=t.lineNumber,v=t.column,e===0?l+=n:(c+=e,l=n+1);break}let e,n;p===0?(e=_,n=v+m):(e=_+p,n=m+1);let r=!1;if(t.lineNumber<e?r=!0:t.lineNumber===e&&(r=t.column<n),r){let e,n;_===t.lineNumber?(e=0,n=t.column-v):(e=t.lineNumber-_,n=t.column-1);let r,a;if(e===p?(r=0,a=m-n):(r=p-e,a=m),f!==null){let[t,o]=te(f,e,n);i.push(new MX(new X(c,l,u,d),t)),f=o,p=r,m=a,c=u,l=d}else{let t,i;e===0?(t=c,i=l+n):(t=c+e,i=n+1),c=t,l=i,p=r,m=a}_=t.lineNumber,v=t.column;break}f!==null&&i.push(new MX(new X(c,l,u,d),f)),_=e,v=n,h=!1}let r=null,a=null,o=null,s=null;for(;!(_===n.lineNumber&&v===n.column);){if(ee(),g){let e,t;_===n.lineNumber?(e=0,t=n.column-v):(e=n.lineNumber-_,t=n.column-1);let i,u;e===0?(i=c,u=l+t):(i=c+e,u=t+1),r===null&&(r=c,a=l),o=i,s=u,_=n.lineNumber,v=n.column,c=i,l=u;break}let e,t;p===0?(e=_,t=v+m):(e=_+p,t=m+1);let i=!1;if(n.lineNumber<e?i=!0:n.lineNumber===e&&(i=n.column<t),i){let e,t;_===n.lineNumber?(e=0,t=n.column-v):(e=n.lineNumber-_,t=n.column-1);let i,h;if(e===p?(i=0,h=m-t):(i=p-e,h=m),f!==null){r===null&&(r=c,a=l),o=u,s=d;let[,n]=te(f,e,t);f=n,p=i,m=h,c=u,l=d}else{let n,u;e===0?(n=c,u=l+t):(n=c+e,u=t+1),r===null&&(r=c,a=l),o=n,s=u,c=n,l=u,p=i,m=h}_=n.lineNumber,v=n.column;break}r===null&&(r=c,a=l),o=u,s=d,_=e,v=t,h=!1}if(r!==null)i.push(new MX(new X(r,a,o,s),e.text));else{ee();let t=c,n=l;i.push(new MX(new X(t,n,t,n),e.text))}}for(;ee(),!g;)f!==null&&i.push(new MX(new X(c,l,u,d),f)),h=!1;return new e(i).normalize()}toString(e){return e===void 0?this.replacements.map(e=>e.toString()).join(`
`):typeof e==`string`?this.toString(new AX(e)):this.replacements.length===0?``:this.replacements.map(t=>{let n=e.getValueOfRange(t.range),r=X.fromPositions(new KK(Math.max(1,t.range.startLineNumber-1),1),t.range.getStartPosition()),i=e.getValueOfRange(r);i.length>10&&(i=`...`+i.substring(i.length-10));let a=X.fromPositions(t.range.getEndPosition(),new KK(t.range.endLineNumber+1,1)),o=e.getValueOfRange(a);o.length>10&&(o=o.substring(0,10)+`...`);let s=n;s.length>10&&(s=s.substring(0,5)+`...`+s.substring(s.length-5));let c=t.text;return c.length>10&&(c=c.substring(0,5)+`...`+c.substring(c.length-5)),s.length===0?`${i}${c}${o}`:`${i}${s}${c}${o}`}).join(`
`)}},MX=class e{static joinReplacements(t,n){if(t.length===0)throw new y;if(t.length===1)return t[0];let r=t[0].range.getStartPosition(),i=t[t.length-1].range.getEndPosition(),a=``;for(let e=0;e<t.length;e++){let r=t[e];if(a+=r.text,e<t.length-1){let i=t[e+1],o=X.fromPositions(r.range.getEndPosition(),i.range.getStartPosition()),s=n.getValueOfRange(o);a+=s}}return new e(X.fromPositions(r,i),a)}static fromStringReplacement(t,n){return new e(n.getTransformer().getRange(t.replaceRange),t.newText)}static delete(t){return new e(t,``)}constructor(e,t){this.range=e,this.text=t}get isEmpty(){return this.range.isEmpty()&&this.text.length===0}static equals(e,t){return e.range.equalsRange(t.range)&&e.text===t.text}toSingleEditOperation(){return{range:this.range,text:this.text}}toEdit(){return new jX([this])}equals(t){return e.equals(this,t)}extendToCoverRange(t,n){if(this.range.containsRange(t))return this;let r=this.range.plusRange(t),i=n.getValueOfRange(X.fromPositions(r.getStartPosition(),this.range.getStartPosition())),a=n.getValueOfRange(X.fromPositions(this.range.getEndPosition(),r.getEndPosition()));return new e(r,i+this.text+a)}extendToFullLine(e){let t=new X(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(t,e)}removeCommonPrefixAndSuffix(e){return this.removeCommonPrefix(e).removeCommonSuffix(e)}removeCommonPrefix(t){let n=t.getValueOfRange(this.range).replaceAll(`\r
`,`
`),r=this.text.replaceAll(`\r
`,`
`),i=io(n,r),a=SX.ofText(n.substring(0,i)).addToPosition(this.range.getStartPosition()),o=r.substring(i);return new e(X.fromPositions(a,this.range.getEndPosition()),o)}removeCommonSuffix(t){let n=t.getValueOfRange(this.range).replaceAll(`\r
`,`
`),r=this.text.replaceAll(`\r
`,`
`),i=ao(n,r),a=SX.ofText(n.substring(0,n.length-i)).addToPosition(this.range.getStartPosition()),o=r.substring(0,r.length-i);return new e(X.fromPositions(this.range.getStartPosition(),a),o)}isEffectiveDeletion(e){let t=this.text.replaceAll(`\r
`,`
`),n=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),r=io(t,n);t=t.substring(r),n=n.substring(r);let i=ao(t,n);return t=t.substring(0,t.length-i),n=n.substring(0,n.length-i),t===``}toString(){let e=this.range.getStartPosition(),t=this.range.getEndPosition();return`(${e.lineNumber},${e.column} -> ${t.lineNumber},${t.column}): "${this.text}"`}};function NX(e,t){if(e.lineNumber===t.lineNumber&&e.column===2**53-1)return X.fromPositions(t,t);if(!e.isBeforeOrEqual(t))throw new y(`start must be before end`);return new X(e.lineNumber,e.column,t.lineNumber,t.column)}var PX=class{constructor(e){this.replacements=e;let t=-1;for(let n of e){if(!(n.replaceRange.start>=t))throw new y(`Edits must be disjoint and sorted. Found ${n} after ${t}`);t=n.replaceRange.endExclusive}}equals(e){if(this.replacements.length!==e.replacements.length)return!1;for(let t=0;t<this.replacements.length;t++)if(!this.replacements[t].equals(e.replacements[t]))return!1;return!0}toString(){return`[${this.replacements.map(e=>e.toString()).join(`, `)}]`}normalize(){let e=[],t;for(let n of this.replacements)if(!(n.getNewLength()===0&&n.replaceRange.length===0)){if(t&&t.replaceRange.endExclusive===n.replaceRange.start){let e=t.tryJoinTouching(n);if(e){t=e;continue}}t&&e.push(t),t=n}return t&&e.push(t),this._createNew(e)}compose(e){let t=this.normalize(),n=e.normalize();if(t.isEmpty())return n;if(n.isEmpty())return t;let r=[...t.replacements],i=[],a=0;for(let e of n.replacements){for(;;){let t=r[0];if(!t||t.replaceRange.start+a+t.getNewLength()>=e.replaceRange.start)break;r.shift(),i.push(t),a+=t.getNewLength()-t.replaceRange.length}let t=a,n,o;for(;;){let t=r[0];if(!t||t.replaceRange.start+a>e.replaceRange.endExclusive)break;n||=t,o=t,r.shift(),a+=t.getNewLength()-t.replaceRange.length}if(!n)i.push(e.delta(-a));else{let s=Math.min(n.replaceRange.start,e.replaceRange.start-t),c=e.replaceRange.start-(n.replaceRange.start+t);if(c>0){let e=n.slice(RK.emptyAt(s),new RK(0,c));i.push(e)}if(!o)throw new y(`Invariant violation: lastIntersecting is undefined`);let l=o.replaceRange.endExclusive+a-e.replaceRange.endExclusive;if(l>0){let e=o.slice(RK.ofStartAndLength(o.replaceRange.endExclusive,0),new RK(o.getNewLength()-l,o.getNewLength()));r.unshift(e),a-=e.getNewLength()-e.replaceRange.length}let u=new RK(s,e.replaceRange.endExclusive-a),d=e.slice(u,new RK(0,e.getNewLength()));i.push(d)}}for(;;){let e=r.shift();if(!e)break;i.push(e)}return this._createNew(i).normalize()}decomposeSplit(e){let t=[],n=[],r=0;for(let i of this.replacements)e(i)?(t.push(i),r+=i.getNewLength()-i.replaceRange.length):n.push(i.slice(i.replaceRange.delta(r),new RK(0,i.getNewLength())));return{e1:this._createNew(t),e2:this._createNew(n)}}getNewRanges(){let e=[],t=0;for(let n of this.replacements)e.push(RK.ofStartAndLength(n.replaceRange.start+t,n.getNewLength())),t+=n.getLengthDelta();return e}getJoinedReplaceRange(){if(this.replacements.length!==0)return this.replacements[0].replaceRange.join(this.replacements.at(-1).replaceRange)}isEmpty(){return this.replacements.length===0}getLengthDelta(){return rn(this.replacements,e=>e.getLengthDelta())}getNewDataLength(e){return e+this.getLengthDelta()}applyToOffset(e){let t=0;for(let n of this.replacements)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+t;t+=n.getNewLength()-n.replaceRange.length}else break;return e+t}applyToOffsetRange(e){return new RK(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyInverseToOffset(e){let t=0;for(let n of this.replacements){let r=n.getNewLength();if(n.replaceRange.start<=e-t){if(e-t<n.replaceRange.start+r)return n.replaceRange.start;t+=r-n.replaceRange.length}else break}return e-t}applyToOffsetOrUndefined(e){let t=0;for(let n of this.replacements)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return;t+=n.getNewLength()-n.replaceRange.length}else break;return e+t}applyToOffsetRangeOrUndefined(e){let t=this.applyToOffsetOrUndefined(e.start);if(t===void 0)return;let n=this.applyToOffsetOrUndefined(e.endExclusive);if(n!==void 0)return new RK(t,n)}},FX=class{constructor(e){this.replaceRange=e}delta(e){return this.slice(this.replaceRange.delta(e),new RK(0,this.getNewLength()))}getLengthDelta(){return this.getNewLength()-this.replaceRange.length}toString(){return`{ ${this.replaceRange.toString()} -> ${this.getNewLength()} }`}get isEmpty(){return this.getNewLength()===0&&this.replaceRange.length===0}getRangeAfterReplace(){return new RK(this.replaceRange.start,this.replaceRange.start+this.getNewLength())}};(class e extends PX{static#e=this.empty=new e([]);static create(t){return new e(t)}static single(t){return new e([t])}_createNew(t){return new e(t)}});var IX=class extends PX{get TReplacement(){throw Error(`TReplacement is not defined for BaseStringEdit`)}static composeOrUndefined(e){if(e.length===0)return;let t=e[0];for(let n=1;n<e.length;n++)t=t.compose(e[n]);return t}static trySwap(e,t){let n=e.inverseOnSlice((e,t)=>` `.repeat(t-e)),r=t.tryRebase(n);if(!r)return;let i=e.tryRebase(r);if(i)return{e1:r,e2:i}}apply(e){let t=[],n=0;for(let r of this.replacements)t.push(e.substring(n,r.replaceRange.start)),t.push(r.newText),n=r.replaceRange.endExclusive;return t.push(e.substring(n)),t.join(``)}inverseOnSlice(e){let t=[],n=0;for(let r of this.replacements)t.push(zX.replace(RK.ofStartAndLength(r.replaceRange.start+n,r.newText.length),e(r.replaceRange.start,r.replaceRange.endExclusive))),n+=r.newText.length-r.replaceRange.length;return new RX(t)}inverse(e){return this.inverseOnSlice((t,n)=>e.substring(t,n))}rebaseSkipConflicting(e){return this._tryRebase(e,!1)}tryRebase(e){return this._tryRebase(e,!0)}_tryRebase(e,t){let n=[],r=0,i=0,a=0,o=-1;for(;i<this.replacements.length||r<e.replacements.length;){let s=e.replacements[r],c=this.replacements[i];if(c)if(s)if(c.replaceRange.intersects(s.replaceRange)||UX(c.replaceRange,s.replaceRange)){if(i++,t)return}else if(c.replaceRange.start<s.replaceRange.start){let e=c.replaceRange.delta(a);if(e.start<o){if(t)return;i++;continue}n.push(new zX(e,c.newText)),o=e.endExclusive,i++}else r++,a+=s.newText.length-s.replaceRange.length;else{let e=c.replaceRange.delta(a);if(e.start<o){if(t)return;i++;continue}n.push(new zX(e,c.newText)),o=e.endExclusive,i++}else break}return new RX(n)}toJson(){return this.replacements.map(e=>e.toJson())}isNeutralOn(e){return this.replacements.every(t=>t.isNeutralOn(e))}removeCommonSuffixPrefix(e){let t=[];for(let n of this.replacements){let r=n.removeCommonSuffixPrefix(e);r.isEmpty||t.push(r)}return new RX(t)}normalizeEOL(e){return new RX(this.replacements.map(t=>t.normalizeEOL(e)))}normalizeOnSource(e){let t=this.apply(e),n=zX.replace(RK.ofLength(e.length),t).removeCommonSuffixAndPrefix(e);return n.isEmpty?RX.empty:n.toEdit()}removeCommonSuffixAndPrefix(e){return this._createNew(this.replacements.map(t=>t.removeCommonSuffixAndPrefix(e))).normalize()}applyOnText(e){return new AX(this.apply(e.value))}mapData(e){return new VX(this.replacements.map(t=>new HX(t.replaceRange,t.newText,e(t))))}},LX=class extends FX{constructor(e,t){super(e),this.newText=t}getNewLength(){return this.newText.length}toString(){return`${this.replaceRange} -> ${JSON.stringify(this.newText)}`}replace(e){return e.substring(0,this.replaceRange.start)+this.newText+e.substring(this.replaceRange.endExclusive)}isNeutralOn(e){return this.newText===e.substring(this.replaceRange.start,this.replaceRange.endExclusive)}removeCommonSuffixPrefix(e){let t=e.substring(this.replaceRange.start,this.replaceRange.endExclusive),n=io(t,this.newText),r=Math.min(t.length-n,this.newText.length-n,ao(t,this.newText));return new zX(new RK(this.replaceRange.start+n,this.replaceRange.endExclusive-r),this.newText.substring(n,this.newText.length-r))}normalizeEOL(e){let t=this.newText.replace(/\r\n|\n/g,e);return new zX(this.replaceRange,t)}removeCommonSuffixAndPrefix(e){return this.removeCommonSuffix(e).removeCommonPrefix(e)}removeCommonPrefix(e){let t=io(this.replaceRange.substring(e),this.newText);return t===0?this:this.slice(this.replaceRange.deltaStart(t),new RK(t,this.newText.length))}removeCommonSuffix(e){let t=ao(this.replaceRange.substring(e),this.newText);return t===0?this:this.slice(this.replaceRange.deltaEnd(-t),new RK(0,this.newText.length-t))}toEdit(){return new RX([this])}toJson(){return{txt:this.newText,pos:this.replaceRange.start,len:this.replaceRange.length}}},RX=class e extends IX{static#e=this.empty=new e([]);static create(t){return new e(t)}static single(t){return new e([t])}static replace(t,n){return new e([new zX(t,n)])}static insert(t,n){return new e([new zX(RK.emptyAt(t),n)])}static delete(t){return new e([new zX(t,``)])}static fromJson(t){return new e(t.map(zX.fromJson))}static compose(t){if(t.length===0)return e.empty;let n=t[0];for(let e=1;e<t.length;e++)n=n.compose(t[e]);return n}static composeSequentialReplacements(t){let n=e.empty,r=[];for(let i of t){let t=r.at(-1);!t||i.replaceRange.isBefore(t.replaceRange)?r.push(i):(n=n.compose(e.create(r.reverse())),r=[i])}return n=n.compose(e.create(r.reverse())),n}constructor(e){super(e)}_createNew(t){return new e(t)}},zX=class e extends LX{static insert(t,n){return new e(RK.emptyAt(t),n)}static replace(t,n){return new e(t,n)}static delete(t){return new e(t,``)}static fromJson(t){return new e(RK.ofStartAndLength(t.pos,t.len),t.txt)}equals(e){return this.replaceRange.equals(e.replaceRange)&&this.newText===e.newText}tryJoinTouching(t){return new e(this.replaceRange.joinRightTouching(t.replaceRange),this.newText+t.newText)}slice(t,n){return new e(t,n?n.substring(this.newText):this.newText)}};function BX(e,t){e=e.slice();let n=[],r=0;for(let i of t.replacements){for(;;){let t=e[0];if(!t||t.endExclusive>=i.replaceRange.start)break;e.shift(),n.push(t.delta(r))}let t=[];for(;;){let n=e[0];if(!n||!n.intersectsOrTouches(i.replaceRange))break;e.shift(),t.push(n)}for(let n=t.length-1;n>=0;n--){let r=t[n],a=r.intersect(i.replaceRange).length;r=r.deltaEnd(-a+(n===0?i.newText.length:0));let o=r.start-i.replaceRange.start;o>0&&(r=r.delta(-o)),n!==0&&(r=r.delta(i.newText.length)),r=r.delta(-(i.newText.length-i.replaceRange.length)),e.unshift(r)}r+=i.newText.length-i.replaceRange.length}for(;;){let t=e[0];if(!t)break;e.shift(),n.push(t.delta(r))}return n}var VX=class e extends IX{static#e=this.empty=new e([]);static create(t){return new e(t)}static single(t){return new e([t])}static replace(t,n,r){return new e([new HX(t,n,r)])}static insert(t,n,r){return new e([new HX(RK.emptyAt(t),n,r)])}static delete(t,n){return new e([new HX(t,``,n)])}static compose(t){if(t.length===0)return e.empty;let n=t[0];for(let e=1;e<t.length;e++)n=n.compose(t[e]);return n}constructor(e){super(e)}_createNew(t){return new e(t)}toStringEdit(e){let t=[];for(let n of this.replacements)(!e||e(n))&&t.push(new zX(n.replaceRange,n.newText));return new RX(t)}},HX=class e extends LX{static insert(t,n,r){return new e(RK.emptyAt(t),n,r)}static replace(t,n,r){return new e(t,n,r)}static delete(t,n){return new e(t,``,n)}constructor(e,t,n){super(e,t),this.data=n}equals(e){return this.replaceRange.equals(e.replaceRange)&&this.newText===e.newText&&this.data===e.data}tryJoinTouching(t){let n=this.data.join(t.data);if(n!==void 0)return new e(this.replaceRange.joinRightTouching(t.replaceRange),this.newText+t.newText,n)}slice(t,n){return new e(t,n?n.substring(this.newText):this.newText,this.data)}};function UX(e,t){return e.isEmpty&&t.isEmpty&&e.start===t.start}var WX=V(`markerDecorationsService`),GX;function KX(){return GX||=new TextDecoder(`UTF-16LE`),GX}var qX;function JX(){return qX||=new TextDecoder(`UTF-16BE`),qX}var YX;function XX(){return YX||=ki()?KX():JX(),YX}function ZX(e,t,n){let r=new Uint16Array(e.buffer,t,n);return n>0&&(r[0]===65279||r[0]===65534)?QX(e,t,n):KX().decode(r)}function QX(e,t,n){let r=[],i=0;for(let a=0;a<n;a++){let n=Gp(e,t);t+=2,r[i++]=String.fromCharCode(n)}return r.join(``)}var $X=class{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings===null?this._buildBuffer():(this._flushBuffer(),this._completedStrings.join(``))}_buildBuffer(){if(this._bufferLength===0)return``;let e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return XX().decode(e)}_flushBuffer(){let e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}appendCharCode(e){let t=this._capacity-this._bufferLength;t<=1&&(t===0||oo(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIICharCode(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendString(e){let t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let n=0;n<t;n++)this._buffer[this._bufferLength++]=e.charCodeAt(n)}},eZ=class e{static _nextVisibleColumn(t,n,r){return t===O.Tab?e.nextRenderTabStop(n,r):wo(t)||To(t)?n+2:n+1}static visibleColumnFromColumn(e,t,n){let r=Math.min(t-1,e.length),i=e.substring(0,r),a=new po(i),o=0;for(;!a.eol();){let e=lo(i,r,a.offset);a.nextGraphemeLength(),o=this._nextVisibleColumn(e,o,n)}return o}static toStatusbarColumn(t,n,r){let i=new fo(t.substring(0,Math.min(n-1,t.length))),a=0;for(;!i.eol();)i.nextCodePoint()===O.Tab?a=e.nextRenderTabStop(a,r):a+=1;return a+1}static columnFromVisibleColumn(e,t,n){if(t<=0)return 1;let r=e.length,i=new po(e),a=0,o=1;for(;!i.eol();){let s=lo(e,r,i.offset);i.nextGraphemeLength();let c=this._nextVisibleColumn(s,a,n),l=i.offset+1;if(c>=t){let e=t-a;return c-t<e?l:o}a=c,o=l}return r+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(t,n){return e.nextRenderTabStop(t,n)}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(t,n){return e.prevRenderTabStop(t,n)}};function tZ(e,t){let n=e.getCount(),r=e.findTokenIndexAtOffset(t),i=e.getLanguageId(r),a=r;for(;a+1<n&&e.getLanguageId(a+1)===i;)a++;let o=r;for(;o>0&&e.getLanguageId(o-1)===i;)o--;return new nZ(e,i,o,a+1,e.getStartOffset(o),e.getEndOffset(a))}var nZ=class{constructor(e,t,n,r,i,a){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=n,this._lastTokenIndex=r,this.firstCharOffset=i,this._lastCharOffset=a,this.languageIdCodec=e.languageIdCodec}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getLineLength(){return this._lastCharOffset-this.firstCharOffset}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}toIViewLineTokens(){return this._actual.sliceAndInflate(this.firstCharOffset,this._lastCharOffset,0)}},rZ;(function(e){e[e.value=3]=`value`})(rZ||={});function iZ(e){return(e&rZ.value)!==0}function aZ(e,t,n){let r=0;for(let n=0;n<e.length;n++)e.charAt(n)===`	`?r=eZ.nextIndentTabStop(r,t):r++;let i=``;if(!n){let e=Math.floor(r/t);r%=t;for(let t=0;t<e;t++)i+=`	`}for(let e=0;e<r;e++)i+=` `;return i}function oZ(e,t,n){let r=Wa(e);return r===-1&&(r=e.length),aZ(e.substring(0,r),t,n)+e.substring(r)}var sZ=class e{constructor(t,n,r,i,a,o){this._richEditBracketBrand=void 0,this.languageId=t,this.index=n,this.open=r,this.close=i,this.forwardRegex=a,this.reversedRegex=o,this._openSet=e._toSet(this.open),this._closeSet=e._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){let t=new Set;for(let n of e)t.add(n);return t}};function cZ(e){let t=e.length;e=e.map(e=>[e[0].toLowerCase(),e[1].toLowerCase()]);let n=[];for(let e=0;e<t;e++)n[e]=e;let r=(e,t)=>{let[n,r]=e,[i,a]=t;return n===i||n===a||r===i||r===a},i=(e,r)=>{let i=Math.min(e,r),a=Math.max(e,r);for(let e=0;e<t;e++)n[e]===a&&(n[e]=i)};for(let a=0;a<t;a++){let o=e[a];for(let s=a+1;s<t;s++){let t=e[s];r(o,t)&&i(n[a],n[s])}}let a=[];for(let r=0;r<t;r++){let i=[],o=[];for(let a=0;a<t;a++)if(n[a]===r){let[t,n]=e[a];i.push(t),o.push(n)}i.length>0&&a.push({open:i,close:o})}return a}var lZ=class{constructor(e,t){this._richEditBracketsBrand=void 0;let n=cZ(t);this.brackets=n.map((t,r)=>new sZ(e,r,t.open,t.close,pZ(t.open,t.close,n,r),mZ(t.open,t.close,n,r))),this.forwardRegex=hZ(this.brackets),this.reversedRegex=gZ(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(let e of this.brackets){for(let t of e.open)this.textIsBracket[t]=e,this.textIsOpenBracket[t]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,t.length);for(let t of e.close)this.textIsBracket[t]=e,this.textIsOpenBracket[t]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,t.length)}}};function uZ(e,t,n,r){for(let i=0,a=t.length;i<a;i++){if(i===n)continue;let a=t[i];for(let t of a.open)t.indexOf(e)>=0&&r.push(t);for(let t of a.close)t.indexOf(e)>=0&&r.push(t)}}function dZ(e,t){return e.length-t.length}function fZ(e){if(e.length<=1)return e;let t=[],n=new Set;for(let r of e)n.has(r)||(t.push(r),n.add(r));return t}function pZ(e,t,n,r){let i=[];i=i.concat(e),i=i.concat(t);for(let e=0,t=i.length;e<t;e++)uZ(i[e],n,r,i);return i=fZ(i),i.sort(dZ),i.reverse(),vZ(i)}function mZ(e,t,n,r){let i=[];i=i.concat(e),i=i.concat(t);for(let e=0,t=i.length;e<t;e++)uZ(i[e],n,r,i);return i=fZ(i),i.sort(dZ),i.reverse(),vZ(i.map(yZ))}function hZ(e){let t=[];for(let n of e){for(let e of n.open)t.push(e);for(let e of n.close)t.push(e)}return t=fZ(t),vZ(t)}function gZ(e){let t=[];for(let n of e){for(let e of n.open)t.push(e);for(let e of n.close)t.push(e)}return t=fZ(t),vZ(t.map(yZ))}function _Z(e){let t=/^[\w ]+$/.test(e);return e=Na(e),t?`\\b${e}\\b`:e}function vZ(e,t){return Ba(`(${e.map(_Z).join(`)|(`)})`,!0,t)}var yZ=(function(){function e(e){let t=new Uint16Array(e.length),n=0;for(let r=e.length-1;r>=0;r--)t[n++]=e.charCodeAt(r);return XX().decode(t)}let t=null,n=null;return function(r){return t!==r&&(t=r,n=e(t)),n}})(),bZ=class{static _findPrevBracketInText(e,t,n,r){let i=n.match(e);if(!i)return null;let a=n.length-(i.index||0),o=i[0].length,s=r+a;return new X(t,s-o+1,t,s+1)}static findPrevBracketInRange(e,t,n,r,i){let a=yZ(n).substring(n.length-i,n.length-r);return this._findPrevBracketInText(e,t,a,r)}static findNextBracketInText(e,t,n,r){let i=n.match(e);if(!i)return null;let a=i.index||0,o=i[0].length;if(o===0)return null;let s=r+a;return new X(t,s+1,t,s+1+o)}static findNextBracketInRange(e,t,n,r,i){let a=n.substring(r,i);return this.findNextBracketInText(e,t,a,r)}},xZ=P(`editor.lineHighlightBackground`,null,D(683,`Background color for the highlight of line at the cursor position.`)),SZ=P(`editor.inactiveLineHighlightBackground`,xZ,D(684,`Background color for the highlight of line at the cursor position when the editor is not focused.`)),CZ=P(`editor.lineHighlightBorder`,{dark:`#282828`,light:`#eeeeee`,hcDark:`#f38518`,hcLight:xl},D(685,`Background color for the border around the line at the cursor position.`)),wZ=P(`editor.rangeHighlightBackground`,{dark:`#ffffff0b`,light:`#fdff0033`,hcDark:null,hcLight:null},D(686,`Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations.`),!0);P(`editor.rangeHighlightBorder`,{dark:null,light:null,hcDark:Sl,hcLight:Sl},D(687,`Background color of the border around highlighted ranges.`)),P(`editor.symbolHighlightBackground`,{dark:ql,light:ql,hcDark:null,hcLight:null},D(688,`Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations.`),!0),P(`editor.symbolHighlightBorder`,{dark:null,light:null,hcDark:Sl,hcLight:Sl},D(689,`Background color of the border around highlighted symbols.`));var TZ=P(`editorCursor.foreground`,{dark:`#AEAFAD`,light:M.black,hcDark:M.white,hcLight:`#0F4A85`},D(690,`Color of the editor cursor.`)),EZ=P(`editorCursor.background`,null,D(691,`The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.`)),DZ=P(`editorMultiCursor.primary.foreground`,TZ,D(692,`Color of the primary editor cursor when multiple cursors are present.`)),OZ=P(`editorMultiCursor.primary.background`,EZ,D(693,`The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.`)),kZ=P(`editorMultiCursor.secondary.foreground`,TZ,D(694,`Color of secondary editor cursors when multiple cursors are present.`)),AZ=P(`editorMultiCursor.secondary.background`,EZ,D(695,`The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.`)),jZ=P(`editorWhitespace.foreground`,{dark:`#e3e4e229`,light:`#33333333`,hcDark:`#e3e4e229`,hcLight:`#CCCCCC`},D(696,`Color of whitespace characters in the editor.`)),MZ=P(`editorLineNumber.foreground`,{dark:`#858585`,light:`#237893`,hcDark:M.white,hcLight:`#292929`},D(697,`Color of editor line numbers.`)),NZ=P(`editorIndentGuide.background`,jZ,D(698,`Color of the editor indentation guides.`),!1,D(699,`'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.`)),PZ=P(`editorIndentGuide.activeBackground`,jZ,D(700,`Color of the active editor indentation guides.`),!1,D(701,`'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.`)),FZ=P(`editorIndentGuide.background1`,NZ,D(702,`Color of the editor indentation guides (1).`)),IZ=P(`editorIndentGuide.background2`,`#00000000`,D(703,`Color of the editor indentation guides (2).`)),LZ=P(`editorIndentGuide.background3`,`#00000000`,D(704,`Color of the editor indentation guides (3).`)),RZ=P(`editorIndentGuide.background4`,`#00000000`,D(705,`Color of the editor indentation guides (4).`)),zZ=P(`editorIndentGuide.background5`,`#00000000`,D(706,`Color of the editor indentation guides (5).`)),BZ=P(`editorIndentGuide.background6`,`#00000000`,D(707,`Color of the editor indentation guides (6).`)),VZ=P(`editorIndentGuide.activeBackground1`,PZ,D(708,`Color of the active editor indentation guides (1).`)),HZ=P(`editorIndentGuide.activeBackground2`,`#00000000`,D(709,`Color of the active editor indentation guides (2).`)),UZ=P(`editorIndentGuide.activeBackground3`,`#00000000`,D(710,`Color of the active editor indentation guides (3).`)),WZ=P(`editorIndentGuide.activeBackground4`,`#00000000`,D(711,`Color of the active editor indentation guides (4).`)),GZ=P(`editorIndentGuide.activeBackground5`,`#00000000`,D(712,`Color of the active editor indentation guides (5).`)),KZ=P(`editorIndentGuide.activeBackground6`,`#00000000`,D(713,`Color of the active editor indentation guides (6).`));P(`editorLineNumber.activeForeground`,P(`editorActiveLineNumber.foreground`,{dark:`#c6c6c6`,light:`#0B216F`,hcDark:Sl,hcLight:Sl},D(714,`Color of editor active line number`),!1,D(715,`Id is deprecated. Use 'editorLineNumber.activeForeground' instead.`)),D(714,`Color of editor active line number`));var qZ=P(`editorLineNumber.dimmedForeground`,null,D(716,`Color of the final editor line when editor.renderFinalNewline is set to dimmed.`)),JZ=P(`editorRuler.foreground`,{dark:`#5A5A5A`,light:M.lightgrey,hcDark:M.white,hcLight:`#292929`},D(717,`Color of the editor rulers.`));P(`editorCodeLens.foreground`,{dark:`#999999`,light:`#919191`,hcDark:`#999999`,hcLight:`#292929`},D(718,`Foreground color of editor CodeLens`)),P(`editorBracketMatch.background`,{dark:`#0064001a`,light:`#0064001a`,hcDark:`#0064001a`,hcLight:`#0000`},D(719,`Background color behind matching brackets`)),P(`editorBracketMatch.border`,{dark:`#888`,light:`#B9B9B9`,hcDark:xl,hcLight:xl},D(720,`Color for matching brackets boxes`));var YZ=P(`editorBracketMatch.foreground`,null,D(721,`Foreground color for matching brackets`)),XZ=P(`editorOverviewRuler.border`,{dark:`#7f7f7f4d`,light:`#7f7f7f4d`,hcDark:`#7f7f7f4d`,hcLight:`#666666`},D(722,`Color of the overview ruler border.`)),ZZ=P(`editorOverviewRuler.background`,null,D(723,`Background color of the editor overview ruler.`));P(`editorGutter.background`,Pl,D(724,`Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.`)),P(`editorUnnecessaryCode.border`,{dark:null,light:null,hcDark:M.fromHex(`#fff`).transparent(.8),hcLight:xl},D(725,`Border color of unnecessary (unused) source code in the editor.`));var QZ=P(`editorUnnecessaryCode.opacity`,{dark:M.fromHex(`#000a`),light:M.fromHex(`#0007`),hcDark:null,hcLight:null},D(726,`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`));P(`editorGhostText.border`,{dark:null,light:null,hcDark:M.fromHex(`#fff`).transparent(.8),hcLight:M.fromHex(`#292929`).transparent(.8)},D(727,`Border color of ghost text in the editor.`));var $Z=P(`editorGhostText.foreground`,{dark:M.fromHex(`#ffffff56`),light:M.fromHex(`#0007`),hcDark:null,hcLight:null},D(728,`Foreground color of the ghost text in the editor.`));P(`editorGhostText.background`,null,D(729,`Background color of the ghost text in the editor.`));var eQ=P(`editorOverviewRuler.rangeHighlightForeground`,new M(new j(0,122,204,.6)),D(730,`Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations.`),!0),tQ=P(`editorOverviewRuler.errorForeground`,{dark:new M(new j(255,18,18,.7)),light:new M(new j(255,18,18,.7)),hcDark:new M(new j(255,50,50,1)),hcLight:`#B5200D`},D(731,`Overview ruler marker color for errors.`)),nQ=P(`editorOverviewRuler.warningForeground`,{dark:Bl,light:Bl,hcDark:Vl,hcLight:Vl},D(732,`Overview ruler marker color for warnings.`)),rQ=P(`editorOverviewRuler.infoForeground`,{dark:Hl,light:Hl,hcDark:Ul,hcLight:Ul},D(733,`Overview ruler marker color for infos.`)),iQ=P(`editorBracketHighlight.foreground1`,{dark:`#FFD700`,light:`#0431FAFF`,hcDark:`#FFD700`,hcLight:`#0431FAFF`},D(734,`Foreground color of brackets (1). Requires enabling bracket pair colorization.`)),aQ=P(`editorBracketHighlight.foreground2`,{dark:`#DA70D6`,light:`#319331FF`,hcDark:`#DA70D6`,hcLight:`#319331FF`},D(735,`Foreground color of brackets (2). Requires enabling bracket pair colorization.`)),oQ=P(`editorBracketHighlight.foreground3`,{dark:`#179FFF`,light:`#7B3814FF`,hcDark:`#87CEFA`,hcLight:`#7B3814FF`},D(736,`Foreground color of brackets (3). Requires enabling bracket pair colorization.`)),sQ=P(`editorBracketHighlight.foreground4`,`#00000000`,D(737,`Foreground color of brackets (4). Requires enabling bracket pair colorization.`)),cQ=P(`editorBracketHighlight.foreground5`,`#00000000`,D(738,`Foreground color of brackets (5). Requires enabling bracket pair colorization.`)),lQ=P(`editorBracketHighlight.foreground6`,`#00000000`,D(739,`Foreground color of brackets (6). Requires enabling bracket pair colorization.`)),uQ=P(`editorBracketHighlight.unexpectedBracket.foreground`,{dark:new M(new j(255,18,18,.8)),light:new M(new j(255,18,18,.8)),hcDark:new M(new j(255,50,50,1)),hcLight:`#B5200D`},D(740,`Foreground color of unexpected brackets.`)),dQ=P(`editorBracketPairGuide.background1`,`#00000000`,D(741,`Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.`)),fQ=P(`editorBracketPairGuide.background2`,`#00000000`,D(742,`Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.`)),pQ=P(`editorBracketPairGuide.background3`,`#00000000`,D(743,`Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.`)),mQ=P(`editorBracketPairGuide.background4`,`#00000000`,D(744,`Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.`)),hQ=P(`editorBracketPairGuide.background5`,`#00000000`,D(745,`Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.`)),gQ=P(`editorBracketPairGuide.background6`,`#00000000`,D(746,`Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.`)),_Q=P(`editorBracketPairGuide.activeBackground1`,`#00000000`,D(747,`Background color of active bracket pair guides (1). Requires enabling bracket pair guides.`)),vQ=P(`editorBracketPairGuide.activeBackground2`,`#00000000`,D(748,`Background color of active bracket pair guides (2). Requires enabling bracket pair guides.`)),yQ=P(`editorBracketPairGuide.activeBackground3`,`#00000000`,D(749,`Background color of active bracket pair guides (3). Requires enabling bracket pair guides.`)),bQ=P(`editorBracketPairGuide.activeBackground4`,`#00000000`,D(750,`Background color of active bracket pair guides (4). Requires enabling bracket pair guides.`)),xQ=P(`editorBracketPairGuide.activeBackground5`,`#00000000`,D(751,`Background color of active bracket pair guides (5). Requires enabling bracket pair guides.`)),SQ=P(`editorBracketPairGuide.activeBackground6`,`#00000000`,D(752,`Background color of active bracket pair guides (6). Requires enabling bracket pair guides.`));P(`editorUnicodeHighlight.border`,Bl,D(753,`Border color used to highlight unicode characters.`)),P(`editorUnicodeHighlight.background`,Nee,D(754,`Background color used to highlight unicode characters.`)),Er((e,t)=>{let n=e.getColor(Pl),r=e.getColor(xZ),i=r&&!r.isTransparent()?r:n;i&&t.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${i}; }`)});var CQ=class extends w{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw Error(`TextModelPart is disposed!`)}};function wQ(e,t){let n=0,r=0,i=e.length;for(;r<i;){let i=e.charCodeAt(r);if(i===O.Space)n++;else if(i===O.Tab)n=n-n%t+t;else break;r++}return r===i?-1:n}var TQ;(function(e){e[e.Disabled=0]=`Disabled`,e[e.EnabledForActive=1]=`EnabledForActive`,e[e.Enabled=2]=`Enabled`})(TQ||={});var EQ=class{constructor(e,t,n,r,i,a){if(this.visibleColumn=e,this.column=t,this.className=n,this.horizontalLine=r,this.forWrappedLinesAfterColumn=i,this.forWrappedLinesBeforeOrAtColumn=a,e!==-1==(t!==-1))throw Error()}},DQ=class{constructor(e,t){this.top=e,this.endColumn=t}},OQ=class extends CQ{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return wQ(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,n){this.assertNotDisposed();let r=this.textModel.getLineCount();if(e<1||e>r)throw new y(`Illegal value for lineNumber`);let i=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,a=!!(i&&i.offSide),o=-2,s=-1,c=-2,l=-1,u=e=>{if(o!==-1&&(o===-2||o>e-1)){o=-1,s=-1;for(let t=e-2;t>=0;t--){let e=this._computeIndentLevel(t);if(e>=0){o=t,s=e;break}}}if(c===-2){c=-1,l=-1;for(let t=e;t<r;t++){let e=this._computeIndentLevel(t);if(e>=0){c=t,l=e;break}}}},d=-2,f=-1,p=-2,m=-1,h=e=>{if(d===-2){d=-1,f=-1;for(let t=e-2;t>=0;t--){let e=this._computeIndentLevel(t);if(e>=0){d=t,f=e;break}}}if(p!==-1&&(p===-2||p<e-1)){p=-1,m=-1;for(let t=e;t<r;t++){let e=this._computeIndentLevel(t);if(e>=0){p=t,m=e;break}}}},g=0,_=!0,v=0,ee=!0,te=0,ne=0;for(let i=0;_||ee;i++){let o=e-i,p=e+i;i>1&&(o<1||o<t)&&(_=!1),i>1&&(p>r||p>n)&&(ee=!1),i>5e4&&(_=!1,ee=!1);let re=-1;if(_&&o>=1){let e=this._computeIndentLevel(o-1);e>=0?(c=o-1,l=e,re=Math.ceil(e/this.textModel.getOptions().indentSize)):(u(o),re=this._getIndentLevelForWhitespaceLine(a,s,l))}let ie=-1;if(ee&&p<=r){let e=this._computeIndentLevel(p-1);e>=0?(d=p-1,f=e,ie=Math.ceil(e/this.textModel.getOptions().indentSize)):(h(p),ie=this._getIndentLevelForWhitespaceLine(a,f,m))}if(i===0){ne=re;continue}if(i===1){if(p<=r&&ie>=0&&ne+1===ie){_=!1,g=p,v=p,te=ie;continue}if(o>=1&&re>=0&&re-1===ne){ee=!1,g=o,v=o,te=re;continue}if(g=e,v=e,te=ne,te===0)return{startLineNumber:g,endLineNumber:v,indent:te}}_&&(re>=te?g=o:_=!1),ee&&(ie>=te?v=p:ee=!1)}return{startLineNumber:g,endLineNumber:v,indent:te}}getLinesBracketGuides(e,t,n,r){let i=[];for(let n=e;n<=t;n++)i.push([]);let a=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new X(e,1,t,this.textModel.getLineMaxColumn(t))).toArray(),o;n&&a.length>0&&(o=Ze((e<=n.lineNumber&&n.lineNumber<=t?a:this.textModel.bracketPairs.getBracketPairsInRange(X.fromPositions(n)).toArray()).filter(e=>X.strictContainsPosition(e.range,n)),e=>!0)?.range);let s=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,c=new kQ;for(let n of a){if(!n.closingBracketRange)continue;let a=o&&n.range.equalsRange(o);if(!a&&!r.includeInactive)continue;let l=c.getInlineClassName(n.nestingLevel,n.nestingLevelOfEqualBracketType,s)+(r.highlightActive&&a?` `+c.activeClassName:``),u=n.openingBracketRange.getStartPosition(),d=n.closingBracketRange.getStartPosition(),f=r.horizontalGuides===TQ.Enabled||r.horizontalGuides===TQ.EnabledForActive&&a;if(n.range.startLineNumber===n.range.endLineNumber){f&&i[n.range.startLineNumber-e].push(new EQ(-1,n.openingBracketRange.getEndPosition().column,l,new DQ(!1,d.column),-1,-1));continue}let p=this.getVisibleColumnFromPosition(d),m=this.getVisibleColumnFromPosition(n.openingBracketRange.getStartPosition()),h=Math.min(m,p,n.minVisibleColumnIndentation+1),g=!1;Wa(this.textModel.getLineContent(n.closingBracketRange.startLineNumber))<n.closingBracketRange.startColumn-1&&(g=!0);let _=Math.max(u.lineNumber,e),v=Math.min(d.lineNumber,t),ee=g?1:0;for(let t=_;t<v+ee;t++)i[t-e].push(new EQ(h,-1,l,null,t===u.lineNumber?u.column:-1,t===d.lineNumber?d.column:-1));f&&(u.lineNumber>=e&&m>h&&i[u.lineNumber-e].push(new EQ(h,-1,l,new DQ(!1,u.column),-1,-1)),d.lineNumber<=t&&p>h&&i[d.lineNumber-e].push(new EQ(h,-1,l,new DQ(!g,d.column),-1,-1)))}for(let e of i)e.sort((e,t)=>e.visibleColumn-t.visibleColumn);return i}getVisibleColumnFromPosition(e){return eZ.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();let n=this.textModel.getLineCount();if(e<1||e>n)throw Error(`Illegal value for startLineNumber`);if(t<1||t>n)throw Error(`Illegal value for endLineNumber`);let r=this.textModel.getOptions(),i=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,a=!!(i&&i.offSide),o=Array(t-e+1),s=-2,c=-1,l=-2,u=-1;for(let i=e;i<=t;i++){let t=i-e,d=this._computeIndentLevel(i-1);if(d>=0){s=i-1,c=d,o[t]=Math.ceil(d/r.indentSize);continue}if(s===-2){s=-1,c=-1;for(let e=i-2;e>=0;e--){let t=this._computeIndentLevel(e);if(t>=0){s=e,c=t;break}}}if(l!==-1&&(l===-2||l<i-1)){l=-1,u=-1;for(let e=i;e<n;e++){let t=this._computeIndentLevel(e);if(t>=0){l=e,u=t;break}}}o[t]=this._getIndentLevelForWhitespaceLine(a,c,u)}return o}_getIndentLevelForWhitespaceLine(e,t,n){let r=this.textModel.getOptions();return t===-1||n===-1?0:t<n?1+Math.floor(t/r.indentSize):t===n||e?Math.ceil(n/r.indentSize):1+Math.floor(n/r.indentSize)}},kQ=class{constructor(){this.activeClassName=`indent-active`}getInlineClassName(e,t,n){return this.getInlineClassNameOfLevel(n?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}};function AQ(e,t){let n,r=!0;return Cte({changeTracker:{createChangeSummary:()=>({deltas:[],didChange:!1}),handleChange:(t,n)=>{if(t.didChange(e)){let e=t.change;e!==void 0&&n.deltas.push(e),n.didChange=!0}return!0}}},(i,a)=>{let o=e.read(i),s=n;a.didChange&&(n=o,t(o,s,a.deltas)),r&&(r=!1,n=o)})}function jQ(e,t){let n=new C,r=AQ(e,(e,r,i)=>{n.clear(),t(e,r,i,n)});return{dispose(){r.dispose(),n.dispose()}}}function MQ(e,t){return jQ(e,(e,n,r,i)=>{t(e,n,r,Rr(i))})}var NQ=new class{constructor(){this._onDidChange=new E,this.onDidChange=this._onDidChange.event,this._enabled=!0}get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}};function PQ(){return e=>({fontFamily:e.fontFamily?String(e.fontFamily):void 0,fontSizeMultiplier:e.fontSizeMultiplier?Number(e.fontSizeMultiplier):void 0,lineHeightMultiplier:e.lineHeightMultiplier?Number(e.lineHeightMultiplier):void 0})}var FQ;(function(e){e[e.Flush=1]=`Flush`,e[e.LineChanged=2]=`LineChanged`,e[e.LinesDeleted=3]=`LinesDeleted`,e[e.LinesInserted=4]=`LinesInserted`,e[e.EOLChanged=5]=`EOLChanged`})(FQ||={});var IQ=class{constructor(){this.changeType=FQ.Flush}},LQ=class e{static applyInjectedText(e,t){if(!t||t.length===0)return e;let n=``,r=0;for(let i of t)n+=e.substring(r,i.column-1),r=i.column-1,n+=i.options.content;return n+=e.substring(r),n}static fromDecorations(t){let n=[];for(let r of t)r.options.before&&r.options.before.content.length>0&&n.push(new e(r.ownerId,r.range.startLineNumber,r.range.startColumn,r.options.before,0)),r.options.after&&r.options.after.content.length>0&&n.push(new e(r.ownerId,r.range.endLineNumber,r.range.endColumn,r.options.after,1));return n.sort((e,t)=>e.lineNumber===t.lineNumber?e.column===t.column?e.order-t.order:e.column-t.column:e.lineNumber-t.lineNumber),n}constructor(e,t,n,r,i){this.ownerId=e,this.lineNumber=t,this.column=n,this.options=r,this.order=i}withText(t){return new e(this.ownerId,this.lineNumber,this.column,{...this.options,content:t},this.order)}},RQ=class{constructor(e,t,n){this.changeType=FQ.LineChanged,this.lineNumber=e,this.detail=t,this.injectedText=n}},zQ=class{constructor(e,t,n,r){this.ownerId=e,this.decorationId=t,this.lineNumber=n,this.lineHeightMultiplier=r}},BQ=class{constructor(e,t){this.ownerId=e,this.lineNumber=t}},VQ=class{constructor(e,t){this.changeType=FQ.LinesDeleted,this.fromLineNumber=e,this.toLineNumber=t}},HQ=class{constructor(e,t,n,r){this.changeType=FQ.LinesInserted,this.injectedTexts=r,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}},UQ=class{constructor(){this.changeType=FQ.EOLChanged}},WQ=class e{constructor(e,t,n,r){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=r,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(t,n){let r=[].concat(t.changes,n.changes),i=n.versionId;return new e(r,i,t.isUndoing||n.isUndoing,t.isRedoing||n.isRedoing)}},GQ=class{constructor(e){this.changes=e}},KQ=class{constructor(e){this.changes=e}affects(e){if(X.isIRange(e)){for(let t of this.changes)if(t.lineNumber>=e.startLineNumber&&t.lineNumber<=e.endLineNumber)return!0;return!1}else{for(let t of this.changes)if(t.lineNumber===e.lineNumber)return!0;return!1}}},qQ=class{constructor(e){this.changes=e}},JQ=class e{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(t){return new e(WQ.merge(this.rawContentChangedEvent,t.rawContentChangedEvent),e._mergeChangeEvents(this.contentChangedEvent,t.contentChangedEvent))}static _mergeChangeEvents(e,t){let n=[].concat(e.changes,t.changes),r=t.eol,i=t.versionId,a=e.isUndoing||t.isUndoing,o=e.isRedoing||t.isRedoing,s=e.isFlush||t.isFlush;return{changes:n,eol:r,isEolChange:e.isEolChange&&t.isEolChange,versionId:i,isUndoing:a,isRedoing:o,isFlush:s,detailedReasons:e.detailedReasons.concat(t.detailedReasons),detailedReasonsChangeLengths:e.detailedReasonsChangeLengths.concat(t.detailedReasonsChangeLengths)}}},YQ;(function(e){e.EditorHintDecoration=`squiggly-hint`,e.EditorInfoDecoration=`squiggly-info`,e.EditorWarningDecoration=`squiggly-warning`,e.EditorErrorDecoration=`squiggly-error`,e.EditorUnnecessaryDecoration=`squiggly-unnecessary`,e.EditorUnnecessaryInlineDecoration=`squiggly-inline-unnecessary`,e.EditorDeprecatedInlineDecoration=`squiggly-inline-deprecated`})(YQ||={});var XQ;(function(e){e[e.Black=0]=`Black`,e[e.Red=1]=`Red`})(XQ||={});var ZQ;(function(e){e[e.ColorMask=1]=`ColorMask`,e[e.ColorMaskInverse=254]=`ColorMaskInverse`,e[e.ColorOffset=0]=`ColorOffset`,e[e.IsVisitedMask=2]=`IsVisitedMask`,e[e.IsVisitedMaskInverse=253]=`IsVisitedMaskInverse`,e[e.IsVisitedOffset=1]=`IsVisitedOffset`,e[e.IsForValidationMask=4]=`IsForValidationMask`,e[e.IsForValidationMaskInverse=251]=`IsForValidationMaskInverse`,e[e.IsForValidationOffset=2]=`IsForValidationOffset`,e[e.StickinessMask=24]=`StickinessMask`,e[e.StickinessMaskInverse=231]=`StickinessMaskInverse`,e[e.StickinessOffset=3]=`StickinessOffset`,e[e.CollapseOnReplaceEditMask=32]=`CollapseOnReplaceEditMask`,e[e.CollapseOnReplaceEditMaskInverse=223]=`CollapseOnReplaceEditMaskInverse`,e[e.CollapseOnReplaceEditOffset=5]=`CollapseOnReplaceEditOffset`,e[e.IsMarginMask=64]=`IsMarginMask`,e[e.IsMarginMaskInverse=191]=`IsMarginMaskInverse`,e[e.IsMarginOffset=6]=`IsMarginOffset`,e[e.AffectsFontMask=128]=`AffectsFontMask`,e[e.AffectsFontMaskInverse=127]=`AffectsFontMaskInverse`,e[e.AffectsFontOffset=7]=`AffectsFontOffset`,e[e.MIN_SAFE_DELTA=-1073741824]=`MIN_SAFE_DELTA`,e[e.MAX_SAFE_DELTA=1073741824]=`MAX_SAFE_DELTA`})(ZQ||={});function QQ(e){return(e.metadata&ZQ.ColorMask)>>>ZQ.ColorOffset}function $Q(e,t){e.metadata=e.metadata&ZQ.ColorMaskInverse|t<<ZQ.ColorOffset}function e$(e){return(e.metadata&ZQ.IsVisitedMask)>>>ZQ.IsVisitedOffset==1}function t$(e,t){e.metadata=e.metadata&ZQ.IsVisitedMaskInverse|(t?1:0)<<ZQ.IsVisitedOffset}function n$(e){return(e.metadata&ZQ.IsForValidationMask)>>>ZQ.IsForValidationOffset==1}function r$(e,t){e.metadata=e.metadata&ZQ.IsForValidationMaskInverse|(t?1:0)<<ZQ.IsForValidationOffset}function i$(e){return(e.metadata&ZQ.IsMarginMask)>>>ZQ.IsMarginOffset==1}function a$(e,t){e.metadata=e.metadata&ZQ.IsMarginMaskInverse|(t?1:0)<<ZQ.IsMarginOffset}function o$(e){return(e.metadata&ZQ.AffectsFontMask)>>>ZQ.AffectsFontOffset==1}function s$(e,t){e.metadata=e.metadata&ZQ.AffectsFontMaskInverse|(t?1:0)<<ZQ.AffectsFontOffset}function c$(e){return(e.metadata&ZQ.StickinessMask)>>>ZQ.StickinessOffset}function l$(e,t){e.metadata=e.metadata&ZQ.StickinessMaskInverse|t<<ZQ.StickinessOffset}function u$(e){return(e.metadata&ZQ.CollapseOnReplaceEditMask)>>>ZQ.CollapseOnReplaceEditOffset==1}function d$(e,t){e.metadata=e.metadata&ZQ.CollapseOnReplaceEditMaskInverse|(t?1:0)<<ZQ.CollapseOnReplaceEditOffset}var f$=class{constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,$Q(this,XQ.Red),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,r$(this,!1),a$(this,!1),l$(this,AL.NeverGrowsWhenTypingAtEdges),d$(this,!1),s$(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,t$(this,!1)}reset(e,t,n,r){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=r}setOptions(e){this.options=e;let t=this.options.className;r$(this,t===YQ.EditorErrorDecoration||t===YQ.EditorWarningDecoration||t===YQ.EditorInfoDecoration),a$(this,this.options.glyphMarginClassName!==null),l$(this,this.options.stickiness),d$(this,this.options.collapseOnReplaceEdit),s$(this,this.options.affectsFont??!1)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}},p$=new f$(null,0,0);p$.parent=p$,p$.left=p$,p$.right=p$,$Q(p$,XQ.Black);var m$=class{constructor(){this.root=p$,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,r,i,a,o){return this.root===p$?[]:w$(this,e,t,n,r,i,a,o)}search(e,t,n,r,i){return this.root===p$?[]:C$(this,e,t,n,r,i)}collectNodesFromOwner(e){return x$(this,e)}collectNodesPostOrder(){return S$(this)}insert(e){T$(this,e),this._normalizeDeltaIfNecessary()}delete(e){D$(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){let n=e,r=0;for(;e!==this.root;)e===e.parent.right&&(r+=e.parent.delta),e=e.parent;let i=n.start+r,a=n.end+r;n.setCachedOffsets(i,a,t)}acceptReplace(e,t,n,r){let i=y$(this,e,e+t);for(let e=0,t=i.length;e<t;e++){let t=i[e];D$(this,t)}this._normalizeDeltaIfNecessary(),b$(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let a=0,o=i.length;a<o;a++){let o=i[a];o.start=o.cachedAbsoluteStart,o.end=o.cachedAbsoluteEnd,v$(o,e,e+t,n,r),o.maxEnd=o.end,T$(this,o)}this._normalizeDeltaIfNecessary()}getAllInOrder(){return C$(this,0,!1,!1,0,!1)}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,h$(this))}};function h$(e){let t=e.root,n=0;for(;t!==p$;){if(t.left!==p$&&!e$(t.left)){t=t.left;continue}if(t.right!==p$&&!e$(t.right)){n+=t.delta,t=t.right;continue}t.start=n+t.start,t.end=n+t.end,t.delta=0,N$(t),t$(t,!0),t$(t.left,!1),t$(t.right,!1),t===t.parent.right&&(n-=t.parent.delta),t=t.parent}t$(e.root,!1)}var g$;(function(e){e[e.MarkerDefined=0]=`MarkerDefined`,e[e.ForceMove=1]=`ForceMove`,e[e.ForceStay=2]=`ForceStay`})(g$||={});function _$(e,t,n,r){return e<n?!0:e>n||r===g$.ForceMove?!1:r===g$.ForceStay?!0:t}function v$(e,t,n,r,i){let a=c$(e),o=a===AL.AlwaysGrowsWhenTypingAtEdges||a===AL.GrowsOnlyWhenTypingBefore,s=a===AL.NeverGrowsWhenTypingAtEdges||a===AL.GrowsOnlyWhenTypingBefore,c=n-t,l=r,u=Math.min(c,l),d=e.start,f=!1,p=e.end,m=!1;t<=d&&p<=n&&u$(e)&&(e.start=t,f=!0,e.end=t,m=!0);{let e=i?g$.ForceMove:c>0?g$.ForceStay:g$.MarkerDefined;!f&&_$(d,o,t,e)&&(f=!0),!m&&_$(p,s,t,e)&&(m=!0)}if(u>0&&!i){let e=c>l?g$.ForceStay:g$.MarkerDefined;!f&&_$(d,o,t+u,e)&&(f=!0),!m&&_$(p,s,t+u,e)&&(m=!0)}{let r=i?g$.ForceMove:g$.MarkerDefined;!f&&_$(d,o,n,r)&&(e.start=t+l,f=!0),!m&&_$(p,s,n,r)&&(e.end=t+l,m=!0)}let h=l-c;f||(e.start=Math.max(0,d+h)),m||(e.end=Math.max(0,p+h)),e.start>e.end&&(e.end=e.start)}function y$(e,t,n){let r=e.root,i=0,a=0,o=0,s=0,c=[],l=0;for(;r!==p$;){if(e$(r)){t$(r.left,!1),t$(r.right,!1),r===r.parent.right&&(i-=r.parent.delta),r=r.parent;continue}if(!e$(r.left)){if(a=i+r.maxEnd,a<t){t$(r,!0);continue}if(r.left!==p$){r=r.left;continue}}if(o=i+r.start,o>n){t$(r,!0);continue}if(s=i+r.end,s>=t&&(r.setCachedOffsets(o,s,0),c[l++]=r),t$(r,!0),r.right!==p$&&!e$(r.right)){i+=r.delta,r=r.right;continue}}return t$(e.root,!1),c}function b$(e,t,n,r){let i=e.root,a=0,o=0,s=0,c=r-(n-t);for(;i!==p$;){if(e$(i)){t$(i.left,!1),t$(i.right,!1),i===i.parent.right&&(a-=i.parent.delta),N$(i),i=i.parent;continue}if(!e$(i.left)){if(o=a+i.maxEnd,o<t){t$(i,!0);continue}if(i.left!==p$){i=i.left;continue}}if(s=a+i.start,s>n){i.start+=c,i.end+=c,i.delta+=c,(i.delta<ZQ.MIN_SAFE_DELTA||i.delta>ZQ.MAX_SAFE_DELTA)&&(e.requestNormalizeDelta=!0),t$(i,!0);continue}if(t$(i,!0),i.right!==p$&&!e$(i.right)){a+=i.delta,i=i.right;continue}}t$(e.root,!1)}function x$(e,t){let n=e.root,r=[],i=0;for(;n!==p$;){if(e$(n)){t$(n.left,!1),t$(n.right,!1),n=n.parent;continue}if(n.left!==p$&&!e$(n.left)){n=n.left;continue}if(n.ownerId===t&&(r[i++]=n),t$(n,!0),n.right!==p$&&!e$(n.right)){n=n.right;continue}}return t$(e.root,!1),r}function S$(e){let t=e.root,n=[],r=0;for(;t!==p$;){if(e$(t)){t$(t.left,!1),t$(t.right,!1),t=t.parent;continue}if(t.left!==p$&&!e$(t.left)){t=t.left;continue}if(t.right!==p$&&!e$(t.right)){t=t.right;continue}n[r++]=t,t$(t,!0)}return t$(e.root,!1),n}function C$(e,t,n,r,i,a){let o=e.root,s=0,c=0,l=0,u=[],d=0;for(;o!==p$;){if(e$(o)){t$(o.left,!1),t$(o.right,!1),o===o.parent.right&&(s-=o.parent.delta),o=o.parent;continue}if(o.left!==p$&&!e$(o.left)){o=o.left;continue}c=s+o.start,l=s+o.end,o.setCachedOffsets(c,l,i);let e=!0;if(t&&o.ownerId&&o.ownerId!==t&&(e=!1),n&&n$(o)&&(e=!1),r&&o$(o)&&(e=!1),a&&!i$(o)&&(e=!1),e&&(u[d++]=o),t$(o,!0),o.right!==p$&&!e$(o.right)){s+=o.delta,o=o.right;continue}}return t$(e.root,!1),u}function w$(e,t,n,r,i,a,o,s){let c=e.root,l=0,u=0,d=0,f=0,p=[],m=0;for(;c!==p$;){if(e$(c)){t$(c.left,!1),t$(c.right,!1),c===c.parent.right&&(l-=c.parent.delta),c=c.parent;continue}if(!e$(c.left)){if(u=l+c.maxEnd,u<t){t$(c,!0);continue}if(c.left!==p$){c=c.left;continue}}if(d=l+c.start,d>n){t$(c,!0);continue}if(f=l+c.end,f>=t){c.setCachedOffsets(d,f,o);let e=!0;r&&c.ownerId&&c.ownerId!==r&&(e=!1),i&&n$(c)&&(e=!1),a&&o$(c)&&(e=!1),s&&!i$(c)&&(e=!1),e&&(p[m++]=c)}if(t$(c,!0),c.right!==p$&&!e$(c.right)){l+=c.delta,c=c.right;continue}}return t$(e.root,!1),p}function T$(e,t){if(e.root===p$)return t.parent=p$,t.left=p$,t.right=p$,$Q(t,XQ.Black),e.root=t,e.root;E$(e,t),P$(t.parent);let n=t;for(;n!==e.root&&QQ(n.parent)===XQ.Red;)if(n.parent===n.parent.parent.left){let t=n.parent.parent.right;QQ(t)===XQ.Red?($Q(n.parent,XQ.Black),$Q(t,XQ.Black),$Q(n.parent.parent,XQ.Red),n=n.parent.parent):(n===n.parent.right&&(n=n.parent,A$(e,n)),$Q(n.parent,XQ.Black),$Q(n.parent.parent,XQ.Red),j$(e,n.parent.parent))}else{let t=n.parent.parent.left;QQ(t)===XQ.Red?($Q(n.parent,XQ.Black),$Q(t,XQ.Black),$Q(n.parent.parent,XQ.Red),n=n.parent.parent):(n===n.parent.left&&(n=n.parent,j$(e,n)),$Q(n.parent,XQ.Black),$Q(n.parent.parent,XQ.Red),A$(e,n.parent.parent))}return $Q(e.root,XQ.Black),t}function E$(e,t){let n=0,r=e.root,i=t.start,a=t.end;for(;;)if(F$(i,a,r.start+n,r.end+n)<0)if(r.left===p$){t.start-=n,t.end-=n,t.maxEnd-=n,r.left=t;break}else r=r.left;else if(r.right===p$){t.start-=n+r.delta,t.end-=n+r.delta,t.maxEnd-=n+r.delta,r.right=t;break}else n+=r.delta,r=r.right;t.parent=r,t.left=p$,t.right=p$,$Q(t,XQ.Red)}function D$(e,t){let n,r;if(t.left===p$?(n=t.right,r=t,n.delta+=t.delta,(n.delta<ZQ.MIN_SAFE_DELTA||n.delta>ZQ.MAX_SAFE_DELTA)&&(e.requestNormalizeDelta=!0),n.start+=t.delta,n.end+=t.delta):t.right===p$?(n=t.left,r=t):(r=O$(t.right),n=r.right,n.start+=r.delta,n.end+=r.delta,n.delta+=r.delta,(n.delta<ZQ.MIN_SAFE_DELTA||n.delta>ZQ.MAX_SAFE_DELTA)&&(e.requestNormalizeDelta=!0),r.start+=t.delta,r.end+=t.delta,r.delta=t.delta,(r.delta<ZQ.MIN_SAFE_DELTA||r.delta>ZQ.MAX_SAFE_DELTA)&&(e.requestNormalizeDelta=!0)),r===e.root){e.root=n,$Q(n,XQ.Black),t.detach(),k$(),N$(n),e.root.parent=p$;return}let i=QQ(r)===XQ.Red;if(r===r.parent.left?r.parent.left=n:r.parent.right=n,r===t?n.parent=r.parent:(r.parent===t?n.parent=r:n.parent=r.parent,r.left=t.left,r.right=t.right,r.parent=t.parent,$Q(r,QQ(t)),t===e.root?e.root=r:t===t.parent.left?t.parent.left=r:t.parent.right=r,r.left!==p$&&(r.left.parent=r),r.right!==p$&&(r.right.parent=r)),t.detach(),i){P$(n.parent),r!==t&&(P$(r),P$(r.parent)),k$();return}P$(n),P$(n.parent),r!==t&&(P$(r),P$(r.parent));let a;for(;n!==e.root&&QQ(n)===XQ.Black;)n===n.parent.left?(a=n.parent.right,QQ(a)===XQ.Red&&($Q(a,XQ.Black),$Q(n.parent,XQ.Red),A$(e,n.parent),a=n.parent.right),QQ(a.left)===XQ.Black&&QQ(a.right)===XQ.Black?($Q(a,XQ.Red),n=n.parent):(QQ(a.right)===XQ.Black&&($Q(a.left,XQ.Black),$Q(a,XQ.Red),j$(e,a),a=n.parent.right),$Q(a,QQ(n.parent)),$Q(n.parent,XQ.Black),$Q(a.right,XQ.Black),A$(e,n.parent),n=e.root)):(a=n.parent.left,QQ(a)===XQ.Red&&($Q(a,XQ.Black),$Q(n.parent,XQ.Red),j$(e,n.parent),a=n.parent.left),QQ(a.left)===XQ.Black&&QQ(a.right)===XQ.Black?($Q(a,XQ.Red),n=n.parent):(QQ(a.left)===XQ.Black&&($Q(a.right,XQ.Black),$Q(a,XQ.Red),A$(e,a),a=n.parent.left),$Q(a,QQ(n.parent)),$Q(n.parent,XQ.Black),$Q(a.left,XQ.Black),j$(e,n.parent),n=e.root));$Q(n,XQ.Black),k$()}function O$(e){for(;e.left!==p$;)e=e.left;return e}function k$(){p$.parent=p$,p$.delta=0,p$.start=0,p$.end=0}function A$(e,t){let n=t.right;n.delta+=t.delta,(n.delta<ZQ.MIN_SAFE_DELTA||n.delta>ZQ.MAX_SAFE_DELTA)&&(e.requestNormalizeDelta=!0),n.start+=t.delta,n.end+=t.delta,t.right=n.left,n.left!==p$&&(n.left.parent=t),n.parent=t.parent,t.parent===p$?e.root=n:t===t.parent.left?t.parent.left=n:t.parent.right=n,n.left=t,t.parent=n,N$(t),N$(n)}function j$(e,t){let n=t.left;t.delta-=n.delta,(t.delta<ZQ.MIN_SAFE_DELTA||t.delta>ZQ.MAX_SAFE_DELTA)&&(e.requestNormalizeDelta=!0),t.start-=n.delta,t.end-=n.delta,t.left=n.right,n.right!==p$&&(n.right.parent=t),n.parent=t.parent,t.parent===p$?e.root=n:t===t.parent.right?t.parent.right=n:t.parent.left=n,n.right=t,t.parent=n,N$(t),N$(n)}function M$(e){let t=e.end;if(e.left!==p$){let n=e.left.maxEnd;n>t&&(t=n)}if(e.right!==p$){let n=e.right.maxEnd+e.delta;n>t&&(t=n)}return t}function N$(e){e.maxEnd=M$(e)}function P$(e){for(;e!==p$;){let t=M$(e);if(e.maxEnd===t)return;e.maxEnd=t,e=e.parent}}function F$(e,t,n,r){return e===n?t-r:e-n}var I$=V(`undoRedoService`),L$;(function(e){e[e.Unknown=0]=`Unknown`,e[e.Invalid=3]=`Invalid`,e[e.LF=1]=`LF`,e[e.CRLF=2]=`CRLF`})(L$||={});function R$(e){let t=0,n=0,r=0,i=L$.Unknown;for(let a=0,o=e.length;a<o;a++){let s=e.charCodeAt(a);s===O.CarriageReturn?(t===0&&(n=a),t++,a+1<o&&e.charCodeAt(a+1)===O.LineFeed?(i|=L$.CRLF,a++):i|=L$.Invalid,r=a+1):s===O.LineFeed&&(i|=L$.LF,t===0&&(n=a),t++,r=a+1)}return t===0&&(n=e.length),[t,n,e.length-r,i]}var z$=class e{static#e=this.empty=new e([]);static deserialize(t){return new e(t.map(e=>B$.deserialize(e)))}static fromStringEdit(t,n){let r=jX.fromStringEdit(t,n);return e.fromTextEdit(r,n)}static fromTextEdit(t,n){let r=t.replacements,i=[],a=[];for(let e=0;e<r.length;e++){let t=r[e],o=e+1<r.length?r[e+1]:void 0;if(a.push(t),o&&o.range.startLineNumber===t.range.endLineNumber)continue;let s=MX.joinReplacements(a,n);a.length=0;let c=B$.fromSingleTextEdit(s,n);i.push(c)}return new e(i)}static createFromUnsorted(t){let n=t.slice();return n.sort(qt(e=>e.lineRange.startLineNumber,Yt)),new e(n)}constructor(e){this.replacements=e,fe(he(e,(e,t)=>e.lineRange.endLineNumberExclusive<=t.lineRange.startLineNumber))}isEmpty(){return this.replacements.length===0}toEdit(e){let t=[];for(let n of this.replacements){let r=n.toSingleEdit(e);t.push(r)}return new RX(t)}toString(){return this.replacements.map(e=>e.toString()).join(`,`)}serialize(){return this.replacements.map(e=>e.serialize())}getNewLineRanges(){let e=[],t=0;for(let n of this.replacements)e.push(mY.ofLength(n.lineRange.startLineNumber+t,n.newLines.length)),t+=n.newLines.length-n.lineRange.length;return e}mapLineNumber(e){let t=0;for(let n of this.replacements){if(n.lineRange.endLineNumberExclusive>e)break;t+=n.newLines.length-n.lineRange.length}return e+t}mapLineRange(e){return new mY(this.mapLineNumber(e.startLineNumber),this.mapLineNumber(e.endLineNumberExclusive))}mapBackLineRange(e,t){return this.inverse(t).mapLineRange(e)}touches(e){return this.replacements.some(t=>e.replacements.some(e=>t.lineRange.intersect(e.lineRange)))}rebase(t){return new e(this.replacements.map(e=>new B$(t.mapLineRange(e.lineRange),e.newLines)))}humanReadablePatch(e){let t=[];function n(e,n,r,i){let a=r===`unmodified`?` `:r===`deleted`?`-`:`+`;i===void 0&&(i=`[[[[[ WARNING: LINE DOES NOT EXIST ]]]]]`);let o=e===-1?`   `:e.toString().padStart(3,` `),s=n===-1?`   `:n.toString().padStart(3,` `);t.push(`${a} ${o} ${s} ${i}`)}function r(){t.push(`---`)}let i=0,a=!0;for(let t of gt(this.replacements,(e,t)=>e.lineRange.distanceToRange(t.lineRange)<=5)){a?a=!1:r();let o=t[0].lineRange.startLineNumber-2;for(let r of t){for(let t=Math.max(1,o);t<r.lineRange.startLineNumber;t++)n(t,t+i,`unmodified`,e[t-1]);let t=r.lineRange,a=r.newLines;for(let r of t.mapToLineArray(e=>e)){let t=e[r-1];n(r,-1,`deleted`,t)}for(let e=0;e<a.length;e++){let r=a[e];n(-1,t.startLineNumber+i+e,`added`,r)}o=t.endLineNumberExclusive,i+=r.newLines.length-r.lineRange.length}for(let t=o;t<=Math.min(o+2,e.length);t++)n(t,t+i,`unmodified`,e[t-1])}return t.join(`
`)}apply(e){let t=[],n=0;for(let r of this.replacements){for(;n<r.lineRange.startLineNumber-1;)t.push(e[n]),n++;for(let e of r.newLines)t.push(e);n=r.lineRange.endLineNumberExclusive-1}for(;n<e.length;)t.push(e[n]),n++;return t}inverse(t){let n=this.getNewLineRanges();return new e(this.replacements.map((e,r)=>new B$(n[r],t.slice(e.lineRange.startLineNumber-1,e.lineRange.endLineNumberExclusive-1))))}},B$=class e{static deserialize(t){return new e(mY.ofLength(t[0],t[1]-t[0]),t[2])}static fromSingleTextEdit(t,n){let r=Ua(t.text),i=t.range.startLineNumber,a=n.getValueOfRange(X.fromPositions(new KK(t.range.startLineNumber,1),t.range.getStartPosition()));r[0]=a+r[0];let o=t.range.endLineNumber+1,s=n.getTransformer().getLineLength(t.range.endLineNumber)+1,c=n.getValueOfRange(X.fromPositions(t.range.getEndPosition(),new KK(t.range.endLineNumber,s)));r[r.length-1]=r[r.length-1]+c;let l=t.range.startColumn===n.getTransformer().getLineLength(t.range.startLineNumber)+1,u=t.range.endColumn===1;return l&&r[0].length===a.length&&(i++,r.shift()),r.length>0&&i<o&&u&&r[r.length-1].length===c.length&&(o--,r.pop()),new e(new mY(i,o),r)}constructor(e,t){this.lineRange=e,this.newLines=t}toSingleTextEdit(e){if(this.newLines.length===0){let t=e.getTransformer().textLength;if(this.lineRange.endLineNumberExclusive===t.lineCount+2){let n;if(this.lineRange.startLineNumber>1){let t=this.lineRange.startLineNumber-1;n=new KK(t,e.getTransformer().getLineLength(t)+1)}else n=new KK(1,1);let r=t.addToPosition(new KK(1,1));return new MX(X.fromPositions(n,r),``)}else return new MX(new X(this.lineRange.startLineNumber,1,this.lineRange.endLineNumberExclusive,1),``)}else if(this.lineRange.isEmpty){let t,n,r,i=this.lineRange.startLineNumber;return i===e.getTransformer().textLength.lineCount+2?(t=i-1,n=e.getTransformer().getLineLength(t)+1,r=this.newLines.map(e=>`
`+e).join(``)):(t=i,n=1,r=this.newLines.map(e=>e+`
`).join(``)),new MX(X.fromPositions(new KK(t,n)),r)}else{let t=this.lineRange.endLineNumberExclusive-1,n=e.getTransformer().getLineLength(t)+1;return new MX(new X(this.lineRange.startLineNumber,1,t,n),this.newLines.join(`
`))}}toSingleEdit(e){let t=this.toSingleTextEdit(e);return new zX(e.getTransformer().getOffsetRange(t.range),t.text)}toString(){return`${this.lineRange}->${JSON.stringify(this.newLines)}`}serialize(){return[this.lineRange.startLineNumber,this.lineRange.endLineNumberExclusive,this.newLines]}removeCommonSuffixPrefixLines(t){let n=this.lineRange.startLineNumber,r=this.lineRange.endLineNumberExclusive,i=0;for(;n<r&&i<this.newLines.length&&this.newLines[i]===t.getLineAt(n);)n++,i++;let a=0;for(;n<r&&a+i<this.newLines.length&&this.newLines[this.newLines.length-1-a]===t.getLineAt(r-1);)r--,a++;return i===0&&a===0?this:new e(new mY(n,r),this.newLines.slice(i,this.newLines.length-a))}toLineEdit(){return new z$([this])}},V$;(function(e){function t(e){return Array.isArray(e)&&e.length===3&&typeof e[0]==`number`&&typeof e[1]==`number`&&Array.isArray(e[2])&&e[2].every(e=>typeof e==`string`)}e.is=t})(V$||={});var H$=Symbol(`TextModelEditSource`),U$=class{constructor(e,t){this.metadata=e}toString(){return`${this.metadata.source}`}getType(){let e=this.metadata;switch(e.source){case`cursor`:return e.kind;case`inlineCompletionAccept`:return e.source+(e.$nes?`:nes`:``);case`unknown`:return e.name||`unknown`;default:return e.source}}toKey(e,t={}){let n=this.metadata;return Object.entries(n).filter(([n,r])=>{let i=t[n];return i===void 0?(n.match(/\$/g)||[]).length<=e&&r!=null&&r!==``:i}).map(([e,t])=>`${e}:${t}`).join(`-`)}get props(){return this.metadata}};function W$(e){return new U$(e,H$)}var G$={unknown(e){return W$({source:`unknown`,name:e.name})},rename:(e,t)=>W$({source:`rename`,$$$oldName:e,$$$newName:t}),chatApplyEdits(e){return W$({source:`Chat.applyEdits`,$modelId:q$(e.modelId),$extensionId:e.extensionId?.extensionId,$extensionVersion:e.extensionId?.version,$$languageId:e.languageId,$$sessionId:e.sessionId,$$requestId:e.requestId,$$mode:e.mode,$$codeBlockSuggestionId:e.codeBlockSuggestionId})},chatUndoEdits:()=>W$({source:`Chat.undoEdits`}),chatReset:()=>W$({source:`Chat.reset`}),inlineCompletionAccept(e){return W$({source:`inlineCompletionAccept`,$nes:e.nes,...K$(e.providerId),$$correlationId:e.correlationId,$$requestUuid:e.requestUuid,$$languageId:e.languageId})},inlineCompletionPartialAccept(e){return W$({source:`inlineCompletionPartialAccept`,type:e.type,$nes:e.nes,...K$(e.providerId),$$correlationId:e.correlationId,$$requestUuid:e.requestUuid,$$languageId:e.languageId})},inlineChatApplyEdit(e){return W$({source:`inlineChat.applyEdits`,$modelId:q$(e.modelId),$extensionId:e.extensionId?.extensionId,$extensionVersion:e.extensionId?.version,$$sessionId:e.sessionId,$$requestId:e.requestId,$$languageId:e.languageId})},reloadFromDisk:()=>W$({source:`reloadFromDisk`}),cursor(e){return W$({source:`cursor`,kind:e.kind,detailedSource:e.detailedSource})},setValue:()=>W$({source:`setValue`}),eolChange:()=>W$({source:`eolChange`}),applyEdits:()=>W$({source:`applyEdits`}),snippet:()=>W$({source:`snippet`}),suggest:e=>W$({source:`suggest`,...K$(e.providerId)}),codeAction:e=>W$({source:`codeAction`,$kind:e.kind,...K$(e.providerId)})};function K$(e){return e?{$extensionId:e.extensionId,$extensionVersion:e.extensionVersion,$providerId:e.providerId}:{}}function q$(e){if(e!==void 0)return e.replaceAll(`/`,`|`)}var J$=class e{static fromText(t){let n=SX.ofText(t).lineCount,r=t.length;return new e(n,0,r,0)}static fromEdit(t,n){let r=z$.fromStringEdit(t,n);return new e(rn(r.replacements,e=>e.newLines.length),rn(r.replacements,e=>e.lineRange.length),rn(t.replacements,e=>e.getNewLength()),rn(t.replacements,e=>e.replaceRange.length))}static tryCreate(t,n,r,i){if(!(t===void 0||n===void 0||r===void 0||i===void 0))return new e(t,n,r,i)}constructor(e,t,n,r){this.linesAdded=e,this.linesRemoved=t,this.charsAdded=n,this.charsRemoved=r}},Y$;(function(e){function t(e){return X$(e?e(`sgt`):ux(`sgt`))}e.newId=t})(Y$||={});function X$(e){return e}var Z$=class{constructor(e,t,n,r){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=n,this.isInvalid=r}},Q$=class{constructor(e,t,n,r,i,a){this.range=e,this.openingBracketRange=t,this.closingBracketRange=n,this.nestingLevel=r,this.nestingLevelOfEqualBracketType=i,this.bracketPairNode=a}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}get closingBracketInfo(){return this.bracketPairNode.closingBracket?.bracketInfo}},$$=class extends Q${constructor(e,t,n,r,i,a,o){super(e,t,n,r,i,a),this.minVisibleColumnIndentation=o}};function e1(e,t,n,r){return e===n?i1(0,r-t):i1(n-e,r)}var t1=0;function n1(e){return e===0}var r1=2**26;function i1(e,t){return e*r1+t}function a1(e){let t=e,n=Math.floor(t/r1);return new SX(n,t-n*r1)}function o1(e){return Math.floor(e/r1)}function s1(e){return e}function c1(e,t){let n=e+t;return t>=r1&&(n-=e%r1),n}function l1(e,t){return e.reduce((e,n)=>c1(e,t(n)),0)}function u1(e,t){return e===t}function d1(e,t){let n=e,r=t;if(r-n<=0)return 0;let i=Math.floor(n/r1),a=Math.floor(r/r1),o=r-a*r1;return i===a?i1(0,o-(n-i*r1)):i1(a-i,o)}function f1(e,t){return e<t}function p1(e,t){return e<=t}function m1(e,t){return e>=t}function h1(e){return i1(e.lineNumber-1,e.column-1)}function g1(e,t){let n=e,r=Math.floor(n/r1),i=n-r*r1,a=t,o=Math.floor(a/r1),s=a-o*r1;return new X(r+1,i+1,o+1,s+1)}function _1(e){let t=Ua(e);return i1(t.length-1,t[t.length-1].length)}var v1=[],y1=class e{static#e=this.cache=Array(129);static create(t,n){if(t<=128&&n.length===0){let r=e.cache[t];return r||(r=new e(t,n),e.cache[t]=r),r}return new e(t,n)}static#t=this.empty=e.create(0,v1);static getEmpty(){return this.empty}constructor(e,t){this.items=e,this.additionalItems=t}add(t,n){let r=n.getKey(t),i=r>>5;if(i===0){let t=1<<r|this.items;return t===this.items?this:e.create(t,this.additionalItems)}i--;let a=this.additionalItems.slice(0);for(;a.length<i;)a.push(0);return a[i]|=1<<(r&31),e.create(this.items,a)}has(e,t){let n=t.getKey(e),r=n>>5;return r===0?(this.items&1<<n)!=0:(r--,((this.additionalItems[r]||0)&1<<(n&31))!=0)}merge(t){let n=this.items|t.items;if(this.additionalItems===v1&&t.additionalItems===v1)return n===this.items?this:n===t.items?t:e.create(n,v1);let r=[];for(let e=0;e<Math.max(this.additionalItems.length,t.additionalItems.length);e++){let n=this.additionalItems[e]||0,i=t.additionalItems[e]||0;r.push(n|i)}return e.create(n,r)}intersects(e){if((this.items&e.items)!==0)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if((this.additionalItems[t]&e.additionalItems[t])!==0)return!0;return!1}equals(e){if(this.items!==e.items||this.additionalItems.length!==e.additionalItems.length)return!1;for(let t=0;t<this.additionalItems.length;t++)if(this.additionalItems[t]!==e.additionalItems[t])return!1;return!0}},b1={getKey(e){return e}},x1=class{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}reverseLookup(e){return[...this.items].find(([t,n])=>n===e)?.[0]}reverseLookupSet(e){let t=[];for(let[n]of this.items)e.has(n,this)&&t.push(n);return t}keys(){return this.items.keys()}},S1;(function(e){e[e.Text=0]=`Text`,e[e.Bracket=1]=`Bracket`,e[e.Pair=2]=`Pair`,e[e.UnexpectedClosingBracket=3]=`UnexpectedClosingBracket`,e[e.List=4]=`List`})(S1||={});var C1=class{get length(){return this._length}constructor(e){this._length=e}},w1=class e extends C1{static create(t,n,r){let i=t.length;return n&&(i=c1(i,n.length)),r&&(i=c1(i,r.length)),new e(i,t,n,r,n?n.missingOpeningBracketIds:y1.getEmpty())}get kind(){return S1.Pair}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw Error(`Invalid child index`)}get children(){let e=[];return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}constructor(e,t,n,r,i){super(e),this.openingBracket=t,this.child=n,this.closingBracket=r,this.missingOpeningBracketIds=i}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}flattenLists(){return e.create(this.openingBracket.flattenLists(),this.child&&this.child.flattenLists(),this.closingBracket&&this.closingBracket.flattenLists())}deepClone(){return new e(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(c1(e,this.openingBracket.length),t):2**53-1}},T1=class e extends C1{static create23(e,t,n,r=!1){let i=e.length,a=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw Error(`Invalid list heights`);if(i=c1(i,t.length),a=a.merge(t.missingOpeningBracketIds),n){if(e.listHeight!==n.listHeight)throw Error(`Invalid list heights`);i=c1(i,n.length),a=a.merge(n.missingOpeningBracketIds)}return r?new D1(i,e.listHeight+1,e,t,n,a):new E1(i,e.listHeight+1,e,t,n,a)}static create(e,t=!1){if(e.length===0)return this.getEmpty();{let n=e[0].length,r=e[0].missingOpeningBracketIds;for(let t=1;t<e.length;t++)n=c1(n,e[t].length),r=r.merge(e[t].missingOpeningBracketIds);return t?new k1(n,e[0].listHeight+1,e,r):new O1(n,e[0].listHeight+1,e,r)}}static getEmpty(){return new k1(0,0,[],y1.getEmpty())}get kind(){return S1.List}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}constructor(e,t,n){super(e),this.listHeight=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();let e=this.childrenLength;if(e===0)return;let t=this.getChild(e-1),n=t.kind===S1.List?t.toMutable():t;return t!==n&&this.setChild(e-1,n),n}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;let e=this.getChild(0),t=e.kind===S1.List?e.toMutable():e;return e!==t&&this.setChild(0,t),t}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds)||this.childrenLength===0)return!1;let t=this;for(;t.kind===S1.List;){let e=t.childrenLength;if(e===0)throw new y;t=t.getChild(e-1)}return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();let e=this.childrenLength,t=this.getChild(0).length,n=this.getChild(0).missingOpeningBracketIds;for(let r=1;r<e;r++){let e=this.getChild(r);t=c1(t,e.length),n=n.merge(e.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}flattenLists(){let t=[];for(let e of this.children){let n=e.flattenLists();n.kind===S1.List?t.push(...n.children):t.push(n)}return e.create(t)}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let n=2**53-1,r=e;for(let e=0;e<this.childrenLength;e++){let i=this.getChild(e);i&&(n=Math.min(n,i.computeMinIndentation(r,t)),r=c1(r,i.length))}return this.cachedMinIndentation=n,n}},E1=class e extends T1{get childrenLength(){return this._item3===null?2:3}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw Error(`Invalid child index`)}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw Error(`Invalid child index`)}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}constructor(e,t,n,r,i,a){super(e,t,a),this._item1=n,this._item2=r,this._item3=i}deepClone(){return new e(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw Error(`Cannot append to a full (2,3) tree node`);this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw Error(`Cannot remove from a non-full (2,3) tree node`);this.throwIfImmutable();let e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw Error(`Cannot prepend to a full (2,3) tree node`);this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw Error(`Cannot remove from a non-full (2,3) tree node`);this.throwIfImmutable();let e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}},D1=class extends E1{toMutable(){return new E1(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw Error(`this instance is immutable`)}},O1=class e extends T1{get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}constructor(e,t,n,r){super(e,t,r),this._children=n}deepClone(){let t=Array(this._children.length);for(let e=0;e<this._children.length;e++)t[e]=this._children[e].deepClone();return new e(this.length,this.listHeight,t,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();let e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();let e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}},k1=class extends O1{toMutable(){return new O1(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw Error(`this instance is immutable`)}},A1=[],j1=class extends C1{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return A1}flattenLists(){return this}deepClone(){return this}},M1=class extends j1{get kind(){return S1.Text}get missingOpeningBracketIds(){return y1.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){let n=a1(e),r=(n.columnCount===0?n.lineCount:n.lineCount+1)+1,i=o1(c1(e,this.length))+1,a=2**53-1;for(let e=r;e<=i;e++){let n=t.getLineFirstNonWhitespaceColumn(e),r=t.getLineContent(e);if(n===0)continue;let i=eZ.visibleColumnFromColumn(r,n,t.getOptions().tabSize);a=Math.min(a,i)}return a}},N1=class e extends j1{static create(t,n,r){return new e(t,n,r)}get kind(){return S1.Bracket}get missingOpeningBracketIds(){return y1.getEmpty()}constructor(e,t,n){super(e),this.bracketInfo=t,this.bracketIds=n}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return 2**53-1}},P1=class extends j1{get kind(){return S1.UnexpectedClosingBracket}constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return 2**53-1}},F1=class e{static fromModelContentChanges(t){return t.map(t=>{let n=X.lift(t.range);return new e(h1(n.getStartPosition()),h1(n.getEndPosition()),_1(t.text))}).reverse()}constructor(e,t,n){this.startOffset=e,this.endOffset=t,this.newLength=n}toString(){return`[${a1(this.startOffset)}...${a1(this.endOffset)}) -> ${a1(this.newLength)}`}},I1=class{constructor(e){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(e=>L1.from(e))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);let t=this.edits[this.nextEditIdx],n=t?this.translateOldToCur(t.offsetObj):null;return n===null?null:d1(e,n)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?i1(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):i1(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){let t=a1(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?i1(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):i1(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){let t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(p1(n,e)){this.nextEditIdx++;let e=a1(n),r=a1(this.translateOldToCur(t.endOffsetBeforeObj)),i=e.lineCount-r.lineCount;this.deltaOldToNewLineCount+=i,this.deltaOldToNewColumnCount=(this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0)+(e.columnCount-r.columnCount),this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}},L1=class e{static from(t){return new e(t.startOffset,t.endOffset,t.newLength)}constructor(e,t,n){this.endOffsetBeforeObj=a1(t),this.endOffsetAfterObj=a1(c1(e,n)),this.offsetObj=a1(e)}},R1;(function(e){e[e.Text=0]=`Text`,e[e.OpeningBracket=1]=`OpeningBracket`,e[e.ClosingBracket=2]=`ClosingBracket`})(R1||={});var z1=class{constructor(e,t,n,r,i){this.length=e,this.kind=t,this.bracketId=n,this.bracketIds=r,this.astNode=i}},B1=class{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new V1(this.textModel,this.bracketTokens),this._offset=0,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return i1(this.textBufferLineCount-1,this.textBufferLastLineLength)}getText(){return this.textModel.getValue()}skip(e){this.didPeek=!1,this._offset=c1(this._offset,e);let t=a1(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=c1(this._offset,e.length)),e}peek(){return this.didPeek||=(this.peeked=this.reader.read(),!0),this.peeked}},V1=class{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.line!==null&&(this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){let e=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=s1(e.length),e}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));let e=this.lineIdx,t=this.lineCharOffset,n=0;for(;;){let r=this.lineTokens,i=r.getCount(),a=null;if(this.lineTokenOffset<i){let o=r.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<i&&o===r.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;let s=LK.getTokenType(o)===FK.Other,c=LK.containsBalancedBrackets(o),l=r.getEndOffset(this.lineTokenOffset);if(c&&s&&this.lineCharOffset<l){let e=r.getLanguageId(this.lineTokenOffset),t=this.line.substring(this.lineCharOffset,l),n=this.bracketTokens.getSingleLanguageBracketTokens(e),i=n.regExpGlobal;if(i){i.lastIndex=0;let e=i.exec(t);e&&(a=n.getToken(e[0]),a&&(this.lineCharOffset+=e.index))}}if(n+=l-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=s1(a.length),a;else this.lineTokenOffset++,this.lineCharOffset=l}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3))break;if(n>1500)break}let r=e1(e,t,this.lineIdx,this.lineCharOffset);return new z1(r,R1.Text,-1,y1.getEmpty(),new M1(r))}},H1=class{constructor(e,t){this.text=e,this._offset=0,this.idx=0;let n=t.getRegExpStr(),r=n?RegExp(n+`|
`,`gi`):null,i=[],a,o=0,s=0,c=0,l=0,u=[];for(let e=0;e<60;e++)u.push(new z1(i1(0,e),R1.Text,-1,y1.getEmpty(),new M1(i1(0,e))));let d=[];for(let e=0;e<60;e++)d.push(new z1(i1(1,e),R1.Text,-1,y1.getEmpty(),new M1(i1(1,e))));if(r)for(r.lastIndex=0;(a=r.exec(e))!==null;){let e=a.index,n=a[0];if(n===`
`)o++,s=e+1;else{if(c!==e){let t;if(l===o){let n=e-c;if(n<u.length)t=u[n];else{let e=i1(0,n);t=new z1(e,R1.Text,-1,y1.getEmpty(),new M1(e))}}else{let n=o-l,r=e-s;if(n===1&&r<d.length)t=d[r];else{let e=i1(n,r);t=new z1(e,R1.Text,-1,y1.getEmpty(),new M1(e))}}i.push(t)}i.push(t.getToken(n)),c=e+n.length,l=o}}let f=e.length;if(c!==f){let e=l===o?i1(0,f-c):i1(o-l,f-s);i.push(new z1(e,R1.Text,-1,y1.getEmpty(),new M1(e)))}this.length=i1(o,f-s),this.tokens=i}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new ce}getText(){return this.text}},U1=class e{static createFromLanguage(t,n){function r(e){return n.getKey(`${e.languageId}:::${e.bracketText}`)}let i=new Map;for(let e of t.bracketsNew.openingBrackets){let t=i1(0,e.bracketText.length),n=r(e),a=y1.getEmpty().add(n,b1);i.set(e.bracketText,new z1(t,R1.OpeningBracket,n,a,N1.create(t,e,a)))}for(let e of t.bracketsNew.closingBrackets){let t=i1(0,e.bracketText.length),n=y1.getEmpty(),a=e.getOpeningBrackets();for(let e of a)n=n.add(r(e),b1);i.set(e.bracketText,new z1(t,R1.ClosingBracket,r(a[0]),n,N1.create(t,e,n)))}return new e(i)}constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}getRegExpStr(){if(this.isEmpty)return null;{let e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(e=>W1(e)).join(`|`)}}get regExpGlobal(){if(!this.hasRegExp){let e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,`gi`):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(let[t,n]of this.map)if(n.kind===R1.ClosingBracket&&n.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}};function W1(e){let t=Na(e);return/^[\w ]+/.test(e)&&(t=`\\b${t}`),/[\w ]+$/.test(e)&&(t=`${t}\\b`),t}var G1=class{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=U1.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}getToken(e,t){return this.getSingleLanguageBracketTokens(t).getToken(e)}};function K1(e){if(e.length===0)return null;if(e.length===1)return e[0];let t=0;function n(){if(t>=e.length)return null;let n=t,r=e[n].listHeight;for(t++;t<e.length&&e[t].listHeight===r;)t++;return t-n>=2?q1(n===0&&t===e.length?e:e.slice(n,t),!1):e[n]}let r=n(),i=n();if(!i)return r;for(let e=n();e;e=n())J1(r,i)<=J1(i,e)?(r=Y1(r,i),i=e):i=Y1(i,e);return Y1(r,i)}function q1(e,t=!1){if(e.length===0)return null;if(e.length===1)return e[0];let n=e.length;for(;n>3;){let r=n>>1;for(let i=0;i<r;i++){let r=i<<1;e[i]=T1.create23(e[r],e[r+1],r+3===n?e[r+2]:null,t)}n=r}return T1.create23(e[0],e[1],n>=3?e[2]:null,t)}function J1(e,t){return Math.abs(e.listHeight-t.listHeight)}function Y1(e,t){return e.listHeight===t.listHeight?T1.create23(e,t,null,!1):e.listHeight>t.listHeight?X1(e,t):Z1(t,e)}function X1(e,t){e=e.toMutable();let n=e,r=[],i;for(;;){if(t.listHeight===n.listHeight){i=t;break}if(n.kind!==S1.List)throw Error(`unexpected`);r.push(n),n=n.makeLastElementMutable()}for(let e=r.length-1;e>=0;e--){let t=r[e];i?t.childrenLength>=3?i=T1.create23(t.unappendChild(),i,null,!1):(t.appendChildOfSameHeight(i),i=void 0):t.handleChildrenChanged()}return i?T1.create23(e,i,null,!1):e}function Z1(e,t){e=e.toMutable();let n=e,r=[];for(;t.listHeight!==n.listHeight;){if(n.kind!==S1.List)throw Error(`unexpected`);r.push(n),n=n.makeFirstElementMutable()}let i=t;for(let e=r.length-1;e>=0;e--){let t=r[e];i?t.childrenLength>=3?i=T1.create23(i,t.unprependChild(),null,!1):(t.prependChildOfSameHeight(i),i=void 0):t.handleChildrenChanged()}return i?T1.create23(i,e,null,!1):e}var Q1=class{constructor(e){this.lastOffset=0,this.nextNodes=[e],this.offsets=[0],this.idxs=[]}readLongestNodeAt(e,t){if(f1(e,this.lastOffset))throw Error(`Invalid offset`);for(this.lastOffset=e;;){let n=e0(this.nextNodes);if(!n)return;let r=e0(this.offsets);if(f1(e,r))return;if(f1(r,e))if(c1(r,n.length)<=e)this.nextNodeAfterCurrent();else{let e=$1(n);e===-1?this.nextNodeAfterCurrent():(this.nextNodes.push(n.getChild(e)),this.offsets.push(r),this.idxs.push(e))}else if(t(n))return this.nextNodeAfterCurrent(),n;else{let e=$1(n);if(e===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(n.getChild(e)),this.offsets.push(r),this.idxs.push(e)}}}nextNodeAfterCurrent(){for(;;){let e=e0(this.offsets),t=e0(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;let n=e0(this.nextNodes),r=$1(n,this.idxs[this.idxs.length-1]);if(r!==-1){this.nextNodes.push(n.getChild(r)),this.offsets.push(c1(e,t.length)),this.idxs[this.idxs.length-1]=r;break}else this.idxs.pop()}}};function $1(e,t=-1){for(;;){if(t++,t>=e.childrenLength)return-1;if(e.getChild(t))return t}}function e0(e){return e.length>0?e[e.length-1]:void 0}function t0(e,t,n,r){return new n0(e,t,n,r).parseDocument()}var n0=class{get nodesConstructed(){return this._itemsConstructed}get nodesReused(){return this._itemsFromCache}constructor(e,t,n,r){if(this.tokenizer=e,this.createImmutableLists=r,this._itemsConstructed=0,this._itemsFromCache=0,n&&r)throw Error(`Not supported`);this.oldNodeReader=n?new Q1(n):void 0,this.positionMapper=new I1(t)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(y1.getEmpty(),0);return e||=T1.getEmpty(),e}parseList(e,t){let n=[];for(;;){let r=this.tryReadChildFromCache(e);if(!r){let n=this.tokenizer.peek();if(!n||n.kind===R1.ClosingBracket&&n.bracketIds.intersects(e))break;r=this.parseChild(e,t+1)}r.kind===S1.List&&r.childrenLength===0||n.push(r)}return this.oldNodeReader?K1(n):q1(n,this.createImmutableLists)}tryReadChildFromCache(e){if(this.oldNodeReader){let t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(t===null||!n1(t)){let n=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),n=>t!==null&&!f1(n.length,t)?!1:n.canBeReused(e));if(n)return this._itemsFromCache++,this.tokenizer.skip(n.length),n}}}parseChild(e,t){this._itemsConstructed++;let n=this.tokenizer.read();switch(n.kind){case R1.ClosingBracket:return new P1(n.bracketIds,n.length);case R1.Text:return n.astNode;case R1.OpeningBracket:{if(t>300)return new M1(n.length);let r=e.merge(n.bracketIds),i=this.parseList(r,t+1),a=this.tokenizer.peek();return a&&a.kind===R1.ClosingBracket&&(a.bracketId===n.bracketId||a.bracketIds.intersects(n.bracketIds))?(this.tokenizer.read(),w1.create(n.astNode,i,a.astNode)):w1.create(n.astNode,i,null)}default:throw Error(`unexpected`)}}},r0;(function(e){e[e.InProgress=1]=`InProgress`,e[e.Completed=2]=`Completed`})(r0||={});function i0(e,t){if(e.length===0)return t;if(t.length===0)return e;let n=new $t(o0(e)),r=o0(t);r.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let i=n.dequeue();function a(e){if(e===void 0){let e=n.takeWhile(e=>!0)||[];return i&&e.unshift(i),e}let t=[];for(;i&&!n1(e);){let[r,a]=i.splitAt(e);t.push(r),e=d1(r.lengthAfter,e),i=a??n.dequeue()}return n1(e)||t.push(new a0(!1,e,e)),t}let o=[];function s(e,t,n){if(o.length>0&&u1(o[o.length-1].endOffset,e)){let e=o[o.length-1];o[o.length-1]=new F1(e.startOffset,t,c1(e.newLength,n))}else o.push({startOffset:e,endOffset:t,newLength:n})}let c=0;for(let e of r){let t=a(e.lengthBefore);if(e.modified){let n=l1(t,e=>e.lengthBefore),r=c1(c,n);s(c,r,e.lengthAfter),c=r}else for(let e of t){let t=c;c=c1(c,e.lengthBefore),e.modified&&s(t,c,e.lengthAfter)}}return o}var a0=class e{constructor(e,t,n){this.modified=e,this.lengthBefore=t,this.lengthAfter=n}splitAt(t){let n=d1(t,this.lengthAfter);return u1(n,0)?[this,void 0]:this.modified?[new e(this.modified,this.lengthBefore,t),new e(this.modified,0,n)]:[new e(this.modified,t,t),new e(this.modified,n,n)]}toString(){return`${this.modified?`M`:`U`}:${a1(this.lengthBefore)} -> ${a1(this.lengthAfter)}`}};function o0(e){let t=[],n=0;for(let r of e){let e=d1(n,r.startOffset);n1(e)||t.push(new a0(!1,e,e));let i=d1(r.startOffset,r.endOffset);t.push(new a0(!0,i,r.newLength)),n=r.endOffset}return t}var s0=class extends w{didLanguageChange(e){return this.brackets.didLanguageChange(e)}constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new E,this.denseKeyProvider=new x1,this.brackets=new G1(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this.queuedTextEditsForInitialAstWithoutTokens=[],this.queuedTextEdits=[],e.tokenization.hasTokens)e.tokenization.backgroundTokenizationState===r0.Completed?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{let e=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId());this.initialAstWithoutTokens=t0(new H1(this.textModel.getValue(),e),[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===r0.Completed){let e=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){let t=e.map(e=>new F1(i1(e.fromLineNumber-1,0),i1(e.toLineNumber,0),i1(e.toLineNumber-e.fromLineNumber+1,0)));this.handleEdits(t,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){let t=F1.fromModelContentChanges(e.changes);this.handleEdits(t,!1)}handleEdits(e,t){this.queuedTextEdits=i0(this.queuedTextEdits,e),this.initialAstWithoutTokens&&!t&&(this.queuedTextEditsForInitialAstWithoutTokens=i0(this.queuedTextEditsForInitialAstWithoutTokens,e))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(e,t,n){let r=t;return t0(new B1(this.textModel,this.brackets),e,r,n)}getBracketsInRange(e,t){this.flushQueue();let n=i1(e.startLineNumber-1,e.startColumn-1),r=i1(e.endLineNumber-1,e.endColumn-1);return new en(e=>{let i=this.initialAstWithoutTokens||this.astWithTokens;u0(i,0,i.length,n,r,e,0,0,new Map,t)})}getBracketPairsInRange(e,t){this.flushQueue();let n=h1(e.getStartPosition()),r=h1(e.getEndPosition());return new en(e=>{let i=this.initialAstWithoutTokens||this.astWithTokens,a=new d0(e,t,this.textModel);f0(i,0,i.length,n,r,a,0,new Map)})}getFirstBracketAfter(e){this.flushQueue();let t=this.initialAstWithoutTokens||this.astWithTokens;return l0(t,0,t.length,h1(e))}getFirstBracketBefore(e){this.flushQueue();let t=this.initialAstWithoutTokens||this.astWithTokens;return c0(t,0,t.length,h1(e))}};function c0(e,t,n,r){if(e.kind===S1.List||e.kind===S1.Pair){let i=[];for(let r of e.children)n=c1(t,r.length),i.push({nodeOffsetStart:t,nodeOffsetEnd:n}),t=n;for(let t=i.length-1;t>=0;t--){let{nodeOffsetStart:n,nodeOffsetEnd:a}=i[t];if(f1(n,r)){let i=c0(e.children[t],n,a,r);if(i)return i}}return null}else if(e.kind===S1.UnexpectedClosingBracket)return null;else if(e.kind===S1.Bracket){let r=g1(t,n);return{bracketInfo:e.bracketInfo,range:r}}return null}function l0(e,t,n,r){if(e.kind===S1.List||e.kind===S1.Pair){for(let i of e.children){if(n=c1(t,i.length),f1(r,n)){let e=l0(i,t,n,r);if(e)return e}t=n}return null}else if(e.kind===S1.UnexpectedClosingBracket)return null;else if(e.kind===S1.Bracket){let r=g1(t,n);return{bracketInfo:e.bracketInfo,range:r}}return null}function u0(e,t,n,r,i,a,o,s,c,l,u=!1){if(o>200)return!0;whileLoop:for(;;)switch(e.kind){case S1.List:{let s=e.childrenLength;for(let u=0;u<s;u++){let s=e.getChild(u);if(s){if(n=c1(t,s.length),p1(t,i)&&m1(n,r)){if(m1(n,i)){e=s;continue whileLoop}if(!u0(s,t,n,r,i,a,o,0,c,l))return!1}t=n}}return!0}case S1.Pair:{let u=!l||!e.closingBracket||e.closingBracket.bracketInfo.closesColorized(e.openingBracket.bracketInfo),d=0;if(c){let t=c.get(e.openingBracket.text);t===void 0&&(t=0),d=t,u&&(t++,c.set(e.openingBracket.text,t))}let f=e.childrenLength;for(let p=0;p<f;p++){let f=e.getChild(p);if(f){if(n=c1(t,f.length),p1(t,i)&&m1(n,r)){if(m1(n,i)&&f.kind!==S1.Bracket){e=f,u?(o++,s=d+1):s=d;continue whileLoop}if((u||f.kind!==S1.Bracket||!e.closingBracket)&&!u0(f,t,n,r,i,a,u?o+1:o,u?d+1:d,c,l,!e.closingBracket))return!1}t=n}}return c?.set(e.openingBracket.text,d),!0}case S1.UnexpectedClosingBracket:return a(new Z$(g1(t,n),o-1,0,!0));case S1.Bracket:return a(new Z$(g1(t,n),o-1,s-1,u));case S1.Text:return!0}}var d0=class{constructor(e,t,n){this.push=e,this.includeMinIndentation=t,this.textModel=n}};function f0(e,t,n,r,i,a,o,s){if(o>200)return!0;let c=!0;if(e.kind===S1.Pair){let l=0;if(s){let t=s.get(e.openingBracket.text);t===void 0&&(t=0),l=t,t++,s.set(e.openingBracket.text,t)}let u=c1(t,e.openingBracket.length),d=-1;if(a.includeMinIndentation&&(d=e.computeMinIndentation(t,a.textModel)),c=a.push(new $$(g1(t,n),g1(t,u),e.closingBracket?g1(c1(u,e.child?.length||0),n):void 0,o,l,e,d)),t=u,c&&e.child){let l=e.child;if(n=c1(t,l.length),p1(t,i)&&m1(n,r)&&(c=f0(l,t,n,r,i,a,o+1,s),!c))return!1}s?.set(e.openingBracket.text,l)}else{let n=t;for(let t of e.children){let e=n;if(n=c1(n,t.length),p1(e,i)&&p1(r,n)&&(c=f0(t,e,n,r,i,a,o,s),!c))return!1}}return c}var p0=class extends w{get canBuildAST(){return this.textModel.getValueLength()<=5e4*100}constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new Ln),this.onDidChangeEmitter=new E,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1}handleLanguageConfigurationServiceChange(e){(!e.languageId||this.bracketPairsTree.value?.object.didLanguageChange(e.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){this.bracketPairsTree.value?.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){this.bracketPairsTree.value?.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){this.bracketPairsTree.value?.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){let e=new C;this.bracketPairsTree.value=m0(e.add(new s0(this.textModel,e=>this.languageConfigurationService.getLanguageConfiguration(e))),e),e.add(this.bracketPairsTree.value.object.onDidChange(e=>this.onDidChangeEmitter.fire(e))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(e,!1)||en.empty}getBracketPairsInRangeWithMinIndentation(e){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(e,!0)||en.empty}getBracketsInRange(e,t=!1){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketsInRange(e,t)||en.empty}findMatchingBracketUp(e,t,n){let r=this.textModel.validatePosition(t),i=this.textModel.getLanguageIdAtPosition(r.lineNumber,r.column);if(this.canBuildAST){let n=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew.getClosingBracketInfo(e);if(!n)return null;let r=this.getBracketPairsInRange(X.fromPositions(t,t)).findLast(e=>n.closes(e.openingBracketInfo));return r?r.openingBracketRange:null}else{let t=e.toLowerCase(),a=this.languageConfigurationService.getLanguageConfiguration(i).brackets;if(!a)return null;let o=a.textIsBracket[t];return o?_0(this._findMatchingBracketUp(o,r,h0(n))):null}}matchBracket(e,t){if(this.canBuildAST){let t=this.getBracketPairsInRange(X.fromPositions(e,e)).filter(t=>t.closingBracketRange!==void 0&&(t.openingBracketRange.containsPosition(e)||t.closingBracketRange.containsPosition(e))).findLastMaxBy(qt(t=>t.openingBracketRange.containsPosition(e)?t.openingBracketRange:t.closingBracketRange,X.compareRangesUsingStarts));return t?[t.openingBracketRange,t.closingBracketRange]:null}else{let n=h0(t);return this._matchBracket(this.textModel.validatePosition(e),n)}}_establishBracketSearchOffsets(e,t,n,r){let i=t.getCount(),a=t.getLanguageId(r),o=Math.max(0,e.column-1-n.maxBracketLength);for(let e=r-1;e>=0;e--){let n=t.getEndOffset(e);if(n<=o)break;if(iZ(t.getStandardTokenType(e))||t.getLanguageId(e)!==a){o=n;break}}let s=Math.min(t.getLineContent().length,e.column-1+n.maxBracketLength);for(let e=r+1;e<i;e++){let n=t.getStartOffset(e);if(n>=s)break;if(iZ(t.getStandardTokenType(e))||t.getLanguageId(e)!==a){s=n;break}}return{searchStartOffset:o,searchEndOffset:s}}_matchBracket(e,t){let n=e.lineNumber,r=this.textModel.tokenization.getLineTokens(n),i=this.textModel.getLineContent(n),a=r.findTokenIndexAtOffset(e.column-1);if(a<0)return null;let o=this.languageConfigurationService.getLanguageConfiguration(r.getLanguageId(a)).brackets;if(o&&!iZ(r.getStandardTokenType(a))){let{searchStartOffset:s,searchEndOffset:c}=this._establishBracketSearchOffsets(e,r,o,a),l=null;for(;;){let r=bZ.findNextBracketInRange(o.forwardRegex,n,i,s,c);if(!r)break;if(r.startColumn<=e.column&&e.column<=r.endColumn){let e=i.substring(r.startColumn-1,r.endColumn-1).toLowerCase(),n=this._matchFoundBracket(r,o.textIsBracket[e],o.textIsOpenBracket[e],t);if(n){if(n instanceof g0)return null;l=n}}s=r.endColumn-1}if(l)return l}if(a>0&&r.getStartOffset(a)===e.column-1){let o=a-1,s=this.languageConfigurationService.getLanguageConfiguration(r.getLanguageId(o)).brackets;if(s&&!iZ(r.getStandardTokenType(o))){let{searchStartOffset:a,searchEndOffset:c}=this._establishBracketSearchOffsets(e,r,s,o),l=bZ.findPrevBracketInRange(s.reversedRegex,n,i,a,c);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn){let e=i.substring(l.startColumn-1,l.endColumn-1).toLowerCase(),n=this._matchFoundBracket(l,s.textIsBracket[e],s.textIsOpenBracket[e],t);if(n)return n instanceof g0?null:n}}}return null}_matchFoundBracket(e,t,n,r){if(!t)return null;let i=n?this._findMatchingBracketDown(t,e.getEndPosition(),r):this._findMatchingBracketUp(t,e.getStartPosition(),r);return i?i instanceof g0?i:[e,i]:null}_findMatchingBracketUp(e,t,n){let r=e.languageId,i=e.reversedRegex,a=-1,o=0,s=(t,r,s,c)=>{for(;;){if(n&&++o%100==0&&!n())return g0.INSTANCE;let l=bZ.findPrevBracketInRange(i,t,r,s,c);if(!l)break;let u=r.substring(l.startColumn-1,l.endColumn-1).toLowerCase();if(e.isOpen(u)?a++:e.isClose(u)&&a--,a===0)return l;c=l.startColumn-1}return null};for(let e=t.lineNumber;e>=1;e--){let n=this.textModel.tokenization.getLineTokens(e),i=n.getCount(),a=this.textModel.getLineContent(e),o=i-1,c=a.length,l=a.length;e===t.lineNumber&&(o=n.findTokenIndexAtOffset(t.column-1),c=t.column-1,l=t.column-1);let u=!0;for(;o>=0;o--){let t=n.getLanguageId(o)===r&&!iZ(n.getStandardTokenType(o));if(t)u?c=n.getStartOffset(o):(c=n.getStartOffset(o),l=n.getEndOffset(o));else if(u&&c!==l){let t=s(e,a,c,l);if(t)return t}u=t}if(u&&c!==l){let t=s(e,a,c,l);if(t)return t}}return null}_findMatchingBracketDown(e,t,n){let r=e.languageId,i=e.forwardRegex,a=1,o=0,s=(t,r,s,c)=>{for(;;){if(n&&++o%100==0&&!n())return g0.INSTANCE;let l=bZ.findNextBracketInRange(i,t,r,s,c);if(!l)break;let u=r.substring(l.startColumn-1,l.endColumn-1).toLowerCase();if(e.isOpen(u)?a++:e.isClose(u)&&a--,a===0)return l;s=l.endColumn-1}return null},c=this.textModel.getLineCount();for(let e=t.lineNumber;e<=c;e++){let n=this.textModel.tokenization.getLineTokens(e),i=n.getCount(),a=this.textModel.getLineContent(e),o=0,c=0,l=0;e===t.lineNumber&&(o=n.findTokenIndexAtOffset(t.column-1),c=t.column-1,l=t.column-1);let u=!0;for(;o<i;o++){let t=n.getLanguageId(o)===r&&!iZ(n.getStandardTokenType(o));if(t)u||(c=n.getStartOffset(o)),l=n.getEndOffset(o);else if(u&&c!==l){let t=s(e,a,c,l);if(t)return t}u=t}if(u&&c!==l){let t=s(e,a,c,l);if(t)return t}}return null}findPrevBracket(e){let t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketBefore(t)||null;let n=null,r=null,i=null;for(let e=t.lineNumber;e>=1;e--){let a=this.textModel.tokenization.getLineTokens(e),o=a.getCount(),s=this.textModel.getLineContent(e),c=o-1,l=s.length,u=s.length;if(e===t.lineNumber){c=a.findTokenIndexAtOffset(t.column-1),l=t.column-1,u=t.column-1;let e=a.getLanguageId(c);n!==e&&(n=e,r=this.languageConfigurationService.getLanguageConfiguration(n).brackets,i=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew)}let d=!0;for(;c>=0;c--){let t=a.getLanguageId(c);if(n!==t){if(r&&i&&d&&l!==u){let t=bZ.findPrevBracketInRange(r.reversedRegex,e,s,l,u);if(t)return this._toFoundBracket(i,t);d=!1}n=t,r=this.languageConfigurationService.getLanguageConfiguration(n).brackets,i=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew}let o=!!r&&!iZ(a.getStandardTokenType(c));if(o)d?l=a.getStartOffset(c):(l=a.getStartOffset(c),u=a.getEndOffset(c));else if(i&&r&&d&&l!==u){let t=bZ.findPrevBracketInRange(r.reversedRegex,e,s,l,u);if(t)return this._toFoundBracket(i,t)}d=o}if(i&&r&&d&&l!==u){let t=bZ.findPrevBracketInRange(r.reversedRegex,e,s,l,u);if(t)return this._toFoundBracket(i,t)}}return null}findNextBracket(e){let t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketAfter(t)||null;let n=this.textModel.getLineCount(),r=null,i=null,a=null;for(let e=t.lineNumber;e<=n;e++){let n=this.textModel.tokenization.getLineTokens(e),o=n.getCount(),s=this.textModel.getLineContent(e),c=0,l=0,u=0;if(e===t.lineNumber){c=n.findTokenIndexAtOffset(t.column-1),l=t.column-1,u=t.column-1;let e=n.getLanguageId(c);r!==e&&(r=e,i=this.languageConfigurationService.getLanguageConfiguration(r).brackets,a=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew)}let d=!0;for(;c<o;c++){let t=n.getLanguageId(c);if(r!==t){if(a&&i&&d&&l!==u){let t=bZ.findNextBracketInRange(i.forwardRegex,e,s,l,u);if(t)return this._toFoundBracket(a,t);d=!1}r=t,i=this.languageConfigurationService.getLanguageConfiguration(r).brackets,a=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew}let o=!!i&&!iZ(n.getStandardTokenType(c));if(o)d||(l=n.getStartOffset(c)),u=n.getEndOffset(c);else if(a&&i&&d&&l!==u){let t=bZ.findNextBracketInRange(i.forwardRegex,e,s,l,u);if(t)return this._toFoundBracket(a,t)}d=o}if(a&&i&&d&&l!==u){let t=bZ.findNextBracketInRange(i.forwardRegex,e,s,l,u);if(t)return this._toFoundBracket(a,t)}}return null}findEnclosingBrackets(e,t){let n=this.textModel.validatePosition(e);if(this.canBuildAST){let e=X.fromPositions(n),t=this.getBracketPairsInRange(X.fromPositions(n,n)).findLast(t=>t.closingBracketRange!==void 0&&t.range.strictContainsRange(e));return t?[t.openingBracketRange,t.closingBracketRange]:null}let r=h0(t),i=this.textModel.getLineCount(),a=new Map,o=[],s=(e,t)=>{if(!a.has(e)){let n=[];for(let e=0,r=t?t.brackets.length:0;e<r;e++)n[e]=0;a.set(e,n)}o=a.get(e)},c=0,l=(e,t,n,i,a)=>{for(;;){if(r&&++c%100==0&&!r())return g0.INSTANCE;let s=bZ.findNextBracketInRange(e.forwardRegex,t,n,i,a);if(!s)break;let l=n.substring(s.startColumn-1,s.endColumn-1).toLowerCase(),u=e.textIsBracket[l];if(u&&(u.isOpen(l)?o[u.index]++:u.isClose(l)&&o[u.index]--,o[u.index]===-1))return this._matchFoundBracket(s,u,!1,r);i=s.endColumn-1}return null},u=null,d=null;for(let e=n.lineNumber;e<=i;e++){let t=this.textModel.tokenization.getLineTokens(e),r=t.getCount(),i=this.textModel.getLineContent(e),a=0,o=0,c=0;if(e===n.lineNumber){a=t.findTokenIndexAtOffset(n.column-1),o=n.column-1,c=n.column-1;let e=t.getLanguageId(a);u!==e&&(u=e,d=this.languageConfigurationService.getLanguageConfiguration(u).brackets,s(u,d))}let f=!0;for(;a<r;a++){let n=t.getLanguageId(a);if(u!==n){if(d&&f&&o!==c){let t=l(d,e,i,o,c);if(t)return _0(t);f=!1}u=n,d=this.languageConfigurationService.getLanguageConfiguration(u).brackets,s(u,d)}let r=!!d&&!iZ(t.getStandardTokenType(a));if(r)f||(o=t.getStartOffset(a)),c=t.getEndOffset(a);else if(d&&f&&o!==c){let t=l(d,e,i,o,c);if(t)return _0(t)}f=r}if(d&&f&&o!==c){let t=l(d,e,i,o,c);if(t)return _0(t)}}return null}_toFoundBracket(e,t){if(!t)return null;let n=this.textModel.getValueInRange(t);n=n.toLowerCase();let r=e.getBracketInfo(n);return r?{range:t,bracketInfo:r}:null}};function m0(e,t){return{object:e,dispose:()=>t?.dispose()}}function h0(e){if(e===void 0)return()=>!0;{let t=Date.now();return()=>Date.now()-t<=e}}var g0=class e{static#e=this.INSTANCE=new e;constructor(){this._searchCanceledBrand=void 0}};function _0(e){return e instanceof g0?null:e}var v0=class extends w{constructor(e){super(),this.textModel=e,this.colorProvider=new y0,this.onDidChangeEmitter=new E,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange(e=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,n,r,i){return i||t===void 0||!this.colorizationOptions.enabled?[]:this.textModel.bracketPairs.getBracketsInRange(e,!0).map(e=>({id:`bracket${e.range.toString()}-${e.nestingLevel}`,options:{description:`BracketPairColorization`,inlineClassName:this.colorProvider.getInlineClassName(e,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:e.range})).toArray()}getAllDecorations(e,t,n){return e===void 0||!this.colorizationOptions.enabled?[]:this.getDecorationsInRange(new X(1,1,this.textModel.getLineCount(),1),e,t,n)}},y0=class{constructor(){this.unexpectedClosingBracketClassName=`unexpected-closing-bracket`}getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}};Er((e,t)=>{let n=[iQ,aQ,oQ,sQ,cQ,lQ],r=new y0;t.addRule(`.monaco-editor .${r.unexpectedClosingBracketClassName} { color: ${e.getColor(uQ)}; }`);let i=n.map(t=>e.getColor(t)).filter(e=>!!e).filter(e=>!e.isTransparent());for(let e=0;e<30;e++){let n=i[e%i.length];t.addRule(`.monaco-editor .${r.getInlineClassNameOfLevel(e)} { color: ${n}; }`)}});var b0;(function(e){e[e.Resource=0]=`Resource`,e[e.Workspace=1]=`Workspace`})(b0||={});var x0=class{constructor(e,t){this.resource=e,this.elements=t}},S0=class e{static#e=this._ID=0;constructor(){this.id=e._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}static#t=this.None=new e},C0=class e{static#e=this._ID=0;constructor(){this.id=e._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}static#t=this.None=new e};function w0(e){return e.replace(/\n/g,`\\n`).replace(/\r/g,`\\r`)}var T0=class e{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(e,t,n,r){this.oldPosition=e,this.oldText=t,this.newPosition=n,this.newText=r}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${w0(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${w0(this.oldText)}")`:`(replace@${this.oldPosition} "${w0(this.oldText)}" with "${w0(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){let r=t.length;Jp(e,r,n),n+=4;for(let i=0;i<r;i++)Kp(e,t.charCodeAt(i),n),n+=2;return n}static _readString(e,t){let n=qp(e,t);return t+=4,ZX(e,t,n)}writeSize(){return 8+e._writeStringSize(this.oldText)+e._writeStringSize(this.newText)}write(t,n){return Jp(t,this.oldPosition,n),n+=4,Jp(t,this.newPosition,n),n+=4,n=e._writeString(t,this.oldText,n),n=e._writeString(t,this.newText,n),n}static read(t,n,r){let i=qp(t,n);n+=4;let a=qp(t,n);n+=4;let o=e._readString(t,n);n+=e._writeStringSize(o);let s=e._readString(t,n);return n+=e._writeStringSize(s),r.push(new e(i,o,a,s)),n}};function E0(e,t){return e===null||e.length===0?t:new D0(e,t).compress()}var D0=class e{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let t=0,n=0,r=this._getPrev(t),i=this._getCurr(n);for(;t<this._prevLen||n<this._currLen;){if(r===null){this._acceptCurr(i),i=this._getCurr(++n);continue}if(i===null){this._acceptPrev(r),r=this._getPrev(++t);continue}if(i.oldEnd<=r.newPosition){this._acceptCurr(i),i=this._getCurr(++n);continue}if(r.newEnd<=i.oldPosition){this._acceptPrev(r),r=this._getPrev(++t);continue}if(i.oldPosition<r.newPosition){let[t,n]=e._splitCurr(i,r.newPosition-i.oldPosition);this._acceptCurr(t),i=n;continue}if(r.newPosition<i.oldPosition){let[t,n]=e._splitPrev(r,i.oldPosition-r.newPosition);this._acceptPrev(t),r=n;continue}let a,o;if(i.oldEnd===r.newEnd)a=r,o=i,r=this._getPrev(++t),i=this._getCurr(++n);else if(i.oldEnd<r.newEnd){let[t,s]=e._splitPrev(r,i.oldLength);a=t,o=i,r=s,i=this._getCurr(++n)}else{let[n,s]=e._splitCurr(i,r.newLength);a=r,o=n,r=this._getPrev(++t),i=s}this._result[this._resultLen++]=new T0(a.oldPosition,a.oldText,o.newPosition,o.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=o.newLength-o.oldLength}let a=e._merge(this._result);return e._removeNoOps(a)}_acceptCurr(t){this._result[this._resultLen++]=e._rebaseCurr(this._prevDeltaOffset,t),this._currDeltaOffset+=t.newLength-t.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(t){this._result[this._resultLen++]=e._rebasePrev(this._currDeltaOffset,t),this._prevDeltaOffset+=t.newLength-t.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new T0(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new T0(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){let n=e.newText.substr(0,t),r=e.newText.substr(t);return[new T0(e.oldPosition,e.oldText,e.newPosition,n),new T0(e.oldEnd,``,e.newPosition+t,r)]}static _splitCurr(e,t){let n=e.oldText.substr(0,t),r=e.oldText.substr(t);return[new T0(e.oldPosition,n,e.newPosition,e.newText),new T0(e.oldPosition+t,r,e.newEnd,``)]}static _merge(e){if(e.length===0)return e;let t=[],n=0,r=e[0];for(let i=1;i<e.length;i++){let a=e[i];r.oldEnd===a.oldPosition?r=new T0(r.oldPosition,r.oldText+a.oldText,r.newPosition,r.newText+a.newText):(t[n++]=r,r=a)}return t[n++]=r,t}static _removeNoOps(e){if(e.length===0)return e;let t=[],n=0;for(let r=0;r<e.length;r++){let i=e[r];i.oldText!==i.newText&&(t[n++]=i)}return t}};function O0(e){return e.toString()}var k0=class e{static create(t,n){let r=t.getAlternativeVersionId(),i=M0(t);return new e(r,r,i,i,n,n,[])}constructor(e,t,n,r,i,a,o){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=n,this.afterEOL=r,this.beforeCursorState=i,this.afterCursorState=a,this.changes=o}append(e,t,n,r,i){t.length>0&&(this.changes=E0(this.changes,t)),this.afterEOL=n,this.afterVersionId=r,this.afterCursorState=i}static _writeSelectionsSize(e){return 4+16*(e?e.length:0)}static _writeSelections(e,t,n){if(Jp(e,t?t.length:0,n),n+=4,t)for(let r of t)Jp(e,r.selectionStartLineNumber,n),n+=4,Jp(e,r.selectionStartColumn,n),n+=4,Jp(e,r.positionLineNumber,n),n+=4,Jp(e,r.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){let r=qp(e,t);t+=4;for(let i=0;i<r;i++){let r=qp(e,t);t+=4;let i=qp(e,t);t+=4;let a=qp(e,t);t+=4;let o=qp(e,t);t+=4,n.push(new sX(r,i,a,o))}return t}serialize(){let t=10+e._writeSelectionsSize(this.beforeCursorState)+e._writeSelectionsSize(this.afterCursorState)+4;for(let e of this.changes)t+=e.writeSize();let n=new Uint8Array(t),r=0;Jp(n,this.beforeVersionId,r),r+=4,Jp(n,this.afterVersionId,r),r+=4,Qp(n,this.beforeEOL,r),r+=1,Qp(n,this.afterEOL,r),r+=1,r=e._writeSelections(n,this.beforeCursorState,r),r=e._writeSelections(n,this.afterCursorState,r),Jp(n,this.changes.length,r),r+=4;for(let e of this.changes)r=e.write(n,r);return n.buffer}static deserialize(t){let n=new Uint8Array(t),r=0,i=qp(n,r);r+=4;let a=qp(n,r);r+=4;let o=Zp(n,r);r+=1;let s=Zp(n,r);r+=1;let c=[];r=e._readSelections(n,r,c);let l=[];r=e._readSelections(n,r,l);let u=qp(n,r);r+=4;let d=[];for(let e=0;e<u;e++)r=T0.read(n,r,d);return new e(i,a,o,s,c,l,d)}},A0=class{get type(){return b0.Resource}get resource(){return k.isUri(this.model)?this.model:this.model.uri}constructor(e,t,n,r){this.label=e,this.code=t,this.model=n,this._data=k0.create(n,r)}toString(){return(this._data instanceof k0?this._data:k0.deserialize(this._data)).changes.map(e=>e.toString()).join(`, `)}matchesResource(e){return(k.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof k0}append(e,t,n,r,i){this._data instanceof k0&&this._data.append(e,t,n,r,i)}close(){this._data instanceof k0&&(this._data=this._data.serialize())}open(){this._data instanceof k0||(this._data=k0.deserialize(this._data))}undo(){if(k.isUri(this.model))throw Error(`Invalid SingleModelEditStackElement`);this._data instanceof k0&&(this._data=this._data.serialize());let e=k0.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(k.isUri(this.model))throw Error(`Invalid SingleModelEditStackElement`);this._data instanceof k0&&(this._data=this._data.serialize());let e=k0.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof k0&&(this._data=this._data.serialize()),this._data.byteLength+168}},j0=class{get resources(){return this._editStackElementsArr.map(e=>e.resource)}constructor(e,t,n){this.label=e,this.code=t,this.type=b0.Workspace,this._isOpen=!0,this._editStackElementsArr=n.slice(0),this._editStackElementsMap=new Map;for(let e of this._editStackElementsArr){let t=O0(e.resource);this._editStackElementsMap.set(t,e)}this._delegate=null}setDelegate(e){this._delegate=e}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}getMissingModels(){let e=[];for(let t of this._editStackElementsArr)k.isUri(t.model)&&e.push(t.model);return e}matchesResource(e){let t=O0(e);return this._editStackElementsMap.has(t)}setModel(e){let t=O0(k.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;let t=O0(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,n,r,i){let a=O0(e.uri);this._editStackElementsMap.get(a).append(e,t,n,r,i)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(let e of this._editStackElementsArr)e.undo()}redo(){for(let e of this._editStackElementsArr)e.redo()}heapSize(e){let t=O0(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){let e=[];for(let t of this._editStackElementsArr)e.push(`${Ms(t.resource)}: ${t}`);return`{${e.join(`, `)}}`}};function M0(e){return e.getEOL()===`
`?DL.LF:DL.CRLF}function N0(e){return e?e instanceof A0||e instanceof j0:!1}var P0=class e{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){let e=this._undoRedoService.getLastElement(this._model.uri);N0(e)&&e.close()}popStackElement(){let e=this._undoRedoService.getLastElement(this._model.uri);N0(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){let n=this._undoRedoService.getLastElement(this._model.uri);if(N0(n)&&n.canAppend(this._model))return n;let r=new A0(D(860,`Typing`),`undoredo.textBufferEdit`,this._model,e);return this._undoRedoService.pushElement(r,t),r}pushEOL(e){let t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],M0(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(t,n,r,i,a=G$.unknown({name:`pushEditOperation`})){let o=this._getOrCreateEditStackElement(t,i),s=this._model.applyEdits(n,!0,a),c=e._computeCursorState(r,s),l=s.map((e,t)=>({index:t,textChange:e.textChange}));return l.sort((e,t)=>e.textChange.oldPosition===t.textChange.oldPosition?e.index-t.index:e.textChange.oldPosition-t.textChange.oldPosition),o.append(this._model,l.map(e=>e.textChange),M0(this._model),this._model.getAlternativeVersionId(),c),c}static _computeCursorState(e,t){try{return e?e(t):null}catch(e){return p(e),null}}},F0=class{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}};function I0(e,t,n,r,i){i.spacesDiff=0,i.looksLikeAlignment=!1;let a;for(a=0;a<t&&a<r&&e.charCodeAt(a)===n.charCodeAt(a);a++);let o=0,s=0;for(let n=a;n<t;n++)e.charCodeAt(n)===O.Space?o++:s++;let c=0,l=0;for(let e=a;e<r;e++)n.charCodeAt(e)===O.Space?c++:l++;if(o>0&&s>0||c>0&&l>0)return;let u=Math.abs(s-l),d=Math.abs(o-c);if(u===0){i.spacesDiff=d,d>0&&0<=c-1&&c-1<e.length&&c<n.length&&n.charCodeAt(c)!==O.Space&&e.charCodeAt(c-1)===O.Space&&e.charCodeAt(e.length-1)===O.Comma&&(i.looksLikeAlignment=!0);return}if(d%u===0){i.spacesDiff=d/u;return}}function L0(e,t,n){let r=Math.min(e.getLineCount(),1e4),i=0,a=0,o=``,s=0,c=[2,4,6,8,3,5,7],l=[0,0,0,0,0,0,0,0,0],u=new F0;for(let c=1;c<=r;c++){let r=e.getLineLength(c),d=e.getLineContent(c),f=r<=65536,p=!1,m=0,h=0,g=0;for(let t=0,n=r;t<n;t++){let n=f?d.charCodeAt(t):e.getLineCharCode(c,t);if(n===O.Tab)g++;else if(n===O.Space)h++;else{p=!0,m=t;break}}if(!p||(g>0?i++:h>1&&a++,I0(o,s,d,m,u),u.looksLikeAlignment&&!(n&&t===u.spacesDiff)))continue;let _=u.spacesDiff;_<=8&&l[_]++,o=d,s=m}let d=n;i!==a&&(d=i<a);let f=t;if(d){let e=0;c.forEach(t=>{let n=l[t];n>e&&(e=n,f=t)}),f===4&&l[4]>0&&l[2]>0&&l[2]>=l[4]*2/3&&(f=2)}return{insertSpaces:d,tabSize:f}}var R0=class{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==$)return B0(this.right);let e=this;for(;e.parent!==$&&e.parent.left!==e;)e=e.parent;return e.parent===$?$:e.parent}prev(){if(this.left!==$)return V0(this.left);let e=this;for(;e.parent!==$&&e.parent.right!==e;)e=e.parent;return e.parent===$?$:e.parent}detach(){this.parent=null,this.left=null,this.right=null}},z0;(function(e){e[e.Black=0]=`Black`,e[e.Red=1]=`Red`})(z0||={});var $=new R0(null,z0.Black);$.parent=$,$.left=$,$.right=$,$.color=z0.Black;function B0(e){for(;e.left!==$;)e=e.left;return e}function V0(e){for(;e.right!==$;)e=e.right;return e}function H0(e){return e===$?0:e.size_left+e.piece.length+H0(e.right)}function U0(e){return e===$?0:e.lf_left+e.piece.lineFeedCnt+U0(e.right)}function W0(){$.parent=$}function G0(e,t){let n=t.right;n.size_left+=t.size_left+(t.piece?t.piece.length:0),n.lf_left+=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),t.right=n.left,n.left!==$&&(n.left.parent=t),n.parent=t.parent,t.parent===$?e.root=n:t.parent.left===t?t.parent.left=n:t.parent.right=n,n.left=t,t.parent=n}function K0(e,t){let n=t.left;t.left=n.right,n.right!==$&&(n.right.parent=t),n.parent=t.parent,t.size_left-=n.size_left+(n.piece?n.piece.length:0),t.lf_left-=n.lf_left+(n.piece?n.piece.lineFeedCnt:0),t.parent===$?e.root=n:t===t.parent.right?t.parent.right=n:t.parent.left=n,n.right=t,t.parent=n}function q0(e,t){let n,r;if(t.left===$?(r=t,n=r.right):t.right===$?(r=t,n=r.left):(r=B0(t.right),n=r.right),r===e.root){e.root=n,n.color=z0.Black,t.detach(),W0(),e.root.parent=$;return}let i=r.color===z0.Red;if(r===r.parent.left?r.parent.left=n:r.parent.right=n,r===t?(n.parent=r.parent,X0(e,n)):(r.parent===t?n.parent=r:n.parent=r.parent,X0(e,n),r.left=t.left,r.right=t.right,r.parent=t.parent,r.color=t.color,t===e.root?e.root=r:t===t.parent.left?t.parent.left=r:t.parent.right=r,r.left!==$&&(r.left.parent=r),r.right!==$&&(r.right.parent=r),r.size_left=t.size_left,r.lf_left=t.lf_left,X0(e,r)),t.detach(),n.parent.left===n){let t=H0(n),r=U0(n);if(t!==n.parent.size_left||r!==n.parent.lf_left){let i=t-n.parent.size_left,a=r-n.parent.lf_left;n.parent.size_left=t,n.parent.lf_left=r,Y0(e,n.parent,i,a)}}if(X0(e,n.parent),i){W0();return}let a;for(;n!==e.root&&n.color===z0.Black;)n===n.parent.left?(a=n.parent.right,a.color===z0.Red&&(a.color=z0.Black,n.parent.color=z0.Red,G0(e,n.parent),a=n.parent.right),a.left.color===z0.Black&&a.right.color===z0.Black?(a.color=z0.Red,n=n.parent):(a.right.color===z0.Black&&(a.left.color=z0.Black,a.color=z0.Red,K0(e,a),a=n.parent.right),a.color=n.parent.color,n.parent.color=z0.Black,a.right.color=z0.Black,G0(e,n.parent),n=e.root)):(a=n.parent.left,a.color===z0.Red&&(a.color=z0.Black,n.parent.color=z0.Red,K0(e,n.parent),a=n.parent.left),a.left.color===z0.Black&&a.right.color===z0.Black?(a.color=z0.Red,n=n.parent):(a.left.color===z0.Black&&(a.right.color=z0.Black,a.color=z0.Red,G0(e,a),a=n.parent.left),a.color=n.parent.color,n.parent.color=z0.Black,a.left.color=z0.Black,K0(e,n.parent),n=e.root));n.color=z0.Black,W0()}function J0(e,t){for(X0(e,t);t!==e.root&&t.parent.color===z0.Red;)if(t.parent===t.parent.parent.left){let n=t.parent.parent.right;n.color===z0.Red?(t.parent.color=z0.Black,n.color=z0.Black,t.parent.parent.color=z0.Red,t=t.parent.parent):(t===t.parent.right&&(t=t.parent,G0(e,t)),t.parent.color=z0.Black,t.parent.parent.color=z0.Red,K0(e,t.parent.parent))}else{let n=t.parent.parent.left;n.color===z0.Red?(t.parent.color=z0.Black,n.color=z0.Black,t.parent.parent.color=z0.Red,t=t.parent.parent):(t===t.parent.left&&(t=t.parent,K0(e,t)),t.parent.color=z0.Black,t.parent.parent.color=z0.Red,G0(e,t.parent.parent))}e.root.color=z0.Black}function Y0(e,t,n,r){for(;t!==e.root&&t!==$;)t.parent.left===t&&(t.parent.size_left+=n,t.parent.lf_left+=r),t=t.parent}function X0(e,t){let n=0,r=0;if(t!==e.root){for(;t!==e.root&&t===t.parent.right;)t=t.parent;if(t!==e.root)for(t=t.parent,n=H0(t.left)-t.size_left,r=U0(t.left)-t.lf_left,t.size_left+=n,t.lf_left+=r;t!==e.root&&(n!==0||r!==0);)t.parent.left===t&&(t.parent.size_left+=n,t.parent.lf_left+=r),t=t.parent}}var Z0=65535;function Q0(e){let t;return t=e[e.length-1]<65536?new Uint16Array(e.length):new Uint32Array(e.length),t.set(e,0),t}var $0=class{constructor(e,t,n,r,i){this.lineStarts=e,this.cr=t,this.lf=n,this.crlf=r,this.isBasicASCII=i}};function e2(e,t=!0){let n=[0],r=1;for(let t=0,i=e.length;t<i;t++){let a=e.charCodeAt(t);a===O.CarriageReturn?t+1<i&&e.charCodeAt(t+1)===O.LineFeed?(n[r++]=t+2,t++):n[r++]=t+1:a===O.LineFeed&&(n[r++]=t+1)}return t?Q0(n):n}function t2(e,t){e.length=0,e[0]=0;let n=1,r=0,i=0,a=0,o=!0;for(let s=0,c=t.length;s<c;s++){let l=t.charCodeAt(s);l===O.CarriageReturn?s+1<c&&t.charCodeAt(s+1)===O.LineFeed?(a++,e[n++]=s+2,s++):(r++,e[n++]=s+1):l===O.LineFeed?(i++,e[n++]=s+1):o&&l!==O.Tab&&(l<32||l>126)&&(o=!1)}let s=new $0(Q0(e),r,i,a,o);return e.length=0,s}var n2=class{constructor(e,t,n,r,i){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=r,this.length=i}},r2=class{constructor(e,t){this.buffer=e,this.lineStarts=t}},i2=class{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==$&&e.iterate(e.root,e=>(e!==$&&this._pieces.push(e.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}},a2=class{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1,n=this._cache;for(let r=0;r<n.length;r++){let i=n[r];if(i.node.parent===null||i.nodeStartOffset>=e){n[r]=null,t=!0;continue}}if(t){let e=[];for(let t of n)t!==null&&e.push(t);this._cache=e}}},o2=class{constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new r2(``,[0])],this._lastChangeBufferPos={line:0,column:0},this.root=$,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let r=null;for(let t=0,n=e.length;t<n;t++)if(e[t].buffer.length>0){e[t].lineStarts||(e[t].lineStarts=e2(e[t].buffer));let n=new n2(t+1,{line:0,column:0},{line:e[t].lineStarts.length-1,column:e[t].buffer.length-e[t].lineStarts[e[t].lineStarts.length-1]},e[t].lineStarts.length-1,e[t].buffer.length);this._buffers.push(e[t]),r=this.rbInsertRight(r,n)}this._searchCache=new a2(1),this._lastVisitedLine={lineNumber:0,value:``},this.computeBufferMetadata()}normalizeEOL(e){let t=Z0,n=t-Math.floor(t/3),r=n*2,i=``,a=0,o=[];if(this.iterate(this.root,t=>{let s=this.getNodeContent(t),c=s.length;if(a<=n||a+c<r)return i+=s,a+=c,!0;let l=i.replace(/\r\n|\r|\n/g,e);return o.push(new r2(l,e2(l))),i=s,a=c,!0}),a>0){let t=i.replace(/\r\n|\r|\n/g,e);o.push(new r2(t,e2(t)))}this.create(o,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new i2(this,e)}equal(e){if(this.getLength()!==e.getLength()||this.getLineCount()!==e.getLineCount())return!1;let t=0;return this.iterate(this.root,n=>{if(n===$)return!0;let r=this.getNodeContent(n),i=r.length,a=e.nodeAt(t),o=e.nodeAt(t+i),s=e.getValueInRange2(a,o);return t+=i,r===s})}getOffsetAt(e,t){let n=0,r=this.root;for(;r!==$;)if(r.left!==$&&r.lf_left+1>=e)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt+1>=e){n+=r.size_left;let i=this.getAccumulatedValue(r,e-r.lf_left-2);return n+=i+t-1}else e-=r.lf_left+r.piece.lineFeedCnt,n+=r.size_left+r.piece.length,r=r.right;return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0,r=e;for(;t!==$;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){let i=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+i.index,i.index===0){let e=r-this.getOffsetAt(n+1,1);return new KK(n+1,e+1)}return new KK(n+1,i.remainder+1)}else if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===$){let t=this.getOffsetAt(n+1,1),i=r-e-t;return new KK(n+1,i+1)}else t=t.right;return new KK(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return``;let n=this.nodeAt2(e.startLineNumber,e.startColumn),r=this.nodeAt2(e.endLineNumber,e.endColumn),i=this.getValueInRange2(n,r);return t?t!==this._EOL||!this._EOLNormalized?i.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?i:i.replace(/\r\n|\r|\n/g,t):i}getValueInRange2(e,t){if(e.node===t.node){let n=e.node,r=this._buffers[n.piece.bufferIndex].buffer,i=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return r.substring(i+e.remainder,i+t.remainder)}let n=e.node,r=this._buffers[n.piece.bufferIndex].buffer,i=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start),a=r.substring(i+e.remainder,i+n.piece.length);for(n=n.next();n!==$;){let e=this._buffers[n.piece.bufferIndex].buffer,r=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){a+=e.substring(r,r+t.remainder);break}else a+=e.substr(r,n.piece.length);n=n.next()}return a}getLinesContent(){let e=[],t=0,n=``,r=!1;return this.iterate(this.root,i=>{if(i===$)return!0;let a=i.piece,o=a.length;if(o===0)return!0;let s=this._buffers[a.bufferIndex].buffer,c=this._buffers[a.bufferIndex].lineStarts,l=a.start.line,u=a.end.line,d=c[l]+a.start.column;if(r&&(s.charCodeAt(d)===O.LineFeed&&(d++,o--),e[t++]=n,n=``,r=!1,o===0))return!0;if(l===u)return!this._EOLNormalized&&s.charCodeAt(d+o-1)===O.CarriageReturn?(r=!0,n+=s.substr(d,o-1)):n+=s.substr(d,o),!0;n+=this._EOLNormalized?s.substring(d,Math.max(d,c[l+1]-this._EOLLength)):s.substring(d,c[l+1]).replace(/(\r\n|\r|\n)$/,``),e[t++]=n;for(let r=l+1;r<u;r++)n=this._EOLNormalized?s.substring(c[r],c[r+1]-this._EOLLength):s.substring(c[r],c[r+1]).replace(/(\r\n|\r|\n)$/,``),e[t++]=n;return!this._EOLNormalized&&s.charCodeAt(c[u]+a.end.column-1)===O.CarriageReturn?(r=!0,a.end.column===0?t--:n=s.substr(c[u],a.end.column-1)):n=s.substr(c[u],a.end.column),!0}),r&&(e[t++]=n,n=``),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,``),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){let t=e.node.next();if(!t)return 0;let n=this._buffers[t.piece.bufferIndex],r=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(r)}else{let t=this._buffers[e.node.piece.bufferIndex],n=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(n)}}getLineCharCode(e,t){let n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){let t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}getCharCode(e){let t=this.nodeAt(e);return this._getCharCode(t)}getNearestChunk(e){let t=this.nodeAt(e);if(t.remainder===t.node.piece.length){let e=t.node.next();if(!e||e===$)return``;let n=this._buffers[e.piece.bufferIndex],r=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start);return n.buffer.substring(r,r+e.piece.length)}else{let e=this._buffers[t.node.piece.bufferIndex],n=this.offsetInBuffer(t.node.piece.bufferIndex,t.node.piece.start),r=n+t.remainder,i=n+t.node.piece.length;return e.buffer.substring(r,i)}}findMatchesInNode(e,t,n,r,i,a,o,s,c,l,u){let d=this._buffers[e.piece.bufferIndex],f=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),p=this.offsetInBuffer(e.piece.bufferIndex,i),m=this.offsetInBuffer(e.piece.bufferIndex,a),h,g={line:0,column:0},_,v;t._wordSeparators?(_=d.buffer.substring(p,m),v=e=>e+p,t.reset(0)):(_=d.buffer,v=e=>e,t.reset(p));do if(h=t.next(_),h){if(v(h.index)>=m)return l;this.positionInBuffer(e,v(h.index)-f,g);let t=this.getLineFeedCnt(e.piece.bufferIndex,i,g),a=g.line===i.line?g.column-i.column+r:g.column+1,o=a+h[0].length;if(u[l++]=hX(new X(n+t,a,n+t,o),h,s),v(h.index)+h[0].length>=m||l>=c)return l}while(h);return l}findMatchesLineByLine(e,t,n,r){let i=[],a=0,o=new xX(t.wordSeparators,t.regex),s=this.nodeAt2(e.startLineNumber,e.startColumn);if(s===null)return[];let c=this.nodeAt2(e.endLineNumber,e.endColumn);if(c===null)return[];let l=this.positionInBuffer(s.node,s.remainder),u=this.positionInBuffer(c.node,c.remainder);if(s.node===c.node)return this.findMatchesInNode(s.node,o,e.startLineNumber,e.startColumn,l,u,t,n,r,a,i),i;let d=e.startLineNumber,f=s.node;for(;f!==c.node;){let c=this.getLineFeedCnt(f.piece.bufferIndex,l,f.piece.end);if(c>=1){let s=this._buffers[f.piece.bufferIndex].lineStarts,u=this.offsetInBuffer(f.piece.bufferIndex,f.piece.start),p=s[l.line+c],m=d===e.startLineNumber?e.startColumn:1;if(a=this.findMatchesInNode(f,o,d,m,l,this.positionInBuffer(f,p-u),t,n,r,a,i),a>=r)return i;d+=c}let u=d===e.startLineNumber?e.startColumn-1:0;if(d===e.endLineNumber){let s=this.getLineContent(d).substring(u,e.endColumn-1);return a=this._findMatchesInLine(t,o,s,e.endLineNumber,u,a,i,n,r),i}if(a=this._findMatchesInLine(t,o,this.getLineContent(d).substr(u),d,u,a,i,n,r),a>=r)return i;d++,s=this.nodeAt2(d,1),f=s.node,l=this.positionInBuffer(s.node,s.remainder)}if(d===e.endLineNumber){let s=d===e.startLineNumber?e.startColumn-1:0,c=this.getLineContent(d).substring(s,e.endColumn-1);return a=this._findMatchesInLine(t,o,c,e.endLineNumber,s,a,i,n,r),i}let p=d===e.startLineNumber?e.startColumn:1;return a=this.findMatchesInNode(c.node,o,d,p,l,u,t,n,r,a,i),i}_findMatchesInLine(e,t,n,r,i,a,o,s,c){let l=e.wordSeparators;if(!s&&e.simpleSearch){let t=e.simpleSearch,s=t.length,u=n.length,d=-s;for(;(d=n.indexOf(t,d+s))!==-1;)if((!l||bX(l,n,u,d,s))&&(o[a++]=new kL(new X(r,d+1+i,r,d+1+s+i),null),a>=c))return a;return a}let u;t.reset(0);do if(u=t.next(n),u&&(o[a++]=hX(new X(r,u.index+1+i,r,u.index+1+u[0].length+i),u,s),a>=c))return a;while(u);return a}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value=``,this.root!==$){let{node:n,remainder:r,nodeStartOffset:i}=this.nodeAt(e),a=n.piece,o=a.bufferIndex,s=this.positionInBuffer(n,r);if(n.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&i+a.length===e&&t.length<Z0){this.appendToNode(n,t),this.computeBufferMetadata();return}if(i===e)this.insertContentToNodeLeft(t,n),this._searchCache.validate(e);else if(i+n.piece.length>e){let e=[],i=new n2(a.bufferIndex,s,a.end,this.getLineFeedCnt(a.bufferIndex,s,a.end),this.offsetInBuffer(o,a.end)-this.offsetInBuffer(o,s));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(n,r)===10){let e={line:i.start.line+1,column:0};i=new n2(i.bufferIndex,e,i.end,this.getLineFeedCnt(i.bufferIndex,e,i.end),i.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(n,r-1)===13){let i=this.positionInBuffer(n,r-1);this.deleteNodeTail(n,i),t=`\r`+t,n.piece.length===0&&e.push(n)}else this.deleteNodeTail(n,s);else this.deleteNodeTail(n,s);let c=this.createNewPieces(t);i.length>0&&this.rbInsertRight(n,i);let l=n;for(let e=0;e<c.length;e++)l=this.rbInsertRight(l,c[e]);this.deleteNodes(e)}else this.insertContentToNodeRight(t,n)}else{let e=this.createNewPieces(t),n=this.rbInsertLeft(null,e[0]);for(let t=1;t<e.length;t++)n=this.rbInsertRight(n,e[t])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value=``,t<=0||this.root===$)return;let n=this.nodeAt(e),r=this.nodeAt(e+t),i=n.node,a=r.node;if(i===a){let a=this.positionInBuffer(i,n.remainder),o=this.positionInBuffer(i,r.remainder);if(n.nodeStartOffset===e){if(t===i.piece.length){let e=i.next();q0(this,i),this.validateCRLFWithPrevNode(e),this.computeBufferMetadata();return}this.deleteNodeHead(i,o),this._searchCache.validate(e),this.validateCRLFWithPrevNode(i),this.computeBufferMetadata();return}if(n.nodeStartOffset+i.piece.length===e+t){this.deleteNodeTail(i,a),this.validateCRLFWithNextNode(i),this.computeBufferMetadata();return}this.shrinkNode(i,a,o),this.computeBufferMetadata();return}let o=[],s=this.positionInBuffer(i,n.remainder);this.deleteNodeTail(i,s),this._searchCache.validate(e),i.piece.length===0&&o.push(i);let c=this.positionInBuffer(a,r.remainder);this.deleteNodeHead(a,c),a.piece.length===0&&o.push(a);let l=i.next();for(let e=l;e!==$&&e!==a;e=e.next())o.push(e);let u=i.piece.length===0?i.prev():i;this.deleteNodes(o),this.validateCRLFWithNextNode(u),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){let n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){let r=t.piece,i={line:r.start.line+1,column:0};t.piece=new n2(r.bufferIndex,i,r.end,this.getLineFeedCnt(r.bufferIndex,i,r.end),r.length-1),e+=`
`,Y0(this,t,-1,-1),t.piece.length===0&&n.push(t)}let r=this.createNewPieces(e),i=this.rbInsertLeft(t,r[r.length-1]);for(let e=r.length-2;e>=0;e--)i=this.rbInsertLeft(i,r[e]);this.validateCRLFWithPrevNode(i),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);let n=this.createNewPieces(e),r=this.rbInsertRight(t,n[0]),i=r;for(let e=1;e<n.length;e++)i=this.rbInsertRight(i,n[e]);this.validateCRLFWithPrevNode(r)}positionInBuffer(e,t,n){let r=e.piece,i=e.piece.bufferIndex,a=this._buffers[i].lineStarts,o=a[r.start.line]+r.start.column+t,s=r.start.line,c=r.end.line,l=0,u=0,d=0;for(;s<=c&&(l=s+(c-s)/2|0,d=a[l],l!==c);)if(u=a[l+1],o<d)c=l-1;else if(o>=u)s=l+1;else break;return n?(n.line=l,n.column=o-d,null):{line:l,column:o-d}}getLineFeedCnt(e,t,n){if(n.column===0)return n.line-t.line;let r=this._buffers[e].lineStarts;if(n.line===r.length-1)return n.line-t.line;let i=r[n.line+1],a=r[n.line]+n.column;if(i>a+1)return n.line-t.line;let o=a-1;return this._buffers[e].buffer.charCodeAt(o)===13?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)q0(this,e[t])}createNewPieces(e){if(e.length>Z0){let t=[];for(;e.length>Z0;){let n=e.charCodeAt(Z0-1),r;n===O.CarriageReturn||n>=55296&&n<=56319?(r=e.substring(0,Z0-1),e=e.substring(Z0-1)):(r=e.substring(0,Z0),e=e.substring(Z0));let i=e2(r);t.push(new n2(this._buffers.length,{line:0,column:0},{line:i.length-1,column:r.length-i[i.length-1]},i.length-1,r.length)),this._buffers.push(new r2(r,i))}let n=e2(e);return t.push(new n2(this._buffers.length,{line:0,column:0},{line:n.length-1,column:e.length-n[n.length-1]},n.length-1,e.length)),this._buffers.push(new r2(e,n)),t}let t=this._buffers[0].buffer.length,n=e2(e,!1),r=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},r=this._lastChangeBufferPos;for(let e=0;e<n.length;e++)n[e]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=`_`+e,t+=1}else{if(t!==0)for(let e=0;e<n.length;e++)n[e]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}let i=this._buffers[0].buffer.length,a=this._buffers[0].lineStarts.length-1,o={line:a,column:i-this._buffers[0].lineStarts[a]},s=new n2(0,r,o,this.getLineFeedCnt(0,r,o),i-t);return this._lastChangeBufferPos=o,[s]}getLinesRawContent(){return this.getContentOfSubTree(this.root)}getLineRawContent(e,t=0){let n=this.root,r=``,i=this._searchCache.get2(e);if(i){n=i.node;let a=this.getAccumulatedValue(n,e-i.nodeStartLineNumber-1),o=this._buffers[n.piece.bufferIndex].buffer,s=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(i.nodeStartLineNumber+n.piece.lineFeedCnt===e)r=o.substring(s+a,s+n.piece.length);else{let r=this.getAccumulatedValue(n,e-i.nodeStartLineNumber);return o.substring(s+a,s+r-t)}}else{let i=0,a=e;for(;n!==$;)if(n.left!==$&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let r=this.getAccumulatedValue(n,e-n.lf_left-2),o=this.getAccumulatedValue(n,e-n.lf_left-1),s=this._buffers[n.piece.bufferIndex].buffer,c=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:i,nodeStartLineNumber:a-(e-1-n.lf_left)}),s.substring(c+r,c+o-t)}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let t=this.getAccumulatedValue(n,e-n.lf_left-2),i=this._buffers[n.piece.bufferIndex].buffer,a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);r=i.substring(a+t,a+n.piece.length);break}else e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==$;){let e=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){let i=this.getAccumulatedValue(n,0),a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return r+=e.substring(a,a+i-t),r}else{let t=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);r+=e.substr(t,n.piece.length)}n=n.next()}return r}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==$;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){let n=e.piece,r=this.positionInBuffer(e,t),i=r.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){let t=this.getLineFeedCnt(e.piece.bufferIndex,n.start,r);if(t!==i)return{index:t,remainder:0}}return{index:i,remainder:r.column}}getAccumulatedValue(e,t){if(t<0)return 0;let n=e.piece,r=this._buffers[n.bufferIndex].lineStarts,i=n.start.line+t+1;return i>n.end.line?r[n.end.line]+n.end.column-r[n.start.line]-n.start.column:r[i]-r[n.start.line]-n.start.column}deleteNodeTail(e,t){let n=e.piece,r=n.lineFeedCnt,i=this.offsetInBuffer(n.bufferIndex,n.end),a=t,o=this.offsetInBuffer(n.bufferIndex,a),s=this.getLineFeedCnt(n.bufferIndex,n.start,a),c=s-r,l=o-i,u=n.length+l;e.piece=new n2(n.bufferIndex,n.start,a,s,u),Y0(this,e,l,c)}deleteNodeHead(e,t){let n=e.piece,r=n.lineFeedCnt,i=this.offsetInBuffer(n.bufferIndex,n.start),a=t,o=this.getLineFeedCnt(n.bufferIndex,a,n.end),s=this.offsetInBuffer(n.bufferIndex,a),c=o-r,l=i-s,u=n.length+l;e.piece=new n2(n.bufferIndex,a,n.end,o,u),Y0(this,e,l,c)}shrinkNode(e,t,n){let r=e.piece,i=r.start,a=r.end,o=r.length,s=r.lineFeedCnt,c=t,l=this.getLineFeedCnt(r.bufferIndex,r.start,c),u=this.offsetInBuffer(r.bufferIndex,t)-this.offsetInBuffer(r.bufferIndex,i);e.piece=new n2(r.bufferIndex,r.start,c,l,u),Y0(this,e,u-o,l-s);let d=new n2(r.bufferIndex,n,a,this.getLineFeedCnt(r.bufferIndex,n,a),this.offsetInBuffer(r.bufferIndex,a)-this.offsetInBuffer(r.bufferIndex,n)),f=this.rbInsertRight(e,d);this.validateCRLFWithPrevNode(f)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);let n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),r=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;let i=e2(t,!1);for(let e=0;e<i.length;e++)i[e]+=r;if(n){let e=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:r-e}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1));let a=this._buffers[0].lineStarts.length-1,o={line:a,column:this._buffers[0].buffer.length-this._buffers[0].lineStarts[a]},s=e.piece.length+t.length,c=e.piece.lineFeedCnt,l=this.getLineFeedCnt(0,e.piece.start,o),u=l-c;e.piece=new n2(e.piece.bufferIndex,e.piece.start,o,l,s),this._lastChangeBufferPos=o,Y0(this,e,t.length,u)}nodeAt(e){let t=this.root,n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let r=0;for(;t!==$;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){r+=t.size_left;let n={node:t,remainder:e-t.size_left,nodeStartOffset:r};return this._searchCache.set(n),n}else e-=t.size_left+t.piece.length,r+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let n=this.root,r=0;for(;n!==$;)if(n.left!==$&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let i=this.getAccumulatedValue(n,e-n.lf_left-2),a=this.getAccumulatedValue(n,e-n.lf_left-1);return r+=n.size_left,{node:n,remainder:Math.min(i+t-1,a),nodeStartOffset:r}}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let i=this.getAccumulatedValue(n,e-n.lf_left-2);if(i+t-1<=n.piece.length)return{node:n,remainder:i+t-1,nodeStartOffset:r};t-=n.piece.length-i;break}else e-=n.lf_left+n.piece.lineFeedCnt,r+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==$;){if(n.piece.lineFeedCnt>0){let e=this.getAccumulatedValue(n,0),r=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,e),nodeStartOffset:r}}else if(n.piece.length>=t-1){let e=this.offsetOfNode(n);return{node:n,remainder:t-1,nodeStartOffset:e}}else t-=n.piece.length;n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;let n=this._buffers[e.piece.bufferIndex],r=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(r)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e==`string`)return e.charCodeAt(0)===10;if(e===$||e.piece.lineFeedCnt===0)return!1;let t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,r=t.start.line,i=n[r]+t.start.column;return r===n.length-1||n[r+1]>i+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(i)===10}endWithCR(e){return typeof e==`string`?e.charCodeAt(e.length-1)===13:e===$||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){let t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){let n=[],r=this._buffers[e.piece.bufferIndex].lineStarts,i;i=e.piece.end.column===0?{line:e.piece.end.line-1,column:r[e.piece.end.line]-r[e.piece.end.line-1]-1}:{line:e.piece.end.line,column:e.piece.end.column-1};let a=e.piece.length-1,o=e.piece.lineFeedCnt-1;e.piece=new n2(e.piece.bufferIndex,e.piece.start,i,o,a),Y0(this,e,-1,-1),e.piece.length===0&&n.push(e);let s={line:t.piece.start.line+1,column:0},c=t.piece.length-1,l=this.getLineFeedCnt(t.piece.bufferIndex,s,t.piece.end);t.piece=new n2(t.piece.bufferIndex,s,t.piece.end,l,c),Y0(this,t,-1,-1),t.piece.length===0&&n.push(t);let u=this.createNewPieces(`\r
`);this.rbInsertRight(e,u[0]);for(let e=0;e<n.length;e++)q0(this,n[e])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let n=t.next();if(this.startWithLF(n)){if(e+=`
`,n.piece.length===1)q0(this,n);else{let e=n.piece,t={line:e.start.line+1,column:0},r=e.length-1,i=this.getLineFeedCnt(e.bufferIndex,t,e.end);n.piece=new n2(e.bufferIndex,t,e.end,i,r),Y0(this,n,-1,-1)}return!0}}return!1}iterate(e,t){return e===$?t($):this.iterate(e.left,t)&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===$)return``;let t=this._buffers[e.piece.bufferIndex],n=e.piece,r=this.offsetInBuffer(n.bufferIndex,n.start),i=this.offsetInBuffer(n.bufferIndex,n.end);return t.buffer.substring(r,i)}getPieceContent(e){let t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),r=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,r)}rbInsertRight(e,t){let n=new R0(t,z0.Red);if(n.left=$,n.right=$,n.parent=$,n.size_left=0,n.lf_left=0,this.root===$)this.root=n,n.color=z0.Black;else if(e.right===$)e.right=n,n.parent=e;else{let t=B0(e.right);t.left=n,n.parent=t}return J0(this,n),n}rbInsertLeft(e,t){let n=new R0(t,z0.Red);if(n.left=$,n.right=$,n.parent=$,n.size_left=0,n.lf_left=0,this.root===$)this.root=n,n.color=z0.Black;else if(e.left===$)e.left=n,n.parent=e;else{let t=V0(e.left);t.right=n,n.parent=t}return J0(this,n),n}getContentOfSubTree(e){let t=``;return this.iterate(e,e=>(t+=this.getNodeContent(e),!0)),t}},s2=class e extends w{get onDidChangeContent(){return this._onDidChangeContent.event}constructor(e,t,n,r,i,a,o){super(),this._onDidChangeContent=this._register(new E),this._BOM=t,this._mightContainNonBasicASCII=!a,this._mightContainRTL=r,this._mightContainUnusualLineTerminators=i,this._pieceTree=new o2(e,n,o)}equals(t){return!(t instanceof e)||this._BOM!==t._BOM||this.getEOL()!==t.getEOL()?!1:this._pieceTree.equal(t._pieceTree)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:``)}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){let n=e+t,r=this.getPositionAt(e),i=this.getPositionAt(n);return new X(r.lineNumber,r.column,i.lineNumber,i.column)}getValueInRange(e,t=TL.TextDefined){if(e.isEmpty())return``;let n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=TL.TextDefined){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;let n=this.getOffsetAt(e.startLineNumber,e.startColumn),r=this.getOffsetAt(e.endLineNumber,e.endColumn),i=0,a=this._getEndOfLine(t),o=this.getEOL();return a.length!==o.length&&(i=(a.length-o.length)*(e.endLineNumber-e.startLineNumber)),r-n+i}getCharacterCountInRange(e,t=TL.TextDefined){if(this._mightContainNonBasicASCII){let n=0,r=e.startLineNumber,i=e.endLineNumber;for(let t=r;t<=i;t++){let a=this.getLineContent(t),o=t===r?e.startColumn-1:0,s=t===i?e.endColumn-1:a.length;for(let e=o;e<s;e++)oo(a.charCodeAt(e))?(n+=1,e+=1):n+=1}return n+=this._getEndOfLine(t).length*(i-r),n}return this.getValueLengthInRange(e,t)}getNearestChunk(e){return this._pieceTree.getNearestChunk(e)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getCharCode(e){return this._pieceTree.getCharCode(e)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineMinColumn(e){return 1}getLineMaxColumn(e){return this.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){let t=Wa(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){let t=Ka(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case TL.LF:return`
`;case TL.CRLF:return`\r
`;case TL.TextDefined:return this.getEOL();default:throw Error(`Unknown EOL preference`)}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(t,n,r){let i=this._mightContainRTL,a=this._mightContainUnusualLineTerminators,o=this._mightContainNonBasicASCII,s=!0,c=[];for(let e=0;e<t.length;e++){let n=t[e];s&&n._isTracked&&(s=!1);let r=n.range;if(n.text){let e=!0;o||=(e=!xo(n.text),e),!i&&e&&(i=yo(n.text)),!a&&e&&(a=Co(n.text))}let l=``,u=0,d=0,f=0;if(n.text){let e;[u,d,f,e]=R$(n.text);let t=this.getEOL(),r=t===`\r
`?L$.CRLF:L$.LF;l=e===L$.Unknown||e===r?n.text:n.text.replace(/\r\n|\r|\n/g,t)}c[e]={sortIndex:e,identifier:n.identifier||null,range:r,rangeOffset:this.getOffsetAt(r.startLineNumber,r.startColumn),rangeLength:this.getValueLengthInRange(r),text:l,eolCount:u,firstLineLength:d,lastLineLength:f,forceMoveMarkers:!!n.forceMoveMarkers,isAutoWhitespaceEdit:n.isAutoWhitespaceEdit||!1}}c.sort(e._sortOpsAscending);let l=!1;for(let e=0,t=c.length-1;e<t;e++){let t=c[e].range.getEndPosition(),n=c[e+1].range.getStartPosition();if(n.isBeforeOrEqual(t)){if(n.isBefore(t))throw Error(`Overlapping ranges are not allowed!`);l=!0}}s&&(c=this._reduceOperations(c));let u=r||n?e._getInverseEditRanges(c):[],d=[];if(n)for(let e=0;e<c.length;e++){let t=c[e],n=u[e];if(t.isAutoWhitespaceEdit&&t.range.isEmpty())for(let e=n.startLineNumber;e<=n.endLineNumber;e++){let r=``;e===n.startLineNumber&&(r=this.getLineContent(t.range.startLineNumber),Wa(r)!==-1)||d.push({lineNumber:e,oldContent:r})}}let f=null;if(r){let e=0;f=[];for(let t=0;t<c.length;t++){let n=c[t],r=u[t],i=this.getValueInRange(n.range),a=n.rangeOffset+e;e+=n.text.length-i.length,f[t]={sortIndex:n.sortIndex,identifier:n.identifier,range:r,text:i,textChange:new T0(n.rangeOffset,i,a,n.text)}}l||f.sort((e,t)=>e.sortIndex-t.sortIndex)}this._mightContainRTL=i,this._mightContainUnusualLineTerminators=a,this._mightContainNonBasicASCII=o;let p=this._doApplyEdits(c),m=null;if(n&&d.length>0){d.sort((e,t)=>t.lineNumber-e.lineNumber),m=[];for(let e=0,t=d.length;e<t;e++){let t=d[e].lineNumber;if(e>0&&d[e-1].lineNumber===t)continue;let n=d[e].oldContent,r=this.getLineContent(t);r.length===0||r===n||Wa(r)!==-1||m.push(t)}}return this._onDidChangeContent.fire(),new hre(f,p,m)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1,n=e[0].range,r=e[e.length-1].range,i=new X(n.startLineNumber,n.startColumn,r.endLineNumber,r.endColumn),a=n.startLineNumber,o=n.startColumn,s=[];for(let n=0,r=e.length;n<r;n++){let r=e[n],i=r.range;t||=r.forceMoveMarkers,s.push(this.getValueInRange(new X(a,o,i.startLineNumber,i.startColumn))),r.text.length>0&&s.push(r.text),a=i.endLineNumber,o=i.endColumn}let c=s.join(``),[l,u,d]=R$(c);return{sortIndex:0,identifier:e[0].identifier,range:i,rangeOffset:this.getOffsetAt(i.startLineNumber,i.startColumn),rangeLength:this.getValueLengthInRange(i,TL.TextDefined),text:c,eolCount:l,firstLineLength:u,lastLineLength:d,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(t){t.sort(e._sortOpsDescending);let n=[];for(let e=0;e<t.length;e++){let r=t[e],i=r.range.startLineNumber,a=r.range.startColumn,o=r.range.endLineNumber,s=r.range.endColumn;if(i===o&&a===s&&r.text.length===0)continue;r.text?(this._pieceTree.delete(r.rangeOffset,r.rangeLength),this._pieceTree.insert(r.rangeOffset,r.text,!0)):this._pieceTree.delete(r.rangeOffset,r.rangeLength);let c=new X(i,a,o,s);n.push({range:c,rangeLength:r.rangeLength,text:r.text,rangeOffset:r.rangeOffset,forceMoveMarkers:r.forceMoveMarkers})}return n}findMatchesLineByLine(e,t,n,r){return this._pieceTree.findMatchesLineByLine(e,t,n,r)}getPieceTree(){return this._pieceTree}static _getInverseEditRange(e,t){let n=e.startLineNumber,r=e.startColumn,[i,a,o]=R$(t),s;if(t.length>0){let e=i+1;s=e===1?new X(n,r,n,r+a):new X(n,r,n+e-1,o+1)}else s=new X(n,r,n,r);return s}static _getInverseEditRanges(e){let t=[],n=0,r=0,i=null;for(let a=0,o=e.length;a<o;a++){let o=e[a],s,c;i?i.range.endLineNumber===o.range.startLineNumber?(s=n,c=r+(o.range.startColumn-i.range.endColumn)):(s=n+(o.range.startLineNumber-i.range.endLineNumber),c=o.range.startColumn):(s=o.range.startLineNumber,c=o.range.startColumn);let l;if(o.text.length>0){let e=o.eolCount+1;l=e===1?new X(s,c,s,c+o.firstLineLength):new X(s,c,s+e-1,o.lastLineLength+1)}else l=new X(s,c,s,c);n=l.endLineNumber,r=l.endColumn,t.push(l),i=o}return t}static _sortOpsAscending(e,t){let n=X.compareRangesUsingEnds(e.range,t.range);return n===0?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){let n=X.compareRangesUsingEnds(e.range,t.range);return n===0?t.sortIndex-e.sortIndex:-n}},c2=class{constructor(e,t,n,r,i,a,o,s,c){this._chunks=e,this._bom=t,this._cr=n,this._lf=r,this._crlf=i,this._containsRTL=a,this._containsUnusualLineTerminators=o,this._isBasicASCII=s,this._normalizeEOL=c}_getEOL(e){let t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return t===0?e===EL.LF?`
`:`\r
`:n>t/2?`\r
`:`
`}create(e){let t=this._getEOL(e),n=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let e=0,r=n.length;e<r;e++){let r=n[e].buffer.replace(/\r\n|\r|\n/g,t);n[e]=new r2(r,e2(r))}let r=new s2(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:r,disposable:r}}getFirstLineText(e){return this._chunks[0].buffer.substr(0,e).split(/\r\n|\r|\n/)[0]}},l2=class{constructor(){this.chunks=[],this.BOM=``,this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&Ao(e)&&(this.BOM=ko,e=e.substr(1));let t=e.charCodeAt(e.length-1);t===O.CarriageReturn||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){let t=t2(this._tmpLineStarts,e);this.chunks.push(new r2(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||=yo(e),this.containsUnusualLineTerminators||=Co(e))}finish(e=!0){return this._finish(),new c2(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1(``,!0),this._hasPreviousChar){this._hasPreviousChar=!1;let e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar),e.lineStarts=e2(e.buffer),this._previousChar===O.CarriageReturn&&this.cr++}}},u2=class extends fh{get debugName(){return this._debugNameData.getDebugName(this)??`LazyObservableValue`}constructor(e,t,n,r){super(r),this._debugNameData=e,this._equalityComparator=n,this._isUpToDate=!0,this._deltas=[],this._updateCounter=0,this._value=t}get(){return this._update(),this._value}_update(){if(!this._isUpToDate)if(this._isUpToDate=!0,this._deltas.length>0){for(let e of this._deltas){Xm()?.handleObservableUpdated(this,{change:e,didChange:!0,oldValue:`(unknown)`,newValue:this._value,hadValue:!0});for(let t of this._observers)t.handleChange(this,e)}this._deltas.length=0}else{Xm()?.handleObservableUpdated(this,{change:void 0,didChange:!0,oldValue:`(unknown)`,newValue:this._value,hadValue:!0});for(let e of this._observers)e.handleChange(this,void 0)}}_beginUpdate(){if(this._updateCounter++,this._updateCounter===1)for(let e of this._observers)e.beginUpdate(this)}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){this._update();let e=[...this._observers];for(let t of e)t.endUpdate(this)}}addObserver(e){let t=!this._observers.has(e)&&this._updateCounter>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){let t=this._observers.has(e)&&this._updateCounter>0;super.removeObserver(e),t&&e.endUpdate(this)}set(e,t,n){if(n===void 0&&this._equalityComparator(this._value,e))return;let r;t||=r=new Dh(()=>{},()=>`Setting ${this.debugName}`);try{if(this._isUpToDate=!1,this._setValue(e),n!==void 0&&this._deltas.push(n),t.updateObserver({beginUpdate:()=>this._beginUpdate(),endUpdate:()=>this._endUpdate(),handleChange:(e,t)=>{},handlePossibleChange:e=>{}},this),this._updateCounter>1)for(let e of this._observers)e.handlePossibleChange(this)}finally{r&&r.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}};function d2(e,t,n=$m.ofCaller()){return e.lazy?new u2(new eh(e.owner,e.debugName,void 0),t,e.equalsFn??Mm,n):new kh(new eh(e.owner,e.debugName,void 0),t,e.equalsFn??Mm,n)}var f2=class{constructor(){this._onDidChangeVisibleRanges=new E,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set,this._viewsChanged=Mh(this),this.visibleLineRanges=yh({owner:this,equalsFn:Fm(Wm())},e=>(this._viewsChanged.read(e),mY.joinMany([...this._views].map(t=>t.state.read(e)?.visibleLineRanges??[]))))}attachView(){let e=new m2(t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})});return this._views.add(e),this._viewsChanged.trigger(void 0),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0}),this._viewsChanged.trigger(void 0)}},p2=class{constructor(e,t){this.visibleLineRanges=e,this.stabilized=t}equals(e){return this===e?!0:!(!ut(this.visibleLineRanges,e.visibleLineRanges,(e,t)=>e.equals(t))||this.stabilized!==e.stabilized)}},m2=class{get state(){return this._state}constructor(e){this.handleStateChange=e,this._state=d2({owner:this,equalsFn:Km((e,t)=>e.equals(t))},void 0)}setVisibleLines(e,t){let n=new p2(e.map(e=>new mY(e.startLineNumber,e.endLineNumber+1)),t);this._state.set(n,void 0,void 0),this.handleStateChange(n)}},h2=class extends w{get lineRanges(){return this._lineRanges}constructor(e){super(),this._refreshTokens=e,this.runner=this._register(new bc(()=>this.update(),50)),this._computedLineRanges=[],this._lineRanges=[]}update(){ut(this._computedLineRanges,this._lineRanges,(e,t)=>e.equals(t))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(e){this._lineRanges=e.visibleLineRanges,e.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}},g2=class extends w{get backgroundTokenizationState(){return this._backgroundTokenizationState}constructor(e,t){super(),this._languageIdCodec=e,this._textModel=t,this._onDidChangeTokens=this._register(new E),this.onDidChangeTokens=this._onDidChangeTokens.event,this._onDidChangeFontTokens=this._register(new E),this.onDidChangeFontTokens=this._onDidChangeFontTokens.event}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}},_2=class{static toKey(e){return`${e.ownerId};${e.decorationId};${e.lineNumber}`}constructor(e,t,n,r){this.ownerId=e,this.decorationId=t,this.lineNumber=n,this.lineHeight=r}},v2=class{static toKey(e){return`${e.ownerId};${e.decorationId};${e.lineNumber}`}constructor(e,t,n){this.ownerId=e,this.decorationId=t,this.lineNumber=n}},y2=class{constructor(e,t,n,r,i){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=n,this.foreground=r,this.background=i}};function b2(e){if(!e||!Array.isArray(e))return[];let t=[],n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r],a=NK.NotSet;if(typeof i.fontStyle==`string`){a=NK.None;let e=i.fontStyle.split(` `);for(let t=0,n=e.length;t<n;t++)switch(e[t]){case`italic`:a|=NK.Italic;break;case`bold`:a|=NK.Bold;break;case`underline`:a|=NK.Underline;break;case`strikethrough`:a|=NK.Strikethrough;break}}let o=null;typeof i.foreground==`string`&&(o=i.foreground);let s=null;typeof i.background==`string`&&(s=i.background),t[n++]=new y2(i.token||``,r,a,o,s)}return t}function x2(e,t){e.sort((e,t)=>{let n=D2(e.token,t.token);return n===0?e.index-t.index:n});let n=NK.None,r=`000000`,i=`ffffff`;for(;e.length>=1&&e[0].token===``;){let t=e.shift();t.fontStyle!==NK.NotSet&&(n=t.fontStyle),t.foreground!==null&&(r=t.foreground),t.background!==null&&(i=t.background)}let a=new C2;for(let e of t)a.getId(e);let o=a.getId(r),s=a.getId(i),c=new A2(new O2(n,o,s));for(let t=0,n=e.length;t<n;t++){let n=e[t];c.insert(n.token,n.fontStyle,a.getId(n.foreground),a.getId(n.background))}return new w2(a,c)}var S2=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/,C2=class{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;let t=e.match(S2);if(!t)throw Error(`Illegal value for token color: `+e);e=t[1].toUpperCase();let n=this._color2id.get(e);return n||(n=++this._lastColorId,this._color2id.set(e,n),this._id2color[n]=M.fromHex(`#`+e),n)}getColorMap(){return this._id2color.slice(0)}},w2=class{static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(b2(e),t)}static createFromParsedTokenTheme(e,t){return x2(e,t)}constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}getColorMap(){return this._colorMap.getColorMap()}getThemeTrieElement(){return this._root.toExternalThemeTrieElement()}_match(e){return this._root.match(e)}match(e,t){let n=this._cache.get(t);if(n===void 0){let e=this._match(t),r=E2(t);n=(e.metadata|r<<IK.TOKEN_TYPE_OFFSET)>>>0,this._cache.set(t,n)}return(n|e<<IK.LANGUAGEID_OFFSET)>>>0}},T2=/\b(comment|string|regex|regexp)\b/;function E2(e){let t=e.match(T2);if(!t)return FK.Other;switch(t[1]){case`comment`:return FK.Comment;case`string`:return FK.String;case`regex`:return FK.RegEx;case`regexp`:return FK.RegEx}throw Error(`Unexpected match for standard token type!`)}function D2(e,t){return e<t?-1:e>t?1:0}var O2=class e{constructor(e,t,n){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=n,this.metadata=(this._fontStyle<<IK.FONT_STYLE_OFFSET|this._foreground<<IK.FOREGROUND_OFFSET|this._background<<IK.BACKGROUND_OFFSET)>>>0}clone(){return new e(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,n){e!==NK.NotSet&&(this._fontStyle=e),t!==PK.None&&(this._foreground=t),n!==PK.None&&(this._background=n),this.metadata=(this._fontStyle<<IK.FONT_STYLE_OFFSET|this._foreground<<IK.FOREGROUND_OFFSET|this._background<<IK.BACKGROUND_OFFSET)>>>0}},k2=class{constructor(e,t=new Map){if(this.mainRule=e,t instanceof Map)this.children=t;else for(let e in this.children=new Map,t)this.children.set(e,t[e])}},A2=class e{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}toExternalThemeTrieElement(){let e=new Map;return this._children.forEach((t,n)=>{e.set(n,t.toExternalThemeTrieElement())}),new k2(this._mainRule,e)}match(e){if(e===``)return this._mainRule;let t=e.indexOf(`.`),n,r;t===-1?(n=e,r=``):(n=e.substring(0,t),r=e.substring(t+1));let i=this._children.get(n);return i===void 0?this._mainRule:i.match(r)}insert(t,n,r,i){if(t===``){this._mainRule.acceptOverwrite(n,r,i);return}let a=t.indexOf(`.`),o,s;a===-1?(o=t,s=``):(o=t.substring(0,a),s=t.substring(a+1));let c=this._children.get(o);c===void 0&&(c=new e(this._mainRule.clone()),this._children.set(o,c)),c.insert(s,n,r,i)}};function j2(e){let t=[];for(let n=1,r=e.length;n<r;n++){let r=e[n];t[n]=`.mtk${n} { color: ${r}; }`}return t.push(`.mtki { font-style: italic; }`),t.push(`.mtkb { font-weight: bold; }`),t.push(`.mtku { text-decoration: underline; text-underline-position: under; }`),t.push(`.mtks { text-decoration: line-through; }`),t.push(`.mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }`),t.join(`
`)}function M2(e){let t=[],n=new Set;for(let r=1,i=e.length;r<i;r++){let i=e[r];if(!i.fontFamily&&!i.fontSizeMultiplier)continue;let a=N2(i.fontFamily??``,i.fontSizeMultiplier??0);if(n.has(a))continue;n.add(a);let o=`.${a} {`;i.fontFamily&&(o+=`font-family: ${i.fontFamily};`),i.fontSizeMultiplier&&(o+=`font-size: calc(var(--editor-font-size)*${i.fontSizeMultiplier});`),o+=`}`,t.push(o)}return t.join(`
`)}function N2(e,t){return F2(`font-decoration-${P2(e)}-${t}`)}function P2(e){let t=e.toLowerCase().trim();return t?F2(t):`default`}function F2(e){return e.replace(/[^a-z0-9_-]/gi,`-`)}var I2=class e{constructor(e=[]){this._annotations=[],this._annotations=e}setAnnotations(e){for(let t of e.annotations){let e=this._getStartIndexOfIntersectingAnnotation(t.range.start),n=this._getEndIndexOfIntersectingAnnotation(t.range.endExclusive);t.annotation===void 0?this._annotations.splice(e,n-e):this._annotations.splice(e,n-e,{range:t.range,annotation:t.annotation})}}getAnnotationsIntersecting(e){let t=this._getStartIndexOfIntersectingAnnotation(e.start),n=this._getEndIndexOfIntersectingAnnotation(e.endExclusive);return this._annotations.slice(t,n)}_getStartIndexOfIntersectingAnnotation(e){let t=pt(this._annotations.length,t=>this._annotations[t].range.start-e),n;if(t>=0)n=t;else{let r=this._annotations[-(t+2)]?.range;n=r&&e>=r.start&&e<r.endExclusive?-(t+2):-(t+1)}return n}_getEndIndexOfIntersectingAnnotation(e){let t=pt(this._annotations.length,t=>this._annotations[t].range.endExclusive-e),n;if(t>=0)n=t+1;else{let r=this._annotations[-(t+1)]?.range;n=r&&e>r.start&&e<=r.endExclusive?-t:-(t+1)}return n}getAllAnnotations(){return this._annotations.slice()}applyEdit(e){let t=this._annotations.slice(),n=[],r=[],i=0;for(let a of e.replacements){for(;;){let e=t[0];if(!e)break;let o=e.range;if(o.endExclusive>=a.replaceRange.start)break;t.shift();let s={range:o.delta(i),annotation:e.annotation};s.range.isEmpty?r.push(s):n.push(s)}let e=[];for(;;){let n=t[0];if(!n||!n.range.intersectsOrTouches(a.replaceRange))break;t.shift(),e.push(n)}for(let n=e.length-1;n>=0;n--){let r=e[n],i=r.range,o=n===0&&a.replaceRange.endExclusive>i.start&&a.replaceRange.start<i.endExclusive,s=i.intersect(a.replaceRange).length;i=i.deltaEnd(-s+(o?a.newText.length:0));let c=i.start-a.replaceRange.start;c>0&&(i=i.delta(-c)),!o&&c>=0&&(i=i.delta(a.newText.length)),i=i.delta(-(a.newText.length-a.replaceRange.length)),t.unshift({annotation:r.annotation,range:i})}i+=a.newText.length-a.replaceRange.length}for(;;){let e=t[0];if(!e)break;t.shift();let a={annotation:e.annotation,range:e.range.delta(i)};a.range.isEmpty?r.push(a):n.push(a)}return this._annotations=n,r}clone(){return new e(this._annotations.slice())}},L2=class e{static create(t){return new e(t)}constructor(e){this._annotations=e}get annotations(){return this._annotations}rebase(e){let t=new I2(this._annotations);t.applyEdit(e),this._annotations=t.getAllAnnotations()}serialize(e){return this._annotations.map(t=>{let n={start:t.range.start,endExclusive:t.range.endExclusive};return t.annotation?{range:n,annotation:e(t.annotation)}:{range:n,annotation:void 0}})}static deserialize(t,n){return new e(t.map(e=>{let t=new RK(e.range.start,e.range.endExclusive);return e.annotation?{range:t,annotation:n(e.annotation)}:{range:t,annotation:void 0}}))}},R2=class e extends PX{static#e=this.empty=new e([]);static fromEdit(t){return new e(t.replacements.map(e=>new z2(e.replaceRange,e.getNewLength())))}static create(t){return new e(t)}static single(t){return new e([t])}static replace(t,n){return new e([new z2(t,n)])}static insert(t,n){return new e([new z2(RK.emptyAt(t),n)])}static delete(t){return new e([new z2(t,0)])}static compose(t){let n=e.empty;for(let e of t)n=n.compose(e);return n}inverse(){let t=[],n=0;for(let e of this.replacements)t.push(new z2(RK.ofStartAndLength(e.replaceRange.start+n,e.newLength),e.replaceRange.length)),n+=e.newLength-e.replaceRange.length;return new e(t)}_createNew(t){return new e(t)}applyArray(e,t){let n=Array(this.getNewDataLength(e.length)),r=0,i=0;for(let a of this.replacements){for(let t=r;t<a.replaceRange.start;t++)n[i++]=e[t];r=a.replaceRange.endExclusive;for(let e=0;e<a.newLength;e++)n[i++]=t}for(;r<e.length;)n[i++]=e[r++];return n}},z2=class e extends FX{static create(t,n,r){return new e(new RK(t,n),r)}constructor(e,t){super(e),this.newLength=t}equals(e){return this.replaceRange.equals(e.replaceRange)&&this.newLength===e.newLength}getNewLength(){return this.newLength}tryJoinTouching(t){return new e(this.replaceRange.joinRightTouching(t.replaceRange),this.newLength+t.newLength)}slice(t,n){return new e(t,n.length)}toString(){return`[${this.replaceRange.start}, +${this.replaceRange.length}) -> +${this.newLength}}`}};function B2(e){let t=e.map(e=>new zX(RK.ofStartAndLength(e.rangeOffset,e.rangeLength),e.text));return t.reverse(),new RX(t)}function V2(e){let t=e.slice().reverse().map(e=>R2.replace(new RK(e.range.startLineNumber-1,e.range.endLineNumber),R$(e.text)[0]+1));return R2.compose(t)}var H2=class e extends w{static#e=this.DECORATION_COUNT=0;constructor(t,n){super(),this.textModel=t,this.tokenizationTextModelPart=n,this._onDidChangeLineHeight=new E,this.onDidChangeLineHeight=this._onDidChangeLineHeight.event,this._onDidChangeFont=new E,this.onDidChangeFont=this._onDidChangeFont.event,this._fontAnnotatedString=new I2,this._register(this.tokenizationTextModelPart.onDidChangeFontTokens(t=>{let n=new Set,r=[],i=new Set,a=new Set;for(let o of t.changes.annotations){let t=this.textModel.getPositionAt(o.range.start).lineNumber,s;if(o.annotation===void 0)s={range:o.range,annotation:void 0};else{let n=`tokenization-font-decoration-${e.DECORATION_COUNT}`,r={fontToken:o.annotation,decorationId:n};s={range:o.range,annotation:r},e.DECORATION_COUNT++,o.annotation.lineHeightMultiplier&&i.add(new _2(0,n,t,o.annotation.lineHeightMultiplier)),a.add(new v2(0,n,t))}if(r.push(s),!n.has(t)){let e=new RK(this.textModel.getOffsetAt(new KK(t,1)),this.textModel.getOffsetAt(new KK(t,this.textModel.getLineMaxColumn(t)))),r=this._fontAnnotatedString.getAnnotationsIntersecting(e);for(let e of r){let n=e.annotation.decorationId;i.add(new _2(0,n,t,null)),a.add(new v2(0,n,t))}n.add(t)}}this._fontAnnotatedString.setAnnotations(L2.create(r)),this._onDidChangeLineHeight.fire(i),this._onDidChangeFont.fire(a)}))}handleDidChangeContent(e){let t=B2(e.changes),n=this._fontAnnotatedString.applyEdit(t);if(n.length===0)return;let r=new Set,i=new Set;for(let e of n){let t=this.textModel.getPositionAt(e.range.start).lineNumber,n=e.annotation.decorationId;r.add(new _2(0,n,t,null)),i.add(new v2(0,n,t))}this._onDidChangeLineHeight.fire(r),this._onDidChangeFont.fire(i)}getDecorationsInRange(e,t,n,r,i){let a=this.textModel.getOffsetAt(e.getStartPosition()),o=this.textModel.getOffsetAt(e.getEndPosition()),s=this._fontAnnotatedString.getAnnotationsIntersecting(new RK(a,o)),c=[];for(let e of s){let t=e.annotation,n=!!(t.fontToken.fontFamily||t.fontToken.fontSizeMultiplier);if(!(n&&r)){let t=this.textModel.getPositionAt(e.range.start),r=this.textModel.getPositionAt(e.range.endExclusive),i=X.fromPositions(t,r),a=e.annotation,o=N2(a.fontToken.fontFamily??``,a.fontToken.fontSizeMultiplier??0),s=a.decorationId;c.push({id:s,options:{description:`FontOptionDecoration`,inlineClassName:o,lineHeight:a.fontToken.lineHeightMultiplier,affectsFont:n},ownerId:0,range:i})}}return c}getAllDecorations(e,t){return this.getDecorationsInRange(new X(1,1,this.textModel.getLineCount(),this.textModel.getLineMaxColumn(this.textModel.getLineCount())),e,t)}};function U2(e,t){let n=e.gotoNextSibling(),r=t.gotoNextSibling();if(n!==r)throw Error(`Trees are out of sync`);return n&&r}function W2(e,t){let n=e.gotoParent(),r=t.gotoParent();if(n!==r)throw Error(`Trees are out of sync`);return n&&r}function G2(e,t,n){let r=e.gotoFirstChild(),i=t.gotoFirstChild();if(r!==i)throw Error(`Trees are out of sync`);if(n===0)return r&&i;for(let r=1;r<=n;r++){let n=e.gotoNextSibling(),r=t.gotoNextSibling();if(n!==r)throw Error(`Trees are out of sync`);if(!n||!r)return!1}return r&&i}function K2(e,t){do{if(e.currentNode.nextSibling)return U2(e,t);e.currentNode.parent&&W2(e,t)}while(e.currentNode.nextSibling||e.currentNode.parent);return!1}function q2(e,t){let n=t.walk();n.resetTo(e);let r=e.currentNode;do if(n.currentNode.previousSibling&&n.currentNode.endIndex-n.currentNode.startIndex!==0)n.gotoPreviousSibling();else{for(;!n.currentNode.previousSibling&&n.currentNode.parent;)n.gotoParent();n.gotoPreviousSibling()}while(n.currentNode.endIndex>r.startIndex&&(n.currentNode.parent||n.currentNode.previousSibling)&&n.currentNode.id!==r.id);if(n.currentNode.id!==r.id&&n.currentNode.endIndex<=r.startIndex)return n.currentNode}var J2=class extends w{constructor(e,t,n,r,i,a,o){super(),this.languageId=e,this._ranges=t,this._parser=n,this._parserClass=r,this.textModel=i,this._logService=a,this._telemetryService=o,this._tree=Oh(this,void 0),this.tree=this._tree,this._treeLastParsedVersion=Oh(this,-1),this.treeLastParsedVersion=this._treeLastParsedVersion,this._onDidChangeContentQueue=new _c,this._tree=Oh(this,void 0),this.tree=this._tree,this._register(S(()=>{this._tree.get()?.delete(),this._lastFullyParsed?.delete(),this._lastFullyParsedWithEdits?.delete(),this._parser.delete()})),this.handleContentChange(void 0,this._ranges)}handleContentChange(e,t){let n=this.textModel.getVersionId(),r=[];t&&(r=this._setRanges(t)),e&&this._applyEdits(e.changes),this._onDidChangeContentQueue.clearPending(),this._onDidChangeContentQueue.schedule(async()=>{if(this._store.isDisposed)return;let e=this._lastFullyParsed,t;this._lastFullyParsedWithEdits&&this._lastFullyParsed&&(t=this._findChangedNodes(this._lastFullyParsedWithEdits,this._lastFullyParsed));let i=await this._parseAndUpdateTree(n);if(i){let a;t?e&&t&&(a=this._findTreeChanges(i,t,r)):this._ranges&&(a=this._ranges.map(e=>({newRange:new X(e.startPosition.row+1,e.startPosition.column+1,e.endPosition.row+1,e.endPosition.column+1),oldRangeLength:e.endIndex-e.startIndex,newRangeStartOffset:e.startIndex,newRangeEndOffset:e.endIndex}))),a||=[{newRange:this.textModel.getFullModelRange(),newRangeStartOffset:0,newRangeEndOffset:this.textModel.getValueLength()}];let o=this._tree.get();wh(e=>{this._tree.set(i,e,{ranges:a,versionId:n}),this._treeLastParsedVersion.set(n,e)}),o?.delete()}})}get ranges(){return this._ranges}getInjectionTrees(e,t){}_applyEdits(e){for(let t of e){let e=SX.ofRange(X.lift(t.range)),n=SX.ofText(t.text),r=t.text.length===0?n:e.add(n),i={startIndex:t.rangeOffset,oldEndIndex:t.rangeOffset+t.rangeLength,newEndIndex:t.rangeOffset+t.text.length,startPosition:{row:t.range.startLineNumber-1,column:t.range.startColumn-1},oldEndPosition:{row:t.range.endLineNumber-1,column:t.range.endColumn-1},newEndPosition:{row:t.range.startLineNumber+r.lineCount-1,column:r.lineCount?r.columnCount:t.range.endColumn+r.columnCount}};this._tree.get()?.edit(i),this._lastFullyParsedWithEdits?.edit(i)}}_findChangedNodes(e,t){if(this._ranges&&this._ranges.every(t=>t.startPosition.row!==e.rootNode.startPosition.row)||e.rootNode.startPosition.row!==0)return[];let n=e.walk(),r=t.walk(),i=[],a=!0;do if(n.currentNode.hasChanges){let t=n.currentNode.children,o=[],s=t.filter((e,t)=>e?.hasChanges||r.currentNode.children.length<=t?(o.push(t),!0):!1);if(s.length===0||n.currentNode.hasError!==r.currentNode.hasError){for(;n.currentNode.parent&&a&&!n.currentNode.isNamed;)a=W2(n,r);let t=n.currentNode,o=q2(n,e)??t;i.push({startIndex:o.startIndex,endIndex:t.endIndex,startPosition:o.startPosition,endPosition:t.endPosition}),a=K2(n,r)}else s.length>=1&&(a=G2(n,r,o[0]))}else a=K2(n,r);while(a);return n.delete(),r.delete(),i}_findTreeChanges(e,t,n){let r=0,i=[];for(let a=0;a<t.length;a++){let o=t[a];if(i.length>0&&o.startIndex>=i[i.length-1].newRangeStartOffset&&o.endIndex<=i[i.length-1].newRangeEndOffset)continue;let s=e.walk(),c=()=>s.startIndex<o.startIndex&&s.endIndex>o.endIndex;for(;c();){let e=s.gotoFirstChild(),t=!1;for(;e;)if(c()&&s.currentNode.isNamed){t=!0;break}else e=s.gotoNextSibling();if(!t){s.gotoParent();break}if(s.currentNode.childCount===0)break}let l=s.currentNode.startPosition,u=s.currentNode.endPosition,d=s.currentNode.startIndex,f=s.currentNode.endIndex,p={newRange:new X(l.row+1,l.column+1,u.row+1,u.column+1),newRangeStartOffset:d,newRangeEndOffset:f};r<n.length&&Q2(n[r],{startIndex:d,endIndex:f})?(n[r].startIndex<p.newRangeStartOffset&&(p.newRange=p.newRange.setStartPosition(n[r].startPosition.row+1,n[r].startPosition.column+1),p.newRangeStartOffset=n[r].startIndex),n[r].endIndex>p.newRangeEndOffset&&(p.newRange=p.newRange.setEndPosition(n[r].endPosition.row+1,n[r].endPosition.column+1),p.newRangeEndOffset=n[r].endIndex),r++):r<n.length&&n[r].endIndex<p.newRangeStartOffset&&i.push({newRange:new X(n[r].startPosition.row+1,n[r].startPosition.column+1,n[r].endPosition.row+1,n[r].endPosition.column+1),newRangeStartOffset:n[r].startIndex,newRangeEndOffset:n[r].endIndex}),i.length>0&&i[i.length-1].newRangeEndOffset>=p.newRangeStartOffset?(i[i.length-1].newRange=X.fromPositions(i[i.length-1].newRange.getStartPosition(),p.newRange.getEndPosition()),i[i.length-1].newRangeEndOffset=p.newRangeEndOffset):i.push(p)}return this._constrainRanges(i)}_constrainRanges(e){if(!this._ranges)return e;let t=[],n=0,r=0;for(;n<e.length&&r<this._ranges.length;){let i=e[n],a=this._ranges[r];if(i.newRangeEndOffset<a.startIndex)n++;else if(i.newRangeStartOffset>a.endIndex)r++;else{let e=Math.max(i.newRangeStartOffset,a.startIndex),r=Math.min(i.newRangeEndOffset,a.endIndex),o=i.newRange.intersectRanges(new X(a.startPosition.row+1,a.startPosition.column+1,a.endPosition.row+1,a.endPosition.column+1));t.push({newRange:o,newRangeEndOffset:r,newRangeStartOffset:e}),r<i.newRangeEndOffset?(i.newRange=X.fromPositions(o.getEndPosition(),i.newRange.getEndPosition()),i.newRangeStartOffset=r+1):n++}}return t}async _parseAndUpdateTree(e){let t=await this._parse();if(t)return this._lastFullyParsed?.delete(),this._lastFullyParsed=t.copy(),this._lastFullyParsedWithEdits?.delete(),this._lastFullyParsedWithEdits=t.copy(),t;this._tree.get()||this._parser.reset()}_parse(){let e=Y2.Full;return this._tree.get()&&(e=Y2.Incremental),this._parseAndYield(e)}async _parseAndYield(e){let t=0,n=0,r=this.textModel.getVersionId(),i,a=X2();do{let e=performance.now();i=this._parser.parse((e,t)=>this._parseCallback(e),this._tree.get(),{progressCallback:a,includedRanges:this._ranges}),t+=performance.now()-e,n++,await new Promise(e=>wi(e))}while(!this._store.isDisposed&&!i&&r===this.textModel.getVersionId());return this._sendParseTimeTelemetry(e,t,n),i&&r===this.textModel.getVersionId()?i:void 0}_parseCallback(e){try{return this.textModel.getTextBuffer().getNearestChunk(e)}catch(e){this._logService.debug(`Error getting chunk for tree-sitter parsing`,e)}}_setRanges(e){let t=[];if(this._ranges)for(let n of e){let e=!1;for(let t=0;t<this._ranges.length;t++){let r=this._ranges[t];if(Z2(r,n)||Q2(r,n)){e=!0;break}}e||t.push(n)}else t.push(...e);return this._ranges=e,t}_sendParseTimeTelemetry(e,t,n){this._logService.debug(`Tree parsing (${e}) took ${t} ms and ${n} passes.`),e===Y2.Full?this._telemetryService.publicLog2(`treeSitter.fullParse`,{languageId:this.languageId,time:t,passes:n}):this._telemetryService.publicLog2(`treeSitter.incrementalParse`,{languageId:this.languageId,time:t,passes:n})}createParsedTreeSync(e){let t=new this._parserClass;t.setLanguage(this._parser.language);let n=t.parse(e);return t.delete(),n??void 0}};J2=t([n(5,Lb),n(6,NI)],J2);var Y2;(function(e){e.Full=`fullParse`,e.Incremental=`incrementalParse`})(Y2||={});function X2(){let e=performance.now();return function(t){let n=performance.now();return n-e>50?(e=n,!0):!1}}function Z2(e,t){return e.startPosition.row===t.startPosition.row&&e.startPosition.column===t.startPosition.column&&e.endPosition.row===t.endPosition.row&&e.endPosition.column===t.endPosition.column&&e.startIndex===t.startIndex&&e.endIndex===t.endIndex}function Q2(e,t){return e.startIndex<=t.startIndex&&e.endIndex>=t.startIndex||t.startIndex<=e.startIndex&&t.endIndex>=e.startIndex}var $2=class{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,n){if(e>=this._store.length)return;if(t===0){this.insert(e,n);return}else if(n===0){this.delete(e,t);return}let r=this._store.slice(0,e),i=this._store.slice(e+t),a=e4(n,this._default);this._store=r.concat(a,i)}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;let n=[];for(let e=0;e<t;e++)n[e]=this._default;this._store=It(this._store,e,n)}};function e4(e,t){let n=[];for(let r=0;r<e;r++)n[r]=t;return n}var t4=new Uint32Array().buffer,n4=class e{static deleteBeginning(t,n){return t===null||t===t4?t:e.delete(t,0,n)}static deleteEnding(t,n){if(t===null||t===t4)return t;let r=r4(t),i=r[r.length-2];return e.delete(t,n,i)}static delete(e,t,n){if(e===null||e===t4||t===n)return e;let r=r4(e),i=r.length>>>1;if(t===0&&r[r.length-2]===n)return t4;let a=BK.findIndexInTokensArray(r,t),o=a>0?r[a-1<<1]:0;if(n<r[a<<1]){let o=n-t;for(let e=a;e<i;e++)r[e<<1]-=o;return e}let s,c;o===t?(s=a<<1,c=o):(r[a<<1]=t,s=a+1<<1,c=t);let l=n-t;for(let e=a+1;e<i;e++){let t=r[e<<1]-l;t>c&&(r[s++]=t,r[s++]=r[(e<<1)+1],c=t)}if(s===r.length)return e;let u=new Uint32Array(s);return u.set(r.subarray(0,s),0),u.buffer}static append(e,t){if(t===t4)return e;if(e===t4)return t;if(e===null)return e;if(t===null)return null;let n=r4(e),r=r4(t),i=r.length>>>1,a=new Uint32Array(n.length+r.length);a.set(n,0);let o=n.length,s=n[n.length-2];for(let e=0;e<i;e++)a[o++]=r[e<<1]+s,a[o++]=r[(e<<1)+1];return a.buffer}static insert(e,t,n){if(e===null||e===t4)return e;let r=r4(e),i=r.length>>>1,a=BK.findIndexInTokensArray(r,t);a>0&&r[a-1<<1]===t&&a--;for(let e=a;e<i;e++)r[e<<1]+=n;return e}};function r4(e){return e instanceof Uint32Array?e:new Uint32Array(e)}var i4=class e{static deserialize(t,n,r){let i=new Uint32Array(t.buffer),a=qp(t,n);n+=4;let o=qp(t,n);n+=4;let s=[];for(let e=0;e<o;e++){let e=qp(t,n);n+=4,s.push(i.subarray(n/4,n/4+e/4)),n+=e}return r.push(new e(a,s)),n}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineRange(){return new mY(this._startLineNumber,this._startLineNumber+this._tokens.length)}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}serializeSize(){let e=0;e+=4,e+=4;for(let t=0;t<this._tokens.length;t++){let n=this._tokens[t];if(!(n instanceof Uint32Array))throw Error(`Not supported!`);e+=4,e+=n.byteLength}return e}serialize(e,t){Jp(e,this._startLineNumber,t),t+=4,Jp(e,this._tokens.length,t),t+=4;for(let n=0;n<this._tokens.length;n++){let r=this._tokens[n];if(!(r instanceof Uint32Array))throw Error(`Not supported!`);Jp(e,r.byteLength,t),t+=4,e.set(new Uint8Array(r.buffer),t),t+=r.byteLength}return t}applyEdit(e,t){let[n,r]=R$(t);this._acceptDeleteRange(e),this._acceptInsertText(new KK(e.startLineNumber,e.startColumn),n,r)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;let t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;if(n<0){let e=n-t;this._startLineNumber-=e;return}if(!(t>=this._tokens.length)){if(t<0&&n>=this._tokens.length){this._startLineNumber=0,this._tokens=[];return}if(t===n){this._tokens[t]=n4.delete(this._tokens[t],e.startColumn-1,e.endColumn-1);return}if(t>=0)if(this._tokens[t]=n4.deleteEnding(this._tokens[t],e.startColumn-1),n<this._tokens.length){let r=n4.deleteBeginning(this._tokens[n],e.endColumn-1);this._tokens[t]=n4.append(this._tokens[t],r),this._tokens.splice(t+1,n-t)}else this._tokens[t]=n4.append(this._tokens[t],null),this._tokens=this._tokens.slice(0,t+1);else{let r=-t;this._startLineNumber-=r,this._tokens[n]=n4.deleteBeginning(this._tokens[n],e.endColumn-1),this._tokens=this._tokens.slice(n)}}}_acceptInsertText(e,t,n){if(t===0&&n===0)return;let r=e.lineNumber-this._startLineNumber;if(r<0){this._startLineNumber+=t;return}if(!(r>=this._tokens.length)){if(t===0){this._tokens[r]=n4.insert(this._tokens[r],e.column-1,n);return}this._tokens[r]=n4.deleteEnding(this._tokens[r],e.column-1),this._tokens[r]=n4.insert(this._tokens[r],e.column-1,n),this._insertLines(e.lineNumber,t)}}_insertLines(e,t){if(t===0)return;let n=[];for(let e=0;e<t;e++)n[e]=null;this._tokens=It(this._tokens,e,n)}},a4=class{static deserialize(e){let t=0,n=qp(e,t);t+=4;let r=[];for(let i=0;i<n;i++)t=i4.deserialize(e,t,r);return r}constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){let n=this._tokens[this._tokens.length-1];if(n.endLineNumber+1===e){n.appendLineTokens(t);return}}this._tokens.push(new i4(e,[t]))}finalize(){return this._tokens}serialize(){let e=this._serializeSize(),t=new Uint8Array(e);return this._serialize(t),t}_serializeSize(){let e=0;e+=4;for(let t=0;t<this._tokens.length;t++)e+=this._tokens[t].serializeSize();return e}_serialize(e){let t=0;Jp(e,this._tokens.length,t),t+=4;for(let n=0;n<this._tokens.length;n++)t=this._tokens[n].serialize(e,t)}},o4;(function(e){e[e.CHEAP_TOKENIZATION_LENGTH_LIMIT=2048]=`CHEAP_TOKENIZATION_LENGTH_LIMIT`})(o4||={});var s4=class{constructor(e,t){this.tokenizationSupport=t,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new u4(e)}getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}},c4=class extends s4{constructor(e,t,n,r){super(e,t),this._textModel=n,this._languageIdCodec=r}updateTokensUntilLine(e,t){let n=this._textModel.getLanguageId();for(;;){let r=this.getFirstInvalidLine();if(!r||r.lineNumber>t)break;let i=this._textModel.getLineContent(r.lineNumber),a=p4(this._languageIdCodec,n,this.tokenizationSupport,i,!0,r.startState);e.add(r.lineNumber,a.tokens),this.store.setEndState(r.lineNumber,a.endState)}}getTokenTypeIfInsertingCharacter(e,t){let n=this.getStartState(e.lineNumber);if(!n)return FK.Other;let r=this._textModel.getLanguageId(),i=this._textModel.getLineContent(e.lineNumber),a=i.substring(0,e.column-1)+t+i.substring(e.column-1),o=new BK(p4(this._languageIdCodec,r,this.tokenizationSupport,a,!0,n).tokens,a,this._languageIdCodec);if(o.getCount()===0)return FK.Other;let s=o.findTokenIndexAtOffset(e.column-1);return o.getStandardTokenType(s)}tokenizeLinesAt(e,t){let n=this.getStartState(e);if(!n)return null;let r=this._textModel.getLanguageId(),i=[],a=n;for(let e of t){let t=p4(this._languageIdCodec,r,this.tokenizationSupport,e,!0,a);i.push(new BK(t.tokens,e,this._languageIdCodec)),a=t.endState}return i}hasAccurateTokensForLine(e){return e<this.store.getFirstInvalidEndStateLineNumberOrMax()}isCheapToTokenize(e){let t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t||e===t&&this._textModel.getLineLength(e)<o4.CHEAP_TOKENIZATION_LENGTH_LIMIT}tokenizeHeuristically(e,t,n){if(n<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(t<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(e,n),{heuristicTokens:!1};let r=this.guessStartState(t),i=this._textModel.getLanguageId();for(let a=t;a<=n;a++){let t=this._textModel.getLineContent(a),n=p4(this._languageIdCodec,i,this.tokenizationSupport,t,!0,r);e.add(a,n.tokens),r=n.endState}return{heuristicTokens:!0}}guessStartState(e){let{likelyRelevantLines:t,initialState:n}=l4(this._textModel,e,this);n||=this.tokenizationSupport.getInitialState();let r=this._textModel.getLanguageId(),i=n;for(let e of t)i=p4(this._languageIdCodec,r,this.tokenizationSupport,e,!1,i).endState;return i}};function l4(e,t,n){let r=e.getLineFirstNonWhitespaceColumn(t),i=[],a=null;for(let o=t-1;r>1&&o>=1;o--){let t=e.getLineFirstNonWhitespaceColumn(o);if(t!==0&&t<r&&(i.push(e.getLineContent(o)),r=t,a=n?.getStartState(o),a))break}return i.reverse(),{likelyRelevantLines:i,initialState:a??void 0}}var u4=class{constructor(e){this.lineCount=e,this._tokenizationStateStore=new d4,this._invalidEndStatesLineNumbers=new f4,this._invalidEndStatesLineNumbers.addRange(new RK(1,e+1))}getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new y(`Cannot set null/undefined state`);this._invalidEndStatesLineNumbers.delete(e);let n=this._tokenizationStateStore.setEndState(e,t);return n&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new RK(e+1,e+2)),n}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new RK(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(let t of e){let[e]=R$(t.text);this.acceptChange(new mY(t.range.startLineNumber,t.range.endLineNumber+1),e+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new RK(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||2**53-1}allStatesValid(){return this._invalidEndStatesLineNumbers.min===null}getStartState(e,t){return e===1?t:this.getEndState(e-1)}getFirstInvalidLine(e){let t=this.getFirstInvalidEndStateLineNumber();if(t===null)return null;let n=this.getStartState(t,e);if(!n)throw new y(`Start state must be defined`);return{lineNumber:t,startState:n}}},d4=class{constructor(){this._lineEndStates=new $2(null)}getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){let n=this._lineEndStates.get(e);return n&&n.equals(t)?!1:(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let n=e.length;t>0&&n>0&&(n--,t--),this._lineEndStates.replace(e.startLineNumber,n,t)}acceptChanges(e){for(let t of e){let[e]=R$(t.text);this.acceptChange(new mY(t.range.startLineNumber,t.range.endLineNumber+1),e+1)}}},f4=class{constructor(){this._ranges=[]}getRanges(){return this._ranges}get min(){return this._ranges.length===0?null:this._ranges[0].start}removeMin(){if(this._ranges.length===0)return null;let e=this._ranges[0];return e.start+1===e.endExclusive?this._ranges.shift():this._ranges[0]=new RK(e.start+1,e.endExclusive),e.start}delete(e){let t=this._ranges.findIndex(t=>t.contains(e));if(t!==-1){let n=this._ranges[t];n.start===e?n.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new RK(e+1,n.endExclusive):n.endExclusive===e+1?this._ranges[t]=new RK(n.start,e):this._ranges.splice(t,1,new RK(n.start,e),new RK(e+1,n.endExclusive))}}addRange(e){RK.addRange(e,this._ranges)}addRangeAndResize(e,t){let n=0;for(;!(n>=this._ranges.length||e.start<=this._ranges[n].endExclusive);)n++;let r=n;for(;!(r>=this._ranges.length||e.endExclusive<this._ranges[r].start);)r++;let i=t-e.length;for(let e=r;e<this._ranges.length;e++)this._ranges[e]=this._ranges[e].delta(i);if(n===r){let r=new RK(e.start,e.start+t);r.isEmpty||this._ranges.splice(n,0,r)}else{let t=new RK(Math.min(e.start,this._ranges[n].start),Math.max(e.endExclusive,this._ranges[r-1].endExclusive)+i);t.isEmpty?this._ranges.splice(n,r-n):this._ranges.splice(n,r-n,t)}}toString(){return this._ranges.map(e=>e.toString()).join(` + `)}};function p4(e,t,n,r,i,a){let o=null;if(n)try{o=n.tokenizeEncoded(r,i,a.clone())}catch(e){p(e)}return o||=Iq(e.encodeLanguageId(t),a),BK.convertToEndOffset(o.tokens,r.length),o}var m4=class{constructor(e,t){this._tokenizerWithStateStore=e,this._backgroundTokenStore=t,this._isDisposed=!1,this._isScheduled=!1}dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,Sc(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){let t=Date.now()+e.timeRemaining(),n=()=>{this._isDisposed||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?wi(n):this._beginBackgroundTokenization())};n()}_backgroundTokenizeForAtLeast1ms(){let e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new a4,n=Jn.create(!1);do if(n.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return this._tokenizerWithStateStore?!this._tokenizerWithStateStore.store.allStatesValid():!1}_tokenizeOneInvalidLine(e){let t=this._tokenizerWithStateStore?.getFirstInvalidLine();return t?(this._tokenizerWithStateStore.updateTokensUntilLine(e,t.lineNumber),t.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new mY(e,t))}},h4=class e{get children(){return this._children}get length(){return this._length}constructor(e){this.height=e,this._children=[],this._length=0}static create(t,n){let r=new e(t.height+1);return r.appendChild(t),r.appendChild(n),r}canAppendChild(){return this._children.length<3}appendChild(e){if(!this.canAppendChild())throw Error(`Cannot insert more than 3 children in a ListNode`);this._children.push(e),this._length+=e.length,this._updateParentLength(e.length),_4(e)||(e.parent=this)}_updateParentLength(e){let t=this.parent;for(;t;)t._length+=e,t=t.parent}unappendChild(){let e=this._children.pop();return this._length-=e.length,this._updateParentLength(-e.length),e}prependChild(e){if(this._children.length>=3)throw Error(`Cannot prepend more than 3 children in a ListNode`);this._children.unshift(e),this._length+=e.length,this._updateParentLength(e.length),_4(e)||(e.parent=this)}unprependChild(){let e=this._children.shift();return this._length-=e.length,this._updateParentLength(-e.length),e}lastChild(){return this._children[this._children.length-1]}dispose(){this._children.splice(0,this._children.length)}},g4;(function(e){e[e.None=0]=`None`,e[e.ViewportGuess=1]=`ViewportGuess`,e[e.EditGuess=2]=`EditGuess`,e[e.Accurate=3]=`Accurate`})(g4||={});function _4(e){return e.token!==void 0}function v4(e,t){let n=e,r=[],i;for(;;){if(t.height===n.height){i=t;break}if(_4(n))throw Error(`unexpected`);r.push(n),n=n.lastChild()}for(let e=r.length-1;e>=0;e--){let t=r[e];i&&(t.children.length>=3?i=h4.create(t.unappendChild(),i):(t.appendChild(i),i=void 0))}if(i){let t=new h4(i.height+1);return t.appendChild(e),t.appendChild(i),t}else return e}function y4(e,t){let n=e,r=[];for(;t.height!==n.height;){if(_4(n))throw Error(`unexpected`);r.push(n),n=n.children[0]}let i=t;for(let e=r.length-1;e>=0;e--){let t=r[e];i&&(t.children.length>=3?i=h4.create(i,t.unprependChild()):(t.prependChild(i),i=void 0))}return i?h4.create(i,e):e}function b4(e,t){return e.height===t.height?h4.create(e,t):e.height>t.height?v4(e,t):y4(t,e)}var x4=class e{get root(){return this._root}constructor(e){this._textModel=e,this._root=this.createEmptyRoot()}createEmptyRoot(){return{length:this._textModel.getValueLength(),token:0,height:0,tokenQuality:g4.None}}buildStore(e,t){this._root=this.createFromUpdates(e,t)}createFromUpdates(e,t){if(e.length===0)return this.createEmptyRoot();let n={length:e[0].length,token:e[0].token,height:0,tokenQuality:t};for(let r=1;r<e.length;r++)n=v4(n,{length:e[r].length,token:e[r].token,height:0,tokenQuality:t});return n}update(e,t,n){t.length!==0&&this.replace(e,t[0].startOffsetInclusive,t,n)}delete(e,t){this.replace(e,t,[],g4.EditGuess)}replace(e,t,n,r){let i=t+e,a=[],o=[],s=[{node:this._root,offset:0}];for(;s.length>0;){let e=s.pop(),n=e.offset;if(n<t&&n+e.node.length<=t){_4(e.node)||(e.node.parent=void 0),a.push(e.node);continue}else _4(e.node)&&n<t&&a.push({length:t-n,token:e.node.token,height:0,tokenQuality:e.node.tokenQuality});if(!(t<=n&&n+e.node.length<=i)){if(n>=i){_4(e.node)||(e.node.parent=void 0),o.push(e.node);continue}else if(_4(e.node)&&n+e.node.length>i){o.push({length:n+e.node.length-i,token:e.node.token,height:0,tokenQuality:e.node.tokenQuality});continue}if(!_4(e.node)){let t=n+e.node.length;for(let n=e.node.children.length-1;n>=0;n--)t-=e.node.children[n].length,s.push({node:e.node.children[n],offset:t})}}}let c;c=n.length>0?a.concat(this.createFromUpdates(n,r),o):a.concat(o);let l=c[0];for(let e=1;e<c.length;e++)l=b4(l,c[e]);this._root=l??this.createEmptyRoot()}traverseInOrderInRange(e,t,n){let r=[{node:this._root,offset:0}];for(;r.length>0;){let{node:i,offset:a}=r.pop();if(!(a+i.length<=e||a>=t)){if(n(i,a))return;if(!_4(i)){let e=a+i.length;for(let t=i.children.length-1;t>=0;t--)e-=i.children[t].length,r.push({node:i.children[t],offset:e})}}}}getTokenAt(e){let t;return this.traverseInOrderInRange(e,this._root.length,(e,n)=>_4(e)?(t={token:e.token,startOffsetInclusive:n,length:e.length},!0):!1),t}getTokensInRange(e,t){let n=[];return this.traverseInOrderInRange(e,t,(r,i)=>{if(_4(r)){let a=r.length,o=i;i<e&&i+r.length>t?(o=e,a=t-e):i<e?(a-=e-i,o=e):i+r.length>t&&(a-=i+r.length-t),n.push({token:r.token,startOffsetInclusive:o,length:a})}return!1}),n}markForRefresh(e,t){this.traverseInOrderInRange(e,t,e=>(_4(e)&&(e.tokenQuality=g4.None),!1))}rangeHasTokens(e,t,n){let r=!0;return this.traverseInOrderInRange(e,t,e=>(_4(e)&&e.tokenQuality<n&&(r=!1),!1)),r}rangeNeedsRefresh(e,t){let n=!1;return this.traverseInOrderInRange(e,t,e=>(_4(e)&&e.tokenQuality!==g4.Accurate&&(n=!0),!1)),n}getNeedsRefresh(){let e=[];return this.traverseInOrderInRange(0,this._textModel.getValueLength(),(t,n)=>(_4(t)&&t.tokenQuality!==g4.Accurate&&(e.length>0&&e[e.length-1].endOffset===n?e[e.length-1].endOffset+=t.length:e.push({startOffset:n,endOffset:n+t.length})),!1)),e}deepCopy(){let t=new e(this._textModel);return t._root=this._copyNodeIterative(this._root),t}_copyNodeIterative(e){let t=_4(e)?{length:e.length,token:e.token,tokenQuality:e.tokenQuality,height:e.height}:new h4(e.height),n=[[e,t]];for(;n.length>0;){let[e,t]=n.pop();if(!_4(e))for(let r of e.children){let e=_4(r)?{length:r.length,token:r.token,tokenQuality:r.tokenQuality,height:r.height}:new h4(r.height);t.appendChild(e),n.push([r,e])}}return t}printTree(e=this._root){let t=[],n=[[e,0]];for(;n.length>0;){let[e,r]=n.pop(),i=`  `.repeat(r);if(_4(e))t.push(`${i}Leaf(length: ${e.length}, token: ${e.token}, refresh: ${e.tokenQuality})\n`);else{t.push(`${i}List(length: ${e.length})\n`);for(let t=e.children.length-1;t>=0;t--)n.push([e.children[t],r+1])}}return t.join(``)}dispose(){let e=[[this._root,!1]];for(;e.length>0;){let[t,n]=e.pop();if(!_4(t))if(n)t.dispose(),t.parent=void 0;else{e.push([t,!0]);for(let n=t.children.length-1;n>=0;n--)e.push([t.children[n],!1])}}this._root=void 0}},S4=V(`treeSitterThemeService`);function C4(e){return{createChangeSummary:e=>({changes:[]}),handleChange(t,n){for(let r in e)t.didChange(e[r])&&n.changes.push({key:r,change:t.change});return!0},beforeUpdate(t,n){for(let r in e){if(r===`changes`)throw new y(`property name "changes" is reserved for change tracking`);n[r]=e[r].read(t)}}}}function w4(e){let t;return{createChangeSummary:e=>({changes:[]}),handleChange(n,r){for(let i in t||=e(),t)n.didChange(t[i])&&r.changes.push({key:i,change:n.change});return!0},beforeUpdate(n,r){for(let i in t||=e(),t){if(i===`changes`)throw new y(`property name "changes" is reserved for change tracking`);r[i]=t[i].read(n)}}}}var T4=class extends w{get _textModel(){return this._tree.textModel}constructor(e,t,n,r,i){super(),this._tree=e,this._highlightingQueries=t,this._languageIdCodec=n,this._visibleLineRanges=r,this._treeSitterThemeService=i,this._onDidChangeTokens=this._register(new E),this.onDidChangeTokens=this._onDidChangeTokens.event,this._onDidCompleteBackgroundTokenization=this._register(new E),this.onDidChangeBackgroundTokenization=this._onDidCompleteBackgroundTokenization.event,this._encodedLanguageId=this._languageIdCodec.encodeLanguageId(this._tree.languageId),this._register(AQ(this._treeSitterThemeService.onChange,()=>{this._updateTheme()})),this._tokenStore=this._register(new x4(this._textModel)),this._accurateVersion=this._textModel.getVersionId(),this._guessVersion=this._textModel.getVersionId(),this._tokenStore.buildStore(this._createEmptyTokens(),g4.None),this._register(bh(e=>{let t=this._visibleLineRanges.read(e);this._parseAndTokenizeViewPort(t)})),this._register(Sh({owner:this,changeTracker:C4({tree:this._tree.tree})},(e,t)=>{let n=t.changes.at(0)?.change;if(t.changes.length>1)throw new y(`The tree changed twice in one transaction. This is currently not supported and should not happen.`);if(!n)t.tree&&this._firstTreeUpdate(this._tree.treeLastParsedVersion.read(e));else{if(this.hasTokens())for(let e of n.ranges)this._markForRefresh(e.newRange);this.hasTokens()?this._handleTreeUpdate(n.ranges,n.versionId):this._firstTreeUpdate(n.versionId)}}))}handleContentChanged(e){this._guessVersion=e.versionId;for(let t of e.changes)if(t.text.length>t.rangeLength){let e=t.rangeOffset>0?t.rangeOffset-1:t.rangeOffset,n=this._tokenStore.getTokenAt(e),r;n?(r={startOffsetInclusive:n.startOffsetInclusive,length:n.length+t.text.length-t.rangeLength,token:n.token},this._tokenStore.markForRefresh(e,t.rangeOffset+(t.text.length>t.rangeLength?t.text.length:t.rangeLength))):r={startOffsetInclusive:e,length:t.text.length,token:0},this._tokenStore.update(n?.length??0,[r],g4.EditGuess)}else if(t.text.length<t.rangeLength){let e=t.rangeLength-t.text.length;this._tokenStore.delete(e,t.rangeOffset)}}getLineTokens(e){let t=this._textModel.getLineContent(e);return new BK(this.getTokens(e),t,this._languageIdCodec)}_createEmptyTokens(){let e=this._emptyToken(),t=this._textModel.getValueLength();return[this._emptyTokensForOffsetAndLength(0,t,e)]}_emptyToken(){return this._treeSitterThemeService.findMetadata([],this._encodedLanguageId,!1,void 0)}_emptyTokensForOffsetAndLength(e,t,n){return{token:n,length:e+t,startOffsetInclusive:0}}hasAccurateTokensForLine(e){return this.hasTokens(new X(e,1,e,this._textModel.getLineMaxColumn(e)))}tokenizeLinesAt(e,t){let n=this._guessTokensForLinesContent(e,t),r=[];if(!n)return null;for(let e=0;e<n.length;e++)r.push(new BK(n[e],t[e],this._languageIdCodec));return r}_rangeHasTokens(e,t){return this._tokenStore.rangeHasTokens(this._textModel.getOffsetAt(e.getStartPosition()),this._textModel.getOffsetAt(e.getEndPosition()),t)}hasTokens(e){return!e||this._guessVersion===this._accurateVersion?!0:!this._tokenStore.rangeNeedsRefresh(this._textModel.getOffsetAt(e.getStartPosition()),this._textModel.getOffsetAt(e.getEndPosition()))}getTokens(e){let t=this._textModel.getOffsetAt({lineNumber:e,column:1}),n=this._textModel.getOffsetAt({lineNumber:e,column:this._textModel.getLineLength(e)+1}),r=this._tokenStore.getTokensInRange(t,n),i=new Uint32Array(r.length*2);for(let e=0;e<r.length;e++)i[e*2]=r[e].startOffsetInclusive-t+r[e].length,i[e*2+1]=r[e].token;return i}getTokensInRange(e,t,n,r){let i=r?this._tokenizeCapturesWithMetadata(r,t,n):this._tokenize(e,t,n);if(i?.endOffsetsAndMetadata)return this._rangeTokensAsUpdates(t,i.endOffsetsAndMetadata)}_updateTokensInStore(e,t,n){this._accurateVersion=e;for(let r of t){let t=r.newTokens.length>0?r.newTokens[r.newTokens.length-1]:void 0,i;i=t&&this._guessVersion>=e?t.startOffsetInclusive+t.length-r.newTokens[0].startOffsetInclusive:r.oldRangeLength?r.oldRangeLength:0,this._tokenStore.update(i,r.newTokens,n)}}_markForRefresh(e){this._tokenStore.markForRefresh(this._textModel.getOffsetAt(e.getStartPosition()),this._textModel.getOffsetAt(e.getEndPosition()))}_getNeedsRefresh(){let e=this._tokenStore.getNeedsRefresh();return e?e.map(e=>({range:X.fromPositions(this._textModel.getPositionAt(e.startOffset),this._textModel.getPositionAt(e.endOffset)),startOffset:e.startOffset,endOffset:e.endOffset})):[]}_parseAndTokenizeViewPort(e){let t=e.map(e=>e.toInclusiveRange()).filter(Te);for(let e of t){let t=this._textModel.getOffsetAt(e.getStartPosition()),n=this._textModel.getOffsetAt(e.getEndPosition()),r=this._textModel.getVersionId();if(this._rangeHasTokens(e,g4.ViewportGuess))continue;let i=this._textModel.getValueInRange(e),a=this._forceParseAndTokenizeContent(e,t,n,i,!0);if(!a||this._rangeHasTokens(e,g4.ViewportGuess)||a.length===0)continue;let o=a[a.length-1],s=o.startOffsetInclusive+o.length-a[0].startOffsetInclusive;this._updateTokensInStore(r,[{newTokens:a,oldRangeLength:s}],g4.ViewportGuess),this._onDidChangeTokens.fire({changes:{semanticTokensApplied:!1,ranges:[{fromLineNumber:e.startLineNumber,toLineNumber:e.endLineNumber}]}})}}_guessTokensForLinesContent(e,t){if(t.length===0)return;let n=t.join(this._textModel.getEOL()),r=new X(1,1,e+t.length,t[t.length-1].length+1),i=this._textModel.getOffsetAt({lineNumber:e,column:1}),a=this._forceParseAndTokenizeContent(r,i,i+n.length,n,!1);if(!a)return;let o=Array(t.length),s=0,c=0,l=0;for(let e=0;e<t.length;e++){let n=[],r=!1;for(let i=s;!r&&i<a.length;i++){let o=a[i],u=o.endOffset-l,d=c-l;if(u<=t[e].length)n.push({endOffset:u,metadata:o.metadata}),s++;else if(d<t[e].length){let i={endOffset:t[e].length,metadata:o.metadata};n.push(i),r=!0}else r=!0;c=o.endOffset}o[e]=this._endOffsetTokensToUint32Array(n),l+=t[e].length+this._textModel.getEOL().length}return o}_forceParseAndTokenizeContent(e,t,n,r,i){let a=l4(this._textModel,e.startLineNumber).likelyRelevantLines,o=a.join(this._textModel.getEOL()),s=this._tree.createParsedTreeSync(`${o}${r}`);if(!s)return;let c=new X(1,1,e.endLineNumber-e.startLineNumber+1+a.length,e.endColumn),l=this.captureAtRange(c),u=this._tokenizeCapturesWithMetadata(l,o.length,n-t+o.length);if(s.delete(),u)return i?this._rangeTokensAsUpdates(t,u.endOffsetsAndMetadata,o.length):u.endOffsetsAndMetadata}_firstTreeUpdate(e){return this._setViewPortTokens(e)}_setViewPortTokens(e){let t=this._visibleLineRanges.get().map(e=>{let t=e.toInclusiveRange();if(!t)return;let n=this._textModel.getOffsetAt(t.getStartPosition());return{newRange:t,newRangeEndOffset:this._textModel.getOffsetAt(t.getEndPosition()),newRangeStartOffset:n}}).filter(Te);return this._handleTreeUpdate(t,e)}_handleTreeUpdate(e,t){let n=[],r=1e3;for(let t=0;t<e.length;t++)if(e[t].newRange.endLineNumber-e[t].newRange.startLineNumber>r){let i=e[t].newRange.endLineNumber,a=e[t].newRange.startLineNumber,o=e[t].newRange.startColumn,s=a+r;do{let c=new KK(a,o),l=s===e[t].newRange.endLineNumber?e[t].newRange.endColumn:this._textModel.getLineMaxColumn(s),u=new KK(s,l),d=X.fromPositions(c,u);n.push({range:d,startOffset:this._textModel.getOffsetAt(d.getStartPosition()),endOffset:this._textModel.getOffsetAt(d.getEndPosition())}),a=s+1,o=1,s<i&&s+r>i?s=i:s+=r}while(s<=i)}else if(t===0||n[t-1].endOffset<e[t].newRangeStartOffset)n.push({range:e[t].newRange,startOffset:e[t].newRangeStartOffset,endOffset:e[t].newRangeEndOffset});else if(n[t-1].endOffset<e[t].newRangeEndOffset){let r=this._textModel.getPositionAt(n[t-1].endOffset+1),i=new X(r.lineNumber,r.column,e[t].newRange.endLineNumber,e[t].newRange.endColumn);n.push({range:i,startOffset:n[t-1].endOffset+1,endOffset:e[t].newRangeEndOffset})}let i=n.map(e=>this._getCaptures(e.range));return this._updateTreeForRanges(n,t,i).then(()=>{!this._textModel.isDisposed()&&this._tree.treeLastParsedVersion.get()===this._textModel.getVersionId()&&this._refreshNeedsRefresh(t)})}async _updateTreeForRanges(e,t,n){let r;for(let i=0;i<e.length&&!(!this._textModel.isDisposed()&&t!==this._textModel.getVersionId());i++){let a=n[i],o=e[i],s=this.getTokensInRange(o.range,o.startOffset,o.endOffset,a);r=s?{newTokens:s}:{newTokens:[]},this._updateTokensInStore(t,[r],g4.Accurate),this._onDidChangeTokens.fire({changes:{semanticTokensApplied:!1,ranges:[{fromLineNumber:o.range.getStartPosition().lineNumber,toLineNumber:o.range.getEndPosition().lineNumber}]}}),await new Promise(e=>wi(e))}this._onDidCompleteBackgroundTokenization.fire()}_refreshNeedsRefresh(e){let t=this._getNeedsRefresh();if(t.length===0)return;let n=Array(t.length);for(let e=0;e<t.length;e++){let r=t[e];n[e]={newRange:r.range,newRangeStartOffset:r.startOffset,newRangeEndOffset:r.endOffset}}this._handleTreeUpdate(n,e)}_rangeTokensAsUpdates(e,t,n){let r=[],i=0;for(let a of t){if(a.endOffset<=i||n&&a.endOffset<n)continue;let t;t=n&&i<n?{startOffsetInclusive:e+n,length:a.endOffset-n,token:a.metadata}:{startOffsetInclusive:e+i,length:a.endOffset-i,token:a.metadata},r.push(t),i=a.endOffset}return r}_updateTheme(){let e=this._textModel.getFullModelRange();this._markForRefresh(e),this._parseAndTokenizeViewPort(this._visibleLineRanges.get())}captureAtPosition(e,t){return this.captureAtRangeWithInjections(new X(e,t,e,t+1))}captureAtRangeTree(e){return this.captureAtRangeWithInjections(e)}captureAtRange(e){let t=this._tree.tree.get();return t?this._highlightingQueries.captures(t.rootNode,{startPosition:{row:e.startLineNumber-1,column:e.startColumn-1},endPosition:{row:e.endLineNumber-1,column:e.endColumn-1}}).map(e=>({name:e.name,text:e.node.text,node:{startIndex:e.node.startIndex,endIndex:e.node.endIndex,startPosition:{lineNumber:e.node.startPosition.row+1,column:e.node.startPosition.column+1},endPosition:{lineNumber:e.node.endPosition.row+1,column:e.node.endPosition.column+1}},encodedLanguageId:this._encodedLanguageId})):[]}captureAtRangeWithInjections(e){let t=this.captureAtRange(e);for(let n=0;n<t.length;n++){let r=t[n],i=r.node.startPosition.lineNumber,a=r.node.endPosition.lineNumber,o=r.node.startPosition.column,s=r.node.endPosition.column,c=i>e.startLineNumber&&i<e.endLineNumber?i:e.startLineNumber,l=a>e.startLineNumber&&a<e.endLineNumber?a:e.endLineNumber,u=new X(c,i===e.startLineNumber?o<e.startColumn?e.startColumn:o:i<e.startLineNumber?e.startColumn:o,l,a===e.endLineNumber?s>e.endColumn?e.endColumn:s:a>e.endLineNumber?e.endColumn:s),d=this._getInjectionCaptures(r,u);d&&d.length>0&&(t.splice(n+1,0,...d),n+=d.length)}return t}tokenizeEncoded(e){let t=this._tokenizeEncoded(e);if(!t)return;let n=this._rangeTokensAsUpdates(this._textModel.getOffsetAt({lineNumber:e,column:1}),t.result);t.versionId===this._textModel.getVersionId()&&this._updateTokensInStore(t.versionId,[{newTokens:n,oldRangeLength:this._textModel.getLineLength(e)}],g4.Accurate)}tokenizeEncodedInstrumented(e){let t=this._tokenizeEncoded(e);if(t)return{result:this._endOffsetTokensToUint32Array(t.result),captureTime:t.captureTime,metadataTime:t.metadataTime}}_getCaptures(e){return this.captureAtRangeWithInjections(e)}_tokenize(e,t,n){let r=this._getCaptures(e),i=this._tokenizeCapturesWithMetadata(r,t,n);if(i)return{...i,versionId:this._tree.treeLastParsedVersion.get()}}_createTokensFromCaptures(e,t,n){let r=this._tree.tree.get(),i=Jn.create(),a=n-t,o=this._languageIdCodec.encodeLanguageId(this._tree.languageId),s=E4[this._tree.languageId]||`source`;if(e.length===0)return r?(i.stop(),{endOffsets:[{endOffset:a,scopes:[],encodedLanguageId:o}],captureTime:i.elapsed()}):void 0;let c=Array(e.length);c.fill({endOffset:0,scopes:[s],encodedLanguageId:o});let l=0,u=()=>{c.push({endOffset:0,scopes:[s],encodedLanguageId:o})},d=(e,t)=>e.name.includes(`punctuation`)&&e.text?Array.from(e.text.matchAll(D4)).map(e=>t+e.index):void 0,f=(e,t,n,r)=>{if(r!==void 0){let i=c[r].scopes,a=c[r].bracket;if((r>0?c[r-1].endOffset:0)!==t){let o;if(a&&a.length>0){o=[];let e=[];for(let r=0;r<a.length;r++){let i=a[r];i<t?o.push(i):i>n&&e.push(i)}o.length===0&&(o=void 0),a=e.length===0?void 0:e}c.splice(r,0,{endOffset:t,scopes:[...i],bracket:o,encodedLanguageId:e.encodedLanguageId}),r++,u(),l++}c.splice(r,0,{endOffset:n,scopes:[...i,e.name],bracket:d(e,t),encodedLanguageId:e.encodedLanguageId}),c[l].bracket=a}else c[l]={endOffset:n,scopes:[s,e.name],bracket:d(e,t),encodedLanguageId:e.encodedLanguageId};l++};for(let r=0;r<e.length;r++){let i=e[r],a=i.node.endIndex<n?i.node.endIndex<t?t:i.node.endIndex:n,o=i.node.startIndex<t?t:i.node.startIndex,p=a-t,m,h=a-o;m=r>0?c[l-1].endOffset:o-t-1;let g=p-h;if(m>=0&&m<g&&(c[l]={endOffset:g,scopes:[s],encodedLanguageId:this._encodedLanguageId},l++,u()),!(h<0))if(m>=p){let e=l-1,t=c[e].endOffset,n=e>=2?c[e-1].endOffset:0;do{if(n+h===t){if(n===g){c[e].scopes.push(i.name);let t=c[e].bracket;c[e].bracket=t&&t.length>0?t:d(i,g)}}else if(n<=g){f(i,g,p,e);break}e--,n=e>=1?c[e-1].endOffset:0,t=e>=0?c[e].endOffset:0}while(t>g)}else f(i,g,p)}c[l-1].endOffset<a&&a-c[l-1].endOffset>0&&(u(),c[l]={endOffset:a,scopes:c[l].scopes,encodedLanguageId:this._encodedLanguageId},l++);for(let e=0;e<c.length;e++)if(c[e].endOffset===0&&e!==0){c.splice(e,c.length-e);break}return{endOffsets:c,captureTime:i.elapsed()}}_getInjectionCaptures(e,t){return[]}_tokenizeCapturesWithMetadata(e,t,n){let r=Jn.create(),i=this._createTokensFromCaptures(e,t,n);if(!i)return;let a=i.endOffsets;for(let e=0;e<a.length;e++){let t=a[e];t.metadata=this._treeSitterThemeService.findMetadata(t.scopes,t.encodedLanguageId,!!t.bracket&&t.bracket.length>0,void 0)}let o=r.elapsed();return{endOffsetsAndMetadata:a,captureTime:i.captureTime,metadataTime:o}}_tokenizeEncoded(e){let t=this._textModel.getOffsetAt({lineNumber:e,column:1}),n=this._textModel.getLineCount(),r=e+1<=n?this._textModel.getOffsetAt({lineNumber:e+1,column:1}):this._textModel.getValueLength(),i=r-t,a=this._tokenize(new X(e,1,e,i+1),t,r);if(a)return{result:a.endOffsetsAndMetadata,captureTime:a.captureTime,metadataTime:a.metadataTime,versionId:a.versionId}}_endOffsetTokensToUint32Array(e){let t=new Uint32Array(e.length*2);for(let n=0;n<e.length;n++)t[n*2]=e[n].endOffset,t[n*2+1]=e[n].metadata;return t}};T4=t([n(4,S4)],T4);var E4={css:`source.css`,typescript:`source.ts`,ini:`source.ini`,regex:`source.regex`},D4=/[\{\}\[\]\<\>\(\)]/g,O4=V(`treeSitterLibraryService`),k4=class{get cachedValue(){return this._value}constructor(e){this._computeValue=e,this._value=Oh(this,void 0)}getValue(){let e=this._value.get();return e||(e=this._computeValue(),this._value.set(e,void 0)),e}},A4=class e{static fromFn(t){return new e(t())}static resolved(t){return new e(Promise.resolve(t))}constructor(e){this._value=Oh(this,void 0),this.promiseResult=this._value,this.resolvedValue=vh(this,e=>{let t=this.promiseResult.read(e);if(t)return t.getDataOrThrow()}),this.promise=e.then(e=>(wh(t=>{this._value.set(new j4(e,void 0),t)}),e),e=>{throw wh(t=>{this._value.set(new j4(void 0,e),t)}),e})}},j4=class{constructor(e,t){this.data=e,this.error=t}getDataOrThrow(){if(this.error)throw this.error;return this.data}},M4=class{constructor(e){this._computePromise=e,this._lazyValue=new k4(()=>new A4(this._computePromise())),this.cachedPromiseResult=vh(this,e=>this._lazyValue.cachedValue.read(e)?.promiseResult.read(e))}getPromise(){return this._lazyValue.getValue().promise}},N4=class extends g2{constructor(e,t,n,r,i,a){super(t,n),this._languageIdObs=e,this._treeSitterLibraryService=i,this._instantiationService=a,this._backgroundTokenizationState=r0.InProgress,this._onDidChangeBackgroundTokenizationState=this._register(new E),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event;let o=new A4(this._treeSitterLibraryService.getParserClass()),s=vh(this,e=>o.promiseResult?.read(e)?.getDataOrThrow());this._tree=vh(this,e=>{let t=s.read(e);if(!t)return;let n=this._languageIdObs.read(e),r=this._treeSitterLibraryService.getLanguage(n,!1,e);if(!r)return;let i=new t;if(e.store.add(S(()=>{i.delete()})),i.setLanguage(r),this._treeSitterLibraryService.getInjectionQueries(n,e)!==void 0)return e.store.add(this._instantiationService.createInstance(J2,n,void 0,i,t,this._textModel))}),this._tokenizationImpl=vh(this,e=>{let t=this._tree.read(e);if(!t)return;let n=this._treeSitterLibraryService.getHighlightingQueries(t.languageId,e);if(n)return e.store.add(this._instantiationService.createInstance(T4,t,n,this._languageIdCodec,r))}),this._register(bh(e=>{let t=this._tokenizationImpl.read(e);t&&(e.store.add(t.onDidChangeTokens(e=>{this._onDidChangeTokens.fire(e.changes)})),e.store.add(t.onDidChangeBackgroundTokenization(e=>{this._backgroundTokenizationState=r0.Completed,this._onDidChangeBackgroundTokenizationState.fire()})))}))}get tree(){return this._tree}get tokenizationImpl(){return this._tokenizationImpl}getLineTokens(e){let t=this._tokenizationImpl.get();if(!t){let t=this._textModel.getLineContent(e);return BK.createEmpty(t,this._languageIdCodec)}return t.getLineTokens(e)}todo_resetTokenization(e=!0){e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}handleDidChangeAttached(){}handleDidChangeContent(e){e.isFlush?this.todo_resetTokenization(!1):this._tokenizationImpl.get()?.handleContentChanged(e),this._tree.get()?.handleContentChange(e)}forceTokenization(e){let t=this._tokenizationImpl.get();t&&(t.hasAccurateTokensForLine(e)||t.tokenizeEncoded(e))}hasAccurateTokensForLine(e){let t=this._tokenizationImpl.get();return t?t.hasAccurateTokensForLine(e):!1}isCheapToTokenize(e){return!0}getTokenTypeIfInsertingCharacter(e,t,n){return FK.Other}tokenizeLinesAt(e,t){let n=this._tokenizationImpl.get();return n?n.tokenizeLinesAt(e,t):null}get hasTokens(){let e=this._tokenizationImpl.get();return e?e.hasTokens():!1}};N4=t([n(4,O4),n(5,Cy)],N4);var P4=class e{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t,n=void 0){if(this._pieces=e||[],this._isComplete=t,n)for(let e of this._pieces)e.reportIfInvalid(n)}setPartial(e,t){let n=e;if(t.length>0){let r=t[0].getRange(),i=t[t.length-1].getRange();if(!r||!i)return e;n=e.plusRange(r).plusRange(i)}let r=null;for(let e=0,t=this._pieces.length;e<t;e++){let i=this._pieces[e];if(i.endLineNumber<n.startLineNumber)continue;if(i.startLineNumber>n.endLineNumber){r||={index:e};break}if(i.removeTokens(n),i.isEmpty()){this._pieces.splice(e,1),e--,t--;continue}if(i.endLineNumber<n.startLineNumber)continue;if(i.startLineNumber>n.endLineNumber){r||={index:e};continue}let[a,o]=i.split(n);if(a.isEmpty()){r||={index:e};continue}o.isEmpty()||(this._pieces.splice(e,1,a,o),e++,t++,r||={index:e})}return r||={index:this._pieces.length},t.length>0&&(this._pieces=It(this._pieces,r.index,t)),n}isComplete(){return this._isComplete}addSparseTokens(t,n){if(n.getTextLength()===0)return n;let r=this._pieces;if(r.length===0)return n;let i=r[e._findFirstPieceWithLine(r,t)].getLineTokens(t);if(!i)return n;let a=n.getCount(),o=i.getCount(),s=0,c=[],l=0,u=0,d=(e,t)=>{e!==u&&(u=e,c[l++]=e,c[l++]=t)};for(let e=0;e<o;e++){let t=Math.min(i.getStartCharacter(e),n.getTextLength()),r=Math.min(i.getEndCharacter(e),n.getTextLength()),o=i.getMetadata(e),c=((o&IK.SEMANTIC_USE_ITALIC?IK.ITALIC_MASK:0)|(o&IK.SEMANTIC_USE_BOLD?IK.BOLD_MASK:0)|(o&IK.SEMANTIC_USE_UNDERLINE?IK.UNDERLINE_MASK:0)|(o&IK.SEMANTIC_USE_STRIKETHROUGH?IK.STRIKETHROUGH_MASK:0)|(o&IK.SEMANTIC_USE_FOREGROUND?IK.FOREGROUND_MASK:0)|(o&IK.SEMANTIC_USE_BACKGROUND?IK.BACKGROUND_MASK:0))>>>0,l=~c>>>0;for(;s<a&&n.getEndOffset(s)<=t;)d(n.getEndOffset(s),n.getMetadata(s)),s++;for(s<a&&n.getStartOffset(s)<t&&d(t,n.getMetadata(s));s<a&&n.getEndOffset(s)<r;)d(n.getEndOffset(s),n.getMetadata(s)&l|o&c),s++;if(s<a)d(r,n.getMetadata(s)&l|o&c),n.getEndOffset(s)===r&&s++;else{let e=Math.min(Math.max(0,s-1),a-1);d(r,n.getMetadata(e)&l|o&c)}}for(;s<a;)d(n.getEndOffset(s),n.getMetadata(s)),s++;return new BK(new Uint32Array(c),n.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,r=e.length-1;for(;n<r;){let i=n+Math.floor((r-n)/2);if(e[i].endLineNumber<t)n=i+1;else if(e[i].startLineNumber>t)r=i-1;else{for(;i>n&&e[i-1].startLineNumber<=t&&t<=e[i-1].endLineNumber;)i--;return i}}return n}acceptEdit(e,t,n,r,i){for(let a=0;a<this._pieces.length;a++){let o=this._pieces[a];o.acceptEdit(e,t,n,r,i),o.isEmpty()&&(this._pieces.splice(a,1),a--)}}},F4=class e{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,n){let r=null;if(t<this._len&&(r=this._lineTokens[t]),r!==null&&r!==t4)return new BK(r4(r),n,this._languageIdCodec);let i=new Uint32Array(2);return i[0]=n.length,i[1]=I4(this._languageIdCodec.encodeLanguageId(e)),new BK(i,n,this._languageIdCodec)}static _massageTokens(e,t,n){let r=n?r4(n):null;if(t===0){let t=!1;if(r&&r.length>1&&(t=LK.getLanguageId(r[1])!==e),!t)return t4}if(!r||r.length===0){let n=new Uint32Array(2);return n[0]=t,n[1]=I4(e),n.buffer}return r[r.length-2]=t,r.byteOffset===0&&r.byteLength===r.buffer.byteLength?r.buffer:r}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;let n=[];for(let e=0;e<t;e++)n[e]=null;this._lineTokens=It(this._lineTokens,e,n),this._len+=t}setTokens(t,n,r,i,a){let o=e._massageTokens(this._languageIdCodec.encodeLanguageId(t),r,i);this._ensureLine(n);let s=this._lineTokens[n];return this._lineTokens[n]=o,a?!e._equals(s,o):!1}static _equals(e,t){if(!e||!t)return!e&&!t;let n=r4(e),r=r4(t);if(n.length!==r.length)return!1;for(let e=0,t=n.length;e<t;e++)if(n[e]!==r[e])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new KK(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){let t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=n4.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=n4.deleteEnding(this._lineTokens[t],e.startColumn-1);let n=e.endLineNumber-1,r=null;n<this._len&&(r=n4.deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=n4.append(this._lineTokens[t],r),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(t===0&&n===0)return;let r=e.lineNumber-1;if(!(r>=this._len)){if(t===0){this._lineTokens[r]=n4.insert(this._lineTokens[r],e.column-1,n);return}this._lineTokens[r]=n4.deleteEnding(this._lineTokens[r],e.column-1),this._lineTokens[r]=n4.insert(this._lineTokens[r],e.column-1,n),this._insertLines(e.lineNumber,t)}}setMultilineTokens(e,t){if(e.length===0)return{changes:[]};let n=[];for(let r=0,i=e.length;r<i;r++){let i=e[r],a=0,o=0,s=!1;for(let e=i.startLineNumber;e<=i.endLineNumber;e++)s?(this.setTokens(t.getLanguageId(),e-1,t.getLineLength(e),i.getLineTokens(e),!1),o=e):this.setTokens(t.getLanguageId(),e-1,t.getLineLength(e),i.getLineTokens(e),!0)&&(s=!0,a=e,o=e);s&&n.push({fromLineNumber:a,toLineNumber:o})}return{changes:n}}};function I4(e){return(e<<IK.LANGUAGEID_OFFSET|FK.Other<<IK.TOKEN_TYPE_OFFSET|NK.None<<IK.FONT_STYLE_OFFSET|PK.DefaultForeground<<IK.FOREGROUND_OFFSET|PK.DefaultBackground<<IK.BACKGROUND_OFFSET|IK.BALANCED_BRACKETS_MASK)>>>0}var L4=class extends g2{constructor(e,t,n,r){super(e,t),this.getLanguageId=n,this._tokenizer=null,this._backgroundTokenizationState=r0.InProgress,this._onDidChangeBackgroundTokenizationState=this._register(new E),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event,this._defaultBackgroundTokenizer=null,this._backgroundTokenizer=this._register(new Ln),this._tokens=new F4(this._languageIdCodec),this._debugBackgroundTokenizer=this._register(new Ln),this._attachedViewStates=this._register(new Hn),this._register(Mq.onDidChange(e=>{let t=this.getLanguageId();e.changedLanguages.indexOf(t)!==-1&&this.todo_resetTokenization()})),this.todo_resetTokenization(),this._register(r.onDidChangeVisibleRanges(({view:e,state:t})=>{if(t){let n=this._attachedViewStates.get(e);n||(n=new h2(()=>this.refreshRanges(n.lineRanges)),this._attachedViewStates.set(e,n)),n.handleStateChange(t)}else this._attachedViewStates.deleteAndDispose(e)}))}todo_resetTokenization(e=!0){this._tokens.flush(),this._debugBackgroundTokens?.flush(),this._debugBackgroundStates&&=new u4(this._textModel.getLineCount()),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});let[t,n]=(()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];let e=Mq.get(this.getLanguageId());if(!e)return[null,null];let t;try{t=e.getInitialState()}catch(e){return p(e),[null,null]}return[e,t]})();if(t&&n?this._tokenizer=new c4(this._textModel.getLineCount(),t,this._textModel,this._languageIdCodec):this._tokenizer=null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){let e={setTokens:e=>{this.setTokens(e)},setFontInfo:e=>{this.setFontInfo(e)},backgroundTokenizationFinished:()=>{this._backgroundTokenizationState!==r0.Completed&&(this._backgroundTokenizationState=r0.Completed,this._onDidChangeBackgroundTokenizationState.fire())},setEndState:(e,t)=>{if(!this._tokenizer)return;let n=this._tokenizer.store.getFirstInvalidEndStateLineNumber();n!==null&&e>=n&&this._tokenizer?.store.setEndState(e,t)}};t&&t.createBackgroundTokenizer&&!t.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=t.createBackgroundTokenizer(this._textModel,e)),!this._backgroundTokenizer.value&&!this._textModel.isTooLargeForTokenization()&&(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new m4(this._tokenizer,e),this._defaultBackgroundTokenizer.handleChanges()),t?.backgroundTokenizerShouldOnlyVerifyTokens&&t.createBackgroundTokenizer?(this._debugBackgroundTokens=new F4(this._languageIdCodec),this._debugBackgroundStates=new u4(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=t.createBackgroundTokenizer(this._textModel,{setTokens:e=>{this._debugBackgroundTokens?.setMultilineTokens(e,this._textModel)},setFontInfo:e=>{this.setFontInfo(e)},backgroundTokenizationFinished(){},setEndState:(e,t)=>{this._debugBackgroundStates?.setEndState(e,t)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){this._defaultBackgroundTokenizer?.handleChanges()}handleDidChangeContent(e){if(e.isFlush)this.todo_resetTokenization(!1);else if(!e.isEolChange){for(let t of e.changes){let[e,n]=R$(t.text);this._tokens.acceptEdit(t.range,e,n),this._debugBackgroundTokens?.acceptEdit(t.range,e,n)}this._debugBackgroundStates?.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),this._defaultBackgroundTokenizer?.handleChanges()}}setTokens(e){let{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}setFontInfo(e){this._onDidChangeFontTokens.fire({changes:e})}refreshAllVisibleLineTokens(){let e=mY.joinMany([...this._attachedViewStates].map(([e,t])=>t.lineRanges));this.refreshRanges(e)}refreshRanges(e){for(let t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);let n=new a4,{heuristicTokens:r}=this._tokenizer.tokenizeHeuristically(n,e,t),i=this.setTokens(n.finalize());if(r)for(let e of i.changes)this._backgroundTokenizer.value?.requestTokens(e.fromLineNumber,e.toLineNumber+1);this._defaultBackgroundTokenizer?.checkFinished()}forceTokenization(e){let t=new a4;this._tokenizer?.updateTokensUntilLine(t,e),this.setTokens(t.finalize()),this._defaultBackgroundTokenizer?.checkFinished()}hasAccurateTokensForLine(e){return this._tokenizer?this._tokenizer.hasAccurateTokensForLine(e):!0}isCheapToTokenize(e){return this._tokenizer?this._tokenizer.isCheapToTokenize(e):!0}getLineTokens(e){let t=this._textModel.getLineContent(e),n=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,t);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){let r=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,t);!n.equals(r)&&this._debugBackgroundTokenizer.value?.reportMismatchingTokens&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return n}getTokenTypeIfInsertingCharacter(e,t,n){if(!this._tokenizer)return FK.Other;let r=this._textModel.validatePosition(new KK(e,t));return this.forceTokenization(r.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(r,n)}tokenizeLinesAt(e,t){return this._tokenizer?(this.forceTokenization(e),this._tokenizer.tokenizeLinesAt(e,t)):null}get hasTokens(){return this._tokens.hasTokens}},R4,z4=R4=class extends CQ{constructor(e,t,n,r,i,a,o,s){super(),this._textModel=e,this._bracketPairsTextModelPart=t,this._languageId=n,this._attachedViews=r,this._languageService=i,this._languageConfigurationService=a,this._instantiationService=o,this._treeSitterLibraryService=s,this._onDidChangeFontTokens=this._register(new E),this.onDidChangeFontTokens=this._onDidChangeFontTokens.event,this._languageIdObs=Oh(this,this._languageId),this._useTreeSitter=vh(this,e=>{let t=this._languageIdObs.read(e);return this._treeSitterLibraryService.supportsLanguage(t,e)}),this.tokens=vh(this,e=>{let t;return t=this._useTreeSitter.read(e)?e.store.add(this._instantiationService.createInstance(N4,this._languageIdObs,this._languageService.languageIdCodec,this._textModel,this._attachedViews.visibleLineRanges)):e.store.add(new L4(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews)),e.store.add(t.onDidChangeTokens(e=>{this._emitModelTokensChangedEvent(e)})),e.store.add(t.onDidChangeFontTokens(e=>{this._textModel._isDisposing()||this._onDidChangeFontTokens.fire(e)})),e.store.add(t.onDidChangeBackgroundTokenizationState(e=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()})),t});let c=!1;this.tokens.recomputeInitiallyAndOnChange(this._store,e=>{c&&e.todo_resetTokenization(),c=!0}),this._semanticTokens=new P4(this._languageService.languageIdCodec),this._onDidChangeLanguage=this._register(new E),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new E),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new E),this.onDidChangeTokens=this._onDidChangeTokens.event,this._onDidChangeFontTokens=this._register(new E),this.onDidChangeFontTokens=this._onDidChangeFontTokens.event}_hasListeners(){return this._onDidChangeLanguage.hasListeners()||this._onDidChangeLanguageConfiguration.hasListeners()||this._onDidChangeTokens.hasListeners()}handleLanguageConfigurationServiceChange(e){e.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}handleDidChangeContent(e){if(e.isFlush)this._semanticTokens.flush();else if(!e.isEolChange)for(let t of e.changes){let[e,n,r]=R$(t.text);this._semanticTokens.acceptEdit(t.range,e,n,r,t.text.length>0?t.text.charCodeAt(0):O.Null)}this.tokens.get().handleDidChangeContent(e)}handleDidChangeAttached(){this.tokens.get().handleDidChangeAttached()}getLineTokens(e){this.validateLineNumber(e);let t=this.tokens.get().getLineTokens(e);return this._semanticTokens.addSparseTokens(e,t)}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}validateLineNumber(e){if(e<1||e>this._textModel.getLineCount())throw new y(`Illegal value for lineNumber`)}get hasTokens(){return this.tokens.get().hasTokens}resetTokenization(){this.tokens.get().todo_resetTokenization()}get backgroundTokenizationState(){return this.tokens.get().backgroundTokenizationState}forceTokenization(e){this.validateLineNumber(e),this.tokens.get().forceTokenization(e)}hasAccurateTokensForLine(e){return this.validateLineNumber(e),this.tokens.get().hasAccurateTokensForLine(e)}isCheapToTokenize(e){return this.validateLineNumber(e),this.tokens.get().isCheapToTokenize(e)}tokenizeIfCheap(e){this.validateLineNumber(e),this.tokens.get().tokenizeIfCheap(e)}getTokenTypeIfInsertingCharacter(e,t,n){return this.tokens.get().getTokenTypeIfInsertingCharacter(e,t,n)}tokenizeLinesAt(e,t){return this.tokens.get().tokenizeLinesAt(e,t)}setSemanticTokens(e,t){this._semanticTokens.set(e,t,this._textModel),this._emitModelTokensChangedEvent({semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;let n=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:n.startLineNumber,toLineNumber:n.endLineNumber}]})}getWordAtPosition(e){this.assertNotDisposed();let t=this._textModel.validatePosition(e),n=this._textModel.getLineContent(t.lineNumber),r=this.getLineTokens(t.lineNumber),i=r.findTokenIndexAtOffset(t.column-1),[a,o]=R4._findLanguageBoundaries(r,i),s=kz(t.column,this.getLanguageConfiguration(r.getLanguageId(i)).getWordDefinition(),n.substring(a,o),a);if(s&&s.startColumn<=e.column&&e.column<=s.endColumn)return s;if(i>0&&a===t.column-1){let[a,o]=R4._findLanguageBoundaries(r,i-1),s=kz(t.column,this.getLanguageConfiguration(r.getLanguageId(i-1)).getWordDefinition(),n.substring(a,o),a);if(s&&s.startColumn<=e.column&&e.column<=s.endColumn)return s}return null}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}static _findLanguageBoundaries(e,t){let n=e.getLanguageId(t),r=0;for(let i=t;i>=0&&e.getLanguageId(i)===n;i--)r=e.getStartOffset(i);let i=e.getLineContent().length;for(let r=t,a=e.getCount();r<a&&e.getLanguageId(r)===n;r++)i=e.getEndOffset(r);return[r,i]}getWordUntilPosition(e){let t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:``,startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,t){let n=this._textModel.validatePosition(new KK(e,t)),r=this.getLineTokens(n.lineNumber);return r.getLanguageId(r.findTokenIndexAtOffset(n.column-1))}setLanguageId(e,t=`api`){if(this._languageId===e)return;let n={oldLanguage:this._languageId,newLanguage:e,source:t};this._languageId=e,this._languageIdObs.set(e,void 0),this._bracketPairsTextModelPart.handleDidChangeLanguage(n),this._onDidChangeLanguage.fire(n),this._onDidChangeLanguageConfiguration.fire({})}};z4=R4=t([n(4,FI),n(5,nX),n(6,Cy),n(7,O4)],z4);var B4;function V4(e){let t=new l2;return t.acceptChunk(e),t.finish()}function H4(e){return new Promise((t,n)=>{let r=new l2,i=!1;Mp(e,{onData:e=>{r.acceptChunk(typeof e==`string`?e:e.toString())},onError:e=>{i||(i=!0,n(e))},onEnd:()=>{i||(i=!0,t(r.finish()))}})})}function U4(e){let t=new l2,n;for(;typeof(n=e.read())==`string`;)t.acceptChunk(n);return t.finish()}function W4(e,t){let n;return n=typeof e==`string`?V4(e):pre(e)?U4(e):e,n.create(t)}var G4=0,K4=999,q4=1e4,J4=300,Y4=class{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;let e=[],t=0,n=0;do{let r=this._source.read();if(r===null)return this._eos=!0,t===0?null:e.join(``);if(r.length>0&&(e[t++]=r,n+=r.length),n>=64*1024)return e.join(``)}while(!0)}},X4=()=>{throw Error(`Invalid change accessor`)},Z4;(function(e){e[e.Relaxed=0]=`Relaxed`,e[e.SurrogatePairs=1]=`SurrogatePairs`})(Z4||={});var Q4=class extends w{static#e=B4=this;static#t=this._MODEL_SYNC_LIMIT=50*1024*1024;static#n=this.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;static#r=this.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3;static#i=this.LARGE_FILE_HEAP_OPERATION_THRESHOLD=256*1024*1024;static#a=this.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:wz.tabSize,indentSize:wz.indentSize,insertSpaces:wz.insertSpaces,detectIndentation:!1,defaultEOL:EL.LF,trimAutoWhitespace:wz.trimAutoWhitespace,largeFileOptimizations:wz.largeFileOptimizations,bracketPairColorizationOptions:wz.bracketPairColorizationOptions};static resolveOptions(e,t){if(t.detectIndentation){let n=L0(e,t.tabSize,t.insertSpaces);return new OL({tabSize:n.tabSize,indentSize:`tabSize`,insertSpaces:n.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new OL(t)}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}get onDidChangeOptions(){return this._onDidChangeOptions.event}get onDidChangeAttached(){return this._onDidChangeAttached.event}get onDidChangeLineHeight(){return this._onDidChangeLineHeight.event}get onDidChangeFont(){return this._onDidChangeFont.event}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}onDidChangeContentOrInjectedText(e){return Fn(this._eventEmitter.fastEvent(t=>e(t)),this._onDidChangeInjectedText.event(t=>e(t)))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}constructor(e,t,n,r=null,i,a,o,s){super(),this._undoRedoService=i,this._languageService=a,this._languageConfigurationService=o,this.instantiationService=s,this._onWillDispose=this._register(new E),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new p3((e,t,n)=>this.handleBeforeFireDecorationsChangedEvent(e,t,n))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new E),this._onDidChangeAttached=this._register(new E),this._onDidChangeInjectedText=this._register(new E),this._onDidChangeLineHeight=this._register(new E),this._onDidChangeFont=this._register(new E),this._eventEmitter=this._register(new m3),this._languageSelectionListener=this._register(new Ln),this._deltaDecorationCallCnt=0,this._attachedViews=new f2,G4++,this.id=`$model`+G4,this.isForSimpleWidget=n.isForSimpleWidget,r==null?this._associatedResource=k.parse(`inmemory://model/`+G4):this._associatedResource=r,this._attachedEditorCount=0;let{textBuffer:c,disposable:l}=W4(e,n.defaultEOL);this._buffer=c,this._bufferDisposable=l;let u=this._buffer.getLineCount(),d=this._buffer.getValueLengthInRange(new X(1,1,u,this._buffer.getLineLength(u)+1),TL.TextDefined);n.largeFileOptimizations?(this._isTooLargeForTokenization=d>B4.LARGE_FILE_SIZE_THRESHOLD||u>B4.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=d>B4.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._options=B4.resolveOptions(this._buffer,n);let f=typeof t==`string`?t:t.languageId;typeof t!=`string`&&(this._languageSelectionListener.value=t.onDidChange(()=>this._setLanguage(t.languageId))),this._bracketPairs=this._register(new p0(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new OQ(this,this._languageConfigurationService)),this._decorationProvider=this._register(new v0(this)),this._tokenizationTextModelPart=this.instantiationService.createInstance(z4,this,this._bracketPairs,f,this._attachedViews),this._fontTokenDecorationsProvider=this._register(new H2(this,this._tokenizationTextModelPart)),this._isTooLargeForSyncing=d>B4._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=Fo(G4),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new r3,this._commandManager=new P0(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._register(this._fontTokenDecorationsProvider.onDidChangeLineHeight(e=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._fireOnDidChangeLineHeight(e),this._onDidChangeDecorations.endDeferredEmit()})),this._register(this._fontTokenDecorationsProvider.onDidChangeFont(e=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._fireOnDidChangeFont(e),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(f),this._register(this._languageConfigurationService.onDidChange(e=>{this._bracketPairs.handleLanguageConfigurationServiceChange(e),this._tokenizationTextModelPart.handleLanguageConfigurationServiceChange(e)}))}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;let e=new s2([],``,`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=w.None}_hasListeners(){return this._onWillDispose.hasListeners()||this._onDidChangeDecorations.hasListeners()||this._tokenizationTextModelPart._hasListeners()||this._onDidChangeOptions.hasListeners()||this._onDidChangeAttached.hasListeners()||this._onDidChangeInjectedText.hasListeners()||this._onDidChangeLineHeight.hasListeners()||this._onDidChangeFont.hasListeners()||this._eventEmitter.hasListeners()}_assertNotDisposed(){if(this._isDisposed)throw new y(`Model is disposed!`)}equalsTextBuffer(e){return this._assertNotDisposed(),this._buffer.equals(e)}getTextBuffer(){return this._assertNotDisposed(),this._buffer}_emitContentChangedEvent(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._fontTokenDecorationsProvider.handleDidChangeContent(t),this._eventEmitter.fire(new JQ(e,t)))}setValue(e,t=G$.setValue()){if(this._assertNotDisposed(),e==null)throw re();let{textBuffer:n,disposable:r}=W4(e,this._options.defaultEOL);this._setValueFromTextBuffer(n,r,t)}_createContentChanged2(e,t,n,r,i,a,o,s,c,l){return{changes:[{range:e,rangeOffset:t,rangeLength:n,text:i}],eol:this._buffer.getEOL(),isEolChange:c,versionId:this.getVersionId(),isUndoing:a,isRedoing:o,isFlush:s,detailedReasons:[l],detailedReasonsChangeLengths:[1]}}_setValueFromTextBuffer(e,t,n){this._assertNotDisposed();let r=this.getFullModelRange(),i=this.getValueLengthInRange(r),a=this.getLineCount(),o=this.getLineMaxColumn(a);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new r3,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new WQ([new IQ],this._versionId,!1,!1),this._createContentChanged2(new X(1,1,a,o),0,i,new KK(a,o),this.getValue(),!1,!1,!0,!1,n))}setEOL(e){this._assertNotDisposed();let t=e===DL.CRLF?`\r
`:`
`;if(this._buffer.getEOL()===t)return;let n=this.getFullModelRange(),r=this.getValueLengthInRange(n),i=this.getLineCount(),a=this.getLineMaxColumn(i);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new WQ([new UQ],this._versionId,!1,!1),this._createContentChanged2(new X(1,1,i,a),0,r,new KK(i,a),this.getValue(),!1,!1,!1,!0,G$.eolChange()))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){let e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let n=0,r=t.length;n<r;n++){let r=t[n],i=r.range,a=r.cachedAbsoluteStart-r.start,o=this._buffer.getOffsetAt(i.startLineNumber,i.startColumn),s=this._buffer.getOffsetAt(i.endLineNumber,i.endColumn);r.cachedAbsoluteStart=o,r.cachedAbsoluteEnd=s,r.cachedVersionId=e,r.start=o-a,r.end=s-a,N$(r)}}onBeforeAttached(){return this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(e){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(e)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0,n=this._buffer.getLineCount();for(let r=1;r<=n;r++){let n=this._buffer.getLineLength(r);n>=q4?t+=n:e+=n}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();let t=e.tabSize===void 0?this._options.tabSize:e.tabSize,n=e.indentSize===void 0?this._options.originalIndentSize:e.indentSize,r=e.insertSpaces===void 0?this._options.insertSpaces:e.insertSpaces,i=e.trimAutoWhitespace===void 0?this._options.trimAutoWhitespace:e.trimAutoWhitespace,a=e.bracketColorizationOptions===void 0?this._options.bracketPairColorizationOptions:e.bracketColorizationOptions,o=new OL({tabSize:t,indentSize:n,insertSpaces:r,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:i,bracketPairColorizationOptions:a});if(this._options.equals(o))return;let s=this._options.createChangeEvent(o);this._options=o,this._bracketPairs.handleDidChangeOptions(s),this._decorationProvider.handleDidChangeOptions(s),this._onDidChangeOptions.fire(s)}detectIndentation(e,t){this._assertNotDisposed();let n=L0(this._buffer,t,e);this.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),oZ(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){let t=this.findMatches(So.source,!1,!0,!1,null,!1,Ca.MAX_SAFE_SMALL_INTEGER);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(e=>({range:e.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();let t=this._validatePosition(e.lineNumber,e.column,Z4.Relaxed);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();let t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId+=1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new y(`Operation would exceed heap memory limits`);let n=this.getFullModelRange(),r=this.getValueInRange(n,e);return t?this._buffer.getBOM()+r:r}createSnapshot(e=!1){return new Y4(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();let n=this.getFullModelRange(),r=this.getValueLengthInRange(n,e);return t?this._buffer.getBOM().length+r:r}getValueInRange(e,t=TL.TextDefined){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=TL.TextDefined){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=TL.TextDefined){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new y(`Illegal value for lineNumber`);return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new y(`Illegal value for lineNumber`);return this._buffer.getLineLength(e)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new y(`Operation would exceed heap memory limits`);return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?DL.LF:DL.CRLF}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new y(`Illegal value for lineNumber`);return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new y(`Illegal value for lineNumber`);return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new y(`Illegal value for lineNumber`);return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){let t=this._buffer.getLineCount(),n=e.startLineNumber,r=e.startColumn,i=Math.floor(typeof n==`number`&&!isNaN(n)?n:1),a=Math.floor(typeof r==`number`&&!isNaN(r)?r:1);if(i<1)i=1,a=1;else if(i>t)i=t,a=this.getLineMaxColumn(i);else if(a<=1)a=1;else{let e=this.getLineMaxColumn(i);a>=e&&(a=e)}let o=e.endLineNumber,s=e.endColumn,c=Math.floor(typeof o==`number`&&!isNaN(o)?o:1),l=Math.floor(typeof s==`number`&&!isNaN(s)?s:1);if(c<1)c=1,l=1;else if(c>t)c=t,l=this.getLineMaxColumn(c);else if(l<=1)l=1;else{let e=this.getLineMaxColumn(c);l>=e&&(l=e)}return n===i&&r===a&&o===c&&s===l&&e instanceof X&&!(e instanceof sX)?e:new X(i,a,c,l)}_isValidPosition(e,t,n){return typeof e!=`number`||typeof t!=`number`||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t||e>this._buffer.getLineCount()?!1:t===1?!0:!(t>this.getLineMaxColumn(e)||n===Z4.SurrogatePairs&&oo(this._buffer.getLineCharCode(e,t-2)))}_validatePosition(e,t,n){let r=Math.floor(typeof e==`number`&&!isNaN(e)?e:1),i=Math.floor(typeof t==`number`&&!isNaN(t)?t:1),a=this._buffer.getLineCount();if(r<1)return new KK(1,1);if(r>a)return new KK(a,this.getLineMaxColumn(a));if(i<=1)return new KK(r,1);let o=this.getLineMaxColumn(r);return i>=o?new KK(r,o):n===Z4.SurrogatePairs&&oo(this._buffer.getLineCharCode(r,i-2))?new KK(r,i-1):new KK(r,i)}validatePosition(e){let t=Z4.SurrogatePairs;return this._assertNotDisposed(),e instanceof KK&&this._isValidPosition(e.lineNumber,e.column,t)?e:this._validatePosition(e.lineNumber,e.column,t)}isValidRange(e){return this._isValidRange(e,Z4.SurrogatePairs)}_isValidRange(e,t){let n=e.startLineNumber,r=e.startColumn,i=e.endLineNumber,a=e.endColumn;if(!this._isValidPosition(n,r,Z4.Relaxed)||!this._isValidPosition(i,a,Z4.Relaxed))return!1;if(t===Z4.SurrogatePairs){let e=r>1?this._buffer.getLineCharCode(n,r-2):0,t=a>1&&a<=this._buffer.getLineLength(i)?this._buffer.getLineCharCode(i,a-2):0,o=oo(e),s=oo(t);return!o&&!s}return!0}validateRange(e){let t=Z4.SurrogatePairs;if(this._assertNotDisposed(),e instanceof X&&!(e instanceof sX)&&this._isValidRange(e,t))return e;let n=this._validatePosition(e.startLineNumber,e.startColumn,Z4.Relaxed),r=this._validatePosition(e.endLineNumber,e.endColumn,Z4.Relaxed),i=n.lineNumber,a=n.column,o=r.lineNumber,s=r.column;if(t===Z4.SurrogatePairs){let e=a>1?this._buffer.getLineCharCode(i,a-2):0,t=s>1&&s<=this._buffer.getLineLength(o)?this._buffer.getLineCharCode(o,s-2):0,n=oo(e),r=oo(t);return!n&&!r?new X(i,a,o,s):i===o&&a===s?new X(i,a-1,o,s-1):n&&r?new X(i,a-1,o,s+1):n?new X(i,a-1,o,s):new X(i,a,o,s+1)}return new X(i,a,o,s)}modifyPosition(e,t){this._assertNotDisposed();let n=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,n)))}getFullModelRange(){this._assertNotDisposed();let e=this.getLineCount();return new X(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,n,r){return this._buffer.findMatchesLineByLine(e,t,n,r)}findMatches(e,t,n,r,i,a,o=K4){this._assertNotDisposed();let s=null;t!==null&&typeof t!=`boolean`&&(Array.isArray(t)||(t=[t]),t.every(e=>X.isIRange(e))&&(s=t.map(e=>this.validateRange(e)))),s===null&&(s=[this.getFullModelRange()]),s=s.sort((e,t)=>e.startLineNumber-t.startLineNumber||e.startColumn-t.startColumn);let c=[];c.push(s.reduce((e,t)=>X.areIntersecting(e,t)?e.plusRange(t):(c.push(e),t)));let l;if(!n&&e.indexOf(`
`)<0){let t=new pX(e,n,r,i).parseSearchRequest();if(!t)return[];l=e=>this.findMatchesLineByLine(e,t,a,o)}else l=t=>_X.findMatches(this,new pX(e,n,r,i),t,a,o);return c.map(l).reduce((e,t)=>e.concat(t),[])}findNextMatch(e,t,n,r,i,a){this._assertNotDisposed();let o=this.validatePosition(t);if(!n&&e.indexOf(`
`)<0){let t=new pX(e,n,r,i).parseSearchRequest();if(!t)return null;let s=this.getLineCount(),c=new X(o.lineNumber,o.column,s,this.getLineMaxColumn(s)),l=this.findMatchesLineByLine(c,t,a,1);return _X.findNextMatch(this,new pX(e,n,r,i),o,a),l.length>0||(c=new X(1,1,o.lineNumber,this.getLineMaxColumn(o.lineNumber)),l=this.findMatchesLineByLine(c,t,a,1),l.length>0)?l[0]:null}return _X.findNextMatch(this,new pX(e,n,r,i),o,a)}findPreviousMatch(e,t,n,r,i,a){this._assertNotDisposed();let o=this.validatePosition(t);return _X.findPreviousMatch(this,new pX(e,n,r,i),o,a)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?DL.LF:DL.CRLF)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){if(e instanceof PL)return e;let t=this.validateRange(e.range),n=e.text;if(n){let e=n.length>0&&n.charCodeAt(n.length-1)===O.CarriageReturn;this.getEOL()===`\r
`&&e&&t.endColumn===this.getLineMaxColumn(t.endLineNumber)&&(n=n.substring(0,n.length-1))}return new PL(e.identifier||null,t,n,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){let t=[];for(let n=0,r=e.length;n<r;n++)t[n]=this._validateEditOperation(e[n]);return t}edit(e,t){this.pushEditOperations(null,e.replacements.map(e=>({range:e.range,text:e.text})),null)}pushEditOperations(e,t,n,r,i){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),n,r,i)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,n,r,i){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){let n=t.map(e=>({range:this.validateRange(e.range),text:e.text})),r=!0;if(e)for(let t=0,i=e.length;t<i;t++){let i=e[t],a=!1;for(let e=0,t=n.length;e<t;e++){let t=n[e].range,r=t.startLineNumber>i.endLineNumber,o=i.startLineNumber>t.endLineNumber;if(!r&&!o){a=!0;break}}if(!a){r=!1;break}}if(r)for(let e=0,r=this._trimAutoWhitespaceLines.length;e<r;e++){let r=this._trimAutoWhitespaceLines[e],i=this.getLineMaxColumn(r),a=!0;for(let e=0,t=n.length;e<t;e++){let t=n[e].range,o=n[e].text;if(!(r<t.startLineNumber||r>t.endLineNumber)&&!(r===t.startLineNumber&&t.startColumn===i&&t.isEmpty()&&o&&o.length>0&&o.charAt(0)===`
`)&&!(r===t.startLineNumber&&t.startColumn===1&&t.isEmpty()&&o&&o.length>0&&o.charAt(o.length-1)===`
`)){a=!1;break}}if(a){let e=new X(r,1,r,i);t.push(new PL(null,e,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,n,r,i)}_applyUndo(e,t,n,r){let i=e.map(e=>{let t=this.getPositionAt(e.newPosition),n=this.getPositionAt(e.newEnd);return{range:new X(t.lineNumber,t.column,n.lineNumber,n.column),text:e.oldText}});this._applyUndoRedoEdits(i,t,!0,!1,n,r)}_applyRedo(e,t,n,r){let i=e.map(e=>{let t=this.getPositionAt(e.oldPosition),n=this.getPositionAt(e.oldEnd);return{range:new X(t.lineNumber,t.column,n.lineNumber,n.column),text:e.newText}});this._applyUndoRedoEdits(i,t,!1,!0,n,r)}_applyUndoRedoEdits(e,t,n,r,i,a){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=n,this._isRedoing=r,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(i)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(a),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t,n){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();let r=this._validateEditOperations(e);return this._doApplyEdits(r,t??!1,n??G$.applyEdits())}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t,n){let r=this._buffer.getLineCount(),i=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),a=this._buffer.getLineCount(),o=i.changes;if(this._trimAutoWhitespaceLines=i.trimAutoWhitespaceLineNumbers,o.length!==0){for(let e=0,t=o.length;e<t;e++){let t=o[e];this._decorationsTree.acceptReplace(t.rangeOffset,t.rangeLength,t.text.length,t.forceMoveMarkers)}let e=[];this._increaseVersionId();let t=r;for(let n=0,r=o.length;n<r;n++){let r=o[n],[i]=R$(r.text);this._onDidChangeDecorations.fire();let s=r.range.startLineNumber,c=r.range.endLineNumber,l=c-s,u=i,d=Math.min(l,u),f=u-l,p=a-t-f+s,m=p,h=p+u,g=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new KK(m,1)),this.getOffsetAt(new KK(h,this.getLineMaxColumn(h))),0),_=LQ.fromDecorations(g),v=new $t(_);for(let t=d;t>=0;t--){let n=s+t,r=p+t;v.takeFromEndWhile(e=>e.lineNumber>r);let i=v.takeFromEndWhile(e=>e.lineNumber===r);e.push(new RQ(n,this.getLineContent(r),i))}if(d<l){let t=s+d;e.push(new VQ(t+1,c))}if(d<u){let n=new $t(_),r=s+d,i=u-d,o=a-t-i+r+1,c=[],l=[];for(let e=0;e<i;e++){let t=o+e;l[e]=this.getLineContent(t),n.takeWhile(e=>e.lineNumber<t),c[e]=n.takeWhile(e=>e.lineNumber===t)}e.push(new HQ(r+1,s+u,l,c))}t+=f}this._emitContentChangedEvent(new WQ(e,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:o,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1,detailedReasons:[n],detailedReasonsChangeLengths:[o.length]})}return i.reverseEdits===null?void 0:i.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e,t,n){if(e&&e.size>0){let t=Array.from(e).map(e=>new RQ(e,this.getLineContent(e),this._getInjectedTextInLine(e)));this._onDidChangeInjectedText.fire(new GQ(t))}this._fireOnDidChangeLineHeight(t),this._fireOnDidChangeFont(n)}_fireOnDidChangeLineHeight(e){if(e&&e.size>0){let t=Array.from(e).map(e=>new zQ(e.ownerId,e.decorationId,e.lineNumber,e.lineHeight));this._onDidChangeLineHeight.fire(new KQ(t))}}_fireOnDidChangeFont(e){if(e&&e.size>0){let t=Array.from(e).map(e=>new BQ(e.ownerId,e.lineNumber));this._onDidChangeFont.fire(new qQ(t))}}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){let n={addDecoration:(t,n)=>this._deltaDecorationsImpl(e,[],[{range:t,options:n}])[0],changeDecoration:(t,n)=>{this._changeDecorationImpl(e,t,n)},changeDecorationOptions:(t,n)=>{this._changeDecorationOptionsImpl(e,t,f3(n))},removeDecoration:t=>{this._deltaDecorationsImpl(e,[t],[])},deltaDecorations:(t,n)=>t.length===0&&n.length===0?[]:this._deltaDecorationsImpl(e,t,n)},r=null;try{r=t(n)}catch(e){p(e)}return n.addDecoration=X4,n.changeDecoration=X4,n.changeDecorationOptions=X4,n.removeDecoration=X4,n.deltaDecorations=X4,r}deltaDecorations(e,t,n=0){if(this._assertNotDisposed(),e||=[],e.length===0&&t.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn(`Invoking deltaDecorations recursively could lead to leaking decorations.`),p(Error(`Invoking deltaDecorations recursively could lead to leaking decorations.`))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(n,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,n){let r=e?this._decorations[e]:null;if(!r)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:d3[n]}],!0)[0]:null;if(!t)return this._decorationsTree.delete(r),delete this._decorations[r.id],null;let i=this._validateRangeRelaxedNoAllocations(t),a=this._buffer.getOffsetAt(i.startLineNumber,i.startColumn),o=this._buffer.getOffsetAt(i.endLineNumber,i.endColumn);return this._decorationsTree.delete(r),r.reset(this.getVersionId(),a,o,i),r.setOptions(d3[n]),this._decorationsTree.insert(r),r.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;let t=this._decorationsTree.collectNodesFromOwner(e);for(let e=0,n=t.length;e<n;e++){let n=t[e];this._decorationsTree.delete(n),delete this._decorations[n.id]}}getDecorationOptions(e){let t=this._decorations[e];return t?t.options:null}getDecorationRange(e){let t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,n=!1,r=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n,r)}getLinesDecorations(e,t,n=0,r=!1,i=!1,a=!1){let o=this.getLineCount(),s=Math.min(o,Math.max(1,e)),c=Math.min(o,Math.max(1,t)),l=new X(s,1,c,this.getLineMaxColumn(c)),u=this._getDecorationsInRange(l,n,r,i,a);return Bt(u,this._decorationProvider.getDecorationsInRange(l,n,r,i)),Bt(u,this._fontTokenDecorationsProvider.getDecorationsInRange(l,n,r,i)),u}getDecorationsInRange(e,t=0,n=!1,r=!1,i=!1,a=!1){let o=this.validateRange(e),s=this._getDecorationsInRange(o,t,n,r,a);return Bt(s,this._decorationProvider.getDecorationsInRange(o,t,n,r,i)),Bt(s,this._fontTokenDecorationsProvider.getDecorationsInRange(o,t,n,r,i)),s}getOverviewRulerDecorations(e=0,t=!1,n=!1){return this._decorationsTree.getAll(this,e,t,n,!0,!1)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}getCustomLineHeightsDecorations(e=0){let t=this._decorationsTree.getAllCustomLineHeights(this,e);return Bt(t,this._fontTokenDecorationsProvider.getAllDecorations(e)),t}_getInjectedTextInLine(e){let t=this._buffer.getOffsetAt(e,1),n=t+this._buffer.getLineLength(e),r=this._decorationsTree.getInjectedTextInInterval(this,t,n,0);return LQ.fromDecorations(r).filter(t=>t.lineNumber===e)}getFontDecorationsInRange(e,t=0){let n=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),r=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getFontDecorationsInInterval(this,n,r,t)}getAllDecorations(e=0,t=!1,n=!1){let r=this._decorationsTree.getAll(this,e,t,n,!1,!1);return r=r.concat(this._decorationProvider.getAllDecorations(e,t)),r=r.concat(this._fontTokenDecorationsProvider.getAllDecorations(e,t)),r}getAllMarginDecorations(e=0){return this._decorationsTree.getAll(this,e,!1,!1,!1,!0)}_getDecorationsInRange(e,t,n,r,i){let a=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),o=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,a,o,t,n,r,i)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t,n){let r=this._decorations[t];if(!r)return;if(r.options.after){let e=this.getDecorationRange(t);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.endLineNumber)}if(r.options.before){let e=this.getDecorationRange(t);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.startLineNumber)}if(r.options.lineHeight!==null){let n=this.getDecorationRange(t);this._onDidChangeDecorations.recordLineAffectedByLineHeightChange(e,t,n.startLineNumber,null)}if(r.options.affectsFont){let n=this.getDecorationRange(t);this._onDidChangeDecorations.recordLineAffectedByFontChange(e,r.id,n.startLineNumber)}let i=this._validateRangeRelaxedNoAllocations(n),a=this._buffer.getOffsetAt(i.startLineNumber,i.startColumn),o=this._buffer.getOffsetAt(i.endLineNumber,i.endColumn);this._decorationsTree.delete(r),r.reset(this.getVersionId(),a,o,i),this._decorationsTree.insert(r),this._onDidChangeDecorations.checkAffectedAndFire(r.options),r.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(i.endLineNumber),r.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(i.startLineNumber),r.options.lineHeight!==null&&this._onDidChangeDecorations.recordLineAffectedByLineHeightChange(e,t,i.startLineNumber,r.options.lineHeight),r.options.affectsFont&&this._onDidChangeDecorations.recordLineAffectedByFontChange(e,r.id,i.startLineNumber)}_changeDecorationOptionsImpl(e,t,n){let r=this._decorations[t];if(!r)return;let i=!!(r.options.overviewRuler&&r.options.overviewRuler.color),a=!!(n.overviewRuler&&n.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(r.options),this._onDidChangeDecorations.checkAffectedAndFire(n),r.options.after||n.after){let e=this._decorationsTree.getNodeRange(this,r);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.endLineNumber)}if(r.options.before||n.before){let e=this._decorationsTree.getNodeRange(this,r);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.startLineNumber)}if(r.options.lineHeight!==null||n.lineHeight!==null){let i=this._decorationsTree.getNodeRange(this,r);this._onDidChangeDecorations.recordLineAffectedByLineHeightChange(e,t,i.startLineNumber,n.lineHeight)}if(r.options.affectsFont||n.affectsFont){let n=this._decorationsTree.getNodeRange(this,r);this._onDidChangeDecorations.recordLineAffectedByFontChange(e,t,n.startLineNumber)}let o=i!==a,s=t3(n)!==n3(r);o||s?(this._decorationsTree.delete(r),r.setOptions(n),this._decorationsTree.insert(r)):r.setOptions(n)}_deltaDecorationsImpl(e,t,n,r=!1){let i=this.getVersionId(),a=t.length,o=0,s=n.length,c=0;this._onDidChangeDecorations.beginDeferredEmit();try{let l=Array(s);for(;o<a||c<s;){let u=null;if(o<a){let n;do n=t[o++],u=this._decorations[n];while(!u&&o<a);if(u){if(u.options.after){let e=this._decorationsTree.getNodeRange(this,u);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.endLineNumber)}if(u.options.before){let e=this._decorationsTree.getNodeRange(this,u);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.startLineNumber)}if(u.options.lineHeight!==null){let t=this._decorationsTree.getNodeRange(this,u);this._onDidChangeDecorations.recordLineAffectedByLineHeightChange(e,n,t.startLineNumber,null)}if(u.options.affectsFont){let t=this._decorationsTree.getNodeRange(this,u);this._onDidChangeDecorations.recordLineAffectedByFontChange(e,n,t.startLineNumber)}this._decorationsTree.delete(u),r||this._onDidChangeDecorations.checkAffectedAndFire(u.options)}}if(c<s){if(!u){let e=++this._lastDecorationId,t=`${this._instanceId};${e}`;u=new f$(t,0,0),this._decorations[t]=u}let t=n[c],a=this._validateRangeRelaxedNoAllocations(t.range),o=f3(t.options),s=this._buffer.getOffsetAt(a.startLineNumber,a.startColumn),d=this._buffer.getOffsetAt(a.endLineNumber,a.endColumn);u.ownerId=e,u.reset(i,s,d,a),u.setOptions(o),u.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber),u.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber),u.options.lineHeight!==null&&this._onDidChangeDecorations.recordLineAffectedByLineHeightChange(e,u.id,a.startLineNumber,u.options.lineHeight),u.options.affectsFont&&this._onDidChangeDecorations.recordLineAffectedByFontChange(e,u.id,a.startLineNumber),r||this._onDidChangeDecorations.checkAffectedAndFire(o),this._decorationsTree.insert(u),l[c]=u.id,c++}else u&&delete this._decorations[u.id]}return l}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(e,t){typeof e==`string`?(this._languageSelectionListener.clear(),this._setLanguage(e,t)):(this._languageSelectionListener.value=e.onDidChange(()=>this._setLanguage(e.languageId,t)),this._setLanguage(e.languageId,t))}_setLanguage(e,t){this.tokenization.setLanguageId(e,t),this._languageService.requestRichLanguageFeatures(e)}getLanguageIdAtPosition(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,t){return e}getLineIndentColumn(e){return $4(this.getLineContent(e))+1}toString(){return`TextModel(${this.uri.toString()})`}};Q4=B4=t([n(4,I$),n(5,FI),n(6,nX),n(7,Cy)],Q4);function $4(e){let t=0;for(let n of e)if(n===` `||n===`	`)t++;else break;return t}function e3(e){return!!(e.options.overviewRuler&&e.options.overviewRuler.color)}function t3(e){return!!e.after||!!e.before}function n3(e){return!!e.options.after||!!e.options.before}var r3=class{constructor(){this._decorationsTree0=new m$,this._decorationsTree1=new m$,this._injectedTextDecorationsTree=new m$}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(let n of t)n.range===null&&(n.range=e.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd));return t}getAllInInterval(e,t,n,r,i,a,o){let s=e.getVersionId(),c=this._intervalSearch(t,n,r,i,a,s,o);return this._ensureNodesHaveRanges(e,c)}_intervalSearch(e,t,n,r,i,a,o){let s=this._decorationsTree0.intervalSearch(e,t,n,r,i,a,o),c=this._decorationsTree1.intervalSearch(e,t,n,r,i,a,o),l=this._injectedTextDecorationsTree.intervalSearch(e,t,n,r,i,a,o);return s.concat(c).concat(l)}getInjectedTextInInterval(e,t,n,r){let i=e.getVersionId(),a=this._injectedTextDecorationsTree.intervalSearch(t,n,r,!1,!1,i,!1);return this._ensureNodesHaveRanges(e,a).filter(e=>e.options.showIfCollapsed||!e.range.isEmpty())}getFontDecorationsInInterval(e,t,n,r){let i=e.getVersionId(),a=this._decorationsTree0.intervalSearch(t,n,r,!1,!1,i,!1);return this._ensureNodesHaveRanges(e,a).filter(e=>e.options.affectsFont)}getAllInjectedText(e,t){let n=e.getVersionId(),r=this._injectedTextDecorationsTree.search(t,!1,!1,n,!1);return this._ensureNodesHaveRanges(e,r).filter(e=>e.options.showIfCollapsed||!e.range.isEmpty())}getAllCustomLineHeights(e,t){let n=e.getVersionId(),r=this._search(t,!1,!1,!1,n,!1);return this._ensureNodesHaveRanges(e,r).filter(e=>typeof e.options.lineHeight==`number`)}getAll(e,t,n,r,i,a){let o=e.getVersionId(),s=this._search(t,n,r,i,o,a);return this._ensureNodesHaveRanges(e,s)}_search(e,t,n,r,i,a){if(r)return this._decorationsTree1.search(e,t,n,i,a);{let r=this._decorationsTree0.search(e,t,n,i,a),o=this._decorationsTree1.search(e,t,n,i,a),s=this._injectedTextDecorationsTree.search(e,t,n,i,a);return r.concat(o).concat(s)}}collectNodesFromOwner(e){let t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),r=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(r)}collectNodesPostOrder(){let e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){n3(e)?this._injectedTextDecorationsTree.insert(e):e3(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){n3(e)?this._injectedTextDecorationsTree.delete(e):e3(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){let n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){n3(e)?this._injectedTextDecorationsTree.resolveNode(e,t):e3(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,r){this._decorationsTree0.acceptReplace(e,t,n,r),this._decorationsTree1.acceptReplace(e,t,n,r),this._injectedTextDecorationsTree.acceptReplace(e,t,n,r)}};function i3(e){return e.replace(/[^a-z0-9\-_]/gi,` `)}var a3=class{constructor(e){this.color=e.color||``,this.darkColor=e.darkColor||``}},o3=class extends a3{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position==`number`?e.position:yL.Center}getColor(e){return this._resolvedColor||(yr(e.type)&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e==`string`)return e;let n=e?t.getColor(e.id):null;return n?n.toString():``}},s3=class{constructor(e){this.position=e?.position??bL.Center,this.persistLane=e?.persistLane}},c3=class extends a3{constructor(e){super(e),this.position=e.position,this.sectionHeaderStyle=e.sectionHeaderStyle??null,this.sectionHeaderText=e.sectionHeaderText??null}getColor(e){return this._resolvedColor||(yr(e.type)&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e==`string`?M.fromHex(e):t.getColor(e.id)}},l3=class e{static from(t){return t instanceof e?t:new e(t)}constructor(e){this.content=e.content||``,this.tokens=e.tokens??null,this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}},u3=class e{static register(t){return new e(t)}static createDynamic(t){return new e(t)}constructor(e){this.description=e.description,this.blockClassName=e.blockClassName?i3(e.blockClassName):null,this.blockDoesNotCollapse=e.blockDoesNotCollapse??null,this.blockIsAfterEnd=e.blockIsAfterEnd??null,this.blockPadding=e.blockPadding??null,this.stickiness=e.stickiness||AL.AlwaysGrowsWhenTypingAtEdges,this.zIndex=e.zIndex||0,this.className=e.className?i3(e.className):null,this.shouldFillLineOnLineBreak=e.shouldFillLineOnLineBreak??null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=e.lineNumberHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.lineHeight=e.lineHeight?Math.min(e.lineHeight,J4):null,this.fontSize=e.fontSize||null,this.affectsFont=!!e.fontSize||!!e.fontFamily||!!e.fontWeight||!!e.fontStyle,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new o3(e.overviewRuler):null,this.minimap=e.minimap?new c3(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new s3(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?i3(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?i3(e.linesDecorationsClassName):null,this.lineNumberClassName=e.lineNumberClassName?i3(e.lineNumberClassName):null,this.linesDecorationsTooltip=e.linesDecorationsTooltip?ja(e.linesDecorationsTooltip):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?i3(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?i3(e.marginClassName):null,this.inlineClassName=e.inlineClassName?i3(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?i3(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?i3(e.afterContentClassName):null,this.after=e.after?l3.from(e.after):null,this.before=e.before?l3.from(e.before):null,this.hideInCommentTokens=e.hideInCommentTokens??!1,this.hideInStringTokens=e.hideInStringTokens??!1,this.textDirection=e.textDirection??null}};u3.EMPTY=u3.register({description:`empty`});var d3=[u3.register({description:`tracked-range-always-grows-when-typing-at-edges`,stickiness:AL.AlwaysGrowsWhenTypingAtEdges}),u3.register({description:`tracked-range-never-grows-when-typing-at-edges`,stickiness:AL.NeverGrowsWhenTypingAtEdges}),u3.register({description:`tracked-range-grows-only-when-typing-before`,stickiness:AL.GrowsOnlyWhenTypingBefore}),u3.register({description:`tracked-range-grows-only-when-typing-after`,stickiness:AL.GrowsOnlyWhenTypingAfter})];function f3(e){return e instanceof u3?e:u3.createDynamic(e)}var p3=class extends w{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new E),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._affectedLineHeights=null,this._affectedFontLines=null,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}hasListeners(){return this._actual.hasListeners()}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){this._deferredCnt--,this._deferredCnt===0&&(this._shouldFireDeferred&&this.doFire(),this._affectedInjectedTextLines?.clear(),this._affectedInjectedTextLines=null,this._affectedLineHeights?.clear(),this._affectedLineHeights=null,this._affectedFontLines?.clear(),this._affectedFontLines=null)}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||=new Set,this._affectedInjectedTextLines.add(e)}recordLineAffectedByLineHeightChange(e,t,n,r){this._affectedLineHeights||=new Ye([],_2.toKey),this._affectedLineHeights.add(new _2(e,t,n,r))}recordLineAffectedByFontChange(e,t,n){this._affectedFontLines||=new Ye([],v2.toKey),this._affectedFontLines.add(new v2(e,t,n))}checkAffectedAndFire(e){this._affectsMinimap||=!!e.minimap?.position,this._affectsOverviewRuler||=!!e.overviewRuler?.color,this._affectsGlyphMargin||=!!e.glyphMarginClassName,this._affectsLineNumber||=!!e.lineNumberClassName,this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){this._deferredCnt===0?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines,this._affectedLineHeights,this._affectedFontLines);let e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(e)}},m3=class extends w{constructor(){super(),this._fastEmitter=this._register(new E),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new E),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}hasListeners(){return this._fastEmitter.hasListeners()||this._slowEmitter.hasListeners()}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;let t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}},h3={enableSplitViewResizing:!0,renderSideBySide:!0,renderMarginRevertIcon:!0,renderGutterMenu:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:`inherit`,diffAlgorithm:`advanced`,accessibilityVerbose:!1,experimental:{showMoves:!1,showEmptyDecorations:!0,useTrueInlineView:!1},hideUnchangedRegions:{enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:900,useInlineViewWhenSpaceIsLimited:!0,compactMode:!1},g3=V(`pathService`),_3=V(`untitledTextEditorService`);function v3(e){return e.scheme!==A.file&&e.scheme!==A.vscodeRemote}function y3(e){if(e.folders.length)return e.folders.every(e=>v3(e.uri))?e.folders[0].uri:void 0;if(e.configuration&&v3(e.configuration))return e.configuration}function b3(e){return y3(e)?.scheme}function x3(e){return y3(e)?.authority}function S3(e){return y3(e)!==void 0}var C3=V(`editorPaneService`),w3;(function(e){e.Workbench=`workbench.contributions.kind`})(w3||={});var T3;(function(e){e[e.BlockStartup=1]=`BlockStartup`,e[e.BlockRestore=2]=`BlockRestore`,e[e.AfterRestored=3]=`AfterRestored`,e[e.Eventually=4]=`Eventually`})(T3||={});function E3(e){let t=e;return!!t&&typeof t.editorTypeId==`string`}function D3(e){switch(e){case jx.Restored:return T3.AfterRestored;case jx.Eventually:return T3.Eventually}}function O3(e){switch(e){case T3.BlockStartup:return jx.Starting;case T3.BlockRestore:return jx.Ready;case T3.AfterRestored:return jx.Restored;case T3.Eventually:return jx.Eventually}}var k3=class e extends w{constructor(){super(...arguments),this.contributionsByPhase=new Map,this.contributionsByEditor=new Map,this.contributionsById=new Map,this.instancesById=new Map,this.instanceDisposables=this._register(new C),this.timingsByPhase=new Map,this.pendingRestoredContributions=new kc,this.whenRestored=this.pendingRestoredContributions.p}static#e=this.INSTANCE=new e;static#t=this.BLOCK_BEFORE_RESTORE_WARN_THRESHOLD=20;static#n=this.BLOCK_AFTER_RESTORE_WARN_THRESHOLD=100;get timings(){return this.timingsByPhase}registerWorkbenchContribution2(e,t,n){let r={id:e,ctor:t};this.instantiationService&&this.lifecycleService&&this.logService&&this.environmentService&&this.editorPaneService&&(typeof n==`number`&&this.lifecycleService.phase>=n||typeof e==`string`&&E3(n)&&this.editorPaneService.didInstantiateEditorPane(n.editorTypeId))?this.safeCreateContribution(this.instantiationService,this.logService,this.environmentService,r,typeof n==`number`?O3(n):this.lifecycleService.phase):(typeof n==`number`&&cn(this.contributionsByPhase,O3(n),[]).push(r),typeof e==`string`&&(this.contributionsById.has(e)?console.error(`IWorkbenchContributionsRegistry#registerWorkbenchContribution(): Can't register multiple contributions with same id '${e}'`):this.contributionsById.set(e,r),E3(n)&&cn(this.contributionsByEditor,n.editorTypeId,[]).push(r)))}registerWorkbenchContribution(e,t){this.registerWorkbenchContribution2(void 0,e,D3(t))}getWorkbenchContribution(e){if(this.instancesById.has(e))return this.instancesById.get(e);let t=this.instantiationService,n=this.lifecycleService,r=this.logService,i=this.environmentService;if(!t||!n||!r||!i)throw Error(`IWorkbenchContributionsRegistry#getContribution('${e}'): cannot be called before registry started`);let a=this.contributionsById.get(e);if(!a)throw Error(`IWorkbenchContributionsRegistry#getContribution('${e}'): contribution with that identifier is unknown.`);n.phase<jx.Restored&&r.warn(`IWorkbenchContributionsRegistry#getContribution('${e}'): contribution instantiated before LifecyclePhase.Restored!`),this.safeCreateContribution(t,r,i,a,n.phase);let o=this.instancesById.get(e);if(!o)throw Error(`IWorkbenchContributionsRegistry#getContribution('${e}'): failed to create contribution.`);return o}start(e){let t=this.instantiationService=e.get(Cy),n=this.lifecycleService=e.get(Nx),r=this.logService=e.get(Lb),i=this.environmentService=e.get(Ly),a=this.editorPaneService=e.get(C3);this._register(n.onDidShutdown(()=>{this.instanceDisposables.clear()}));for(let e of[jx.Starting,jx.Ready,jx.Restored,jx.Eventually])this.instantiateByPhase(t,n,r,i,e);for(let e of this.contributionsByEditor.keys())a.didInstantiateEditorPane(e)&&this.onEditor(e,t,n,r,i);this._register(a.onWillInstantiateEditorPane(e=>this.onEditor(e.typeId,t,n,r,i)))}onEditor(e,t,n,r,i){let a=this.contributionsByEditor.get(e);if(a){this.contributionsByEditor.delete(e);for(let e of a)this.safeCreateContribution(t,r,i,e,n.phase)}}instantiateByPhase(e,t,n,r,i){t.phase>=i?this.doInstantiateByPhase(e,n,r,i):t.when(i).then(()=>this.doInstantiateByPhase(e,n,r,i))}async doInstantiateByPhase(e,t,n,r){let i=this.contributionsByPhase.get(r);if(i)switch(this.contributionsByPhase.delete(r),r){case jx.Starting:case jx.Ready:kv(`code/willCreateWorkbenchContributions/${r}`);for(let a of i)this.safeCreateContribution(e,t,n,a,r);kv(`code/didCreateWorkbenchContributions/${r}`);break;case jx.Restored:case jx.Eventually:r===jx.Eventually&&await this.pendingRestoredContributions.p,this.doInstantiateWhenIdle(i,e,t,n,r);break}}doInstantiateWhenIdle(e,t,n,r,i){kv(`code/willCreateWorkbenchContributions/${i}`);let a=0,o=i===jx.Eventually?3e3:500,s=c=>{for(;a<e.length;){let l=e[a++];if(this.safeCreateContribution(t,n,r,l,i),c.timeRemaining()<1){Sc(s,o);break}}a===e.length&&(kv(`code/didCreateWorkbenchContributions/${i}`),i===jx.Restored&&this.pendingRestoredContributions.complete())};Sc(s,o)}safeCreateContribution(t,n,r,i,a){if(typeof i.id==`string`&&this.instancesById.has(i.id))return;let o=Date.now();try{typeof i.id==`string`&&kv(`code/willCreateWorkbenchContribution/${a}/${i.id}`);let e=t.createInstance(i.ctor);typeof i.id==`string`&&(this.instancesById.set(i.id,e),this.contributionsById.delete(i.id)),Mn(e)&&this.instanceDisposables.add(e)}catch(e){n.error(`Unable to create workbench contribution '${i.id??i.ctor.name}'.`,e)}finally{typeof i.id==`string`&&kv(`code/didCreateWorkbenchContribution/${a}/${i.id}`)}if(typeof i.id==`string`||!r.isBuilt){let t=Date.now()-o;if(t>(a<jx.Restored?e.BLOCK_BEFORE_RESTORE_WARN_THRESHOLD:e.BLOCK_AFTER_RESTORE_WARN_THRESHOLD)&&n.warn(`Creation of workbench contribution '${i.id??i.ctor.name}' took ${t}ms.`),typeof i.id==`string`){let e=this.timingsByPhase.get(a);e||(e=[],this.timingsByPhase.set(a,e)),e.push([i.id,t])}}}},A3=k3.INSTANCE.registerWorkbenchContribution2.bind(k3.INSTANCE);k3.INSTANCE.getWorkbenchContribution.bind(k3.INSTANCE),hr.add(w3.Workbench,k3.INSTANCE);var j3=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/,M3=class extends w{get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:T.None}get inChordMode(){return this._currentChords.length>0}constructor(e,t,n,r,i){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=n,this._notificationService=r,this._logService=i,this._onDidUpdateKeybindings=this._register(new E),this._currentChords=[],this._currentChordChecker=new yc,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=N3.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new vc,this._currentlyDispatchingCommandId=null,this._logging=!1}registerContainer(e){return w.None}dispose(){super.dispose()}getDefaultKeybindingsContent(){return``}toggleLogging(){return this._logging=!this._logging,this._logging}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getDefaultKeybindings(){return this._getResolver().getDefaultKeybindings()}getKeybindings(){return this._getResolver().getKeybindings()}customKeybindingsCount(){return 0}lookupKeybindings(e){return wt(this._getResolver().lookupKeybindings(e).map(e=>e.resolvedKeybinding))}lookupKeybinding(e,t,n=!1){let r=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService,n);if(r)return r.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){this._log(`/ Soft dispatching keyboard event`);let n=this.resolveKeyboardEvent(e);if(n.hasMultipleChords())return console.warn(`keyboard event should not be mapped to multiple chords`),iF;let[r]=n.getDispatchChords();if(r===null)return this._log(`\\ Keyboard event cannot be dispatched`),iF;let i=this._contextKeyService.getContext(t),a=this._currentChords.map((({keypress:e})=>e));return this._getResolver().resolve(i,a,r)}_scheduleLeaveChordMode(){let e=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-e>5e3&&this._leaveChordMode()},500)}_expectAnotherChord(e,t){switch(this._currentChords.push({keypress:e,label:t}),this._currentChords.length){case 0:throw ie(`impossible`);case 1:this._currentChordStatusMessage=this._notificationService.status(D(1950,`({0}) was pressed. Waiting for second key of chord...`,t));break;default:{let e=this._currentChords.map(({label:e})=>e).join(`, `);this._currentChordStatusMessage=this._notificationService.status(D(1951,`({0}) was pressed. Waiting for next key of chord...`,e))}}this._scheduleLeaveChordMode(),NQ.enabled&&NQ.disable()}_leaveChordMode(){this._currentChordStatusMessage&&=(this._currentChordStatusMessage.close(),null),this._currentChordChecker.cancel(),this._currentChords=[],NQ.enable()}dispatchByUserSettingsLabel(e,t){this._log(`/ Dispatching keybinding triggered via menu entry accelerator - ${e}`);let n=this.resolveUserBinding(e);n.length===0?this._log(`\\ Could not resolve - ${e}`):this._doDispatch(n[0],t,!1)}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){let n=this.resolveKeyboardEvent(e),[r]=n.getSingleModifierDispatchChords();if(r)return this._ignoreSingleModifiers.has(r)?(this._log(`+ Ignoring single modifier ${r} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=N3.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=N3.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${r}.`),this._currentSingleModifier=r,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log(`+ Clearing single modifier due to 300ms elapsed.`),this._currentSingleModifier=null},300),!1):r===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${r} ${r}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(n,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${r}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));let[i]=n.getChords();return this._ignoreSingleModifiers=new N3(i),this._currentSingleModifier!==null&&this._log(`+ Clearing single modifier due to other key up.`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,n=!1){let r=!1;if(e.hasMultipleChords())return console.warn(`Unexpected keyboard event mapped to multiple chords`),!1;let i=null,a=null;if(n){let[t]=e.getSingleModifierDispatchChords();i=t,a=t?[t]:[]}else [i]=e.getDispatchChords(),a=this._currentChords.map(({keypress:e})=>e);if(i===null)return this._log(`\\ Keyboard event cannot be dispatched in keydown phase.`),r;let o=this._contextKeyService.getContext(t),s=e.getLabel(),c=this._getResolver().resolve(o,a,i);switch(c.kind){case rF.NoMatchingKb:if(this._logService.trace(`KeybindingService#dispatch`,s,`[ No matching keybinding ]`),this.inChordMode){let e=this._currentChords.map(({label:e})=>e).join(`, `);this._log(`+ Leaving multi-chord mode: Nothing bound to "${e}, ${s}".`),this._notificationService.status(D(1952,`The key combination ({0}, {1}) is not a command.`,e,s),{hideAfter:10*1e3}),this._leaveChordMode(),r=!0}return r;case rF.MoreChordsNeeded:return this._logService.trace(`KeybindingService#dispatch`,s,`[ Several keybindings match - more chords needed ]`),r=!0,this._expectAnotherChord(i,s),this._log(this._currentChords.length===1?`+ Entering multi-chord mode...`:`+ Continuing multi-chord mode...`),r;case rF.KbFound:if(this._logService.trace(`KeybindingService#dispatch`,s,`[ Will dispatch command ${c.commandId} ]`),c.commandId===null||c.commandId===``){if(this.inChordMode){let e=this._currentChords.map(({label:e})=>e).join(`, `);this._log(`+ Leaving chord mode: Nothing bound to "${e}, ${s}".`),this._notificationService.status(D(1952,`The key combination ({0}, {1}) is not a command.`,e,s),{hideAfter:10*1e3}),this._leaveChordMode(),r=!0}}else{this.inChordMode&&this._leaveChordMode(),c.isBubble||(r=!0),this._log(`+ Invoking command ${c.commandId}.`),this._currentlyDispatchingCommandId=c.commandId;try{c.commandArgs===void 0?this._commandService.executeCommand(c.commandId).then(void 0,e=>this._notificationService.warn(e)):this._commandService.executeCommand(c.commandId,c.commandArgs).then(void 0,e=>this._notificationService.warn(e))}finally{this._currentlyDispatchingCommandId=null}j3.test(c.commandId)||this._telemetryService.publicLog2(`workbenchActionExecuted`,{id:c.commandId,from:`keybinding`,detail:e.getUserSettingsLabel()??void 0})}return r}}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=F.KeyA&&e.keyCode<=F.KeyZ||e.keyCode>=F.Digit0&&e.keyCode<=F.Digit9}appendKeybinding(e,t,n,r){if(t){let i=this.lookupKeybinding(t,n,r)?.getLabel();if(i)return D(1953,`{0} ({1})`,e,i)}return e}},N3=class e{static#e=this.EMPTY=new e(null);constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case`ctrl`:return this._ctrlKey;case`shift`:return this._shiftKey;case`alt`:return this._altKey;case`meta`:return this._metaKey}}},P3=class{constructor(e,t,n,r,i,a,o){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.chords=e?F3(e.getDispatchChords()):[],e&&this.chords.length===0&&(this.chords=F3(e.getSingleModifierDispatchChords())),this.bubble=t?t.charCodeAt(0)===O.Caret:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=n,this.when=r,this.isDefault=i,this.extensionId=a,this.isBuiltinExtension=o}};function F3(e){let t=[];for(let n=0,r=e.length;n<r;n++){let r=e[n];if(!r)return[];t.push(r)}return t}var I3=class extends cp{constructor(e,t){if(super(),t.length===0)throw re(`chords`);this._os=e,this._chords=t}getLabel(){return mV.toLabel(this._os,this._chords,e=>this._getLabel(e))}getAriaLabel(){return hV.toLabel(this._os,this._chords,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:gV.toLabel(this._os,this._chords,e=>this._getElectronAccelerator(e))}getUserSettingsLabel(){return _V.toLabel(this._os,this._chords,e=>this._getUserSettingsLabel(e))}isWYSIWYG(){return this._chords.every(e=>this._isWYSIWYG(e))}hasMultipleChords(){return this._chords.length>1}getChords(){return this._chords.map(e=>this._getChord(e))}_getChord(e){return new sp(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchChords(){return this._chords.map(e=>this._getChordDispatch(e))}getSingleModifierDispatchChords(){return this._chords.map(e=>this._getSingleModifierChordDispatch(e))}},L3=class e extends I3{constructor(e,t){super(t,e)}_keyCodeToUILabel(e){if(this._os===Ti.Macintosh)switch(e){case F.LeftArrow:return``;case F.UpArrow:return``;case F.RightArrow:return``;case F.DownArrow:return``}return Zf.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?``:this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?``:Zf.toString(e.keyCode)}_getElectronAccelerator(e){return Zf.toElectronAccelerator(e.keyCode)}_getUserSettingsLabel(e){if(e.isDuplicateModifierCase())return``;let t=Zf.toUserSettingsUS(e.keyCode);return t&&t.toLowerCase()}_isWYSIWYG(){return!0}_getChordDispatch(t){return e.getDispatchStr(t)}static getDispatchStr(e){if(e.isModifierKey())return null;let t=``;return e.ctrlKey&&(t+=`ctrl+`),e.shiftKey&&(t+=`shift+`),e.altKey&&(t+=`alt+`),e.metaKey&&(t+=`meta+`),t+=Zf.toString(e.keyCode),t}_getSingleModifierChordDispatch(e){return e.keyCode===F.Ctrl&&!e.shiftKey&&!e.altKey&&!e.metaKey?`ctrl`:e.keyCode===F.Shift&&!e.ctrlKey&&!e.altKey&&!e.metaKey?`shift`:e.keyCode===F.Alt&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?`alt`:e.keyCode===F.Meta&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?`meta`:null}static _scanCodeToKeyCode(e){let t=Yf[e];if(t!==F.DependsOnKbLayout)return t;switch(e){case I.KeyA:return F.KeyA;case I.KeyB:return F.KeyB;case I.KeyC:return F.KeyC;case I.KeyD:return F.KeyD;case I.KeyE:return F.KeyE;case I.KeyF:return F.KeyF;case I.KeyG:return F.KeyG;case I.KeyH:return F.KeyH;case I.KeyI:return F.KeyI;case I.KeyJ:return F.KeyJ;case I.KeyK:return F.KeyK;case I.KeyL:return F.KeyL;case I.KeyM:return F.KeyM;case I.KeyN:return F.KeyN;case I.KeyO:return F.KeyO;case I.KeyP:return F.KeyP;case I.KeyQ:return F.KeyQ;case I.KeyR:return F.KeyR;case I.KeyS:return F.KeyS;case I.KeyT:return F.KeyT;case I.KeyU:return F.KeyU;case I.KeyV:return F.KeyV;case I.KeyW:return F.KeyW;case I.KeyX:return F.KeyX;case I.KeyY:return F.KeyY;case I.KeyZ:return F.KeyZ;case I.Digit1:return F.Digit1;case I.Digit2:return F.Digit2;case I.Digit3:return F.Digit3;case I.Digit4:return F.Digit4;case I.Digit5:return F.Digit5;case I.Digit6:return F.Digit6;case I.Digit7:return F.Digit7;case I.Digit8:return F.Digit8;case I.Digit9:return F.Digit9;case I.Digit0:return F.Digit0;case I.Minus:return F.Minus;case I.Equal:return F.Equal;case I.BracketLeft:return F.BracketLeft;case I.BracketRight:return F.BracketRight;case I.Backslash:return F.Backslash;case I.IntlHash:return F.Unknown;case I.Semicolon:return F.Semicolon;case I.Quote:return F.Quote;case I.Backquote:return F.Backquote;case I.Comma:return F.Comma;case I.Period:return F.Period;case I.Slash:return F.Slash;case I.IntlBackslash:return F.IntlBackslash}return F.Unknown}static _toKeyCodeChord(e){if(!e)return null;if(e instanceof ip)return e;let t=this._scanCodeToKeyCode(e.scanCode);return t===F.Unknown?null:new ip(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveKeybinding(t,n){let r=F3(t.chords.map(e=>this._toKeyCodeChord(e)));return r.length>0?[new e(r,n)]:[]}},R3=`modulepreload`,z3=function(e){return`/beancount-lsp/`+e},B3={};const V3=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=document.getElementsByTagName(`link`),i=document.querySelector(`meta[property=csp-nonce]`),a=i?.nonce||i?.getAttribute(`nonce`);function o(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:`fulfilled`,value:e}),e=>({status:`rejected`,reason:e}))))}r=o(t.map(t=>{if(t=z3(t,n),t in B3)return;B3[t]=!0;let r=t.endsWith(`.css`),i=r?`[rel="stylesheet"]`:``;if(n)for(let n=e.length-1;n>=0;n--){let i=e[n];if(i.href===t&&(!r||i.rel===`stylesheet`))return}else if(document.querySelector(`link[href="${t}"]${i}`))return;let o=document.createElement(`link`);if(o.rel=r?`stylesheet`:R3,r||(o.as=`script`),o.crossOrigin=``,o.href=t,a&&o.setAttribute(`nonce`,a),document.head.appendChild(o),r)return new Promise((e,n)=>{o.addEventListener(`load`,e),o.addEventListener(`error`,()=>n(Error(`Unable to preload CSS for ${t}`)))})}))}function i(e){let t=new Event(`vite:preloadError`,{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(let e of t||[])e.status===`rejected`&&i(e.reason);return e().catch(i)})};var H3=class extends w{constructor(e){super(),this._themeService=e,this._onWillCreateCodeEditor=this._register(new E),this.onWillCreateCodeEditor=this._onWillCreateCodeEditor.event,this._onCodeEditorAdd=this._register(new E),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new E),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new E),this.onWillCreateDiffEditor=this._onWillCreateDiffEditor.event,this._onDiffEditorAdd=this._register(new E),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new E),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._onDidChangeTransientModelProperty=this._register(new E),this.onDidChangeTransientModelProperty=this._onDidChangeTransientModelProperty.event,this._onDecorationTypeRegistered=this._register(new E),this.onDecorationTypeRegistered=this._onDecorationTypeRegistered.event,this._decorationOptionProviders=new Map,this._editorStyleSheets=new Map,this._codeEditorOpenHandlers=new Kn,this._transientWatchers=this._register(new Hn),this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}removeDiffEditor(e){delete this._diffEditors[e.getId()]&&this._onDiffEditorRemove.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null,t=this.listCodeEditors();for(let n of t){if(n.hasTextFocus())return n;n.hasWidgetFocus()&&(e=n)}return e}_getOrCreateGlobalStyleSheet(){return this._globalStyleSheet||=this._createGlobalStyleSheet(),this._globalStyleSheet}_createGlobalStyleSheet(){return new G3(xC())}_getOrCreateStyleSheet(e){if(!e)return this._getOrCreateGlobalStyleSheet();let t=e.getContainerDomNode();if(!n_(t))return this._getOrCreateGlobalStyleSheet();let n=e.getId();if(!this._editorStyleSheets.has(n)){let e=new W3(this,n,xC(t));this._editorStyleSheets.set(n,e)}return this._editorStyleSheets.get(n)}_removeEditorStyleSheets(e){this._editorStyleSheets.delete(e)}registerDecorationType(e,t,n,r,i){let a=this._decorationOptionProviders.get(t);if(!a){let o=this._getOrCreateStyleSheet(i),s={styleSheet:o,key:t,parentTypeKey:r,options:n||Object.create(null)};a=r?new K3(this._themeService,o,s):new q3(e,this._themeService,o,s),this._decorationOptionProviders.set(t,a),this._onDecorationTypeRegistered.fire(t)}return a.refCount++,{dispose:()=>{this.removeDecorationType(t)}}}listDecorationTypes(){return Array.from(this._decorationOptionProviders.keys())}removeDecorationType(e){let t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(t=>t.removeDecorationsByType(e))))}resolveDecorationOptions(e,t){let n=this._decorationOptionProviders.get(e);if(!n)throw Error(`Unknown decoration type key: `+e);return n.getOptions(this,t)}resolveDecorationCSSRules(e){let t=this._decorationOptionProviders.get(e);return t?t.resolveDecorationCSSRules():null}setModelProperty(e,t,n){let r=e.toString(),i;this._modelProperties.has(r)?i=this._modelProperties.get(r):(i=new Map,this._modelProperties.set(r,i)),i.set(t,n)}getModelProperty(e,t){let n=e.toString();if(this._modelProperties.has(n))return this._modelProperties.get(n).get(t)}setTransientModelProperty(e,t,n){let r=e.uri.toString(),i=this._transientWatchers.get(r);i||(i=new U3(r,e,this),this._transientWatchers.set(r,i)),i.get(t)!==n&&(i.set(t,n),this._onDidChangeTransientModelProperty.fire(e))}getTransientModelProperty(e,t){let n=e.uri.toString(),r=this._transientWatchers.get(n);if(r)return r.get(t)}getTransientModelProperties(e){let t=e.uri.toString(),n=this._transientWatchers.get(t);if(n)return n.keys().map(e=>[e,n.get(e)])}_removeWatcher(e){this._transientWatchers.deleteAndDispose(e.uri)}async openCodeEditor(e,t,n){for(let r of this._codeEditorOpenHandlers){let i=await r(e,t,n);if(i!==null)return i}return null}registerCodeEditorOpenHandler(e){return S(this._codeEditorOpenHandlers.unshift(e))}};H3=t([n(0,Fx)],H3);var U3=class extends w{constructor(e,t,n){super(),this.uri=e,this._values={},this._register(t.onWillDispose(()=>n._removeWatcher(this)))}set(e,t){this._values[e]=t}get(e){return this._values[e]}keys(){return Object.keys(this._values)}},W3=class{get sheet(){return this._styleSheet.sheet}constructor(e,t,n){this._parent=e,this._editorId=t,this._styleSheet=n,this._refCount=0}ref(){this._refCount++}unref(){this._refCount--,this._refCount===0&&(this._styleSheet.remove(),this._parent._removeEditorStyleSheets(this._editorId))}insertRule(e,t){EC(e,t,this._styleSheet)}removeRulesContainingSelector(e){DC(e,this._styleSheet)}},G3=class{get sheet(){return this._styleSheet.sheet}constructor(e){this._styleSheet=e}ref(){}unref(){}insertRule(e,t){EC(e,t,this._styleSheet)}removeRulesContainingSelector(e){DC(e,this._styleSheet)}},K3=class{constructor(e,t,n){this._styleSheet=t,this._styleSheet.ref(),this._parentTypeKey=n.parentTypeKey,this.refCount=0,this._beforeContentRules=new Y3(X3.BeforeContentClassName,n,e),this._afterContentRules=new Y3(X3.AfterContentClassName,n,e)}getOptions(e,t){let n=e.resolveDecorationOptions(this._parentTypeKey,!0);return this._beforeContentRules&&(n.beforeContentClassName=this._beforeContentRules.className),this._afterContentRules&&(n.afterContentClassName=this._afterContentRules.className),n}resolveDecorationCSSRules(){return this._styleSheet.sheet.cssRules}dispose(){this._beforeContentRules&&=(this._beforeContentRules.dispose(),null),this._afterContentRules&&=(this._afterContentRules.dispose(),null),this._styleSheet.unref()}},q3=class{constructor(e,t,n,r){this._disposables=new C,this.description=e,this._styleSheet=n,this._styleSheet.ref(),this.refCount=0;let i=e=>{let n=new Y3(e,r,t);if(this._disposables.add(n),n.hasContent)return n.className},a=e=>{let n=new Y3(e,r,t);return this._disposables.add(n),n.hasContent?{className:n.className,hasLetterSpacing:n.hasLetterSpacing}:null};this.className=i(X3.ClassName);let o=a(X3.InlineClassName);if(o&&(this.inlineClassName=o.className,this.inlineClassNameAffectsLetterSpacing=o.hasLetterSpacing),this.beforeContentClassName=i(X3.BeforeContentClassName),this.afterContentClassName=i(X3.AfterContentClassName),r.options.beforeInjectedText&&r.options.beforeInjectedText.contentText){let e=a(X3.BeforeInjectedTextClassName);this.beforeInjectedText={content:r.options.beforeInjectedText.contentText,inlineClassName:e?.className,inlineClassNameAffectsLetterSpacing:e?.hasLetterSpacing||r.options.beforeInjectedText.affectsLetterSpacing}}if(r.options.afterInjectedText&&r.options.afterInjectedText.contentText){let e=a(X3.AfterInjectedTextClassName);this.afterInjectedText={content:r.options.afterInjectedText.contentText,inlineClassName:e?.className,inlineClassNameAffectsLetterSpacing:e?.hasLetterSpacing||r.options.afterInjectedText.affectsLetterSpacing}}this.glyphMarginClassName=i(X3.GlyphMarginClassName);let s=r.options;this.isWholeLine=!!s.isWholeLine,this.lineHeight=s.lineHeight,this.fontFamily=s.fontFamily,this.fontSize=s.fontSize,this.fontWeight=s.fontWeight,this.fontStyle=s.fontStyle,this.stickiness=s.rangeBehavior;let c=s.light&&s.light.overviewRulerColor||s.overviewRulerColor,l=s.dark&&s.dark.overviewRulerColor||s.overviewRulerColor;(c!==void 0||l!==void 0)&&(this.overviewRuler={color:c||l,darkColor:l||c,position:s.overviewRulerLane||yL.Center})}getOptions(e,t){return t?{description:this.description,inlineClassName:this.inlineClassName,beforeContentClassName:this.beforeContentClassName,afterContentClassName:this.afterContentClassName,className:this.className,glyphMarginClassName:this.glyphMarginClassName,isWholeLine:this.isWholeLine,lineHeight:this.lineHeight,fontFamily:this.fontFamily,fontSize:this.fontSize,fontWeight:this.fontWeight,fontStyle:this.fontStyle,overviewRuler:this.overviewRuler,stickiness:this.stickiness,before:this.beforeInjectedText,after:this.afterInjectedText}:this}resolveDecorationCSSRules(){return this._styleSheet.sheet.rules}dispose(){this._disposables.dispose(),this._styleSheet.unref()}},J3={color:`color:{0} !important;`,opacity:`opacity:{0};`,backgroundColor:`background-color:{0};`,outline:`outline:{0};`,outlineColor:`outline-color:{0};`,outlineStyle:`outline-style:{0};`,outlineWidth:`outline-width:{0};`,border:`border:{0};`,borderColor:`border-color:{0};`,borderRadius:`border-radius:{0};`,borderSpacing:`border-spacing:{0};`,borderStyle:`border-style:{0};`,borderWidth:`border-width:{0};`,fontStyle:`font-style:{0};`,fontWeight:`font-weight:{0};`,fontSize:`font-size:{0};`,fontFamily:`font-family:{0};`,textDecoration:`text-decoration:{0};`,cursor:`cursor:{0};`,letterSpacing:`letter-spacing:{0};`,gutterIconPath:`background:{0} center center no-repeat;`,gutterIconSize:`background-size:{0};`,contentText:`content:'{0}';`,contentIconPath:`content:{0};`,margin:`margin:{0};`,padding:`padding:{0};`,width:`width:{0};`,height:`height:{0};`,verticalAlign:`vertical-align:{0};`},Y3=class{constructor(e,t,n){this._theme=n.getColorTheme(),this._ruleType=e,this._providerArgs=t,this._usesThemeColors=!1,this._hasContent=!1,this._hasLetterSpacing=!1;let r=Z3.getClassName(this._providerArgs.key,e);this._providerArgs.parentTypeKey&&(r=r+` `+Z3.getClassName(this._providerArgs.parentTypeKey,e)),this._className=r,this._unThemedSelector=Z3.getSelector(this._providerArgs.key,this._providerArgs.parentTypeKey,e),this._buildCSS(),this._usesThemeColors?this._themeListener=n.onDidColorThemeChange(e=>{this._theme=n.getColorTheme(),this._removeCSS(),this._buildCSS()}):this._themeListener=null}dispose(){this._hasContent&&=(this._removeCSS(),!1),this._themeListener&&=(this._themeListener.dispose(),null)}get hasContent(){return this._hasContent}get hasLetterSpacing(){return this._hasLetterSpacing}get className(){return this._className}_buildCSS(){let e=this._providerArgs.options,t,n,r;switch(this._ruleType){case X3.ClassName:t=this.getCSSTextForModelDecorationClassName(e),n=this.getCSSTextForModelDecorationClassName(e.light),r=this.getCSSTextForModelDecorationClassName(e.dark);break;case X3.InlineClassName:t=this.getCSSTextForModelDecorationInlineClassName(e),n=this.getCSSTextForModelDecorationInlineClassName(e.light),r=this.getCSSTextForModelDecorationInlineClassName(e.dark);break;case X3.GlyphMarginClassName:t=this.getCSSTextForModelDecorationGlyphMarginClassName(e),n=this.getCSSTextForModelDecorationGlyphMarginClassName(e.light),r=this.getCSSTextForModelDecorationGlyphMarginClassName(e.dark);break;case X3.BeforeContentClassName:t=this.getCSSTextForModelDecorationContentClassName(e.before),n=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.before),r=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.before);break;case X3.AfterContentClassName:t=this.getCSSTextForModelDecorationContentClassName(e.after),n=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.after),r=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.after);break;case X3.BeforeInjectedTextClassName:t=this.getCSSTextForModelDecorationContentClassName(e.beforeInjectedText),n=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.beforeInjectedText),r=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.beforeInjectedText);break;case X3.AfterInjectedTextClassName:t=this.getCSSTextForModelDecorationContentClassName(e.afterInjectedText),n=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.afterInjectedText),r=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.afterInjectedText);break;default:throw Error(`Unknown rule type: `+this._ruleType)}let i=this._providerArgs.styleSheet,a=!1;t.length>0&&(i.insertRule(this._unThemedSelector,t),a=!0),n.length>0&&(i.insertRule(`.vs${this._unThemedSelector}, .hc-light${this._unThemedSelector}`,n),a=!0),r.length>0&&(i.insertRule(`.vs-dark${this._unThemedSelector}, .hc-black${this._unThemedSelector}`,r),a=!0),this._hasContent=a}_removeCSS(){this._providerArgs.styleSheet.removeRulesContainingSelector(this._unThemedSelector)}getCSSTextForModelDecorationClassName(e){if(!e)return``;let t=[];return this.collectCSSText(e,[`backgroundColor`],t),this.collectCSSText(e,[`outline`,`outlineColor`,`outlineStyle`,`outlineWidth`],t),this.collectBorderSettingsCSSText(e,t),t.join(``)}getCSSTextForModelDecorationInlineClassName(e){if(!e)return``;let t=[];return this.collectCSSText(e,[`fontStyle`,`fontWeight`,`fontFamily`,`fontSize`,`textDecoration`,`cursor`,`color`,`opacity`,`letterSpacing`],t),e.letterSpacing&&(this._hasLetterSpacing=!0),t.join(``)}getCSSTextForModelDecorationContentClassName(e){if(!e)return``;let t=[];if(e!==void 0){if(this.collectBorderSettingsCSSText(e,t),e.contentIconPath!==void 0&&t.push(Oa(J3.contentIconPath,MC(k.revive(e.contentIconPath)))),typeof e.contentText==`string`){let n=e.contentText.match(/^.*$/m)[0].replace(/['\\]/g,`\\$&`);t.push(Oa(J3.contentText,n))}this.collectCSSText(e,[`verticalAlign`,`fontStyle`,`fontWeight`,`fontSize`,`fontFamily`,`textDecoration`,`color`,`opacity`,`backgroundColor`,`margin`,`padding`],t),this.collectCSSText(e,[`width`,`height`],t)&&t.push(`display:inline-block;`)}return t.join(``)}getCSSTextForModelDecorationGlyphMarginClassName(e){if(!e)return``;let t=[];return e.gutterIconPath!==void 0&&(t.push(Oa(J3.gutterIconPath,MC(k.revive(e.gutterIconPath)))),e.gutterIconSize!==void 0&&t.push(Oa(J3.gutterIconSize,e.gutterIconSize))),t.join(``)}collectBorderSettingsCSSText(e,t){return this.collectCSSText(e,[`border`,`borderColor`,`borderRadius`,`borderSpacing`,`borderStyle`,`borderWidth`],t)?(t.push(Oa(`box-sizing: border-box;`)),!0):!1}collectCSSText(e,t,n){let r=n.length;for(let r of t){let t=this.resolveValue(e[r]);typeof t==`string`&&n.push(Oa(J3[r],t))}return n.length!==r}resolveValue(e){if(zU(e)){this._usesThemeColors=!0;let t=this._theme.getColor(e.id);return t?t.toString():`transparent`}return e}},X3;(function(e){e[e.ClassName=0]=`ClassName`,e[e.InlineClassName=1]=`InlineClassName`,e[e.GlyphMarginClassName=2]=`GlyphMarginClassName`,e[e.BeforeContentClassName=3]=`BeforeContentClassName`,e[e.AfterContentClassName=4]=`AfterContentClassName`,e[e.BeforeInjectedTextClassName=5]=`BeforeInjectedTextClassName`,e[e.AfterInjectedTextClassName=6]=`AfterInjectedTextClassName`})(X3||={});var Z3=class{static getClassName(e,t){return`ced-`+e+`-`+t}static getSelector(e,t,n){let r=`.monaco-editor .`+this.getClassName(e,n);return t&&(r=r+`.`+this.getClassName(t,n)),n===X3.BeforeContentClassName?r+=`::before`:n===X3.AfterContentClassName&&(r+=`::after`),r}},Q3=class extends H3{constructor(e,t){super(t),this._register(this.onCodeEditorAdd(()=>this._checkContextKey())),this._register(this.onCodeEditorRemove(()=>this._checkContextKey())),this._editorIsOpen=e.createKey(`editorIsOpen`,!1),this._activeCodeEditor=null,this._register(this.registerCodeEditorOpenHandler(async(e,t,n)=>t?this.doOpenEditor(t,e):null))}_checkContextKey(){let e=!1;for(let t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){let n=t.resource.scheme;if(n===A.http||n===A.https)return J_(t.resource.toString()),e}return null}let n=t.options?t.options.selection:null;if(n)if(typeof n.endLineNumber==`number`&&typeof n.endColumn==`number`)e.setSelection(n),e.revealRangeInCenter(n,RU.Immediate);else{let t={lineNumber:n.startLineNumber,column:n.startColumn};e.setPosition(t),e.revealPositionInCenter(t,RU.Immediate)}return e}findModel(e,t){let n=e.getModel();return n&&n.uri.toString()!==t.toString()?null:n}};Q3=t([n(0,uS),n(1,Fx)],Q3),Pv(gY,Q3,Nv.Eager);var $3=class{get mainContainer(){return this._codeEditorService.listCodeEditors().at(0)?.getContainerDomNode()??i.document.body}get activeContainer(){return(this._codeEditorService.getFocusedCodeEditor()??this._codeEditorService.getActiveCodeEditor())?.getContainerDomNode()??this.mainContainer}get mainContainerDimension(){return Mg(this.mainContainer)}get activeContainerDimension(){return Mg(this.activeContainer)}get containers(){return wt(this._codeEditorService.listCodeEditors().map(e=>e.getContainerDomNode()))}getContainer(){return this.activeContainer}whenContainerStylesLoaded(){}focus(){this._codeEditorService.getFocusedCodeEditor()?.focus()}constructor(e){this._codeEditorService=e,this.onDidLayoutMainContainer=T.None,this.onDidLayoutActiveContainer=T.None,this.onDidLayoutContainer=T.None,this.onDidChangeActiveContainer=T.None,this.onDidAddContainer=T.None,this.mainContainerOffset={top:0,quickPickTop:0},this.activeContainerOffset={top:0,quickPickTop:0}}};$3=t([n(0,gY)],$3);var e6=class extends $3{get mainContainer(){return this._container}constructor(e,t){super(t),this._container=e}};e6=t([n(1,gY)],e6),Pv(Ey,$3,Nv.Delayed);function t6(e){return e.scheme===A.file?e.fsPath:e.path}var n6=0,r6=class{constructor(e,t,n,r,i,a,o){this.id=++n6,this.type=b0.Resource,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=n,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=r,this.groupOrder=i,this.sourceId=a,this.sourceOrder=o,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?`  VALID`:`INVALID`}] ${this.actual.constructor.name} - ${this.actual}`}},i6;(function(e){e[e.ExternalRemoval=0]=`ExternalRemoval`,e[e.NoParallelUniverses=1]=`NoParallelUniverses`})(i6||={});var a6=class{constructor(e,t){this.resourceLabel=e,this.reason=t}},o6=class{constructor(){this.elements=new Map}createMessage(){let e=[],t=[];for(let[,n]of this.elements)(n.reason===i6.ExternalRemoval?e:t).push(n.resourceLabel);let n=[];return e.length>0&&n.push(D(2428,`The following files have been closed and modified on disk: {0}.`,e.join(`, `))),t.length>0&&n.push(D(2429,`The following files have been modified in an incompatible way: {0}.`,t.join(`, `))),n.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}},s6=class{constructor(e,t,n,r,i,a,o){this.id=++n6,this.type=b0.Workspace,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=n,this.groupId=r,this.groupOrder=i,this.sourceId=a,this.sourceOrder=o,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split==`function`}removeResource(e,t,n){this.removedResources||=new o6,this.removedResources.has(t)||this.removedResources.set(t,new a6(e,n))}setValid(e,t,n){n?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||=new o6,this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new a6(e,i6.ExternalRemoval)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?`INVALID`:`  VALID`}] ${this.actual.constructor.name} - ${this.actual}`}},c6=class{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(let e of this._past)e.type===b0.Workspace&&e.removeResource(this.resourceLabel,this.strResource,i6.ExternalRemoval);for(let e of this._future)e.type===b0.Workspace&&e.removeResource(this.resourceLabel,this.strResource,i6.ExternalRemoval);this.versionId++}toString(){let e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}setElementsIsValid(e){for(let t of this._past)t.type===b0.Workspace?t.setValid(this.resourceLabel,this.strResource,e):t.setValid(e);for(let t of this._future)t.type===b0.Workspace?t.setValid(this.resourceLabel,this.strResource,e):t.setValid(e)}_setElementValidFlag(e,t){e.type===b0.Workspace?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(let n of this._past)t(n.actual)&&this._setElementValidFlag(n,e);for(let n of this._future)t(n.actual)&&this._setElementValidFlag(n,e)}pushElement(e){for(let e of this._future)e.type===b0.Workspace&&e.removeResource(this.resourceLabel,this.strResource,i6.NoParallelUniverses);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){let t=[];for(let e=0,n=this._past.length;e<n;e++)t.push(this._past[e].id);for(let e=this._future.length-1;e>=0;e--)t.push(this._future[e].id);return new x0(e,t)}restoreSnapshot(e){let t=e.elements.length,n=!0,r=0,i=-1;for(let a=0,o=this._past.length;a<o;a++,r++){let o=this._past[a];n&&(r>=t||o.id!==e.elements[r])&&(n=!1,i=a),!n&&o.type===b0.Workspace&&o.removeResource(this.resourceLabel,this.strResource,i6.ExternalRemoval)}let a=-1;for(let i=this._future.length-1;i>=0;i--,r++){let o=this._future[i];n&&(r>=t||o.id!==e.elements[r])&&(n=!1,a=i),!n&&o.type===b0.Workspace&&o.removeResource(this.resourceLabel,this.strResource,i6.ExternalRemoval)}i!==-1&&(this._past=this._past.slice(0,i)),a!==-1&&(this._future=this._future.slice(a+1)),this.versionId++}getElements(){let e=[],t=[];for(let t of this._past)e.push(t.actual);for(let e of this._future)t.push(e.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let n=this._past.length-1;n>=0;n--)if(this._past[n]===e){t.has(this.strResource)?this._past[n]=t.get(this.strResource):this._past.splice(n,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let n=this._future.length-1;n>=0;n--)if(this._future[n]===e){t.has(this.strResource)?this._future[n]=t.get(this.strResource):this._future.splice(n,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}},l6=class{constructor(e){this.editStacks=e,this._versionIds=[];for(let e=0,t=this.editStacks.length;e<t;e++)this._versionIds[e]=this.editStacks[e].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}},u6=new c6(``,``);u6.locked=!0;var d6=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}registerUriComparisonKeyComputer(e,t){return this._uriComparisonKeyComputers.push([e,t]),{dispose:()=>{for(let e=0,n=this._uriComparisonKeyComputers.length;e<n;e++)if(this._uriComparisonKeyComputers[e][1]===t){this._uriComparisonKeyComputers.splice(e,1);return}}}}getUriComparisonKey(e){for(let t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log(`------------------------------------`),console.log(`AFTER ${e}: `);let t=[];for(let e of this._editStacks)t.push(e[1].toString());console.log(t.join(`
`))}pushElement(e,t=S0.None,n=C0.None){if(e.type===b0.Resource){let r=t6(e.resource),i=this.getUriComparisonKey(e.resource);this._pushElement(new r6(e,r,i,t.id,t.nextOrder(),n.id,n.nextOrder()))}else{let r=new Set,i=[],a=[];for(let t of e.resources){let e=t6(t),n=this.getUriComparisonKey(t);r.has(n)||(r.add(n),i.push(e),a.push(n))}i.length===1?this._pushElement(new r6(e,i[0],a[0],t.id,t.nextOrder(),n.id,n.nextOrder())):this._pushElement(new s6(e,i,a,t.id,t.nextOrder(),n.id,n.nextOrder()))}}_pushElement(e){for(let t=0,n=e.strResources.length;t<n;t++){let n=e.resourceLabels[t],r=e.strResources[t],i;this._editStacks.has(r)?i=this._editStacks.get(r):(i=new c6(n,r),this._editStacks.set(r,i)),i.pushElement(e)}}getLastElement(e){let t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){let e=this._editStacks.get(t);if(e.hasFutureElements())return null;let n=e.getClosestPastElement();return n?n.actual:null}return null}_splitPastWorkspaceElement(e,t){let n=e.actual.split(),r=new Map;for(let e of n){let t=new r6(e,t6(e.resource),this.getUriComparisonKey(e.resource),0,0,0,0);r.set(t.strResource,t)}for(let n of e.strResources)t&&t.has(n)||this._editStacks.get(n).splitPastWorkspaceElement(e,r)}_splitFutureWorkspaceElement(e,t){let n=e.actual.split(),r=new Map;for(let e of n){let t=new r6(e,t6(e.resource),this.getUriComparisonKey(e.resource),0,0,0,0);r.set(t.strResource,t)}for(let n of e.strResources)t&&t.has(n)||this._editStacks.get(n).splitFutureWorkspaceElement(e,r)}removeElements(e){let t=typeof e==`string`?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,n){let r=this.getUriComparisonKey(e);this._editStacks.has(r)&&this._editStacks.get(r).setElementsValidFlag(t,n)}hasElements(e){let t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){let e=this._editStacks.get(t);return e.hasPastElements()||e.hasFutureElements()}return!1}createSnapshot(e){let t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new x0(e,[])}restoreSnapshot(e){let t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){let n=this._editStacks.get(t);n.restoreSnapshot(e),!n.hasPastElements()&&!n.hasFutureElements()&&(n.dispose(),this._editStacks.delete(t))}}getElements(e){let t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(let[r,i]of this._editStacks){let a=i.getClosestPastElement();a&&a.sourceId===e&&(!t||a.sourceOrder>t.sourceOrder)&&(t=a,n=r)}return[t,n]}canUndo(e){if(e instanceof C0){let[,t]=this._findClosestUndoElementWithSource(e.id);return!!t}let t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){p(e);for(let e of t.strResources)this.removeElements(e);this._notificationService.error(e)}_acquireLocks(e){for(let t of e.editStacks)if(t.locked)throw Error(`Cannot acquire edit stack lock`);for(let t of e.editStacks)t.locked=!0;return()=>{for(let t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,n,r,i){let a=this._acquireLocks(n),o;try{o=t()}catch(t){return a(),r.dispose(),this._onError(t,e)}return o?o.then(()=>(a(),r.dispose(),i()),t=>(a(),r.dispose(),this._onError(t,e))):(a(),r.dispose(),i())}async _invokeWorkspacePrepare(e){if(e.actual.prepareUndoRedo===void 0)return w.None;let t=e.actual.prepareUndoRedo();return t===void 0?w.None:t}_invokeResourcePrepare(e,t){if(e.actual.type!==b0.Workspace||e.actual.prepareUndoRedo===void 0)return t(w.None);let n=e.actual.prepareUndoRedo();return n?Mn(n)?t(n):n.then(e=>t(e)):t(w.None)}_getAffectedEditStacks(e){let t=[];for(let n of e.strResources)t.push(this._editStacks.get(n)||u6);return new l6(t)}_tryToSplitAndUndo(e,t,n,r){if(t.canSplit())return this._splitPastWorkspaceElement(t,n),this._notificationService.warn(r),new f6(this._undo(e,0,!0));for(let e of t.strResources)this.removeElements(e);return this._notificationService.warn(r),new f6}_checkWorkspaceUndo(e,t,n,r){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,D(2430,`Could not undo '{0}' across all files. {1}`,t.label,t.removedResources.createMessage()));if(r&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,D(2430,`Could not undo '{0}' across all files. {1}`,t.label,t.invalidatedResources.createMessage()));let i=[];for(let e of n.editStacks)e.getClosestPastElement()!==t&&i.push(e.resourceLabel);if(i.length>0)return this._tryToSplitAndUndo(e,t,null,D(2431,`Could not undo '{0}' across all files because changes were made to {1}`,t.label,i.join(`, `)));let a=[];for(let e of n.editStacks)e.locked&&a.push(e.resourceLabel);return a.length>0?this._tryToSplitAndUndo(e,t,null,D(2432,`Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}`,t.label,a.join(`, `))):n.isValid()?null:this._tryToSplitAndUndo(e,t,null,D(2433,`Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime`,t.label))}_workspaceUndo(e,t,n){let r=this._getAffectedEditStacks(t),i=this._checkWorkspaceUndo(e,t,r,!1);return i?i.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,r,n)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(let[,t]of this._editStacks){let n=t.getClosestPastElement();if(n){if(n===e){let n=t.getSecondClosestPastElement();if(n&&n.groupId===e.groupId)return!0}if(n.groupId===e.groupId)return!0}}return!1}async _confirmAndExecuteWorkspaceUndo(e,t,n,r){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){let i;(function(e){e[e.All=0]=`All`,e[e.This=1]=`This`,e[e.Cancel=2]=`Cancel`})(i||={});let{result:a}=await this._dialogService.prompt({type:Lx.Info,message:D(2434,`Would you like to undo '{0}' across all files?`,t.label),buttons:[{label:D(2435,`&&Undo in {0} Files`,n.editStacks.length),run:()=>i.All},{label:D(2436,`Undo this &&File`),run:()=>i.This}],cancelButton:{run:()=>i.Cancel}});if(a===i.Cancel)return;if(a===i.This)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);let o=this._checkWorkspaceUndo(e,t,n,!1);if(o)return o.returnValue;r=!0}let i;try{i=await this._invokeWorkspacePrepare(t)}catch(e){return this._onError(e,t)}let a=this._checkWorkspaceUndo(e,t,n,!0);if(a)return i.dispose(),a.returnValue;for(let e of n.editStacks)e.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),n,i,()=>this._continueUndoInGroup(t.groupId,r))}_resourceUndo(e,t,n){if(!t.isValid){e.flushAllElements();return}if(e.locked){let e=D(2437,`Could not undo '{0}' because there is already an undo or redo operation running.`,t.label);this._notificationService.warn(e);return}return this._invokeResourcePrepare(t,r=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new l6([e]),r,()=>this._continueUndoInGroup(t.groupId,n))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(let[r,i]of this._editStacks){let a=i.getClosestPastElement();a&&a.groupId===e&&(!t||a.groupOrder>t.groupOrder)&&(t=a,n=r)}return[t,n]}_continueUndoInGroup(e,t){if(!e)return;let[,n]=this._findClosestUndoElementInGroup(e);if(n)return this._undo(n,0,t)}undo(e){if(e instanceof C0){let[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e==`string`?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,n){if(!this._editStacks.has(e))return;let r=this._editStacks.get(e),i=r.getClosestPastElement();if(i){if(i.groupId){let[e,r]=this._findClosestUndoElementInGroup(i.groupId);if(i!==e&&r)return this._undo(r,t,n)}if((i.sourceId!==t||i.confirmBeforeUndo)&&!n)return this._confirmAndContinueUndo(e,t,i);try{return i.type===b0.Workspace?this._workspaceUndo(e,i,n):this._resourceUndo(r,i,n)}finally{}}}async _confirmAndContinueUndo(e,t,n){if((await this._dialogService.confirm({message:D(2438,`Would you like to undo '{0}'?`,n.label),primaryButton:D(2439,`&&Yes`),cancelButton:D(2440,`No`)})).confirmed)return this._undo(e,t,!0)}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(let[r,i]of this._editStacks){let a=i.getClosestFutureElement();a&&a.sourceId===e&&(!t||a.sourceOrder<t.sourceOrder)&&(t=a,n=r)}return[t,n]}canRedo(e){if(e instanceof C0){let[,t]=this._findClosestRedoElementWithSource(e.id);return!!t}let t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,n,r){if(t.canSplit())return this._splitFutureWorkspaceElement(t,n),this._notificationService.warn(r),new f6(this._redo(e));for(let e of t.strResources)this.removeElements(e);return this._notificationService.warn(r),new f6}_checkWorkspaceRedo(e,t,n,r){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,D(2441,`Could not redo '{0}' across all files. {1}`,t.label,t.removedResources.createMessage()));if(r&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,D(2441,`Could not redo '{0}' across all files. {1}`,t.label,t.invalidatedResources.createMessage()));let i=[];for(let e of n.editStacks)e.getClosestFutureElement()!==t&&i.push(e.resourceLabel);if(i.length>0)return this._tryToSplitAndRedo(e,t,null,D(2442,`Could not redo '{0}' across all files because changes were made to {1}`,t.label,i.join(`, `)));let a=[];for(let e of n.editStacks)e.locked&&a.push(e.resourceLabel);return a.length>0?this._tryToSplitAndRedo(e,t,null,D(2443,`Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}`,t.label,a.join(`, `))):n.isValid()?null:this._tryToSplitAndRedo(e,t,null,D(2444,`Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime`,t.label))}_workspaceRedo(e,t){let n=this._getAffectedEditStacks(t),r=this._checkWorkspaceRedo(e,t,n,!1);return r?r.returnValue:this._executeWorkspaceRedo(e,t,n)}async _executeWorkspaceRedo(e,t,n){let r;try{r=await this._invokeWorkspacePrepare(t)}catch(e){return this._onError(e,t)}let i=this._checkWorkspaceRedo(e,t,n,!0);if(i)return r.dispose(),i.returnValue;for(let e of n.editStacks)e.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),n,r,()=>this._continueRedoInGroup(t.groupId))}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){let e=D(2445,`Could not redo '{0}' because there is already an undo or redo operation running.`,t.label);this._notificationService.warn(e);return}return this._invokeResourcePrepare(t,n=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new l6([e]),n,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(let[r,i]of this._editStacks){let a=i.getClosestFutureElement();a&&a.groupId===e&&(!t||a.groupOrder<t.groupOrder)&&(t=a,n=r)}return[t,n]}_continueRedoInGroup(e){if(!e)return;let[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof C0){let[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e==`string`?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;let t=this._editStacks.get(e),n=t.getClosestFutureElement();if(n){if(n.groupId){let[e,t]=this._findClosestRedoElementInGroup(n.groupId);if(n!==e&&t)return this._redo(t)}try{return n.type===b0.Workspace?this._workspaceRedo(e,n):this._resourceRedo(t,n)}finally{}}}};d6=t([n(0,FV),n(1,Px)],d6);var f6=class{constructor(e){this.returnValue=e}},p6;(function(e){let t=new WeakMap,n=0;function r(e){let r=t.get(e);return r===void 0&&(r=++n,t.set(e,r)),r}e.of=r})(p6||={});var Kie=class{constructor(e){this._default=e}get(e){return this._default}update(e,t){return this._default}default(){return this._default}},qie=class{constructor(e,t,n,r,i,a){this._logService=e,this._name=t,this._registry=n,this._default=r,this._min=i,this._max=a,this._cache=new gn(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((e,t)=>gm(p6.of(t),e),0)}get(e){let t=this._key(e),n=this._cache.get(t);return n?Em(n.value,this._min,this._max):this.default()}update(e,t){let n=this._key(e),r=this._cache.get(n);r||(r=new Am(6),this._cache.set(n,r));let i=Em(r.update(t),this._min,this._max);return gs(e.uri,`output`)||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${i}ms`),i}_overall(){let e=new km;for(let[,t]of this._cache)e.update(t.value);return e.value}default(){return Em(this._overall()|0||this._default,this._min,this._max)}},m6=class{constructor(e,t){this._logService=e,this._data=new Map,this._isDev=t.isExtensionDevelopment||!t.isBuilt}for(e,t,n){let r=n?.min??50,i=n?.max??r**2,a=n?.key??void 0,o=`${p6.of(e)},${r}${a?`,`+a:``}`,s=this._data.get(o);return s||(this._isDev?(this._logService.debug(`[DEBOUNCE: ${t}] is disabled in developed mode`),s=new Kie(r*1.5)):s=new qie(this._logService,t,e,this._overallAverage()|0||r*1.5,r,i),this._data.set(o,s)),s}_overallAverage(){let e=new km;for(let t of this._data.values())e.update(t.default());return e.value}};m6=t([n(0,Lb),n(1,Ly)],m6);var Jie=class{constructor(e=5){this.timesPerSecond=e,this._lastRun=0,this._minimumTimeBetweenRuns=1e3/e}runIfNotLimited(e){let t=Date.now();t-this._lastRun>=this._minimumTimeBetweenRuns&&(this._lastRun=t,e())}},Yie=class e{static create(t,n){return new e(t,new Xie(n))}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._endLineNumber}constructor(e,t){this._startLineNumber=e,this._tokens=t,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}toString(){return this._tokens.toString(this._startLineNumber)}_updateEndLineNumber(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}isEmpty(){return this._tokens.isEmpty()}getLineTokens(e){return this._startLineNumber<=e&&e<=this._endLineNumber?this._tokens.getLineTokens(e-this._startLineNumber):null}getRange(){let e=this._tokens.getRange();return e&&new X(this._startLineNumber+e.startLineNumber,e.startColumn,this._startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){let t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(t,e.startColumn-1,n,e.endColumn-1),this._updateEndLineNumber()}split(t){let n=t.startLineNumber-this._startLineNumber,r=t.endLineNumber-this._startLineNumber,[i,a,o]=this._tokens.split(n,t.startColumn-1,r,t.endColumn-1);return[new e(this._startLineNumber,i),new e(this._startLineNumber+o,a)]}applyEdit(e,t){let[n,r,i]=R$(t);this.acceptEdit(e,n,r,i,t.length>0?t.charCodeAt(0):O.Null)}acceptEdit(e,t,n,r,i){this._acceptDeleteRange(e),this._acceptInsertText(new KK(e.startLineNumber,e.startColumn),t,n,r,i),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;let t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;if(n<0){let e=n-t;this._startLineNumber-=e;return}let r=this._tokens.getMaxDeltaLine();if(!(t>=r+1)){if(t<0&&n>=r+1){this._startLineNumber=0,this._tokens.clear();return}if(t<0){let r=-t;this._startLineNumber-=r,this._tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1)}else this._tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1)}}_acceptInsertText(e,t,n,r,i){if(t===0&&n===0)return;let a=e.lineNumber-this._startLineNumber;if(a<0){this._startLineNumber+=t;return}a>=this._tokens.getMaxDeltaLine()+1||this._tokens.acceptInsertText(a,e.column-1,t,n,r,i)}reportIfInvalid(e){this._tokens.reportIfInvalid(e,this._startLineNumber)}},Xie=class e{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){let t=[];for(let n=0;n<this._tokenCount;n++)t.push(`(${this._getDeltaLine(n)+e},${this._getStartCharacter(n)}-${this._getEndCharacter(n)})`);return`[${t.join(`,`)}]`}getMaxDeltaLine(){let e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){let e=this._getTokenCount();if(e===0)return null;let t=this._getStartCharacter(0),n=this._getDeltaLine(e-1),r=this._getEndCharacter(e-1);return new X(0,t+1,n,r+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,n=this._getTokenCount()-1;for(;t<n;){let r=t+Math.floor((n-t)/2),i=this._getDeltaLine(r);if(i<e)t=r+1;else if(i>e)n=r-1;else{let i=r;for(;i>t&&this._getDeltaLine(i-1)===e;)i--;let a=r;for(;a<n&&this._getDeltaLine(a+1)===e;)a++;return new h6(this._tokens.subarray(4*i,4*a+4))}}return this._getDeltaLine(t)===e?new h6(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,n,r){let i=this._tokens,a=this._tokenCount,o=0,s=!1,c=0;for(let l=0;l<a;l++){let a=4*l,u=i[a],d=i[a+1],f=i[a+2],p=i[a+3];if((u>e||u===e&&f>=t)&&(u<n||u===n&&d<=r))s=!0;else{if(o===0&&(c=u),s){let e=4*o;i[e]=u-c,i[e+1]=d,i[e+2]=f,i[e+3]=p}else c!==0&&(i[a]=u-c);o++}}return this._tokenCount=o,c}split(t,n,r,i){let a=this._tokens,o=this._tokenCount,s=[],c=[],l=s,u=0,d=0;for(let e=0;e<o;e++){let o=4*e,s=a[o],f=a[o+1],p=a[o+2],m=a[o+3];if(s>t||s===t&&p>=n){if(s<r||s===r&&f<=i)continue;l!==c&&(l=c,u=0,d=s)}l[u++]=s-d,l[u++]=f,l[u++]=p,l[u++]=m}return[new e(new Uint32Array(s)),new e(new Uint32Array(c)),d]}acceptDeleteRange(e,t,n,r,i){let a=this._tokens,o=this._tokenCount,s=r-t,c=0,l=!1;for(let u=0;u<o;u++){let d=4*u,f=a[d],p=a[d+1],m=a[d+2],h=a[d+3];if(f<t||f===t&&m<=n){c++;continue}else if(f===t&&p<n)f===r&&m>i?m-=i-n:m=n;else if(f===t&&p===n)if(f===r&&m>i)m-=i-n;else{l=!0;continue}else if(f<r||f===r&&p<i)if(f===r&&m>i)f=t,p=n,m=p+(m-i);else{l=!0;continue}else if(f>r){if(s===0&&!l){c=o;break}f-=s}else if(f===r&&p>=i)e&&f===0&&(p+=e,m+=e),f-=s,p-=i-n,m-=i-n;else throw Error(`Not possible!`);let g=4*c;a[g]=f,a[g+1]=p,a[g+2]=m,a[g+3]=h,c++}this._tokenCount=c}acceptInsertText(e,t,n,r,i,a){let o=n===0&&r===1&&(a>=O.Digit0&&a<=O.Digit9||a>=O.A&&a<=O.Z||a>=O.a&&a<=O.z),s=this._tokens,c=this._tokenCount;for(let a=0;a<c;a++){let c=4*a,l=s[c],u=s[c+1],d=s[c+2];if(!(l<e||l===e&&d<t)){if(l===e&&d===t)if(o)d+=1;else continue;else if(l===e&&u<t&&t<d)n===0?d+=r:d=t;else{if(l===e&&u===t&&o)continue;if(l===e)if(l+=n,n===0)u+=r,d+=r;else{let e=d-u;u=i+(u-t),d=u+e}else l+=n}s[c]=l,s[c+1]=u,s[c+2]=d}}}static#e=this._rateLimiter=new Jie(10/60);reportIfInvalid(t,n){for(let r=0;r<this._tokenCount;r++){let i=this._getDeltaLine(r)+n;i<1?e._rateLimiter.runIfNotLimited(()=>{console.error(`Invalid Semantic Tokens Data From Extension: lineNumber < 1`)}):i>t.getLineCount()?e._rateLimiter.runIfNotLimited(()=>{console.error(`Invalid Semantic Tokens Data From Extension: lineNumber > model.getLineCount()`)}):this._getEndCharacter(r)>t.getLineLength(i)&&e._rateLimiter.runIfNotLimited(()=>{console.error(`Invalid Semantic Tokens Data From Extension: end character > model.getLineLength(lineNumber)`)})}}},h6=class{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}},g6;(function(e){e[e.NO_STYLING=2147483647]=`NO_STYLING`})(g6||={});var _6=class{constructor(e,t,n,r){this._legend=e,this._themeService=t,this._languageService=n,this._logService=r,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new $ie}getMetadata(e,t,n){let r=this._languageService.languageIdCodec.encodeLanguageId(n),i=this._hashTable.get(e,t,r),a;if(i)a=i.metadata;else{let i=this._legend.tokenTypes[e],o=[];if(i){let e=t;for(let t=0;e>0&&t<this._legend.tokenModifiers.length;t++)e&1&&o.push(this._legend.tokenModifiers[t]),e>>=1;let r=this._themeService.getColorTheme().getTokenStyleMetadata(i,o,n);if(r===void 0)a=g6.NO_STYLING;else{if(a=0,r.italic!==void 0){let e=(r.italic?NK.Italic:0)<<IK.FONT_STYLE_OFFSET;a|=e|IK.SEMANTIC_USE_ITALIC}if(r.bold!==void 0){let e=(r.bold?NK.Bold:0)<<IK.FONT_STYLE_OFFSET;a|=e|IK.SEMANTIC_USE_BOLD}if(r.underline!==void 0){let e=(r.underline?NK.Underline:0)<<IK.FONT_STYLE_OFFSET;a|=e|IK.SEMANTIC_USE_UNDERLINE}if(r.strikethrough!==void 0){let e=(r.strikethrough?NK.Strikethrough:0)<<IK.FONT_STYLE_OFFSET;a|=e|IK.SEMANTIC_USE_STRIKETHROUGH}if(r.foreground){let e=r.foreground<<IK.FOREGROUND_OFFSET;a|=e|IK.SEMANTIC_USE_FOREGROUND}a===0&&(a=g6.NO_STYLING)}}else a=g6.NO_STYLING,i=`not-in-legend`;this._hashTable.add(e,t,r,a)}return a}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,this._logService.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}warnInvalidLengthSemanticTokens(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,this._logService.warn(`Semantic token with invalid length detected at lineNumber ${e}, column ${t}`))}warnInvalidEditStart(e,t,n,r,i){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,this._logService.warn(`Invalid semantic tokens edit detected (previousResultId: ${e}, resultId: ${t}) at edit #${n}: The provided start offset ${r} is outside the previous data (length ${i}).`))}};_6=t([n(1,Fx),n(2,FI),n(3,Lb)],_6);var v6;(function(e){e[e.DesiredTokensPerArea=400]=`DesiredTokensPerArea`,e[e.DesiredMaxAreas=1024]=`DesiredMaxAreas`})(v6||={});function Zie(e,t,n){let r=e.data,i=e.data.length/5|0,a=Math.max(Math.ceil(i/v6.DesiredMaxAreas),v6.DesiredTokensPerArea),o=[],s=0,c=1,l=0;for(;s<i;){let e=s,u=Math.min(e+a,i);if(u<i){let t=u;for(;t-1>e&&r[5*t]===0;)t--;if(t-1===e){let e=u;for(;e+1<i&&r[5*e]===0;)e++;u=e}else u=t}let d=new Uint32Array((u-e)*4),f=0,p=0,m=0,h=0;for(;s<u;){let e=5*s,i=r[e],a=r[e+1],o=c+i|0,u=i===0?l+a|0:a,g=u+r[e+2]|0,_=r[e+3],v=r[e+4];if(g<=u)t.warnInvalidLengthSemanticTokens(o,u+1);else if(m===o&&h>u)t.warnOverlappingSemanticTokens(o,u+1);else{let e=t.getMetadata(_,v,n);e!==g6.NO_STYLING&&(p===0&&(p=o),d[f]=o-p,d[f+1]=u,d[f+2]=g,d[f+3]=e,f+=4,m=o,h=g)}c=o,l=u,s++}f!==d.length&&(d=d.subarray(0,f));let g=Yie.create(p,d);o.push(g)}return o}var Qie=class{constructor(e,t,n,r){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=n,this.metadata=r,this.next=null}},$ie=class e{static#e=this._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=e._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<e._SIZES.length?2/3*this._currentLength:0),this._elements=[],e._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let n=0;n<t;n++)e[n]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,n){return this._hash2(this._hash2(e,t),n)%this._currentLength}get(e,t,n){let r=this._hashFunc(e,t,n),i=this._elements[r];for(;i;){if(i.tokenTypeIndex===e&&i.tokenModifierSet===t&&i.languageId===n)return i;i=i.next}return null}add(t,n,r,i){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){let t=this._elements;this._currentLengthIndex++,this._currentLength=e._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<e._SIZES.length?2/3*this._currentLength:0),this._elements=[],e._nullOutEntries(this._elements,this._currentLength);for(let e of t){let t=e;for(;t;){let e=t.next;t.next=null,this._add(t),t=e}}}this._add(new Qie(t,n,r,i))}_add(e){let t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}},y6=class extends w{constructor(e,t,n){super(),this._themeService=e,this._logService=t,this._languageService=n,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}getStyling(e){return this._caches.has(e)||this._caches.set(e,new _6(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}};y6=t([n(0,Fx),n(1,Lb),n(2,FI)],y6),s({});var b6=B,x6;(function(e){e[e.PointerSize=3]=`PointerSize`,e[e.HoverBorderWidth=2]=`HoverBorderWidth`,e[e.HoverWindowEdgeMargin=2]=`HoverWindowEdgeMargin`})(x6||={});var S6=class extends rT{get _targetWindow(){return Yh(this._target.targetElements[0])}get _targetDocumentElement(){return Yh(this._target.targetElements[0]).document.documentElement}get isDisposed(){return this._isDisposed}get isMouseIn(){return this._lockMouseTracker.isMouseIn}get domNode(){return this._hover.containerDomNode}get onDispose(){return this._onDispose.event}get onRequestLayout(){return this._onRequestLayout.event}get anchor(){return this._hoverPosition===UU.BELOW?gj.BELOW:gj.ABOVE}get x(){return this._x}get y(){return this._y}get isLocked(){return this._isLocked}set isLocked(e){this._isLocked!==e&&(this._isLocked=e,this._hoverContainer.classList.toggle(`locked`,this._isLocked))}addMouseTrackingElement(e){return this._lockMouseTracker.addElement(e)}constructor(e,t,n,r,i){if(super(),this._keybindingService=t,this._configurationService=n,this._markdownRenderer=r,this._accessibilityService=i,this._messageListeners=new C,this._isDisposed=!1,this._forcePosition=!1,this._x=0,this._y=0,this._isLocked=!1,this._enableFocusTraps=!1,this._addedFocusTrap=!1,this._maxHeightRatioRelativeToWindow=.5,this._onDispose=this._register(new E),this._onRequestLayout=this._register(new E),this._linkHandler=e.linkHandler,this._target=`targetElements`in e.target?e.target:new eae(e.target),e.style)switch(e.style){case Lj.Pointer:e.appearance??={},e.appearance.compact??=!0,e.appearance.showPointer??=!0;break;case Lj.Mouse:e.appearance??={},e.appearance.compact??=!0;break}this._hoverPointer=e.appearance?.showPointer?b6(`div.workbench-hover-pointer`):void 0,this._hover=this._register(new WU(!e.appearance?.skipFadeInAnimation)),this._hover.containerDomNode.classList.add(`workbench-hover`),e.appearance?.compact&&this._hover.containerDomNode.classList.add(`workbench-hover`,`compact`),e.additionalClasses&&this._hover.containerDomNode.classList.add(...e.additionalClasses),e.position?.forcePosition&&(this._forcePosition=!0),e.trapFocus&&(this._enableFocusTraps=!0);let a=e.appearance?.maxHeightRatio;a!==void 0&&a>0&&a<=1&&(this._maxHeightRatioRelativeToWindow=a),this._hoverPosition=e.position?.hoverPosition===void 0?UU.ABOVE:xe(e.position.hoverPosition)?e.position.hoverPosition:UU.BELOW,this.onmousedown(this._hover.containerDomNode,e=>e.stopPropagation()),this.onkeydown(this._hover.containerDomNode,e=>{e.equals(F.Escape)&&this.dispose()}),this._register(L(this._targetWindow,`blur`,()=>this.dispose()));let o=b6(`div.hover-row.markdown-hover`),s=b6(`div.hover-contents`);if(typeof e.content==`string`)s.textContent=e.content,s.style.whiteSpace=`pre-wrap`;else if(x_(e.content))s.appendChild(e.content),s.classList.add(`html-hover-contents`);else{let t=e.content,{element:n}=this._register(this._markdownRenderer.render(t,{actionHandler:this._linkHandler,asyncRenderCallback:()=>{s.classList.add(`code-hover-contents`),this.layout(),this._onRequestLayout.fire()}}));s.appendChild(n)}if(o.appendChild(s),this._hover.contentsDomNode.appendChild(o),e.actions&&e.actions.length>0){let t=b6(`div.hover-row.status-bar`),n=b6(`div.actions`);e.actions.forEach(e=>{let t=this._keybindingService.lookupKeybinding(e.commandId),r=t?t.getLabel():null;this._register(GU.render(n,{label:e.label,commandId:e.commandId,run:t=>{e.run(t),this.dispose()},iconClass:e.iconClass},r))}),t.appendChild(n),this._hover.containerDomNode.appendChild(t)}this._hoverContainer=b6(`div.workbench-hover-container`),this._hoverPointer&&this._hoverContainer.appendChild(this._hoverPointer),this._hoverContainer.appendChild(this._hover.containerDomNode);let c;if(c=e.actions&&e.actions.length>0?!1:e.persistence?.hideOnHover===void 0?typeof e.content==`string`||bD(e.content)&&!e.content.value.includes(`](`)&&!e.content.value.includes(`</a>`):e.persistence.hideOnHover,e.appearance?.showHoverHint){let e=b6(`div.hover-row.status-bar`),t=b6(`div.info`);t.textContent=D(1948,`Hold {0} key to mouse over`,si?`Option`:`Alt`),e.appendChild(t),this._hover.containerDomNode.appendChild(e)}let l=[...this._target.targetElements];c||l.push(this._hoverContainer);let u=this._register(new C6(l));if(this._register(u.onMouseOut(()=>{this._isLocked||this.dispose()})),c){let e=[...this._target.targetElements,this._hoverContainer];this._lockMouseTracker=this._register(new C6(e)),this._register(this._lockMouseTracker.onMouseOut(()=>{this._isLocked||this.dispose()}))}else this._lockMouseTracker=u}addFocusTrap(){if(!this._enableFocusTraps||this._addedFocusTrap)return;this._addedFocusTrap=!0;let e=this._hover.containerDomNode,t=this.findLastFocusableChild(this._hover.containerDomNode);if(t){let n=R_(this._hoverContainer,b6(`div`)),r=z(this._hoverContainer,b6(`div`));n.tabIndex=0,r.tabIndex=0,this._register(L(r,`focus`,t=>{e.focus(),t.preventDefault()})),this._register(L(n,`focus`,e=>{t.focus(),e.preventDefault()}))}}findLastFocusableChild(e){if(e.hasChildNodes())for(let t=0;t<e.childNodes.length;t++){let n=e.childNodes.item(e.childNodes.length-t-1);if(n.nodeType===n.ELEMENT_NODE){let e=n;if(typeof e.tabIndex==`number`&&e.tabIndex>=0)return e}let r=this.findLastFocusableChild(n);if(r)return r}}render(e){e.appendChild(this._hoverContainer);let t=this._hoverContainer.contains(i_(this._hoverContainer.ownerDocument))&&KU(this._configurationService.getValue(`accessibility.verbosity.hover`)===!0&&this._accessibilityService.isScreenReaderOptimized(),this._keybindingService.lookupKeybinding(`editor.action.accessibleView`)?.getAriaLabel());t&&KC(t),this.layout(),this.addFocusTrap()}layout(){this._hover.containerDomNode.classList.remove(`right-aligned`),this._hover.contentsDomNode.style.maxHeight=``;let e=e=>{let t=Bg(e),n=e.getBoundingClientRect();return{top:n.top*t,bottom:n.bottom*t,right:n.right*t,left:n.left*t}},{top:t,right:n,bottom:r,left:i}=this._target.targetElements.map(t=>e(t))[0],a=n-i,o=r-t,s={top:t,right:n,bottom:r,left:i,width:a,height:o,center:{x:i+a/2,y:t+o/2}};if(this.adjustHorizontalHoverPosition(s),this.adjustVerticalHoverPosition(s),this.adjustHoverMaxHeight(s),this._hoverContainer.style.padding=``,this._hoverContainer.style.margin=``,this._hoverPointer){switch(this._hoverPosition){case UU.RIGHT:s.left+=x6.PointerSize,s.right+=x6.PointerSize,this._hoverContainer.style.paddingLeft=`${x6.PointerSize}px`,this._hoverContainer.style.marginLeft=`${-x6.PointerSize}px`;break;case UU.LEFT:s.left-=x6.PointerSize,s.right-=x6.PointerSize,this._hoverContainer.style.paddingRight=`${x6.PointerSize}px`,this._hoverContainer.style.marginRight=`${-x6.PointerSize}px`;break;case UU.BELOW:s.top+=x6.PointerSize,s.bottom+=x6.PointerSize,this._hoverContainer.style.paddingTop=`${x6.PointerSize}px`,this._hoverContainer.style.marginTop=`${-x6.PointerSize}px`;break;case UU.ABOVE:s.top-=x6.PointerSize,s.bottom-=x6.PointerSize,this._hoverContainer.style.paddingBottom=`${x6.PointerSize}px`,this._hoverContainer.style.marginBottom=`${-x6.PointerSize}px`;break}s.center.x=s.left+a/2,s.center.y=s.top+o/2}this.computeXCordinate(s),this.computeYCordinate(s),this._hoverPointer&&(this._hoverPointer.classList.remove(`top`),this._hoverPointer.classList.remove(`left`),this._hoverPointer.classList.remove(`right`),this._hoverPointer.classList.remove(`bottom`),this.setHoverPointerPosition(s)),this._hover.onContentsChanged()}computeXCordinate(e){let t=this._hover.containerDomNode.clientWidth+x6.HoverBorderWidth;this._target.x===void 0?this._hoverPosition===UU.RIGHT?this._x=e.right:this._hoverPosition===UU.LEFT?this._x=e.left-t:(this._hoverPointer?this._x=e.center.x-this._hover.containerDomNode.clientWidth/2:this._x=e.left,this._x+t>=this._targetDocumentElement.clientWidth&&(this._hover.containerDomNode.classList.add(`right-aligned`),this._x=Math.max(this._targetDocumentElement.clientWidth-t-x6.HoverWindowEdgeMargin,this._targetDocumentElement.clientLeft))):this._x=this._target.x,this._x<this._targetDocumentElement.clientLeft&&(this._x=e.left+x6.HoverWindowEdgeMargin)}computeYCordinate(e){this._target.y===void 0?this._hoverPosition===UU.ABOVE?this._y=e.top:this._hoverPosition===UU.BELOW?this._y=e.bottom-2:this._hoverPointer?this._y=e.center.y+this._hover.containerDomNode.clientHeight/2:this._y=e.bottom:this._y=this._target.y,this._y>this._targetWindow.innerHeight&&(this._y=e.bottom)}adjustHorizontalHoverPosition(e){if(this._target.x!==void 0)return;let t=this._hoverPointer?x6.PointerSize:0;if(this._forcePosition){let n=t+x6.HoverBorderWidth;this._hoverPosition===UU.RIGHT?this._hover.containerDomNode.style.maxWidth=`${this._targetDocumentElement.clientWidth-e.right-n}px`:this._hoverPosition===UU.LEFT&&(this._hover.containerDomNode.style.maxWidth=`${e.left-n}px`);return}this._hoverPosition===UU.RIGHT?this._targetDocumentElement.clientWidth-e.right<this._hover.containerDomNode.clientWidth+t&&(e.left>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=UU.LEFT:this._hoverPosition=UU.BELOW):this._hoverPosition===UU.LEFT&&(e.left<this._hover.containerDomNode.clientWidth+t&&(this._targetDocumentElement.clientWidth-e.right>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=UU.RIGHT:this._hoverPosition=UU.BELOW),e.left-this._hover.containerDomNode.clientWidth-t<=this._targetDocumentElement.clientLeft&&(this._hoverPosition=UU.RIGHT))}adjustVerticalHoverPosition(e){if(this._target.y!==void 0||this._forcePosition)return;let t=this._hoverPointer?x6.PointerSize:0;this._hoverPosition===UU.ABOVE?e.top-this._hover.containerDomNode.clientHeight-t<0&&(this._hoverPosition=UU.BELOW):this._hoverPosition===UU.BELOW&&e.bottom+this._hover.containerDomNode.offsetHeight+t>this._targetWindow.innerHeight&&(this._hoverPosition=UU.ABOVE)}adjustHoverMaxHeight(e){let t=this._targetWindow.innerHeight*this._maxHeightRatioRelativeToWindow;if(this._forcePosition){let n=(this._hoverPointer?x6.PointerSize:0)+x6.HoverBorderWidth;this._hoverPosition===UU.ABOVE?t=Math.min(t,e.top-n):this._hoverPosition===UU.BELOW&&(t=Math.min(t,this._targetWindow.innerHeight-e.bottom-n))}if(this._hover.containerDomNode.style.maxHeight=`${t}px`,this._hover.contentsDomNode.clientHeight<this._hover.contentsDomNode.scrollHeight){let e=`${this._hover.scrollbar.options.verticalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingRight!==e&&(this._hover.contentsDomNode.style.paddingRight=e)}}setHoverPointerPosition(e){if(this._hoverPointer)switch(this._hoverPosition){case UU.LEFT:case UU.RIGHT:{this._hoverPointer.classList.add(this._hoverPosition===UU.LEFT?`right`:`left`);let t=this._hover.containerDomNode.clientHeight;t>e.height?this._hoverPointer.style.top=`${e.center.y-(this._y-t)-x6.PointerSize}px`:this._hoverPointer.style.top=`${Math.round(t/2)-x6.PointerSize}px`;break}case UU.ABOVE:case UU.BELOW:{this._hoverPointer.classList.add(this._hoverPosition===UU.ABOVE?`bottom`:`top`);let t=this._hover.containerDomNode.clientWidth,n=Math.round(t/2)-x6.PointerSize,r=this._x+n;(r<e.left||r>e.right)&&(n=e.center.x-this._x-x6.PointerSize),this._hoverPointer.style.left=`${n}px`;break}}}focus(){this._hover.containerDomNode.focus()}hide(){this.dispose()}dispose(){this._isDisposed||(this._onDispose.fire(),this._target.dispose?.(),this._hoverContainer.remove(),this._messageListeners.dispose(),super.dispose()),this._isDisposed=!0}};S6=t([n(1,nF),n(2,Dx),n(3,AK),n(4,VL)],S6);var C6=class extends rT{get onMouseOut(){return this._onMouseOut.event}get isMouseIn(){return this._isMouseIn}constructor(e,t=200){super(),this._elements=e,this._eventDebounceDelay=t,this._isMouseIn=!0,this._mouseTimer=this._register(new Ln),this._onMouseOut=this._register(new E);for(let e of this._elements)this.onmouseover(e,()=>this._onTargetMouseOver()),this.onmouseleave(e,()=>this._onTargetMouseLeave())}_onTargetMouseOver(){this._isMouseIn=!0,this._mouseTimer.clear()}_onTargetMouseLeave(){this._isMouseIn=!1,this._mouseTimer.value=new vc(()=>this._fireIfMouseOutside(),this._eventDebounceDelay)}_fireIfMouseOutside(){this._isMouseIn||this._onMouseOut.fire()}addElement(e){if(this._elements.includes(e))return w.None;this._elements.push(e);let t=new C;return t.add(L(e,R.MOUSE_OVER,()=>this._onTargetMouseOver())),t.add(L(e,R.MOUSE_LEAVE,()=>this._onTargetMouseLeave())),t.add(S(()=>{let t=this._elements.indexOf(e);t>=0&&this._elements.splice(t,1)})),t}},eae=class{constructor(e){this._element=e,this.targetElements=[this._element]}dispose(){}},tae=class{constructor(e,t,n){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=n}onDidHide(){this._cancellationTokenSource&&=(this._cancellationTokenSource.dispose(!0),void 0)}async update(e,t,n){if(this._cancellationTokenSource&&=(this._cancellationTokenSource.dispose(!0),void 0),this.isDisposed)return;let r;if(ge(e)||x_(e)||e===void 0)r=e;else{this._cancellationTokenSource=new Lr;let i=this._cancellationTokenSource.token,a;if(a=Rj(e)?Me(e.markdown)?e.markdown(i).then(t=>t??e.markdownNotSupportedFallback):e.markdown??e.markdownNotSupportedFallback:e.element(i),a instanceof Promise?(this._hoverWidget||this.show(D(1949,`Loading...`),t,n),r=await a):r=a,this.isDisposed||i.isCancellationRequested)return}this.show(r,t,n)}show(e,t,n){let r=this._hoverWidget;if(this.hasContent(e)){let i={content:e,target:this.target,actions:n?.actions,linkHandler:n?.linkHandler,trapFocus:n?.trapFocus,appearance:{showPointer:this.hoverDelegate.placement===`element`,skipFadeInAnimation:!this.fadeInAnimation||!!r,showHoverHint:n?.appearance?.showHoverHint},position:{hoverPosition:UU.BELOW}};this._hoverWidget=this.hoverDelegate.showHover(i,t)}r?.dispose()}hasContent(e){return e?bD(e)?!!e.value:!0:!1}get isDisposed(){return this._hoverWidget?.isDisposed}dispose(){this._hoverWidget?.dispose(),this._cancellationTokenSource?.dispose(!0),this._cancellationTokenSource=void 0}},nae=3,w6=class extends w{get _currentHover(){return this._hoverStack.at(-1)?.hover}get _currentHoverOptions(){return this._hoverStack.at(-1)?.options}_getContainingHoverIndex(e){let t=x_(e)?[e]:e.targetElements;for(let e=this._hoverStack.length-1;e>=0;e--)for(let n of t)if(Jg(n,this._hoverStack[e].hover.domNode))return e;return-1}constructor(e,t,n,r,i,a){super(),this._instantiationService=e,this._configurationService=t,this._keybindingService=r,this._layoutService=i,this._accessibilityService=a,this._hoverStack=[],this._currentDelayedHoverWasShown=!1,this._delayedHovers=new Map,this._managedHovers=new Map,this._register(n.onDidShowContextMenu(()=>this.hideHover())),this._register(aC.registerCommandAndKeybindingRule({id:`workbench.action.showHover`,weight:iC.EditorCore,primary:$f(Qf.CtrlCmd|F.KeyK,Qf.CtrlCmd|F.KeyI),handler:()=>{this._showAndFocusHoverForActiveElement()}}))}showInstantHover(e,t,n,r){let i=this._createHover(e,n);if(i)return this._showHover(i,e,t),i.hover}showDelayedHover(e,t){if(e.id===void 0&&(e.id=E6(e.content)),!this._currentDelayedHover||this._currentDelayedHoverWasShown){if(this._currentHover?.isLocked)return;if(T6(this._currentHoverOptions)===T6(e))return this._currentHover;if(this._currentHover&&!this._currentHover.isDisposed&&this._currentDelayedHoverGroupId!==void 0&&this._currentDelayedHoverGroupId===t?.groupId)return this.showInstantHover({...e,appearance:{...e.appearance,skipFadeInAnimation:!0}})}else if(this._currentDelayedHover&&T6(this._currentHoverOptions)===T6(e))return this._currentDelayedHover;let n=this._createHover(e,void 0);if(!n){this._currentDelayedHover=void 0,this._currentDelayedHoverWasShown=!1,this._currentDelayedHoverGroupId=void 0;return}return this._currentDelayedHover=n.hover,this._currentDelayedHoverWasShown=!1,this._currentDelayedHoverGroupId=t?.groupId,dc(t?.reducedDelay?this._configurationService.getValue(`workbench.hover.reducedDelay`):this._configurationService.getValue(`workbench.hover.delay`)).then(()=>{n.hover&&!n.hover.isDisposed&&(this._currentDelayedHoverWasShown=!0,this._showHover(n,e))}),n.hover}setupDelayedHover(e,t,n){return this._setupDelayedHover(e,n=>{let r={...typeof t==`function`?t():t,target:e};return r.style===Lj.Mouse&&n&&(r.target=k6(e,n)),r},n)}setupDelayedHoverAtMouse(e,t,n){return this._setupDelayedHover(e,n=>({...typeof t==`function`?t():t,target:n?k6(e,n):e}),n)}_setupDelayedHover(e,t,n){let r=new C;return r.add(L(e,R.MOUSE_OVER,e=>{this.showDelayedHover(t(e),{groupId:n?.groupId,reducedDelay:n?.reducedDelay})})),n?.setupKeyboardEvents&&r.add(L(e,R.KEY_DOWN,e=>{let n=new vp(e);(n.equals(F.Space)||n.equals(F.Enter))&&this.showInstantHover(t(),!0)})),this._delayedHovers.set(e,{show:e=>{this.showInstantHover(t(),e)}}),r.add(S(()=>this._delayedHovers.delete(e))),r}_createHover(e,t){if(this._currentDelayedHover=void 0,e.content===``)return;if(e.id===void 0&&(e.id=E6(e.content)),this._getContainingHoverIndex(e.target)>=0){if(this._hoverStack.length>=nae)return}else if(this._currentHover?.isLocked||T6(this._currentHoverOptions)===T6(e))return;this._lastHoverOptions=e;let n=e.trapFocus||this._accessibilityService.isScreenReaderOptimized(),r=i_(),a;t||n&&r&&(r.classList.contains(`monaco-hover`)||(a=r));let o=new C,s=this._instantiationService.createInstance(S6,e);if(e.persistence?.sticky&&(s.isLocked=!0),e.position?.hoverPosition&&!xe(e.position.hoverPosition)&&(e.target={targetElements:x_(e.target)?[e.target]:e.target.targetElements,x:e.position.hoverPosition.x+10}),s.onDispose(()=>{let e=this._hoverStack.findIndex(e=>e.hover===s);if(e>=0){let t=this._hoverStack[e];for(c_(s.domNode)&&t.lastFocusedElementBeforeOpen&&t.lastFocusedElementBeforeOpen.focus();this._hoverStack.length>e+1;){let e=this._hoverStack.pop();e.contextView.dispose(),e.hover.dispose()}this._hoverStack.splice(e,1),t.contextView.dispose()}o.dispose()},void 0,o),!e.container){let t=x_(e.target)?e.target:e.target.targetElements[0];e.container=this._layoutService.getContainer(Yh(t))}if(e.persistence?.sticky)o.add(L(Yh(e.container).document,R.MOUSE_DOWN,e=>{Jg(e.target,s.domNode)||this._hideHoverAndDescendants(s)}));else{if(`targetElements`in e.target)for(let t of e.target.targetElements)o.add(L(t,R.CLICK,()=>this._hideHoverAndDescendants(s)));else o.add(L(e.target,R.CLICK,()=>this._hideHoverAndDescendants(s)));let t=i_();if(t){let n=Yh(t).document;o.add(L(t,R.KEY_DOWN,t=>this._keyDown(t,s,!!e.persistence?.hideOnKeyDown))),o.add(L(n,R.KEY_DOWN,t=>this._keyDown(t,s,!!e.persistence?.hideOnKeyDown))),o.add(L(t,R.KEY_UP,e=>this._keyUp(e,s))),o.add(L(n,R.KEY_UP,e=>this._keyUp(e,s)))}}if(`IntersectionObserver`in i){let t=new IntersectionObserver(e=>this._intersectionChange(e,s),{threshold:0}),n=`targetElements`in e.target?e.target.targetElements[0]:e.target;t.observe(n),o.add(S(()=>t.disconnect()))}return{hover:s,lastFocusedElementBeforeOpen:a,store:o}}_showHover(e,t,n){let{hover:r,lastFocusedElementBeforeOpen:i,store:a}=e,o=this._getContainingHoverIndex(t.target),s=o>=0;if(!s)this._hideAllHovers();else{for(let e=this._hoverStack.length-1;e>o;e--)this._hoverStack[e].hover.dispose();this._hoverStack.length=o+1}if(s)for(let e=0;e<=o;e++)a.add(this._hoverStack[e].hover.addMouseTrackingElement(r.domNode));let c=new xj(t.container??this._layoutService.getContainer(Yh(x_(t.target)?t.target:t.target.targetElements[0])),pj.ABSOLUTE),l={hover:r,options:t,contextView:c,lastFocusedElementBeforeOpen:i};this._hoverStack.push(l);let u=new iae(r,n,this._hoverStack.length);c.show(u),a.add(r.onRequestLayout(()=>c.layout())),t.onDidShow?.()}_hideHoverAndDescendants(e){let t=this._hoverStack.findIndex(t=>t.hover===e);if(!(t<0)){for(let e=this._hoverStack.length-1;e>=t;e--)this._hoverStack[e].hover.dispose();this._hoverStack.length=t}}_hideAllHovers(){for(let e=this._hoverStack.length-1;e>=0;e--)this._hoverStack[e].hover.dispose();this._hoverStack.length=0}hideHover(e){this._hoverStack.length!==0&&(!e&&this._currentHover?.isLocked||this.doHideHover())}doHideHover(){let e=this._hoverStack.length;this._hoverStack[e-1]?.hover.dispose(),this._hoverStack.length=e-1}_intersectionChange(e,t){e[e.length-1].isIntersecting||t.dispose()}showAndFocusLastHover(){this._lastHoverOptions&&this.showInstantHover(this._lastHoverOptions,!0,!0)}_showAndFocusHoverForActiveElement(){let e=i_();for(;e;){let t=this._delayedHovers.get(e)??this._managedHovers.get(e);if(t){t.show(!0);return}e=e.parentElement}}_keyDown(e,t,n){if(e.key===`Alt`){for(let e of this._hoverStack)e.hover.isLocked=!0;return}let r=new vp(e);if(!(this._keybindingService.resolveKeyboardEvent(r).getSingleModifierDispatchChords().some(e=>!!e)||this._keybindingService.softDispatch(r,r.target).kind!==rF.NoMatchingKb)&&n&&(!this._currentHoverOptions?.trapFocus||e.key!==`Tab`)){let e=this._hoverStack.find(e=>e.hover===t);this._hideHoverAndDescendants(t),e?.lastFocusedElementBeforeOpen?.focus()}}_keyUp(e,t){if(e.key===`Alt`){for(let e of this._hoverStack)e.options.persistence?.sticky||(e.hover.isLocked=!1);if(!this._hoverStack.some(e=>e.hover.isMouseIn)){let e=this._hoverStack[this._hoverStack.length-1];this._hideAllHovers(),e?.lastFocusedElementBeforeOpen?.focus()}}}setupManagedHover(e,t,n,r){if(e.showNativeHover)return rae(t,n);t.setAttribute(`custom-hover`,`true`),t.title!==``&&(console.warn(`HTML element already has a title attribute, which will conflict with the custom hover. Please remove the title attribute.`),console.trace(`Stack trace:`,t.title),t.title=``);let i,a,o=(t,n)=>{let r=a!==void 0;t&&(a?.dispose(),a=void 0),n&&(i?.dispose(),i=void 0),r&&(e.onDidHideHover?.(),a=void 0)},s=(i,o,s,c)=>new vc(async()=>{(!a||a.isDisposed)&&(a=new tae(e,s||t,i>0),await a.update(typeof n==`function`?n():n,o,{...r,trapFocus:c}))},i),c=new C,l=!1;c.add(L(t,R.MOUSE_DOWN,()=>{l=!0,o(!0,!0)},!0)),c.add(L(t,R.MOUSE_UP,()=>{l=!1},!0)),c.add(L(t,R.MOUSE_LEAVE,e=>{l=!1,o(!1,e.fromElement===t)},!0)),c.add(L(t,R.MOUSE_OVER,r=>{if(i)return;let a=new C,c={targetElements:[t],dispose:()=>{}};(e.placement===void 0||e.placement===`mouse`)&&a.add(L(t,R.MOUSE_MOVE,e=>{c.x=e.x+10,O6(e,t)||o(!0,!0)},!0)),i=a,O6(r,t)&&a.add(s(typeof e.delay==`function`?e.delay(n):e.delay,!1,c))},!0)),fv(t)||c.add(L(t,R.FOCUS,r=>{if(l||i||!O6(r,t))return;let a={targetElements:[t],dispose:()=>{}},c=new C;c.add(L(t,R.BLUR,()=>o(!0,!0),!0)),c.add(s(typeof e.delay==`function`?e.delay(n):e.delay,!1,a)),i=c},!0));let u={show:e=>{o(!1,!0)},hide:()=>{o(!0,!0)},update:async(e,t)=>{n=e,await a?.update(n,void 0,t)},dispose:()=>{this._managedHovers.delete(t),c.dispose(),o(!0,!0)}};return this._managedHovers.set(t,u),u}showManagedHover(e){let t=this._managedHovers.get(e);t&&t.show(!0)}dispose(){this._managedHovers.forEach(e=>e.dispose()),super.dispose()}};w6=t([n(0,Cy),n(1,Dx),n(2,tF),n(3,nF),n(4,Ey),n(5,VL)],w6);function T6(e){if(e!==void 0)return e?.id??e}function E6(e){if(!x_(e))return typeof e==`string`?e.toString():e.value}function D6(e){let t=typeof e==`function`?e():e;if(ge(t))return fD(t);if(Rj(t))return t.markdownNotSupportedFallback}function rae(e,t){function n(t){t?e.setAttribute(`title`,t):e.removeAttribute(`title`)}return n(D6(t)),{update:e=>n(D6(e)),show:()=>{},hide:()=>{},dispose:()=>n(void 0)}}var iae=class{get anchorPosition(){return this._hover.anchor}constructor(e,t=!1,n=1){this._hover=e,this._focus=t,this.layer=n}render(e){return this._hover.render(e),this._focus&&this._hover.focus(),this._hover}getAnchor(){return{x:this._hover.x,y:this._hover.y}}layout(){this._hover.layout()}};function O6(e,t){return x_(e.target)&&aae(e.target,t)===t}function aae(e,t){for(t??=Yh(e).document.body;!e.hasAttribute(`custom-hover`)&&e!==t;)e=e.parentElement;return e}function k6(e,t){return{targetElements:[e],x:t.x+10}}Er((e,t)=>{let n=e.getColor(Xl);n&&(t.addRule(`.monaco-hover.workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${n.transparent(.5)}; }`),t.addRule(`.monaco-hover.workbench-hover hr { border-top: 1px solid ${n.transparent(.5)}; }`))});var A6=V(`IInlineCompletionsService`),j6,M6=new W(`inlineCompletions.snoozed`,!1,D(150,`Whether inline completions are currently snoozed`)),N6=class extends w{static#e=j6=this;static#t=this.SNOOZE_DURATION=3e5;get snoozeTimeLeft(){return this._snoozeTimeEnd===void 0?0:Math.max(0,this._snoozeTimeEnd-Date.now())}constructor(e,t){super(),this._contextKeyService=e,this._telemetryService=t,this._onDidChangeIsSnoozing=this._register(new E),this.onDidChangeIsSnoozing=this._onDidChangeIsSnoozing.event,this._snoozeTimeEnd=void 0,this._recentCompletionIds=[],this._timer=this._register(new vc);let n=M6.bindTo(this._contextKeyService);this._register(this.onDidChangeIsSnoozing(()=>n.set(this.isSnoozing())))}snooze(e=j6.SNOOZE_DURATION){this.setSnoozeDuration(e+this.snoozeTimeLeft)}setSnoozeDuration(e){if(e<0)throw new y(`Invalid snooze duration: ${e}. Duration must be non-negative.`);if(e===0){this.cancelSnooze();return}let t=this.isSnoozing(),n=this.snoozeTimeLeft;this._snoozeTimeEnd=Date.now()+e,t||this._onDidChangeIsSnoozing.fire(!0),this._timer.cancelAndSet(()=>{if(!this.isSnoozing())this._onDidChangeIsSnoozing.fire(!1);else throw new y(`Snooze timer did not fire as expected`)},this.snoozeTimeLeft+1),this._reportSnooze(e-n,e)}isSnoozing(){return this.snoozeTimeLeft>0}cancelSnooze(){this.isSnoozing()&&(this._reportSnooze(-this.snoozeTimeLeft,0),this._snoozeTimeEnd=void 0,this._timer.cancel(),this._onDidChangeIsSnoozing.fire(!1))}reportNewCompletion(e){this._lastCompletionId=e,this._recentCompletionIds.unshift(e),this._recentCompletionIds.length>5&&this._recentCompletionIds.pop()}_reportSnooze(e,t){let n=Math.round(e/1e3),r=Math.round(t/1e3);this._telemetryService.publicLog2(`inlineCompletions.snooze`,{deltaSeconds:n,totalSeconds:r,lastCompletionId:this._lastCompletionId,recentCompletionIds:this._recentCompletionIds})}};N6=j6=t([n(0,uS),n(1,NI)],N6);var oae=`editor.action.inlineSuggest.snooze`,sae=`editor.action.inlineSuggest.cancelSnooze`,P6=`inlineCompletions.lastSnoozeDuration`,cae=class e extends _C{static#e=this.ID=oae;constructor(){super({id:e.ID,title:Nr(151,`Snooze Inline Suggestions`),precondition:jS.true(),f1:!0})}async run(e,...t){let n=e.get(WR),r=e.get(A6),i=e.get(Ex),a;t.length>0&&typeof t[0]==`number`&&(a=t[0]*6e4),a||=await this.getDurationFromUser(n,i),a&&r.setSnoozeDuration(a)}async getDurationFromUser(e,t){let n=t.getNumber(P6,yx.PROFILE,3e5),r=[{label:`1 minute`,id:`1`,value:6e4},{label:`5 minutes`,id:`5`,value:3e5},{label:`10 minutes`,id:`10`,value:6e5},{label:`15 minutes`,id:`15`,value:9e5},{label:`30 minutes`,id:`30`,value:18e5},{label:`60 minutes`,id:`60`,value:36e5}],i=await e.pick(r,{placeHolder:D(152,`Select snooze duration for Inline Suggestions`),activeItem:r.find(e=>e.value===n)});if(i)return t.store(P6,i.value,yx.PROFILE,bx.USER),i.value}},lae=class e extends _C{static#e=this.ID=sae;constructor(){super({id:e.ID,title:Nr(153,`Cancel Snooze Inline Suggestions`),precondition:M6,f1:!0})}async run(e){e.get(A6).cancelSnooze()}},uae=class{constructor(){this._trackedWord=Oh(this,void 0),this.trackedWord=this._trackedWord,this._trackedWord.set(void 0,void 0)}},F6=V(`renameSymbolTrackerService`),I6=class{constructor(e){this.metadata=e}static convert(e){return e.edits.map(e=>{if(L6.is(e))return L6.lift(e);if(R6.is(e))return R6.lift(e);throw Error(`Unsupported edit`)})}},L6=class e extends I6{static is(t){return t instanceof e?!0:ye(t)&&k.isUri(t.resource)&&ye(t.textEdit)}static lift(t){return t instanceof e?t:new e(t.resource,t.textEdit,t.versionId,t.metadata)}constructor(e,t,n=void 0,r){super(r),this.resource=e,this.textEdit=t,this.versionId=n}},R6=class e extends I6{static is(t){return t instanceof e?!0:ye(t)&&(!!t.newResource||!!t.oldResource)}static lift(t){return t instanceof e?t:new e(t.oldResource,t.newResource,t.options,t.metadata)}constructor(e,t,n={},r){super(r),this.oldResource=e,this.newResource=t,this.options=n}},z6=V(`IWorkspaceEditService`),B6=Object.freeze({id:`editor`,order:5,type:`object`,title:D(217,`Editor`),scope:vP.LANGUAGE_OVERRIDABLE}),V6={...B6,properties:{"editor.tabSize":{type:`number`,default:wz.tabSize,minimum:1,maximum:100,markdownDescription:D(218,`The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.`,"`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:`string`,enum:[`tabSize`]},{type:`number`,minimum:1}],default:`tabSize`,markdownDescription:D(219,'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:`boolean`,default:wz.insertSpaces,markdownDescription:D(220,"Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:`boolean`,default:wz.detectIndentation,markdownDescription:D(221,`Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.`,"`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:`boolean`,default:wz.trimAutoWhitespace,description:D(222,`Remove trailing auto inserted whitespace.`)},"editor.largeFileOptimizations":{type:`boolean`,default:wz.largeFileOptimizations,description:D(223,`Special handling for large files to disable certain memory intensive features.`)},"editor.wordBasedSuggestions":{enum:[`off`,`offWithInlineSuggestions`,`currentDocument`,`matchingDocuments`,`allDocuments`],default:`offWithInlineSuggestions`,enumDescriptions:[D(224,`Turn off Word Based Suggestions.`),D(225,`Turn off Word Based Suggestions when Inline Suggestions are present.`),D(226,`Only suggest words from the active document.`),D(227,`Suggest words from all open documents of the same language.`),D(228,`Suggest words from all open documents.`)],description:D(229,`Controls whether completions should be computed based on words in the document and from which documents they are computed.`),experiment:{mode:`auto`}},"editor.semanticHighlighting.enabled":{enum:[!0,!1,`configuredByTheme`],enumDescriptions:[D(230,`Semantic highlighting enabled for all color themes.`),D(231,`Semantic highlighting disabled for all color themes.`),D(232,"Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:`configuredByTheme`,description:D(233,`Controls whether the semanticHighlighting is shown for the languages that support it.`)},"editor.stablePeek":{type:`boolean`,default:!1,markdownDescription:D(234,"Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:`integer`,default:2e4,description:D(235,`Lines above this length will not be tokenized for performance reasons`)},"editor.experimental.asyncTokenization":{type:`boolean`,default:!0,description:D(236,`Controls whether the tokenization should happen asynchronously on a web worker.`),tags:[`experimental`]},"editor.experimental.asyncTokenizationLogging":{type:`boolean`,default:!1,description:D(237,`Controls whether async tokenization should be logged. For debugging only.`)},"editor.experimental.asyncTokenizationVerification":{type:`boolean`,default:!1,description:D(238,`Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only.`),tags:[`experimental`]},"editor.experimental.treeSitterTelemetry":{type:`boolean`,default:!1,markdownDescription:D(239,"Controls whether tree sitter parsing should be turned on and telemetry collected. Setting `#editor.experimental.preferTreeSitter#` for specific languages will take precedence."),tags:[`experimental`],experiment:{mode:`auto`}},"editor.experimental.preferTreeSitter.css":{type:`boolean`,default:!1,markdownDescription:D(240,"Controls whether tree sitter parsing should be turned on for css. This will take precedence over `#editor.experimental.treeSitterTelemetry#` for css."),tags:[`experimental`],experiment:{mode:`auto`}},"editor.experimental.preferTreeSitter.typescript":{type:`boolean`,default:!1,markdownDescription:D(241,"Controls whether tree sitter parsing should be turned on for typescript. This will take precedence over `#editor.experimental.treeSitterTelemetry#` for typescript."),tags:[`experimental`],experiment:{mode:`auto`}},"editor.experimental.preferTreeSitter.ini":{type:`boolean`,default:!1,markdownDescription:D(242,"Controls whether tree sitter parsing should be turned on for ini. This will take precedence over `#editor.experimental.treeSitterTelemetry#` for ini."),tags:[`experimental`],experiment:{mode:`auto`}},"editor.experimental.preferTreeSitter.regex":{type:`boolean`,default:!1,markdownDescription:D(243,"Controls whether tree sitter parsing should be turned on for regex. This will take precedence over `#editor.experimental.treeSitterTelemetry#` for regex."),tags:[`experimental`],experiment:{mode:`auto`}},"editor.language.brackets":{type:[`array`,`null`],default:null,description:D(244,`Defines the bracket symbols that increase or decrease the indentation.`),items:{type:`array`,items:[{type:`string`,description:D(245,`The opening bracket character or string sequence.`)},{type:`string`,description:D(246,`The closing bracket character or string sequence.`)}]}},"editor.language.colorizedBracketPairs":{type:[`array`,`null`],default:null,description:D(247,`Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled.`),items:{type:`array`,items:[{type:`string`,description:D(245,`The opening bracket character or string sequence.`)},{type:`string`,description:D(246,`The closing bracket character or string sequence.`)}]}},"diffEditor.maxComputationTime":{type:`number`,default:h3.maxComputationTime,description:D(248,`Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.`)},"diffEditor.maxFileSize":{type:`number`,default:h3.maxFileSize,description:D(249,`Maximum file size in MB for which to compute diffs. Use 0 for no limit.`)},"diffEditor.renderSideBySide":{type:`boolean`,default:h3.renderSideBySide,description:D(250,`Controls whether the diff editor shows the diff side by side or inline.`)},"diffEditor.renderSideBySideInlineBreakpoint":{type:`number`,default:h3.renderSideBySideInlineBreakpoint,description:D(251,`If the diff editor width is smaller than this value, the inline view is used.`)},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:`boolean`,default:h3.useInlineViewWhenSpaceIsLimited,description:D(252,`If enabled and the editor width is too small, the inline view is used.`)},"diffEditor.renderMarginRevertIcon":{type:`boolean`,default:h3.renderMarginRevertIcon,description:D(253,`When enabled, the diff editor shows arrows in its glyph margin to revert changes.`)},"diffEditor.renderGutterMenu":{type:`boolean`,default:h3.renderGutterMenu,description:D(254,`When enabled, the diff editor shows a special gutter for revert and stage actions.`)},"diffEditor.ignoreTrimWhitespace":{type:`boolean`,default:h3.ignoreTrimWhitespace,description:D(255,`When enabled, the diff editor ignores changes in leading or trailing whitespace.`)},"diffEditor.renderIndicators":{type:`boolean`,default:h3.renderIndicators,description:D(256,`Controls whether the diff editor shows +/- indicators for added/removed changes.`)},"diffEditor.codeLens":{type:`boolean`,default:h3.diffCodeLens,description:D(257,`Controls whether the editor shows CodeLens.`)},"diffEditor.wordWrap":{type:`string`,enum:[`off`,`on`,`inherit`],default:h3.diffWordWrap,markdownEnumDescriptions:[D(258,`Lines will never wrap.`),D(259,`Lines will wrap at the viewport width.`),D(260,`Lines will wrap according to the {0} setting.`,"`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:`string`,enum:[`legacy`,`advanced`],default:h3.diffAlgorithm,markdownEnumDescriptions:[D(261,`Uses the legacy diffing algorithm.`),D(262,`Uses the advanced diffing algorithm.`)]},"diffEditor.hideUnchangedRegions.enabled":{type:`boolean`,default:h3.hideUnchangedRegions.enabled,markdownDescription:D(263,`Controls whether the diff editor shows unchanged regions.`)},"diffEditor.hideUnchangedRegions.revealLineCount":{type:`integer`,default:h3.hideUnchangedRegions.revealLineCount,markdownDescription:D(264,`Controls how many lines are used for unchanged regions.`),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:`integer`,default:h3.hideUnchangedRegions.minimumLineCount,markdownDescription:D(265,`Controls how many lines are used as a minimum for unchanged regions.`),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:`integer`,default:h3.hideUnchangedRegions.contextLineCount,markdownDescription:D(266,`Controls how many lines are used as context when comparing unchanged regions.`),minimum:1},"diffEditor.experimental.showMoves":{type:`boolean`,default:h3.experimental.showMoves,markdownDescription:D(267,`Controls whether the diff editor should show detected code moves.`)},"diffEditor.experimental.showEmptyDecorations":{type:`boolean`,default:h3.experimental.showEmptyDecorations,description:D(268,`Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.`)},"diffEditor.experimental.useTrueInlineView":{type:`boolean`,default:h3.experimental.useTrueInlineView,description:D(269,`If enabled and the editor uses the inline view, word changes are rendered inline.`)}}};function dae(e){return e.type!==void 0||e.anyOf!==void 0}for(let e of eV){let t=e.schema;if(t!==void 0)if(dae(t))V6.properties[`editor.${e.name}`]=t;else for(let e in t)Object.hasOwnProperty.call(t,e)&&(V6.properties[e]=t[e])}var H6=null;function U6(){return H6===null&&(H6=Object.create(null),Object.keys(V6.properties).forEach(e=>{H6[e]=!0})),H6}function fae(e){return U6()[`editor.${e}`]||!1}function pae(e){return U6()[`diffEditor.${e}`]||!1}hr.as(_P.Configuration).registerConfiguration(V6);async function mae(e){let t=[`editor.fontFamily`],n=await e();for(let e of t)V6.properties&&V6.properties[e]&&(V6.properties[e].defaultSnippets=n)}function W6(e){return Object.isFrozen(e)?e:QO(e)}var G6=class e{static createEmptyModel(t){return new e({},[],[],void 0,t)}constructor(e,t,n,r,i){this._contents=e,this._keys=t,this._overrides=n,this._raw=r,this.logService=i,this.overrideConfigurations=new Map}get rawConfiguration(){if(!this._rawConfiguration)if(this._raw){let t=(Array.isArray(this._raw)?this._raw:[this._raw]).map(t=>{if(t instanceof e)return t;let n=new K6(``,this.logService);return n.parseRaw(t),n.configurationModel});this._rawConfiguration=t.reduce((e,t)=>t===e?t:e.merge(t),t[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}get raw(){if(this._raw&&!(Array.isArray(this._raw)&&this._raw.every(t=>t instanceof e)))return this._raw}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?pP(this.contents,e):this.contents}inspect(t,n){let r=this;return{get value(){return W6(r.rawConfiguration.getValue(t))},get override(){return n?W6(r.rawConfiguration.getOverrideValue(t,n)):void 0},get merged(){return W6(n?r.rawConfiguration.override(n).getValue(t):r.rawConfiguration.getValue(t))},get overrides(){let n=[];for(let{contents:i,identifiers:a,keys:o}of r.rawConfiguration.overrides){let s=new e(i,o,[],void 0,r.logService).getValue(t);s!==void 0&&n.push({identifiers:a,value:s})}return n.length?W6(n):void 0}}}getOverrideValue(e,t){let n=this.getContentsForOverrideIdentifer(t);return n?e?pP(n,e):n:void 0}getKeysForOverrideIdentifier(e){let t=[];for(let n of this.overrides)n.identifiers.includes(e)&&t.push(...n.keys);return kt(t)}getAllOverrideIdentifiers(){let e=[];for(let t of this.overrides)e.push(...t.identifiers);return kt(e)}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...t){let n=ZO(this.contents),r=ZO(this.overrides),i=[...this.keys],a=this._raw?Array.isArray(this._raw)?[...this._raw]:[this._raw]:[this];for(let e of t)if(a.push(...e._raw?Array.isArray(e._raw)?e._raw:[e._raw]:[e]),!e.isEmpty()){this.mergeContents(n,e.contents);for(let t of e.overrides){let[e]=r.filter(e=>ut(e.identifiers,t.identifiers));e?(this.mergeContents(e.contents,t.contents),e.keys.push(...t.keys),e.keys=kt(e.keys)):r.push(ZO(t))}for(let t of e.keys)i.indexOf(t)===-1&&i.push(t)}return new e(n,i,r,!a.length||a.every(t=>t instanceof e)?void 0:a,this.logService)}createOverrideConfigurationModel(t){let n=this.getContentsForOverrideIdentifer(t);if(!n||typeof n!=`object`||!Object.keys(n).length)return this;let r={};for(let e of kt([...Object.keys(this.contents),...Object.keys(n)])){let t=this.contents[e],i=n[e];i&&(typeof t==`object`&&typeof i==`object`?(t=ZO(t),this.mergeContents(t,i)):t=i),r[e]=t}return new e(r,this.keys,this.overrides,void 0,this.logService)}mergeContents(e,t){for(let n of Object.keys(t)){if(n in e&&ye(e[n])&&ye(t[n])){this.mergeContents(e[n],t[n]);continue}e[n]=ZO(t[n])}}getContentsForOverrideIdentifer(e){let t=null,n=null,r=e=>{e&&(n?this.mergeContents(n,e):n=ZO(e))};for(let n of this.overrides)n.identifiers.length===1&&n.identifiers[0]===e?t=n.contents:n.identifiers.includes(e)&&r(n.contents);return r(t),n}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(e,t){this.updateValue(e,t,!0)}setValue(e,t){this.updateValue(e,t,!1)}removeValue(e){let t=this.keys.indexOf(e);t!==-1&&(this.keys.splice(t,1),dP(this.contents,e),NP.test(e)&&this.overrides.splice(this.overrides.findIndex(t=>ut(t.identifiers,PP(e))),1))}updateValue(e,t,n){if(uP(this.contents,e,t,e=>this.logService.error(e)),n||=this.keys.indexOf(e)===-1,n&&this.keys.push(e),NP.test(e)){let t=this.contents[e],n=PP(e),r={identifiers:n,keys:Object.keys(t),contents:lP(t,e=>this.logService.error(e))},i=this.overrides.findIndex(e=>ut(e.identifiers,n));i===-1?this.overrides.push(r):this.overrides[i]=r}}},K6=class{constructor(e,t){this._name=e,this.logService=t,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[],this._parseErrors=[]}get configurationModel(){return this._configurationModel||G6.createEmptyModel(this.logService)}get restrictedConfigurations(){return this._restrictedConfigurations}get errors(){return this._parseErrors}parse(e,t){if(!Ee(e)){let n=this.doParseContent(e);this.parseRaw(n,t)}}reparse(e){this._raw&&this.parseRaw(this._raw,e)}parseRaw(e,t){this._raw=e;let{contents:n,keys:r,overrides:i,restricted:a,hasExcludedProperties:o}=this.doParseRaw(e,t);this._configurationModel=new G6(n,r,i,o?[e]:void 0,this.logService),this._restrictedConfigurations=a||[]}doParseContent(e){let t={},n=null,r=[],i=[];function a(e){Array.isArray(r)?r.push(e):n!==null&&(r[n]=e)}let o={onObjectBegin:()=>{let e={};a(e),i.push(r),r=e,n=null},onObjectProperty:e=>{n=e},onObjectEnd:()=>{r=i.pop()},onArrayBegin:()=>{let e=[];a(e),i.push(r),r=e,n=null},onArrayEnd:()=>{r=i.pop()},onLiteralValue:a,onError:(e,t,n)=>{}};if(e)try{CU(e,o),t=r[0]||{}}catch(e){this.logService.error(`Error while parsing settings file ${this._name}: ${e}`),this._parseErrors=[e]}return t}doParseRaw(e,t){let n=hr.as(_P.Configuration),r=n.getConfigurationProperties(),i=n.getExcludedConfigurationProperties(),a=this.filter(e,r,i,!0,t);return e=a.raw,{contents:lP(e,e=>this.logService.error(`Conflict in settings file ${this._name}: ${e}`)),keys:Object.keys(e),overrides:this.toOverrides(e,e=>this.logService.error(`Conflict in settings file ${this._name}: ${e}`)),restricted:a.restricted,hasExcludedProperties:a.hasExcludedProperties}}filter(e,t,n,r,i){let a=!1;if(!i?.scopes&&!i?.skipRestricted&&!i?.skipUnregistered&&!i?.exclude?.length)return{raw:e,restricted:[],hasExcludedProperties:a};let o={},s=[];for(let c in e)if(NP.test(c)&&r){let r=this.filter(e[c],t,n,!1,i);o[c]=r.raw,a||=r.hasExcludedProperties,s.push(...r.restricted)}else{let r=t[c];r?.restricted&&s.push(c),this.shouldInclude(c,r,n,i)?o[c]=e[c]:a=!0}return{raw:o,restricted:s,hasExcludedProperties:a}}shouldInclude(e,t,n,r){if(r.exclude?.includes(e))return!1;if(r.include?.includes(e))return!0;if(r.skipRestricted&&t?.restricted||r.skipUnregistered&&!t)return!1;let i=t??n[e],a=i?i.scope===void 0?vP.WINDOW:i.scope:void 0;return a===void 0||r.scopes===void 0?!0:r.scopes.includes(a)}toOverrides(e,t){let n=[];for(let r of Object.keys(e))if(NP.test(r)){let i={},a=e[r];for(let e in a)i[e]=a[e];n.push({identifiers:PP(r),keys:Object.keys(i),contents:lP(i,t)})}return n}},hae=class extends w{constructor(e,t,n,r,i){super(),this.userSettingsResource=e,this.parseOptions=t,this.fileService=r,this.logService=i,this._onDidChange=this._register(new E),this.onDidChange=this._onDidChange.event,this.parser=new K6(this.userSettingsResource.toString(),i),this._register(this.fileService.watch(n.dirname(this.userSettingsResource))),this._register(this.fileService.watch(this.userSettingsResource)),this._register(T.any(T.filter(this.fileService.onDidFilesChange,e=>e.contains(this.userSettingsResource)),T.filter(this.fileService.onDidRunOperation,t=>(t.isOperation(hb.CREATE)||t.isOperation(hb.COPY)||t.isOperation(hb.DELETE)||t.isOperation(hb.WRITE))&&n.isEqual(t.resource,e)))(()=>this._onDidChange.fire()))}async loadConfiguration(){try{let e=await this.fileService.readFile(this.userSettingsResource);return this.parser.parse(e.value.toString()||`{}`,this.parseOptions),this.parser.configurationModel}catch{return G6.createEmptyModel(this.logService)}}reparse(e){return e&&(this.parseOptions=e),this.parser.reparse(this.parseOptions),this.parser.configurationModel}getRestrictedSettings(){return this.parser.restrictedConfigurations}},gae=class{constructor(e,t,n,r,i,a,o,s,c,l,u,d,f){this.key=e,this.overrides=t,this._value=n,this.overrideIdentifiers=r,this.defaultConfiguration=i,this.policyConfiguration=a,this.applicationConfiguration=o,this.userConfiguration=s,this.localUserConfiguration=c,this.remoteUserConfiguration=l,this.workspaceConfiguration=u,this.folderConfigurationModel=d,this.memoryConfigurationModel=f}get value(){return W6(this._value)}toInspectValue(e){return e?.value!==void 0||e?.override!==void 0||e?.overrides!==void 0?e:void 0}get defaultInspectValue(){return this._defaultInspectValue||=this.defaultConfiguration.inspect(this.key,this.overrides.overrideIdentifier),this._defaultInspectValue}get defaultValue(){return this.defaultInspectValue.merged}get default(){return this.toInspectValue(this.defaultInspectValue)}get policyInspectValue(){return this._policyInspectValue===void 0&&(this._policyInspectValue=this.policyConfiguration?this.policyConfiguration.inspect(this.key):null),this._policyInspectValue}get policyValue(){return this.policyInspectValue?.merged}get policy(){return this.policyInspectValue?.value===void 0?void 0:{value:this.policyInspectValue.value}}get applicationInspectValue(){return this._applicationInspectValue===void 0&&(this._applicationInspectValue=this.applicationConfiguration?this.applicationConfiguration.inspect(this.key):null),this._applicationInspectValue}get applicationValue(){return this.applicationInspectValue?.merged}get application(){return this.toInspectValue(this.applicationInspectValue)}get userInspectValue(){return this._userInspectValue||=this.userConfiguration.inspect(this.key,this.overrides.overrideIdentifier),this._userInspectValue}get userValue(){return this.userInspectValue.merged}get user(){return this.toInspectValue(this.userInspectValue)}get userLocalInspectValue(){return this._userLocalInspectValue||=this.localUserConfiguration.inspect(this.key,this.overrides.overrideIdentifier),this._userLocalInspectValue}get userLocalValue(){return this.userLocalInspectValue.merged}get userLocal(){return this.toInspectValue(this.userLocalInspectValue)}get userRemoteInspectValue(){return this._userRemoteInspectValue||=this.remoteUserConfiguration.inspect(this.key,this.overrides.overrideIdentifier),this._userRemoteInspectValue}get userRemoteValue(){return this.userRemoteInspectValue.merged}get userRemote(){return this.toInspectValue(this.userRemoteInspectValue)}get workspaceInspectValue(){return this._workspaceInspectValue===void 0&&(this._workspaceInspectValue=this.workspaceConfiguration?this.workspaceConfiguration.inspect(this.key,this.overrides.overrideIdentifier):null),this._workspaceInspectValue}get workspaceValue(){return this.workspaceInspectValue?.merged}get workspace(){return this.toInspectValue(this.workspaceInspectValue)}get workspaceFolderInspectValue(){return this._workspaceFolderInspectValue===void 0&&(this._workspaceFolderInspectValue=this.folderConfigurationModel?this.folderConfigurationModel.inspect(this.key,this.overrides.overrideIdentifier):null),this._workspaceFolderInspectValue}get workspaceFolderValue(){return this.workspaceFolderInspectValue?.merged}get workspaceFolder(){return this.toInspectValue(this.workspaceFolderInspectValue)}get memoryInspectValue(){return this._memoryInspectValue===void 0&&(this._memoryInspectValue=this.memoryConfigurationModel.inspect(this.key,this.overrides.overrideIdentifier)),this._memoryInspectValue}get memoryValue(){return this.memoryInspectValue.merged}get memory(){return this.toInspectValue(this.memoryInspectValue)}},q6=class e{constructor(e,t,n,r,i,a,o,s,c,l){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=n,this._localUserConfiguration=r,this._remoteUserConfiguration=i,this._workspaceConfiguration=a,this._folderConfigurations=o,this._memoryConfiguration=s,this._memoryConfigurationByResource=c,this.logService=l,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new dn,this._userConfiguration=null}getValue(e,t,n){return this.getConsolidatedConfigurationModel(e,t,n).getValue(e)}updateValue(e,t,n={}){let r;n.resource?(r=this._memoryConfigurationByResource.get(n.resource),r||(r=G6.createEmptyModel(this.logService),this._memoryConfigurationByResource.set(n.resource,r))):r=this._memoryConfiguration,t===void 0?r.removeValue(e):r.setValue(e,t),n.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,n){let r=this.getConsolidatedConfigurationModel(e,t,n),i=this.getFolderConfigurationModelForResource(t.resource,n),a=t.resource&&this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration,o=new Set;for(let t of r.overrides)for(let n of t.identifiers)r.getOverrideValue(e,n)!==void 0&&o.add(n);return new gae(e,t,r.getValue(e),o.size?[...o]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,n?this._workspaceConfiguration:void 0,i||void 0,a)}keys(e){let t=this.getFolderConfigurationModelForResource(void 0,e);return{default:this._defaultConfiguration.keys.slice(0),policy:this._policyConfiguration.keys.slice(0),user:this.userConfiguration.keys.slice(0),workspace:this._workspaceConfiguration.keys.slice(0),workspaceFolder:t?t.keys.slice(0):[]}}updateDefaultConfiguration(e){this._defaultConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updatePolicyConfiguration(e){this._policyConfiguration=e}updateApplicationConfiguration(e){this._applicationConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateLocalUserConfiguration(e){this._localUserConfiguration=e,this._userConfiguration=null,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateRemoteUserConfiguration(e){this._remoteUserConfiguration=e,this._userConfiguration=null,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateWorkspaceConfiguration(e){this._workspaceConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateFolderConfiguration(e,t){this._folderConfigurations.set(e,t),this._foldersConsolidatedConfigurations.delete(e)}deleteFolderConfiguration(e){this.folderConfigurations.delete(e),this._foldersConsolidatedConfigurations.delete(e)}compareAndUpdateDefaultConfiguration(e,t){let n=[];if(!t){let{added:n,updated:r,removed:i}=Y6(this._defaultConfiguration,e);t=[...n,...r,...i]}for(let r of t)for(let t of PP(r)){let r=this._defaultConfiguration.getKeysForOverrideIdentifier(t),i=e.getKeysForOverrideIdentifier(t),a=[...i.filter(e=>r.indexOf(e)===-1),...r.filter(e=>i.indexOf(e)===-1),...r.filter(n=>!rk(this._defaultConfiguration.override(t).getValue(n),e.override(t).getValue(n)))];n.push([t,a])}return this.updateDefaultConfiguration(e),{keys:t,overrides:n}}compareAndUpdatePolicyConfiguration(e){let{added:t,updated:n,removed:r}=Y6(this._policyConfiguration,e),i=[...t,...n,...r];return i.length&&this.updatePolicyConfiguration(e),{keys:i,overrides:[]}}compareAndUpdateApplicationConfiguration(e){let{added:t,updated:n,removed:r,overrides:i}=Y6(this.applicationConfiguration,e),a=[...t,...n,...r];return a.length&&this.updateApplicationConfiguration(e),{keys:a,overrides:i}}compareAndUpdateLocalUserConfiguration(e){let{added:t,updated:n,removed:r,overrides:i}=Y6(this.localUserConfiguration,e),a=[...t,...n,...r];return a.length&&this.updateLocalUserConfiguration(e),{keys:a,overrides:i}}compareAndUpdateRemoteUserConfiguration(e){let{added:t,updated:n,removed:r,overrides:i}=Y6(this.remoteUserConfiguration,e),a=[...t,...n,...r];return a.length&&this.updateRemoteUserConfiguration(e),{keys:a,overrides:i}}compareAndUpdateWorkspaceConfiguration(e){let{added:t,updated:n,removed:r,overrides:i}=Y6(this.workspaceConfiguration,e),a=[...t,...n,...r];return a.length&&this.updateWorkspaceConfiguration(e),{keys:a,overrides:i}}compareAndUpdateFolderConfiguration(e,t){let n=this.folderConfigurations.get(e),{added:r,updated:i,removed:a,overrides:o}=Y6(n,t),s=[...r,...i,...a];return(s.length||!n)&&this.updateFolderConfiguration(e,t),{keys:s,overrides:o}}compareAndDeleteFolderConfiguration(e){let t=this.folderConfigurations.get(e);if(!t)throw Error(`Unknown folder`);this.deleteFolderConfiguration(e);let{added:n,updated:r,removed:i,overrides:a}=Y6(t,void 0);return{keys:[...n,...r,...i],overrides:a}}get defaults(){return this._defaultConfiguration}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){if(!this._userConfiguration)if(this._remoteUserConfiguration.isEmpty())this._userConfiguration=this._localUserConfiguration;else{let e=this._localUserConfiguration.merge(this._remoteUserConfiguration);this._userConfiguration=new G6(e.contents,e.keys,e.overrides,void 0,this.logService)}return this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}get workspaceConfiguration(){return this._workspaceConfiguration}get folderConfigurations(){return this._folderConfigurations}getConsolidatedConfigurationModel(e,t,n){let r=this.getConsolidatedConfigurationModelForResource(t,n);if(t.overrideIdentifier&&(r=r.override(t.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(e)!==void 0){r=r.merge();for(let e of this._policyConfiguration.keys)r.setValue(e,this._policyConfiguration.getValue(e))}return r}getConsolidatedConfigurationModelForResource({resource:e},t){let n=this.getWorkspaceConsolidatedConfiguration();if(t&&e){let r=t.getFolder(e);r&&(n=this.getFolderConsolidatedConfiguration(r.uri)||n);let i=this._memoryConfigurationByResource.get(e);i&&(n=n.merge(i))}return n}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){let n=this.getWorkspaceConsolidatedConfiguration(),r=this._folderConfigurations.get(e);r?(t=n.merge(r),this._foldersConsolidatedConfigurations.set(e,t)):t=n}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){let n=t.getFolder(e);if(n)return this._folderConfigurations.get(n.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys,raw:Array.isArray(this.applicationConfiguration.raw)?void 0:this.applicationConfiguration.raw},userLocal:{contents:this.localUserConfiguration.contents,overrides:this.localUserConfiguration.overrides,keys:this.localUserConfiguration.keys,raw:Array.isArray(this.localUserConfiguration.raw)?void 0:this.localUserConfiguration.raw},userRemote:{contents:this.remoteUserConfiguration.contents,overrides:this.remoteUserConfiguration.overrides,keys:this.remoteUserConfiguration.keys,raw:Array.isArray(this.remoteUserConfiguration.raw)?void 0:this.remoteUserConfiguration.raw},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{let{contents:n,overrides:r,keys:i}=this._folderConfigurations.get(t);return e.push([t,{contents:n,overrides:r,keys:i}]),e},[])}}allKeys(){let e=new Set;return this._defaultConfiguration.keys.forEach(t=>e.add(t)),this.userConfiguration.keys.forEach(t=>e.add(t)),this._workspaceConfiguration.keys.forEach(t=>e.add(t)),this._folderConfigurations.forEach(t=>t.keys.forEach(t=>e.add(t))),[...e.values()]}allOverrideIdentifiers(){let e=new Set;return this._defaultConfiguration.getAllOverrideIdentifiers().forEach(t=>e.add(t)),this.userConfiguration.getAllOverrideIdentifiers().forEach(t=>e.add(t)),this._workspaceConfiguration.getAllOverrideIdentifiers().forEach(t=>e.add(t)),this._folderConfigurations.forEach(t=>t.getAllOverrideIdentifiers().forEach(t=>e.add(t))),[...e.values()]}getAllKeysForOverrideIdentifier(e){let t=new Set;return this._defaultConfiguration.getKeysForOverrideIdentifier(e).forEach(e=>t.add(e)),this.userConfiguration.getKeysForOverrideIdentifier(e).forEach(e=>t.add(e)),this._workspaceConfiguration.getKeysForOverrideIdentifier(e).forEach(e=>t.add(e)),this._folderConfigurations.forEach(n=>n.getKeysForOverrideIdentifier(e).forEach(e=>t.add(e))),[...t.values()]}static parse(t,n){return new e(this.parseConfigurationModel(t.defaults,n),this.parseConfigurationModel(t.policy,n),this.parseConfigurationModel(t.application,n),this.parseConfigurationModel(t.userLocal,n),this.parseConfigurationModel(t.userRemote,n),this.parseConfigurationModel(t.workspace,n),t.folders.reduce((e,t)=>(e.set(k.revive(t[0]),this.parseConfigurationModel(t[1],n)),e),new dn),G6.createEmptyModel(n),new dn,n)}static parseConfigurationModel(e,t){return new G6(e.contents,e.keys,e.overrides,e.raw,t)}};function _ae(...e){if(e.length===0)return{keys:[],overrides:[]};if(e.length===1)return e[0];let t=new Set,n=new Map;for(let r of e)r.keys.forEach(e=>t.add(e)),r.overrides.forEach(([e,t])=>{let r=cn(n,e,new Set);t.forEach(e=>r.add(e))});let r=[];return n.forEach((e,t)=>r.push([t,[...e.values()]])),{keys:[...t.values()],overrides:r}}var J6=class{constructor(e,t,n,r,i){this.change=e,this.previous=t,this.currentConfiguraiton=n,this.currentWorkspace=r,this.logService=i,this._marker=`
`,this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=46,this.affectedKeys=new Set,this._previousConfiguration=void 0;for(let t of e.keys)this.affectedKeys.add(t);for(let[,t]of e.overrides)for(let e of t)this.affectedKeys.add(e);this._affectsConfigStr=this._marker;for(let e of this.affectedKeys)this._affectsConfigStr+=e+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=q6.parse(this.previous.data,this.logService)),this._previousConfiguration}affectsConfiguration(e,t){let n=this._marker+e,r=this._affectsConfigStr.indexOf(n);if(r<0)return!1;let i=r+n.length;if(i>=this._affectsConfigStr.length)return!1;let a=this._affectsConfigStr.charCodeAt(i);return a!==this._markerCode1&&a!==this._markerCode2?!1:t?!rk(this.previousConfiguration?this.previousConfiguration.getValue(e,t,this.previous?.workspace):void 0,this.currentConfiguraiton.getValue(e,t,this.currentWorkspace)):!0}};function Y6(e,t){let{added:n,removed:r,updated:i}=X6(t?.rawConfiguration,e?.rawConfiguration),a=[],o=e?.getAllOverrideIdentifiers()||[],s=t?.getAllOverrideIdentifiers()||[];if(t){let e=s.filter(e=>!o.includes(e));for(let n of e)a.push([n,t.getKeysForOverrideIdentifier(n)])}if(e){let t=o.filter(e=>!s.includes(e));for(let n of t)a.push([n,e.getKeysForOverrideIdentifier(n)])}if(t&&e){for(let n of o)if(s.includes(n)){let r=X6({contents:e.getOverrideValue(void 0,n)||{},keys:e.getKeysForOverrideIdentifier(n)},{contents:t.getOverrideValue(void 0,n)||{},keys:t.getKeysForOverrideIdentifier(n)});a.push([n,[...r.added,...r.removed,...r.updated]])}}return{added:n,removed:r,updated:i,overrides:a}}function X6(e,t){let n=e?t?e.keys.filter(e=>t.keys.indexOf(e)===-1):[...e.keys]:[],r=t?e?t.keys.filter(t=>e.keys.indexOf(t)===-1):[...t.keys]:[],i=[];if(e&&t)for(let n of t.keys)e.keys.indexOf(n)!==-1&&(rk(pP(t.contents,n),pP(e.contents,n))||i.push(n));return{added:n,removed:r,updated:i}}var Z6;(function(e){e.accessibilityHelpTitle=D(861,`Accessibility Help`),e.openingDocs=D(862,`Opening the Accessibility documentation page.`),e.readonlyDiffEditor=D(863,`You are in a read-only pane of a diff editor.`),e.editableDiffEditor=D(864,`You are in a pane of a diff editor.`),e.readonlyEditor=D(865,`You are in a read-only code editor.`),e.editableEditor=D(866,`You are in a code editor.`),e.defaultWindowTitleIncludesEditorState=D(867,`activeEditorState - such as modified, problems, and more, is included as a part of the window.title setting by default. Disable it with accessibility.windowTitleOptimized.`),e.defaultWindowTitleExcludingEditorState=D(868,`activeEditorState - such as modified, problems, and more, is currently not included as a part of the window.title setting by default. Enable it with accessibility.windowTitleOptimized.`),e.toolbar=D(869,`Around the workbench, when the screen reader announces you've landed in a toolbar, use narrow keys to navigate between the toolbar's actions.`),e.changeConfigToOnMac=D(870,`Configure the application to be optimized for usage with a Screen Reader (Command+E).`),e.changeConfigToOnWinLinux=D(871,`Configure the application to be optimized for usage with a Screen Reader (Control+E).`),e.auto_on=D(872,`The application is configured to be optimized for usage with a Screen Reader.`),e.auto_off=D(873,`The application is configured to never be optimized for usage with a Screen Reader.`),e.screenReaderModeEnabled=D(874,`Screen Reader Optimized Mode enabled.`),e.screenReaderModeDisabled=D(875,`Screen Reader Optimized Mode disabled.`),e.tabFocusModeOnMsg=D(876,`Pressing Tab in the current editor will move focus to the next focusable element. Toggle this behavior{0}.`,`<keybinding:editor.action.toggleTabFocusMode>`),e.tabFocusModeOffMsg=D(877,`Pressing Tab in the current editor will insert the tab character. Toggle this behavior{0}.`,`<keybinding:editor.action.toggleTabFocusMode>`),e.stickScroll=D(878,`Focus Sticky Scroll{0} to focus the currently nested scopes.`,`<keybinding:editor.action.focusStickyDebugConsole>`),e.suggestActions=D(879,`Trigger the suggest widget{0} to show possible inline suggestions.`,`<keybinding:editor.action.triggerSuggest>`),e.acceptSuggestAction=D(880,`Accept suggestion{0} to accept the currently selected suggestion.`,`<keybinding:acceptSelectedSuggestion>`),e.toggleSuggestionFocus=D(881,`Toggle focus between the suggest widget and the editor{0} and toggle details focus with{1} to learn more about the suggestion.`,`<keybinding:focusSuggestion>`,`<keybinding:toggleSuggestionFocus>`),e.codeFolding=D(882,`Use code folding to collapse blocks of code and focus on the code you're interested in via the Toggle Folding Command{0}.`,`<keybinding:editor.toggleFold>`),e.intellisense=D(883,`Use Intellisense to improve coding efficiency and reduce errors. Trigger suggestions{0}.`,`<keybinding:editor.action.triggerSuggest>`),e.showOrFocusHover=D(884,`Show or focus the hover{0} to read information about the current symbol.`,`<keybinding:editor.action.showHover>`),e.goToSymbol=D(885,`Go to Symbol{0} to quickly navigate between symbols in the current file.`,`<keybinding:workbench.action.gotoSymbol>`),e.showAccessibilityHelpAction=D(886,`Show Accessibility Help`),e.listSignalSounds=D(887,`Run the command: List Signal Sounds for an overview of all sounds and their current status.`),e.listAlerts=D(888,`Run the command: List Signal Announcements for an overview of announcements and their current status.`),e.announceCursorPosition=D(889,`Run the command: Announce Cursor Position{0} to hear the current line and column.`,`<keybinding:editor.action.announceCursorPosition>`),e.quickChat=D(890,`Toggle quick chat{0} to open or close a chat session.`,`<keybinding:workbench.action.quickchat.toggle>`),e.startInlineChat=D(891,`Start inline chat{0} to create an in editor chat session.`,`<keybinding:inlineChat.start>`),e.startDebugging=D(892,`The Debug: Start Debugging command{0} will start a debug session.`,`<keybinding:workbench.action.debug.start>`),e.setBreakpoint=D(893,`The Debug: Inline Breakpoint command{0} will set or unset a breakpoint at the current cursor position in the active editor.`,`<keybinding:editor.debug.action.toggleInlineBreakpoint>`),e.addToWatch=D(894,`The Debug: Add to Watch command{0} will add the selected text to the watch view.`,`<keybinding:editor.debug.action.selectionToWatch>`),e.debugExecuteSelection=D(895,`The Debug: Execute Selection command{0} will execute the selected text in the debug console.`,`<keybinding:editor.debug.action.selectionToRepl>`),e.chatEditorModification=D(896,`The editor contains pending modifications that have been made by chat.`),e.chatEditorRequestInProgress=D(897,`The editor is currently waiting for modifications to be made by chat.`),e.chatEditActions=D(898,`Navigate between edits in the editor with navigate previous{0} and next{1} and accept{2}, reject{3} or view the diff{4} for the current change. Accept edits across all files{5}.`,`<keybinding:chatEditor.action.navigatePrevious>`,`<keybinding:chatEditor.action.navigateNext>`,`<keybinding:chatEditor.action.acceptHunk>`,`<keybinding:chatEditor.action.undoHunk>`,`<keybinding:chatEditor.action.toggleDiff>`,`<keybinding:chatEditor.action.acceptAllEdits>`)})(Z6||={});var vae;(function(e){e.inspectTokensAction=D(899,`Developer: Inspect Tokens`)})(vae||={});var yae;(function(e){e.gotoLineActionLabel=D(900,`Go to Line/Column...`),e.gotoOffsetActionLabel=D(901,`Go to Offset...`)})(yae||={});var bae;(function(e){e.helpQuickAccessActionLabel=D(902,`Show all Quick Access Providers`)})(bae||={});var xae;(function(e){e.quickCommandActionLabel=D(903,`Command Palette`),e.quickCommandHelp=D(904,`Show And Run Commands`)})(xae||={});var Sae;(function(e){e.quickOutlineActionLabel=D(905,`Go to Symbol...`),e.quickOutlineByCategoryActionLabel=D(906,`Go to Symbol by Category...`)})(Sae||={});var Q6;(function(e){e.editorViewAccessibleLabel=D(907,`Editor content`)})(Q6||={});var Cae;(function(e){e.toggleHighContrast=D(908,`Toggle High Contrast Theme`)})(Cae||={});var $6;(function(e){e.bulkEditServiceSummary=D(909,`Made {0} edits in {1} files`)})($6||={});var e8=class extends w{constructor(e){super(),this.layoutService=e,this.contextView=this._register(new xj(this.layoutService.mainContainer,pj.ABSOLUTE)),this.layout(),this._register(e.onDidLayoutContainer(()=>this.layout()))}showContextView(e,t,n){let r;r=t?t===this.layoutService.getContainer(Yh(t))?pj.ABSOLUTE:n?pj.FIXED_SHADOW:pj.FIXED:pj.ABSOLUTE,this.contextView.setContainer(t??this.layoutService.activeContainer,r),this.contextView.show(e);let i={close:()=>{this.openContextView===i&&this.hideContextView()}};return this.openContextView=i,i}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e),this.openContextView=void 0}};e8=t([n(0,Ey)],e8);var t8=class extends e8{getContextViewElement(){return this.contextView.getViewElement()}},n8=Object.prototype.hasOwnProperty,r8=`vs.editor.nullLanguage`,wae=class{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(r8,MK.Null),this._register(LL,MK.PlainText),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;let t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||MK.Null}decodeLanguageId(e){return this._languageIdToLanguage[e]||r8}},Tae=class e extends w{static#e=this.instanceCount=0;constructor(t=!0,n=!1){super(),this._onDidChange=this._register(new E),this.onDidChange=this._onDidChange.event,e.instanceCount++,this._warnOnOverwrite=n,this.languageIdCodec=new wae,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},t&&(this._initializeFromRegistry(),this._register(IL.onDidChangeLanguages(e=>{this._initializeFromRegistry()})))}dispose(){e.instanceCount--,super.dispose()}setDynamicLanguages(e){this._dynamicLanguages=e,this._initializeFromRegistry()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Zq();let e=[].concat(IL.getLanguages(),this._dynamicLanguages);this._registerLanguages(e)}registerLanguage(e){return IL.registerLanguage(e)}_registerLanguages(e){for(let t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(e=>{let t=this._languages[e];t.name&&(this._nameMap[t.name]=t.identifier),t.aliases.forEach(e=>{this._lowercaseNameMap[e.toLowerCase()]=t.identifier}),t.mimetypes.forEach(e=>{this._mimeTypesMap[e]=t.identifier})}),hr.as(_P.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){let t=e.id,n;n8.call(this._languages,t)?n=this._languages[t]:(this.languageIdCodec.register(t),n={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=n),this._mergeLanguage(n,e)}_mergeLanguage(e,t){let n=t.id,r=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),r=t.mimetypes[0]),r||(r=`text/x-${n}`,e.mimetypes.push(r)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(let e of t.extensions)qq({id:n,mime:r,extension:e},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(let i of t.filenames)qq({id:n,mime:r,filename:i},this._warnOnOverwrite),e.filenames.push(i);if(Array.isArray(t.filenamePatterns))for(let e of t.filenamePatterns)qq({id:n,mime:r,filepattern:e},this._warnOnOverwrite);if(typeof t.firstLine==`string`&&t.firstLine.length>0){let e=t.firstLine;e.charAt(0)!==`^`&&(e=`^`+e);try{let t=new RegExp(e);Va(t)||qq({id:n,mime:r,firstline:t},this._warnOnOverwrite)}catch(n){console.warn(`[${t.id}]: Invalid regular expression \`${e}\`: `,n)}}e.aliases.push(n);let i=null;if(t.aliases!==void 0&&Array.isArray(t.aliases)&&(i=t.aliases.length===0?[null]:t.aliases),i!==null)for(let t of i)!t||t.length===0||e.aliases.push(t);let a=i!==null&&i.length>0;if(!(a&&i[0]===null)){let t=(a?i[0]:null)||n;(a||!e.name)&&(e.name=t)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return e?n8.call(this._languages,e):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getSortedRegisteredLanguageNames(){let e=[];for(let t in this._nameMap)n8.call(this._nameMap,t)&&e.push({languageName:t,languageId:this._nameMap[t]});return e.sort((e,t)=>Ya(e.languageName,t.languageName)),e}getLanguageName(e){return n8.call(this._languages,e)?this._languages[e].name:null}getMimeType(e){return n8.call(this._languages,e)&&this._languages[e].mimetypes[0]||null}getExtensions(e){return n8.call(this._languages,e)?this._languages[e].extensions:[]}getFilenames(e){return n8.call(this._languages,e)?this._languages[e].filenames:[]}getIcon(e){return n8.call(this._languages,e)&&this._languages[e].icons[0]||null}getConfigurationFiles(e){return n8.call(this._languages,e)&&this._languages[e].configurationFiles||[]}getLanguageIdByLanguageName(e){let t=e.toLowerCase();return n8.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&n8.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return!e&&!t?[]:eJ(e,t)}},i8=class e extends w{static#e=this.instanceCount=0;constructor(t=!1){super(),this._onDidRequestBasicLanguageFeatures=this._register(new E),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new E),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new E({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,e.instanceCount++,this._registry=this._register(new Tae(!0,t)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){e.instanceCount--,super.dispose()}registerLanguage(e){return this._registry.registerLanguage(e)}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getRegisteredLanguageIds(){return this._registry.getRegisteredLanguageIds()}getSortedRegisteredLanguageNames(){return this._registry.getSortedRegisteredLanguageNames()}getLanguageName(e){return this._registry.getLanguageName(e)}getMimeType(e){return this._registry.getMimeType(e)}getIcon(e){return this._registry.getIcon(e)}getExtensions(e){return this._registry.getExtensions(e)}getFilenames(e){return this._registry.getFilenames(e)}getConfigurationFiles(e){return this._registry.getConfigurationFiles(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){return this._registry.guessLanguageIdByFilepathOrFirstLine(e,t).at(0)??null}createById(e){return new a8(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e))}createByMimeType(e){return new a8(this.onDidChange,()=>{let t=this.getLanguageIdByMimeType(e);return this._createAndGetLanguageIdentifier(t)})}createByFilepathOrFirstLine(e,t){return new a8(this.onDidChange,()=>{let n=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(n)})}_createAndGetLanguageIdentifier(e){return(!e||!this.isRegisteredLanguageId(e))&&(e=LL),e}requestBasicLanguageFeatures(e){this._requestedBasicLanguages.has(e)||(this._requestedBasicLanguages.add(e),this._onDidRequestBasicLanguageFeatures.fire(e))}requestRichLanguageFeatures(e){this._requestedRichLanguages.has(e)||(this._requestedRichLanguages.add(e),this.requestBasicLanguageFeatures(e),Mq.getOrCreate(e),this._onDidRequestRichLanguageFeatures.fire(e))}},a8=class{constructor(e,t){this._value=Ah(this,e,()=>t()),this.onDidChange=T.fromObservable(this._value)}get languageId(){return this._value.get()}},Eae=class{constructor(e,t,n,r){this.contextViewService=e,this.telemetryService=t,this.notificationService=n,this.keybindingService=r,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){let t=e.getActions();if(!t.length)return;this.focusToReturn=i_();let n,r=x_(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,layer:e.layer,render:r=>{this.lastContainer=r;let i=e.getMenuClassName?e.getMenuClassName():``;i&&(r.className+=` `+i),this.options.blockMouse&&(this.block=r.appendChild(B(`.context-view-block`)),this.block.style.position=`fixed`,this.block.style.cursor=`initial`,this.block.style.left=`0`,this.block.style.top=`0`,this.block.style.width=`100%`,this.block.style.height=`100%`,this.block.style.zIndex=`-1`,this.blockDisposable?.dispose(),this.blockDisposable=L(this.block,R.MOUSE_DOWN,e=>e.stopPropagation()));let a=new C,o=e.actionRunner||a.add(new Qx);o.onWillRun(t=>this.onActionRun(t,!e.skipTelemetry),this,a),o.onDidRun(this.onDidActionRun,this,a),n=new jU(r,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:o,getKeyBinding:e.getKeyBinding?e.getKeyBinding:e=>this.keybindingService.lookupKeybinding(e.id)},EF),n.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),n.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a);let s=Yh(r);return a.add(L(s,R.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add(L(s,R.MOUSE_DOWN,e=>{if(e.defaultPrevented)return;let t=new wp(s,e),n=t.target;if(!t.rightButton){for(;n;){if(n===r)return;n=n.parentElement}this.contextViewService.hideContextView(!0)}})),Fn(a,n)},focus:()=>{n?.focus(!!e.autoSelectFirstItem)},onHide:t=>{e.onHide?.(!!t),this.block&&=(this.block.remove(),null),this.blockDisposable?.dispose(),this.blockDisposable=null,this.lastContainer&&(i_()===this.lastContainer||Jg(i_(),this.lastContainer))&&this.focusToReturn?.focus(),this.lastContainer=null}},r,!!r)}onActionRun(e,t){t&&this.telemetryService.publicLog2(`workbenchActionExecuted`,{id:e.action.id,from:`contextMenu`}),this.contextViewService.hideContextView(!1)}onDidActionRun(e){e.error&&!v(e.error)&&this.notificationService.error(e.error)}},o8=class extends w{get contextMenuHandler(){return this._contextMenuHandler||=new Eae(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService),this._contextMenuHandler}constructor(e,t,n,r,i,a){super(),this.telemetryService=e,this.notificationService=t,this.contextViewService=n,this.keybindingService=r,this.menuService=i,this.contextKeyService=a,this._contextMenuHandler=void 0,this._onDidShowContextMenu=this._store.add(new E),this.onDidShowContextMenu=this._onDidShowContextMenu.event,this._onDidHideContextMenu=this._store.add(new E),this.onDidHideContextMenu=this._onDidHideContextMenu.event}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){e=s8.transform(e,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu({...e,onHide:t=>{e.onHide?.(t),this._onDidHideContextMenu.fire()}}),iv.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};o8=t([n(0,NI),n(1,Px),n(2,eF),n(3,nF),n(4,xV),n(5,uS)],o8);var s8;(function(e){function t(e){return e&&e.menuId instanceof fC}function n(e,n,r){if(!t(e))return e;let{menuId:i,menuActionOptions:a,contextKeyService:o}=e;return{...e,getActions:()=>{let t=[];return i&&(t=CV(n.getMenuActions(i,o??r,a))),e.getActions?$x.join(e.getActions(),t):t}}}e.transform=n})(s8||={});var c8=class{constructor(e){this._commandService=e}async open(e,t){if(!gs(e,A.command))return!1;if(!t?.allowCommands||(typeof e==`string`&&(e=k.parse(e)),Array.isArray(t.allowCommands)&&!t.allowCommands.includes(e.path)))return!0;let n=[];try{n=ky(decodeURIComponent(e.query))}catch{try{n=ky(e.query)}catch{}}return Array.isArray(n)||(n=[n]),await this._commandService.executeCommand(e.path,...n),!0}};c8=t([n(0,dS)],c8);var l8=class{constructor(e){this._editorService=e}async open(e,t){typeof e==`string`&&(e=k.parse(e));let{selection:n,uri:r}=oH(e);return e=r,e.scheme===A.file&&(e=Is(e)),await this._editorService.openCodeEditor({resource:e,options:{selection:n,source:t?.fromUserGesture?iR.USER:iR.API,...t?.editorOptions}},this._editorService.getFocusedCodeEditor(),t?.openToSide),!0}};l8=t([n(0,gY)],l8);var u8=class{constructor(e,t){this._openers=new Kn,this._validators=new Kn,this._resolvers=new Kn,this._resolvedUriTargets=new dn(e=>e.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new Kn,this._defaultExternalOpener={openExternal:async e=>(_s(e,A.http,A.https)?J_(e):i.location.href=e,!0)},this._openers.push({open:async(e,t)=>t?.openExternal||_s(e,A.mailto,A.http,A.https,A.vsls)?(await this._doOpenExternal(e,t),!0):!1}),this._openers.push(new c8(t)),this._openers.push(new l8(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}registerValidator(e){return{dispose:this._validators.push(e)}}registerExternalUriResolver(e){return{dispose:this._resolvers.push(e)}}setDefaultExternalOpener(e){this._defaultExternalOpener=e}registerExternalOpener(e){return{dispose:this._externalOpeners.push(e)}}async open(e,t){let n=typeof e==`string`?k.parse(e):e;if(n.scheme===A.internal)return!1;if(!t?.skipValidation){let r=this._resolvedUriTargets.get(n)??e;for(let e of this._validators)if(!await e.shouldOpen(r,t))return!1}for(let n of this._openers)if(await n.open(e,t))return!0;return!1}async resolveExternalUri(e,t){for(let n of this._resolvers)try{let r=await n.resolveExternalUri(e,t);if(r)return this._resolvedUriTargets.has(r.resolved)||this._resolvedUriTargets.set(r.resolved,e),r}catch{}throw Error(`Could not resolve external URI: `+e.toString())}async _doOpenExternal(e,t){let n=typeof e==`string`?k.parse(e):e,r;try{r=(await this.resolveExternalUri(n,t)).resolved}catch{r=n}let i;if(i=typeof e==`string`&&n.toString()===r.toString()?e:encodeURI(r.toString(!0)),t?.allowContributedOpeners){let e=typeof t?.allowContributedOpeners==`string`?t?.allowContributedOpeners:void 0;for(let t of this._externalOpeners)if(await t.openExternal(i,{sourceUri:n,preferredOpenerId:e},Fr.None))return!0}return this._defaultExternalOpener.openExternal(i,{sourceUri:n},Fr.None)}dispose(){this._validators.clear()}};u8=t([n(0,gY),n(1,dS)],u8);var d8=class extends w{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new E),this.onDidChangeMarker=this._onDidChangeMarker.event,this._suppressedRanges=new dn,this._markerDecorations=new dn,e.getModels().forEach(e=>this._onModelAdded(e)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){let n=this._markerDecorations.get(e);return n&&n.getMarker(t)||null}getLiveMarkers(e){let t=this._markerDecorations.get(e);return t?t.getMarkers():[]}addMarkerSuppression(e,t){let n=this._suppressedRanges.get(e);return n||(n=new Set,this._suppressedRanges.set(e,n)),n.add(t),this._handleMarkerChange([e]),S(()=>{let n=this._suppressedRanges.get(e);n&&(n.delete(t),n.size===0&&this._suppressedRanges.delete(e),this._handleMarkerChange([e]))})}_handleMarkerChange(e){e.forEach(e=>{let t=this._markerDecorations.get(e);t&&this._updateDecorations(t)})}_onModelAdded(e){let t=new Dae(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){let t=this._markerDecorations.get(e.uri);t&&(t.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===A.inMemory||e.uri.scheme===A.internal||e.uri.scheme===A.vscode)&&this._markerService?.read({resource:e.uri}).map(e=>e.owner).forEach(t=>this._markerService.remove(t,[e.uri]))}_updateDecorations(e){let t=this._markerService.read({resource:e.model.uri,take:500}),n=this._suppressedRanges.get(e.model.uri);n&&(t=t.filter(e=>!Cn.some(n,t=>X.areIntersectingOrTouching(t,e)))),e.update(t)&&this._onDidChangeMarker.fire(e.model)}};d8=t([n(0,II),n(1,lJ)],d8);var Dae=class extends w{constructor(e){super(),this.model=e,this._map=new yn,this._register(S(()=>{this.model.deltaDecorations([...this._map.values()],[]),this._map.clear()}))}update(e){let{added:t,removed:n}=Ke(new Set(this._map.keys()),new Set(e));if(t.length===0&&n.length===0)return!1;let r=n.map(e=>this._map.get(e)),i=t.map(e=>({range:this._createDecorationRange(this.model,e),options:this._createDecorationOption(e)})),a=this.model.deltaDecorations(r,i);for(let e of n)this._map.delete(e);for(let e=0;e<a.length;e++)this._map.set(t[e],a[e]);return!0}getMarker(e){return this._map.getKey(e.id)}getMarkers(){let e=[];return this._map.forEach((t,n)=>{let r=this.model.getDecorationRange(t);r&&e.push([r,n])}),e}_createDecorationRange(e,t){let n=X.lift(t);if(t.severity===sJ.Hint&&!this._hasMarkerTag(t,oJ.Unnecessary)&&!this._hasMarkerTag(t,oJ.Deprecated)&&(n=n.setEndPosition(n.startLineNumber,n.startColumn+2)),n=e.validateRange(n),n.isEmpty()){let t=e.getLineLastNonWhitespaceColumn(n.startLineNumber)||e.getLineMaxColumn(n.startLineNumber);if(t===1||n.endColumn>=t)return n;let r=e.getWordAtPosition(n.getStartPosition());r&&(n=new X(n.startLineNumber,r.startColumn,n.endLineNumber,r.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&t.startColumn===1&&n.startLineNumber===n.endLineNumber){let r=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);r<n.endColumn&&(n=new X(n.startLineNumber,r,n.endLineNumber,n.endColumn),t.startColumn=r)}return n}_createDecorationOption(e){let t,n,r,i,a;switch(e.severity){case sJ.Hint:t=this._hasMarkerTag(e,oJ.Deprecated)?void 0:this._hasMarkerTag(e,oJ.Unnecessary)?YQ.EditorUnnecessaryDecoration:YQ.EditorHintDecoration,r=0;break;case sJ.Info:t=YQ.EditorInfoDecoration,n=br(rQ),r=10,a={color:br(Cu),position:xL.Inline};break;case sJ.Warning:t=YQ.EditorWarningDecoration,n=br(nQ),r=20,a={color:br(wu),position:xL.Inline};break;case sJ.Error:default:t=YQ.EditorErrorDecoration,n=br(tQ),r=30,a={color:br(Tu),position:xL.Inline};break}return e.tags&&(e.tags.indexOf(oJ.Unnecessary)!==-1&&(i=YQ.EditorUnnecessaryInlineDecoration),e.tags.indexOf(oJ.Deprecated)!==-1&&(i=YQ.EditorDeprecatedInlineDecoration)),{description:`marker-decoration`,stickiness:AL.NeverGrowsWhenTypingAtEdges,className:t,showIfCollapsed:!0,overviewRuler:{color:n,position:yL.Right},minimap:a,zIndex:r,inlineClassName:i}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}},f8;function p8(e){return e.toString()}var Oae=class{constructor(e,t,n){this.model=e,this._modelEventListeners=new C,this.model=e,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(t=>n(e,t)))}dispose(){this._modelEventListeners.dispose()}},kae=ci||si?EL.LF:EL.CRLF,Aae=class{constructor(e,t,n,r,i,a,o,s){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=n,this.sharesUndoRedoStack=r,this.heapSize=i,this.sha1=a,this.versionId=o,this.alternativeVersionId=s}},m8=class extends w{static#e=f8=this;static#t=this.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024;constructor(e,t,n,r){super(),this._configurationService=e,this._resourcePropertiesService=t,this._undoRedoService=n,this._instantiationService=r,this._onModelAdded=this._register(new E),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new E),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new E),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration(e=>this._updateModelOptions(e))),this._updateModelOptions(void 0)}static _readModelOptions(e,t){let n=wz.tabSize;e.editor&&e.editor.tabSize!==void 0&&(n=Bz(e.editor.tabSize,wz.tabSize,1,100));let r=`tabSize`;e.editor&&e.editor.indentSize!==void 0&&e.editor.indentSize!==`tabSize`&&(r=Bz(e.editor.indentSize,`tabSize`,1,100));let i=wz.insertSpaces;e.editor&&e.editor.insertSpaces!==void 0&&(i=e.editor.insertSpaces===`false`?!1:!!e.editor.insertSpaces);let a=kae,o=e.eol;o===`\r
`?a=EL.CRLF:o===`
`&&(a=EL.LF);let s=wz.trimAutoWhitespace;e.editor&&e.editor.trimAutoWhitespace!==void 0&&(s=e.editor.trimAutoWhitespace===`false`?!1:!!e.editor.trimAutoWhitespace);let c=wz.detectIndentation;e.editor&&e.editor.detectIndentation!==void 0&&(c=e.editor.detectIndentation===`false`?!1:!!e.editor.detectIndentation);let l=wz.largeFileOptimizations;e.editor&&e.editor.largeFileOptimizations!==void 0&&(l=e.editor.largeFileOptimizations===`false`?!1:!!e.editor.largeFileOptimizations);let u=wz.bracketPairColorizationOptions;if(e.editor?.bracketPairColorization&&typeof e.editor.bracketPairColorization==`object`){let t=e.editor.bracketPairColorization;u={enabled:!!t.enabled,independentColorPoolPerBracketType:!!t.independentColorPoolPerBracketType}}return{isForSimpleWidget:t,tabSize:n,indentSize:r,insertSpaces:i,detectIndentation:c,defaultEOL:a,trimAutoWhitespace:s,largeFileOptimizations:l,bracketPairColorizationOptions:u}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);let n=this._configurationService.getValue(`files.eol`,{overrideIdentifier:t});return n&&typeof n==`string`&&n!==`auto`?n:Ei===Ti.Linux||Ei===Ti.Macintosh?`
`:`\r
`}_shouldRestoreUndoStack(){let e=this._configurationService.getValue(`files.restoreUndoStack`);return typeof e==`boolean`?e:!0}getCreationOptions(e,t,n){let r=typeof e==`string`?e:e.languageId,i=this._modelCreationOptionsByLanguageAndResource[r+t];if(!i){let e=this._configurationService.getValue(`editor`,{overrideIdentifier:r,resource:t}),a=this._getEOL(t,r);i=f8._readModelOptions({editor:e,eol:a},n),this._modelCreationOptionsByLanguageAndResource[r+t]=i}return i}_updateModelOptions(e){let t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);let n=Object.keys(this._models);for(let r=0,i=n.length;r<i;r++){let i=n[r],a=this._models[i],o=a.model.getLanguageId(),s=a.model.uri;if(e&&!e.affectsConfiguration(`editor`,{overrideIdentifier:o,resource:s})&&!e.affectsConfiguration(`files.eol`,{overrideIdentifier:o,resource:s}))continue;let c=t[o+s],l=this.getCreationOptions(o,s,a.model.isForSimpleWidget);f8._setModelOptionsForModel(a.model,l,c)}}static _setModelOptionsForModel(e,t,n){n&&n.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===EL.LF?DL.LF:DL.CRLF),!(n&&n.detectIndentation===t.detectIndentation&&n.insertSpaces===t.insertSpaces&&n.tabSize===t.tabSize&&n.indentSize===t.indentSize&&n.trimAutoWhitespace===t.trimAutoWhitespace&&rk(n.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(p8(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){let t=this._disposedModels.get(p8(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(p8(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){let t=[];for(this._disposedModels.forEach(e=>{e.sharesUndoRedoStack||t.push(e)}),t.sort((e,t)=>e.time-t.time);t.length>0&&this._disposedModelsHeapSize>e;){let e=t.shift();this._removeDisposedModel(e.uri),e.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(e.initialUndoRedoSnapshot)}}}_createModelData(e,t,n,r){let i=this.getCreationOptions(t,n,r),a=this._instantiationService.createInstance(Q4,e,t,i,n);if(n&&this._disposedModels.has(p8(n))){let e=this._removeDisposedModel(n),t=this._undoRedoService.getElements(n),r=this._getSHA1Computer(),i=r.canComputeSHA1(a)?r.computeSHA1(a)===e.sha1:!1;if(i||e.sharesUndoRedoStack){for(let e of t.past)N0(e)&&e.matchesResource(n)&&e.setModel(a);for(let e of t.future)N0(e)&&e.matchesResource(n)&&e.setModel(a);this._undoRedoService.setElementsValidFlag(n,!0,e=>N0(e)&&e.matchesResource(n)),i&&(a._overwriteVersionId(e.versionId),a._overwriteAlternativeVersionId(e.alternativeVersionId),a._overwriteInitialUndoRedoSnapshot(e.initialUndoRedoSnapshot))}else e.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(e.initialUndoRedoSnapshot)}let o=p8(a.uri);if(this._models[o])throw Error(`ModelService: Cannot add model because it already exists!`);let s=new Oae(a,e=>this._onWillDispose(e),(e,t)=>this._onDidChangeLanguage(e,t));return this._models[o]=s,s}updateModel(e,t,n=G$.unknown({name:`updateModel`})){let{textBuffer:r,disposable:i}=W4(t,this.getCreationOptions(e.getLanguageId(),e.uri,e.isForSimpleWidget).defaultEOL);if(e.equalsTextBuffer(r)){i.dispose();return}e.pushStackElement(),e.pushEOL(r.getEOL()===`\r
`?DL.CRLF:DL.LF),e.pushEditOperations([],f8._computeEdits(e,r),()=>[],void 0,n),e.pushStackElement(),i.dispose()}static _commonPrefix(e,t,n,r,i,a){let o=Math.min(t,i),s=0;for(let t=0;t<o&&e.getLineContent(n+t)===r.getLineContent(a+t);t++)s++;return s}static _commonSuffix(e,t,n,r,i,a){let o=Math.min(t,i),s=0;for(let c=0;c<o&&e.getLineContent(n+t-c)===r.getLineContent(a+i-c);c++)s++;return s}static _computeEdits(e,t){let n=e.getLineCount(),r=t.getLineCount(),i=this._commonPrefix(e,n,1,t,r,1);if(n===r&&i===n)return[];let a=this._commonSuffix(e,n-i,i,t,r-i,i),o,s;return a>0?(o=new X(i+1,1,n-a+1,1),s=new X(i+1,1,r-a+1,1)):i>0?(o=new X(i,e.getLineMaxColumn(i),n,e.getLineMaxColumn(n)),s=new X(i,1+t.getLineLength(i),r,1+t.getLineLength(r))):(o=new X(1,1,n,e.getLineMaxColumn(n)),s=new X(1,1,r,1+t.getLineLength(r))),[qK.replaceMove(o,t.getValueInRange(s,TL.TextDefined))]}createModel(e,t,n,r=!1){let i;return i=t?this._createModelData(e,t,n,r):this._createModelData(e,LL,n,r),this._onModelAdded.fire(i.model),i.model}destroyModel(e){let t=this._models[p8(e)];t&&t.model.dispose()}getModels(){let e=[],t=Object.keys(this._models);for(let n=0,r=t.length;n<r;n++){let r=t[n];e.push(this._models[r].model)}return e}getModel(e){let t=p8(e),n=this._models[t];return n?n.model:null}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===A.file||e.scheme===A.vscodeRemote||e.scheme===A.vscodeUserData||e.scheme===A.vscodeNotebookCell||e.scheme===`fake-fs`}_onWillDispose(e){let t=p8(e.uri),n=this._models[t],r=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString(),i=!1,a=0;if(r||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){let t=this._undoRedoService.getElements(e.uri);if(t.past.length>0||t.future.length>0){for(let n of t.past)N0(n)&&n.matchesResource(e.uri)&&(i=!0,a+=n.heapSize(e.uri),n.setModel(e.uri));for(let n of t.future)N0(n)&&n.matchesResource(e.uri)&&(i=!0,a+=n.heapSize(e.uri),n.setModel(e.uri))}}let o=f8.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK,s=this._getSHA1Computer();if(i)if(!r&&(a>o||!s.canComputeSHA1(e))){let e=n.model.getInitialUndoRedoSnapshot();e!==null&&this._undoRedoService.restoreSnapshot(e)}else this._ensureDisposedModelsHeapSize(o-a),this._undoRedoService.setElementsValidFlag(e.uri,!1,t=>N0(t)&&t.matchesResource(e.uri)),this._insertDisposedModel(new Aae(e.uri,n.model.getInitialUndoRedoSnapshot(),Date.now(),r,a,s.computeSHA1(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!r){let e=n.model.getInitialUndoRedoSnapshot();e!==null&&this._undoRedoService.restoreSnapshot(e)}delete this._models[t],n.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){let n=t.oldLanguage,r=e.getLanguageId(),i=this.getCreationOptions(n,e.uri,e.isForSimpleWidget),a=this.getCreationOptions(r,e.uri,e.isForSimpleWidget);f8._setModelOptionsForModel(e,a,i),this._onModelModeChanged.fire({model:e,oldLanguageId:n})}_getSHA1Computer(){return new jae}};m8=f8=t([n(0,Dx),n(1,Rq),n(2,I$),n(3,Cy)],m8);var jae=class e{static#e=this.MAX_MODEL_SIZE=10*1024*1024;canComputeSHA1(t){return t.getValueLength()<=e.MAX_MODEL_SIZE}computeSHA1(e){let t=new Tm,n=e.createSnapshot(),r;for(;r=n.read();)t.update(r);return t.digest()}},Mae={},h8;(function(e){e[e.PRESERVE=0]=`PRESERVE`,e[e.LAST=1]=`LAST`})(h8||={});var g8={Quickaccess:`workbench.contributions.quickaccess`},Nae=class{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((e,t)=>t.prefix.length-e.prefix.length),S(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(e){return wt([this.defaultProvider,...this.providers]).filter(t=>!t.when||e.contextMatchesRules(t.when))}getQuickAccessProvider(e,t){return(e?this.providers.find(n=>e.startsWith(n.prefix)&&(!n.when||t.contextMatchesRules(n.when))):void 0)||this.defaultProvider}clear(){let e=[...this.providers],t=this.defaultProvider;return this.providers=[],this.defaultProvider=void 0,()=>{this.providers=e,this.defaultProvider=t}}};hr.add(g8.Quickaccess,new Nae);var _8=class extends w{constructor(e,t,n){super(),this.quickInputService=e,this.instantiationService=t,this.contextKeyService=n,this.registry=hr.as(g8.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0,this._register(S(()=>{for(let e of this.mapProviderToDescriptor.values())Mn(e)&&e.dispose();this.visibleQuickAccess?.picker.dispose()}))}pick(e=``,t){return this.doShowOrPick(e,!0,t)}show(e=``,t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,n){let[r,i]=this.getOrInstantiateProvider(e,n?.enabledProviderPrefixes),a=this.visibleQuickAccess,o=a?.descriptor;if(a&&i&&o===i){e!==i.prefix&&!n?.preserveValue&&(a.picker.value=e),this.adjustValueSelection(a.picker,i,n);return}if(i&&!n?.preserveValue){let t;if(a&&o&&o!==i){let e=a.value.substr(o.prefix.length);e&&(t=`${i.prefix}${e}`)}if(!t){let e=r?.defaultFilterValue;e===h8.LAST?t=this.lastAcceptedPickerValues.get(i):typeof e==`string`&&(t=`${i.prefix}${e}`)}typeof t==`string`&&(e=t)}let s=a?.picker?.valueSelection,c=a?.picker?.value,l=new C,u=l.add(this.quickInputService.createQuickPick({useSeparators:!0}));u.value=e,this.adjustValueSelection(u,i,n),u.placeholder=n?.placeholder??i?.placeholder,u.quickNavigate=n?.quickNavigateConfiguration,u.hideInput=!!u.quickNavigate&&!a,(typeof n?.itemActivation==`number`||n?.quickNavigateConfiguration)&&(u.itemActivation=n?.itemActivation??IH.SECOND),u.contextKey=i?.contextKey,u.filterValue=e=>e.substring(i?i.prefix.length:0);let d;t&&(d=new kc,l.add(T.once(u.onWillAccept)(e=>{e.veto(),u.hide()}))),l.add(this.registerPickerListeners(u,r,i,e,n));let f=l.add(new Lr);if(r&&l.add(r.provide(u,f.token,n?.providerOptions)),T.once(u.onDidHide)(()=>{u.selectedItems.length===0&&f.cancel(),l.dispose(),d?.complete(u.selectedItems.slice(0))}),u.show(),s&&c===e&&(u.valueSelection=s),t)return d?.p}adjustValueSelection(e,t,n){let r;r=n?.preserveValue?[e.value.length,e.value.length]:[t?.prefix.length??0,e.value.length],e.valueSelection=r}registerPickerListeners(e,t,n,r,i){let a=new C,o=this.visibleQuickAccess={picker:e,descriptor:n,value:r};return a.add(S(()=>{o===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),a.add(e.onDidChangeValue(e=>{let[n]=this.getOrInstantiateProvider(e,i?.enabledProviderPrefixes);n===t?o.value=e:this.show(e,{enabledProviderPrefixes:i?.enabledProviderPrefixes,preserveValue:!0,providerOptions:i?.providerOptions})})),n&&a.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(n,e.value)})),a}getOrInstantiateProvider(e,t){let n=this.registry.getQuickAccessProvider(e,this.contextKeyService);if(!n||t&&!t?.includes(n.prefix))return[void 0,void 0];let r=this.mapProviderToDescriptor.get(n);return r||(r=this.instantiationService.createInstance(n.ctor),this.mapProviderToDescriptor.set(n,r)),[r,n]}};_8=t([n(0,WR),n(1,Cy),n(2,uS)],_8),s({});var v8=class extends w{constructor(e,t,n){super(),this.options=t,this.styles=n,this.count=0,this.hover=this._register(new Ln),this.element=z(e,B(`.monaco-count-badge`)),this._register(S(()=>e.removeChild(this.element))),this.countFormat=this.options.countFormat||`{0}`,this.titleFormat=this.options.titleFormat||``,this.setCount(this.options.count||0),this.updateHover()}setCount(e){this.count=e,this.render()}setCountFormat(e){this.countFormat=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.updateHover(),this.render()}updateHover(){this.titleFormat!==``&&!this.hover.value?this.hover.value=wE().setupDelayedHoverAtMouse(this.element,()=>({content:Oa(this.titleFormat,this.count),appearance:{compact:!0}})):this.titleFormat===``&&this.hover.value&&(this.hover.value=void 0)}render(){this.element.textContent=Oa(this.countFormat,this.count),this.element.style.backgroundColor=this.styles.badgeBackground??``,this.element.style.color=this.styles.badgeForeground??``,this.styles.badgeBorder&&(this.element.style.border=`1px solid ${this.styles.badgeBorder}`)}};s(MH);var Pae=B,Fae=class extends w{constructor(e,t,n){super(),this.parent=e,this.onDidChange=e=>this.findInput.onDidChange(e),this.container=z(this.parent,Pae(`.quick-input-box`)),this.findInput=this._register(new _M(this.container,void 0,{label:``,inputBoxStyles:t,toggleStyles:n,actionViewItemProvider:qj(n),hideHoverOnValueChange:!0}));let r=this.findInput.inputBox.inputElement;r.role=`textbox`,r.ariaHasPopup=`menu`,r.ariaAutoComplete=`list`}get onKeyDown(){return this.findInput.onKeyDown}get onMouseDown(){return this.findInput.onMouseDown}get value(){return this.findInput.getValue()}set value(e){this.findInput.setValue(e)}select(e=null){this.findInput.inputBox.select(e)}getSelection(){return this.findInput.inputBox.getSelection()}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}setPlaceholder(e){this.findInput.inputBox.setPlaceHolder(e)}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute(`placeholder`)||``}set placeholder(e){this.findInput.inputBox.setPlaceHolder(e)}get password(){return this.findInput.inputBox.inputElement.type===`password`}set password(e){this.findInput.inputBox.inputElement.type=e?`password`:`text`}set enabled(e){this.findInput.inputBox.inputElement.toggleAttribute(`readonly`,!e)}set toggles(e){this.findInput.setAdditionalToggles(e)}set actions(e){this.setActions(e)}setActions(e,t){this.findInput.setActions(e,t)}get ariaLabel(){return this.findInput.inputBox.inputElement.getAttribute(`aria-label`)||``}set ariaLabel(e){this.findInput.inputBox.inputElement.setAttribute(`aria-label`,e)}hasFocus(){return this.findInput.inputBox.hasFocus()}setAttribute(e,t){this.findInput.inputBox.inputElement.setAttribute(e,t)}removeAttribute(e){this.findInput.inputBox.inputElement.removeAttribute(e)}showDecoration(e){e===Lx.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:e===Lx.Info?dM.INFO:e===Lx.Warning?dM.WARNING:dM.ERROR,content:``})}stylesForType(e){return this.findInput.inputBox.stylesForType(e===Lx.Info?dM.INFO:e===Lx.Warning?dM.WARNING:dM.ERROR)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}},y8,b8,x8=B,S8=class{constructor(e,t,n){this.index=e,this.hasCheckbox=t,this._hidden=!1,this._init=new Sa(()=>{let e=n.label??``;return{saneLabel:e,saneSortLabel:hD(e).text.trim(),saneAriaLabel:n.ariaLabel||[e,this.saneDescription,this.saneDetail].map(e=>pD(e)).filter(e=>!!e).join(`, `)}}),this._saneDescription=n.description,this._saneTooltip=n.tooltip}get saneLabel(){return this._init.value.saneLabel}get saneSortLabel(){return this._init.value.saneSortLabel}get saneAriaLabel(){return this._init.value.saneAriaLabel}get element(){return this._element}set element(e){this._element=e}get hidden(){return this._hidden}set hidden(e){this._hidden=e}get saneDescription(){return this._saneDescription}set saneDescription(e){this._saneDescription=e}get saneDetail(){return this._saneDetail}set saneDetail(e){this._saneDetail=e}get saneTooltip(){return this._saneTooltip}set saneTooltip(e){this._saneTooltip=e}get labelHighlights(){return this._labelHighlights}set labelHighlights(e){this._labelHighlights=e}get descriptionHighlights(){return this._descriptionHighlights}set descriptionHighlights(e){this._descriptionHighlights=e}get detailHighlights(){return this._detailHighlights}set detailHighlights(e){this._detailHighlights=e}},C8=class extends S8{constructor(e,t,n,r,i,a,o){super(e,n,a),this.childIndex=t,this.fireButtonTriggered=r,this._onChecked=i,this.item=a,this._separator=o,this._checked=!1,this.onChecked=n?T.map(T.filter(this._onChecked.event,e=>e.element===this),e=>e.checked):T.None,this._saneDetail=a.detail,this._labelHighlights=a.highlights?.label,this._descriptionHighlights=a.highlights?.description,this._detailHighlights=a.highlights?.detail}get separator(){return this._separator}set separator(e){this._separator=e}get checked(){return this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire({element:this,checked:e}))}get checkboxDisabled(){return!!this.item.disabled}},w8;(function(e){e[e.NONE=0]=`NONE`,e[e.MOUSE_HOVER=1]=`MOUSE_HOVER`,e[e.ACTIVE_ITEM=2]=`ACTIVE_ITEM`})(w8||={});var T8=class extends S8{constructor(e,t,n){super(e,!1,n),this.fireSeparatorButtonTriggered=t,this.separator=n,this.children=[],this.focusInsideSeparator=w8.NONE}},Iae=class{getHeight(e){return e instanceof T8?30:e.saneDetail?44:22}getTemplateId(e){return e instanceof C8?D8.ID:O8.ID}},Lae=class{getWidgetAriaLabel(){return D(2039,`Quick Input`)}getAriaLabel(e){return e.separator?.label?`${e.saneAriaLabel}, ${e.separator.label}`:e.saneAriaLabel}getWidgetRole(){return`listbox`}getRole(e){return e.hasCheckbox?`checkbox`:`option`}isChecked(e){if(!(!e.hasCheckbox||!(e instanceof C8)))return{get value(){return e.checked},onDidChange:t=>e.onChecked(()=>t())}}},E8=class{constructor(e,t,n){this.hoverDelegate=e,this.toggleStyles=t,this.contextMenuService=n}renderTemplate(e){let t=Object.create(null);t.toDisposeElement=new C,t.toDisposeTemplate=new C,t.entry=z(e,x8(`.quick-input-list-entry`));let n=z(t.entry,x8(`label.quick-input-list-label`));t.outerLabel=n,t.checkbox=t.toDisposeTemplate.add(new Ln),t.toDisposeTemplate.add(fg(n,R.CLICK,e=>{if(t.checkbox.value&&!e.defaultPrevented&&t.checkbox.value.enabled){let e=!t.checkbox.value.checked;t.checkbox.value.checked=e,t.element.checked=e}}));let r=z(n,x8(`.quick-input-list-rows`)),i=z(r,x8(`.quick-input-list-row`)),a=z(r,x8(`.quick-input-list-row`));return t.label=new SJ(i,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.label),t.icon=R_(t.label.element,x8(`.quick-input-list-icon`)),t.keybinding=new vJ(z(i,x8(`.quick-input-list-entry-keybinding`)),Ei),t.toDisposeTemplate.add(t.keybinding),t.detail=new SJ(z(a,x8(`.quick-input-list-label-meta`)),{supportHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.detail),t.separator=z(t.entry,x8(`.quick-input-list-separator`)),t.toolBar=new bH(t.entry,this.contextMenuService,{...this.hoverDelegate?{hoverDelegate:this.hoverDelegate}:void 0,actionViewItemProvider:qj(this.toggleStyles),icon:!0,label:!1}),t.toolBar.getElement().classList.add(`quick-input-list-entry-action-bar`),t.toDisposeTemplate.add(t.toolBar),t}disposeTemplate(e){e.toDisposeElement.dispose(),e.toDisposeTemplate.dispose()}disposeElement(e,t,n){n.toDisposeElement.clear(),n.toolBar.setActions([])}},D8=class extends E8{static#e=y8=this;static#t=this.ID=`quickpickitem`;constructor(e,t,n,r){super(e,t,n),this.themeService=r,this._itemsWithSeparatorsFrequency=new Map}get templateId(){return y8.ID}ensureCheckbox(e,t){if(!e.hasCheckbox){t.checkbox.value?.domNode.remove(),t.checkbox.clear();return}let n=t.checkbox.value;n?n.setTitle(e.saneLabel):(n=new Wj(e.saneLabel,e.checked,{...hF,size:15}),t.checkbox.value=n,t.outerLabel.prepend(n.domNode),n.domNode.tabIndex=-1),e.checkboxDisabled?n.disable():n.enable(),n.checked=e.checked,t.toDisposeElement.add(e.onChecked(e=>n.checked=e)),t.toDisposeElement.add(n.onChange(()=>e.checked=n.checked))}renderElement(e,t,n){let r=e.element;n.element=r,r.element=n.entry??void 0;let i=r.item;r.element.classList.toggle(`not-pickable`,r.item.pickable===!1),this.ensureCheckbox(r,n);let{labelHighlights:a,descriptionHighlights:o,detailHighlights:s}=r;if(i.iconPath){let e=yr(this.themeService.getColorTheme().type)?i.iconPath.dark:i.iconPath.light??i.iconPath.dark,t=k.revive(e);n.icon.className=`quick-input-list-icon`,n.icon.style.backgroundImage=MC(t)}else n.icon.style.backgroundImage=``,n.icon.className=i.iconClass?`quick-input-list-icon ${i.iconClass}`:``;let c;!r.saneTooltip&&r.saneDescription&&(c={markdown:{value:Ma(r.saneDescription),supportThemeIcons:!0},markdownNotSupportedFallback:r.saneDescription});let l={matches:a||[],descriptionTitle:c,descriptionMatches:o||[],labelEscapeNewLines:!0};if(l.extraClasses=i.iconClasses,l.italic=i.italic,l.strikethrough=i.strikethrough,n.entry.classList.remove(`quick-input-list-separator-as-item`),n.label.setLabel(r.saneLabel,r.saneDescription,l),n.keybinding.set(i.keybinding),r.saneDetail){let e;r.saneTooltip||(e={markdown:{value:Ma(r.saneDetail),supportThemeIcons:!0},markdownNotSupportedFallback:r.saneDetail}),n.detail.element.style.display=``,n.detail.setLabel(r.saneDetail,void 0,{matches:s,title:e,labelEscapeNewLines:!0})}else n.detail.element.style.display=`none`;r.separator?.label?(n.separator.textContent=r.separator.label,n.separator.style.display=``,this.addItemWithSeparator(r)):n.separator.style.display=`none`,n.entry.classList.toggle(`quick-input-list-separator-border`,!!r.separator&&r.childIndex!==0);let u=i.buttons;if(u&&u.length){let{primary:e,secondary:t}=KH(u,`quick-input-item`,e=>r.fireButtonTriggered({button:e,item:r.item}));n.toolBar.setActions(e,t),n.entry.classList.add(`has-actions`)}else n.toolBar.setActions([]),n.entry.classList.remove(`has-actions`)}disposeElement(e,t,n){this.removeItemWithSeparator(e.element),super.disposeElement(e,t,n)}isItemWithSeparatorVisible(e){return this._itemsWithSeparatorsFrequency.has(e)}addItemWithSeparator(e){this._itemsWithSeparatorsFrequency.set(e,(this._itemsWithSeparatorsFrequency.get(e)||0)+1)}removeItemWithSeparator(e){let t=this._itemsWithSeparatorsFrequency.get(e)||0;t>1?this._itemsWithSeparatorsFrequency.set(e,t-1):this._itemsWithSeparatorsFrequency.delete(e)}};D8=y8=t([n(2,tF),n(3,Fx)],D8);var O8=class extends E8{static#e=b8=this;static#t=this.ID=`quickpickseparator`;constructor(e,t,n){super(e,t,n),this._visibleSeparatorsFrequency=new Map}get templateId(){return b8.ID}get visibleSeparators(){return[...this._visibleSeparatorsFrequency.keys()]}isSeparatorVisible(e){return this._visibleSeparatorsFrequency.has(e)}renderElement(e,t,n){let r=e.element;n.element=r,r.element=n.entry??void 0,r.element.classList.toggle(`focus-inside`,!!r.focusInsideSeparator);let i=r.separator,{labelHighlights:a,descriptionHighlights:o}=r;n.icon.style.backgroundImage=``,n.icon.className=``;let s;!r.saneTooltip&&r.saneDescription&&(s={markdown:{value:Ma(r.saneDescription),supportThemeIcons:!0},markdownNotSupportedFallback:r.saneDescription});let c={matches:a||[],descriptionTitle:s,descriptionMatches:o||[],labelEscapeNewLines:!0};n.entry.classList.add(`quick-input-list-separator-as-item`),n.label.setLabel(r.saneLabel,r.saneDescription,c),n.separator.style.display=`none`,n.entry.classList.add(`quick-input-list-separator-border`);let l=i.buttons;if(l&&l.length){let{primary:e,secondary:t}=KH(l,`quick-input-separator`,e=>r.fireSeparatorButtonTriggered({button:e,separator:r.separator}));n.toolBar.setActions(e,t),n.entry.classList.add(`has-actions`)}else n.toolBar.setActions([]),n.entry.classList.remove(`has-actions`);this.addSeparator(r)}disposeElement(e,t,n){this.removeSeparator(e.element),this.isSeparatorVisible(e.element)||e.element.element?.classList.remove(`focus-inside`),super.disposeElement(e,t,n)}addSeparator(e){this._visibleSeparatorsFrequency.set(e,(this._visibleSeparatorsFrequency.get(e)||0)+1)}removeSeparator(e){let t=this._visibleSeparatorsFrequency.get(e)||0;t>1?this._visibleSeparatorsFrequency.set(e,t-1):this._visibleSeparatorsFrequency.delete(e)}};O8=b8=t([n(2,tF)],O8);var k8=class extends w{constructor(e,t,n,r,i,a,o){super(),this.parent=e,this.hoverDelegate=t,this.linkOpenerDelegate=n,this.styles=i,this.accessibilityService=o,this._onKeyDown=new E,this.onKeyDown=this._onKeyDown.event,this._onLeave=new E,this.onLeave=this._onLeave.event,this._visibleCountObservable=Oh(`VisibleCount`,0),this.onChangedVisibleCount=T.fromObservable(this._visibleCountObservable,this._store),this._allVisibleCheckedObservable=Oh(`AllVisibleChecked`,!1),this.onChangedAllVisibleChecked=T.fromObservable(this._allVisibleCheckedObservable,this._store),this._checkedCountObservable=Oh(`CheckedCount`,0),this.onChangedCheckedCount=T.fromObservable(this._checkedCountObservable,this._store),this._checkedElementsObservable=d2({equalsFn:ut},[]),this.onChangedCheckedElements=T.fromObservable(this._checkedElementsObservable,this._store),this._onButtonTriggered=new E,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new E,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._elementChecked=new E,this._elementCheckedEventBufferer=new lr,this._hasCheckboxes=!1,this._inputElements=[],this._elementTree=[],this._itemElements=[],this._elementDisposable=this._register(new C),this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode=`fuzzy`,this._matchOnMeta=!0,this._sortByLabel=!0,this._shouldLoop=!0,this._container=z(this.parent,x8(`.quick-input-list`)),this._separatorRenderer=a.createInstance(O8,t,this.styles.toggle),this._itemRenderer=a.createInstance(D8,t,this.styles.toggle),this._tree=this._register(a.createInstance(wI,`QuickInput`,this._container,new Iae,[this._itemRenderer,this._separatorRenderer],{filter:{filter(e){return e.hidden?vM.Hidden:e instanceof T8?vM.Recurse:vM.Visible}},sorter:{compare:(e,t)=>!this.sortByLabel||!this._lastQueryString?0:zae(e,t,this._lastQueryString.toLowerCase())},accessibilityProvider:new Lae,setRowLineHeight:!1,multipleSelectionSupport:!1,hideTwistiesOfChildlessElements:!0,renderIndentGuides:HM.None,findWidgetEnabled:!1,indent:0,horizontalScrolling:!1,allowNonCollapsibleParents:!0,alwaysConsumeMouseWheel:!0})),this._tree.getHTMLElement().id=r,this._registerListeners()}get onDidChangeFocus(){return T.map(this._tree.onDidChangeFocus,e=>e.elements.filter(e=>e instanceof C8).map(e=>e.item),this._store)}get onDidChangeSelection(){return T.map(this._tree.onDidChangeSelection,e=>({items:e.elements.filter(e=>e instanceof C8).map(e=>e.item),event:e.browserEvent}),this._store)}get displayed(){return this._container.style.display!==`none`}set displayed(e){this._container.style.display=e?``:`none`}get scrollTop(){return this._tree.scrollTop}set scrollTop(e){this._tree.scrollTop=e}get ariaLabel(){return this._tree.ariaLabel}set ariaLabel(e){this._tree.ariaLabel=e??``}set enabled(e){this._tree.getHTMLElement().style.pointerEvents=e?``:`none`}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e}get matchOnMeta(){return this._matchOnMeta}set matchOnMeta(e){this._matchOnMeta=e}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e}get shouldLoop(){return this._shouldLoop}set shouldLoop(e){this._shouldLoop=e}_registerListeners(){this._registerOnContainerClick(),this._registerOnMouseMiddleClick(),this._registerOnTreeModelChanged(),this._registerOnElementChecked(),this._registerOnContextMenu(),this._registerHoverListeners(),this._registerSelectionChangeListener(),this._registerSeparatorActionShowingListeners()}_registerOnContainerClick(){this._register(L(this._container,R.CLICK,e=>{(e.x||e.y)&&this._onLeave.fire()}))}_registerOnMouseMiddleClick(){this._register(L(this._container,R.AUXCLICK,e=>{e.button===1&&this._onLeave.fire()}))}_registerOnTreeModelChanged(){this._register(this._tree.onDidChangeModel(()=>{let e=this._itemElements.filter(e=>!e.hidden).length;this._visibleCountObservable.set(e,void 0),this._hasCheckboxes&&this._updateCheckedObservables()}))}_registerOnElementChecked(){this._register(this._elementCheckedEventBufferer.wrapEvent(this._elementChecked.event,(e,t)=>t)(e=>this._updateCheckedObservables()))}_registerOnContextMenu(){this._register(this._tree.onContextMenu(e=>{e.element&&(e.browserEvent.preventDefault(),this._tree.setSelection([e.element]))}))}_registerHoverListeners(){let e=this._register(new lc(typeof this.hoverDelegate.delay==`function`?this.hoverDelegate.delay():this.hoverDelegate.delay));this._register(this._tree.onMouseOver(async t=>{if(S_(t.browserEvent.target)){e.cancel();return}if(!(!S_(t.browserEvent.relatedTarget)&&Jg(t.browserEvent.relatedTarget,t.element?.element)))try{await e.trigger(async()=>{t.element instanceof C8&&this.showHover(t.element)})}catch(e){if(!v(e))throw e}})),this._register(this._tree.onMouseOut(t=>{Jg(t.browserEvent.relatedTarget,t.element?.element)||e.cancel()}))}_registerSeparatorActionShowingListeners(){this._register(this._tree.onDidChangeFocus(e=>{let t=e.elements[0]?this._tree.getParentElement(e.elements[0]):null;for(let e of this._separatorRenderer.visibleSeparators){let n=e===t;!!(e.focusInsideSeparator&w8.ACTIVE_ITEM)!==n&&(n?e.focusInsideSeparator|=w8.ACTIVE_ITEM:e.focusInsideSeparator&=~w8.ACTIVE_ITEM,this._tree.rerender(e))}})),this._register(this._tree.onMouseOver(e=>{let t=e.element?this._tree.getParentElement(e.element):null;for(let e of this._separatorRenderer.visibleSeparators)e===t&&(e.focusInsideSeparator&w8.MOUSE_HOVER||(e.focusInsideSeparator|=w8.MOUSE_HOVER,this._tree.rerender(e)))})),this._register(this._tree.onMouseOut(e=>{let t=e.element?this._tree.getParentElement(e.element):null;for(let e of this._separatorRenderer.visibleSeparators)e===t&&e.focusInsideSeparator&w8.MOUSE_HOVER&&(e.focusInsideSeparator&=~w8.MOUSE_HOVER,this._tree.rerender(e))}))}_registerSelectionChangeListener(){this._register(this._tree.onDidChangeSelection(e=>{let t=e.elements.filter(e=>e instanceof C8);t.length!==e.elements.length&&(e.elements.length===1&&e.elements[0]instanceof T8&&(this._tree.setFocus([e.elements[0].children[0]]),this._tree.reveal(e.elements[0],0)),this._tree.setSelection(t))}))}setAllVisibleChecked(e){this._elementCheckedEventBufferer.bufferEvents(()=>{this._itemElements.forEach(t=>{!t.hidden&&!t.checkboxDisabled&&t.item.pickable!==!1&&(t.checked=e)})})}setElements(e){this._elementDisposable.clear(),this._lastQueryString=void 0,this._inputElements=e,this._hasCheckboxes=this.parent.classList.contains(`show-checkboxes`);let t;this._itemElements=[],this._elementTree=e.reduce((n,r,i)=>{let a;if(r.type===`separator`){if(!r.buttons)return n;t=new T8(i,e=>this._onSeparatorButtonTriggered.fire(e),r),a=t}else{let o=i>0?e[i-1]:void 0,s;o&&o.type===`separator`&&!o.buttons&&(s=o);let c=new C8(i,t?.children?t.children.length:i,this._hasCheckboxes&&r.pickable!==!1,e=>this._onButtonTriggered.fire(e),this._elementChecked,r,s);if(this._itemElements.push(c),t)return t.children.push(c),n;a=c}return n.push(a),n},[]),this._setElementsToTree(this._elementTree),this.accessibilityService.isScreenReaderOptimized()&&setTimeout(()=>{let e=this._tree.getHTMLElement().querySelector(`.monaco-list-row.focused`),t=e?.parentNode;if(e&&t){let n=e.nextSibling;e.remove(),t.insertBefore(e,n)}},0)}setFocusedElements(e){let t=e.map(e=>this._itemElements.find(t=>t.item===e)).filter(e=>!!e).filter(e=>!e.hidden);if(this._tree.setFocus(t),e.length>0){let e=this._tree.getFocus()[0];e&&this._tree.reveal(e)}}getActiveDescendant(){return this._tree.getHTMLElement().getAttribute(`aria-activedescendant`)}setSelectedElements(e){let t=e.map(e=>this._itemElements.find(t=>t.item===e)).filter(e=>!!e);this._tree.setSelection(t)}getCheckedElements(){return this._itemElements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){this._elementCheckedEventBufferer.bufferEvents(()=>{let t=new Set;for(let n of e)t.add(n);for(let e of this._itemElements)e.checked=t.has(e.item)})}focus(e){if(this._itemElements.length)switch(e===LH.Second&&this._itemElements.length<2&&(e=LH.First),e){case LH.First:this._tree.scrollTop=0,this._tree.focusFirst(void 0,e=>e.element instanceof C8);break;case LH.Second:{this._tree.scrollTop=0;let e=!1;this._tree.focusFirst(void 0,t=>t.element instanceof C8?e?!0:(e=!e,!1):!1);break}case LH.Last:this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,e=>e.element instanceof C8);break;case LH.Next:{let e=this._tree.getFocus();this._tree.focusNext(void 0,this._shouldLoop,void 0,e=>e.element instanceof C8?(this._tree.reveal(e.element),!0):!1);let t=this._tree.getFocus();e.length&&e[0]===t[0]&&this._onLeave.fire();break}case LH.Previous:{let e=this._tree.getFocus();this._tree.focusPrevious(void 0,this._shouldLoop,void 0,e=>{if(!(e.element instanceof C8))return!1;let t=this._tree.getParentElement(e.element);return t===null||t.children[0]!==e.element?this._tree.reveal(e.element):this._tree.reveal(t),!0});let t=this._tree.getFocus();e.length&&e[0]===t[0]&&this._onLeave.fire();break}case LH.NextPage:this._tree.focusNextPage(void 0,e=>e.element instanceof C8?(this._tree.reveal(e.element),!0):!1);break;case LH.PreviousPage:this._tree.focusPreviousPage(void 0,e=>{if(!(e.element instanceof C8))return!1;let t=this._tree.getParentElement(e.element);return t===null||t.children[0]!==e.element?this._tree.reveal(e.element):this._tree.reveal(t),!0});break;case LH.NextSeparator:{let e=!1,t=this._tree.getFocus()[0];this._tree.focusNext(void 0,!0,void 0,t=>{if(e)return!0;if(t.element instanceof T8)e=!0,this._separatorRenderer.isSeparatorVisible(t.element)?this._tree.reveal(t.element.children[0]):this._tree.reveal(t.element,0);else if(t.element instanceof C8){if(t.element.separator)return this._itemRenderer.isItemWithSeparatorVisible(t.element)?this._tree.reveal(t.element):this._tree.reveal(t.element,0),!0;if(t.element===this._elementTree[0])return this._tree.reveal(t.element,0),!0}return!1}),t===this._tree.getFocus()[0]&&(this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,e=>e.element instanceof C8));break}case LH.PreviousSeparator:{let e,t=!!this._tree.getFocus()[0]?.separator;this._tree.focusPrevious(void 0,!0,void 0,n=>{if(n.element instanceof T8)t?e||=(this._separatorRenderer.isSeparatorVisible(n.element)?this._tree.reveal(n.element):this._tree.reveal(n.element,0),n.element.children[0]):t=!0;else if(n.element instanceof C8&&!e){if(n.element.separator)this._itemRenderer.isItemWithSeparatorVisible(n.element)?this._tree.reveal(n.element):this._tree.reveal(n.element,0),e=n.element;else if(n.element===this._elementTree[0])return this._tree.reveal(n.element,0),!0}return!1}),e&&this._tree.setFocus([e]);break}}}clearFocus(){this._tree.setFocus([])}domFocus(){this._tree.domFocus()}layout(e){this._tree.getHTMLElement().style.maxHeight=e?`${Math.floor(e/44)*44+6}px`:``,this._tree.layout()}filter(e){if(this._lastQueryString=e,!(this._sortByLabel||this._matchOnLabel||this._matchOnDescription||this._matchOnDetail))return this._tree.layout(),!1;let t=e;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this._itemElements.forEach(e=>{e.labelHighlights=void 0,e.descriptionHighlights=void 0,e.detailHighlights=void 0,e.hidden=!1;let t=e.index&&this._inputElements[e.index-1];e.item&&(e.separator=t&&t.type===`separator`&&!t.buttons?t:void 0)});else{let n;this._itemElements.forEach(r=>{let i;i=this.matchOnLabelMode===`fuzzy`?this.matchOnLabel?gD(e,hD(r.saneLabel))??void 0:void 0:this.matchOnLabel?Rae(t,hD(r.saneLabel))??void 0:void 0;let a=this.matchOnDescription?gD(e,hD(r.saneDescription||``))??void 0:void 0,o=this.matchOnDetail?gD(e,hD(r.saneDetail||``))??void 0:void 0;if(i||a||o?(r.labelHighlights=i,r.descriptionHighlights=a,r.detailHighlights=o,r.hidden=!1):(r.labelHighlights=void 0,r.descriptionHighlights=void 0,r.detailHighlights=void 0,r.hidden=r.item?!r.item.alwaysShow:!0),r.item?r.separator=void 0:r.separator&&(r.hidden=!0),!this.sortByLabel){let e=r.index&&this._inputElements[r.index-1]||void 0;e?.type===`separator`&&!e.buttons&&(n=e),n&&!r.hidden&&(r.separator=n,n=void 0)}})}return this._setElementsToTree(this._sortByLabel&&e?this._itemElements:this._elementTree),this._tree.layout(),!0}toggleCheckbox(){this._elementCheckedEventBufferer.bufferEvents(()=>{let e=this._tree.getFocus().filter(e=>e instanceof C8),t=this._allVisibleChecked(e);for(let n of e)n.checkboxDisabled||(n.checked=!t)})}style(e){this._tree.style(e)}toggleHover(){let e=this._tree.getFocus()[0];if(!e?.saneTooltip||!(e instanceof C8))return;if(this._lastHover&&!this._lastHover.isDisposed){this._lastHover.dispose();return}this.showHover(e);let t=new C;t.add(this._tree.onDidChangeFocus(e=>{e.elements[0]instanceof C8&&this.showHover(e.elements[0])})),this._lastHover&&t.add(this._lastHover),this._elementDisposable.add(t)}_setElementsToTree(e){let t=[];for(let n of e)n instanceof T8?t.push({element:n,collapsible:!1,collapsed:!1,children:n.children.map(e=>({element:e,collapsible:!1,collapsed:!1}))}):t.push({element:n,collapsible:!1,collapsed:!1});this._tree.setChildren(null,t)}_allVisibleChecked(e,t=!0){for(let n=0,r=e.length;n<r;n++){let r=e[n];if(!r.hidden&&r.item.pickable!==!1)if(r.checked)t=!0;else return!1}return t}_updateCheckedObservables(){wh(e=>{this._allVisibleCheckedObservable.set(this._allVisibleChecked(this._itemElements,!1),e);let t=this._itemElements.filter(e=>e.checked).length;this._checkedCountObservable.set(t,e),this._checkedElementsObservable.set(this.getCheckedElements(),e)})}showHover(e){this._lastHover&&!this._lastHover.isDisposed&&(this.hoverDelegate.onDidHideHover?.(),this._lastHover?.dispose()),!(!e.element||!e.saneTooltip)&&(this._lastHover=this.hoverDelegate.showHover({content:e.saneTooltip,target:e.element,linkHandler:e=>{this.linkOpenerDelegate(e)},appearance:{showPointer:!0},container:this._container,position:{hoverPosition:UU.RIGHT}},!1))}};k8.__decorator=t([iS],k8.prototype,`onDidChangeFocus`,null),k8.__decorator=t([iS],k8.prototype,`onDidChangeSelection`,null),k8=t([n(5,Cy),n(6,VL)],k8);function Rae(e,t){let{text:n,iconOffsets:r}=t;if(!r||r.length===0)return A8(e,n);let i=La(n,` `),a=n.length-i.length,o=A8(e,i);if(o)for(let e of o){let t=r[e.start+a]+a;e.start+=t,e.end+=t}return o}function A8(e,t){let n=t.toLowerCase().indexOf(e.toLowerCase());return n===-1?null:[{start:n,end:n+e.length}]}function zae(e,t,n){let r=e.labelHighlights||[],i=t.labelHighlights||[];return r.length&&!i.length?-1:!r.length&&i.length?1:r.length===0&&i.length===0?0:aY(e.saneSortLabel,t.saneSortLabel,n)}function Bae(e,t={}){aC.registerCommandAndKeybindingRule({weight:iC.WorkbenchContrib,when:QH,metadata:{description:D(2027,`Used while in the context of any kind of quick input. If you change one keybinding for this command, you should change all of the other keybindings (modifier variants) of this command as well.`)},...e,secondary:N8(e.primary,e.secondary??[],t)})}function j8(e,t={}){aC.registerCommandAndKeybindingRule({weight:iC.WorkbenchContrib,when:jS.and(jS.or(jS.equals(eU,FH.QuickPick),jS.equals(eU,FH.QuickTree)),QH),metadata:{description:D(2028,`Used while in the context of the quick pick. If you change one keybinding for this command, you should change all of the other keybindings (modifier variants) of this command as well.`)},...e,secondary:N8(e.primary,e.secondary??[],t)})}var M8=si?Qf.WinCtrl:Qf.CtrlCmd;function N8(e,t,n={}){return n.withAltMod&&t.push(Qf.Alt+e),n.withCtrlMod&&(t.push(M8+e),n.withAltMod&&t.push(Qf.Alt+M8+e)),n.withCmdMod&&si&&(t.push(Qf.CtrlCmd+e),n.withCtrlMod&&t.push(Qf.CtrlCmd+Qf.WinCtrl+e),n.withAltMod&&(t.push(Qf.CtrlCmd+Qf.Alt+e),n.withCtrlMod&&t.push(Qf.CtrlCmd+Qf.Alt+Qf.WinCtrl+e))),t}function P8(e,t){return n=>{let r=n.get(WR).currentQuickInput;if(r)return t&&r.quickNavigate?r.focus(t):r.focus(e)}}j8({id:`quickInput.pageNext`,primary:F.PageDown,handler:P8(LH.NextPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0}),j8({id:`quickInput.pagePrevious`,primary:F.PageUp,handler:P8(LH.PreviousPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0}),j8({id:`quickInput.first`,primary:M8+F.Home,handler:P8(LH.First)},{withAltMod:!0,withCmdMod:!0}),j8({id:`quickInput.last`,primary:M8+F.End,handler:P8(LH.Last)},{withAltMod:!0,withCmdMod:!0}),j8({id:`quickInput.next`,primary:F.DownArrow,handler:P8(LH.Next)},{withCtrlMod:!0}),j8({id:`quickInput.previous`,primary:F.UpArrow,handler:P8(LH.Previous)},{withCtrlMod:!0});var F8=D(2029,`If we're in quick access mode, this will navigate to the next item. If we are not in quick access mode, this will navigate to the next separator.`),I8=D(2030,`If we're in quick access mode, this will navigate to the previous item. If we are not in quick access mode, this will navigate to the previous separator.`);si?(j8({id:`quickInput.nextSeparatorWithQuickAccessFallback`,primary:Qf.CtrlCmd+F.DownArrow,handler:P8(LH.NextSeparator,LH.Next),metadata:{description:F8}}),j8({id:`quickInput.nextSeparator`,primary:Qf.CtrlCmd+Qf.Alt+F.DownArrow,secondary:[Qf.CtrlCmd+Qf.WinCtrl+F.DownArrow],handler:P8(LH.NextSeparator)},{withCtrlMod:!0}),j8({id:`quickInput.previousSeparatorWithQuickAccessFallback`,primary:Qf.CtrlCmd+F.UpArrow,handler:P8(LH.PreviousSeparator,LH.Previous),metadata:{description:I8}}),j8({id:`quickInput.previousSeparator`,primary:Qf.CtrlCmd+Qf.Alt+F.UpArrow,secondary:[Qf.CtrlCmd+Qf.WinCtrl+F.UpArrow],handler:P8(LH.PreviousSeparator)},{withCtrlMod:!0})):(j8({id:`quickInput.nextSeparatorWithQuickAccessFallback`,primary:Qf.Alt+F.DownArrow,handler:P8(LH.NextSeparator,LH.Next),metadata:{description:F8}}),j8({id:`quickInput.nextSeparator`,primary:Qf.CtrlCmd+Qf.Alt+F.DownArrow,handler:P8(LH.NextSeparator)}),j8({id:`quickInput.previousSeparatorWithQuickAccessFallback`,primary:Qf.Alt+F.UpArrow,handler:P8(LH.PreviousSeparator,LH.Previous),metadata:{description:I8}}),j8({id:`quickInput.previousSeparator`,primary:Qf.CtrlCmd+Qf.Alt+F.UpArrow,handler:P8(LH.PreviousSeparator)})),aC.registerCommandAndKeybindingRule({id:`quickInput.accept`,primary:F.Enter,weight:iC.WorkbenchContrib,when:jS.and(jS.notEquals(eU,FH.QuickWidget),QH,jS.not(`isComposing`)),metadata:{description:D(2031,`Used while in the context of some quick input. If you change one keybinding for this command, you should change all of the other keybindings (modifier variants) of this command as well.`)},handler:e=>{e.get(WR).currentQuickInput?.accept()},secondary:N8(F.Enter,[],{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0})}),j8({id:`quickInput.acceptInBackground`,when:jS.and(QH,jS.equals(eU,FH.QuickPick),jS.or($P.negate(),iU)),primary:F.RightArrow,weight:iC.WorkbenchContrib+50,handler:e=>{e.get(WR).currentQuickInput?.accept(!0)}},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0}),Bae({id:`quickInput.hide`,primary:F.Escape,handler:e=>{e.get(WR).currentQuickInput?.hide()}},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0}),j8({id:`quickInput.toggleCheckbox`,when:jS.and(QH,jS.or(jS.equals(eU,FH.QuickPick),jS.equals(eU,FH.QuickTree)),$P.negate()),primary:F.Space,handler:e=>{e.get(WR).toggle()}}),j8({id:`quickInput.toggleHover`,primary:M8|F.Space,handler:e=>{e.get(WR).toggleHover()}});var L8,R8=B,Vae=class extends w{constructor(){super(...arguments),this._onDidChangeCheckboxState=this._register(new E),this.onDidChangeCheckboxState=this._onDidChangeCheckboxState.event}setCheckboxState(e,t){this._onDidChangeCheckboxState.fire({item:e,checked:t})}},z8=class extends w{static#e=L8=this;static#t=this.ID=`quickInputTreeElement`;constructor(e,t,n,r,i,a,o){super(),this._hoverDelegate=e,this._buttonTriggeredEmitter=t,this.onCheckedEvent=n,this._checkboxStateHandler=r,this._toggleStyles=i,this._contextMenuService=a,this._themeService=o,this.templateId=L8.ID}renderTemplate(e){let t=new C,n=z(e,R8(`.quick-input-tree-entry`)),r=t.add(new Gj(``,!1,{...hF,size:15}));n.appendChild(r.domNode);let i=z(z(z(n,R8(`label.quick-input-tree-label`)),R8(`.quick-input-tree-rows`)),R8(`.quick-input-tree-row`)),a=R_(i,R8(`.quick-input-tree-icon`)),o=t.add(new SJ(i,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this._hoverDelegate})),s=t.add(new bH(n,this._contextMenuService,{actionViewItemProvider:qj(this._toggleStyles),hoverDelegate:this._hoverDelegate,icon:!0,label:!1}));return s.getElement().classList.add(`quick-input-tree-entry-action-bar`),{toDisposeTemplate:t,entry:n,checkbox:r,icon:a,label:o,actionBar:s,toDisposeElement:new C}}renderElement(e,t,n,r){let i=n.toDisposeElement,a=e.element;if(a.pickable===!1)n.checkbox.domNode.style.display=`none`;else{let e=n.checkbox;e.domNode.style.display=``,e.checked=a.checked??!1,i.add(T.filter(this.onCheckedEvent,e=>e.item===a)(t=>e.checked=t.checked)),a.disabled&&e.disable(),i.add(e.onChange(t=>this._checkboxStateHandler.setCheckboxState(a,e.checked)))}if(a.iconPath){let e=yr(this._themeService.getColorTheme().type)?a.iconPath.dark:a.iconPath.light??a.iconPath.dark,t=k.revive(e);n.icon.className=`quick-input-tree-icon`,n.icon.style.backgroundImage=MC(t)}else n.icon.style.backgroundImage=``,n.icon.className=a.iconClass?`quick-input-tree-icon ${a.iconClass}`:``;let{labelHighlights:o,descriptionHighlights:s}=e.filterData||{},c;a.description&&(c={markdown:{value:Ma(a.description),supportThemeIcons:!0},markdownNotSupportedFallback:a.description}),n.label.setLabel(a.label,a.description,{matches:o,descriptionMatches:s,extraClasses:a.iconClasses,italic:a.italic,strikethrough:a.strikethrough,labelEscapeNewLines:!0,descriptionTitle:c});let l=a.buttons;if(l&&l.length){let{primary:e,secondary:t}=KH(l,`quick-input-tree`,e=>this._buttonTriggeredEmitter.fire({item:a,button:e}));n.actionBar.setActions(e,t),n.entry.classList.add(`has-actions`)}else n.actionBar.setActions([]),n.entry.classList.remove(`has-actions`)}disposeElement(e,t,n,r){n.toDisposeElement.clear(),n.actionBar.setActions([])}disposeTemplate(e){e.toDisposeElement.dispose(),e.toDisposeTemplate.dispose()}};z8=L8=t([n(5,tF),n(6,Fx)],z8);var Hae=class{getHeight(e){return 22}getTemplateId(e){return z8.ID}};function B8(e){let t=!1,n=!1,r=!1;for(let i of e){switch(i.element?.checked){case`mixed`:r=!0;break;case!0:t=!0;break;default:n=!0;break}if(t&&n&&r)break}return n?r||t?`mixed`:!1:r?`mixed`:t}var Uae=class{constructor(e){this.onCheckedEvent=e}getWidgetAriaLabel(){return D(2044,`Quick Tree`)}getAriaLabel(e){return e.ariaLabel||[e.label,e.description].map(e=>pD(e)).filter(e=>!!e).join(`, `)}getWidgetRole(){return`tree`}getRole(e){return`checkbox`}isChecked(e){return{get value(){return e.checked===`mixed`?`mixed`:!!e.checked},onDidChange:t=>T.filter(this.onCheckedEvent,t=>t.item===e)(e=>t())}}},Wae=class{constructor(){this.filterValue=``,this.matchOnLabel=!0,this.matchOnDescription=!1}filter(e,t){if(!this.filterValue||!(this.matchOnLabel||this.matchOnDescription))return e.children?{visibility:vM.Recurse,data:{}}:{visibility:vM.Visible,data:{}};let n=this.matchOnLabel?gD(this.filterValue,hD(e.label))??void 0:void 0,r=this.matchOnDescription?gD(this.filterValue,hD(e.description||``))??void 0:void 0;return{visibility:t===vM.Visible||n||r?vM.Visible:e.children?vM.Recurse:vM.Hidden,data:{labelHighlights:n,descriptionHighlights:r}}}},Gae=class extends w{constructor(){super(...arguments),this._sortByLabel=!0}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e}compare(e,t){if(!this._sortByLabel)return 0;if(e.label<t.label)return-1;if(e.label>t.label)return 1;if(e.description&&t.description){if(e.description<t.description)return-1;if(e.description>t.description)return 1}else if(e.description)return-1;else if(t.description)return 1;return 0}},Kae=B,qae=`quick-input-tree-flat`,Jae=class{constructor(){this._elementIds=new WeakMap,this._counter=0}getId(e){let t=e.id;return t!==void 0||(t=this._elementIds.get(e),t!==void 0)?t:(t=`__generated_${this._counter++}`,this._elementIds.set(e,t),t)}},V8=class extends w{constructor(e,t,n,r){super(),this.instantiationService=r,this._onDidTriggerButton=this._register(new E),this.onDidTriggerButton=this._onDidTriggerButton.event,this._onDidChangeCheckboxState=this._register(new E),this.onDidChangeCheckboxState=this._onDidChangeCheckboxState.event,this._onDidCheckedLeafItemsChange=this._register(new E),this.onDidChangeCheckedLeafItems=this._onDidCheckedLeafItemsChange.event,this._onLeave=new E,this.onLeave=this._onLeave.event,this._onDidAccept=this._register(new E),this.onDidAccept=this._onDidAccept.event,this._container=z(e,Kae(`.quick-input-tree`)),this._checkboxStateHandler=this._register(new Vae),this._renderer=this._register(this.instantiationService.createInstance(z8,t,this._onDidTriggerButton,this.onDidChangeCheckboxState,this._checkboxStateHandler,n.toggle)),this._filter=this.instantiationService.createInstance(Wae),this._sorter=this._register(new Gae),this._tree=this._register(this.instantiationService.createInstance(wI,`QuickInputTree`,this._container,new Hae,[this._renderer],{accessibilityProvider:new Uae(this.onDidChangeCheckboxState),horizontalScrolling:!1,multipleSelectionSupport:!1,findWidgetEnabled:!1,alwaysConsumeMouseWheel:!0,hideTwistiesOfChildlessElements:!0,renderIndentGuides:HM.None,expandOnDoubleClick:!0,expandOnlyOnTwistieClick:!0,disableExpandOnSpacebar:!0,sorter:this._sorter,filter:this._filter,identityProvider:new Jae})),this.registerCheckboxStateListeners(),this.registerOnDidChangeFocus()}get tree(){return this._tree}get renderer(){return this._renderer}get displayed(){return this._container.style.display!==`none`}set displayed(e){this._container.style.display=e?``:`none`}get sortByLabel(){return this._sorter.sortByLabel}set sortByLabel(e){this._sorter.sortByLabel=e,this._tree.resort(null,!0)}getActiveDescendant(){return this._tree.getHTMLElement().getAttribute(`aria-activedescendant`)}filter(e){this._filter.filterValue=e,this._tree.refilter()}updateFilterOptions(e){e.matchOnLabel!==void 0&&(this._filter.matchOnLabel=e.matchOnLabel),e.matchOnDescription!==void 0&&(this._filter.matchOnDescription=e.matchOnDescription),this._tree.refilter()}setTreeData(e){let t=!1,n=e=>{let r;return e.children&&e.children.length>0&&(t=!0,r=e.children.map(e=>n(e)),e.checked=B8(r)),{element:e,children:r,collapsible:!!r,collapsed:e.collapsed?yM.PreserveOrCollapsed:yM.PreserveOrExpanded}},r=e.map(e=>n(e));this._tree.setChildren(null,r),this._container.classList.toggle(qae,!t)}layout(e){this._tree.getHTMLElement().style.maxHeight=e?`${Math.floor(e/44)*44+6}px`:``,this._tree.layout()}focus(e){switch(e){case LH.First:this._tree.scrollTop=0,this._tree.focusFirst();break;case LH.Second:{this._tree.scrollTop=0;let e=!1;this._tree.focusFirst(void 0,t=>e?!0:(e=!e,!1));break}case LH.Last:this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast();break;case LH.Next:{let e=this._tree.getFocus();this._tree.focusNext(void 0,!1,void 0,e=>(this._tree.reveal(e.element),!0));let t=this._tree.getFocus();e.length&&e[0]===t[0]&&this._onLeave.fire();break}case LH.Previous:{let e=this._tree.getFocus();this._tree.focusPrevious(void 0,!1,void 0,e=>(this._tree.reveal(e.element),!0));let t=this._tree.getFocus();e.length&&e[0]===t[0]&&this._onLeave.fire();break}case LH.NextPage:this._tree.focusNextPage(void 0,e=>(this._tree.reveal(e.element),!0));break;case LH.PreviousPage:this._tree.focusPreviousPage(void 0,e=>(this._tree.reveal(e.element),!0));break;case LH.NextSeparator:case LH.PreviousSeparator:return}}registerCheckboxStateListeners(){this._register(this._tree.onDidOpen(e=>{let t=e.element;if(!t||t.disabled)return;if(t.pickable===!1){this._tree.setFocus([t]),this._onDidAccept.fire();return}let n=e.browserEvent?.target;n&&n.classList.contains(Wj.CLASS_NAME)||this.updateCheckboxState(t,t.checked===!0)})),this._register(this._checkboxStateHandler.onDidChangeCheckboxState(e=>{this.updateCheckboxState(e.item,e.checked===!0)}))}updateCheckboxState(e,t){if((e.checked??!1)===t)return;e.checked=t,this._tree.rerender(e);let n=new Set,r=[...this._tree.getNode(e).children];for(;r.length;){let t=r.shift();t?.element&&!n.has(t.element)&&(n.add(t.element),(t.element.checked??!1)!==e.checked&&(t.element.checked=e.checked,this._tree.rerender(t.element)),r.push(...t.children))}let i=this._tree.getParentElement(e);for(;i;){let e=B8([...this._tree.getNode(i).children]);(i.checked??!1)!==e&&(i.checked=e,this._tree.rerender(i)),i=this._tree.getParentElement(i)}this._onDidChangeCheckboxState.fire({item:e,checked:e.checked??!1}),this._onDidCheckedLeafItemsChange.fire(this.getCheckedLeafItems())}registerOnDidChangeFocus(){this._register(this._tree.onDidChangeFocus(e=>{let t=this._tree.getFocus().findLast(e=>e!==null);this._tree.setSelection(t?[t]:[],e.browserEvent)}))}getCheckedLeafItems(){let e=new Set,t=[...this._tree.getNode().children],n=[];for(;t.length;){let r=t.shift();!r?.element||e.has(r.element)||r.element.checked&&(e.add(r.element),t.push(...r.children),r.element.children||n.push(r.element))}return n}getActiveItems(){return this._tree.getFocus().filter(e=>e!==null)}toggleCheckbox(){for(let e of this.getActiveItems())e.pickable!==!1&&!e.disabled&&this.updateCheckboxState(e,e.checked!==!0)}checkAll(e){let t=new Set,n=[...this._tree.getNode().children],r=!1;for(;n.length;){let i=n.shift();!i?.element||t.has(i.element)||i.element.checked!==e&&(r=!0,i.element.checked=e,n.push(...i.children),t.add(i.element),this._tree.rerender(i.element),this._onDidChangeCheckboxState.fire({item:i.element,checked:i.element.checked}))}r&&this._onDidCheckedLeafItemsChange.fire(this.getCheckedLeafItems())}};V8=t([n(3,Cy)],V8);var H8=class e extends oU{static#e=this.DEFAULT_ARIA_LABEL=D(2045,`Type to narrow down results.`);constructor(e){super(e),this.type=FH.QuickTree,this._value=Oh(`value`,``),this._ariaLabel=Oh(`ariaLabel`,void 0),this._placeholder=Oh(`placeholder`,void 0),this._matchOnDescription=Oh(`matchOnDescription`,!1),this._matchOnLabel=Oh(`matchOnLabel`,!0),this._sortByLabel=Oh(`sortByLabel`,!0),this._activeItems=Oh(`activeItems`,[]),this._itemTree=Oh(`itemTree`,[]),this.onDidChangeValue=T.fromObservable(this._value,this._store),this.onDidChangeActive=T.fromObservable(this._activeItems,this._store),this._onDidChangeCheckedLeafItems=this._register(new E),this.onDidChangeCheckedLeafItems=this._onDidChangeCheckedLeafItems.event,this._onDidChangeCheckboxState=this._register(new E),this.onDidChangeCheckboxState=this._onDidChangeCheckboxState.event,this._onDidAcceptEmitter=this._register(new E),this.onDidAccept=T.any(e.onDidAccept,this._onDidAcceptEmitter.event),this._registerAutoruns(),this._register(e.tree.onDidChangeCheckedLeafItems(e=>this._onDidChangeCheckedLeafItems.fire(e))),this._register(e.tree.onDidChangeCheckboxState(e=>this._onDidChangeCheckboxState.fire(e.item))),this._register(e.tree.tree.onDidChangeFocus(t=>{this._activeItems.set(e.tree.getActiveItems(),void 0)}))}get value(){return this._value.get()}set value(e){this._value.set(e,void 0)}get ariaLabel(){return this._ariaLabel.get()}set ariaLabel(e){this._ariaLabel.set(e,void 0)}get placeholder(){return this._placeholder.get()}set placeholder(e){this._placeholder.set(e,void 0)}get matchOnDescription(){return this._matchOnDescription.get()}set matchOnDescription(e){this._matchOnDescription.set(e,void 0)}get matchOnLabel(){return this._matchOnLabel.get()}set matchOnLabel(e){this._matchOnLabel.set(e,void 0)}get sortByLabel(){return this._sortByLabel.get()}set sortByLabel(e){this._sortByLabel.set(e,void 0)}get activeItems(){return this._activeItems.get()}set activeItems(e){this._activeItems.set(e,void 0)}get itemTree(){return this._itemTree.get()}get onDidTriggerItemButton(){return this.ui.tree.onDidTriggerButton}get checkedLeafItems(){return this.ui.tree.getCheckedLeafItems()}setItemTree(e){this._itemTree.set(e,void 0)}getParent(e){return this.ui.tree.tree.getParentElement(e)??void 0}expand(e){this.ui.tree.tree.expand(e)}collapse(e){this.ui.tree.tree.collapse(e)}isCollapsed(e){return this.ui.tree.tree.isCollapsed(e)}focusOnInput(){this.ui.inputBox.setFocus()}show(){if(!this.visible){let e={title:!!this.title||!!this.step||!!this.titleButtons.length,description:!!this.description,checkAll:!0,checkBox:!0,inputBox:!0,progressBar:!0,visibleCount:!0,count:!0,ok:!0,list:!1,tree:!0,message:!!this.validationMessage,customButton:!1};this.ui.setVisibilities(e),this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this._value.set(e,void 0)})),this.visibleDisposables.add(this.ui.tree.onDidChangeCheckboxState(e=>{let t=B8([...this.ui.tree.tree.getNode().children]);this.ui.checkAll.checked!==t&&(this.ui.checkAll.checked=t)})),this.visibleDisposables.add(this.ui.checkAll.onChange(e=>{let t=this.ui.checkAll.checked;this.ui.tree.checkAll(t)})),this.visibleDisposables.add(this.ui.tree.onDidChangeCheckedLeafItems(e=>{this.ui.count.setCount(e.length)}))}super.show(),wi(()=>this.ui.count.setCount(this.ui.tree.getCheckedLeafItems().length));let e=B8([...this.ui.tree.tree.getNode().children]);this.ui.checkAll.checked!==e&&(this.ui.checkAll.checked=e)}update(){if(!this.visible)return;let e={title:!!this.title||!!this.step||!!this.titleButtons.length,description:!!this.description,checkAll:!0,checkBox:!0,inputBox:!0,progressBar:!0,visibleCount:!0,count:!0,ok:!0,tree:!0,message:!!this.validationMessage};this.ui.setVisibilities(e),super.update()}_registerListeners(){}_registerAutoruns(){this.registerVisibleAutorun(e=>{let t=this._value.read(e);this.ui.inputBox.value=t,this.ui.tree.filter(t)}),this.registerVisibleAutorun(t=>{let n=this._ariaLabel.read(t);n||(n=this.placeholder||e.DEFAULT_ARIA_LABEL,this.title&&(n+=` - ${this.title}`)),this.ui.list.ariaLabel!==n&&(this.ui.list.ariaLabel=n??null),this.ui.inputBox.ariaLabel!==n&&(this.ui.inputBox.ariaLabel=n??`input`)}),this.registerVisibleAutorun(e=>{let t=this._placeholder.read(e);this.ui.inputBox.placeholder!==t&&(this.ui.inputBox.placeholder=t??``)}),this.registerVisibleAutorun(e=>{let t=this._matchOnLabel.read(e),n=this._matchOnDescription.read(e);this.ui.tree.updateFilterOptions({matchOnLabel:t,matchOnDescription:n})}),this.registerVisibleAutorun(e=>{let t=this._sortByLabel.read(e);this.ui.tree.sortByLabel=t}),this.registerVisibleAutorun(e=>{let t=this._itemTree.read(e);this.ui.tree.setTreeData(t)})}registerVisibleAutorun(e){this._register(bh(t=>{this._visible.read(t)&&e(t)}))}focus(e){this.ui.tree.focus(e),this.ui.tree.tree.domFocus()}accept(e){this._onDidAcceptEmitter.fire()}},U8,W8=B,G8=`workbench.quickInput.viewState`,K8=class extends w{static#e=U8=this;static#t=this.MAX_WIDTH=600;get currentQuickInput(){return this.controller??void 0}get container(){return this._container}constructor(e,t,n,r,a,o,s){super(),this.options=e,this.layoutService=t,this.instantiationService=n,this.storageService=a,this.contextMenuService=o,this.keybindingService=s,this.enabled=!0,this.onDidAcceptEmitter=this._register(new E),this.onDidCustomEmitter=this._register(new E),this.onDidTriggerButtonEmitter=this._register(new E),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new E),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new E),this.onHide=this.onHideEmitter.event,this.backButton=aU,this.inQuickInputContext=ZH.bindTo(r),this.quickInputTypeContext=tU.bindTo(r),this.endOfQuickInputBoxContext=rU.bindTo(r),this.idPrefix=e.idPrefix,this._container=e.container,this.styles=e.styles,this._register(T.runAndSubscribe($h,({window:e,disposables:t})=>this.registerKeyModsListeners(e,t),{window:i,disposables:this._store})),this._register(eg(e=>{this.ui&&Yh(this.ui.container)===e&&(this.reparentUI(this.layoutService.mainContainer),this.layout(this.layoutService.mainContainerDimension,this.layoutService.mainContainerOffset.quickPickTop))})),this.viewState=this.loadViewState()}registerKeyModsListeners(e,t){let n=e=>{this.keyMods.ctrlCmd=e.ctrlKey||e.metaKey,this.keyMods.alt=e.altKey};for(let r of[R.KEY_DOWN,R.KEY_UP,R.MOUSE_DOWN])t.add(L(e,r,n,!0))}getUI(e){if(this.ui)return e&&Yh(this._container)!==Yh(this.layoutService.activeContainer)&&(this.reparentUI(this.layoutService.activeContainer),this.layout(this.layoutService.activeContainerDimension,this.layoutService.activeContainerOffset.quickPickTop)),this.ui;let t=z(this._container,W8(`.quick-input-widget.show-file-icons`));this._register(this.keybindingService.registerContainer(t)),t.tabIndex=-1,t.style.display=`none`;let n=xC(t),r=z(t,W8(`.quick-input-titlebar`)),i=this._register(new bH(r,this.contextMenuService,{hoverDelegate:this.options.hoverDelegate,actionViewItemProvider:qj(this.styles.toggle),icon:!0,label:!1}));i.getElement().classList.add(`quick-input-left-action-bar`);let a=z(r,W8(`.quick-input-title`)),o=this._register(new bH(r,this.contextMenuService,{hoverDelegate:this.options.hoverDelegate,actionViewItemProvider:qj(this.styles.toggle),icon:!0,label:!1}));o.getElement().classList.add(`quick-input-right-action-bar`);let s=z(t,W8(`.quick-input-header`)),c=this._register(new Gj(D(2032,`Toggle all checkboxes`),!1,{...hF,size:15}));z(s,c.domNode),this._register(c.onChange(()=>{let e=c.checked;ce.setAllVisibleChecked(e===!0)})),this._register(L(c.domNode,R.CLICK,e=>{(e.x||e.y)&&f.setFocus()}));let l=z(s,W8(`.quick-input-description`)),u=z(s,W8(`.quick-input-and-message`)),d=z(u,W8(`.quick-input-filter`)),f=this._register(new Fae(d,this.styles.inputBox,this.styles.toggle));f.setAttribute(`aria-describedby`,`${this.idPrefix}message`);let p=z(d,W8(`.quick-input-visible-count`));p.setAttribute(`aria-live`,`polite`),p.setAttribute(`aria-atomic`,`true`);let m=this._register(new v8(p,{countFormat:D(2033,`{0} Results`)},this.styles.countBadge)),h=z(d,W8(`.quick-input-count`));h.setAttribute(`aria-live`,`polite`);let g=this._register(new v8(h,{countFormat:D(2034,`{0} Selected`)},this.styles.countBadge)),_=this._register(new bH(s,this.contextMenuService,{hoverDelegate:this.options.hoverDelegate,actionViewItemProvider:qj(this.styles.toggle),icon:!0,label:!1}));_.getElement().classList.add(`quick-input-inline-action-bar`);let v=z(s,W8(`.quick-input-action`)),ee=this._register(new qR(v,this.styles.button));ee.label=D(2035,`OK`),this._register(ee.onDidClick(e=>{this.onDidAcceptEmitter.fire()}));let te=z(s,W8(`.quick-input-action`)),ne=this._register(new qR(te,{...this.styles.button,supportIcons:!0}));ne.label=D(2036,`Custom`),this._register(ne.onDidClick(e=>{this.onDidCustomEmitter.fire()}));let re=z(u,W8(`#${this.idPrefix}message.quick-input-message`)),ie=this._register(new mz(t,this.styles.progressBar));ie.getContainer().classList.add(`quick-input-progress`);let ae=z(t,W8(`.quick-input-html-widget`));ae.tabIndex=-1;let oe=z(t,W8(`.quick-input-description`)),se=this.idPrefix+`list`,ce=this._register(this.instantiationService.createInstance(k8,t,this.options.hoverDelegate,this.options.linkOpenerDelegate,se,this.styles));f.setAttribute(`aria-controls`,se),this._register(ce.onDidChangeFocus(()=>{if(f.hasFocus()){let e=ce.getActiveDescendant();e?f.setAttribute(`aria-activedescendant`,e):f.removeAttribute(`aria-activedescendant`)}})),this._register(ce.onChangedAllVisibleChecked(e=>{c.checked=e})),this._register(ce.onChangedVisibleCount(e=>{m.setCount(e)})),this._register(ce.onChangedCheckedCount(e=>{wi(()=>g.setCount(e))})),this._register(ce.onLeave(()=>{setTimeout(()=>{this.controller&&(f.setFocus(),this.controller instanceof sU&&this.controller.canSelectMany&&ce.clearFocus())},0)}));let le=this._register(this.instantiationService.createInstance(V8,t,this.options.hoverDelegate,this.styles));this._register(le.tree.onDidChangeFocus(()=>{if(f.hasFocus()){let e=le.getActiveDescendant();e?f.setAttribute(`aria-activedescendant`,e):f.removeAttribute(`aria-activedescendant`)}})),this._register(le.onLeave(()=>{setTimeout(()=>{this.controller&&(f.setFocus(),le.tree.setFocus([]))},0)})),this._register(le.onDidAccept(()=>{this.onDidAcceptEmitter.fire()})),this._register(le.tree.onDidChangeContentHeight(()=>this.updateLayout()));let y=I_(t);return this._register(y),this._register(L(t,R.FOCUS,e=>{let t=this.getUI();if(Jg(e.relatedTarget,t.inputContainer)){let e=t.inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==e&&this.endOfQuickInputBoxContext.set(e)}Jg(e.relatedTarget,t.container)||(this.inQuickInputContext.set(!0),this.previousFocusElement=x_(e.relatedTarget)?e.relatedTarget:void 0)},!0)),this._register(y.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(PH.Blur),this.inQuickInputContext.set(!1),this.endOfQuickInputBoxContext.set(!1),this.previousFocusElement=void 0})),this._register(f.onKeyDown(e=>{let t=this.getUI().inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==t&&this.endOfQuickInputBoxContext.set(t),ep(e.keyCode)||f.removeAttribute(`aria-activedescendant`)})),this._register(L(t,R.FOCUS,e=>{f.setFocus()})),this.dndController=this._register(this.instantiationService.createInstance(q8,this._container,t,[{node:r,includeChildren:!0,excludeNodes:[i.getElement(),o.getElement()]},{node:s,includeChildren:!1}],this.viewState)),this._register(bh(e=>{let t=this.dndController?.dndViewState.read(e);t&&(t.top!==void 0&&t.left!==void 0?this.viewState={...this.viewState,top:t.top,left:t.left}:this.viewState=void 0,this.updateLayout(),t.done&&this.saveViewState(this.viewState))})),this.ui={container:t,styleSheet:n,leftActionBar:i,titleBar:r,title:a,description1:oe,description2:l,widget:ae,rightActionBar:o,inlineActionBar:_,checkAll:c,inputContainer:u,filterContainer:d,inputBox:f,visibleCountContainer:p,visibleCount:m,countContainer:h,count:g,okContainer:v,ok:ee,message:re,customButtonContainer:te,customButton:ne,list:ce,tree:le,progressBar:ie,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:e=>this.show(e),hide:()=>this.hide(),setVisibilities:e=>this.setVisibilities(e),setEnabled:e=>this.setEnabled(e),setContextKey:e=>this.options.setContextKey(e),linkOpenerDelegate:e=>this.options.linkOpenerDelegate(e)},this.updateStyles(),this.ui}reparentUI(e){this.ui&&(this._container=e,z(this._container,this.ui.container),this.dndController?.reparentUI(this._container))}pick(e,t={},n=Fr.None){return new Promise((r,i)=>{let a=e=>{a=r,t.onKeyMods?.(o.keyMods),r(e)};if(n.isCancellationRequested){a(void 0);return}let o=this.createQuickPick({useSeparators:!0}),s,c=[o,o.onDidAccept(()=>{if(o.canSelectMany)a(o.selectedItems.slice()),o.hide();else{let e=o.activeItems[0];e&&(a(e),o.hide())}}),o.onDidChangeActive(e=>{let n=e[0];n&&t.onDidFocus&&t.onDidFocus(n)}),o.onDidChangeSelection(e=>{if(!o.canSelectMany){let t=e[0];t&&(a(t),o.hide())}}),o.onDidTriggerItemButton(e=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton({...e,removeItem:()=>{let t=o.items.indexOf(e.item);if(t!==-1){let e=o.items.slice(),n=e.splice(t,1),r=o.activeItems.filter(e=>e!==n[0]),i=o.keepScrollPosition;o.keepScrollPosition=!0,o.items=e,r&&(o.activeItems=r),o.keepScrollPosition=i}}})),o.onDidTriggerSeparatorButton(e=>t.onDidTriggerSeparatorButton?.(e)),o.onDidChangeValue(e=>{s&&!e&&(o.activeItems.length!==1||o.activeItems[0]!==s)&&(o.activeItems=[s])}),n.onCancellationRequested(()=>{o.hide()}),o.onDidHide(()=>{Nn(c),a(void 0)})];o.title=t.title,t.value&&(o.value=t.value),o.canSelectMany=!!t.canPickMany,o.placeholder=t.placeHolder,o.prompt=t.prompt,o.ignoreFocusOut=!!t.ignoreFocusLost,o.matchOnDescription=!!t.matchOnDescription,o.matchOnDetail=!!t.matchOnDetail,t.sortByLabel!==void 0&&(o.sortByLabel=t.sortByLabel),o.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,o.quickNavigate=t.quickNavigate,o.hideInput=!!t.hideInput,o.contextKey=t.contextKey,o.busy=!0,Promise.all([e,t.activeItem]).then(([e,t])=>{s=t,o.busy=!1,o.items=e,o.canSelectMany&&(o.selectedItems=e.filter(e=>e.type!==`separator`&&e.picked)),s&&(o.activeItems=[s])}),o.show(),Promise.resolve(e).then(void 0,e=>{i(e),o.hide()})})}setValidationOnInput(e,t){t&&ge(t)?(e.severity=Lx.Error,e.validationMessage=t):t&&!ge(t)?(e.severity=t.severity,e.validationMessage=t.content):(e.severity=Lx.Ignore,e.validationMessage=void 0)}input(e={},t=Fr.None){return new Promise(n=>{if(t.isCancellationRequested){n(void 0);return}let r=this.createInputBox(),i=e.validateInput||(()=>Promise.resolve(void 0)),a=T.debounce(r.onDidChangeValue,(e,t)=>t,100),o=e.value||``,s=Promise.resolve(i(o)),c=[r,a(e=>{e!==o&&(s=Promise.resolve(i(e)),o=e),s.then(t=>{e===o&&this.setValidationOnInput(r,t)})}),r.onDidAccept(()=>{let e=r.value;e!==o&&(s=Promise.resolve(i(e)),o=e),s.then(t=>{!t||!ge(t)&&t.severity!==Lx.Error?(n(e),r.hide()):e===o&&this.setValidationOnInput(r,t)})}),t.onCancellationRequested(()=>{r.hide()}),r.onDidHide(()=>{Nn(c),n(void 0)})];r.title=e.title,r.value=e.value||``,r.valueSelection=e.valueSelection,r.prompt=e.prompt,r.placeholder=e.placeHolder,r.password=!!e.password,r.ignoreFocusOut=!!e.ignoreFocusLost,r.show()})}createQuickPick(e={useSeparators:!1}){return new sU(this.getUI(!0))}createInputBox(){return new cU(this.getUI(!0))}setAlignment(e){this.dndController?.setAlignment(e)}createQuickWidget(){return new lU(this.getUI(!0))}createQuickTree(){return new H8(this.getUI(!0))}show(e){let t=this.getUI(!0);this.onShowEmitter.fire();let n=this.controller;this.controller=e,n?.didHide(),this.setEnabled(!0),t.leftActionBar.setActions([]),t.title.textContent=``,t.description1.textContent=``,t.description2.textContent=``,z_(t.widget),t.rightActionBar.setActions([]),t.inlineActionBar.setActions([]),t.checkAll.checked=!1,t.inputBox.placeholder=``,t.inputBox.password=!1,t.inputBox.showDecoration(Lx.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),t.countContainer.style.right=`4px`,z_(t.message),t.progressBar.stop(),t.progressBar.getContainer().setAttribute(`aria-hidden`,`true`),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.tree.updateFilterOptions({matchOnDescription:!1,matchOnLabel:!0}),t.tree.sortByLabel=!0,t.ignoreFocusOut=!1,t.inputBox.toggles=void 0,t.inputBox.actions=void 0;let r=this.options.backKeybindingLabel();aU.tooltip=r?D(2037,`Back ({0})`,r):D(2038,`Back`),t.container.style.display=``,this.updateLayout(),this.dndController?.layoutContainer(),t.inputBox.setFocus(),this.quickInputTypeContext.set(e.type)}isVisible(){return!!this.ui&&this.ui.container.style.display!==`none`}setVisibilities(e){let t=this.getUI();t.title.style.display=e.title?``:`none`,t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?``:`none`,t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?``:`none`,t.checkAll.domNode.style.display=e.checkAll?``:`none`,t.inputContainer.style.display=e.inputBox?``:`none`,t.filterContainer.style.display=e.inputBox?``:`none`,t.visibleCountContainer.style.display=e.visibleCount?``:`none`,t.countContainer.style.display=e.count?``:`none`,t.okContainer.style.display=e.ok?``:`none`,t.customButtonContainer.style.display=e.customButton?``:`none`,t.message.style.display=e.message?``:`none`,t.progressBar.getContainer().style.display=e.progressBar?``:`none`,t.list.displayed=!!e.list,t.tree.displayed=!!e.tree,t.container.classList.toggle(`show-checkboxes`,!!e.checkBox),t.container.classList.toggle(`hidden-input`,!e.inputBox&&!e.description),this.updateLayout()}setEnabled(e){if(e!==this.enabled){this.enabled=e;let t=this.getUI();for(let n=0;n<t.leftActionBar.getItemsLength();n++){let r=t.leftActionBar.getItemAction(n);r&&(r.enabled=e)}for(let n=0;n<t.rightActionBar.getItemsLength();n++){let r=t.rightActionBar.getItemAction(n);r&&(r.enabled=e)}e?t.checkAll.enable():t.checkAll.disable(),t.inputBox.enabled=e,t.ok.enabled=e,t.list.enabled=e}}hide(e){let t=this.controller;if(!t)return;t.willHide(e);let n=this.ui?.container,r=n&&!c_(n);if(this.controller=null,this.onHideEmitter.fire(),n&&(n.style.display=`none`),!r){let e=this.previousFocusElement;for(;e&&!e.offsetParent;)e=e.parentElement??void 0;e?.offsetParent?(e.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}t.didHide(e)}focus(){if(this.isVisible()){let e=this.getUI();e.inputBox.enabled?e.inputBox.setFocus():e.list.domFocus()}}toggle(){this.isVisible()&&(this.controller instanceof sU&&this.controller.canSelectMany?this.getUI().list.toggleCheckbox():this.controller instanceof H8&&this.getUI().tree.toggleCheckbox())}toggleHover(){this.isVisible()&&this.controller instanceof sU&&this.getUI().list.toggleHover()}navigate(e,t){this.isVisible()&&this.getUI().list.displayed&&(this.getUI().list.focus(e?LH.Next:LH.Previous),t&&this.controller instanceof sU&&(this.controller.quickNavigate=t))}async accept(e={alt:!1,ctrlCmd:!1}){this.keyMods.alt=e.alt,this.keyMods.ctrlCmd=e.ctrlCmd,this.onDidAcceptEmitter.fire()}async back(){this.onDidTriggerButtonEmitter.fire(this.backButton)}async cancel(e){this.hide(e)}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui&&this.isVisible()){let e=this.ui.container.style,t=Math.min(this.dimension.width*.62,U8.MAX_WIDTH);e.width=t+`px`,e.top=`${this.viewState?.top?Math.round(this.dimension.height*this.viewState.top):this.titleBarOffset}px`,e.left=`${Math.round(this.dimension.width*(this.viewState?.left??.5)-t/2)}px`,this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4),this.ui.tree.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){let{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:n,widgetBorder:r,widgetShadow:i}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e??``,this.ui.container.style.backgroundColor=t??``,this.ui.container.style.color=n??``,this.ui.container.style.border=r?`1px solid ${r}`:``,this.ui.container.style.boxShadow=i?`0 0 8px 2px ${i}`:``,this.ui.list.style(this.styles.list),this.ui.tree.tree.style(this.styles.list);let a=[];this.styles.pickerGroup.pickerGroupBorder&&a.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`),this.styles.pickerGroup.pickerGroupForeground&&a.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`),this.styles.pickerGroup.pickerGroupForeground&&a.push(`.quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }`),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(a.push(`.quick-input-list .monaco-keybinding > .monaco-keybinding-key {`),this.styles.keybindingLabel.keybindingLabelBackground&&a.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&a.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&a.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&a.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&a.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),a.push(`}`));let o=a.join(`
`);o!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=o)}}loadViewState(){try{let e=JSON.parse(this.storageService.get(G8,yx.APPLICATION,`{}`));if(e.top!==void 0||e.left!==void 0)return e}catch{}}saveViewState(e){this.layoutService.activeContainer===this.layoutService.mainContainer&&(e===void 0?this.storageService.remove(G8,yx.APPLICATION):this.storageService.store(G8,JSON.stringify(e),yx.APPLICATION,bx.MACHINE))}};K8=U8=t([n(1,Ey),n(2,Cy),n(3,uS),n(4,Ex),n(5,tF),n(6,nF)],K8);var q8=class extends w{constructor(e,t,n,r,i,a,o){super(),this._container=e,this._quickInputContainer=t,this._quickInputDragAreas=n,this._layoutService=i,this.configurationService=o,this.dndViewState=Oh(this,void 0),this._snapThreshold=20,this._snapLineHorizontalRatio=.25,this._quickInputAlignmentContext=$H.bindTo(a);let s=Qv(this.configurationService)===qv.CUSTOM;this._controlsOnLeft=s&&_i===ri.Mac,this._controlsOnRight=s&&(_i===ri.Windows||_i===ri.Linux),this._registerLayoutListener(),this.registerMouseListeners(),this.dndViewState.set({...r,done:!0},void 0)}reparentUI(e){this._container=e}layoutContainer(e=this._layoutService.activeContainerDimension){let t=this.dndViewState.get(),n=this._quickInputContainer.getBoundingClientRect();if(t?.top&&t?.left){let r=Math.round(t.left*100)/100,i=e.width,a=n.width,o=r*i-a/2;this._layout(t.top*e.height,o)}}setAlignment(e,t=!0){e===`top`?(this.dndViewState.set({top:this._getTopSnapValue()/this._container.clientHeight,left:(this._getCenterXSnapValue()+this._quickInputContainer.clientWidth/2)/this._container.clientWidth,done:t},void 0),this._quickInputAlignmentContext.set(`top`)):e===`center`?(this.dndViewState.set({top:this._getCenterYSnapValue()/this._container.clientHeight,left:(this._getCenterXSnapValue()+this._quickInputContainer.clientWidth/2)/this._container.clientWidth,done:t},void 0),this._quickInputAlignmentContext.set(`center`)):(this.dndViewState.set({top:e.top,left:e.left,done:t},void 0),this._quickInputAlignmentContext.set(void 0))}_registerLayoutListener(){this._register(T.filter(this._layoutService.onDidLayoutContainer,e=>e.container===this._container)(e=>this.layoutContainer(e.dimension)))}registerMouseListeners(){let e=this._quickInputContainer;this._register(_g(e,t=>{let n=new wp(Yh(e),t);if(n.detail!==2)return;let r=this._quickInputDragAreas.find(({node:e,includeChildren:t})=>t?Jg(n.target,e):n.target===e);!r||r.excludeNodes?.some(e=>Jg(n.target,e))||this.dndViewState.set({top:void 0,left:void 0,done:!0},void 0)})),this._register(hg(e,e=>{let t=Yh(this._layoutService.activeContainer),n=new wp(t,e),r=this._quickInputDragAreas.find(({node:e,includeChildren:t})=>t?Jg(n.target,e):n.target===e);if(!r||r.excludeNodes?.some(e=>Jg(n.target,e)))return;let i=this._quickInputContainer.getBoundingClientRect(),a=n.browserEvent.clientX-i.left,o=n.browserEvent.clientY-i.top,s=!1,c=gg(t,e=>{new wp(t,e).preventDefault(),s||=!0,this._layout(e.clientY-o,e.clientX-a)}),l=_g(t,e=>{if(s){let e=this.dndViewState.get();this.dndViewState.set({top:e?.top,left:e?.left,done:!0},void 0)}c.dispose(),l.dispose()})}))}_layout(e,t){let n=this._getTopSnapValue(),r=this._getCenterYSnapValue(),i=this._getCenterXSnapValue();e=Math.max(0,Math.min(e,this._container.clientHeight-this._quickInputContainer.clientHeight)),e<this._layoutService.activeContainerOffset.top&&(this._controlsOnLeft?t=Math.max(t,80/xf(d_())):this._controlsOnRight&&(t=Math.min(t,this._container.clientWidth-this._quickInputContainer.clientWidth-140/xf(d_()))));let a=Math.abs(e-n)<this._snapThreshold;e=a?n:e;let o=Math.abs(e-r)<this._snapThreshold;e=o?r:e;let s=e/this._container.clientHeight;t=Math.max(0,Math.min(t,this._container.clientWidth-this._quickInputContainer.clientWidth));let c=Math.abs(t-i)<this._snapThreshold;t=c?i:t;let l=this._container.clientWidth,u=this._quickInputContainer.clientWidth,d=(t+u/2)/l;if(this.dndViewState.set({top:s,left:d,done:!1},void 0),c){if(a){this._quickInputAlignmentContext.set(`top`);return}else if(o){this._quickInputAlignmentContext.set(`center`);return}}this._quickInputAlignmentContext.set(void 0)}_getTopSnapValue(){return this._layoutService.activeContainerOffset.quickPickTop}_getCenterYSnapValue(){return Math.round(this._container.clientHeight*this._snapLineHorizontalRatio)}_getCenterXSnapValue(){return Math.round(this._container.clientWidth/2)-Math.round(this._quickInputContainer.clientWidth/2)}};q8=t([n(4,Ey),n(5,uS),n(6,Dx)],q8);var J8=class extends Dr{get backButton(){return this.controller.backButton}get controller(){return this._controller||=this._register(this.createController()),this._controller}get hasController(){return!!this._controller}get currentQuickInput(){return this.controller.currentQuickInput}get quickAccess(){return this._quickAccess||=this._register(this.instantiationService.createInstance(_8)),this._quickAccess}constructor(e,t,n,r,i){super(n),this.instantiationService=e,this.contextKeyService=t,this.layoutService=r,this.configurationService=i,this._onShow=this._register(new E),this.onShow=this._onShow.event,this._onHide=this._register(new E),this.onHide=this._onHide.event,this.contexts=new Map}createController(e=this.layoutService,t){let n={idPrefix:`quickInput_`,container:e.activeContainer,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>void 0,setContextKey:e=>this.setContextKey(e),linkOpenerDelegate:e=>{this.instantiationService.invokeFunction(t=>{t.get(KR).open(e,{allowCommands:!0,fromUserGesture:!0})})},returnFocus:()=>e.focus(),styles:this.computeStyles(),hoverDelegate:this._register(this.instantiationService.createInstance(uU))},r=this._register(this.instantiationService.createInstance(K8,{...n,...t}));return r.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop),this._register(e.onDidLayoutActiveContainer(t=>{Yh(e.activeContainer)===Yh(r.container)&&r.layout(t,e.activeContainerOffset.quickPickTop)})),this._register(e.onDidChangeActiveContainer(()=>{r.isVisible()||r.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop)})),this._register(r.onShow(()=>{this.resetContextKeys(),this._onShow.fire()})),this._register(r.onHide(()=>{this.resetContextKeys(),this._onHide.fire()})),r}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new W(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t?.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t,n=Fr.None){return this.controller.pick(e,t,n)}input(e={},t=Fr.None){return this.controller.input(e,t)}createQuickPick(e={useSeparators:!1}){return this.controller.createQuickPick(e)}createInputBox(){return this.controller.createInputBox()}createQuickWidget(){return this.controller.createQuickWidget()}createQuickTree(){return this.controller.createQuickTree()}focus(){this.controller.focus()}toggle(){this.controller.toggle()}navigate(e,t){this.controller.navigate(e,t)}accept(e){return this.controller.accept(e)}back(){return this.controller.back()}cancel(e){return this.controller.cancel(e)}setAlignment(e){this.controller.setAlignment(e)}toggleHover(){this.hasController&&this.controller.toggleHover()}updateStyles(){this.hasController&&this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:N(lf),quickInputForeground:N(uf),quickInputTitleBackground:N(df),widgetBorder:N(nu),widgetShadow:N(tu)},inputBox:_F,toggle:mF,countBadge:bF,button:fF,progressBar:pF,keybindingLabel:dF,list:CF({listBackground:lf,listFocusBackground:_f,listFocusForeground:hf,listInactiveFocusForeground:hf,listInactiveSelectionIconForeground:gf,listInactiveFocusBackground:_f,listInactiveSelectionBackground:_f,listInactiveSelectionForeground:hf,listFocusOutline:Sl,listInactiveFocusOutline:Sl,treeStickyScrollBackground:lf}),pickerGroup:{pickerGroupBorder:N(pf),pickerGroupForeground:N(ff)}}}};J8=t([n(0,Cy),n(1,uS),n(2,Fx),n(3,Ey),n(4,Dx)],J8),s(Mae);var Y8=class extends J8{constructor(e,t,n,r,i,a){super(t,n,r,new e6(e.getContainerDomNode(),i),a),this.host=void 0;let o=Z8.get(e);if(o){let t=o.widget;this.host={_serviceBrand:void 0,get mainContainer(){return t.getDomNode()},getContainer(){return t.getDomNode()},whenContainerStylesLoaded(){},get containers(){return[t.getDomNode()]},get activeContainer(){return t.getDomNode()},get mainContainerDimension(){return e.getLayoutInfo()},get activeContainerDimension(){return e.getLayoutInfo()},get onDidLayoutMainContainer(){return e.onDidLayoutChange},get onDidLayoutActiveContainer(){return e.onDidLayoutChange},get onDidLayoutContainer(){return T.map(e.onDidLayoutChange,e=>({container:t.getDomNode(),dimension:e}))},get onDidChangeActiveContainer(){return T.None},get onDidAddContainer(){return T.None},get mainContainerOffset(){return{top:0,quickPickTop:0}},get activeContainerOffset(){return{top:0,quickPickTop:0}},focus:()=>e.focus()}}else this.host=void 0}createController(){return super.createController(this.host)}};Y8=t([n(1,Cy),n(2,uS),n(3,Fx),n(4,gY),n(5,Dx)],Y8);var X8=class{get activeService(){let e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw Error(`Quick input service needs a focused editor to work.`);let t=this.mapEditorToService.get(e);if(!t){let n=t=this.instantiationService.createInstance(Y8,e);this.mapEditorToService.set(e,t),Xe(e.onDidDispose)(()=>{n.dispose(),this.mapEditorToService.delete(e)})}return t}get currentQuickInput(){return this.activeService.currentQuickInput}get quickAccess(){return this.activeService.quickAccess}get backButton(){return this.activeService.backButton}get onShow(){return this.activeService.onShow}get onHide(){return this.activeService.onHide}constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}pick(e,t,n=Fr.None){return this.activeService.pick(e,t,n)}input(e,t){return this.activeService.input(e,t)}createQuickPick(e={useSeparators:!1}){return this.activeService.createQuickPick(e)}createInputBox(){return this.activeService.createInputBox()}createQuickWidget(){return this.activeService.createQuickWidget()}createQuickTree(){return this.activeService.createQuickTree()}focus(){return this.activeService.focus()}toggle(){return this.activeService.toggle()}navigate(e,t){return this.activeService.navigate(e,t)}accept(){return this.activeService.accept()}back(){return this.activeService.back()}cancel(){return this.activeService.cancel()}setAlignment(e){return this.activeService.setAlignment(e)}toggleHover(){return this.activeService.toggleHover()}};X8=t([n(0,Cy),n(1,gY)],X8);var Z8=class e{static#e=this.ID=`editor.controller.quickInput`;static get(t){return t.getContribution(e.ID)}constructor(e){this.editor=e,this.widget=new Yae(this.editor)}dispose(){this.widget.dispose()}},Yae=class e{static#e=this.ID=`editor.contrib.quickInputWidget`;constructor(e){this.codeEditor=e,this.domNode=v_(`div`),this.codeEditor.addOverlayWidget(this)}getId(){return e.ID}getDomNode(){return this.domNode}getPosition(){return{preference:{top:0,left:0}}}dispose(){this.codeEditor.removeOverlayWidget(this)}};MY(Z8.ID,Z8,yY.Lazy);var Xae={base:`vs`,inherit:!1,rules:[{token:``,foreground:`000000`,background:`fffffe`},{token:`invalid`,foreground:`cd3131`},{token:`emphasis`,fontStyle:`italic`},{token:`strong`,fontStyle:`bold`},{token:`variable`,foreground:`001188`},{token:`variable.predefined`,foreground:`4864AA`},{token:`constant`,foreground:`dd0000`},{token:`comment`,foreground:`008000`},{token:`number`,foreground:`098658`},{token:`number.hex`,foreground:`3030c0`},{token:`regexp`,foreground:`800000`},{token:`annotation`,foreground:`808080`},{token:`type`,foreground:`008080`},{token:`delimiter`,foreground:`000000`},{token:`delimiter.html`,foreground:`383838`},{token:`delimiter.xml`,foreground:`0000FF`},{token:`tag`,foreground:`800000`},{token:`tag.id.pug`,foreground:`4F76AC`},{token:`tag.class.pug`,foreground:`4F76AC`},{token:`meta.scss`,foreground:`800000`},{token:`metatag`,foreground:`e00000`},{token:`metatag.content.html`,foreground:`FF0000`},{token:`metatag.html`,foreground:`808080`},{token:`metatag.xml`,foreground:`808080`},{token:`metatag.php`,fontStyle:`bold`},{token:`key`,foreground:`863B00`},{token:`string.key.json`,foreground:`A31515`},{token:`string.value.json`,foreground:`0451A5`},{token:`attribute.name`,foreground:`FF0000`},{token:`attribute.value`,foreground:`0451A5`},{token:`attribute.value.number`,foreground:`098658`},{token:`attribute.value.unit`,foreground:`098658`},{token:`attribute.value.html`,foreground:`0000FF`},{token:`attribute.value.xml`,foreground:`0000FF`},{token:`string`,foreground:`A31515`},{token:`string.html`,foreground:`0000FF`},{token:`string.sql`,foreground:`FF0000`},{token:`string.yaml`,foreground:`0451A5`},{token:`keyword`,foreground:`0000FF`},{token:`keyword.json`,foreground:`0451A5`},{token:`keyword.flow`,foreground:`AF00DB`},{token:`keyword.flow.scss`,foreground:`0000FF`},{token:`operator.scss`,foreground:`666666`},{token:`operator.sql`,foreground:`778899`},{token:`operator.swift`,foreground:`666666`},{token:`predefined.sql`,foreground:`C700C7`}],colors:{[Pl]:`#FFFFFE`,[Fl]:`#000000`,[Gl]:`#E5EBF1`,[FZ]:`#D3D3D3`,[VZ]:`#939393`,[Kl]:`#ADD6FF4D`}},Zae={base:`vs-dark`,inherit:!1,rules:[{token:``,foreground:`D4D4D4`,background:`1E1E1E`},{token:`invalid`,foreground:`f44747`},{token:`emphasis`,fontStyle:`italic`},{token:`strong`,fontStyle:`bold`},{token:`variable`,foreground:`74B0DF`},{token:`variable.predefined`,foreground:`4864AA`},{token:`variable.parameter`,foreground:`9CDCFE`},{token:`constant`,foreground:`569CD6`},{token:`comment`,foreground:`608B4E`},{token:`number`,foreground:`B5CEA8`},{token:`number.hex`,foreground:`5BB498`},{token:`regexp`,foreground:`B46695`},{token:`annotation`,foreground:`cc6666`},{token:`type`,foreground:`3DC9B0`},{token:`delimiter`,foreground:`DCDCDC`},{token:`delimiter.html`,foreground:`808080`},{token:`delimiter.xml`,foreground:`808080`},{token:`tag`,foreground:`569CD6`},{token:`tag.id.pug`,foreground:`4F76AC`},{token:`tag.class.pug`,foreground:`4F76AC`},{token:`meta.scss`,foreground:`A79873`},{token:`meta.tag`,foreground:`CE9178`},{token:`metatag`,foreground:`DD6A6F`},{token:`metatag.content.html`,foreground:`9CDCFE`},{token:`metatag.html`,foreground:`569CD6`},{token:`metatag.xml`,foreground:`569CD6`},{token:`metatag.php`,fontStyle:`bold`},{token:`key`,foreground:`9CDCFE`},{token:`string.key.json`,foreground:`9CDCFE`},{token:`string.value.json`,foreground:`CE9178`},{token:`attribute.name`,foreground:`9CDCFE`},{token:`attribute.value`,foreground:`CE9178`},{token:`attribute.value.number.css`,foreground:`B5CEA8`},{token:`attribute.value.unit.css`,foreground:`B5CEA8`},{token:`attribute.value.hex.css`,foreground:`D4D4D4`},{token:`string`,foreground:`CE9178`},{token:`string.sql`,foreground:`FF0000`},{token:`keyword`,foreground:`569CD6`},{token:`keyword.flow`,foreground:`C586C0`},{token:`keyword.json`,foreground:`CE9178`},{token:`keyword.flow.scss`,foreground:`569CD6`},{token:`operator.scss`,foreground:`909090`},{token:`operator.sql`,foreground:`778899`},{token:`operator.swift`,foreground:`909090`},{token:`predefined.sql`,foreground:`FF00FF`}],colors:{[Pl]:`#1E1E1E`,[Fl]:`#D4D4D4`,[Gl]:`#3A3D41`,[FZ]:`#404040`,[VZ]:`#707070`,[Kl]:`#ADD6FF26`}},Qae={base:`hc-black`,inherit:!1,rules:[{token:``,foreground:`FFFFFF`,background:`000000`},{token:`invalid`,foreground:`f44747`},{token:`emphasis`,fontStyle:`italic`},{token:`strong`,fontStyle:`bold`},{token:`variable`,foreground:`1AEBFF`},{token:`variable.parameter`,foreground:`9CDCFE`},{token:`constant`,foreground:`569CD6`},{token:`comment`,foreground:`608B4E`},{token:`number`,foreground:`FFFFFF`},{token:`regexp`,foreground:`C0C0C0`},{token:`annotation`,foreground:`569CD6`},{token:`type`,foreground:`3DC9B0`},{token:`delimiter`,foreground:`FFFF00`},{token:`delimiter.html`,foreground:`FFFF00`},{token:`tag`,foreground:`569CD6`},{token:`tag.id.pug`,foreground:`4F76AC`},{token:`tag.class.pug`,foreground:`4F76AC`},{token:`meta`,foreground:`D4D4D4`},{token:`meta.tag`,foreground:`CE9178`},{token:`metatag`,foreground:`569CD6`},{token:`metatag.content.html`,foreground:`1AEBFF`},{token:`metatag.html`,foreground:`569CD6`},{token:`metatag.xml`,foreground:`569CD6`},{token:`metatag.php`,fontStyle:`bold`},{token:`key`,foreground:`9CDCFE`},{token:`string.key`,foreground:`9CDCFE`},{token:`string.value`,foreground:`CE9178`},{token:`attribute.name`,foreground:`569CD6`},{token:`attribute.value`,foreground:`3FF23F`},{token:`string`,foreground:`CE9178`},{token:`string.sql`,foreground:`FF0000`},{token:`keyword`,foreground:`569CD6`},{token:`keyword.flow`,foreground:`C586C0`},{token:`operator.sql`,foreground:`778899`},{token:`operator.swift`,foreground:`909090`},{token:`predefined.sql`,foreground:`FF00FF`}],colors:{[Pl]:`#000000`,[Fl]:`#FFFFFF`,[FZ]:`#FFFFFF`,[VZ]:`#FFFFFF`}},$ae={base:`hc-light`,inherit:!1,rules:[{token:``,foreground:`292929`,background:`FFFFFF`},{token:`invalid`,foreground:`B5200D`},{token:`emphasis`,fontStyle:`italic`},{token:`strong`,fontStyle:`bold`},{token:`variable`,foreground:`264F70`},{token:`variable.predefined`,foreground:`4864AA`},{token:`constant`,foreground:`dd0000`},{token:`comment`,foreground:`008000`},{token:`number`,foreground:`098658`},{token:`number.hex`,foreground:`3030c0`},{token:`regexp`,foreground:`800000`},{token:`annotation`,foreground:`808080`},{token:`type`,foreground:`008080`},{token:`delimiter`,foreground:`000000`},{token:`delimiter.html`,foreground:`383838`},{token:`tag`,foreground:`800000`},{token:`tag.id.pug`,foreground:`4F76AC`},{token:`tag.class.pug`,foreground:`4F76AC`},{token:`meta.scss`,foreground:`800000`},{token:`metatag`,foreground:`e00000`},{token:`metatag.content.html`,foreground:`B5200D`},{token:`metatag.html`,foreground:`808080`},{token:`metatag.xml`,foreground:`808080`},{token:`metatag.php`,fontStyle:`bold`},{token:`key`,foreground:`863B00`},{token:`string.key.json`,foreground:`A31515`},{token:`string.value.json`,foreground:`0451A5`},{token:`attribute.name`,foreground:`264F78`},{token:`attribute.value`,foreground:`0451A5`},{token:`string`,foreground:`A31515`},{token:`string.sql`,foreground:`B5200D`},{token:`keyword`,foreground:`0000FF`},{token:`keyword.flow`,foreground:`AF00DB`},{token:`operator.sql`,foreground:`778899`},{token:`operator.swift`,foreground:`666666`},{token:`predefined.sql`,foreground:`C700C7`}],colors:{[Pl]:`#FFFFFF`,[Fl]:`#292929`,[FZ]:`#292929`,[VZ]:`#292929`}};function Q8(e){let t=new C,n=t.add(new E),r=iz();return t.add(r.onDidChange(()=>n.fire())),e&&t.add(e.onDidProductIconThemeChange(()=>n.fire())),{dispose:()=>t.dispose(),onDidChange:n.event,getCSS(){let t=e?e.getProductIconTheme():new $8,n={},i=new FC,a=new FC;for(let e of r.getIcons()){let r=t.getIcon(e);if(!r)continue;let o=r.font,s=PC`--vscode-icon-${NC(e.id)}-font-family`,c=PC`--vscode-icon-${NC(e.id)}-content`;o?(n[o.id]=o.definition,a.push(PC`${s}: ${jC(o.id)};`,PC`${c}: ${jC(r.fontCharacter)};`),i.push(PC`.codicon-${NC(e.id)}:before { content: ${jC(r.fontCharacter)}; font-family: ${jC(o.id)}; }`)):(a.push(PC`${c}: ${jC(r.fontCharacter)}; ${s}: 'codicon';`),i.push(PC`.codicon-${NC(e.id)}:before { content: ${jC(r.fontCharacter)}; }`))}for(let e in n){let t=n[e],r=t.weight?PC`font-weight: ${AC(t.weight)};`:PC``,a=t.style?PC`font-style: ${AC(t.style)};`:PC``,o=new FC;for(let e of t.src)o.push(PC`${MC(e.location)} format(${jC(e.format)})`);i.push(PC`@font-face { src: ${o.join(`, `)}; font-family: ${jC(e)};${r}${a} font-display: block; }`)}return i.push(PC`:root { ${a.join(` `)} }`),i.join(`
`)}}}var $8=class{getIcon(e){let t=iz(),n=e.defaults;for(;lC.isThemeIcon(n);){let e=t.getIcon(n.id);if(!e)return;n=e.defaults}return n}},e5=`vs-dark`,t5=`hc-black`,n5=`hc-light`,r5=hr.as($c.ColorContribution),eoe=hr.as(wr.ThemingContribution),i5=class{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;let n=t.base;e.length>0?(a5(e)?this.id=e:this.id=n+` `+e,this.themeName=e):(this.id=n,this.themeName=n),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get label(){return this.themeName}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){let e=new Map;for(let t in this.themeData.colors)e.set(t,M.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){let t=o5(this.themeData.base);for(let n in t.colors)e.has(n)||e.set(n,M.fromHex(t.colors[n]))}this.colors=e}return this.colors}getColor(e,t){let n=this.getColors().get(e);if(n)return n;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=r5.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return this.getColors().has(e)}get type(){switch(this.base){case`vs`:return gr.LIGHT;case t5:return gr.HIGH_CONTRAST_DARK;case n5:return gr.HIGH_CONTRAST_LIGHT;default:return gr.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){let n=o5(this.themeData.base);e=n.rules,n.encodedTokensColors&&(t=n.encodedTokensColors)}let n=this.themeData.colors[`editor.foreground`],r=this.themeData.colors[`editor.background`];if(n||r){let t={token:``};n&&(t.foreground=n),r&&(t.background=r),e.push(t)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=w2.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,n){let r=this.tokenTheme._match([e].concat(t).join(`.`)).metadata,i=LK.getForeground(r),a=LK.getFontStyle(r);return{foreground:i,italic:!!(a&NK.Italic),bold:!!(a&NK.Bold),underline:!!(a&NK.Underline),strikethrough:!!(a&NK.Strikethrough)}}get tokenColorMap(){return[]}get tokenFontMap(){return[]}};function a5(e){return e===`vs`||e===`vs-dark`||e===`hc-black`||e===`hc-light`}function o5(e){switch(e){case`vs`:return Xae;case e5:return Zae;case t5:return Qae;case n5:return $ae}}function s5(e){return new i5(e,o5(e))}var toe=class extends w{constructor(){super(),this._onColorThemeChange=this._register(new E),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onFileIconThemeChange=this._register(new E),this.onDidFileIconThemeChange=this._onFileIconThemeChange.event,this._onProductIconThemeChange=this._register(new E),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new $8,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(`vs`,s5(`vs`)),this._knownThemes.set(e5,s5(e5)),this._knownThemes.set(t5,s5(t5)),this._knownThemes.set(n5,s5(n5));let e=this._register(Q8(this));this._codiconCSS=e.getCSS(),this._themeCSS=``,this._allCSS=`${this._codiconCSS}\n${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(`vs`),this._onOSSchemeChanged(),this._register(e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()})),yf(i,`(forced-colors: active)`,()=>{this._onOSSchemeChanged()})}registerEditorContainer(e){return n_(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=xC(void 0,e=>{e.className=`monaco-colors`,e.textContent=this._allCSS}),this._styleElements.push(this._globalStyleElement)),w.None}_registerShadowDomContainer(e){let t=xC(e,e=>{e.className=`monaco-colors`,e.textContent=this._allCSS});return this._styleElements.push(t),{dispose:()=>{for(let e=0;e<this._styleElements.length;e++)if(this._styleElements[e]===t){this._styleElements.splice(e,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw Error(`Illegal theme name!`);if(!a5(t.base)&&!a5(e))throw Error(`Illegal theme base!`);this._knownThemes.set(e,new i5(e,t)),a5(e)&&this._knownThemes.forEach(t=>{t.base===e&&t.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;t=this._knownThemes.has(e)?this._knownThemes.get(e):this._knownThemes.get(`vs`),this._updateActualTheme(t)}_updateActualTheme(e){!e||this._theme===e||(this._theme=e,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){let e=i.matchMedia(`(forced-colors: active)`).matches;if(e!==vr(this._theme.type)){let t;t=yr(this._theme.type)?e?t5:e5:e?n5:`vs`,this._updateActualTheme(this._knownThemes.get(t))}}}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}_updateThemeOrColorMap(){let e=[],t={},n={addRule:n=>{t[n]||(e.push(n),t[n]=!0)}};eoe.getThemingParticipants().forEach(e=>e(this._theme,n,this._environment));let r=[];for(let e of r5.getColors()){let t=this._theme.getColor(e.id,!0);t&&r.push(`${Yc(e.id)}: ${t.toString()};`)}n.addRule(`.monaco-editor, .monaco-diff-editor, .monaco-component { ${r.join(`
`)} }`);let i=this._colorMapOverride||this._theme.tokenTheme.getColorMap();n.addRule(j2(i)),n.addRule(`.monaco-editor, .monaco-diff-editor, .monaco-component { forced-color-adjust: none; }`),this._themeCSS=e.join(`
`),this._updateCSS(),Mq.setColorMap(i),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}\n${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}},c5=V(`themeService`),l5=class extends w{constructor(e,t,n){super(),this._contextKeyService=e,this._layoutService=t,this._configurationService=n,this._accessibilitySupport=Az.Unknown,this._onDidChangeScreenReaderOptimized=new E,this._onDidChangeReducedMotion=new E,this._onDidChangeLinkUnderline=new E,this._accessibilityModeEnabledContext=jz.bindTo(this._contextKeyService);let r=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(`editor.accessibilitySupport`)&&(r(),this._onDidChangeScreenReaderOptimized.fire()),e.affectsConfiguration(`workbench.reduceMotion`)&&(this._configMotionReduced=this._configurationService.getValue(`workbench.reduceMotion`),this._onDidChangeReducedMotion.fire())})),r(),this._register(this.onDidChangeScreenReaderOptimized(()=>r()));let a=i.matchMedia(`(prefers-reduced-motion: reduce)`);this._systemMotionReduced=a.matches,this._configMotionReduced=this._configurationService.getValue(`workbench.reduceMotion`),this._linkUnderlinesEnabled=this._configurationService.getValue(`accessibility.underlineLinks`),this.initReducedMotionListeners(a),this.initLinkUnderlineListeners()}initReducedMotionListeners(e){this._register(L(e,`change`,()=>{this._systemMotionReduced=e.matches,this._configMotionReduced===`auto`&&this._onDidChangeReducedMotion.fire()}));let t=()=>{let e=this.isMotionReduced();this._layoutService.mainContainer.classList.toggle(`monaco-reduce-motion`,e),this._layoutService.mainContainer.classList.toggle(`monaco-enable-motion`,!e)};t(),this._register(this.onDidChangeReducedMotion(()=>t()))}initLinkUnderlineListeners(){this._register(this._configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(`accessibility.underlineLinks`)&&(this._linkUnderlinesEnabled=this._configurationService.getValue(`accessibility.underlineLinks`),this._onDidChangeLinkUnderline.fire())}));let e=()=>{let e=this._linkUnderlinesEnabled;this._layoutService.mainContainer.classList.toggle(`underline-links`,e)};e(),this._register(this.onDidChangeLinkUnderlines(()=>e()))}onDidChangeLinkUnderlines(e){return this._onDidChangeLinkUnderline.event(e)}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){let e=this._configurationService.getValue(`editor.accessibilitySupport`);return e===`on`||e===`auto`&&this._accessibilitySupport===Az.Enabled}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){let e=this._configMotionReduced;return e===`on`||e===`auto`&&this._systemMotionReduced}alwaysUnderlineAccessKeys(){return Promise.resolve(!1)}getAccessibilitySupport(){return this._accessibilitySupport}setAccessibilitySupport(e){this._accessibilitySupport!==e&&(this._accessibilitySupport=e,this._onDidChangeScreenReaderOptimized.fire())}alert(e){GC(e)}status(e){KC(e)}};l5=t([n(0,uS),n(1,Ey),n(2,Dx)],l5);var u5,d5=`application/vnd.code.resources`,f5=class extends w{static#e=u5=this;constructor(e,t){super(),this.layoutService=e,this.logService=t,this.mapTextToType=new Map,this.findText=``,this.resources=[],this.resourcesStateHash=void 0,(kf||Af)&&this.installWebKitWriteTextWorkaround(),this._register(T.runAndSubscribe($h,({window:e,disposables:t})=>{t.add(L(e.document,`copy`,()=>this.clearResourcesState()))},{window:i,disposables:this._store}))}triggerPaste(){this.logService.trace(`BrowserClipboardService#triggerPaste`)}async readImage(){try{let e=(await i.navigator.clipboard.read())[0],t=[`image/png`,`image/jpeg`,`image/gif`,`image/tiff`,`image/bmp`].find(t=>e.types.includes(t));if(t){let n=await(await e.getType(t)).arrayBuffer();return new Uint8Array(n)}else console.error(`No supported image type found in the clipboard`)}catch(e){console.error(`Error reading image from clipboard:`,e)}return new Uint8Array}installWebKitWriteTextWorkaround(){let e=()=>{let e=new kc;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=e,d_().navigator.clipboard.write([new ClipboardItem({"text/plain":e.p})]).catch(async t=>{(!(t instanceof Error)||t.name!==`NotAllowedError`||!e.isRejected)&&this.logService.error(t)})};this._register(T.runAndSubscribe(this.layoutService.onDidAddContainer,({container:t,disposables:n})=>{n.add(L(t,`click`,e)),n.add(L(t,`keydown`,e))},{container:this.layoutService.mainContainer,disposables:this._store}))}async writeText(e,t){if(this.logService.trace(`BrowserClipboardService#writeText called with type:`,t,` text.length:`,e.length),this.clearResourcesState(),t){this.mapTextToType.set(t,e),this.logService.trace(`BrowserClipboardService#writeText`);return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return this.logService.trace(`before navigator.clipboard.writeText`),await d_().navigator.clipboard.writeText(e)}catch(e){console.error(e)}this.fallbackWriteText(e)}fallbackWriteText(e){this.logService.trace(`BrowserClipboardService#fallbackWriteText`);let t=u_(),n=i_(),r=t.body.appendChild(B(`textarea`,{"aria-hidden":!0}));r.style.height=`1px`,r.style.width=`1px`,r.style.position=`absolute`,r.value=e,r.focus(),r.select(),t.execCommand(`copy`),x_(n)&&n.focus(),r.remove()}async readText(e){if(this.logService.trace(`BrowserClipboardService#readText called with type:`,e),e){let t=this.mapTextToType.get(e)||``;return this.logService.trace(`BrowserClipboardService#readText text.length:`,t.length),t}try{let e=await d_().navigator.clipboard.readText();return this.logService.trace(`BrowserClipboardService#readText text.length:`,e.length),e}catch(e){console.error(e)}return``}async readFindText(){return this.findText}async writeFindText(e){this.findText=e}static#t=this.MAX_RESOURCE_STATE_SOURCE_LENGTH=1e3;async writeResources(e){try{await d_().navigator.clipboard.write([new ClipboardItem({[`web ${d5}`]:new Blob([JSON.stringify(e.map(e=>e.toJSON()))],{type:d5})})])}catch{}e.length===0?this.clearResourcesState():(this.resources=e,this.resourcesStateHash=await this.computeResourcesStateHash())}async readResources(){try{let e=await d_().navigator.clipboard.read();for(let t of e)if(t.types.includes(`web ${d5}`)){let e=await t.getType(`web ${d5}`);return JSON.parse(await e.text()).map(e=>k.from(e))}}catch{}let e=await this.computeResourcesStateHash();return this.resourcesStateHash!==e&&this.clearResourcesState(),this.resources}async computeResourcesStateHash(){if(this.resources.length!==0)return hm((await this.readText()).substring(0,u5.MAX_RESOURCE_STATE_SOURCE_LENGTH))}async hasResources(){try{let e=await d_().navigator.clipboard.read();for(let t of e)if(t.types.includes(`web ${d5}`))return!0}catch{}return this.resources.length>0}clearInternalState(){this.clearResourcesState()}clearResourcesState(){this.resources=[],this.resourcesStateHash=void 0}};f5=u5=t([n(0,Ey),n(1,Lb)],f5);var p5=`data-keybinding-context`,m5=class{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}get value(){return{...this._value}}setValue(e,t){return rk(this._value[e],t)?!1:(this._value[e]=t,!0)}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){let t=this._value[e];return t===void 0&&this._parent?this._parent.getValue(e):t}updateParent(e){this._parent=e}collectAllValues(){let e=this._parent?this._parent.collectAllValues():Object.create(null);return e={...e,...this._value},delete e._contextId,e}},h5=class e extends m5{static#e=this.INSTANCE=new e;constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}collectAllValues(){return Object.create(null)}},noe=class e extends m5{static#e=this._keyPrefix=`config.`;constructor(e,t,n){super(e,null),this._configurationService=t,this._values=Ky.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(e=>{if(e.source===oP.DEFAULT){let e=Array.from(this._values,([e])=>e);this._values.clear(),n.fire(new _5(e))}else{let t=[];for(let n of e.affectedKeys){let e=`config.${n}`,r=this._values.findSuperstr(e);r!==void 0&&(t.push(...Cn.map(r,([e])=>e)),this._values.deleteSuperstr(e)),this._values.has(e)&&(t.push(e),this._values.delete(e))}n.fire(new _5(t))}})}dispose(){this._listener.dispose()}getValue(t){if(t.indexOf(e._keyPrefix)!==0)return super.getValue(t);if(this._values.has(t))return this._values.get(t);let n=t.substr(e._keyPrefix.length),r=this._configurationService.getValue(n),i;switch(typeof r){case`number`:case`boolean`:case`string`:i=r;break;default:i=Array.isArray(r)?JSON.stringify(r):r}return this._values.set(t,i),i}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}collectAllValues(){let e=Object.create(null);return this._values.forEach((t,n)=>e[n]=t),{...e,...super.collectAllValues()}}},roe=class{constructor(e,t,n){this._service=e,this._key=t,this._defaultValue=n,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){this._defaultValue===void 0?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}},g5=class{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}allKeysContainedIn(e){return this.affectsSome(e)}},_5=class{constructor(e){this.keys=e}affectsSome(e){for(let t of this.keys)if(e.has(t))return!0;return!1}allKeysContainedIn(e){return this.keys.every(t=>e.has(t))}},ioe=class{constructor(e){this.events=e}affectsSome(e){for(let t of this.events)if(t.affectsSome(e))return!0;return!1}allKeysContainedIn(e){return this.events.every(t=>t.allKeysContainedIn(e))}};function aoe(e,t){return e.allKeysContainedIn(new Set(Object.keys(t)))}var v5=class extends w{get onDidChangeContext(){return this._onDidChangeContext.event}constructor(e){super(),this._onDidChangeContext=this._register(new ir({merge:e=>new ioe(e)})),this._isDisposed=!1,this._myContextId=e}get contextId(){return this._myContextId}createKey(e,t){if(this._isDisposed)throw Error(`AbstractContextKeyService has been disposed`);return new roe(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw Error(`AbstractContextKeyService has been disposed`);return new ooe(this,e)}createOverlay(e=Cn.empty()){if(this._isDisposed)throw Error(`AbstractContextKeyService has been disposed`);return new soe(this,e)}contextMatchesRules(e){if(this._isDisposed)throw Error(`AbstractContextKeyService has been disposed`);let t=this.getContextValuesContainer(this._myContextId);return e?e.evaluate(t):!0}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;let n=this.getContextValuesContainer(this._myContextId);n&&n.setValue(e,t)&&this._onDidChangeContext.fire(new g5(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new g5(e))}getContext(e){return this._isDisposed?h5.INSTANCE:this.getContextValuesContainer(coe(e))}dispose(){super.dispose(),this._isDisposed=!0}},y5=class extends v5{constructor(e){super(0),this._contexts=new Map,this._lastContextId=0,this.inputFocusedContext=$P.bindTo(this);let t=this._register(new noe(this._myContextId,e,this._onDidChangeContext));this._contexts.set(this._myContextId,t),this._register(T.runAndSubscribe($h,({window:e,disposables:t})=>{let n=t.add(new Ln);t.add(lg(e)).onDidChangeActiveElement(t=>{n.value=new C,this.updateInputContextKeys(e.document,t,n.value)})},{window:i,disposables:this._store}))}updateInputContextKeys(e,t,n){function r(t=i_(e)){return!!t&&fv(t)}let i=r(t);if(this.inputFocusedContext.set(i),i){let i=n.add(I_(t));T.once(i.onDidBlur)(()=>{u_()===e&&this.inputFocusedContext.set(r()),i.dispose()},void 0,n)}}getContextValuesContainer(e){return this._isDisposed?h5.INSTANCE:this._contexts.get(e)||h5.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw Error(`ContextKeyService has been disposed`);let t=++this._lastContextId;return this._contexts.set(t,new m5(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}updateParent(e){throw Error(`Cannot update parent of root ContextKeyService`)}};y5=t([n(0,Dx)],y5);var ooe=class extends v5{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=this._register(new Ln),this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(p5)){let e=``;this._domNode.classList&&(e=Array.from(this._domNode.classList.values()).join(`, `)),console.error(`Element already has context attribute${e?`: `+e:``}`)}this._domNode.setAttribute(p5,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(e=>{let t=this._parent.getContextValuesContainer(this._myContextId).value;aoe(e,t)||this._onDidChangeContext.fire(e)})}dispose(){this._isDisposed||(this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(p5),super.dispose())}getContextValuesContainer(e){return this._isDisposed?h5.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw Error(`ScopedContextKeyService has been disposed`);return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}updateParent(e){if(this._parent===e)return;let t=this._parent.getContextValuesContainer(this._myContextId),n=t.collectAllValues();this._parent=e,this._updateParentChangeListener();let r=this._parent.getContextValuesContainer(this._parent.contextId);t.updateParent(r);let i=t.collectAllValues(),a={...ak(n,i),...ak(i,n)},o=Object.keys(a);this._onDidChangeContext.fire(new _5(o))}},b5=class{constructor(e,t){this.parent=e,this.overlay=t}getValue(e){return this.overlay.has(e)?this.overlay.get(e):this.parent.getValue(e)}},soe=class e{get contextId(){return this.parent.contextId}get onDidChangeContext(){return this.parent.onDidChangeContext}constructor(e,t){this.parent=e,this.overlay=new Map(t)}bufferChangeEvents(e){this.parent.bufferChangeEvents(e)}createKey(){throw Error(`Not supported.`)}getContext(e){return new b5(this.parent.getContext(e),this.overlay)}getContextValuesContainer(e){return new b5(this.parent.getContextValuesContainer(e),this.overlay)}contextMatchesRules(e){let t=this.getContextValuesContainer(this.contextId);return e?e.evaluate(t):!0}getContextKeyValue(e){return this.overlay.has(e)?this.overlay.get(e):this.parent.getContextKeyValue(e)}createScoped(){throw Error(`Not supported.`)}createOverlay(t=Cn.empty()){return new e(this,t)}updateParent(){throw Error(`Not supported.`)}};function coe(e){for(;e;){if(e.hasAttribute(p5)){let t=e.getAttribute(p5);return t?parseInt(t,10):NaN}e=e.parentElement}return 0}function loe(e,t,n){e.get(uS).createKey(String(t),uoe(n))}function uoe(e){return ek(e,e=>{if(typeof e==`object`&&e.$mid===ns.Uri)return k.revive(e).toString();if(e instanceof k)return e.toString()})}fS.registerCommand(`_setContext`,loe),fS.registerCommand({id:`getContextKeyInfo`,handler(){return[...W.all()].sort((e,t)=>e.key.localeCompare(t.key))},metadata:{description:D(1775,`A command that returns information about context keys`),args:[]}}),fS.registerCommand(`_generateContextKeyInfo`,function(){let e=[],t=new Set;for(let n of W.all())t.has(n.key)||(t.add(n.key),e.push(n));e.sort((e,t)=>e.key.localeCompare(t.key)),console.log(JSON.stringify(e,void 0,2))});var x5=new Set([A.inMemory,A.vscodeSourceControl,A.walkThrough,A.walkThroughSnippet,A.vscodeChatCodeBlock,A.vscodeTerminal]),doe=class{constructor(){this._byResource=new dn,this._byOwner=new Map}set(e,t,n){let r=this._byResource.get(e);r||(r=new Map,this._byResource.set(e,r)),r.set(t,n);let i=this._byOwner.get(t);i||(i=new dn,this._byOwner.set(t,i)),i.set(e,n)}get(e,t){return this._byResource.get(e)?.get(t)}delete(e,t){let n=!1,r=!1,i=this._byResource.get(e);i&&(n=i.delete(t));let a=this._byOwner.get(t);if(a&&(r=a.delete(e)),n!==r)throw Error(`illegal state`);return n&&r}values(e){return typeof e==`string`?this._byOwner.get(e)?.values()??Cn.empty():k.isUri(e)?this._byResource.get(e)?.values()??Cn.empty():Cn.map(Cn.concat(...this._byOwner.values()),e=>e[1])}},foe=class{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new dn,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(let t of e){let e=this._data.get(t);e&&this._substract(e);let n=this._resourceStats(t);this._add(n),this._data.set(t,n)}}_resourceStats(e){let t={errors:0,warnings:0,infos:0,unknowns:0};if(x5.has(e.scheme))return t;for(let{severity:n}of this._service.read({resource:e}))n===sJ.Error?t.errors+=1:n===sJ.Warning?t.warnings+=1:n===sJ.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}},poe=class e{constructor(){this._onMarkerChanged=new or({merge:e._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new doe,this._stats=new foe(this),this._filteredResources=new dn}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}getStatistics(){return this._stats}remove(e,t){for(let n of t||[])this.changeOne(e,n,[])}changeOne(t,n,r){if(Dt(r))this._data.delete(n,t)&&this._onMarkerChanged.fire([n]);else{let i=[];for(let a of r){let r=e._toMarker(t,n,a);r&&i.push(r)}this._data.set(n,t,i),this._onMarkerChanged.fire([n])}}installResourceFilter(e,t){let n=this._filteredResources.get(e);return n||(n=[],this._filteredResources.set(e,n)),n.push(t),this._onMarkerChanged.fire([e]),S(()=>{let n=this._filteredResources.get(e);if(!n)return;let r=n.indexOf(t);r!==-1&&(n.splice(r,1),n.length===0&&this._filteredResources.delete(e),this._onMarkerChanged.fire([e]))})}static _toMarker(e,t,n){let{code:r,severity:i,message:a,source:o,startLineNumber:s,startColumn:c,endLineNumber:l,endColumn:u,relatedInformation:d,modelVersionId:f,tags:p,origin:m}=n;if(a)return s=s>0?s:1,c=c>0?c:1,l=l>=s?l:s,u=u>0?u:c,{resource:t,owner:e,code:r,severity:i,message:a,source:o,startLineNumber:s,startColumn:c,endLineNumber:l,endColumn:u,relatedInformation:d,modelVersionId:f,tags:p,origin:m}}changeAll(t,n){let r=[],i=this._data.values(t);if(i)for(let e of i){let n=Cn.first(e);n&&(r.push(n.resource),this._data.delete(n.resource,t))}if(Ot(n)){let i=new dn;for(let{resource:a,marker:o}of n){let n=e._toMarker(t,a,o);if(!n)continue;let s=i.get(a);s?s.push(n):(i.set(a,[n]),r.push(a))}for(let[e,n]of i)this._data.set(e,t,n)}r.length>0&&this._onMarkerChanged.fire(r)}_createFilteredMarker(e,t){let n=t.length===1?D(1994,`Problems are paused because: "{0}"`,t[0]):D(1995,`Problems are paused because: "{0}" and {1} more`,t[0],t.length-1);return{owner:`markersFilter`,resource:e,severity:sJ.Info,message:n,startLineNumber:1,startColumn:1,endLineNumber:1,endColumn:1}}read(t=Object.create(null)){let{owner:n,resource:r,severities:i,take:a}=t;if((!a||a<0)&&(a=-1),n&&r){let o=t.ignoreResourceFilters?void 0:this._filteredResources.get(r);if(o?.length)return[this._createFilteredMarker(r,o)];let s=this._data.get(r,n);if(!s)return[];let c=[];for(let n of s){if(a>0&&c.length===a)break;let o=t.ignoreResourceFilters?void 0:this._filteredResources.get(r);o?.length?c.push(this._createFilteredMarker(r,o)):e._accept(n,i)&&c.push(n)}return c}else{let o=!n&&!r?this._data.values():this._data.values(r??n),s=[],c=new fn;for(let n of o)for(let r of n){if(c.has(r.resource))continue;if(a>0&&s.length===a)break;let n=t.ignoreResourceFilters?void 0:this._filteredResources.get(r.resource);n?.length?(s.push(this._createFilteredMarker(r.resource,n)),c.add(r.resource)):e._accept(r,i)&&s.push(r)}return s}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){let t=new dn;for(let n of e)for(let e of n)t.set(e,!0);return Array.from(t.keys())}},S5=V(`policy`),C5=class extends w{get configurationModel(){return this._configurationModel}constructor(e){super(),this.logService=e,this._onDidChangeConfiguration=this._register(new E),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configurationModel=G6.createEmptyModel(e)}async initialize(){return this.resetConfigurationModel(),this._register(hr.as(_P.Configuration).onDidUpdateConfiguration(({properties:e,defaultsOverrides:t})=>this.onDidUpdateConfiguration(Array.from(e),t))),this.configurationModel}reload(){return this.resetConfigurationModel(),this.configurationModel}onDidUpdateConfiguration(e,t){this.updateConfigurationModel(e,hr.as(_P.Configuration).getConfigurationProperties()),this._onDidChangeConfiguration.fire({defaults:this.configurationModel,properties:e})}getConfigurationDefaultOverrides(){return{}}resetConfigurationModel(){this._configurationModel=G6.createEmptyModel(this.logService);let e=hr.as(_P.Configuration).getConfigurationProperties();this.updateConfigurationModel(Object.keys(e),e)}updateConfigurationModel(e,t){let n=this.getConfigurationDefaultOverrides();for(let r of e){let e=n[r],i=t[r];e===void 0?i?this._configurationModel.setValue(r,ZO(i.default)):this._configurationModel.removeValue(r):this._configurationModel.setValue(r,e)}}},moe=class{constructor(){this.onDidChangeConfiguration=T.None,this.configurationModel=G6.createEmptyModel(new ZV)}async initialize(){return this.configurationModel}},w5=class extends w{get configurationModel(){return this._configurationModel}constructor(e,t,n){super(),this.defaultConfiguration=e,this.policyService=t,this.logService=n,this._onDidChangeConfiguration=this._register(new E),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configurationModel=G6.createEmptyModel(this.logService),this.configurationRegistry=hr.as(_P.Configuration)}async initialize(){return this.logService.trace(`PolicyConfiguration#initialize`),this.update(await this.updatePolicyDefinitions(this.defaultConfiguration.configurationModel.keys),!1),this.update(await this.updatePolicyDefinitions(Object.keys(this.configurationRegistry.getExcludedConfigurationProperties())),!1),this._register(this.policyService.onDidChange(e=>this.onDidChangePolicies(e))),this._register(this.defaultConfiguration.onDidChangeConfiguration(async({properties:e})=>this.update(await this.updatePolicyDefinitions(e),!0))),this._configurationModel}async updatePolicyDefinitions(e){this.logService.trace(`PolicyConfiguration#updatePolicyDefinitions`,e);let t={},n=[],r=this.configurationRegistry.getConfigurationProperties(),i=this.configurationRegistry.getExcludedConfigurationProperties();for(let a of e){let e=r[a]??i[a];if(!e){n.push(a);continue}if(e.policy){if(e.type!==`string`&&e.type!==`number`&&e.type!==`array`&&e.type!==`object`&&e.type!==`boolean`){this.logService.warn(`Policy ${e.policy.name} has unsupported type ${e.type}`);continue}let{value:r}=e.policy;n.push(a),t[e.policy.name]={type:e.type===`number`?`number`:e.type===`boolean`?`boolean`:`string`,value:r}}}return je(t)||await this.policyService.updatePolicyDefinitions(t),n}onDidChangePolicies(e){this.logService.trace(`PolicyConfiguration#onDidChangePolicies`,e);let t=this.configurationRegistry.getPolicyConfigurations(),n=wt(e.map(e=>t.get(e)));this.update(n,!0)}update(e,t){this.logService.trace(`PolicyConfiguration#update`,e);let n=this.configurationRegistry.getConfigurationProperties(),r=this.configurationRegistry.getExcludedConfigurationProperties(),i=[],a=this._configurationModel.isEmpty();for(let t of e){let e=n[t]??r[t],o=e?.policy?.name;if(o){let n=this.policyService.getPolicyValue(o);if(ge(n)&&e.type!==`string`)try{n=this.parse(n)}catch(e){this.logService.error(`Error parsing policy value ${o}:`,oe(e));continue}(a?n!==void 0:!rk(this._configurationModel.getValue(t),n))&&i.push([t,n])}else this._configurationModel.getValue(t)!==void 0&&i.push([t,void 0])}if(i.length){this.logService.trace(`PolicyConfiguration#changed`,i);let e=this._configurationModel;this._configurationModel=G6.createEmptyModel(this.logService);for(let t of e.keys)this._configurationModel.setValue(t,e.getValue(t));for(let[e,t]of i)t===void 0?this._configurationModel.removeValue(e):this._configurationModel.setValue(e,t);t&&this._onDidChangeConfiguration.fire(this._configurationModel)}}parse(e){let t={},n=null,r=[],i=[],a=[];function o(e){if(Array.isArray(r))r.push(e);else if(n!==null){if(r[n]!==void 0)throw Error(`Duplicate property found: ${n}`);r[n]=e}}if(e&&(CU(e,{onObjectBegin:()=>{let e={};o(e),i.push(r),r=e,n=null},onObjectProperty:e=>{n=e},onObjectEnd:()=>{r=i.pop()},onArrayBegin:()=>{let e=[];o(e),i.push(r),r=e,n=null},onArrayEnd:()=>{r=i.pop()},onLiteralValue:o,onError:(e,t,n)=>{a.push({error:e,offset:t,length:n})}}),t=r[0]||t),a.length>0)throw Error(a.map(e=>oe(e.error)).join(`
`));return t}};w5=t([n(1,S5),n(2,Lb)],w5);var T5=class extends w{constructor(e,t=[]){super(),this.logger=new JV([e,...t]),this._register(e.onDidChangeLogLevel(e=>this.setLevel(e)))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(e){this.logger.setLevel(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}warn(e,...t){this.logger.warn(e,...t)}error(e,...t){this.logger.error(e,...t)}flush(){this.logger.flush()}},hoe=class{getParserClass(){throw Error(`not implemented in StandaloneTreeSitterLibraryService`)}supportsLanguage(e,t){return!1}getLanguage(e,t,n){}async getLanguagePromise(e){}getInjectionQueries(e,t){return null}getHighlightingQueries(e,t){return null}async createQuery(e,t){throw Error(`not implemented in StandaloneTreeSitterLibraryService`)}},E5=class{get onDidSendData(){return T.None}getDataChannel(e){return{sendData:()=>{}}}},D5=V(`dataChannelService`),goe=class e{static#e=this._workerIdPool=0;createWorkerClient(t){let n,r=++e._workerIdPool;return n=t instanceof Worker||boe(t)?Promise.resolve(t):this._createWorker(t),new QY(new xoe(n,r))}_createWorker(e){let t=this.getWorkerUrl(e),n={name:e.label,type:`module`,...this.getWorkerOptions(e)},r=voe(e.label,t,this._getWorkerLoadingFailedErrorMessage(e),n);return yoe(new Worker(O5?O5.createScriptURL(r):r,n))}_getWorkerLoadingFailedErrorMessage(e){}getWorkerUrl(e){if(!e.esmModuleLocation)throw Error(`Missing esmModuleLocation in WebWorkerDescriptor`);return(typeof e.esmModuleLocation==`function`?e.esmModuleLocation():e.esmModuleLocation).toString(!0)}getWorkerOptions(e){}},O5=(()=>{let e=globalThis;return typeof self==`object`&&self.constructor&&self.constructor.name===`DedicatedWorkerGlobalScope`&&e.workerttPolicy!==void 0?e.workerttPolicy:jK(`defaultWorkerFactory`,{createScriptURL:e=>e})})();function _oe(e,t){if(!e.startsWith(`blob:`))throw URIError(`Not a blob-url: `+e);return new Worker(O5?O5.createScriptURL(e):e,{...t,type:`module`})}function voe(e,t,n,r){if(!(/^((http:)|(https:)|(file:))/.test(t)&&t.substring(0,globalThis.origin.length)!==globalThis.origin)){let n=t.lastIndexOf(`?`),r=t.lastIndexOf(`#`,n),i=n>0?new URLSearchParams(t.substring(n+1,~r?r:void 0)):new URLSearchParams;Cs.addSearchParam(i,!0,!0),t=i.toString()?`${t}?${i.toString()}#${e}`:`${t}#${e}`}let i=new Blob([wt([`/*${e}*/`,`globalThis._VSCODE_NLS_MESSAGES = ${JSON.stringify(Or())};`,`globalThis._VSCODE_NLS_LANGUAGE = ${JSON.stringify(kr())};`,`globalThis._VSCODE_FILE_ROOT = ${JSON.stringify(globalThis._VSCODE_FILE_ROOT)};`,`const ttPolicy = globalThis.trustedTypes?.createPolicy('defaultWorkerFactory', { createScriptURL: value => value });`,`globalThis.workerttPolicy = ttPolicy;`,n?`try {`:``,`${r.type===`module`?`await import`:`importScripts`}(ttPolicy?.createScriptURL(${JSON.stringify(t)}) ?? ${JSON.stringify(t)});`,n?`} catch (err) { console.error(${JSON.stringify(n)}, err); throw err; }`:``,`globalThis.postMessage({ type: 'vscode-worker-ready' });`,`/*${e}*/`]).join(``)],{type:`application/javascript`});return URL.createObjectURL(i)}function yoe(e){return new Promise((t,n)=>{e.onmessage=function(n){n.data.type===`vscode-worker-ready`&&(e.onmessage=null,t(e))},e.onerror=n})}function boe(e){return!!e&&typeof e.then==`function`}var xoe=class extends w{constructor(e,t){super(),this._onMessage=this._register(new E),this.onMessage=this._onMessage.event,this._onError=this._register(new E),this.onError=this._onError.event,this.id=t,this.worker=e,this.postMessage(`-please-ignore-`,[]);let n=e=>{this._onError.fire(e)};this.worker.then(e=>{e.onmessage=e=>{this._onMessage.fire(e.data)},e.onmessageerror=e=>{this._onError.fire(e)},typeof e.addEventListener==`function`&&e.addEventListener(`error`,n)}),this._register(S(()=>{this.worker?.then(e=>{e.onmessage=null,e.onmessageerror=null,e.removeEventListener(`error`,n),e.terminate()}),this.worker=null}))}getId(){return this.id}postMessage(e,t){this.worker?.then(n=>{try{n.postMessage(e,t)}catch(e){p(e),p(Error(`FAILED to post message to worker`,{cause:e}))}})}},Soe=class extends goe{_createWorker(e){let t=If();if(t&&typeof t.getWorker==`function`){let n=t.getWorker(`workerMain.js`,e.label);if(n!==void 0)return Promise.resolve(n)}return super._createWorker(e)}_getWorkerLoadingFailedErrorMessage(e){return`Failed to load worker script for label: ${e.label}.
Ensure your bundler properly bundles modules referenced by "new URL('...?esm', import.meta.url)".`}getWorkerUrl(e){let t=If();if(t&&typeof t.getWorkerUrl==`function`){let n=t.getWorkerUrl(`workerMain.js`,e.label);if(n!==void 0)return new URL(n,document.baseURI).toString()}if(!e.esmModuleLocationBundler)throw Error(`You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker for the worker label: ${e.label}`);return(typeof e.esmModuleLocationBundler==`function`?e.esmModuleLocationBundler():e.esmModuleLocationBundler).toString()}getWorkerOptions(e){return If()?.getWorkerOptions?.(`workerMain.js`,e.label)}},k5=V(`defaultAccountService`),Coe=class{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new E}get onWillDispose(){return this._onWillDispose.event}resolve(){return Promise.resolve()}get textEditorModel(){return this.model}createSnapshot(){return this.model.createSnapshot()}isReadonly(){return!1}dispose(){this.disposed=!0,this._onWillDispose.fire()}isDisposed(){return this.disposed}isResolved(){return!0}getLanguageId(){return this.model.getLanguageId()}},A5=class{constructor(e){this.modelService=e}createModelReference(e){let t=this.modelService.getModel(e);return t?Promise.resolve(new Vn(new Coe(t))):Promise.reject(Error(`Model not found`))}registerTextModelContentProvider(e,t){return{dispose:function(){}}}canHandleResource(e){return!1}};A5=t([n(0,II)],A5);var woe=class e{static#e=this.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};show(){return e.NULL_PROGRESS_RUNNER}async showWhile(e,t){await e}},Toe=class{withProgress(e,t,n){return t({report:()=>{}})}},Eoe=class{constructor(){this.stateResource=k.from({scheme:`monaco`,authority:`stateResource`}),this.userRoamingDataHome=k.from({scheme:`monaco`,authority:`userRoamingDataHome`}),this.keyboardLayoutResource=k.from({scheme:`monaco`,authority:`keyboardLayoutResource`}),this.argvResource=k.from({scheme:`monaco`,authority:`argvResource`}),this.untitledWorkspacesHome=k.from({scheme:`monaco`,authority:`untitledWorkspacesHome`}),this.builtinWorkbenchModesHome=k.from({scheme:`monaco`,authority:`builtinWorkbenchModesHome`}),this.workspaceStorageHome=k.from({scheme:`monaco`,authority:`workspaceStorageHome`}),this.localHistoryHome=k.from({scheme:`monaco`,authority:`localHistoryHome`}),this.cacheHome=k.from({scheme:`monaco`,authority:`cacheHome`}),this.userDataSyncHome=k.from({scheme:`monaco`,authority:`userDataSyncHome`}),this.sync=void 0,this.continueOn=void 0,this.editSessionId=void 0,this.debugExtensionHost={port:null,break:!1},this.isExtensionDevelopment=!1,this.disableExtensions=!1,this.disableExperiments=!1,this.enableExtensions=void 0,this.extensionDevelopmentLocationURI=void 0,this.extensionDevelopmentKind=void 0,this.extensionTestsLocationURI=void 0,this.logsHome=k.from({scheme:`monaco`,authority:`logsHome`}),this.logLevel=void 0,this.extensionLogLevel=void 0,this.verbose=!1,this.isBuilt=!1,this.disableTelemetry=!1,this.serviceMachineIdResource=k.from({scheme:`monaco`,authority:`serviceMachineIdResource`}),this.policyFile=void 0}},Doe=class{constructor(){this.onWillShowDialog=T.None,this.onDidShowDialog=T.None}async confirm(e){return{confirmed:this.doConfirm(e.message,e.detail),checkboxChecked:!1}}doConfirm(e,t){let n=e;return t&&(n=n+`

`+t),i.confirm(n)}async prompt(e){let t;if(this.doConfirm(e.message,e.detail)){let n=[...e.buttons??[]];e.cancelButton&&typeof e.cancelButton!=`string`&&typeof e.cancelButton!=`boolean`&&n.push(e.cancelButton),t=await n[0]?.run({checkboxChecked:!1})}return{result:t}}async info(e,t){await this.prompt({type:Lx.Info,message:e,detail:t})}async warn(e,t){await this.prompt({type:Lx.Warning,message:e,detail:t})}async error(e,t){await this.prompt({type:Lx.Error,message:e,detail:t})}input(){return Promise.resolve({confirmed:!1})}about(){return Promise.resolve(void 0)}},Ooe=class e{constructor(){this.onDidChangeFilter=T.None}static#e=this.NO_OP=new Hx;info(e){return this.notify({severity:Lx.Info,message:e})}warn(e){return this.notify({severity:Lx.Warning,message:e})}error(e){return this.notify({severity:Lx.Error,message:e})}notify(t){switch(t.severity){case Lx.Error:console.error(t.message);break;case Lx.Warning:console.warn(t.message);break;default:console.log(t.message);break}return e.NO_OP}prompt(t,n,r,i){return e.NO_OP}status(e,t){return{close:()=>{}}}setFilter(e){}getFilter(e){return Vx.OFF}getFilters(){return[]}removeFilter(e){}},j5=class{constructor(e){this._onWillExecuteCommand=new E,this._onDidExecuteCommand=new E,this.onWillExecuteCommand=this._onWillExecuteCommand.event,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){let n=fS.getCommand(e);if(!n)return Promise.reject(Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});let r=this._instantiationService.invokeFunction.apply(this._instantiationService,[n.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(r)}catch(e){return Promise.reject(e)}}};j5=t([n(0,Cy)],j5);var M5=class extends M3{constructor(e,t,n,r,i,a){super(e,t,n,r,i),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[]}registerContainer(e){let t=new C;return t.add(L(e,R.KEY_DOWN,e=>{let t=new vp(e);this._dispatch(t,t.target)&&(t.preventDefault(),t.stopPropagation())})),t.add(L(e,R.KEY_UP,e=>{let t=new vp(e);this._singleModifierDispatch(t,t.target)&&t.preventDefault()})),this._domNodeListeners.push(new koe(e,t)),t.add(S(()=>{for(let t=0;t<this._domNodeListeners.length;t++){let n=this._domNodeListeners[t];n.domNode===e&&(this._domNodeListeners.splice(t,1),n.dispose())}})),t}addDynamicKeybinding(e,t,n,r){return Fn(fS.registerCommand(e,n),this.addDynamicKeybindings([{keybinding:t,command:e,when:r}]))}addDynamicKeybindings(e){let t=e.map(e=>({keybinding:np(e.keybinding,Ei),command:e.command??null,commandArgs:e.commandArgs,when:e.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}));return this._dynamicKeybindings=this._dynamicKeybindings.concat(t),this.updateResolver(),S(()=>{for(let e=0;e<this._dynamicKeybindings.length;e++)if(this._dynamicKeybindings[e]===t[0]){this._dynamicKeybindings.splice(e,t.length),this.updateResolver();return}})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}getUserKeybindingItems(){return this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1)}_getResolver(){return this._cachedResolver||=new sF(this._toNormalizedKeybindingItems(aC.getDefaultKeybindings(),!0),this.getUserKeybindingItems(),e=>this._log(e)),this._cachedResolver}_documentHasFocus(){return i.document.hasFocus()}_toNormalizedKeybindingItems(e,t){let n=[],r=0;for(let i of e){let e=i.when||void 0,a=i.keybinding;if(!a)n[r++]=new P3(void 0,i.command,i.commandArgs,e,t,null,!1);else{let o=this.resolveKeybinding(a);for(let a of o)n[r++]=new P3(a,i.command,i.commandArgs,e,t,null,!1)}}return n}resolveKeybinding(e){return L3.resolveKeybinding(e,Ei)}resolveKeyboardEvent(e){return new L3([new ip(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode)],Ei)}resolveUserBinding(e){return[]}_dumpDebugInfo(){return``}_dumpDebugInfoJSON(){return``}registerSchemaContribution(e){return w.None}enableKeybindingHoldMode(e){}};M5=t([n(0,uS),n(1,dS),n(2,NI),n(3,Px),n(4,Lb),n(5,gY)],M5);var koe=class extends w{constructor(e,t){super(),this.domNode=e,this._register(t)}};function N5(e){return!!e&&typeof e==`object`&&(!e.overrideIdentifier||typeof e.overrideIdentifier==`string`)&&(!e.resource||e.resource instanceof k)}var P5=class{constructor(e){this.logService=e,this._onDidChangeConfiguration=new E,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;let t=new C5(e);this._configuration=new q6(t.reload(),G6.createEmptyModel(e),G6.createEmptyModel(e),G6.createEmptyModel(e),G6.createEmptyModel(e),G6.createEmptyModel(e),new dn,G6.createEmptyModel(e),new dn,e),t.dispose()}getValue(e,t){let n=typeof e==`string`?e:void 0,r=N5(e)?e:N5(t)?t:{};return this._configuration.getValue(n,r,void 0)}updateValues(e){let t={data:this._configuration.toData()},n=[];for(let t of e){let[e,r]=t;this.getValue(e)!==r&&(this._configuration.updateValue(e,r),n.push(e))}if(n.length>0){let e=new J6({keys:n,overrides:[]},t,this._configuration,void 0,this.logService);e.source=oP.MEMORY,this._onDidChangeConfiguration.fire(e)}return Promise.resolve()}updateValue(e,t,n,r){return this.updateValues([[e,t]])}inspect(e,t={}){return this._configuration.inspect(e,t,void 0)}keys(){return this._configuration.keys(void 0)}reloadConfiguration(){return Promise.resolve(void 0)}getConfigurationData(){let e={contents:{},keys:[],overrides:[]};return{defaults:e,policy:e,application:e,userLocal:e,userRemote:e,workspace:e,folders:[]}}};P5=t([n(0,Lb)],P5);var F5=class{constructor(e,t,n){this.configurationService=e,this.modelService=t,this.languageService=n,this._onDidChangeConfiguration=new E,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this.configurationService.onDidChangeConfiguration(e=>{this._onDidChangeConfiguration.fire({affectedKeys:e.affectedKeys,affectsConfiguration:(t,n)=>e.affectsConfiguration(n)})})}getValue(e,t,n){let r=KK.isIPosition(t)?t:null,i=r?typeof n==`string`?n:void 0:typeof t==`string`?t:void 0,a=e?this.getLanguage(e,r):void 0;return i===void 0?this.configurationService.getValue({resource:e,overrideIdentifier:a}):this.configurationService.getValue(i,{resource:e,overrideIdentifier:a})}inspect(e,t,n){let r=e?this.getLanguage(e,t):void 0;return this.configurationService.inspect(n,{resource:e,overrideIdentifier:r})}getLanguage(e,t){let n=this.modelService.getModel(e);return n?t?n.getLanguageIdAtPosition(t.lineNumber,t.column):n.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(e)}updateValue(e,t,n,r){return this.configurationService.updateValue(t,n,{resource:e},r)}};F5=t([n(0,Dx),n(1,II),n(2,FI)],F5);var I5=class{constructor(e){this.configurationService=e}getEOL(e,t){let n=this.configurationService.getValue(`files.eol`,{overrideIdentifier:t,resource:e});return n&&typeof n==`string`&&n!==`auto`?n:ci||si?`
`:`\r
`}};I5=t([n(0,Dx)],I5);var Aoe=class{constructor(){this.telemetryLevel=XW.NONE,this.sessionId=`someValue.sessionId`,this.machineId=`someValue.machineId`,this.sqmId=`someValue.sqmId`,this.devDeviceId=`someValue.devDeviceId`,this.firstSessionDate=`someValue.firstSessionDate`,this.sendErrorTelemetry=!1}setEnabled(){}setExperimentProperty(){}publicLog(){}publicLog2(){}publicLogError(){}publicLogError2(){}},joe=class e{static#e=this.SCHEME=`inmemory`;constructor(){this._onDidChangeWorkspaceName=new E,this.onDidChangeWorkspaceName=this._onDidChangeWorkspaceName.event,this._onWillChangeWorkspaceFolders=new E,this.onWillChangeWorkspaceFolders=this._onWillChangeWorkspaceFolders.event,this._onDidChangeWorkspaceFolders=new E,this.onDidChangeWorkspaceFolders=this._onDidChangeWorkspaceFolders.event,this._onDidChangeWorkbenchState=new E,this.onDidChangeWorkbenchState=this._onDidChangeWorkbenchState.event,this.workspace={id:nx,folders:[new Jb({uri:k.from({scheme:e.SCHEME,authority:`model`,path:`/`}),name:``,index:0})]}}getCompleteWorkspace(){return Promise.resolve(this.getWorkspace())}getWorkspace(){return this.workspace}getWorkbenchState(){return this.workspace?this.workspace.configuration?Wb.WORKSPACE:Wb.FOLDER:Wb.EMPTY}getWorkspaceFolder(t){return t&&t.scheme===e.SCHEME?this.workspace.folders[0]:null}isInsideWorkspace(t){return t&&t.scheme===e.SCHEME}isCurrentWorkspace(e){return!0}};function Moe(e,t,n){if(!t||!(e instanceof P5))return;let r=[];Object.keys(t).forEach(e=>{fae(e)&&r.push([`editor.${e}`,t[e]]),n&&pae(e)&&r.push([`diffEditor.${e}`,t[e]])}),r.length>0&&e.updateValues(r)}var L5=class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}setPreviewHandler(){return w.None}async apply(e,t){let n=Array.isArray(e)?e:I6.convert(e),r=new Map;for(let e of n){if(!(e instanceof L6))throw Error(`bad edit - only text edits are supported`);let t=this._modelService.getModel(e.resource);if(!t)throw Error(`bad edit - model not found`);if(typeof e.versionId==`number`&&t.getVersionId()!==e.versionId)throw Error(`bad state - model changed in the meantime`);let n=r.get(t);n||(n=[],r.set(t,n)),n.push(qK.replaceMove(X.lift(e.textEdit.range),e.textEdit.text))}let i=0,a=0;for(let[e,t]of r)e.pushStackElement(),e.pushEditOperations([],t,()=>[]),e.pushStackElement(),a+=1,i+=t.length;return{ariaSummary:Oa($6.bulkEditServiceSummary,i,a),isApplied:i>0}}};L5=t([n(0,II)],L5);var Noe=class{constructor(){this.onDidChangeFormatters=T.None}getUriLabel(e,t){return e.scheme===`file`?e.fsPath:e.path}getUriBasenameLabel(e){return Ms(e)}getWorkspaceLabel(e,t){return``}getSeparator(e,t){return`/`}registerFormatter(e){throw Error(`Not implemented`)}registerCachedFormatter(e){return this.registerFormatter(e)}getHostLabel(){return``}getHostTooltip(){}},R5=class extends t8{constructor(e,t){super(e),this._codeEditorService=t}showContextView(e,t,n){if(!t){let e=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();e&&(t=e.getContainerDomNode())}return super.showContextView(e,t,n)}};R5=t([n(0,Ey),n(1,gY)],R5);var Poe=class{constructor(){this._neverEmitter=new E,this.onDidChangeTrust=this._neverEmitter.event,this.onDidChangeTrustedFolders=this._neverEmitter.event,this.workspaceResolved=Promise.resolve(),this.workspaceTrustInitialized=Promise.resolve(),this.acceptsOutOfWorkspaceFiles=!0}isWorkspaceTrusted(){return!0}isWorkspaceTrustForced(){return!1}canSetParentFolderTrust(){return!1}async setParentFolderTrust(e){}canSetWorkspaceTrust(){return!1}async setWorkspaceTrust(e){}getUriTrustInfo(e){throw Error(`Method not supported.`)}async setUrisTrust(e,t){}getTrustedUris(){return[]}async setTrustedUris(e){}addWorkspaceTrustTransitionParticipant(e){throw Error(`Method not supported.`)}},Foe=class extends i8{constructor(){super()}},Ioe=class extends T5{constructor(){super(new qV)}},z5=class extends o8{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a),this.configure({blockMouse:!1})}};z5=t([n(0,NI),n(1,Px),n(2,eF),n(3,nF),n(4,xV),n(5,uS)],z5);var Loe=class{async playSignal(e,t){}async playSignals(e){}getEnabledState(e,t,n){return dr.const(!1)}getDelayMs(e,t){return 0}isSoundEnabled(e){return!1}isAnnouncementEnabled(e){return!1}onSoundEnabledChanged(e){return T.None}async playSound(e,t){}playSignalLoop(e){return S(()=>{})}},Roe=class{constructor(){this.onDidChangeDefaultAccount=T.None,this.onDidChangePolicyData=T.None,this.policyData=null}async getDefaultAccount(){return null}setDefaultAccountProvider(){}async refresh(){return null}getDefaultAccountAuthenticationProvider(){return{id:`default`,name:`Default`,enterprise:!1}}async signIn(){return null}};Pv(tX,Soe,Nv.Eager),Pv(Lb,Ioe,Nv.Eager),Pv(Dx,P5,Nv.Eager),Pv(Lq,F5,Nv.Eager),Pv(Rq,I5,Nv.Eager),Pv(fV,joe,Nv.Eager),Pv(sH,Noe,Nv.Eager),Pv(NI,Aoe,Nv.Eager),Pv(FV,Doe,Nv.Eager),Pv(Ly,Eoe,Nv.Eager),Pv(Px,Ooe,Nv.Eager),Pv(lJ,poe,Nv.Eager),Pv(FI,Foe,Nv.Eager),Pv(c5,toe,Nv.Eager),Pv(II,m8,Nv.Eager),Pv(WX,d8,Nv.Eager),Pv(uS,y5,Nv.Eager),Pv(uH,Toe,Nv.Eager),Pv(dH,woe,Nv.Eager),Pv(Ex,wx,Nv.Eager),Pv(z6,L5,Nv.Eager),Pv(Vq,Poe,Nv.Eager),Pv(_Y,A5,Nv.Eager),Pv(VL,l5,Nv.Eager),Pv(DF,OF,Nv.Eager),Pv(dS,j5,Nv.Eager),Pv(nF,M5,Nv.Eager),Pv(WR,X8,Nv.Eager),Pv(eF,R5,Nv.Eager),Pv(KR,u8,Nv.Eager),Pv(ZR,f5,Nv.Eager),Pv(tF,z5,Nv.Eager),Pv(xV,wH,Nv.Eager),Pv(GR,Loe,Nv.Eager),Pv(O4,hoe,Nv.Eager),Pv(Rb,QV,Nv.Eager),Pv(D5,E5,Nv.Eager),Pv(k5,Roe,Nv.Eager),Pv(F6,uae,Nv.Eager);var B5;(function(e){let t=new iV;for(let[e,n]of Fv())t.set(e,n);let n=new sV(t,!0);t.set(Cy,n);function r(e){i||o({});let r=t.get(e);if(!r)throw Error(`Missing service `+e);return r instanceof jv?n.invokeFunction(t=>t.get(e)):r}e.get=r;let i=!1,a=new E;function o(e){if(i)return n;i=!0;for(let[e,n]of Fv())t.get(e)||t.set(e,n);for(let n in e)if(e.hasOwnProperty(n)){let r=V(n);t.get(r)instanceof jv&&t.set(r,e[n])}return a.fire(),n}e.initialize=o;function s(e){if(i)return e();let t=new C,n=t.add(a.event(()=>{n.dispose(),t.add(e())}));return t}e.withServices=s})(B5||={});async function zoe(e,t,n,r,i,a){let o;try{await Boe(e,t,n,r,i,a)}catch(e){o=e}finally{o&&i.errorTransformer&&(o=i.errorTransformer(o)),o!==void 0&&n.error(o),n.end()}}async function Boe(e,t,n,r,i,a){V5(a);let o=await e.open(t,{create:!1});try{V5(a);let t=0,s=0,c=i&&typeof i.length==`number`?i.length:void 0,l=Up.alloc(Math.min(i.bufferSize,typeof c==`number`?c:i.bufferSize)),u=i&&typeof i.position==`number`?i.position:0,d=0;do s=await e.read(o,u,l.buffer,d,l.byteLength-d),u+=s,d+=s,t+=s,typeof c==`number`&&(c-=s),d===l.byteLength&&(await n.write(r(l)),l=Up.alloc(Math.min(i.bufferSize,typeof c==`number`?c:i.bufferSize)),d=0);while(s>0&&(typeof c!=`number`||c>0)&&V5(a)&&Voe(t,i));if(d>0){let e=d;typeof c==`number`&&(e=Math.min(d,c)),n.write(r(l.slice(0,e)))}}catch(e){throw db(e)}finally{await e.close(o)}}function V5(e){if(e.isCancellationRequested)throw ne();return!0}function Voe(e,t){if(typeof t?.limits?.size==`number`&&e>t.limits.size)throw ub(D(1946,`File is too large to open`),H.FileTooLarge);return!0}var H5;function U5(e){return e.scheme===A.file?e.fsPath:e.toString(!0)}async function W5(e,t,n){let r=[];for(;!e.isEqual(n,e.dirname(n));)try{if(((await t.stat(n)).type&Jy.Directory)===0)throw Error(D(1913,`Unable to create folder '{0}' that already exists but is not a directory`,U5(n)));break}catch(t){if(pb(t)!==H.FileNotFound)throw t;r.push(e.basename(n)),n=e.dirname(n)}for(let i=r.length-1;i>=0;i--){n=e.joinPath(n,r[i]);try{await t.mkdir(n)}catch(e){if(pb(e)!==H.FileExists)throw e}}}var G5=class extends w{static#e=H5=this;constructor(e){super(),this.logService=e,this.BUFFER_SIZE=256*1024,this._onDidChangeFileSystemProviderRegistrations=this._register(new E),this.onDidChangeFileSystemProviderRegistrations=this._onDidChangeFileSystemProviderRegistrations.event,this._onWillActivateFileSystemProvider=this._register(new E),this.onWillActivateFileSystemProvider=this._onWillActivateFileSystemProvider.event,this._onDidChangeFileSystemProviderCapabilities=this._register(new E),this.onDidChangeFileSystemProviderCapabilities=this._onDidChangeFileSystemProviderCapabilities.event,this.provider=new Map,this._onDidRunOperation=this._register(new E),this.onDidRunOperation=this._onDidRunOperation.event,this.internalOnDidFilesChange=this._register(new E),this._onDidUncorrelatedFilesChange=this._register(new E),this.onDidFilesChange=this._onDidUncorrelatedFilesChange.event,this._onDidWatchError=this._register(new E),this.onDidWatchError=this._onDidWatchError.event,this.activeWatchers=new Map,this.writeQueue=this._register(new gc)}registerProvider(e,t){if(this.provider.has(e))throw Error(`A filesystem provider for the scheme '${e}' is already registered.`);kv(`code/registerFilesystem/${e}`);let n=new C;return this.provider.set(e,t),this._onDidChangeFileSystemProviderRegistrations.fire({added:!0,scheme:e,provider:t}),n.add(t.onDidChangeFile(e=>{let n=new vb(e,!this.isPathCaseSensitive(t));this.internalOnDidFilesChange.fire(n),n.hasCorrelation()||this._onDidUncorrelatedFilesChange.fire(n)})),typeof t.onDidWatchError==`function`&&n.add(t.onDidWatchError(e=>this._onDidWatchError.fire(Error(e)))),n.add(t.onDidChangeCapabilities(()=>this._onDidChangeFileSystemProviderCapabilities.fire({provider:t,scheme:e}))),S(()=>{this._onDidChangeFileSystemProviderRegistrations.fire({added:!1,scheme:e,provider:t}),this.provider.delete(e),Nn(n)})}getProvider(e){return this.provider.get(e)}async activateProvider(e){let t=[];this._onWillActivateFileSystemProvider.fire({scheme:e,join(e){t.push(e)}}),!this.provider.has(e)&&await Ac.settled(t)}async canHandleResource(e){return await this.activateProvider(e.scheme),this.hasProvider(e)}hasProvider(e){return this.provider.has(e.scheme)}hasCapability(e,t){let n=this.provider.get(e.scheme);return!!(n&&n.capabilities&t)}listCapabilities(){return Cn.map(this.provider,([e,t])=>({scheme:e,capabilities:t.capabilities}))}async withProvider(e){if(!zs(e))throw new yb(D(1914,`Unable to resolve filesystem provider with relative file path '{0}'`,this.resourceForError(e)),Sb.FILE_INVALID_PATH);await this.activateProvider(e.scheme);let t=this.provider.get(e.scheme);if(!t){let t=new le;throw t.message=D(1915,`ENOPRO: No file system provider found for resource '{0}'`,e.toString()),t}return t}async withReadProvider(e){let t=await this.withProvider(e);if(rb(t)||Qy(t)||ib(t))return t;throw Error(`Filesystem provider for scheme '${e.scheme}' neither has FileReadWrite, FileReadStream nor FileOpenReadWriteClose capability which is needed for the read operation.`)}async withWriteProvider(e){let t=await this.withProvider(e);if(rb(t)||Qy(t))return t;throw Error(`Filesystem provider for scheme '${e.scheme}' neither has FileReadWrite nor FileOpenReadWriteClose capability which is needed for the write operation.`)}async resolve(e,t){try{return await this.doResolveFile(e,t)}catch(t){throw pb(t)===H.FileNotFound?new yb(D(1916,`Unable to resolve nonexistent file '{0}'`,this.resourceForError(e)),Sb.FILE_NOT_FOUND):db(t)}}async doResolveFile(e,t){let n=await this.withProvider(e),r=this.isPathCaseSensitive(n),i=t?.resolveTo,a=t?.resolveSingleChildDescendants,o=t?.resolveMetadata,s=await n.stat(e),c;return this.toFileStat(n,e,s,void 0,!!o,(t,n)=>(c||(c=Ky.forUris(()=>!r),c.set(e,!0),i&&c.fill(!0,i)),c.get(t.resource)||c.findSuperstr(t.resource.with({query:null,fragment:null}))?!0:t.isDirectory&&a?n===1:!1))}async toFileStat(e,t,n,r,i,a){let{providerExtUri:o}=this.getExtUri(e),s={resource:t,name:o.basename(t),isFile:(n.type&Jy.File)!==0,isDirectory:(n.type&Jy.Directory)!==0,isSymbolicLink:(n.type&Jy.SymbolicLink)!==0,mtime:n.mtime,ctime:n.ctime,size:n.size,readonly:!!((n.permissions??0)&Yy.Readonly)||!!(e.capabilities&Zy.Readonly),locked:!!((n.permissions??0)&Yy.Locked),executable:!!((n.permissions??0)&Yy.Executable),etag:Mb({mtime:n.mtime,size:n.size}),children:void 0};if(s.isDirectory&&a(s,r)){try{let n=await e.readdir(t);s.children=wt(await Ac.settled(n.map(async([r,s])=>{try{let c=o.joinPath(t,r),l=i?await e.stat(c):{type:s};return await this.toFileStat(e,c,l,n.length,i,a)}catch(e){return this.logService.trace(e),null}})))}catch(e){this.logService.trace(e),s.children=[]}return s}return s}async resolveAll(e){return Ac.settled(e.map(async e=>{try{return{stat:await this.doResolveFile(e.resource,e.options),success:!0}}catch(e){return this.logService.trace(e),{stat:void 0,success:!1}}}))}async stat(e){let t=await this.withProvider(e),n=await t.stat(e);return this.toFileStat(t,e,n,void 0,!0,()=>!1)}async realpath(e){let t=await this.withProvider(e);if(nb(t)){let n=await t.realpath(e);return e.with({path:n})}}async exists(e){let t=await this.withProvider(e);try{return!!await t.stat(e)}catch{return!1}}async canCreateFile(e,t){try{await this.doValidateCreateFile(e,t)}catch(e){return e}return!0}async doValidateCreateFile(e,t){if(!t?.overwrite&&await this.exists(e))throw new yb(D(1917,`Unable to create file '{0}' that already exists when overwrite flag is not set`,this.resourceForError(e)),Sb.FILE_MODIFIED_SINCE,t)}async createFile(e,t=Up.fromString(``),n){await this.doValidateCreateFile(e,n);let r=await this.writeFile(e,t);return this._onDidRunOperation.fire(new gb(e,hb.CREATE,r)),r}async writeFile(e,t,n){let r=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(e),e),{providerExtUri:i}=this.getExtUri(r),a=n;if(ob(r)&&!a?.atomic){let t=r.enforceAtomicWriteFile?.(e);t&&(a={...n,atomic:t})}try{let{stat:n,buffer:o}=await this.validateWriteFile(r,e,t,a);n||await this.mkdirp(r,i.dirname(e)),o||=await this.peekBufferForWriting(r,t),!rb(r)||Qy(r)&&o instanceof Up||Qy(r)&&ob(r)&&a?.atomic?await this.doWriteUnbuffered(r,e,a,o):await this.doWriteBuffered(r,e,a,o instanceof Up?em(o):o),this._onDidRunOperation.fire(new gb(e,hb.WRITE))}catch(t){throw new yb(D(1918,`Unable to write file '{0}' ({1})`,this.resourceForError(e),db(t).toString()),mb(t),a)}return this.resolve(e,{resolveMetadata:!0})}async peekBufferForWriting(e,t){let n;if(Qy(e)&&!(t instanceof Up))if(Ep(t)){let e=await Np(t,3);n=e.ended?Up.concat(e.buffer):e}else n=Ap(t,e=>Up.concat(e),3);else n=t;return n}async validateWriteFile(e,t,n,r){let i=!!r?.unlock;if(i&&!(e.capabilities&Zy.FileWriteUnlock))throw Error(D(1919,`Unable to unlock file '{0}' because provider does not support it.`,this.resourceForError(t)));if(r?.append&&!$y(e))throw new yb(D(1920,`Filesystem provider for scheme '{0}' does not does not support append`,this.resourceForError(t)),Sb.FILE_PERMISSION_DENIED);if(r?.atomic){if(!(e.capabilities&Zy.FileAtomicWrite))throw Error(D(1921,`Unable to atomically write file '{0}' because provider does not support it.`,this.resourceForError(t)));if(!(e.capabilities&Zy.FileReadWrite))throw Error(D(1922,`Unable to atomically write file '{0}' because provider does not support unbuffered writes.`,this.resourceForError(t)));if(i)throw Error(D(1923,`Unable to unlock file '{0}' because atomic write is enabled.`,this.resourceForError(t)))}let a;try{a=await e.stat(t)}catch{return Object.create(null)}if((a.type&Jy.Directory)!==0)throw new yb(D(1924,`Unable to write file '{0}' that is actually a directory`,this.resourceForError(t)),Sb.FILE_IS_DIRECTORY,r);this.throwIfFileIsReadonly(t,a);let o;if(typeof r?.mtime==`number`&&typeof r.etag==`string`&&r.etag!==``&&typeof a.mtime==`number`&&typeof a.size==`number`&&r.mtime<a.mtime&&r.etag!==Mb({mtime:r.mtime,size:a.size})){if(o=await this.peekBufferForWriting(e,n),o instanceof Up&&o.byteLength===a.size)try{let{value:e}=await this.readFile(t,{limits:{size:a.size}});if(o.equals(e))return{stat:a,buffer:o}}catch{}throw new yb(D(1925,`File Modified Since`),Sb.FILE_MODIFIED_SINCE,r)}return{stat:a,buffer:o}}async readFile(e,t,n){let r=await this.withReadProvider(e);return t?.atomic?this.doReadFileAtomic(r,e,t,n):this.doReadFile(r,e,t,n)}async doReadFileAtomic(e,t,n,r){return new Promise((i,a)=>{this.writeQueue.queueFor(t,async()=>{try{i(await this.doReadFile(e,t,n,r))}catch(e){a(e)}},this.getExtUri(e).providerExtUri)})}async doReadFile(e,t,n,r){let i=await this.doReadFileStream(e,t,{...n,preferUnbuffered:!0},r);return{...i,value:await tm(i.value)}}async readFileStream(e,t,n){let r=await this.withReadProvider(e);return this.doReadFileStream(r,e,t,n)}async doReadFileStream(e,t,n,r){let i=new Lr(r),a=n;ab(e)&&e.enforceAtomicReadFile?.(t)&&(a={...n,atomic:!0});let o=this.validateReadFile(t,a).then(e=>e,e=>{throw i.dispose(!0),e}),s;try{return typeof a?.etag==`string`&&a.etag!==``&&await o,s=a?.atomic&&ab(e)||!(rb(e)||ib(e))||Qy(e)&&a?.preferUnbuffered?this.readFileUnbuffered(e,t,a):ib(e)?this.readFileStreamed(e,t,i.token,a):this.readFileBuffered(e,t,i.token,a),s.on(`end`,()=>i.dispose()),s.on(`error`,()=>i.dispose()),{...await o,value:s}}catch(e){throw s&&await jp(s),this.restoreReadError(e,t,a)}}restoreReadError(e,t,n){let r=D(1926,`Unable to read file '{0}' ({1})`,this.resourceForError(t),db(e).toString());return e instanceof xb?new xb(r,e.stat,n):e instanceof bb?new bb(r,e.fileOperationResult,e.size,e.options):new yb(r,mb(e),n)}readFileStreamed(e,t,n,r=Object.create(null)){return Ip(e.readFileStream(t,r,n),{data:e=>e instanceof Up?e:Up.wrap(e),error:e=>this.restoreReadError(e,t,r)},e=>Up.concat(e))}readFileBuffered(e,t,n,r=Object.create(null)){let i=im();return zoe(e,t,i,e=>e,{...r,bufferSize:this.BUFFER_SIZE,errorTransformer:e=>this.restoreReadError(e,t,r)},n),i}readFileUnbuffered(e,t,n){let r=Op(e=>Up.concat(e));return(async()=>{try{let i;i=n?.atomic&&ab(e)?await e.readFile(t,{atomic:!0}):await e.readFile(t),typeof n?.position==`number`&&(i=i.slice(n.position)),typeof n?.length==`number`&&(i=i.slice(0,n.length)),this.validateReadFileLimits(t,i.byteLength,n),r.end(Up.wrap(i))}catch(e){r.error(e),r.end()}})(),r}async validateReadFile(e,t){let n=await this.resolve(e,{resolveMetadata:!0});if(n.isDirectory)throw new yb(D(1927,`Unable to read file '{0}' that is actually a directory`,this.resourceForError(e)),Sb.FILE_IS_DIRECTORY,t);if(typeof t?.etag==`string`&&t.etag!==``&&t.etag===n.etag)throw new xb(D(1928,`File not modified since`),n,t);return this.validateReadFileLimits(e,n.size,t),n}validateReadFileLimits(e,t,n){if(typeof n?.limits?.size==`number`&&t>n.limits.size)throw new bb(D(1929,`Unable to read file '{0}' that is too large to open`,this.resourceForError(e)),Sb.FILE_TOO_LARGE,t,n)}async canMove(e,t,n){return this.doCanMoveCopy(e,t,`move`,n)}async canCopy(e,t,n){return this.doCanMoveCopy(e,t,`copy`,n)}async doCanMoveCopy(e,t,n,r){if(e.toString()!==t.toString())try{let i=n===`move`?this.throwIfFileSystemIsReadonly(await this.withWriteProvider(e),e):await this.withReadProvider(e),a=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(t),t);await this.doValidateMoveCopy(i,e,a,t,n,r)}catch(e){return e}return!0}async move(e,t,n){let r=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(e),e),i=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(t),t),a=await this.doMoveCopy(r,e,i,t,`move`,!!n),o=await this.resolve(t,{resolveMetadata:!0});return this._onDidRunOperation.fire(new gb(e,a===`move`?hb.MOVE:hb.COPY,o)),o}async copy(e,t,n){let r=await this.withReadProvider(e),i=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(t),t),a=await this.doMoveCopy(r,e,i,t,`copy`,!!n),o=await this.resolve(t,{resolveMetadata:!0});return this._onDidRunOperation.fire(new gb(e,a===`copy`?hb.COPY:hb.MOVE,o)),o}async doMoveCopy(e,t,n,r,i,a){if(t.toString()===r.toString())return i;let{exists:o,isSameResourceWithDifferentPathCase:s}=await this.doValidateMoveCopy(e,t,n,r,i,a);if(o&&!s&&a&&await this.del(r,{recursive:!0}),await this.mkdirp(n,this.getExtUri(n).providerExtUri.dirname(r)),i===`copy`){if(e===n&&eb(e))await e.copy(t,r,{overwrite:a});else{let i=await this.resolve(t);i.isDirectory?await this.doCopyFolder(e,i,n,r):await this.doCopyFile(e,t,n,r)}return i}else if(e===n)return await e.rename(t,r,{overwrite:a}),i;else return await this.doMoveCopy(e,t,n,r,`copy`,a),await this.del(t,{recursive:!0}),`copy`}async doCopyFile(e,t,n,r){if(rb(e)&&rb(n))return this.doPipeBuffered(e,t,n,r);if(rb(e)&&Qy(n))return this.doPipeBufferedToUnbuffered(e,t,n,r);if(Qy(e)&&rb(n))return this.doPipeUnbufferedToBuffered(e,t,n,r);if(Qy(e)&&Qy(n))return this.doPipeUnbuffered(e,t,n,r)}async doCopyFolder(e,t,n,r){await n.mkdir(r),Array.isArray(t.children)&&await Ac.settled(t.children.map(async t=>{let i=this.getExtUri(n).providerExtUri.joinPath(r,t.name);return t.isDirectory?this.doCopyFolder(e,await this.resolve(t.resource),n,i):this.doCopyFile(e,t.resource,n,i)}))}async doValidateMoveCopy(e,t,n,r,i,a){let o=!1;if(e===n){let{providerExtUri:n,isPathCaseSensitive:a}=this.getExtUri(e);if(a||(o=n.isEqual(t,r)),o&&i===`copy`)throw Error(D(1930,`Unable to copy when source '{0}' is same as target '{1}' with different path case on a case insensitive file system`,this.resourceForError(t),this.resourceForError(r)));if(!o&&n.isEqualOrParent(r,t))throw Error(D(1931,`Unable to move/copy when source '{0}' is parent of target '{1}'.`,this.resourceForError(t),this.resourceForError(r)))}let s=await this.exists(r);if(s&&!o){if(!a)throw new yb(D(1932,`Unable to move/copy '{0}' because target '{1}' already exists at destination.`,this.resourceForError(t),this.resourceForError(r)),Sb.FILE_MOVE_CONFLICT);if(e===n){let{providerExtUri:n}=this.getExtUri(e);if(n.isEqualOrParent(t,r))throw Error(D(1933,`Unable to move/copy '{0}' into '{1}' since a file would replace the folder it is contained in.`,this.resourceForError(t),this.resourceForError(r)))}}return{exists:s,isSameResourceWithDifferentPathCase:o}}getExtUri(e){let t=this.isPathCaseSensitive(e);return{providerExtUri:t?Es:Os,isPathCaseSensitive:t}}isPathCaseSensitive(e){return!!(e.capabilities&Zy.PathCaseSensitive)}async createFolder(e){let t=this.throwIfFileSystemIsReadonly(await this.withProvider(e),e);await this.mkdirp(t,e);let n=await this.resolve(e,{resolveMetadata:!0});return this._onDidRunOperation.fire(new gb(e,hb.CREATE,n)),n}async mkdirp(e,t){let{providerExtUri:n}=this.getExtUri(e);return W5(n,e,t)}async canDelete(e,t){try{await this.doValidateDelete(e,t)}catch(e){return e}return!0}async doValidateDelete(e,t){let n=this.throwIfFileSystemIsReadonly(await this.withProvider(e),e),r=!!t?.useTrash;if(r&&!(n.capabilities&Zy.Trash))throw Error(D(1934,`Unable to delete file '{0}' via trash because provider does not support it.`,this.resourceForError(e)));let i=t?.atomic;if(i&&!(n.capabilities&Zy.FileAtomicDelete))throw Error(D(1935,`Unable to delete file '{0}' atomically because provider does not support it.`,this.resourceForError(e)));if(r&&i)throw Error(D(1936,`Unable to atomically delete file '{0}' because using trash is enabled.`,this.resourceForError(e)));let a;try{a=await n.stat(e)}catch{}if(a)this.throwIfFileIsReadonly(e,a);else throw new yb(D(1937,`Unable to delete nonexistent file '{0}'`,this.resourceForError(e)),Sb.FILE_NOT_FOUND);if(!t?.recursive){let t=await this.resolve(e);if(t.isDirectory&&Array.isArray(t.children)&&t.children.length>0)throw Error(D(1938,`Unable to delete non-empty folder '{0}'.`,this.resourceForError(e)))}return n}async del(e,t){let n=await this.doValidateDelete(e,t),r=t;if(sb(n)&&!r?.atomic){let i=n.enforceAtomicDelete?.(e);i&&(r={...t,atomic:i})}let i=!!r?.useTrash,a=!!r?.recursive,o=r?.atomic??!1;await n.delete(e,{recursive:a,useTrash:i,atomic:o}),this._onDidRunOperation.fire(new gb(e,hb.DELETE))}async cloneFile(e,t){let n=await this.withProvider(e),r=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(t),t);if(!(n===r&&this.getExtUri(n).providerExtUri.isEqual(e,t)))return n===r&&tb(n)?n.cloneFile(e,t):(await this.mkdirp(r,this.getExtUri(r).providerExtUri.dirname(t)),n===r&&eb(n)?this.writeQueue.queueFor(e,()=>n.copy(e,t,{overwrite:!0}),this.getExtUri(n).providerExtUri):this.writeQueue.queueFor(e,()=>this.doCopyFile(n,e,r,t),this.getExtUri(n).providerExtUri))}static#t=this.WATCHER_CORRELATION_IDS=0;createWatcher(e,t){return this.watch(e,{...t,correlationId:H5.WATCHER_CORRELATION_IDS++})}watch(e,t={recursive:!1,excludes:[]}){let n=new C,r=!1,i=()=>{r=!0};n.add(S(()=>i())),(async()=>{try{let n=await this.doWatch(e,t);r?Nn(n):i=()=>Nn(n)}catch(e){this.logService.error(e)}})();let a=t.correlationId;if(typeof a==`number`){let e=n.add(new E);return n.add(this.internalOnDidFilesChange.event(t=>{t.correlates(a)&&e.fire(t)})),{onDidChange:e.event,dispose:()=>n.dispose()}}return n}async doWatch(e,t){let n=await this.withProvider(e),r=hm([this.getExtUri(n).providerExtUri.getComparisonKey(e),t]),i=this.activeWatchers.get(r);return i||(i={count:0,disposable:n.watch(e,t)},this.activeWatchers.set(r,i)),i.count+=1,S(()=>{i&&(i.count--,i.count===0&&(Nn(i.disposable),this.activeWatchers.delete(r)))})}dispose(){super.dispose();for(let[,e]of this.activeWatchers)Nn(e.disposable);this.activeWatchers.clear()}async doWriteBuffered(e,t,n,r){return this.writeQueue.queueFor(t,async()=>{let i=await e.open(t,{create:!0,unlock:n?.unlock??!1,append:n?.append??!1});try{Ep(r)||Dp(r)?await this.doWriteStreamBufferedQueued(e,i,r):await this.doWriteReadableBufferedQueued(e,i,r)}catch(e){throw db(e)}finally{await e.close(i)}},this.getExtUri(e).providerExtUri)}async doWriteStreamBufferedQueued(e,t,n){let r=0,i;if(Dp(n)){if(n.buffer.length>0){let i=Up.concat(n.buffer);await this.doWriteBuffer(e,t,i,i.byteLength,r,0),r+=i.byteLength}if(n.ended)return;i=n.stream}else i=n;return new Promise((n,a)=>{Mp(i,{onData:async n=>{i.pause();try{await this.doWriteBuffer(e,t,n,n.byteLength,r,0)}catch(e){return a(e)}r+=n.byteLength,setTimeout(()=>i.resume())},onError:e=>a(e),onEnd:()=>n()})})}async doWriteReadableBufferedQueued(e,t,n){let r=0,i;for(;(i=n.read())!==null;)await this.doWriteBuffer(e,t,i,i.byteLength,r,0),r+=i.byteLength}async doWriteBuffer(e,t,n,r,i,a){let o=0;for(;o<r;){let s=await e.write(t,i+o,n.buffer,a+o,r-o);o+=s}}async doWriteUnbuffered(e,t,n,r){return this.writeQueue.queueFor(t,()=>this.doWriteUnbufferedQueued(e,t,n,r),this.getExtUri(e).providerExtUri)}async doWriteUnbufferedQueued(e,t,n,r){let i;i=r instanceof Up?r:Ep(r)?await tm(r):Dp(r)?await nm(r):$p(r),await e.writeFile(t,i.buffer,{create:!0,overwrite:!0,unlock:n?.unlock??!1,atomic:n?.atomic??!1,append:n?.append??!1})}async doPipeBuffered(e,t,n,r){return this.writeQueue.queueFor(r,()=>this.doPipeBufferedQueued(e,t,n,r),this.getExtUri(n).providerExtUri)}async doPipeBufferedQueued(e,t,n,r){let i,a;try{i=await e.open(t,{create:!1}),a=await n.open(r,{create:!0,unlock:!1});let o=Up.alloc(this.BUFFER_SIZE),s=0,c=0,l=0;do l=await e.read(i,s,o.buffer,c,o.byteLength-c),await this.doWriteBuffer(n,a,o,l,s,c),s+=l,c+=l,c===o.byteLength&&(c=0);while(l>0)}catch(e){throw db(e)}finally{await Ac.settled([typeof i==`number`?e.close(i):Promise.resolve(),typeof a==`number`?n.close(a):Promise.resolve()])}}async doPipeUnbuffered(e,t,n,r){return this.writeQueue.queueFor(r,()=>this.doPipeUnbufferedQueued(e,t,n,r),this.getExtUri(n).providerExtUri)}async doPipeUnbufferedQueued(e,t,n,r){return n.writeFile(r,await e.readFile(t),{create:!0,overwrite:!0,unlock:!1,atomic:!1})}async doPipeUnbufferedToBuffered(e,t,n,r){return this.writeQueue.queueFor(r,()=>this.doPipeUnbufferedToBufferedQueued(e,t,n,r),this.getExtUri(n).providerExtUri)}async doPipeUnbufferedToBufferedQueued(e,t,n,r){let i=await n.open(r,{create:!0,unlock:!1});try{let r=await e.readFile(t);await this.doWriteBuffer(n,i,Up.wrap(r),r.byteLength,0,0)}catch(e){throw db(e)}finally{await n.close(i)}}async doPipeBufferedToUnbuffered(e,t,n,r){let i=await tm(this.readFileBuffered(e,t,Fr.None));await this.doWriteUnbuffered(n,r,void 0,i)}throwIfFileSystemIsReadonly(e,t){if(e.capabilities&Zy.Readonly)throw new yb(D(1939,`Unable to modify read-only file '{0}'`,this.resourceForError(t)),Sb.FILE_PERMISSION_DENIED);return e}throwIfFileIsReadonly(e,t){if((t.permissions??0)&Yy.Readonly)throw new yb(D(1939,`Unable to modify read-only file '{0}'`,this.resourceForError(e)),Sb.FILE_PERMISSION_DENIED)}resourceForError(e){return U5(e)}};G5=H5=t([n(0,Lb)],G5);var K5=class{constructor(e){this.type=Jy.File,this.ctime=Date.now(),this.mtime=Date.now(),this.size=0,this.name=e}},q5=class{constructor(e){this.type=Jy.Directory,this.ctime=Date.now(),this.mtime=Date.now(),this.size=0,this.name=e,this.entries=new Map}},J5=class extends w{constructor(){super(...arguments),this.memoryFdCounter=0,this.fdMemory=new Map,this._onDidChangeCapabilities=this._register(new E),this.onDidChangeCapabilities=this._onDidChangeCapabilities.event,this._capabilities=Zy.FileReadWrite|Zy.FileOpenReadWriteClose|Zy.FileAppend|Zy.PathCaseSensitive,this.root=new q5(``),this._onDidChangeFile=this._register(new E),this.onDidChangeFile=this._onDidChangeFile.event,this._bufferedChanges=[]}get capabilities(){return this._capabilities}setReadOnly(e){e!==!!(this._capabilities&Zy.Readonly)&&(this._capabilities=Zy.FileReadWrite|Zy.FileAppend|Zy.PathCaseSensitive|(e?Zy.Readonly:0),this._onDidChangeCapabilities.fire())}async stat(e){return this._lookup(e,!1)}async readdir(e){let t=this._lookupAsDirectory(e,!1),n=[];return t.entries.forEach((e,t)=>n.push([t,e.type])),n}async readFile(e){let t=this._lookupAsFile(e,!1).data;if(t)return t;throw ub(`file not found`,H.FileNotFound)}readFileStream(e){let t=this._lookupAsFile(e,!1).data,n=Op(e=>Up.concat(e.map(e=>Up.wrap(e))).buffer);return n.end(t),n}async writeFile(e,t,n){let r=Ms(e),i=this._lookupParentDirectory(e),a=i.entries.get(r);if(a instanceof q5)throw ub(`file is directory`,H.FileIsADirectory);if(!a&&!n.create)throw ub(`file not found`,H.FileNotFound);if(a&&n.create&&!n.overwrite)throw ub(`file exists already`,H.FileExists);if(a||(a=new K5(r),i.entries.set(r,a),this._fireSoon({type:_b.ADDED,resource:e})),a.mtime=Date.now(),n.append){a.size+=t.byteLength;let e=a.data??new Uint8Array,n=new Uint8Array(e.byteLength+t.byteLength);n.set(e,0),n.set(t,e.byteLength),a.data=n}else a.size=t.byteLength,a.data=t;this._fireSoon({type:_b.UPDATED,resource:e})}open(e,t){let n=this._lookup(e,!0),r=qy(t),i=r&&!!t.append;if(n){if(n instanceof q5)throw ub(`file is directory`,H.FileIsADirectory)}else{if(!r)throw ub(`file not found`,H.FileNotFound);let t=Ms(e),i=this._lookupParentDirectory(e);n=new K5(t),n.data=new Uint8Array,i.entries.set(t,n),this._fireSoon({type:_b.ADDED,resource:e})}n.data||=new Uint8Array;let a=this.memoryFdCounter++;return this.fdMemory.set(a,{file:n,resource:e,write:r,append:i}),Promise.resolve(a)}close(e){let t=this.fdMemory.get(e);return t?.write&&(t.file.mtime=Date.now(),t.file.size=t.file.data?.byteLength??0,this._fireSoon({type:_b.UPDATED,resource:t.resource})),this.fdMemory.delete(e),Promise.resolve()}read(e,t,n,r,i){let a=this.fdMemory.get(e);if(!a)throw ub(`No file with that descriptor open`,H.Unavailable);if(!a.file.data)return Promise.resolve(0);let o=Up.wrap(a.file.data).slice(t,t+i);return n.set(o.buffer,r),Promise.resolve(o.byteLength)}write(e,t,n,r,i){let a=this.fdMemory.get(e);if(!a)throw ub(`No file with that descriptor open`,H.Unavailable);let o=Up.wrap(n).slice(r,r+i);a.file.data??=new Uint8Array;let s=a.append?a.file.data.byteLength:t,c=s+o.byteLength;if(c>a.file.data.byteLength){let e=new Uint8Array(c);e.set(a.file.data,0),a.file.data=e}return a.file.data.set(o.buffer,s),Promise.resolve(o.byteLength)}async rename(e,t,n){if(!n.overwrite&&this._lookup(t,!0))throw ub(`file exists already`,H.FileExists);let r=this._lookup(e,!1),i=this._lookupParentDirectory(e),a=this._lookupParentDirectory(t),o=Ms(t);i.entries.delete(r.name),r.name=o,a.entries.set(o,r),this._fireSoon({type:_b.DELETED,resource:e},{type:_b.ADDED,resource:t})}async delete(e,t){let n=Ps(e),r=Ms(e),i=this._lookupAsDirectory(n,!1);i.entries.delete(r)&&(i.mtime=Date.now(),--i.size,this._fireSoon({type:_b.UPDATED,resource:n},{resource:e,type:_b.DELETED}))}async mkdir(e){if(this._lookup(e,!0))throw ub(`file exists already`,H.FileExists);let t=Ms(e),n=Ps(e),r=this._lookupAsDirectory(n,!1),i=new q5(t);r.entries.set(i.name,i),r.mtime=Date.now(),r.size+=1,this._fireSoon({type:_b.UPDATED,resource:n},{type:_b.ADDED,resource:e})}_lookup(e,t){let n=e.path.split(`/`),r=this.root;for(let e of n){if(!e)continue;let n;if(r instanceof q5&&(n=r.entries.get(e)),!n){if(t)return;throw ub(`file not found`,H.FileNotFound)}r=n}return r}_lookupAsDirectory(e,t){let n=this._lookup(e,t);if(n instanceof q5)return n;throw ub(`file not a directory`,H.FileNotADirectory)}_lookupAsFile(e,t){let n=this._lookup(e,t);if(n instanceof K5)return n;throw ub(`file is a directory`,H.FileIsADirectory)}_lookupParentDirectory(e){let t=Ps(e);return this._lookupAsDirectory(t,!1)}watch(e,t){return w.None}_fireSoon(...e){this._bufferedChanges.push(...e),this._fireSoonHandle&&clearTimeout(this._fireSoonHandle),this._fireSoonHandle=setTimeout(()=>{this._onDidChangeFile.fire(this._bufferedChanges),this._bufferedChanges.length=0},5)}dispose(){super.dispose(),this.fdMemory.clear()}},Y5=ub(D(1907,`File does not exist`),H.FileNotFound),Hoe=ub(D(1908,`File is Directory`),H.FileIsADirectory),X5=ub(D(1909,`File is not a directory`),H.FileNotADirectory),Uoe=ub(D(1910,`Directory is not empty`),H.Unknown),Woe=ub(D(1911,`File exceeds available storage quota`),H.FileExceedsStorageQuota),Z5=e=>ub(D(1912,`Internal error occurred in IndexedDB File System Provider. ({0})`,e),H.Unknown),Goe=class e{constructor(e){this.entry=e,this.type=e.type}read(e){return this.doRead(e.split(`/`).filter(e=>e.length))}doRead(e){if(e.length===0)return this.entry;if(this.entry.type!==Jy.Directory)throw Z5(`Internal error reading from IndexedDBFSNode -- expected directory at `+this.entry.path);let t=this.entry.children.get(e[0]);if(t)return t.doRead(e.slice(1))}delete(e){let t=e.split(`/`).filter(e=>e.length);if(t.length===0){if(this.entry.type!==Jy.Directory)throw Z5(`Internal error deleting from IndexedDBFSNode. Expected root entry to be directory`);this.entry.children.clear()}else return this.doDelete(t,e)}doDelete(e,t){if(e.length===0)throw Z5(`Internal error deleting from IndexedDBFSNode -- got no deletion path parts (encountered while deleting ${t})`);if(this.entry.type!==Jy.Directory)throw Z5(`Internal error deleting from IndexedDBFSNode -- expected directory at `+this.entry.path);if(e.length===1)this.entry.children.delete(e[0]);else{let n=this.entry.children.get(e[0]);if(!n)throw Z5(`Internal error deleting from IndexedDBFSNode -- expected entry at `+this.entry.path+`/`+n);n.doDelete(e.slice(1),t)}}add(e,t){this.doAdd(e.split(`/`).filter(e=>e.length),t,e)}doAdd(t,n,r){if(t.length===0)throw Z5(`Internal error creating IndexedDBFSNode -- adding empty path (encountered while adding ${r})`);if(this.entry.type!==Jy.Directory)throw Z5(`Internal error creating IndexedDBFSNode -- parent is not a directory (encountered while adding ${r})`);if(t.length===1){let i=t[0],a=this.entry.children.get(i);if(n.type===`dir`){if(a?.entry.type===Jy.File)throw Z5(`Internal error creating IndexedDBFSNode -- overwriting file with directory: ${this.entry.path}/${i} (encountered while adding ${r})`);this.entry.children.set(i,a??new e({type:Jy.Directory,path:this.entry.path+`/`+i,children:new Map}))}else{if(a?.entry.type===Jy.Directory)throw Z5(`Internal error creating IndexedDBFSNode -- overwriting directory with file: ${this.entry.path}/${i} (encountered while adding ${r})`);this.entry.children.set(i,new e({type:Jy.File,path:this.entry.path+`/`+i,size:n.size}))}}else if(t.length>1){let i=t[0],a=this.entry.children.get(i);if(!a)a=new e({children:new Map,path:this.entry.path+`/`+i,type:Jy.Directory}),this.entry.children.set(i,a);else if(a.type===Jy.File)throw Z5(`Internal error creating IndexedDBFSNode -- overwriting file entry with directory: ${this.entry.path}/${i} (encountered while adding ${r})`);a.doAdd(t.slice(1),n,r)}}print(e=``){console.log(e+this.entry.path),this.entry.type===Jy.Directory&&this.entry.children.forEach(t=>t.print(e+` `))}},Q5=class extends w{constructor(e,t,n,r){super(),this.scheme=e,this.indexedDB=t,this.store=n,this.capabilities=Zy.FileReadWrite|Zy.FileAppend|Zy.PathCaseSensitive,this.onDidChangeCapabilities=T.None,this.extUri=new Ts(()=>!1),this._onDidChangeFile=this._register(new E),this.onDidChangeFile=this._onDidChangeFile.event,this.mtimes=new Map,this.fileWriteBatch=[],this.writeManyThrottler=new rc,r&&(this.changesBroadcastChannel=this._register(new lH(`vscode.indexedDB.${e}.changes`)),this._register(this.changesBroadcastChannel.onDidReceiveData(e=>{this._onDidChangeFile.fire(e.map(e=>({type:e.type,resource:k.revive(e.resource)})))})))}watch(e,t){return w.None}async mkdir(e){try{if((await this.stat(e)).type===Jy.File)throw X5}catch{}(await this.getFiletree()).add(e.path,{type:`dir`})}async stat(e){let t=(await this.getFiletree()).read(e.path);if(t?.type===Jy.File)return{type:Jy.File,ctime:0,mtime:this.mtimes.get(e.toString())||0,size:t.size??(await this.readFile(e)).byteLength};if(t?.type===Jy.Directory)return{type:Jy.Directory,ctime:0,mtime:0,size:0};throw Y5}async readdir(e){let t=(await this.getFiletree()).read(e.path);if(!t)return[];if(t.type!==Jy.Directory)throw X5;return[...t.children.entries()].map(([e,t])=>[e,t.type])}async readFile(e){let t=await this.indexedDB.runInTransaction(this.store,`readonly`,t=>t.get(e.path));if(t===void 0)throw Y5;let n=t instanceof Uint8Array?t:ge(t)?Up.fromString(t).buffer:void 0;if(n===void 0)throw Z5(`IndexedDB entry at "${e.path}" in unexpected format`);return(await this.getFiletree()).add(e.path,{type:`file`,size:n.byteLength}),n}async writeFile(e,t,n){let r=await this.stat(e).catch(()=>void 0);if(r?.type===Jy.Directory)throw Hoe;let i=t;if(n.append&&r){let n=await this.readFile(e),r=new Uint8Array(n.byteLength+t.byteLength);r.set(n,0),r.set(t,n.byteLength),i=r}await this.bulkWrite([[e,i]])}async rename(e,t,n){let r=await this.getFiletree(),i=r.read(e.path);if(!i)throw Y5;let a=r.read(t.path);if(a){if(!n.overwrite)throw ub(`file exists already`,H.FileExists);if(a.type!==i.type)throw ub(`Cannot rename files with different types`,H.Unknown);await this.delete(t,{recursive:!0,useTrash:!1,atomic:!1})}let o=n=>this.extUri.joinPath(t,this.extUri.relativePath(e,e.with({path:n}))||``),s=await this.tree(e),c=[];for(let e of s)e[1]===Jy.File?c.push(e):e[1]===Jy.Directory&&r.add(o(e[0]).path,{type:`dir`});if(c.length){let e=[],t=await this.indexedDB.runInTransaction(this.store,`readonly`,e=>c.map(([t])=>e.get(t)));for(let n=0;n<c.length;n++){let r=t[n]instanceof Uint8Array?t[n]:ge(t[n])?Up.fromString(t[n]).buffer:void 0;r&&e.push([o(c[n][0]),r])}await this.bulkWrite(e)}await this.delete(e,{recursive:!0,useTrash:!1,atomic:!1})}async delete(e,t){let n;try{n=await this.stat(e)}catch(e){if(e.code===H.FileNotFound)return;throw e}let r;if(t.recursive)r=(await this.tree(e)).map(([e])=>e);else{if(n.type===Jy.Directory&&(await this.readdir(e)).length)throw Uoe;r=[e.path]}await this.deleteKeys(r),(await this.getFiletree()).delete(e.path),r.forEach(e=>this.mtimes.delete(e)),this.triggerChanges(r.map(t=>({resource:e.with({path:t}),type:_b.DELETED})))}async tree(e){let t=await this.stat(e),n=[[e.path,t.type]];if(t.type===Jy.Directory){let t=await this.readdir(e);for(let[r,i]of t){let t=this.extUri.joinPath(e,r);if(n.push([t.path,i]),i===Jy.Directory){let e=await this.tree(t);n.push(...e)}}}return n}triggerChanges(e){e.length&&(this._onDidChangeFile.fire(e),this.changesBroadcastChannel?.postData(e))}getFiletree(){return this.cachedFiletree||=(async()=>{let e=new Goe({children:new Map,path:``,type:Jy.Directory});return(await this.indexedDB.runInTransaction(this.store,`readonly`,e=>e.getAllKeys())).map(e=>e.toString()).forEach(t=>e.add(t,{type:`file`})),e})(),this.cachedFiletree}async bulkWrite(e){e.forEach(([e,t])=>this.fileWriteBatch.push({content:t,resource:e})),await this.writeManyThrottler.queue(()=>this.writeMany());let t=await this.getFiletree();for(let[n,r]of e)t.add(n.path,{type:`file`,size:r.byteLength}),this.mtimes.set(n.toString(),Date.now());this.triggerChanges(e.map(([e])=>({resource:e,type:_b.UPDATED})))}async writeMany(){if(this.fileWriteBatch.length){let e=this.fileWriteBatch.splice(0,this.fileWriteBatch.length);try{await this.indexedDB.runInTransaction(this.store,`readwrite`,t=>e.map(e=>t.put(e.content,e.resource.path)))}catch(e){throw e instanceof DOMException&&e.name===`QuotaExceededError`?Woe:e}}}async deleteKeys(e){e.length&&await this.indexedDB.runInTransaction(this.store,`readwrite`,t=>e.map(e=>t.delete(e)))}async reset(){await this.indexedDB.runInTransaction(this.store,`readwrite`,e=>e.clear())}},$5=class extends Error{constructor(e){super(`Missing stores`),this.db=e}},e7=class extends Error{constructor(e){super(`IndexedDB database '${e}' is closed.`),this.code=`DBClosed`}},t7=class e{static async create(t,n,r){return new e(await e.openDatabase(t,n,r),t)}static async openDatabase(t,n,r){kv(`code/willOpenDatabase/${t}`);try{return await e.doOpenDatabase(t,n,r)}catch(i){if(i instanceof $5){console.info(`Attempting to recreate the IndexedDB once.`,t);try{await e.deleteDatabase(i.db)}catch(e){throw console.error(`Error while deleting the IndexedDB`,oe(e)),e}return await e.doOpenDatabase(t,n,r)}throw i}finally{kv(`code/didOpenDatabase/${t}`)}}static doOpenDatabase(e,t,n){return new Promise((r,i)=>{let a=indexedDB.open(e,t);a.onerror=()=>i(a.error),a.onsuccess=()=>{let e=a.result;for(let t of n)if(!e.objectStoreNames.contains(t)){console.error(`Error while opening IndexedDB. Could not find '${t}'' object store`),i(new $5(e));return}r(e)},a.onupgradeneeded=()=>{let e=a.result;for(let t of n)e.objectStoreNames.contains(t)||e.createObjectStore(t)}})}static deleteDatabase(e){return new Promise((t,n)=>{e.close();let r=indexedDB.deleteDatabase(e.name);r.onerror=e=>n(r.error),r.onsuccess=()=>t()})}constructor(e,t){this.name=t,this.database=null,this.pendingTransactions=[],this.database=e}hasPendingTransactions(){return this.pendingTransactions.length>0}close(){this.pendingTransactions.length&&this.pendingTransactions.splice(0,this.pendingTransactions.length).forEach(e=>e.abort()),this.database?.close(),this.database=null}async runInTransaction(e,t,n){if(!this.database)throw new e7(this.name);let r=this.database.transaction(e,t);return this.pendingTransactions.push(r),new Promise((t,i)=>{r.oncomplete=()=>{t(Array.isArray(a)?a.map(e=>e.result):a.result)},r.onerror=()=>i(r.error?le.fromError(r.error):new le(`unknown error`)),r.onabort=()=>i(r.error?le.fromError(r.error):new le(`unknown error`));let a=n(r.objectStore(e))}).finally(()=>this.pendingTransactions.splice(this.pendingTransactions.indexOf(r),1))}async getKeyValues(e,t){if(!this.database)throw new e7(this.name);let n=this.database.transaction(e,`readonly`);return this.pendingTransactions.push(n),new Promise(r=>{let i=new Map,a=n.objectStore(e).openCursor();if(!a)return r(i);a.onsuccess=()=>{a.result?(t(a.result.value)&&i.set(a.result.key.toString(),a.result.value),a.result.continue()):r(i)};let o=e=>{console.error(`IndexedDB getKeyValues(): ${Jx(e,!0)}`),r(i)};a.onerror=()=>o(a.error),n.onerror=()=>o(n.error)}).finally(()=>this.pendingTransactions.splice(this.pendingTransactions.indexOf(n),1))}},n7=class extends KV{constructor(e=VV){super(),this.buffer=[],this._logger=void 0,this._logLevelDisposable=this._register(new Ln),this.setLevel(e)}set logger(e){this._logger=e,this.setLevel(e.getLevel()),this._logLevelDisposable.value=e.onDidChangeLogLevel(this.setLevel,this);for(let{level:t,message:n}of this.buffer)UV(e,t,n);this.buffer=[]}log(e,t){this._logger?UV(this._logger,e,t):this.getLevel()<=e&&this.buffer.push({level:e,message:t})}dispose(){this._logger?.dispose(),super.dispose()}flush(){this._logger?.flush()}},r7=V(`workingCopyBackupService`),i7;(function(e){e[e.None=0]=`None`,e[e.Untitled=2]=`Untitled`,e[e.Scratchpad=4]=`Scratchpad`})(i7||={});var Koe=``,a7=`utf8`,o7=`utf8bom`,s7=`utf16be`,c7=`utf16le`,l7=[254,255],u7=[255,254],d7=[239,187,191],qoe=512,Joe=512,Yoe=512*8,Xoe=512*128,f7;(function(e){e[e.STREAM_IS_BINARY=1]=`STREAM_IS_BINARY`})(f7||={});var Zoe=class extends Error{constructor(e,t){super(e),this.decodeStreamErrorKind=t}},Qoe=class t{static async create(n){let r;if(n!==`utf8`)r=(await V3(()=>import(`./iconv-lite-umd-JNytzGrV.js`).then(e(1)),__vite__mapDeps([0,1]))).getDecoder(h7(n));else{let e=new TextDecoder;r={write(t){return e.decode(t,{stream:!0})},end(){return e.decode()}}}return new t(r)}constructor(e){this.iconvLiteDecoder=e}write(e){return this.iconvLiteDecoder.write(e)}end(){return this.iconvLiteDecoder.end()}};function p7(e,t){let n=t.minBytesRequiredForDetection??(t.guessEncoding?Yoe:Joe);return new Promise((r,i)=>{let a=Op(e=>e.join(``)),o=[],s=0,c,l=new Lr,u=async()=>{try{let e=await sse({buffer:Up.concat(o),bytesRead:s},t.guessEncoding,t.candidateGuessEncodings);if(e.seemsBinary&&t.acceptTextOnly)throw new Zoe(`Stream is binary but only text is accepted for decoding`,f7.STREAM_IS_BINARY);e.encoding=await t.overwriteEncoding(e.encoding),c=await Qoe.create(e.encoding);let n=c.write(Up.concat(o).buffer);a.write(n),o.length=0,s=0,r({stream:a,detected:e})}catch(e){l.cancel(),a.destroy(),i(e)}};Mp(e,{onData:async t=>{c?a.write(c.write(t.buffer)):(o.push(t),s+=t.byteLength,s>=n&&(e.pause(),await u(),setTimeout(()=>e.resume())))},onError:e=>a.error(e),onEnd:async()=>{c||await u(),a.end(c?.end())}},l.token)})}async function m7(t,n,r){let i=(await V3(()=>import(`./iconv-lite-umd-JNytzGrV.js`).then(e(1)),__vite__mapDeps([0,1]))).getEncoder(h7(n),r),a=!1,o=!1;return{read(){if(o)return null;let e=t.read();if(typeof e!=`string`){if(o=!0,!a&&r?.addBOM)switch(n){case a7:case o7:return Up.wrap(Uint8Array.from(d7));case s7:return Up.wrap(Uint8Array.from(l7));case c7:return Up.wrap(Uint8Array.from(u7))}let e=i.end();return e&&e.length>0?(a=!0,Up.wrap(e)):null}return a=!0,Up.wrap(i.write(e))}}}async function $oe(t){return(await V3(()=>import(`./iconv-lite-umd-JNytzGrV.js`).then(e(1)),__vite__mapDeps([0,1]))).encodingExists(h7(t))}function h7(e){return e===`utf8bom`||e===null?a7:e}function ese(e,t){if(!e||t<l7.length)return null;let n=e.readUInt8(0),r=e.readUInt8(1);if(n===l7[0]&&r===l7[1])return s7;if(n===u7[0]&&r===u7[1])return c7;if(t<d7.length)return null;let i=e.readUInt8(2);return n===d7[0]&&r===d7[1]&&i===d7[2]?o7:null}var tse=[`ascii`,`utf-16`,`utf-32`];async function nse(t,n){let r=await V3(()=>import(`./jschardet-BRWYG3x_.js`).then(e(1)),__vite__mapDeps([2,1])),i=ose(t.slice(0,Xoe).buffer);n&&(n=wt(n.map(e=>ase(e))),n.length===0&&(n=void 0));let a;try{a=r.detect(i,n?{detectEncodings:n}:void 0)}catch{return null}if(!a?.encoding)return null;let o=a.encoding.toLowerCase();return 0<=tse.indexOf(o)?null:ise(a.encoding)}var rse={ibm866:`cp866`,big5:`cp950`};function g7(e){return e.replace(/[^a-zA-Z0-9]/g,``).toLowerCase()}function ise(e){let t=g7(e);return rse[t]||t}function ase(e){let t=v7[g7(e)];return t?t.guessableName:void 0}function ose(e){let t=``;for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}function sse({buffer:e,bytesRead:t},n,r){let i=ese(e,t),a=!1;if(i!==`utf16be`&&i!==`utf16le`&&e){let n=!0,r=!0,o=!1;for(let i=0;i<t&&i<qoe;i++){let t=i%2==1,a=e.readUInt8(i)===0;if(a&&(o=!0),n&&(t&&!a||!t&&a)&&(n=!1),r&&(t&&a||!t&&!a)&&(r=!1),a&&!n&&!r)break}o&&(n?i=c7:r?i=s7:a=!0)}return n&&!a&&!i&&e?nse(e.slice(0,t),r).then(e=>({seemsBinary:!1,encoding:e})):{seemsBinary:a,encoding:i}}var _7={utf8:{labelLong:`UTF-8`,labelShort:`UTF-8`,order:1,alias:`utf8bom`,guessableName:`UTF-8`},utf8bom:{labelLong:`UTF-8 with BOM`,labelShort:`UTF-8 with BOM`,encodeOnly:!0,order:2,alias:`utf8`},utf16le:{labelLong:`UTF-16 LE`,labelShort:`UTF-16 LE`,order:3,guessableName:`UTF-16LE`},utf16be:{labelLong:`UTF-16 BE`,labelShort:`UTF-16 BE`,order:4,guessableName:`UTF-16BE`},windows1252:{labelLong:`Western (Windows 1252)`,labelShort:`Windows 1252`,order:5,guessableName:`windows-1252`},iso88591:{labelLong:`Western (ISO 8859-1)`,labelShort:`ISO 8859-1`,order:6},iso88593:{labelLong:`Western (ISO 8859-3)`,labelShort:`ISO 8859-3`,order:7},iso885915:{labelLong:`Western (ISO 8859-15)`,labelShort:`ISO 8859-15`,order:8},macroman:{labelLong:`Western (Mac Roman)`,labelShort:`Mac Roman`,order:9},cp437:{labelLong:`DOS (CP 437)`,labelShort:`CP437`,order:10},windows1256:{labelLong:`Arabic (Windows 1256)`,labelShort:`Windows 1256`,order:11},iso88596:{labelLong:`Arabic (ISO 8859-6)`,labelShort:`ISO 8859-6`,order:12},windows1257:{labelLong:`Baltic (Windows 1257)`,labelShort:`Windows 1257`,order:13},iso88594:{labelLong:`Baltic (ISO 8859-4)`,labelShort:`ISO 8859-4`,order:14},iso885914:{labelLong:`Celtic (ISO 8859-14)`,labelShort:`ISO 8859-14`,order:15},windows1250:{labelLong:`Central European (Windows 1250)`,labelShort:`Windows 1250`,order:16,guessableName:`windows-1250`},iso88592:{labelLong:`Central European (ISO 8859-2)`,labelShort:`ISO 8859-2`,order:17,guessableName:`ISO-8859-2`},cp852:{labelLong:`Central European (CP 852)`,labelShort:`CP 852`,order:18},windows1251:{labelLong:`Cyrillic (Windows 1251)`,labelShort:`Windows 1251`,order:19,guessableName:`windows-1251`},cp866:{labelLong:`Cyrillic (CP 866)`,labelShort:`CP 866`,order:20,guessableName:`IBM866`},cp1125:{labelLong:`Cyrillic (CP 1125)`,labelShort:`CP 1125`,order:21,guessableName:`IBM1125`},iso88595:{labelLong:`Cyrillic (ISO 8859-5)`,labelShort:`ISO 8859-5`,order:22,guessableName:`ISO-8859-5`},koi8r:{labelLong:`Cyrillic (KOI8-R)`,labelShort:`KOI8-R`,order:23,guessableName:`KOI8-R`},koi8u:{labelLong:`Cyrillic (KOI8-U)`,labelShort:`KOI8-U`,order:24},iso885913:{labelLong:`Estonian (ISO 8859-13)`,labelShort:`ISO 8859-13`,order:25},windows1253:{labelLong:`Greek (Windows 1253)`,labelShort:`Windows 1253`,order:26,guessableName:`windows-1253`},iso88597:{labelLong:`Greek (ISO 8859-7)`,labelShort:`ISO 8859-7`,order:27,guessableName:`ISO-8859-7`},windows1255:{labelLong:`Hebrew (Windows 1255)`,labelShort:`Windows 1255`,order:28,guessableName:`windows-1255`},iso88598:{labelLong:`Hebrew (ISO 8859-8)`,labelShort:`ISO 8859-8`,order:29,guessableName:`ISO-8859-8`},iso885910:{labelLong:`Nordic (ISO 8859-10)`,labelShort:`ISO 8859-10`,order:30},iso885916:{labelLong:`Romanian (ISO 8859-16)`,labelShort:`ISO 8859-16`,order:31},windows1254:{labelLong:`Turkish (Windows 1254)`,labelShort:`Windows 1254`,order:32},iso88599:{labelLong:`Turkish (ISO 8859-9)`,labelShort:`ISO 8859-9`,order:33},windows1258:{labelLong:`Vietnamese (Windows 1258)`,labelShort:`Windows 1258`,order:34},gbk:{labelLong:`Simplified Chinese (GBK)`,labelShort:`GBK`,order:35},gb18030:{labelLong:`Simplified Chinese (GB18030)`,labelShort:`GB18030`,order:36},cp950:{labelLong:`Traditional Chinese (Big5)`,labelShort:`Big5`,order:37,guessableName:`Big5`},big5hkscs:{labelLong:`Traditional Chinese (Big5-HKSCS)`,labelShort:`Big5-HKSCS`,order:38},shiftjis:{labelLong:`Japanese (Shift JIS)`,labelShort:`Shift JIS`,order:39,guessableName:`SHIFT_JIS`},eucjp:{labelLong:`Japanese (EUC-JP)`,labelShort:`EUC-JP`,order:40,guessableName:`EUC-JP`},euckr:{labelLong:`Korean (EUC-KR)`,labelShort:`EUC-KR`,order:41,guessableName:`EUC-KR`},windows874:{labelLong:`Thai (Windows 874)`,labelShort:`Windows 874`,order:42},iso885911:{labelLong:`Latin/Thai (ISO 8859-11)`,labelShort:`ISO 8859-11`,order:43},koi8ru:{labelLong:`Cyrillic (KOI8-RU)`,labelShort:`KOI8-RU`,order:44},koi8t:{labelLong:`Tajik (KOI8-T)`,labelShort:`KOI8-T`,order:45},gb2312:{labelLong:`Simplified Chinese (GB 2312)`,labelShort:`GB 2312`,order:46,guessableName:`GB2312`},cp865:{labelLong:`Nordic DOS (CP 865)`,labelShort:`CP 865`,order:47},cp850:{labelLong:`Western European DOS (CP 850)`,labelShort:`CP 850`,order:48}},v7=(()=>{let e={};for(let t in _7)_7[t].guessableName&&(e[t]=_7[t]);return e})(),y7,b7=class extends UL{static#e=y7=this;static#t=this.FIRST_LINE_NAME_MAX_LENGTH=40;static#n=this.FIRST_LINE_NAME_CANDIDATE_MAX_LENGTH=this.FIRST_LINE_NAME_MAX_LENGTH*10;static#r=this.ACTIVE_EDITOR_LANGUAGE_ID="${activeEditorLanguage}";get name(){return this.configuredLabelFormat===`content`&&!this.hasAssociatedFilePath&&this.cachedModelFirstLineWords?this.cachedModelFirstLineWords:this.labelService.getUriBasenameLabel(this.resource)}constructor(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m){super(o,a,p,m),this.resource=e,this.hasAssociatedFilePath=t,this.initialValue=n,this.preferredLanguageId=r,this.preferredEncoding=i,this.workingCopyBackupService=s,this.textResourceConfigurationService=c,this.workingCopyService=l,this.textFileService=u,this.labelService=d,this.editorService=f,this._onDidChangeContent=this._register(new E),this.onDidChangeContent=this._onDidChangeContent.event,this._onDidChangeName=this._register(new E),this.onDidChangeName=this._onDidChangeName.event,this._onDidChangeDirty=this._register(new E),this.onDidChangeDirty=this._onDidChangeDirty.event,this._onDidChangeEncoding=this._register(new E),this.onDidChangeEncoding=this._onDidChangeEncoding.event,this._onDidSave=this._register(new E),this.onDidSave=this._onDidSave.event,this._onDidRevert=this._register(new E),this.onDidRevert=this._onDidRevert.event,this.typeId=``,this.capabilities=i7.Untitled,this.configuredLabelFormat=`content`,this.cachedModelFirstLineWords=void 0,this.ignoreDirtyOnModelContentChange=!1,this.dirty=this.hasAssociatedFilePath||!!this.initialValue,this._register(this.workingCopyService.registerWorkingCopy(this)),r&&this.setLanguageId(r),this.onConfigurationChange(void 0,!1),this.registerListeners()}registerListeners(){this._register(this.textResourceConfigurationService.onDidChangeConfiguration(e=>this.onConfigurationChange(e,!0)))}onConfigurationChange(e,t){if(!e||e.affectsConfiguration(this.resource,`files.encoding`)){let e=this.textResourceConfigurationService.getValue(this.resource,`files.encoding`);this.configuredEncoding!==e&&typeof e==`string`&&(this.configuredEncoding=e,t&&!this.preferredEncoding&&this._onDidChangeEncoding.fire())}if(!e||e.affectsConfiguration(this.resource,`workbench.editor.untitled.labelFormat`)){let e=this.textResourceConfigurationService.getValue(this.resource,`workbench.editor.untitled.labelFormat`);this.configuredLabelFormat!==e&&(e===`content`||e===`name`)&&(this.configuredLabelFormat=e,t&&this._onDidChangeName.fire())}}setLanguageId(e,t){let n=e===y7.ACTIVE_EDITOR_LANGUAGE_ID?this.editorService.activeTextEditorLanguageId:e;this.preferredLanguageId=n,n&&super.setLanguageId(n,t)}getLanguageId(){return this.textEditorModel?this.textEditorModel.getLanguageId():this.preferredLanguageId}getEncoding(){return this.preferredEncoding||this.configuredEncoding}async setEncoding(e){let t=this.getEncoding();this.preferredEncoding=e,t!==this.preferredEncoding&&this._onDidChangeEncoding.fire()}isDirty(){return this.dirty}isModified(){return this.isDirty()}setDirty(e){this.dirty!==e&&(this.dirty=e,this._onDidChangeDirty.fire())}async save(e){let t=await this.textFileService.save(this.resource,e);return t&&this._onDidSave.fire({reason:e?.reason,source:e?.source}),!!t}async revert(){this.ignoreDirtyOnModelContentChange=!0;try{this.updateTextEditorModel(V4(``))}finally{this.ignoreDirtyOnModelContentChange=!1}this.setDirty(!1),this._onDidRevert.fire()}async backup(e){let t;return this.isResolved()?t=await this.textFileService.getEncodedReadable(this.resource,this.createSnapshot()??void 0,{encoding:a7}):typeof this.initialValue==`string`&&(t=em(Up.fromString(this.initialValue))),{content:t}}async resolve(){let e=!1,t=!1;if(this.textEditorModel)this.updateTextEditorModel(void 0,this.preferredLanguageId);else{let n,r=await this.workingCopyBackupService.resolve(this);r?(n=r.value,t=!0):n=rm(Up.fromString(this.initialValue||``));let i=await H4(await this.textFileService.getDecodedStream(this.resource,n,{encoding:a7}));this.createTextEditorModel(i,this.resource,this.preferredLanguageId),e=!0}let n=Oe(this.textEditorModel);return this.installModelListeners(n),e&&((t||this.initialValue)&&this.updateNameFromFirstLine(n),this.setDirty(this.hasAssociatedFilePath||!!t||!!this.initialValue),(t||this.initialValue)&&this._onDidChangeContent.fire()),super.resolve()}isResolved(){return!!this.textEditorModelHandle}installModelListeners(e){this._register(e.onDidChangeContent(t=>this.onModelContentChanged(e,t))),this._register(e.onDidChangeLanguage(()=>this.onConfigurationChange(void 0,!0))),super.installModelListeners(e)}onModelContentChanged(e,t){this.ignoreDirtyOnModelContentChange||(!this.hasAssociatedFilePath&&e.getLineCount()===1&&e.getLineLength(1)===0?this.setDirty(!1):this.setDirty(!0)),t.changes.some(e=>(e.range.startLineNumber===1||e.range.endLineNumber===1)&&e.range.startColumn<=y7.FIRST_LINE_NAME_CANDIDATE_MAX_LENGTH)&&this.updateNameFromFirstLine(e),this._onDidChangeContent.fire(),this.autoDetectLanguage()}updateNameFromFirstLine(e){if(this.hasAssociatedFilePath)return;let t,n=e.getValueInRange({startLineNumber:1,endLineNumber:1,startColumn:1,endColumn:y7.FIRST_LINE_NAME_CANDIDATE_MAX_LENGTH+1}).trim().replace(/\s+/g,` `).replace(/\u202E/g,``);n=n.substr(0,go(n,y7.FIRST_LINE_NAME_MAX_LENGTH)[0]),n&&Dz().exec(n)&&(t=n),t!==this.cachedModelFirstLineWords&&(this.cachedModelFirstLineWords=t,this._onDidChangeName.fire())}isReadonly(){return!1}};b7=y7=t([n(5,FI),n(6,II),n(7,r7),n(8,Lq),n(9,Uq),n(10,cH),n(11,sH),n(12,hL),n(13,BL),n(14,VL)],b7);var x7,S7=class extends UL{static#e=x7=this;static#t=this.TEXTFILE_SAVE_ENCODING_SOURCE=QI.registerSource(`textFileEncoding.source`,D(14893,`File Encoding Changed`));static#n=this.UNDO_REDO_SAVE_PARTICIPANTS_AUTO_SAVE_THROTTLE_THRESHOLD=500;constructor(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g){super(i,r,f,p),this.resource=e,this.preferredEncoding=t,this.preferredLanguageId=n,this.fileService=a,this.textFileService=o,this.workingCopyBackupService=s,this.logService=c,this.workingCopyService=l,this.filesConfigurationService=u,this.labelService=d,this.pathService=m,this.extensionService=h,this.progressService=g,this._onDidChangeContent=this._register(new E),this.onDidChangeContent=this._onDidChangeContent.event,this._onDidResolve=this._register(new E),this.onDidResolve=this._onDidResolve.event,this._onDidChangeDirty=this._register(new E),this.onDidChangeDirty=this._onDidChangeDirty.event,this._onDidSaveError=this._register(new E),this.onDidSaveError=this._onDidSaveError.event,this._onDidSave=this._register(new E),this.onDidSave=this._onDidSave.event,this._onDidRevert=this._register(new E),this.onDidRevert=this._onDidRevert.event,this._onDidChangeEncoding=this._register(new E),this.onDidChangeEncoding=this._onDidChangeEncoding.event,this._onDidChangeOrphaned=this._register(new E),this.onDidChangeOrphaned=this._onDidChangeOrphaned.event,this._onDidChangeReadonly=this._register(new E),this.onDidChangeReadonly=this._onDidChangeReadonly.event,this.typeId=``,this.capabilities=i7.None,this.versionId=0,this.ignoreDirtyOnModelContentChange=!1,this.ignoreSaveFromSaveParticipants=!1,this.lastModelContentChangeFromUndoRedo=void 0,this.saveSequentializer=new Ec,this.dirty=!1,this.inConflictMode=!1,this.inOrphanMode=!1,this.inErrorMode=!1,this.hasEncodingSetExplicitly=!1,this.name=pa(this.labelService.getUriLabel(this.resource)),this.resourceHasExtension=!!Es.extname(this.resource),this._register(this.workingCopyService.registerWorkingCopy(this)),this.registerListeners()}registerListeners(){this._register(this.fileService.onDidFilesChange(e=>this.onDidFilesChange(e))),this._register(this.filesConfigurationService.onDidChangeFilesAssociation(()=>this.onDidChangeFilesAssociation())),this._register(this.filesConfigurationService.onDidChangeReadonly(()=>this._onDidChangeReadonly.fire()))}async onDidFilesChange(e){let t=!1,n;if(this.inOrphanMode?e.contains(this.resource,_b.ADDED)&&(n=!1,t=!0):e.contains(this.resource,_b.DELETED)&&(n=!0,t=!0),t&&this.inOrphanMode!==n){let e=!1;n&&(await dc(100,Fr.None),e=this.isDisposed()?!0:!await this.fileService.exists(this.resource)),this.inOrphanMode!==e&&!this.isDisposed()&&this.setOrphaned(e)}}setOrphaned(e){this.inOrphanMode!==e&&(this.inOrphanMode=e,this._onDidChangeOrphaned.fire())}onDidChangeFilesAssociation(){if(!this.isResolved())return;let e=this.getFirstLineText(this.textEditorModel),t=this.getOrCreateLanguage(this.resource,this.languageService,this.preferredLanguageId,e);this.textEditorModel.setLanguage(t)}setLanguageId(e,t){super.setLanguageId(e,t),this.preferredLanguageId=e}async backup(e){let t;this.lastResolvedFileStat&&(t={mtime:this.lastResolvedFileStat.mtime,ctime:this.lastResolvedFileStat.ctime,size:this.lastResolvedFileStat.size,etag:this.lastResolvedFileStat.etag,orphaned:this.inOrphanMode});let n=await this.textFileService.getEncodedReadable(this.resource,this.createSnapshot()??void 0,{encoding:a7});return{meta:t,content:n}}async revert(e){if(!this.isResolved())return;let t=this.dirty,n=this.doSetDirty(!1);if(!e?.soft)try{await this.forceResolveFromFile()}catch(e){if(e.fileOperationResult!==Sb.FILE_NOT_FOUND)throw n(),e}this._onDidRevert.fire(),t&&this._onDidChangeDirty.fire()}async resolve(e){if(this.trace(`resolve() - enter`),kv(`code/willResolveTextFileEditorModel`),this.isDisposed()){this.trace(`resolve() - exit - without resolving because model is disposed`);return}if(!e?.contents&&(this.dirty||this.saveSequentializer.isRunning())){this.trace(`resolve() - exit - without resolving because model is dirty or being saved`);return}await this.doResolve(e),kv(`code/didResolveTextFileEditorModel`)}async doResolve(e){if(e?.contents)return this.resolveFromBuffer(e.contents,e);if(!(!this.isResolved()&&await this.resolveFromBackup(e)))return this.resolveFromFile(e)}async resolveFromBuffer(e,t){this.trace(`resolveFromBuffer()`);let n,r,i,a;try{let e=await this.fileService.stat(this.resource);n=e.mtime,r=e.ctime,i=e.size,a=e.etag,this.setOrphaned(!1)}catch(e){n=Date.now(),r=Date.now(),i=0,a=``,this.setOrphaned(e.fileOperationResult===Sb.FILE_NOT_FOUND)}let o=await this.textFileService.encoding.getPreferredWriteEncoding(this.resource,this.preferredEncoding);this.resolveFromContent({resource:this.resource,name:this.name,mtime:n,ctime:r,size:i,etag:a,value:e,encoding:o.encoding,readonly:!1,locked:!1,executable:!1},!0,t)}async resolveFromBackup(e){let t=await this.workingCopyBackupService.resolve(this),n=a7;return t&&(n=(await this.textFileService.encoding.getPreferredWriteEncoding(this.resource,this.preferredEncoding)).encoding),this.isResolved()?(this.trace(`resolveFromBackup() - exit - without resolving because previously new model got created meanwhile`),!0):t?(await this.doResolveFromBackup(t,n,e),!0):!1}async doResolveFromBackup(e,t,n){this.trace(`doResolveFromBackup()`),this.resolveFromContent({resource:this.resource,name:this.name,mtime:e.meta?e.meta.mtime:Date.now(),ctime:e.meta?e.meta.ctime:Date.now(),size:e.meta?e.meta.size:0,etag:e.meta?e.meta.etag:``,value:await H4(await this.textFileService.getDecodedStream(this.resource,e.value,{encoding:a7})),encoding:t,readonly:!1,locked:!1,executable:!1},!0,n),e.meta?.orphaned&&this.setOrphaned(!0)}async resolveFromFile(e){this.trace(`resolveFromFile()`);let t=e?.forceReadFromFile,n=this.isResolved()||e?.allowBinary,r;t?r=``:this.lastResolvedFileStat&&(r=this.lastResolvedFileStat.etag);let i=this.versionId;try{let t=await this.textFileService.readStream(this.resource,{acceptTextOnly:!n,etag:r,encoding:this.preferredEncoding,limits:e?.limits});if(this.setOrphaned(!1),i!==this.versionId){this.trace(`resolveFromFile() - exit - without resolving because model content changed`);return}return this.resolveFromContent(t,!1,e)}catch(e){let n=e.fileOperationResult;if(this.setOrphaned(n===Sb.FILE_NOT_FOUND),this.isResolved()&&n===Sb.FILE_NOT_MODIFIED_SINCE){e instanceof xb&&this.updateLastResolvedFileStat(e.stat);return}if(this.isResolved()&&n===Sb.FILE_NOT_FOUND&&!t)return;throw e}}resolveFromContent(e,t,n){if(this.trace(`resolveFromContent() - enter`),this.isDisposed()){this.trace(`resolveFromContent() - exit - because model is disposed`);return}this.updateLastResolvedFileStat({resource:this.resource,name:e.name,mtime:e.mtime,ctime:e.ctime,size:e.size,etag:e.etag,readonly:e.readonly,locked:e.locked,executable:!1,isFile:!0,isDirectory:!1,isSymbolicLink:!1,children:void 0});let r=this.contentEncoding;this.contentEncoding=e.encoding,this.preferredEncoding?this.updatePreferredEncoding(this.contentEncoding):r!==this.contentEncoding&&this._onDidChangeEncoding.fire(),this.textEditorModel?this.doUpdateTextModel(e.value,G$.reloadFromDisk()):this.doCreateTextModel(e.resource,e.value),this.setDirty(!!t),this._onDidResolve.fire(n?.reason??uY.OTHER)}doCreateTextModel(e,t){this.trace(`doCreateTextModel()`);let n=this.createTextEditorModel(t,e,this.preferredLanguageId);this.installModelListeners(n),this.autoDetectLanguage()}doUpdateTextModel(e,t){this.trace(`doUpdateTextModel()`),this.ignoreDirtyOnModelContentChange=!0;try{this.updateTextEditorModel(e,this.preferredLanguageId,t)}finally{this.ignoreDirtyOnModelContentChange=!1}}installModelListeners(e){this._register(e.onDidChangeContent(t=>this.onModelContentChanged(e,t.isUndoing||t.isRedoing))),this._register(e.onDidChangeLanguage(()=>this.onMaybeShouldChangeEncoding())),super.installModelListeners(e)}onModelContentChanged(e,t){if(this.trace(`onModelContentChanged() - enter`),this.versionId++,this.trace(`onModelContentChanged() - new versionId ${this.versionId}`),t&&(this.lastModelContentChangeFromUndoRedo=Date.now()),!this.ignoreDirtyOnModelContentChange&&!this.isReadonly())if(e.getAlternativeVersionId()===this.bufferSavedVersionId){this.trace(`onModelContentChanged() - model content changed back to last saved version`);let e=this.dirty;this.setDirty(!1),e&&this._onDidRevert.fire()}else this.trace(`onModelContentChanged() - model content changed and marked as dirty`),this.setDirty(!0);this._onDidChangeContent.fire(),this.autoDetectLanguage()}async autoDetectLanguage(){await this.extensionService?.whenInstalledExtensionsRegistered();let e=this.getLanguageId();if(this.resource.scheme===this.pathService.defaultUriScheme&&(!e||e===`plaintext`)&&!this.resourceHasExtension)return super.autoDetectLanguage()}async forceResolveFromFile(){this.isDisposed()||await this.textFileService.files.resolve(this.resource,{reload:{async:!1},forceReadFromFile:!0})}isDirty(){return this.dirty}isModified(){return this.isDirty()}setDirty(e){if(!this.isResolved())return;let t=this.dirty;this.doSetDirty(e),e!==t&&this._onDidChangeDirty.fire()}doSetDirty(e){let t=this.dirty,n=this.inConflictMode,r=this.inErrorMode,i=this.bufferSavedVersionId;return e?this.dirty=!0:(this.dirty=!1,this.inConflictMode=!1,this.inErrorMode=!1,this.updateSavedVersionId()),()=>{this.dirty=t,this.inConflictMode=n,this.inErrorMode=r,this.bufferSavedVersionId=i}}async save(e=Object.create(null)){return this.isResolved()?this.isReadonly()?(this.trace(`save() - ignoring request for readonly resource`),!1):(this.hasState(lY.CONFLICT)||this.hasState(lY.ERROR))&&(e.reason===ZI.AUTO||e.reason===ZI.FOCUS_CHANGE||e.reason===ZI.WINDOW_CHANGE)?(this.trace(`save() - ignoring auto save request for model that is in conflict or error`),!1):(this.trace(`save() - enter`),await this.doSave(e),this.trace(`save() - exit`),this.hasState(lY.SAVED)):!1}async doSave(e){typeof e.reason!=`number`&&(e.reason=ZI.EXPLICIT);let t=this.versionId;if(this.trace(`doSave(${t}) - enter with versionId ${t}`),this.ignoreSaveFromSaveParticipants){this.trace(`doSave(${t}) - exit - refusing to save() recursively from save participant`);return}if(this.saveSequentializer.isRunning(t))return this.trace(`doSave(${t}) - exit - found a running save for versionId ${t}`),this.saveSequentializer.running;if(!e.force&&!this.dirty){this.trace(`doSave(${t}) - exit - because not dirty and/or versionId is different (this.isDirty: ${this.dirty}, this.versionId: ${this.versionId})`);return}if(this.saveSequentializer.isRunning())return this.trace(`doSave(${t}) - exit - because busy saving`),this.saveSequentializer.cancelRunning(),this.saveSequentializer.queue(()=>this.doSave(e));this.isResolved()&&this.textEditorModel.pushStackElement();let n=new Lr;return this.progressService.withProgress({title:D(14894,`Saving '{0}'`,this.name),location:fH.Window,cancellable:!0,delay:this.isDirty()?3e3:5e3},r=>this.doSaveSequential(t,e,r,n),()=>{n.cancel()}).finally(()=>{n.dispose()})}doSaveSequential(e,t,n,r){return this.saveSequentializer.run(e,(async()=>{if(this.isResolved()&&!t.skipSaveParticipants)try{if(t.reason===ZI.AUTO&&typeof this.lastModelContentChangeFromUndoRedo==`number`){let e=Date.now()-this.lastModelContentChangeFromUndoRedo;e<x7.UNDO_REDO_SAVE_PARTICIPANTS_AUTO_SAVE_THROTTLE_THRESHOLD&&await dc(x7.UNDO_REDO_SAVE_PARTICIPANTS_AUTO_SAVE_THROTTLE_THRESHOLD-e)}if(!r.token.isCancellationRequested){this.ignoreSaveFromSaveParticipants=!0;try{await this.textFileService.files.runSaveParticipants(this,{reason:t.reason??ZI.EXPLICIT,savedFrom:t.from},n,r.token)}catch(e){v(e)&&!r.token.isCancellationRequested&&r.cancel()}finally{this.ignoreSaveFromSaveParticipants=!1}}}catch(t){this.logService.error(`[text file model] runSaveParticipants(${e}) - resulted in an error: ${t.toString()}`,this.resource.toString())}if(r.token.isCancellationRequested||(r.dispose(),this.isDisposed())||!this.isResolved())return;e=this.versionId,this.inErrorMode=!1,n.report({message:D(14895,`Writing into file...`)}),this.trace(`doSave(${e}) - before write()`);let i=Oe(this.lastResolvedFileStat),a=this;return this.saveSequentializer.run(e,(async()=>{try{let n=await this.textFileService.write(i.resource,a.createSnapshot(),{mtime:i.mtime,encoding:this.getEncoding(),etag:t.ignoreModifiedSince||!this.filesConfigurationService.preventSaveConflicts(i.resource,a.getLanguageId())?``:i.etag,unlock:t.writeUnlock,writeElevated:t.writeElevated});this.handleSaveSuccess(n,e,t)}catch(n){this.handleSaveError(n,e,t)}})())})(),()=>r.cancel())}handleSaveSuccess(e,t,n){this.updateLastResolvedFileStat(e),t===this.versionId?(this.trace(`handleSaveSuccess(${t}) - setting dirty to false because versionId did not change`),this.setDirty(!1)):this.trace(`handleSaveSuccess(${t}) - not setting dirty to false because versionId did change meanwhile`),this.setOrphaned(!1),this._onDidSave.fire({reason:n.reason,stat:e,source:n.source})}handleSaveError(e,t,n){if((n.ignoreErrorHandler?this.logService.trace:this.logService.error).apply(this.logService,[`[text file model] handleSaveError(${t}) - exit - resulted in a save error: ${e.toString()}`,this.resource.toString()]),n.ignoreErrorHandler)throw e;this.setDirty(!0),this.inErrorMode=!0,e.fileOperationResult===Sb.FILE_MODIFIED_SINCE&&(this.inConflictMode=!0),this.textFileService.files.saveErrorHandler.onSaveError(e,this,n),this._onDidSaveError.fire()}updateSavedVersionId(){this.isResolved()&&(this.bufferSavedVersionId=this.textEditorModel.getAlternativeVersionId())}updateLastResolvedFileStat(e){let t=this.isReadonly();this.lastResolvedFileStat?this.lastResolvedFileStat.mtime<=e.mtime?this.lastResolvedFileStat=e:this.lastResolvedFileStat={...this.lastResolvedFileStat,readonly:e.readonly,locked:e.locked}:this.lastResolvedFileStat=e,this.isReadonly()!==t&&this._onDidChangeReadonly.fire()}hasState(e){switch(e){case lY.CONFLICT:return this.inConflictMode;case lY.DIRTY:return this.dirty;case lY.ERROR:return this.inErrorMode;case lY.ORPHAN:return this.inOrphanMode;case lY.PENDING_SAVE:return this.saveSequentializer.isRunning();case lY.SAVED:return!this.dirty}}async joinState(e){return this.saveSequentializer.running}getLanguageId(){return this.textEditorModel?this.textEditorModel.getLanguageId():this.preferredLanguageId}async onMaybeShouldChangeEncoding(){if(this.hasEncodingSetExplicitly){this.trace(`onMaybeShouldChangeEncoding() - ignoring because encoding was set explicitly`);return}if(this.contentEncoding===`utf8bom`||this.contentEncoding===`utf16be`||this.contentEncoding===`utf16le`){this.trace(`onMaybeShouldChangeEncoding() - ignoring because content encoding has a BOM`);return}let{encoding:e}=await this.textFileService.encoding.getPreferredReadEncoding(this.resource);if(typeof e!=`string`||!this.isNewEncoding(e)){this.trace(`onMaybeShouldChangeEncoding() - ignoring because preferred encoding ${e} is not new`);return}if(this.isDirty()){this.trace(`onMaybeShouldChangeEncoding() - ignoring because model is dirty`);return}return this.logService.info(`Adjusting encoding based on configured language override to '${e}' for ${this.resource.toString(!0)}.`),this.forceResolveFromFile()}setEncoding(e,t){return this.hasEncodingSetExplicitly=!0,this.setEncodingInternal(e,t)}async setEncodingInternal(e,t){if(t===dY.Encode)this.updatePreferredEncoding(e),this.isDirty()||(this.versionId++,this.setDirty(!0)),this.inConflictMode||await this.save({source:x7.TEXTFILE_SAVE_ENCODING_SOURCE});else{if(!this.isNewEncoding(e))return;if(this.isDirty())throw Error(`Cannot re-open a dirty text document with different encoding. Save it first.`);this.updatePreferredEncoding(e),await this.forceResolveFromFile()}}updatePreferredEncoding(e){this.isNewEncoding(e)&&(this.preferredEncoding=e,this._onDidChangeEncoding.fire())}isNewEncoding(e){return!(this.preferredEncoding===e||!this.preferredEncoding&&this.contentEncoding===e)}getEncoding(){return this.preferredEncoding||this.contentEncoding}trace(e){this.logService.trace(`[text file model] ${e}`,this.resource.toString())}isResolved(){return!!this.textEditorModel}isReadonly(){return this.filesConfigurationService.isReadonly(this.resource,this.lastResolvedFileStat)}dispose(){this.trace(`dispose()`),this.inConflictMode=!1,this.inOrphanMode=!1,this.inErrorMode=!1,super.dispose()}};S7=x7=t([n(3,FI),n(4,II),n(5,Ib),n(6,cH),n(7,r7),n(8,Lb),n(9,Uq),n(10,hJ),n(11,sH),n(12,BL),n(13,VL),n(14,g3),n(15,dV),n(16,uH)],S7);var C7=class extends w{constructor(e,t){super(),this.logService=e,this.progressService=t,this.saveParticipants=new Kn}addSaveParticipant(e){let t=this.saveParticipants.push(e);return S(()=>t())}async participate(e,t,n,r){let i=new Lr(r);e.textEditorModel?.pushStackElement(),n.report({message:D(14897,`Running Code Actions and Formatters...`)});let a=!1;if(await this.progressService.withProgress({priority:Rx.URGENT,location:fH.Notification,cancellable:D(14898,`Skip`),delay:e.isDirty()?5e3:3e3},async n=>{let r=Array.from(this.saveParticipants).sort((e,t)=>(e.ordinal??0)-(t.ordinal??0));for(let o of r){if(i.token.isCancellationRequested||!e.textEditorModel)break;try{await Xs(o.participate(e,t,n,i.token),i.token)}catch(e){v(e)?i.token.isCancellationRequested||(i.cancel(),a=!0):this.logService.error(e)}}},()=>{i.cancel()}),e.textEditorModel?.pushStackElement(),i.dispose(),a)throw new ee}dispose(){this.saveParticipants.clear(),super.dispose()}};C7=t([n(0,Lb),n(1,uH)],C7);var w7=V(`workingCopyFileService`),T7=class extends w{get models(){return[...this.mapResourceToModel.values()]}constructor(e,t,n,r,i){super(),this.instantiationService=e,this.fileService=t,this.notificationService=n,this.workingCopyFileService=r,this.uriIdentityService=i,this._onDidCreate=this._register(new E({leakWarningThreshold:500})),this.onDidCreate=this._onDidCreate.event,this._onDidResolve=this._register(new E),this.onDidResolve=this._onDidResolve.event,this._onDidRemove=this._register(new E),this.onDidRemove=this._onDidRemove.event,this._onDidChangeDirty=this._register(new E),this.onDidChangeDirty=this._onDidChangeDirty.event,this._onDidChangeReadonly=this._register(new E),this.onDidChangeReadonly=this._onDidChangeReadonly.event,this._onDidChangeOrphaned=this._register(new E),this.onDidChangeOrphaned=this._onDidChangeOrphaned.event,this._onDidSaveError=this._register(new E),this.onDidSaveError=this._onDidSaveError.event,this._onDidSave=this._register(new E),this.onDidSave=this._onDidSave.event,this._onDidRevert=this._register(new E),this.onDidRevert=this._onDidRevert.event,this._onDidChangeEncoding=this._register(new E),this.onDidChangeEncoding=this._onDidChangeEncoding.event,this.mapResourceToModel=new dn,this.mapResourceToModelListeners=new dn,this.mapResourceToDisposeListener=new dn,this.mapResourceToPendingModelResolvers=new dn,this.modelResolveQueue=this._register(new gc),this.saveErrorHandler=(()=>{let e=this.notificationService;return{onSaveError(t,n){e.error(D(14896,`Failed to save '{0}': {1}`,n.name,Jx(t,!1)))}}})(),this.mapCorrelationIdToModelsToRestore=new Map,this.saveParticipants=this._register(this.instantiationService.createInstance(C7)),this.registerListeners()}registerListeners(){this._register(this.fileService.onDidFilesChange(e=>this.onDidFilesChange(e))),this._register(this.fileService.onDidChangeFileSystemProviderCapabilities(e=>this.onDidChangeFileSystemProviderCapabilities(e))),this._register(this.fileService.onDidChangeFileSystemProviderRegistrations(e=>this.onDidChangeFileSystemProviderRegistrations(e))),this._register(this.workingCopyFileService.onWillRunWorkingCopyFileOperation(e=>this.onWillRunWorkingCopyFileOperation(e))),this._register(this.workingCopyFileService.onDidFailWorkingCopyFileOperation(e=>this.onDidFailWorkingCopyFileOperation(e))),this._register(this.workingCopyFileService.onDidRunWorkingCopyFileOperation(e=>this.onDidRunWorkingCopyFileOperation(e)))}onDidFilesChange(e){for(let t of this.models)t.isDirty()||e.contains(t.resource,_b.UPDATED,_b.ADDED)&&this.queueModelReload(t)}onDidChangeFileSystemProviderCapabilities(e){this.queueModelReloads(e.scheme)}onDidChangeFileSystemProviderRegistrations(e){e.added&&this.queueModelReloads(e.scheme)}queueModelReloads(e){for(let t of this.models)t.isDirty()||e===t.resource.scheme&&this.queueModelReload(t)}queueModelReload(e){this.modelResolveQueue.queueSize(e.resource)<=1&&this.modelResolveQueue.queueFor(e.resource,async()=>{try{await this.reload(e)}catch(e){p(e)}})}onWillRunWorkingCopyFileOperation(e){if(e.operation===hb.MOVE||e.operation===hb.COPY){let t=[];for(let{source:n,target:r}of e.files)if(n){if(this.uriIdentityService.extUri.isEqual(n,r))continue;let e=[];for(let t of this.models)this.uriIdentityService.extUri.isEqualOrParent(t.resource,n)&&e.push(t);for(let i of e){let e=i.resource,a;a=this.uriIdentityService.extUri.isEqual(e,n)?r:Fs(r,e.path.substr(n.path.length+1));let o=i.getLanguageId();t.push({source:e,target:a,language:o?{id:o,explicit:i.languageChangeSource===`user`}:void 0,encoding:i.getEncoding(),snapshot:i.isDirty()?i.createSnapshot():void 0})}}this.mapCorrelationIdToModelsToRestore.set(e.correlationId,t)}}onDidFailWorkingCopyFileOperation(e){if(e.operation===hb.MOVE||e.operation===hb.COPY){let t=this.mapCorrelationIdToModelsToRestore.get(e.correlationId);t&&(this.mapCorrelationIdToModelsToRestore.delete(e.correlationId),t.forEach(e=>{e.snapshot&&this.get(e.source)?.setDirty(!0)}))}}onDidRunWorkingCopyFileOperation(e){switch(e.operation){case hb.CREATE:e.waitUntil((async()=>{for(let{target:t}of e.files){let e=this.get(t);e&&!e.isDisposed()&&await e.revert()}})());break;case hb.MOVE:case hb.COPY:e.waitUntil((async()=>{let t=this.mapCorrelationIdToModelsToRestore.get(e.correlationId);t&&(this.mapCorrelationIdToModelsToRestore.delete(e.correlationId),await Ac.settled(t.map(async e=>{let t=this.uriIdentityService.asCanonicalUri(e.target),n=await this.resolve(t,{reload:{async:!1},contents:e.snapshot?U4(e.snapshot):void 0,encoding:e.encoding});e.language?.id&&e.language.id!==`plaintext`&&(e.language.explicit?n.setLanguageId(e.language.id):n.getLanguageId()===`plaintext`&&Ns(t)!==`.txt`&&n.updateTextEditorModel(void 0,e.language.id))})))})());break}}get(e){return this.mapResourceToModel.get(e)}has(e){return this.mapResourceToModel.has(e)}async reload(e){await this.joinPendingResolves(e.resource),!(e.isDirty()||e.isDisposed()||!this.has(e.resource))&&await this.doResolve(e,{reload:{async:!1}})}async resolve(e,t){let n=this.joinPendingResolves(e);return n&&await n,this.doResolve(e,t)}async doResolve(e,t){let n,r;k.isUri(e)?(r=e,n=this.get(r)):(r=e.resource,n=e);let i,a=!1;if(n)t?.contents?i=n.resolve(t):t?.reload?t.reload.async?(i=Promise.resolve(),(async()=>{try{await n.resolve(t)}catch(e){n.isDisposed()||p(e)}})()):i=n.resolve(t):i=Promise.resolve();else{a=!0;let e=n=this.instantiationService.createInstance(S7,r,t?t.encoding:void 0,t?t.languageId:void 0);i=n.resolve(t),this.registerModel(e)}this.mapResourceToPendingModelResolvers.set(r,i),this.add(r,n),a&&(this._onDidCreate.fire(n),n.isDirty()&&this._onDidChangeDirty.fire(n));try{await i}catch(e){throw a&&n.dispose(),e}finally{this.mapResourceToPendingModelResolvers.delete(r)}return t?.languageId&&n.setLanguageId(t.languageId),a&&n.isDirty()&&this._onDidChangeDirty.fire(n),n}joinPendingResolves(e){if(this.mapResourceToPendingModelResolvers.get(e))return this.doJoinPendingResolves(e)}async doJoinPendingResolves(e){let t;for(;this.mapResourceToPendingModelResolvers.has(e);){let n=this.mapResourceToPendingModelResolvers.get(e);if(n===t)return;t=n;try{await n}catch{}}}registerModel(e){let t=new C;t.add(e.onDidResolve(t=>this._onDidResolve.fire({model:e,reason:t}))),t.add(e.onDidChangeDirty(()=>this._onDidChangeDirty.fire(e))),t.add(e.onDidChangeReadonly(()=>this._onDidChangeReadonly.fire(e))),t.add(e.onDidChangeOrphaned(()=>this._onDidChangeOrphaned.fire(e))),t.add(e.onDidSaveError(()=>this._onDidSaveError.fire(e))),t.add(e.onDidSave(t=>this._onDidSave.fire({model:e,...t}))),t.add(e.onDidRevert(()=>this._onDidRevert.fire(e))),t.add(e.onDidChangeEncoding(()=>this._onDidChangeEncoding.fire(e))),this.mapResourceToModelListeners.set(e.resource,t)}add(e,t){this.mapResourceToModel.get(e)!==t&&(this.mapResourceToDisposeListener.get(e)?.dispose(),this.mapResourceToModel.set(e,t),this.mapResourceToDisposeListener.set(e,t.onWillDispose(()=>this.remove(e))))}remove(e){let t=this.mapResourceToModel.delete(e),n=this.mapResourceToDisposeListener.get(e);n&&(Nn(n),this.mapResourceToDisposeListener.delete(e));let r=this.mapResourceToModelListeners.get(e);r&&(Nn(r),this.mapResourceToModelListeners.delete(e)),t&&this._onDidRemove.fire(e)}addSaveParticipant(e){return this.saveParticipants.addSaveParticipant(e)}runSaveParticipants(e,t,n,r){return this.saveParticipants.participate(e,t,n,r)}canDispose(e){return e.isDisposed()||!this.mapResourceToPendingModelResolvers.has(e.resource)&&!e.isDirty()?!0:this.doCanDispose(e)}async doCanDispose(e){let t=this.joinPendingResolves(e.resource);return t?(await t,this.canDispose(e)):e.isDirty()?(await T.toPromise(e.onDidChangeDirty),this.canDispose(e)):!0}dispose(){super.dispose(),this.mapResourceToModel.clear(),this.mapResourceToPendingModelResolvers.clear(),Nn(this.mapResourceToDisposeListener.values()),this.mapResourceToDisposeListener.clear(),Nn(this.mapResourceToModelListeners.values()),this.mapResourceToModelListeners.clear()}};T7=t([n(0,Cy),n(1,Ib),n(2,Px),n(3,w7),n(4,ox)],T7);var E7=V(`elevatedFileService`),D7,O7=class extends w{static#e=D7=this;static#t=this.TEXTFILE_SAVE_CREATE_SOURCE=QI.registerSource(`textFileCreate.source`,D(14880,`File Created`));static#n=this.TEXTFILE_SAVE_REPLACE_SOURCE=QI.registerSource(`textFileOverwrite.source`,D(14881,`File Replaced`));constructor(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_){super(),this.fileService=e,this.lifecycleService=n,this.instantiationService=r,this.modelService=i,this.environmentService=a,this.dialogService=o,this.fileDialogService=s,this.textResourceConfigurationService=c,this.filesConfigurationService=l,this.codeEditorService=u,this.pathService=d,this.workingCopyFileService=f,this.uriIdentityService=p,this.languageService=m,this.logService=h,this.elevatedFileService=g,this.decorationsService=_,this.files=this._register(this.instantiationService.createInstance(T7)),this.untitled=t,this.provideDecorations()}provideDecorations(){let e=this._register(new class extends w{constructor(e){super(),this.files=e,this.label=D(14882,`Text File Model Decorations`),this._onDidChange=this._register(new E),this.onDidChange=this._onDidChange.event,this.registerListeners()}registerListeners(){this._register(this.files.onDidResolve(({model:e})=>{(e.isReadonly()||e.hasState(lY.ORPHAN))&&this._onDidChange.fire([e.resource])})),this._register(this.files.onDidRemove(e=>this._onDidChange.fire([e]))),this._register(this.files.onDidChangeReadonly(e=>this._onDidChange.fire([e.resource]))),this._register(this.files.onDidChangeOrphaned(e=>this._onDidChange.fire([e.resource])))}provideDecorations(e){let t=this.files.get(e);if(!t||t.isDisposed())return;let n=t.isReadonly(),r=t.hasState(lY.ORPHAN);if(n&&r)return{color:Yu,letter:x.lockSmall,strikethrough:!0,tooltip:D(14883,`Deleted, Read-only`)};if(n)return{letter:x.lockSmall,tooltip:D(14884,`Read-only`)};if(r)return{color:Yu,strikethrough:!0,tooltip:D(14885,`Deleted`)}}}(this.files));this._register(this.decorationsService.registerDecorationsProvider(e))}get encoding(){return this._encoding||=this._register(this.instantiationService.createInstance(k7)),this._encoding}async read(e,t){let[n,r]=await this.doRead(e,{...t,preferUnbuffered:!0});return{...n,encoding:r.detected.encoding||`utf8`,value:await jp(r.stream,e=>e.join(``))}}async readStream(e,t){let[n,r]=await this.doRead(e,t);return{...n,encoding:r.detected.encoding||`utf8`,value:await H4(r.stream)}}async doRead(e,t){let n=new Lr,r;if(t?.preferUnbuffered){let i=await this.fileService.readFile(e,t,n.token);r={...i,value:rm(i.value)}}else r=await this.fileService.readFileStream(e,t,n.token);try{let n=await this.doGetDecodedStream(e,r.value,t);return[r,n]}catch(e){throw n.dispose(!0),e.decodeStreamErrorKind===f7.STREAM_IS_BINARY?new cY(D(14886,`File seems to be binary and cannot be opened as text`),sY.FILE_IS_BINARY,t):e}}async create(e,t){let n=await Promise.all(e.map(async e=>{let t=await this.getEncodedReadable(e.resource,e.value);return{resource:e.resource,contents:t,overwrite:e.options?.overwrite}}));return this.workingCopyFileService.create(n,Fr.None,t)}async write(e,t,n){let r=await this.getEncodedReadable(e,t,n);return n?.writeElevated&&this.elevatedFileService.isSupported(e)?this.elevatedFileService.writeFileElevated(e,r,n):this.fileService.writeFile(e,r,n)}async getEncodedReadable(e,t,n){let{encoding:r,addBOM:i}=await this.encoding.getWriteEncoding(e,n);return r===`utf8`&&!i?t===void 0?void 0:pY(t):(t||=``,m7(typeof t==`string`?fY(t):t,r,{addBOM:i}))}async getDecodedStream(e,t,n){return(await this.doGetDecodedStream(e,t,n)).stream}doGetDecodedStream(e,t,n){return p7(t,{acceptTextOnly:n?.acceptTextOnly??!1,guessEncoding:n?.autoGuessEncoding||this.textResourceConfigurationService.getValue(e,`files.autoGuessEncoding`),candidateGuessEncodings:n?.candidateGuessEncodings||this.textResourceConfigurationService.getValue(e,`files.candidateGuessEncodings`),overwriteEncoding:async t=>this.validateDetectedEncoding(e,t??void 0,n)})}getEncoding(e){return(e.scheme===A.untitled?this.untitled.get(e):this.files.get(e))?.getEncoding()??this.encoding.getUnvalidatedEncodingForResource(e)}async resolveDecoding(e,t){return{preferredEncoding:(await this.encoding.getPreferredReadEncoding(e,t,void 0)).encoding,guessEncoding:t?.autoGuessEncoding||this.textResourceConfigurationService.getValue(e,`files.autoGuessEncoding`),candidateGuessEncodings:t?.candidateGuessEncodings||this.textResourceConfigurationService.getValue(e,`files.candidateGuessEncodings`)}}async validateDetectedEncoding(e,t,n){let{encoding:r}=await this.encoding.getPreferredReadEncoding(e,n,t);return r}resolveEncoding(e,t){return this.encoding.getWriteEncoding(e,t)}async save(e,t){if(e.scheme===A.untitled){let n=this.untitled.get(e);if(n){let r;if(r=n.hasAssociatedFilePath?await this.suggestSavePath(e):await this.fileDialogService.pickFileToSave(await this.suggestSavePath(e),t?.availableFileSystems),r)return this.saveAs(e,r,t)}}else{let n=this.files.get(e);if(n)return await n.save(t)?e:void 0}}async saveAs(e,t,n){if(t||=await this.fileDialogService.pickFileToSave(await this.suggestSavePath(n?.suggestedTarget??e),n?.availableFileSystems),t){if(this.filesConfigurationService.isReadonly(t))if(await this.confirmMakeWriteable(t))this.filesConfigurationService.updateReadonly(t,!1);else return;return ks(e,t)?this.save(e,{...n,force:!0}):this.fileService.hasProvider(e)&&this.uriIdentityService.extUri.isEqual(e,t)&&await this.fileService.exists(e)?(await this.workingCopyFileService.move([{file:{source:e,target:t}}],Fr.None),await this.save(e,n)||await this.save(t,n),t):this.doSaveAs(e,t,n)}}async doSaveAs(e,t,n){let r=!1,i;if(e.scheme!==A.untitled){let t=this.files.get(e);t?.isResolved()&&(i=t)}else{let t=this.untitled.get(e);t?.isResolved()&&(i=t)}if(i)r=await this.doSaveAsTextFile(i,e,t,n);else if(this.fileService.hasProvider(e))await this.fileService.copy(e,t,!0),r=!0;else{let i=this.modelService.getModel(e);i&&(r=await this.doSaveAsTextFile(i,e,t,n))}if(r){try{await this.revert(e)}catch(e){this.logService.error(e)}return e.scheme===A.untitled&&this.untitled.notifyDidSave(e,t),t}}async doSaveAsTextFile(e,t,n,r){let i,a=e;typeof a.getEncoding==`function`&&(i=a.getEncoding());let o=!1,s=this.files.get(n);if(s?.isResolved())o=!0;else{o=await this.fileService.exists(n),o||await this.create([{resource:n,value:``}]);try{s=await this.files.resolve(n,{encoding:i})}catch(i){if(o&&(i.textFileOperationResult===sY.FILE_IS_BINARY||i.fileOperationResult===Sb.FILE_TOO_LARGE))return await this.fileService.del(n),this.doSaveAsTextFile(e,t,n,r);throw i}}let c;if(c=e instanceof b7&&e.hasAssociatedFilePath&&o&&this.uriIdentityService.extUri.isEqual(n,Ks(e.resource,this.environmentService.remoteAuthority,this.pathService.defaultUriScheme))?await this.confirmOverwrite(n):!0,!c)return!1;let l;e instanceof UL?e.isResolved()&&(l=e.textEditorModel??void 0):l=e;let u;if(s.isResolved()&&(u=s.textEditorModel),l&&u){s.updatePreferredEncoding(i),this.modelService.updateModel(u,U4(l.createSnapshot()));let e=l.getLanguageId(),t=u.getLanguageId();e!==`plaintext`&&t===`plaintext`&&u.setLanguage(e);let n=l.getOptions();u.updateOptions({tabSize:n.tabSize,indentSize:n.indentSize,insertSpaces:n.insertSpaces});let r=l.getEndOfLineSequence();u.setEOL(r);let a=this.codeEditorService.getTransientModelProperties(l);if(a)for(let[e,t]of a)this.codeEditorService.setTransientModelProperty(u,e,t)}return r?.source||(r={...r,source:o?D7.TEXTFILE_SAVE_REPLACE_SOURCE:D7.TEXTFILE_SAVE_CREATE_SOURCE}),s.save({...r,from:t})}async confirmOverwrite(e){let{confirmed:t}=await this.dialogService.confirm({type:`warning`,message:D(14887,`'{0}' already exists. Do you want to replace it?`,Ms(e)),detail:D(14888,`A file or folder with the name '{0}' already exists in the folder '{1}'. Replacing it will overwrite its current contents.`,Ms(e),Ms(Ps(e))),primaryButton:D(14889,`&&Replace`)});return t}async confirmMakeWriteable(e){let{confirmed:t}=await this.dialogService.confirm({type:`warning`,message:D(14890,`'{0}' is marked as read-only. Do you want to save anyway?`,Ms(e)),detail:D(14891,`Paths can be configured as read-only via settings.`),primaryButton:D(14892,`&&Save Anyway`)});return t}async suggestSavePath(e){if(this.fileService.hasProvider(e))return e;let t=this.environmentService.remoteAuthority,n=await this.fileDialogService.defaultFilePath(),r;if(e.scheme===A.untitled){let i=this.untitled.get(e);if(i){if(i.hasAssociatedFilePath)return Ks(e,t,this.pathService.defaultUriScheme);let a;a=await this.pathService.hasValidBasename(Fs(n,i.name),i.name)?i.name:Ms(e);let o=i.getLanguageId();r=o&&o!==`plaintext`?this.suggestFilename(o,a):a}}return r||=Ms(e),Fs(n,r)}suggestFilename(e,t){if(!this.languageService.getLanguageName(e))return t;let n=ma(t),r=this.languageService.getExtensions(e);if(r.includes(n))return t;let i=r.at(0);if(i)return n?`${t.substring(0,t.indexOf(n))}${i}`:`${t}${i}`;let a=this.languageService.getFilenames(e);return a.includes(t)?t:a.at(0)??t}async revert(e,t){if(e.scheme===A.untitled){let n=this.untitled.get(e);if(n)return n.revert(t)}else{let n=this.files.get(e);if(n&&(n.isDirty()||t?.force))return n.revert(t)}}isDirty(e){let t=e.scheme===A.untitled?this.untitled.get(e):this.files.get(e);return t?t.isDirty():!1}};O7=D7=t([n(0,Ib),n(1,_3),n(2,Nx),n(3,Cy),n(4,II),n(5,jH),n(6,FV),n(7,IV),n(8,Lq),n(9,hJ),n(10,gY),n(11,g3),n(12,w7),n(13,ox),n(14,FI),n(15,Lb),n(16,E7),n(17,EJ)],O7);var k7=class extends w{get encodingOverrides(){return this._encodingOverrides}set encodingOverrides(e){this._encodingOverrides=e}constructor(e,t,n,r){super(),this.textResourceConfigurationService=e,this.environmentService=t,this.contextService=n,this.uriIdentityService=r,this._encodingOverrides=this.getDefaultEncodingOverrides(),this.registerListeners()}registerListeners(){this._register(this.contextService.onDidChangeWorkspaceFolders(()=>this.encodingOverrides=this.getDefaultEncodingOverrides()))}getDefaultEncodingOverrides(){let e=[];return e.push({parent:this.environmentService.userRoamingDataHome,encoding:a7}),e.push({extension:Xb,encoding:a7}),e.push({parent:this.environmentService.untitledWorkspacesHome,encoding:a7}),this.contextService.getWorkspace().folders.forEach(t=>{e.push({parent:Fs(t.uri,`.vscode`),encoding:a7})}),e}async getWriteEncoding(e,t){let{encoding:n,hasBOM:r}=await this.getPreferredWriteEncoding(e,t?t.encoding:void 0);return{encoding:n,addBOM:r}}async getPreferredWriteEncoding(e,t){let n=await this.getValidatedEncodingForResource(e,t);return{encoding:n,hasBOM:n===`utf16be`||n===`utf16le`||n===`utf8bom`}}async getPreferredReadEncoding(e,t,n){let r;t?.encoding?r=n===`utf8bom`&&t.encoding===`utf8`?o7:t.encoding:typeof n==`string`?r=n:this.textResourceConfigurationService.getValue(e,`files.encoding`)===`utf8bom`&&(r=a7);let i=await this.getValidatedEncodingForResource(e,r);return{encoding:i,hasBOM:i===`utf16be`||i===`utf16le`||i===`utf8bom`}}getUnvalidatedEncodingForResource(e,t){let n;return n=this.getEncodingOverride(e)||t||this.textResourceConfigurationService.getValue(e,`files.encoding`),n||`utf8`}async getValidatedEncodingForResource(e,t){let n=this.getUnvalidatedEncodingForResource(e,t);return n!==`utf8`&&!await $oe(n)&&(n=a7),n}getEncodingOverride(e){if(e&&this.encodingOverrides?.length){for(let t of this.encodingOverrides)if(t.parent&&this.uriIdentityService.extUri.isEqualOrParent(e,t.parent)||t.extension&&Ns(e)===`.${t.extension}`)return t.encoding}}};k7=t([n(0,Lq),n(1,jH),n(2,fV),n(3,ox)],k7);var A7=class extends O7{constructor(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_){super(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,g,h,_),this.registerListeners()}registerListeners(){this._register(this.lifecycleService.onBeforeShutdown(e=>e.veto(this.onBeforeShutdown(),`veto.textFiles`)))}onBeforeShutdown(){return!!this.files.models.some(e=>e.hasState(lY.PENDING_SAVE))}};A7=t([n(0,Ib),n(1,_3),n(2,Nx),n(3,Cy),n(4,II),n(5,jH),n(6,FV),n(7,IV),n(8,Lq),n(9,hJ),n(10,gY),n(11,g3),n(12,w7),n(13,ox),n(14,FI),n(15,E7),n(16,Lb),n(17,EJ)],A7);var cse=class{isSupported(e){return!1}async writeFileElevated(e,t,n){throw Error(`Unsupported`)}},j7=V(`workbenchModeService`),M7=class extends w{constructor(e,t,n,r,a,o,s,c,l,u,d){super(),this.contextKeyService=e,this.contextService=t,this.configurationService=n,this.environmentService=r,this.productService=a,this.editorGroupService=o,this.editorService=s,this.layoutService=c,this.paneCompositeService=l,this.workingCopyService=u,this.workbenchModeService=d,UP.bindTo(this.contextKeyService),WP.bindTo(this.contextKeyService),GP.bindTo(this.contextKeyService),KP.bindTo(this.contextKeyService),qP.bindTo(this.contextKeyService),JP.bindTo(this.contextKeyService),YP.bindTo(this.contextKeyService),gR.bindTo(this.contextKeyService).set(EU(this.environmentService.remoteAuthority)||``),this.virtualWorkspaceContext=_R.bindTo(this.contextKeyService),this.temporaryWorkspaceContext=vR.bindTo(this.contextKeyService),this.isAgentSessionsWorkspaceContext=Are.bindTo(this.contextKeyService),this.isAgentSessionsWorkspaceContext.set(!!this.contextService.getWorkspace().isAgentSessionsWorkspace),this.workbenchModeContext=jre.bindTo(this.contextKeyService),this.workbenchModeContext.set(this.workbenchModeService.workbenchMode??``),this.updateWorkspaceContextKeys(),yR.bindTo(this.contextKeyService).set(LV.supported(i));let f=!this.environmentService.isBuilt||this.environmentService.isExtensionDevelopment;XP.bindTo(this.contextKeyService).set(f),vS(XP.key,f),ZP.bindTo(this.contextKeyService).set(this.productService.quality||``),Mre.bindTo(this.contextKeyService).set(a.embedderIdentifier),this.inAutomationContext=bR.bindTo(this.contextKeyService),this.inAutomationContext.set(!!this.environmentService.enableSmokeTestDriver),this.activeEditorGroupEmpty=wR.bindTo(this.contextKeyService),this.activeEditorGroupIndex=Xre.bindTo(this.contextKeyService),this.activeEditorGroupLast=Zre.bindTo(this.contextKeyService),this.activeEditorGroupLocked=TR.bindTo(this.contextKeyService),this.multipleEditorGroupsContext=ER.bindTo(this.contextKeyService),this.editorsVisibleContext=rie.bindTo(this.contextKeyService),this.dirtyWorkingCopiesContext=hR.bindTo(this.contextKeyService),this.dirtyWorkingCopiesContext.set(this.workingCopyService.hasDirty),this.workbenchStateContext=uR.bindTo(this.contextKeyService),this.updateWorkbenchStateContextKey(),this.workspaceFolderCountContext=dR.bindTo(this.contextKeyService),this.updateWorkspaceFolderCountContextKey(),this.openFolderWorkspaceSupportContext=fR.bindTo(this.contextKeyService),this.openFolderWorkspaceSupportContext.set(li||typeof this.environmentService.remoteAuthority==`string`),this.emptyWorkspaceSupportContext=mR.bindTo(this.contextKeyService),this.emptyWorkspaceSupportContext.set(li||typeof this.environmentService.remoteAuthority==`string`),this.enterMultiRootWorkspaceSupportContext=pR.bindTo(this.contextKeyService),this.enterMultiRootWorkspaceSupportContext.set(li||typeof this.environmentService.remoteAuthority==`string`),this.splitEditorsVerticallyContext=kR.bindTo(this.contextKeyService),this.updateSplitEditorsVerticallyContext(),this.isMainWindowFullscreenContext=SR.bindTo(this.contextKeyService),this.isAuxiliaryWindowFocusedContext=CR.bindTo(this.contextKeyService),this.inZenModeContext=DR.bindTo(this.contextKeyService),this.isMainEditorCenteredLayoutContext=OR.bindTo(this.contextKeyService),this.mainEditorAreaVisibleContext=AR.bindTo(this.contextKeyService),this.editorTabsVisibleContext=jR.bindTo(this.contextKeyService),this.sideBarVisibleContext=MR.bindTo(this.contextKeyService),this.titleAreaVisibleContext=PR.bindTo(this.contextKeyService),this.titleBarStyleContext=NR.bindTo(this.contextKeyService),this.updateTitleBarContextKeys(),this.panelPositionContext=LR.bindTo(this.contextKeyService),this.panelPositionContext.set(py(this.layoutService.getPanelPosition())),this.panelVisibleContext=zR.bindTo(this.contextKeyService),this.panelVisibleContext.set(this.layoutService.isVisible(iy.PANEL_PART)),this.panelMaximizedContext=BR.bindTo(this.contextKeyService),this.panelMaximizedContext.set(this.layoutService.isPanelMaximized()),this.panelAlignmentContext=RR.bindTo(this.contextKeyService),this.panelAlignmentContext.set(this.layoutService.getPanelAlignment()),this.auxiliaryBarVisibleContext=FR.bindTo(this.contextKeyService),this.auxiliaryBarVisibleContext.set(this.layoutService.isVisible(iy.AUXILIARYBAR_PART)),this.auxiliaryBarMaximizedContext=IR.bindTo(this.contextKeyService),this.auxiliaryBarMaximizedContext.set(this.layoutService.isAuxiliaryBarMaximized()),xR.bindTo(this.contextKeyService),this.registerListeners()}registerListeners(){this.editorGroupService.whenReady.then(()=>{this.updateEditorAreaContextKeys(),this.updateActiveEditorGroupContextKeys(),this.updateVisiblePanesContextKeys()}),this._register(this.editorService.onDidActiveEditorChange(()=>this.updateActiveEditorGroupContextKeys())),this._register(this.editorService.onDidVisibleEditorsChange(()=>this.updateVisiblePanesContextKeys())),this._register(this.editorGroupService.onDidAddGroup(()=>this.updateEditorGroupsContextKeys())),this._register(this.editorGroupService.onDidRemoveGroup(()=>this.updateEditorGroupsContextKeys())),this._register(this.editorGroupService.onDidChangeGroupIndex(()=>this.updateActiveEditorGroupContextKeys())),this._register(this.editorGroupService.onDidChangeGroupLocked(()=>this.updateActiveEditorGroupContextKeys())),this._register(this.editorGroupService.onDidChangeEditorPartOptions(()=>this.updateEditorAreaContextKeys())),this._register(this.contextService.onDidChangeWorkbenchState(()=>this.updateWorkbenchStateContextKey())),this._register(this.contextService.onDidChangeWorkspaceFolders(()=>{this.updateWorkspaceFolderCountContextKey(),this.updateWorkspaceContextKeys()})),this._register(this.workbenchModeService.onDidChangeWorkbenchMode(e=>this.workbenchModeContext.set(e??``))),this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(`workbench.editor.openSideBySideDirection`)&&this.updateSplitEditorsVerticallyContext()})),this._register(this.layoutService.onDidChangeZenMode(e=>this.inZenModeContext.set(e))),this._register(this.layoutService.onDidChangeActiveContainer(()=>this.isAuxiliaryWindowFocusedContext.set(this.layoutService.activeContainer!==this.layoutService.mainContainer))),this._register(wf(e=>{e===i.vscodeWindowId&&this.isMainWindowFullscreenContext.set(Cf(i))})),this._register(this.layoutService.onDidChangeMainEditorCenteredLayout(e=>this.isMainEditorCenteredLayoutContext.set(e))),this._register(this.layoutService.onDidChangePanelPosition(e=>this.panelPositionContext.set(e))),this._register(this.layoutService.onDidChangePanelAlignment(e=>this.panelAlignmentContext.set(e))),this._register(this.paneCompositeService.onDidPaneCompositeClose(()=>this.updateSideBarContextKeys())),this._register(this.paneCompositeService.onDidPaneCompositeOpen(()=>this.updateSideBarContextKeys())),this._register(this.layoutService.onDidChangePartVisibility(()=>{this.mainEditorAreaVisibleContext.set(this.layoutService.isVisible(iy.EDITOR_PART,i)),this.panelVisibleContext.set(this.layoutService.isVisible(iy.PANEL_PART)),this.panelMaximizedContext.set(this.layoutService.isPanelMaximized()),this.auxiliaryBarVisibleContext.set(this.layoutService.isVisible(iy.AUXILIARYBAR_PART)),this.updateTitleBarContextKeys()})),this._register(this.layoutService.onDidChangeAuxiliaryBarMaximized(()=>{this.auxiliaryBarMaximizedContext.set(this.layoutService.isAuxiliaryBarMaximized())})),this._register(this.workingCopyService.onDidChangeDirty(e=>this.dirtyWorkingCopiesContext.set(e.isDirty()||this.workingCopyService.hasDirty)))}updateVisiblePanesContextKeys(){this.editorService.visibleEditorPanes.length>0?this.editorsVisibleContext.set(!0):this.editorsVisibleContext.reset()}updateActiveEditorGroupContextKeys(){this.editorService.activeEditor?this.activeEditorGroupEmpty.reset():this.activeEditorGroupEmpty.set(!0);let e=this.editorGroupService.activeGroup;this.activeEditorGroupIndex.set(e.index+1),this.activeEditorGroupLocked.set(e.isLocked),this.updateEditorGroupsContextKeys()}updateEditorGroupsContextKeys(){let e=this.editorGroupService.count;e>1?this.multipleEditorGroupsContext.set(!0):this.multipleEditorGroupsContext.reset();let t=this.editorGroupService.activeGroup;this.activeEditorGroupLast.set(t.index===e-1)}updateEditorAreaContextKeys(){this.editorTabsVisibleContext.set(this.editorGroupService.partOptions.showTabs===`multiple`)}updateWorkbenchStateContextKey(){this.workbenchStateContext.set(this.getWorkbenchStateString())}updateWorkspaceFolderCountContextKey(){this.workspaceFolderCountContext.set(this.contextService.getWorkspace().folders.length)}updateSplitEditorsVerticallyContext(){let e=kK(this.configurationService);this.splitEditorsVerticallyContext.set(e===bK.DOWN)}getWorkbenchStateString(){switch(this.contextService.getWorkbenchState()){case Wb.EMPTY:return`empty`;case Wb.FOLDER:return`folder`;case Wb.WORKSPACE:return`workspace`}}updateSideBarContextKeys(){this.sideBarVisibleContext.set(this.layoutService.isVisible(iy.SIDEBAR_PART))}updateTitleBarContextKeys(){this.titleAreaVisibleContext.set(this.layoutService.isVisible(iy.TITLEBAR_PART,i)),this.titleBarStyleContext.set(Zv(this.configurationService))}updateWorkspaceContextKeys(){this.virtualWorkspaceContext.set(b3(this.contextService.getWorkspace())||``),this.temporaryWorkspaceContext.set(tx(this.contextService.getWorkspace()))}};M7=t([n(0,uS),n(1,fV),n(2,Dx),n(3,jH),n(4,YU),n(5,vz),n(6,hL),n(7,Dy),n(8,uV),n(9,Uq),n(10,j7)],M7);var N7=new E,lse=N7.event,P7=new E,F7=P7.event,I7=new uc,L7=new E,R7=[],z7=[],B7=[];function V7(e){R7.push(e)}function use(e){z7.push(e)}function dse(e){B7.push(e)}async function fse(e){await e.invokeFunction(async e=>{await Promise.all(R7.map(t=>t(e)))}),await e.invokeFunction(async t=>{OE((t,n)=>e.createInstance(JH,t,{instantHover:n},{})),CE(t.get(_z));let n=t.get(Nx);hr.as(w3.Workbench).start(t),hr.as(LI.EditorFactory).start(t),await Promise.all(z7.map(e=>e(t))),n.phase=jx.Ready}),await e.invokeFunction(async e=>{await Promise.all(B7.map(t=>t(e)))}),I7.open(),L7.fire(),e.invokeFunction(async e=>{let t=e.get(Nx);F7(e=>{e.get(Cy).createInstance(M7)}),N7.fire(e),P7.fire(e),await Promise.race([e.get(Dy).whenRestored,dc(2e3)]),t.phase=jx.Restored,new bc(()=>{Cc(window,()=>{t.phase=jx.Eventually},2500)},2500).schedule()})}var H7=!1;B5.withServices(()=>(H7=!0,w.None));async function U7(){await I7.wait()}function W7(){if(H7)throw Error(`Services are already initialized`)}function G7(e,t){return{id:t??K7(e),configPath:e}}function pse(e,t){return{id:t??K7(e),uri:e}}function K7(e){return hm(e.toString()).toString(16)}var q7=document.body,J7={},Y7={},X7=Vb,Z7=k.file(PJ(new Date).replace(/-|:|\.\d+Z$/g,``)).with({scheme:`vscode-log`});function mse(){return q7}function hse(){return J7}function gse(){return Y7}function _se(){return X7}function vse(e){let t;return e.workspaceProvider!=null&&(t=e.workspaceProvider.workspace),t!=null&&Lv(t)?G7(t.workspaceUri,t.id):t!=null&&Rv(t)?pse(t.folderUri,t.id):Vb}function yse(e,t,n={}){q7=e,J7=t,Y7=n,X7=vse(t)}var Q7=hr.as(_P.Configuration),bse=li?{type:`string`,scope:vP.APPLICATION,enum:[wb.OFF,wb.ON_EXIT,wb.ON_EXIT_AND_WINDOW_CLOSE],default:wb.ON_EXIT,markdownEnumDescriptions:[D(8609,`Disable hot exit. A prompt will show when attempting to close a window with editors that have unsaved changes.`),D(8610,"Hot exit will be triggered when the last window is closed on Windows/Linux or when the `workbench.action.quit` command is triggered (command palette, keybinding, menu). All windows without folders opened will be restored upon next launch. A list of previously opened windows with unsaved files can be accessed via `File > Open Recent > More...`"),D(8611,"Hot exit will be triggered when the last window is closed on Windows/Linux or when the `workbench.action.quit` command is triggered (command palette, keybinding, menu), and also for any window with a folder opened regardless of whether it's the last window. All windows without folders opened will be restored upon next launch. A list of previously opened windows with unsaved files can be accessed via `File > Open Recent > More...`")],markdownDescription:D(8612,`[Hot Exit](https://aka.ms/vscode-hot-exit) controls whether unsaved files are remembered between sessions, allowing the save prompt when exiting the editor to be skipped.`,wb.ON_EXIT,wb.ON_EXIT_AND_WINDOW_CLOSE)}:{type:`string`,scope:vP.APPLICATION,enum:[wb.OFF,wb.ON_EXIT_AND_WINDOW_CLOSE],default:wb.ON_EXIT_AND_WINDOW_CLOSE,markdownEnumDescriptions:[D(8609,`Disable hot exit. A prompt will show when attempting to close a window with editors that have unsaved changes.`),D(8613,`Hot exit will be triggered when the browser quits or the window or tab is closed.`)],markdownDescription:D(8612,`[Hot Exit](https://aka.ms/vscode-hot-exit) controls whether unsaved files are remembered between sessions, allowing the save prompt when exiting the editor to be skipped.`,wb.ON_EXIT,wb.ON_EXIT_AND_WINDOW_CLOSE)};Q7.registerConfiguration({id:`files`,order:9,title:D(8614,`Files`),type:`object`,properties:{[Eb]:{type:`object`,markdownDescription:D(8615,"Configure [glob patterns](https://aka.ms/vscode-glob-patterns) for excluding files and folders. For example, the File Explorer decides which files and folders to show or hide based on this setting. Refer to the `#search.exclude#` setting to define search-specific excludes. Refer to the `#explorer.excludeGitIgnore#` setting for ignoring files based on your `.gitignore`."),default:{"**/.git":!0,"**/.svn":!0,"**/.hg":!0,"**/.DS_Store":!0,"**/Thumbs.db":!0,...di?{"**/*.crswap":!0}:void 0},scope:vP.RESOURCE,additionalProperties:{anyOf:[{type:`boolean`,enum:[!0,!1],enumDescriptions:[D(8616,`Enable the pattern.`),D(8617,`Disable the pattern.`)],description:D(8618,`The glob pattern to match file paths against. Set to true or false to enable or disable the pattern.`)},{type:`object`,properties:{when:{type:`string`,pattern:`\\w*\\$\\(basename\\)\\w*`,default:`$(basename).ext`,markdownDescription:D(8619,`Additional check on the siblings of a matching file. Use \\$(basename) as variable for the matching file name.`)}}}]}},[Tb]:{type:`object`,markdownDescription:D(8620,'Configure [glob patterns](https://aka.ms/vscode-glob-patterns) of file associations to languages (for example `"*.extension": "html"`). Patterns will match on the absolute path of a file if they contain a path separator and will match on the name of the file otherwise. These have precedence over the default associations of the languages installed.'),additionalProperties:{type:`string`}},"files.encoding":{type:`string`,enum:Object.keys(_7),default:`utf8`,description:D(8621,`The default character set encoding to use when reading and writing files. This setting can also be configured per language.`),scope:vP.LANGUAGE_OVERRIDABLE,enumDescriptions:Object.keys(_7).map(e=>_7[e].labelLong),enumItemLabels:Object.keys(_7).map(e=>_7[e].labelLong)},"files.autoGuessEncoding":{type:`boolean`,default:!1,markdownDescription:D(8622,`When enabled, the editor will attempt to guess the character set encoding when opening files. This setting can also be configured per language. Note, this setting is not respected by text search. Only {0} is respected.`,"`#files.encoding#`"),scope:vP.LANGUAGE_OVERRIDABLE},"files.candidateGuessEncodings":{type:`array`,items:{type:`string`,enum:Object.keys(v7),enumDescriptions:Object.keys(v7).map(e=>v7[e].labelLong)},default:[],markdownDescription:D(8623,`List of character set encodings that the editor should attempt to guess in the order they are listed. In case it cannot be determined, {0} is respected`,"`#files.encoding#`"),scope:vP.LANGUAGE_OVERRIDABLE},"files.eol":{type:`string`,enum:[`
`,`\r
`,`auto`],enumDescriptions:[D(8624,`LF`),D(8625,`CRLF`),D(8626,`Uses operating system specific end of line character.`)],default:`auto`,description:D(8627,`The default end of line character.`),scope:vP.LANGUAGE_OVERRIDABLE},"files.enableTrash":{type:`boolean`,default:!0,description:D(8628,`Moves files/folders to the OS trash (recycle bin on Windows) when deleting. Disabling this will delete files/folders permanently.`)},"files.trimTrailingWhitespace":{type:`boolean`,default:!1,description:D(8629,`When enabled, will trim trailing whitespace when saving a file.`),scope:vP.LANGUAGE_OVERRIDABLE},"files.trimTrailingWhitespaceInRegexAndStrings":{type:`boolean`,default:!0,description:D(8630,`When enabled, trailing whitespace will be removed from multiline strings and regexes on save or when executing 'editor.action.trimTrailingWhitespace'. This can cause whitespace to not be trimmed from lines when there isn't up-to-date token information.`),scope:vP.LANGUAGE_OVERRIDABLE},"files.insertFinalNewline":{type:`boolean`,default:!1,description:D(8631,`When enabled, insert a final new line at the end of the file when saving it.`),scope:vP.LANGUAGE_OVERRIDABLE},"files.trimFinalNewlines":{type:`boolean`,default:!1,description:D(8632,`When enabled, will trim all new lines after the final new line at the end of the file when saving it.`),scope:vP.LANGUAGE_OVERRIDABLE},"files.autoSave":{type:`string`,enum:[Cb.OFF,Cb.AFTER_DELAY,Cb.ON_FOCUS_CHANGE,Cb.ON_WINDOW_CHANGE],markdownEnumDescriptions:[D(8633,`An editor with changes is never automatically saved.`),D(8634,"An editor with changes is automatically saved after the configured `#files.autoSaveDelay#`."),D(8635,`An editor with changes is automatically saved when the editor loses focus.`),D(8636,`An editor with changes is automatically saved when the window loses focus.`)],default:di?Cb.AFTER_DELAY:Cb.OFF,markdownDescription:D(8637,`Controls [auto save](https://code.visualstudio.com/docs/editor/codebasics#_save-auto-save) of editors that have unsaved changes.`,Cb.OFF,Cb.AFTER_DELAY,Cb.ON_FOCUS_CHANGE,Cb.ON_WINDOW_CHANGE,Cb.AFTER_DELAY),scope:vP.LANGUAGE_OVERRIDABLE},"files.autoSaveDelay":{type:`number`,default:1e3,minimum:0,markdownDescription:D(8638,"Controls the delay in milliseconds after which an editor with unsaved changes is saved automatically. Only applies when `#files.autoSave#` is set to `{0}`.",Cb.AFTER_DELAY),scope:vP.LANGUAGE_OVERRIDABLE},"files.autoSaveWorkspaceFilesOnly":{type:`boolean`,default:!1,markdownDescription:D(8639,`When enabled, will limit [auto save](https://code.visualstudio.com/docs/editor/codebasics#_save-auto-save) of editors to files that are inside the opened workspace. Only applies when {0} is enabled.`,"`#files.autoSave#`"),scope:vP.LANGUAGE_OVERRIDABLE},"files.autoSaveWhenNoErrors":{type:`boolean`,default:!1,markdownDescription:D(8640,`When enabled, will limit [auto save](https://code.visualstudio.com/docs/editor/codebasics#_save-auto-save) of editors to files that have no errors reported in them at the time the auto save is triggered. Only applies when {0} is enabled.`,"`#files.autoSave#`"),scope:vP.LANGUAGE_OVERRIDABLE},"files.watcherExclude":{type:`object`,patternProperties:{".*":{type:`boolean`}},default:{"**/.git/objects/**":!0,"**/.git/subtree-cache/**":!0,"**/.hg/store/**":!0},markdownDescription:D(8641,`Configure paths or [glob patterns](https://aka.ms/vscode-glob-patterns) to exclude from file watching. Paths can either be relative to the watched folder or absolute. Glob patterns are matched relative from the watched folder. When you experience the file watcher process consuming a lot of CPU, make sure to exclude large folders that are of less interest (such as build output folders).`),scope:vP.RESOURCE},"files.watcherInclude":{type:`array`,items:{type:`string`},default:[],description:D(8642,`Configure extra paths to watch for changes inside the workspace. By default, all workspace folders will be watched recursively, except for folders that are symbolic links. You can explicitly add absolute or relative paths to support watching folders that are symbolic links. Relative paths will be resolved to an absolute path using the currently opened workspace.`),scope:vP.RESOURCE},"files.hotExit":bse,"files.defaultLanguage":{type:`string`,markdownDescription:D(8643,"The default language identifier that is assigned to new files. If configured to `${activeEditorLanguage}`, will use the language identifier of the currently active text editor if any.")},[Db]:{type:`object`,patternProperties:{".*":{type:`boolean`}},default:{},markdownDescription:D(8644,"Configure paths or [glob patterns](https://aka.ms/vscode-glob-patterns) to mark as read-only. Glob patterns are always evaluated relative to the path of the workspace folder unless they are absolute paths. You can exclude matching paths via the `#files.readonlyExclude#` setting. Files from readonly file system providers will always be read-only independent of this setting."),scope:vP.RESOURCE},[Ob]:{type:`object`,patternProperties:{".*":{type:`boolean`}},default:{},markdownDescription:D(8645,"Configure paths or [glob patterns](https://aka.ms/vscode-glob-patterns) to exclude from being marked as read-only if they match as a result of the `#files.readonlyInclude#` setting. Glob patterns are always evaluated relative to the path of the workspace folder unless they are absolute paths. Files from readonly file system providers will always be read-only independent of this setting."),scope:vP.RESOURCE},[kb]:{type:`boolean`,markdownDescription:D(8646,"Marks files as read-only when their file permissions indicate as such. This can be overridden via `#files.readonlyInclude#` and `#files.readonlyExclude#` settings."),default:!1},"files.restoreUndoStack":{type:`boolean`,description:D(8647,`Restore the undo stack when a file is reopened.`),default:!0},"files.saveConflictResolution":{type:`string`,enum:[`askUser`,`overwriteFileOnDisk`],enumDescriptions:[D(8648,`Will refuse to save and ask for resolving the save conflict manually.`),D(8649,`Will resolve the save conflict by overwriting the file on disk with the changes in the editor.`)],description:D(8650,`A save conflict can occur when a file is saved to disk that was changed by another program in the meantime. To prevent data loss, the user is asked to compare the changes in the editor with the version on disk. This setting should only be changed if you frequently encounter save conflict errors and may result in data loss if used without caution.`),default:`askUser`,scope:vP.LANGUAGE_OVERRIDABLE},"files.dialog.defaultPath":{type:`string`,pattern:`^((\\/|\\\\\\\\|[a-zA-Z]:\\\\).*)?$`,patternErrorMessage:D(8651,`Default path for file dialogs must be an absolute path (e.g. C:\\\\myFolder or /myFolder).`),description:D(8652,`Default path for file dialogs, overriding user's home path. Only used in the absence of a context-specific path, such as most recently opened file or folder.`),scope:vP.MACHINE},"files.simpleDialog.enable":{type:`boolean`,description:D(8653,`Enables the simple file dialog for opening and saving files and folders. The simple file dialog replaces the system file dialog when enabled.`),default:!1},"files.participants.timeout":{type:`number`,default:6e4,markdownDescription:D(8654,"Timeout in milliseconds after which file participants for create, rename, and delete are cancelled. Use `0` to disable participants.")}}}),Q7.registerConfiguration({...B6,properties:{"editor.formatOnSave":{type:`boolean`,markdownDescription:D(8655,"Format a file on save. A formatter must be available and the editor must not be shutting down. When {0} is set to `afterDelay`, the file will only be formatted when saved explicitly.","`#files.autoSave#`"),scope:vP.LANGUAGE_OVERRIDABLE},"editor.formatOnSaveMode":{type:`string`,default:`file`,enum:[`file`,`modifications`,`modificationsIfAvailable`],enumDescriptions:[D(8656,`Format the whole file.`),D(8657,`Format modifications. Requires source control and a formatter that supports 'Format Selection'.`),D(8658,`Will attempt to format modifications only (requires source control and a formatter that supports 'Format Selection'). If source control can't be used, then the whole file will be formatted.`)],markdownDescription:D(8659,"Controls if format on save formats the whole file or only modifications. Only applies when `#editor.formatOnSave#` is enabled."),scope:vP.LANGUAGE_OVERRIDABLE}}});var $7=class{constructor(){this.type=Jy.Directory,this._onDidChange=new E,this.onDidChange=this._onDidChange.event,this._onDidDelete=new E,this.onDidDelete=this._onDidDelete.event,this.ctime=Date.now(),this.mtime=Date.now(),this.type=Jy.Directory,this.entries=new Map}async stats(){return{ctime:this.ctime,mtime:this.mtime,size:0,type:Jy.Directory}}delete(){this._onDidDelete.fire()}addChild(e,t){this.entries.set(e,t),this._onDidChange.fire();let n={dispose:()=>{this.deleteChild(e)}};return t.onDidDelete(()=>{n.dispose()}),n}deleteChild(e){return this.entries.delete(e)?(this.mtime=Date.now(),this._onDidChange.fire(),this.entries.size===0&&this.delete(),!0):!1}getChildren(e){return this.entries.get(e)}read(){return Array.from(this.entries.entries()).map(([e,t])=>[e,t.type])}},e9=class{constructor(e,t){this.uri=e,this.readonly=t,this.type=Jy.File,this._onDidChange=new E,this.onDidChange=this._onDidChange.event,this._onDidDelete=new E,this.onDidDelete=this._onDidDelete.event,this.ctime=Date.now(),this.mtime=Date.now(),this.onDidChange(()=>{this.mtime=Date.now()})}async stats(){return{ctime:this.ctime,mtime:this.mtime,size:await this.getSize(),type:Jy.File,permissions:this.readonly?Yy.Readonly:void 0}}async delete(){if(this.readonly)throw ub(`Not allowed`,H.FileWriteLocked);this._onDidDelete.fire()}},xse=class extends e9{constructor(e,t,n){super(e,!0),this.url=t,this.metadata=n}async fetch(){let e=await fetch(this.url,{headers:this.metadata?.mimeType==null?{}:{Accept:this.metadata.mimeType}});if(e.status!==200)throw Error(e.statusText);return e}async getSize(){return this.metadata?.size??0}async read(){let e=await this.fetch();return new Uint8Array(await e.arrayBuffer())}async readStream(){return(await this.fetch()).body}write(){throw ub(`Not allowed`,H.FileWriteLocked)}async delete(){throw ub(`Not allowed`,H.FileWriteLocked)}},Sse=new TextEncoder;function t9(e){return e instanceof Uint8Array?e:Sse.encode(e)}var Cse=class extends e9{constructor(e,t){super(e,!1),this.content=t9(t)}async getSize(){return this.content.length}async read(){return this.content}async write(e){this.content=e,this._onDidChange.fire()}},n9=class extends w{constructor(e){super(),this.memoryFdCounter=0,this.fdMemory=new Map,this.onDidChangeCapabilities=T.None,this._onDidChangeFile=new E,this.onDidChangeFile=this._onDidChangeFile.event,this._bufferedChanges=[],this.rootByAuthority=new Map,this.capabilities=Zy.FileReadWrite|Zy.PathCaseSensitive|Zy.FileReadStream,e&&(this.capabilities|=Zy.Readonly)}async open(e){let t=await this.readFile(e),n=this.memoryFdCounter++;return this.fdMemory.set(n,t),n}async close(e){this.fdMemory.delete(e)}async read(e,t,n,r,i){let a=this.fdMemory.get(e);if(a==null)throw ub(`No file with that descriptor open`,H.Unavailable);let o=Up.wrap(a).slice(t,t+i);return n.set(o.buffer,r),o.byteLength}write(e,t,n,r,i){let a=this.fdMemory.get(e);if(a==null)throw ub(`No file with that descriptor open`,H.Unavailable);let o=Up.wrap(n).slice(r,r+i);return a.set(o.buffer,t),Promise.resolve(o.byteLength)}_lookupRoot(e){let t=e.toLowerCase(),n=this.rootByAuthority.get(t);return n??(n=new $7,this.rootByAuthority.set(t,n)),n}_lookup(e,t){let n=e.path.split(`/`),r=this._lookupRoot(e.authority);for(let e of n){if(e.length===0)continue;let n;if(r instanceof $7&&(n=r.getChildren(e)),n==null){if(t)return;throw ub(`file not found`,H.FileNotFound)}r=n}return r}_lookupAsDirectory(e,t){let n=this._lookup(e,t);if(n instanceof $7)return n;throw ub(`file not a directory`,H.FileNotADirectory)}_lookupAsFile(e,t){let n=this._lookup(e,t);if(n!=null&&n.type===Jy.File)return n;throw ub(`file is a directory`,H.FileIsADirectory)}registerFile(e){let t=e.uri.path.split(`/`),n=this._lookupRoot(e.uri.authority),r=e.uri.with({path:`/`});for(let e of t.slice(0,-1)){if(e===``)continue;r=Es.joinPath(r,e);let t=n.getChildren(e);if(t??=this.mkdirSync(r),!(t instanceof $7))throw Error(`file '${r.toString()}' is not a directory`);n=t}let i=t[t.length-1];if(n.getChildren(i)!=null)throw Error(`file '${Es.joinPath(r,i).toString()}/' already exists`);let a=new C;return a.add(S(()=>{this._fireSoon({resource:e.uri,type:_b.DELETED})})),a.add(e.onDidDelete(()=>{a.dispose()})),a.add(e.onDidChange(()=>{this._fireSoon({resource:e.uri,type:_b.UPDATED})})),a.add(n.addChild(i,e)),this._fireSoon({resource:e.uri,type:_b.ADDED}),a}async stat(e){return await this._lookup(e,!1).stats()}readdirSync(e){return this._lookupAsDirectory(e,!1).read()}async readdir(e){return this.readdirSync(e)}async readFile(e){return await this._lookupAsFile(e,!1).read()}readFileStream(e,t,n){let r=this._lookupAsFile(e,!1),i=Op(e=>Up.concat(e.map(e=>Up.wrap(e))).buffer,{highWaterMark:10});return(async()=>{try{if(r.readStream==null||typeof t.length==`number`||typeof t.position==`number`){let e=await r.read();(typeof t.position==`number`||typeof t.length==`number`)&&(e=e.slice(t.position??0,t.length)),i.end(e)}else{let e=(await r.readStream()).getReader(),t=await e.read();for(;!t.done&&!(n.isCancellationRequested||(await i.write(t.value),n.isCancellationRequested));)t=await e.read();i.end(void 0)}}catch(e){i.error(ub(e,H.Unknown)),i.end()}})(),i}watch(){return w.None}async writeFile(e,t,n){let r=this._lookup(e,!0);if(r!=null&&!(r instanceof e9))throw ub(`file is directory`,H.FileIsADirectory);if(r==null)throw ub(`file not found`,H.FileNotFound);if(!n.overwrite)throw ub(`file exists already`,H.FileExists);await r.write(t)}async rename(){throw ub(`Not allowed`,H.NoPermissions)}mkdirSync(e){if(this._lookup(e,!0)!=null)throw ub(`file exists already`,H.FileExists);let t=Ms(e),n=Ps(e),r=this._lookupAsDirectory(n,!1),i=new $7,a=new C;return a.add(i.onDidDelete(()=>{a.dispose(),this._fireSoon({resource:e,type:_b.DELETED})})),a.add(i.onDidChange(()=>{this._fireSoon({resource:e,type:_b.UPDATED})})),r.addChild(t,i),this._fireSoon({type:_b.ADDED,resource:e}),i}async mkdir(){throw ub(`Can' create a directory`,H.NoPermissions)}deleteSync(e){let t=this._lookup(e,!0);if(t==null)throw ub(`Not found`,H.FileNotFound);if(t.type===Jy.Directory)throw ub(`Can't delete a directory`,H.NoPermissions);t.delete()}async delete(e){this.deleteSync(e)}_fireSoon(...e){this._bufferedChanges.push(...e),this._fireSoonHandle!=null&&(clearTimeout(this._fireSoonHandle),this._fireSoonHandle=void 0),this._fireSoonHandle=window.setTimeout(()=>{this._onDidChangeFile.fire(this._bufferedChanges),this._bufferedChanges.length=0},5)}};function r9(e){return e.status===`fulfilled`}var i9=class{constructor(){this.providers=[],this.onDidChangeCapabilities=T.None,this._onDidChangeFile=new E,this.onDidChangeFile=this._onDidChangeFile.event,this._onDidChangeOverlays=new E,this.onDidChangeOverlays=this._onDidChangeOverlays.event,this.capabilities=Zy.FileReadWrite|Zy.PathCaseSensitive|Zy.FileReadStream|Zy.FileAppend}register(e,t){let n={priority:e,provider:t};this.providers.push(n),this.providers.sort((e,t)=>t.priority-e.priority);let r=new C;return r.add(t.onDidChangeFile(e=>{this._onDidChangeFile.fire(e)})),r.add({dispose:()=>{let e=this.providers.indexOf(n);e>=0&&(this.providers.splice(e,1),this._onDidChangeOverlays.fire())}}),this._onDidChangeOverlays.fire(),r}get delegates(){return this.providers.map(({provider:e})=>e)}async readFromDelegates(e,t){if(this.delegates.length===0)throw ub(`No delegate`,H.Unavailable);let n=[];for(let r of this.delegates){if(t!=null&&t.isCancellationRequested)throw Error(`Cancelled`);try{return await e(r)}catch(e){if(n.push(e),e instanceof lb&&[H.NoPermissions,H.FileNotFound,H.Unavailable].includes(e.code))continue;throw e}}let r=n?.filter(e=>e instanceof lb);throw r.find(e=>e.code===H.FileNotFound)??r[0]??n[0]}async writeToDelegates(e,t){if(this.delegates.length===0)throw ub(`No delegate`,H.Unavailable);for(let n of this.delegates)if(!((n.capabilities&Zy.Readonly)>0)){try{await W5(Es,n,Es.dirname(e))}catch{}try{return await t(n)}catch(e){if(e instanceof lb&&[H.NoPermissions,H.FileNotFound,H.Unavailable].includes(e.code))continue;throw e}}throw ub(`Not allowed`,H.NoPermissions)}async stat(e){return await this.readFromDelegates(async t=>{let n=await t.stat(e),r=(t.capabilities&Zy.Readonly)>0;return{...n,permissions:n.permissions??(r?Yy.Readonly:void 0)}})}async readFile(e){return await this.readFromDelegates(t=>t.readFile(e))}readFileStream(e,t,n){let r=Op(e=>Up.concat(e.map(e=>Up.wrap(e))).buffer);return this.readFromDelegates(async i=>{if(ib(i)){let a=i.readFileStream(e,t,n);await new Promise((e,t)=>{let i=!1;Mp(a,{onData(e){i=!0,r.write(e)},onEnd(){r.end(),e()},onError(e){i?r.error(e):t(e)}},n)})}else{let n=await this.readFile(e);return(typeof t.position==`number`||typeof t.length==`number`)&&(n=n.slice(t.position??0,t.length)),r.end(n)}},n).catch(e=>{r.error(e)}),r}async readdir(e){let t=await Promise.allSettled(this.delegates.map(async t=>await t.readdir(e)));if(!t.some(r9))throw t[0].reason;return Object.entries(Object.fromEntries(t.filter(r9).map(e=>e.value).flat()))}watch(e,t){let n=new C;for(let r of this.delegates)n.add(r.watch(e,t));return n}async writeFile(e,t,n){await this.writeToDelegates(e,async r=>{let i;try{i=await r.stat(e)}catch{}if(i!=null&&((i.permissions??0)&Yy.Readonly)>0)throw ub(`Not allowed`,H.NoPermissions);return await r.writeFile(e,t,n)})}async mkdir(e){await this.writeToDelegates(e,t=>t.mkdir(e))}async delete(e,t){await this.writeToDelegates(e,n=>n.delete(e,t))}async rename(e,t,n){await this.writeToDelegates(t,r=>r.rename(e,t,n))}},wse=class{constructor(){this.capabilities=Zy.FileReadWrite|Zy.PathCaseSensitive,this.onDidChangeCapabilities=T.None,this.onDidChangeFile=T.None}async readFile(){throw ub(`Not found`,H.FileNotFound)}async writeFile(){throw ub(`Not allowed`,H.NoPermissions)}watch(){return w.None}async stat(){throw ub(`Not found`,H.FileNotFound)}async mkdir(){throw ub(`Not allowed`,H.NoPermissions)}async readdir(){throw ub(`Not found`,H.FileNotFound)}async delete(){throw ub(`Not allowed`,H.NoPermissions)}async rename(){throw ub(`Not allowed`,H.NoPermissions)}},a9=new i9;a9.register(0,new J5);var o9=new n9(!0),s9=new J5;s9.mkdir(k.from({scheme:A.vscodeUserData,path:`/User/`}));var c9;(function(e){e.extensionFile=`extension-file`})(c9||={});var l9={[c9.extensionFile]:o9,[Z7.scheme]:new J5,[A.vscodeUserData]:s9,[A.tmp]:new J5,[A.file]:a9},u9=class extends G5{constructor(e,t){super(e),this.options=t;for(let[e,t]of Object.entries(l9)){let n=this.registerProvider(e,t);t instanceof i9&&t.onDidChangeOverlays(()=>{n.dispose(),n=this.registerProvider(e,t)})}}async withProvider(e){if(e.scheme===`data`){let e=this.getProvider(`http`);if(e!=null)return e}return super.withProvider(e)}async toFileStat(e,t,n,r,i,a){let o=async()=>await super.toFileStat(e,t,n,r,i,a);return this.options.statMiddleware?.(t,o)??o()}};u9.$di$dependencies=[];var d9=new n7;V7(async e=>{d9.logger=e.get(Lb)});function Tse(e={}){return{[Ib.toString()]:new jv(u9,[d9,e],!0),[cH.toString()]:new jv(A7,[],!0),[hJ.toString()]:new jv(mJ,[],!0),[E7.toString()]:new jv(cse,[],!0)}}function f9(e,t){W7(),l9[e]=t}function Ese(e){return o9.registerFile(e)}async function Dse(e,t,n){W7();let r=l9[e.scheme];if(r==null||r.writeFile==null)throw Error(`${e.scheme} provider doesn't exist or doesn't support writing files`);if(!(n?.overwrite??!1))try{await r.stat(e);return}catch(e){(!(e instanceof lb)||e.code!==H.FileNotFound)&&console.error(`Unable to check if file exists`,e)}await r.writeFile(e,t9(t),{atomic:!1,create:!0,overwrite:!1,unlock:!1,...n})}var p9,m9=`vscode-userdata-store`,h9=`vscode-logs-store`,g9=`vscode-filehandles-store`;async function Ose(){p9=await t7.create(`vscode-web-db`,3,[m9,h9,g9]),f9(Z7.scheme,new Q5(Z7.scheme,p9,h9,!1));let e=new Q5(A.vscodeUserData,p9,m9,!0);return f9(A.vscodeUserData,e),e}function kse(){class e{get onDidChangeLogLevel(){return B5.get(Lb).onDidChangeLogLevel}getLevel(){return B5.get(Lb).getLevel()}setLevel(e){B5.get(Lb).setLevel(e)}trace(e,...t){B5.get(Lb).trace(e,...t)}debug(e,...t){B5.get(Lb).debug(e,...t)}info(e,...t){B5.get(Lb).info(e,...t)}warn(e,...t){B5.get(Lb).warn(e,...t)}error(e,...t){B5.get(Lb).error(e,...t)}flush(){B5.get(Lb).flush()}dispose(){B5.get(Lb).dispose()}}f9(A.file,new iH(p9,g9,new e))}var Ase=V(`extensionGalleryService`),_9=V(`extensionManagementService`),jse=V(`IGlobalExtensionEnablementService`),Mse=V(`IExtensionTipsService`),Nse=V(`IAllowedExtensionsService`),v9=V(`IExtensionsProfileScannerService`),y9=V(`extensionResourceLoaderService`),Pse=Ty(_9),Fse=V(`extensionManagementServerService`),Ise=Ty(Pse),b9=V(`extensionEnablementService`),Lse=V(`IWebExtensionsScannerService`),Rse={},zse,Bse=new Set;function Vse(e){return Bse.has(e)}var Hse;function x9(e){return Rse[e]}function Use(){return zse}function Wse(){return Hse}function Gse(){throw Error(`unsupported`)}function Kse(e){let t=null;return(...n)=>(t??=e(...n),t)}function qse(e){return new Proxy(e,{construct:Kse((t,n)=>Reflect.construct(e,n))})}async function Jse(e){await new Promise(t=>setTimeout(t,e))}function Yse(e,t,n){let r=Promise.resolve(),i=null;return async a=>{i==null?(i=a,r=r.then(async()=>await Jse(n)).then(async()=>{let t=i;i=null,await e(t)})):i=t(i,a),await r}}var S9;(function(e){e[e.LocalProcess=1]=`LocalProcess`,e[e.LocalWebWorker=2]=`LocalWebWorker`,e[e.Remote=3]=`Remote`})(S9||={});function Xse(e){if(e===null)return`None`;switch(e){case S9.LocalProcess:return`LocalProcess`;case S9.LocalWebWorker:return`LocalWebWorker`;case S9.Remote:return`Remote`}}var C9;(function(e){e[e.None=0]=`None`,e[e.Local=1]=`Local`,e[e.Remote=2]=`Remote`})(C9||={});function Zse(e){switch(e){case C9.None:return`None`;case C9.Local:return`Local`;case C9.Remote:return`Remote`}}function Qse(e,t,n,r){let i=w9(e,n),a=w9(t,n),o=new Map,s=e=>{if(o.has(e.key))return;let t=new ece(i.get(e.key)||null,a.get(e.key)||null);o.set(t.key,t)};i.forEach(e=>s(e)),a.forEach(e=>s(e));let c=new Map;return o.forEach(e=>{let t=!!e.local,n=!!e.remote,i=!!(e.local&&e.local.isUnderDevelopment),a=!!(e.remote&&e.remote.isUnderDevelopment),o=C9.None;i&&!a?o=C9.Local:a&&!i&&(o=C9.Remote),c.set(e.key,r(e.identifier,e.kind,t,n,o))}),c}function w9(e,t){let n=new Map;return e.forEach(e=>{let r=new $se(e,t(e));n.set(r.key,r)}),n}var $se=class{constructor(e,t){this.desc=e,this.kind=t}get key(){return aW.toKey(this.desc.identifier)}get isUnderDevelopment(){return this.desc.isUnderDevelopment}},ece=class{constructor(e,t){this.local=e,this.remote=t}get key(){return this.local?this.local.key:this.remote.key}get identifier(){return this.local?this.local.desc.identifier:this.remote.desc.identifier}get kind(){return this.local?this.local.kind:this.remote.kind}},T9={exports:{}},E9;function tce(){return E9?T9.exports:(E9=1,(function(e,t){t=e.exports=Ne;var n=typeof process==`object`&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift(`SEMVER`),console.log.apply(console,e)}:function(){};t.SEMVER_SPEC_VERSION=`2.0.0`;var r=256,i=2**53-1||9007199254740991,a=16,o=t.re=[],s=t.src=[],c=0,l=c++;s[l]=`0|[1-9]\\d*`;var u=c++;s[u]=`[0-9]+`;var d=c++;s[d]=`\\d*[a-zA-Z-][a-zA-Z0-9-]*`;var f=c++;s[f]=`(`+s[l]+`)\\.(`+s[l]+`)\\.(`+s[l]+`)`;var p=c++;s[p]=`(`+s[u]+`)\\.(`+s[u]+`)\\.(`+s[u]+`)`;var m=c++;s[m]=`(?:`+s[l]+`|`+s[d]+`)`;var h=c++;s[h]=`(?:`+s[u]+`|`+s[d]+`)`;var g=c++;s[g]=`(?:-(`+s[m]+`(?:\\.`+s[m]+`)*))`;var _=c++;s[_]=`(?:-?(`+s[h]+`(?:\\.`+s[h]+`)*))`;var v=c++;s[v]=`[0-9A-Za-z-]+`;var ee=c++;s[ee]=`(?:\\+(`+s[v]+`(?:\\.`+s[v]+`)*))`;var te=c++,ne=`v?`+s[f]+s[g]+`?`+s[ee]+`?`;s[te]=`^`+ne+`$`;var re=`[v=\\s]*`+s[p]+s[_]+`?`+s[ee]+`?`,ie=c++;s[ie]=`^`+re+`$`;var ae=c++;s[ae]=`((?:<|>)?=?)`;var oe=c++;s[oe]=s[u]+`|x|X|\\*`;var se=c++;s[se]=s[l]+`|x|X|\\*`;var ce=c++;s[ce]=`[v=\\s]*(`+s[se]+`)(?:\\.(`+s[se]+`)(?:\\.(`+s[se]+`)(?:`+s[g]+`)?`+s[ee]+`?)?)?`;var le=c++;s[le]=`[v=\\s]*(`+s[oe]+`)(?:\\.(`+s[oe]+`)(?:\\.(`+s[oe]+`)(?:`+s[_]+`)?`+s[ee]+`?)?)?`;var y=c++;s[y]=`^`+s[ae]+`\\s*`+s[ce]+`$`;var ue=c++;s[ue]=`^`+s[ae]+`\\s*`+s[le]+`$`;var de=c++;s[de]=`(?:^|[^\\d])(\\d{1,`+a+`})(?:\\.(\\d{1,`+a+`}))?(?:\\.(\\d{1,`+a+`}))?(?:$|[^\\d])`;var fe=c++;s[fe]=`(?:~>?)`;var pe=c++;s[pe]=`(\\s*)`+s[fe]+`\\s+`,o[pe]=new RegExp(s[pe],`g`);var me=`$1~`,he=c++;s[he]=`^`+s[fe]+s[ce]+`$`;var ge=c++;s[ge]=`^`+s[fe]+s[le]+`$`;var _e=c++;s[_e]=`(?:\\^)`;var ve=c++;s[ve]=`(\\s*)`+s[_e]+`\\s+`,o[ve]=new RegExp(s[ve],`g`);var ye=`$1^`,be=c++;s[be]=`^`+s[_e]+s[ce]+`$`;var xe=c++;s[xe]=`^`+s[_e]+s[le]+`$`;var Se=c++;s[Se]=`^`+s[ae]+`\\s*(`+re+`)$|^$`;var Ce=c++;s[Ce]=`^`+s[ae]+`\\s*(`+ne+`)$|^$`;var we=c++;s[we]=`(\\s*)`+s[ae]+`\\s*(`+re+`|`+s[ce]+`)`,o[we]=new RegExp(s[we],`g`);var Te=`$1$2$3`,Ee=c++;s[Ee]=`^\\s*(`+s[ce]+`)\\s+-\\s+(`+s[ce]+`)\\s*$`;var De=c++;s[De]=`^\\s*(`+s[le]+`)\\s+-\\s+(`+s[le]+`)\\s*$`;var Oe=c++;s[Oe]=`(<|>)?=?\\s*\\*`;for(var ke=0;ke<c;ke++)n(ke,s[ke]),o[ke]||(o[ke]=new RegExp(s[ke]));t.parse=Ae;function Ae(e,t){if(e instanceof Ne)return e;if(typeof e!=`string`||e.length>r||!(t?o[ie]:o[te]).test(e))return null;try{return new Ne(e,t)}catch{return null}}t.valid=je;function je(e,t){var n=Ae(e,t);return n?n.version:null}t.clean=Me;function Me(e,t){var n=Ae(e.trim().replace(/^[=v]+/,``),t);return n?n.version:null}t.SemVer=Ne;function Ne(e,t){if(e instanceof Ne){if(e.loose===t)return e;e=e.version}else if(typeof e!=`string`)throw TypeError(`Invalid Version: `+e);if(e.length>r)throw TypeError(`version is longer than `+r+` characters`);if(!(this instanceof Ne))return new Ne(e,t);n(`SemVer`,e,t),this.loose=t;var a=e.trim().match(t?o[ie]:o[te]);if(!a)throw TypeError(`Invalid Version: `+e);if(this.raw=e,this.major=+a[1],this.minor=+a[2],this.patch=+a[3],this.major>i||this.major<0)throw TypeError(`Invalid major version`);if(this.minor>i||this.minor<0)throw TypeError(`Invalid minor version`);if(this.patch>i||this.patch<0)throw TypeError(`Invalid patch version`);a[4]?this.prerelease=a[4].split(`.`).map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e}):this.prerelease=[],this.build=a[5]?a[5].split(`.`):[],this.format()}Ne.prototype.format=function(){return this.version=this.major+`.`+this.minor+`.`+this.patch,this.prerelease.length&&(this.version+=`-`+this.prerelease.join(`.`)),this.version},Ne.prototype.toString=function(){return this.version},Ne.prototype.compare=function(e){return n(`SemVer.compare`,this.version,this.loose,e),e instanceof Ne||(e=new Ne(e,this.loose)),this.compareMain(e)||this.comparePre(e)},Ne.prototype.compareMain=function(e){return e instanceof Ne||(e=new Ne(e,this.loose)),Le(this.major,e.major)||Le(this.minor,e.minor)||Le(this.patch,e.patch)},Ne.prototype.comparePre=function(e){if(e instanceof Ne||(e=new Ne(e,this.loose)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],i=e.prerelease[t];if(n(`prerelease compare`,t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Le(r,i)}while(++t)},Ne.prototype.inc=function(e,t){switch(e){case`premajor`:this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc(`pre`,t);break;case`preminor`:this.prerelease.length=0,this.patch=0,this.minor++,this.inc(`pre`,t);break;case`prepatch`:this.prerelease.length=0,this.inc(`patch`,t),this.inc(`pre`,t);break;case`prerelease`:this.prerelease.length===0&&this.inc(`patch`,t),this.inc(`pre`,t);break;case`major`:(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case`minor`:(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case`patch`:this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case`pre`:if(this.prerelease.length===0)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)typeof this.prerelease[n]==`number`&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw Error(`invalid increment argument: `+e)}return this.format(),this.raw=this.version,this},t.inc=Pe;function Pe(e,t,n,r){typeof n==`string`&&(r=n,n=void 0);try{return new Ne(e,n).inc(t,r).version}catch{return null}}t.diff=Fe;function Fe(e,t){if(qe(e,t))return null;var n=Ae(e),r=Ae(t);if(n.prerelease.length||r.prerelease.length){for(var i in n)if((i===`major`||i===`minor`||i===`patch`)&&n[i]!==r[i])return`pre`+i;return`prerelease`}for(var i in n)if((i===`major`||i===`minor`||i===`patch`)&&n[i]!==r[i])return i}t.compareIdentifiers=Le;var Ie=/^[0-9]+$/;function Le(e,t){var n=Ie.test(e),r=Ie.test(t);return n&&r&&(e=+e,t=+t),n&&!r?-1:r&&!n?1:e<t?-1:e>t?1:0}t.rcompareIdentifiers=Re;function Re(e,t){return Le(t,e)}t.major=b;function b(e,t){return new Ne(e,t).major}t.minor=ze;function ze(e,t){return new Ne(e,t).minor}t.patch=Be;function Be(e,t){return new Ne(e,t).patch}t.compare=Ve;function Ve(e,t,n){return new Ne(e,n).compare(new Ne(t,n))}t.compareLoose=He;function He(e,t){return Ve(e,t,!0)}t.rcompare=x;function x(e,t,n){return Ve(t,e,n)}t.sort=Ue;function Ue(e,n){return e.sort(function(e,r){return t.compare(e,r,n)})}t.rsort=We;function We(e,n){return e.sort(function(e,r){return t.rcompare(e,r,n)})}t.gt=Ge;function Ge(e,t,n){return Ve(e,t,n)>0}t.lt=Ke;function Ke(e,t,n){return Ve(e,t,n)<0}t.eq=qe;function qe(e,t,n){return Ve(e,t,n)===0}t.neq=Je;function Je(e,t,n){return Ve(e,t,n)!==0}t.gte=Ye;function Ye(e,t,n){return Ve(e,t,n)>=0}t.lte=Xe;function Xe(e,t,n){return Ve(e,t,n)<=0}t.cmp=Ze;function Ze(e,t,n,r){var i;switch(t){case`===`:typeof e==`object`&&(e=e.version),typeof n==`object`&&(n=n.version),i=e===n;break;case`!==`:typeof e==`object`&&(e=e.version),typeof n==`object`&&(n=n.version),i=e!==n;break;case``:case`=`:case`==`:i=qe(e,n,r);break;case`!=`:i=Je(e,n,r);break;case`>`:i=Ge(e,n,r);break;case`>=`:i=Ye(e,n,r);break;case`<`:i=Ke(e,n,r);break;case`<=`:i=Xe(e,n,r);break;default:throw TypeError(`Invalid operator: `+t)}return i}t.Comparator=Qe;function Qe(e,t){if(e instanceof Qe){if(e.loose===t)return e;e=e.value}if(!(this instanceof Qe))return new Qe(e,t);n(`comparator`,e,t),this.loose=t,this.parse(e),this.semver===$e?this.value=``:this.value=this.operator+this.semver.version,n(`comp`,this)}var $e={};Qe.prototype.parse=function(e){var t=this.loose?o[Se]:o[Ce],n=e.match(t);if(!n)throw TypeError(`Invalid comparator: `+e);this.operator=n[1],this.operator===`=`&&(this.operator=``),n[2]?this.semver=new Ne(n[2],this.loose):this.semver=$e},Qe.prototype.toString=function(){return this.value},Qe.prototype.test=function(e){return n(`Comparator.test`,e,this.loose),this.semver===$e?!0:(typeof e==`string`&&(e=new Ne(e,this.loose)),Ze(e,this.operator,this.semver,this.loose))},Qe.prototype.intersects=function(e,t){if(!(e instanceof Qe))throw TypeError(`a Comparator is required`);var n;if(this.operator===``)return n=new et(e.value,t),pt(this.value,n,t);if(e.operator===``)return n=new et(this.value,t),pt(e.semver,n,t);var r=(this.operator===`>=`||this.operator===`>`)&&(e.operator===`>=`||e.operator===`>`),i=(this.operator===`<=`||this.operator===`<`)&&(e.operator===`<=`||e.operator===`<`),a=this.semver.version===e.semver.version,o=(this.operator===`>=`||this.operator===`<=`)&&(e.operator===`>=`||e.operator===`<=`),s=Ze(this.semver,`<`,e.semver,t)&&(this.operator===`>=`||this.operator===`>`)&&(e.operator===`<=`||e.operator===`<`),c=Ze(this.semver,`>`,e.semver,t)&&(this.operator===`<=`||this.operator===`<`)&&(e.operator===`>=`||e.operator===`>`);return r||i||a&&o||s||c},t.Range=et;function et(e,t){if(e instanceof et)return e.loose===t?e:new et(e.raw,t);if(e instanceof Qe)return new et(e.value,t);if(!(this instanceof et))return new et(e,t);if(this.loose=t,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length}),!this.set.length)throw TypeError(`Invalid SemVer Range: `+e);this.format()}et.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(` `).trim()}).join(`||`).trim(),this.range},et.prototype.toString=function(){return this.range},et.prototype.parseRange=function(e){var t=this.loose;e=e.trim(),n(`range`,e,t);var r=t?o[De]:o[Ee];e=e.replace(r,dt),n(`hyphen replace`,e),e=e.replace(o[we],Te),n(`comparator trim`,e,o[we]),e=e.replace(o[pe],me),e=e.replace(o[ve],ye),e=e.split(/\s+/).join(` `);var i=t?o[Se]:o[Ce],a=e.split(` `).map(function(e){return nt(e,t)}).join(` `).split(/\s+/);return this.loose&&(a=a.filter(function(e){return!!e.match(i)})),a=a.map(function(e){return new Qe(e,t)}),a},et.prototype.intersects=function(e,t){if(!(e instanceof et))throw TypeError(`a Range is required`);return this.set.some(function(n){return n.every(function(n){return e.set.some(function(e){return e.every(function(e){return n.intersects(e,t)})})})})},t.toComparators=tt;function tt(e,t){return new et(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(` `).trim().split(` `)})}function nt(e,t){return n(`comp`,e),e=ot(e,t),n(`caret`,e),e=it(e,t),n(`tildes`,e),e=ct(e,t),n(`xrange`,e),e=ut(e,t),n(`stars`,e),e}function rt(e){return!e||e.toLowerCase()===`x`||e===`*`}function it(e,t){return e.trim().split(/\s+/).map(function(e){return at(e,t)}).join(` `)}function at(e,t){var r=t?o[ge]:o[he];return e.replace(r,function(t,r,i,a,o){n(`tilde`,e,t,r,i,a,o);var s;return rt(r)?s=``:rt(i)?s=`>=`+r+`.0.0 <`+(+r+1)+`.0.0`:rt(a)?s=`>=`+r+`.`+i+`.0 <`+r+`.`+(+i+1)+`.0`:o?(n(`replaceTilde pr`,o),o.charAt(0)!==`-`&&(o=`-`+o),s=`>=`+r+`.`+i+`.`+a+o+` <`+r+`.`+(+i+1)+`.0`):s=`>=`+r+`.`+i+`.`+a+` <`+r+`.`+(+i+1)+`.0`,n(`tilde return`,s),s})}function ot(e,t){return e.trim().split(/\s+/).map(function(e){return st(e,t)}).join(` `)}function st(e,t){n(`caret`,e,t);var r=t?o[xe]:o[be];return e.replace(r,function(t,r,i,a,o){n(`caret`,e,t,r,i,a,o);var s;return rt(r)?s=``:rt(i)?s=`>=`+r+`.0.0 <`+(+r+1)+`.0.0`:rt(a)?s=r===`0`?`>=`+r+`.`+i+`.0 <`+r+`.`+(+i+1)+`.0`:`>=`+r+`.`+i+`.0 <`+(+r+1)+`.0.0`:o?(n(`replaceCaret pr`,o),o.charAt(0)!==`-`&&(o=`-`+o),s=r===`0`?i===`0`?`>=`+r+`.`+i+`.`+a+o+` <`+r+`.`+i+`.`+(+a+1):`>=`+r+`.`+i+`.`+a+o+` <`+r+`.`+(+i+1)+`.0`:`>=`+r+`.`+i+`.`+a+o+` <`+(+r+1)+`.0.0`):(n(`no pr`),s=r===`0`?i===`0`?`>=`+r+`.`+i+`.`+a+` <`+r+`.`+i+`.`+(+a+1):`>=`+r+`.`+i+`.`+a+` <`+r+`.`+(+i+1)+`.0`:`>=`+r+`.`+i+`.`+a+` <`+(+r+1)+`.0.0`),n(`caret return`,s),s})}function ct(e,t){return n(`replaceXRanges`,e,t),e.split(/\s+/).map(function(e){return lt(e,t)}).join(` `)}function lt(e,t){e=e.trim();var r=t?o[ue]:o[y];return e.replace(r,function(t,r,i,a,o,s){n(`xRange`,e,t,r,i,a,o,s);var c=rt(i),l=c||rt(a),u=l||rt(o),d=u;return r===`=`&&d&&(r=``),c?t=r===`>`||r===`<`?`<0.0.0`:`*`:r&&d?(l&&(a=0),u&&(o=0),r===`>`?(r=`>=`,l?(i=+i+1,a=0,o=0):u&&(a=+a+1,o=0)):r===`<=`&&(r=`<`,l?i=+i+1:a=+a+1),t=r+i+`.`+a+`.`+o):l?t=`>=`+i+`.0.0 <`+(+i+1)+`.0.0`:u&&(t=`>=`+i+`.`+a+`.0 <`+i+`.`+(+a+1)+`.0`),n(`xRange return`,t),t})}function ut(e,t){return n(`replaceStars`,e,t),e.trim().replace(o[Oe],``)}function dt(e,t,n,r,i,a,o,s,c,l,u,d,f){return t=rt(n)?``:rt(r)?`>=`+n+`.0.0`:rt(i)?`>=`+n+`.`+r+`.0`:`>=`+t,s=rt(c)?``:rt(l)?`<`+(+c+1)+`.0.0`:rt(u)?`<`+c+`.`+(+l+1)+`.0`:d?`<=`+c+`.`+l+`.`+u+`-`+d:`<=`+s,(t+` `+s).trim()}et.prototype.test=function(e){if(!e)return!1;typeof e==`string`&&(e=new Ne(e,this.loose));for(var t=0;t<this.set.length;t++)if(ft(this.set[t],e))return!0;return!1};function ft(e,t){for(var r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length){for(var r=0;r<e.length;r++)if(n(e[r].semver),e[r].semver!==$e&&e[r].semver.prerelease.length>0){var i=e[r].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}t.satisfies=pt;function pt(e,t,n){try{t=new et(t,n)}catch{return!1}return t.test(e)}t.maxSatisfying=mt;function mt(e,t,n){var r=null,i=null;try{var a=new et(t,n)}catch{return null}return e.forEach(function(e){a.test(e)&&(!r||i.compare(e)===-1)&&(r=e,i=new Ne(r,n))}),r}t.minSatisfying=ht;function ht(e,t,n){var r=null,i=null;try{var a=new et(t,n)}catch{return null}return e.forEach(function(e){a.test(e)&&(!r||i.compare(e)===1)&&(r=e,i=new Ne(r,n))}),r}t.validRange=gt;function gt(e,t){try{return new et(e,t).range||`*`}catch{return null}}t.ltr=_t;function _t(e,t,n){return yt(e,t,`<`,n)}t.gtr=vt;function vt(e,t,n){return yt(e,t,`>`,n)}t.outside=yt;function yt(e,t,n,r){e=new Ne(e,r),t=new et(t,r);var i,a,o,s,c;switch(n){case`>`:i=Ge,a=Xe,o=Ke,s=`>`,c=`>=`;break;case`<`:i=Ke,a=Ye,o=Ge,s=`<`,c=`<=`;break;default:throw TypeError(`Must provide a hilo val of "<" or ">"`)}if(pt(e,t,r))return!1;for(var l=0;l<t.set.length;++l){var u=t.set[l],d=null,f=null;if(u.forEach(function(e){e.semver===$e&&(e=new Qe(`>=0.0.0`)),d||=e,f||=e,i(e.semver,d.semver,r)?d=e:o(e.semver,f.semver,r)&&(f=e)}),d.operator===s||d.operator===c||(!f.operator||f.operator===s)&&a(e,f.semver)||f.operator===c&&o(e,f.semver))return!1}return!0}t.prerelease=bt;function bt(e,t){var n=Ae(e,t);return n&&n.prerelease.length?n.prerelease:null}t.intersects=xt;function xt(e,t,n){return e=new et(e,n),t=new et(t,n),e.intersects(t)}t.coerce=St;function St(e){if(e instanceof Ne)return e;if(typeof e!=`string`)return null;var t=e.match(o[de]);return t==null?null:Ae((t[1]||`0`)+`.`+(t[2]||`0`)+`.`+(t[3]||`0`))}})(T9,T9.exports),T9.exports)}var D9=tce();function O9(e){switch(e){case pU.InvalidSymbol:return D(114,`Invalid symbol`);case pU.InvalidNumberFormat:return D(115,`Invalid number format`);case pU.PropertyNameExpected:return D(116,`Property name expected`);case pU.ValueExpected:return D(117,`Value expected`);case pU.ColonExpected:return D(118,`Colon expected`);case pU.CommaExpected:return D(119,`Comma expected`);case pU.CloseBraceExpected:return D(120,`Closing brace expected`);case pU.CloseBracketExpected:return D(121,`Closing bracket expected`);case pU.EndOfFileExpected:return D(122,`End of file expected`);default:return``}}var k9=/^(\^|>=)?((\d+)|x)\.((\d+)|x)\.((\d+)|x)(\-.*)?$/,nce=/^-(\d{4})(\d{2})(\d{2})(\d{2})?(\d{2})?$/;function rce(e){return e=e.trim(),e===`*`||k9.test(e)}function A9(e){if(!rce(e))return null;if(e=e.trim(),e===`*`)return{hasCaret:!1,hasGreaterEquals:!1,majorBase:0,majorMustEqual:!1,minorBase:0,minorMustEqual:!1,patchBase:0,patchMustEqual:!1,preRelease:null};let t=e.match(k9);return t?{hasCaret:t[1]===`^`,hasGreaterEquals:t[1]===`>=`,majorBase:t[2]===`x`?0:parseInt(t[2],10),majorMustEqual:t[2]!==`x`,minorBase:t[4]===`x`?0:parseInt(t[4],10),minorMustEqual:t[4]!==`x`,patchBase:t[6]===`x`?0:parseInt(t[6],10),patchMustEqual:t[6]!==`x`,preRelease:t[8]||null}:null}function j9(e){if(!e)return null;let t=e.majorBase,n=e.majorMustEqual,r=e.minorBase,i=e.minorMustEqual,a=e.patchBase,o=e.patchMustEqual;e.hasCaret&&(t===0||(i=!1),o=!1);let s=0;if(e.preRelease){let t=nce.exec(e.preRelease);if(t){let[,e,n,r,i,a]=t;s=Date.UTC(Number(e),Number(n)-1,Number(r),Number(i)||0,Number(a)||0)}}return{majorBase:t,majorMustEqual:n,minorBase:r,minorMustEqual:i,patchBase:a,patchMustEqual:o,isMinimum:e.hasGreaterEquals,notBefore:s}}function ice(e,t,n){let r;r=typeof e==`string`?j9(A9(e)):e;let i;t instanceof Date?i=t.getTime():typeof t==`string`&&(i=new Date(t).getTime());let a;if(a=typeof n==`string`?j9(A9(n)):n,!r||!a)return!1;let o=r.majorBase,s=r.minorBase,c=r.patchBase,l=a.majorBase,u=a.minorBase,d=a.patchBase,f=a.notBefore,p=a.majorMustEqual,m=a.minorMustEqual,h=a.patchMustEqual;return a.isMinimum?o>l?!0:o<l?!1:s>u?!0:s<u||i&&i<f?!1:c>=d:(o===1&&l===0&&(!p||!m||!h)&&(l=1,u=0,d=0,p=!0,m=!1,h=!1),o<l?!1:o>l?!p:s<u?!1:s>u?!m:c<d?!1:c>d?!h:!(i&&i<f))}function M9(e,t,n,r,i,a){let o=[];if(r.publisher!==void 0&&typeof r.publisher!=`string`)return o.push([Lx.Error,D(1884,"property publisher must be of type `string`.")]),o;if(typeof r.name!=`string`)return o.push([Lx.Error,D(1885,"property `{0}` is mandatory and must be of type `string`",`name`)]),o;if(typeof r.version!=`string`)return o.push([Lx.Error,D(1886,"property `{0}` is mandatory and must be of type `string`",`version`)]),o;if(!r.engines)return o.push([Lx.Error,D(1887,"property `{0}` is mandatory and must be of type `object`",`engines`)]),o;if(typeof r.engines.vscode!=`string`)return o.push([Lx.Error,D(1888,"property `{0}` is mandatory and must be of type `string`",`engines.vscode`)]),o;if(r.extensionDependencies!==void 0&&!F9(r.extensionDependencies))return o.push([Lx.Error,D(1889,"property `{0}` can be omitted or must be of type `string[]`",`extensionDependencies`)]),o;if(r.extensionAffinity!==void 0&&!F9(r.extensionAffinity))return o.push([Lx.Error,D(1890,"property `{0}` can be omitted or must be of type `string[]`",`extensionAffinity`)]),o;if(r.activationEvents!==void 0){if(!F9(r.activationEvents))return o.push([Lx.Error,D(1891,"property `{0}` can be omitted or must be of type `string[]`",`activationEvents`)]),o;if(r.main===void 0&&r.browser===void 0)return o.push([Lx.Error,D(1892,"property `{0}` should be omitted if the extension doesn't have a `{1}` or `{2}` property.",`activationEvents`,`main`,`browser`)]),o}if(r.extensionKind!==void 0&&r.main===void 0&&o.push([Lx.Warning,D(1893,"property `{0}` can be defined only if property `main` is also defined.",`extensionKind`)]),r.main!==void 0){if(typeof r.main!=`string`)return o.push([Lx.Error,D(1894,"property `{0}` can be omitted or must be of type `string`",`main`)]),o;{let e=Fs(n,r.main);As(e,n)||o.push([Lx.Warning,D(1895,"Expected `main` ({0}) to be included inside extension's folder ({1}). This might make the extension non-portable.",e.path,n.path)])}}if(r.browser!==void 0){if(typeof r.browser!=`string`)return o.push([Lx.Error,D(1896,"property `{0}` can be omitted or must be of type `string`",`browser`)]),o;{let e=Fs(n,r.browser);As(e,n)||o.push([Lx.Warning,D(1897,"Expected `browser` ({0}) to be included inside extension's folder ({1}). This might make the extension non-portable.",e.path,n.path)])}}if(!D9.valid(r.version))return o.push([Lx.Error,D(1898,`Extension version is not semver compatible.`)]),o;let s=[];if(!ace(e,t,r,i,s))for(let e of s)o.push([Lx.Error,e]);if(a&&r.enabledApiProposals?.length){let e=[];if(!N9([...r.enabledApiProposals],e))for(let t of e)o.push([Lx.Error,t])}return o}function ace(e,t,n,r,i){return r||n.main===void 0&&n.browser===void 0?!0:P9(e,t,n.engines.vscode,i)}function oce(e,t,n){return e===`*`||P9(t,n,e)}function N9(e,t){if(e.length===0)return!0;let n=Array.isArray(t)?t:void 0,r=(Array.isArray(t)?void 0:t)??VG,i=[],a=pW(e);for(let{proposalName:e,version:t}of a)t&&r[e]?.version!==t&&i.push(e);return i.length?(n&&(i.length===1?n.push(D(1899,`This extension is using the API proposal '{0}' that is not compatible with the current version of VS Code.`,i[0])):n.push(D(1900,`This extension is using the API proposals {0} and '{1}' that are not compatible with the current version of VS Code.`,i.slice(0,i.length-1).map(e=>`'${e}'`).join(`, `),i[i.length-1]))),!1):!0}function P9(e,t,n,r=[]){let i=j9(A9(n));if(!i)return r.push(D(1901,"Could not parse `engines.vscode` value {0}. Please use, for example: ^1.22.0, ^1.22.x, etc.",n)),!1;if(i.majorBase===0){if(!i.majorMustEqual||!i.minorMustEqual)return r.push(D(1902,"Version specified in `engines.vscode` ({0}) is not specific enough. For vscode versions before 1.0.0, please define at a minimum the major and minor desired version. E.g. ^0.10.0, 0.10.x, 0.11.0, etc.",n)),!1}else if(!i.majorMustEqual)return r.push(D(1903,"Version specified in `engines.vscode` ({0}) is not specific enough. For vscode versions after 1.0.0, please define at a minimum the major desired version. E.g. ^1.10.0, 1.10.x, 1.x.x, 2.x.x, etc.",n)),!1;return ice(e,t,i)?!0:(r.push(D(1904,`Extension is not compatible with Code {0}. Extension requires: {1}.`,e,n)),!1)}function F9(e){if(!Array.isArray(e))return!1;for(let t=0,n=e.length;t<n;t++)if(typeof e[t]!=`string`)return!1;return!0}var I9;(function(e){e.ERROR_PROFILE_NOT_FOUND=`ERROR_PROFILE_NOT_FOUND`,e.ERROR_INVALID_CONTENT=`ERROR_INVALID_CONTENT`})(I9||={});var L9=class extends Error{constructor(e,t){super(e),this.code=t}},R9=class extends w{constructor(e,t,n,r,i){super(),this.extensionsLocation=e,this.fileService=t,this.userDataProfilesService=n,this.uriIdentityService=r,this.logService=i,this._onAddExtensions=this._register(new E),this.onAddExtensions=this._onAddExtensions.event,this._onDidAddExtensions=this._register(new E),this.onDidAddExtensions=this._onDidAddExtensions.event,this._onRemoveExtensions=this._register(new E),this.onRemoveExtensions=this._onRemoveExtensions.event,this._onDidRemoveExtensions=this._register(new E),this.onDidRemoveExtensions=this._onDidRemoveExtensions.event,this.resourcesAccessQueueMap=new dn}scanProfileExtensions(e,t){return this.withProfileExtensions(e,void 0,t)}async addExtensionsToProfile(e,t,n){let r=[],i=[];try{return await this.withProfileExtensions(t,a=>{let o=[];if(n)o.push(...a);else for(let t of a)e.some(([e])=>lG(e.identifier,t.identifier)&&e.manifest.version!==t.version)?r.push(t):o.push(t);for(let[t,n]of e){let e=o.findIndex(e=>lG(e.identifier,t.identifier)&&e.version===t.manifest.version),r={identifier:t.identifier,version:t.manifest.version,location:t.location,metadata:n};e===-1?(i.push(r),o.push(r)):o.splice(e,1,r)}return i.length&&this._onAddExtensions.fire({extensions:i,profileLocation:t}),r.length&&this._onRemoveExtensions.fire({extensions:r,profileLocation:t}),o}),i.length&&this._onDidAddExtensions.fire({extensions:i,profileLocation:t}),r.length&&this._onDidRemoveExtensions.fire({extensions:r,profileLocation:t}),i}catch(e){throw i.length&&this._onDidAddExtensions.fire({extensions:i,error:e,profileLocation:t}),r.length&&this._onDidRemoveExtensions.fire({extensions:r,error:e,profileLocation:t}),e}}async updateMetadata(e,t){let n=[];return await this.withProfileExtensions(t,t=>{let r=[];for(let i of t){let t=e.find(([e])=>lG({id:e.identifier.id},{id:i.identifier.id})&&e.manifest.version===i.version);t?(i.metadata={...i.metadata,...t[1]},n.push(i),r.push(i)):r.push(i)}return r}),n}async removeExtensionsFromProfile(e,t){let n=[];try{await this.withProfileExtensions(t,r=>{let i=[];for(let t of r)e.some(e=>lG(t.identifier,e))?n.push(t):i.push(t);return n.length&&this._onRemoveExtensions.fire({extensions:n,profileLocation:t}),i}),n.length&&this._onDidRemoveExtensions.fire({extensions:n,profileLocation:t})}catch(e){throw n.length&&this._onDidRemoveExtensions.fire({extensions:n,error:e,profileLocation:t}),e}}async withProfileExtensions(e,t,n){return this.getResourceAccessQueue(e).queue(async()=>{let r=[],i;try{let t=await this.fileService.readFile(e);i=JSON.parse(t.value.toString().trim()||`[]`)}catch(t){if(mb(t)!==Sb.FILE_NOT_FOUND)throw t;if(this.uriIdentityService.extUri.isEqual(e,this.userDataProfilesService.defaultProfile.extensionsResource)&&(i=await this.migrateFromOldDefaultProfileExtensionsLocation()),!i&&n?.bailOutWhenFileNotFound)throw new L9(oe(t),I9.ERROR_PROFILE_NOT_FOUND)}if(i){Array.isArray(i)||this.throwInvalidConentError(e);let t=!1;for(let n of i){z9(n)||this.throwInvalidConentError(e);let i;if(ge(n.relativeLocation)&&n.relativeLocation)i=this.resolveExtensionLocation(n.relativeLocation);else if(ge(n.location)){this.logService.warn(`Extensions profile: Ignoring extension with invalid location: ${n.location}`);continue}else{i=k.revive(n.location);let e=this.toRelativePath(i);e&&(t=!0,n.relativeLocation=e)}we(n.metadata?.hasPreReleaseVersion)&&n.metadata?.preRelease&&(t=!0,n.metadata.hasPreReleaseVersion=!0);let a=n.metadata?.id??n.identifier.uuid;r.push({identifier:a?{id:n.identifier.id,uuid:a}:{id:n.identifier.id},location:i,version:n.version,metadata:n.metadata})}t&&await this.fileService.writeFile(e,Up.fromString(JSON.stringify(i)))}if(t){r=t(r);let n=r.map(e=>({identifier:e.identifier,version:e.version,location:e.location.toJSON(),relativeLocation:this.toRelativePath(e.location),metadata:e.metadata}));await this.fileService.writeFile(e,Up.fromString(JSON.stringify(n)))}return r})}throwInvalidConentError(e){throw new L9(`Invalid extensions content in ${e.toString()}`,I9.ERROR_INVALID_CONTENT)}toRelativePath(e){return this.uriIdentityService.extUri.isEqual(this.uriIdentityService.extUri.dirname(e),this.extensionsLocation)?this.uriIdentityService.extUri.basename(e):void 0}resolveExtensionLocation(e){return this.uriIdentityService.extUri.joinPath(this.extensionsLocation,e)}async migrateFromOldDefaultProfileExtensionsLocation(){return this._migrationPromise||=(async()=>{let e=this.uriIdentityService.extUri.joinPath(this.userDataProfilesService.defaultProfile.location,`extensions.json`),t=this.uriIdentityService.extUri.joinPath(this.extensionsLocation,`.init-default-profile-extensions`),n;try{n=(await this.fileService.readFile(e)).value.toString()}catch(e){if(mb(e)===Sb.FILE_NOT_FOUND)return;throw e}this.logService.info(`Migrating extensions from old default profile location`,e.toString());let r;try{let e=JSON.parse(n);Array.isArray(e)&&e.every(e=>z9(e))?r=e:this.logService.warn(`Skipping migrating from old default profile locaiton: Found invalid data`,e)}catch(e){this.logService.error(e)}if(r)try{await this.fileService.createFile(this.userDataProfilesService.defaultProfile.extensionsResource,Up.fromString(JSON.stringify(r)),{overwrite:!1}),this.logService.info(`Migrated extensions from old default profile location to new location`,e.toString(),this.userDataProfilesService.defaultProfile.extensionsResource.toString())}catch(t){if(mb(t)===Sb.FILE_MODIFIED_SINCE)this.logService.info(`Migration from old default profile location to new location is done by another window`,e.toString(),this.userDataProfilesService.defaultProfile.extensionsResource.toString());else throw t}try{await this.fileService.del(e)}catch(e){mb(e)!==Sb.FILE_NOT_FOUND&&this.logService.error(e)}try{await this.fileService.del(t)}catch(e){mb(e)!==Sb.FILE_NOT_FOUND&&this.logService.error(e)}return r})(),this._migrationPromise}getResourceAccessQueue(e){let t=this.resourcesAccessQueueMap.get(e);return t||(t=new hc,this.resourcesAccessQueueMap.set(e,t)),t}};R9=t([n(1,Ib),n(2,zq),n(3,ox),n(4,Lb)],R9);function z9(e){let t=e;return ye(t)&&DW(t.identifier)&&(sce(t.location)||ge(t.location)&&!!t.location)&&(we(t.relativeLocation)||ge(t.relativeLocation))&&!!t.version&&ge(t.version)}function sce(e){if(!e)return!1;let t=e;return typeof t?.path==`string`&&typeof t?.scheme==`string`}function B9(e,t,n,r){try{cce(e,t,n,r)}catch(t){e.error(t?.message??t)}return t}function cce(e,t,n,r){let i=(a,o,s)=>{let c=a[o];if(ge(c)){let i=c,l=i.length;if(l>1&&i[0]===`%`&&i[l-1]===`%`){let c=i.substr(1,l-2),u=n[c];u===void 0&&r&&(u=r[c]);let d=typeof u==`string`?u:u?.message,f=r?.[c],p=typeof f==`string`?f:f?.message;if(!d){p||e.warn(`[${t.name}]: ${D(1878,`Couldn't find message for key {0}.`,c)}`);return}s&&(o===`title`||o===`category`)&&p&&p!==d?a[o]={value:d,original:p}:a[o]=d}}else if(ye(c))for(let e in c)c.hasOwnProperty(e)&&(e===`commands`?i(c,e,!0):i(c,e,s));else if(Array.isArray(c))for(let e=0;e<c.length;e++)i(c,e,s)};for(let e in t)t.hasOwnProperty(e)&&i(t,e)}var V9;(function(e){function t(e,t){if(e===t)return!0;let n=Object.keys(e),r=new Set;for(let e of Object.keys(t))r.add(e);if(n.length!==r.size)return!1;for(let i of n){if(e[i]!==t[i])return!1;r.delete(i)}return r.size===0}e.equals=t})(V9||={});var H9=class extends w{constructor(e,t,n,r,i,a,o,s,c,l,u,d,f){super(),this.systemExtensionsLocation=e,this.userExtensionsLocation=t,this.extensionsControlLocation=n,this.userDataProfilesService=i,this.extensionsProfileScannerService=a,this.extensionResourceLoaderService=o,this.fileService=s,this.logService=c,this.environmentService=l,this.productService=u,this.uriIdentityService=d,this.instantiationService=f,this._onDidChangeCache=this._register(new E),this.onDidChangeCache=this._onDidChangeCache.event,this.initializeDefaultProfileExtensionsPromise=void 0,this.systemExtensionsCachedScanner=this._register(this.instantiationService.createInstance(K9,r)),this.userExtensionsCachedScanner=this._register(this.instantiationService.createInstance(K9,r)),this.extensionsScanner=this._register(this.instantiationService.createInstance(G9)),this._register(this.systemExtensionsCachedScanner.onDidChangeCache(()=>this._onDidChangeCache.fire(rW.System))),this._register(this.userExtensionsCachedScanner.onDidChangeCache(()=>this._onDidChangeCache.fire(rW.User)))}getTargetPlatform(){return this._targetPlatformPromise||=CG(this.fileService,this.logService),this._targetPlatformPromise}async scanAllExtensions(e,t){let[n,r]=await Promise.all([this.scanSystemExtensions(e),this.scanUserExtensions(t)]);return this.dedupExtensions(n,r,[],await this.getTargetPlatform(),!0)}async scanSystemExtensions(e){let t=[];t.push(this.scanDefaultSystemExtensions(e.language)),t.push(this.scanDevSystemExtensions(e.language,!!e.checkControlFile));let[n,r]=await Promise.all(t);return this.applyScanOptions([...n,...r],rW.System,{pickLatest:!1})}async scanUserExtensions(e){this.logService.trace(`Started scanning user extensions`,e.profileLocation);let t=this.uriIdentityService.extUri.isEqual(e.profileLocation,this.userDataProfilesService.defaultProfile.extensionsResource)?{bailOutWhenFileNotFound:!0}:void 0,n=await this.createExtensionScannerInput(e.profileLocation,!0,rW.User,e.language,!0,t,e.productVersion??this.getProductVersion()),r=e.useCache&&!n.devMode?this.userExtensionsCachedScanner:this.extensionsScanner,i;try{i=await r.scanExtensions(n)}catch(e){if(e instanceof L9&&e.code===I9.ERROR_PROFILE_NOT_FOUND)await this.doInitializeDefaultProfileExtensions(),i=await r.scanExtensions(n);else throw e}return i=await this.applyScanOptions(i,rW.User,{includeInvalid:e.includeInvalid,pickLatest:!0}),this.logService.trace(`Scanned user extensions:`,i.length),i}async scanAllUserExtensions(e={includeInvalid:!0,includeAllVersions:!0}){let t=await this.createExtensionScannerInput(this.userExtensionsLocation,!1,rW.User,void 0,!0,void 0,this.getProductVersion()),n=await this.extensionsScanner.scanExtensions(t);return this.applyScanOptions(n,rW.User,{includeAllVersions:e.includeAllVersions,includeInvalid:e.includeInvalid})}async scanExtensionsUnderDevelopment(e,t){if(this.environmentService.isExtensionDevelopment&&this.environmentService.extensionDevelopmentLocationURI){let n=(await Promise.all(this.environmentService.extensionDevelopmentLocationURI.filter(e=>e.scheme===A.file).map(async n=>{let r=await this.createExtensionScannerInput(n,!1,rW.User,t.language,!1,void 0,this.getProductVersion());return(await this.extensionsScanner.scanOneOrMultipleExtensions(r)).map(t=>(t.type=e.find(e=>lG(e.identifier,t.identifier))?.type??t.type,this.extensionsScanner.validate(t,r)))}))).flat();return this.applyScanOptions(n,`development`,{includeInvalid:t.includeInvalid,pickLatest:!0})}return[]}async scanExistingExtension(e,t,n){let r=await this.createExtensionScannerInput(e,!1,t,n.language,!0,void 0,this.getProductVersion()),i=await this.extensionsScanner.scanExtension(r);return!i||!n.includeInvalid&&!i.isValid?null:i}async scanOneOrMultipleExtensions(e,t,n){let r=await this.createExtensionScannerInput(e,!1,t,n.language,!0,void 0,this.getProductVersion()),i=await this.extensionsScanner.scanOneOrMultipleExtensions(r);return this.applyScanOptions(i,t,{includeInvalid:n.includeInvalid,pickLatest:!0})}async scanMultipleExtensions(e,t,n){let r=[];return await Promise.all(e.map(async e=>{let i=await this.scanOneOrMultipleExtensions(e,t,n);r.push(...i)})),this.applyScanOptions(r,t,{includeInvalid:n.includeInvalid,pickLatest:!0})}async updateManifestMetadata(e,t){let n=Fs(e,`package.json`),r=await this.extensionResourceLoaderService.readExtensionResource(n),i=JSON.parse(r);i.__metadata={...i.__metadata,...t},await this.fileService.writeFile(Fs(e,`package.json`),Up.fromString(JSON.stringify(i,null,`	`)))}async initializeDefaultProfileExtensions(){try{await this.extensionsProfileScannerService.scanProfileExtensions(this.userDataProfilesService.defaultProfile.extensionsResource,{bailOutWhenFileNotFound:!0})}catch(e){if(e instanceof L9&&e.code===I9.ERROR_PROFILE_NOT_FOUND)await this.doInitializeDefaultProfileExtensions();else throw e}}async doInitializeDefaultProfileExtensions(){return this.initializeDefaultProfileExtensionsPromise||=(async()=>{try{this.logService.info(`Started initializing default profile extensions in extensions installation folder.`,this.userExtensionsLocation.toString());let e=await this.scanAllUserExtensions({includeInvalid:!0});if(e.length)await this.extensionsProfileScannerService.addExtensionsToProfile(e.map(e=>[e,e.metadata]),this.userDataProfilesService.defaultProfile.extensionsResource);else try{await this.fileService.createFile(this.userDataProfilesService.defaultProfile.extensionsResource,Up.fromString(JSON.stringify([])))}catch(e){mb(e)!==Sb.FILE_NOT_FOUND&&this.logService.warn(`Failed to create default profile extensions manifest in extensions installation folder.`,this.userExtensionsLocation.toString(),oe(e))}this.logService.info(`Completed initializing default profile extensions in extensions installation folder.`,this.userExtensionsLocation.toString())}catch(e){this.logService.error(e)}finally{this.initializeDefaultProfileExtensionsPromise=void 0}})(),this.initializeDefaultProfileExtensionsPromise}async applyScanOptions(e,t,n={}){return n.includeAllVersions||(e=this.dedupExtensions(t===rW.System?e:void 0,t===rW.User?e:void 0,t===`development`?e:void 0,await this.getTargetPlatform(),!!n.pickLatest)),n.includeInvalid||(e=e.filter(e=>e.isValid)),e.sort((e,t)=>{let n=pa(e.location.fsPath),r=pa(t.location.fsPath);return n<r?-1:n>r?1:0})}dedupExtensions(e,t,n,r,i){let a=(e,t,n)=>{if(!n){if(e.metadata?.isApplicationScoped&&!t.metadata?.isApplicationScoped)return!1;if(!e.metadata?.isApplicationScoped&&t.metadata?.isApplicationScoped)return!0}if(e.isValid&&!t.isValid)return!1;if(e.isValid===t.isValid){if(i&&D9.gt(e.manifest.version,t.manifest.version))return this.logService.debug(`Skipping extension ${t.location.path} with lower version ${t.manifest.version} in favour of ${e.location.path} with version ${e.manifest.version}`),!1;if(D9.eq(e.manifest.version,t.manifest.version)){if(e.type===rW.System)return this.logService.debug(`Skipping extension ${t.location.path} in favour of system extension ${e.location.path} with same version`),!1;if(e.targetPlatform===r)return this.logService.debug(`Skipping extension ${t.location.path} from different target platform ${t.targetPlatform}`),!1}}return n?this.logService.warn(`Overwriting user extension ${e.location.path} with ${t.location.path}.`):this.logService.debug(`Overwriting user extension ${e.location.path} with ${t.location.path}.`),!0},o=new sW;return e?.forEach(e=>{let t=o.get(e.identifier.id);(!t||a(t,e,!1))&&o.set(e.identifier.id,e)}),t?.forEach(t=>{let n=o.get(t.identifier.id);if(!n&&e&&t.type===rW.System){this.logService.debug(`Skipping obsolete system extension ${t.location.path}.`);return}(!n||a(n,t,!1))&&o.set(t.identifier.id,t)}),n?.forEach(e=>{let t=o.get(e.identifier.id);(!t||a(t,e,!0))&&o.set(e.identifier.id,e),o.set(e.identifier.id,e)}),[...o.values()]}async scanDefaultSystemExtensions(e){this.logService.trace(`Started scanning system extensions`);let t=await this.createExtensionScannerInput(this.systemExtensionsLocation,!1,rW.System,e,!0,void 0,this.getProductVersion()),n=await(t.devMode?this.extensionsScanner:this.systemExtensionsCachedScanner).scanExtensions(t);return this.logService.trace(`Scanned system extensions:`,n.length),n}async scanDevSystemExtensions(e,t){let n=this.environmentService.isBuilt?[]:this.productService.builtInExtensions;if(!n?.length)return[];this.logService.trace(`Started scanning dev system extensions`);let r=t?await this.getBuiltInExtensionControl():{},i=[],a=k.file(sa(la(Ss.asFileUri(``).fsPath,`..`,`.build`,`builtInExtensions`)));for(let e of n){let t=r[e.name]||`marketplace`;switch(t){case`disabled`:break;case`marketplace`:i.push(Fs(a,e.name));break;default:i.push(k.file(t));break}}let o=await Promise.all(i.map(async t=>this.extensionsScanner.scanExtension(await this.createExtensionScannerInput(t,!1,rW.System,e,!0,void 0,this.getProductVersion()))));return this.logService.trace(`Scanned dev system extensions:`,o.length),wt(o)}async getBuiltInExtensionControl(){try{let e=await this.fileService.readFile(this.extensionsControlLocation);return JSON.parse(e.value.toString())}catch{return{}}}async createExtensionScannerInput(e,t,n,r,i,a,o){let s=await this.getTranslations(r??yi),c=await this.getMtime(e),l=t&&!this.uriIdentityService.extUri.isEqual(e,this.userDataProfilesService.defaultProfile.extensionsResource)?this.userDataProfilesService.defaultProfile.extensionsResource:void 0;return new U9(e,c,l,l?await this.getMtime(l):void 0,t,a,n,i,o.version,o.date,this.productService.commit,!this.environmentService.isBuilt,r,s)}async getMtime(e){try{let t=await this.fileService.stat(e);if(typeof t.mtime==`number`)return t.mtime}catch{}}getProductVersion(){return{version:this.productService.version,date:this.productService.date}}};H9=t([n(4,zq),n(5,v9),n(6,y9),n(7,Ib),n(8,Lb),n(9,Ly),n(10,YU),n(11,ox),n(12,Cy)],H9);var U9=class{constructor(e,t,n,r,i,a,o,s,c,l,u,d,f,p){this.location=e,this.mtime=t,this.applicationExtensionslocation=n,this.applicationExtensionslocationMtime=r,this.profile=i,this.profileScanOptions=a,this.type=o,this.validate=s,this.productVersion=c,this.productDate=l,this.productCommit=u,this.devMode=d,this.language=f,this.translations=p}static createNlsConfiguration(e){return{language:e.language,pseudo:e.language===`pseudo`,devMode:e.devMode,translations:e.translations}}static equals(e,t){return ks(e.location,t.location)&&e.mtime===t.mtime&&ks(e.applicationExtensionslocation,t.applicationExtensionslocation)&&e.applicationExtensionslocationMtime===t.applicationExtensionslocationMtime&&e.profile===t.profile&&rk(e.profileScanOptions,t.profileScanOptions)&&e.type===t.type&&e.validate===t.validate&&e.productVersion===t.productVersion&&e.productDate===t.productDate&&e.productCommit===t.productCommit&&e.devMode===t.devMode&&e.language===t.language&&V9.equals(e.translations,t.translations)}},W9=class extends w{constructor(e,t,n){super(),this.extensionResourceLoaderService=e,this.fileService=t,this.logService=n}async getLocalizedMessages(e,t,n){let r=Fs(e,`package.nls.json`),i=(t,n)=>{n.forEach(n=>{this.logService.error(this.formatMessage(e,D(1879,`Failed to parse {0}: {1}.`,t?.path,O9(n.error))))})},a=t=>{this.logService.error(this.formatMessage(e,D(1880,`Invalid format {0}: JSON object expected.`,t?.path)))},o=`${t.publisher}.${t.name}`,s=n.translations[o];if(s)try{let e=k.parse(s),t=await this.extensionResourceLoaderService.readExtensionResource(e),n=[],o=bU(t,n);return n.length>0?(i(e,n),{values:void 0,default:r}):wU(o)===`object`?{values:o.contents?o.contents.package:void 0,default:r}:(a(e),{values:void 0,default:r})}catch{return{values:void 0,default:r}}else{if(!await this.fileService.exists(r))return;let t;try{t=await this.findMessageBundles(e,n)}catch{return}if(!t.localized)return{values:void 0,default:t.original};try{let e=await this.extensionResourceLoaderService.readExtensionResource(t.localized),n=[],r=bU(e,n);return n.length>0?(i(t.localized,n),{values:void 0,default:t.original}):wU(r)===`object`?{values:r,default:t.original}:(a(t.localized),{values:void 0,default:t.original})}catch{return{values:void 0,default:t.original}}}}async translateManifest(e,t,n){let r=await this.getLocalizedMessages(e,t,n);if(r)try{let n=[],i=await this.resolveOriginalMessageBundle(r.default,n);if(n.length>0)return n.forEach(t=>{this.logService.error(this.formatMessage(e,D(1879,`Failed to parse {0}: {1}.`,r.default?.path,O9(t.error))))}),t;if(wU(r)!==`object`)return this.logService.error(this.formatMessage(e,D(1880,`Invalid format {0}: JSON object expected.`,r.default?.path))),t;let a=r.values||Object.create(null);return B9(this.logService,t,a,i)}catch{}return t}async resolveOriginalMessageBundle(e,t){if(e)try{return bU(await this.extensionResourceLoaderService.readExtensionResource(e),t)}catch{}}findMessageBundles(e,t){return new Promise((n,r)=>{let i=t=>{let r=Fs(e,`package.nls.${t}.json`);this.fileService.exists(r).then(a=>{a&&n({localized:r,original:Fs(e,`package.nls.json`)});let o=t.lastIndexOf(`-`);o===-1?n({localized:Fs(e,`package.nls.json`),original:null}):(t=t.substring(0,o),i(t))})};if(t.devMode||t.pseudo||!t.language)return n({localized:Fs(e,`package.nls.json`),original:null});i(t.language)})}formatMessage(e,t){return`[${e.path}]: ${t}`}};W9=t([n(0,y9),n(1,Ib),n(2,Lb)],W9);var G9=class extends W9{constructor(e,t,n,r,i,a,o){super(n,r,o),this.extensionsProfileScannerService=e,this.uriIdentityService=t,this.environmentService=a,this.extensionsEnabledWithApiProposalVersion=i.extensionsEnabledWithApiProposalVersion?.map(e=>e.toLowerCase())??[]}async scanExtensions(e){return e.profile?this.scanExtensionsFromProfile(e):this.scanExtensionsFromLocation(e)}async scanExtensionsFromLocation(e){let t=await this.fileService.resolve(e.location);return t.children?.length?wt(await Promise.all(t.children.map(async t=>{if(!t.isDirectory||e.type===rW.User&&Ms(t.resource).indexOf(`.`)===0)return null;let n=new U9(t.resource,e.mtime,e.applicationExtensionslocation,e.applicationExtensionslocationMtime,e.profile,e.profileScanOptions,e.type,e.validate,e.productVersion,e.productDate,e.productCommit,e.devMode,e.language,e.translations);return this.scanExtension(n)}))).sort((e,t)=>e.location.path<t.location.path?-1:1):[]}async scanExtensionsFromProfile(e){let t=await this.scanExtensionsFromProfileResource(e.location,()=>!0,e);if(e.applicationExtensionslocation&&!this.uriIdentityService.extUri.isEqual(e.location,e.applicationExtensionslocation)){t=t.filter(e=>!e.metadata?.isApplicationScoped);let n=await this.scanExtensionsFromProfileResource(e.applicationExtensionslocation,e=>!!e.metadata?.isBuiltin||!!e.metadata?.isApplicationScoped,e);t.push(...n)}return t}async scanExtensionsFromProfileResource(e,t,n){let r=await this.extensionsProfileScannerService.scanProfileExtensions(e,n.profileScanOptions);return r.length?wt(await Promise.all(r.map(async e=>{if(t(e)){let t=new U9(e.location,n.mtime,n.applicationExtensionslocation,n.applicationExtensionslocationMtime,n.profile,n.profileScanOptions,n.type,n.validate,n.productVersion,n.productDate,n.productCommit,n.devMode,n.language,n.translations);return this.scanExtension(t,e)}return null}))):[]}async scanOneOrMultipleExtensions(e){try{if(await this.fileService.exists(Fs(e.location,`package.json`))){let t=await this.scanExtension(e);return t?[t]:[]}else return await this.scanExtensions(e)}catch(t){return this.logService.error(`Error scanning extensions at ${e.location.path}:`,oe(t)),[]}}async scanExtension(e,t){let n=[],r=!0,i;try{i=await this.scanExtensionManifest(e.location)}catch(a){if(t){n.push([Lx.Error,oe(a)]),r=!1;let[e,o]=t.identifier.id.split(`.`);i={name:o,publisher:e,version:t.version,engines:{vscode:``}}}else return e.type!==rW.System&&this.logService.error(a),null}i.publisher||=$U;let a;t?a={...t.metadata,size:i.__metadata?.size}:i.__metadata&&(a={installedTimestamp:i.__metadata.installedTimestamp,size:i.__metadata.size,targetPlatform:i.__metadata.targetPlatform}),delete i.__metadata;let o=gG(i.publisher,i.name),s=a?.id?{id:o,uuid:a.id}:{id:o},c=a?.isSystem?rW.System:e.type,l=c===rW.System||!!a?.isBuiltin;try{i=await this.translateManifest(e.location,i,U9.createNlsConfiguration(e))}catch(e){this.logService.warn(`Failed to translate manifest`,oe(e))}let u={type:c,identifier:s,manifest:i,location:e.location,isBuiltin:l,targetPlatform:a?.targetPlatform??iW.UNDEFINED,publisherDisplayName:a?.publisherDisplayName,metadata:a,isValid:r,validations:n,preRelease:!!a?.preRelease};return e.validate&&(u=this.validate(u,e)),i.enabledApiProposals&&(!this.environmentService.isBuilt||this.extensionsEnabledWithApiProposalVersion.includes(o.toLowerCase()))&&(i.originalEnabledApiProposals=i.enabledApiProposals,i.enabledApiProposals=mW([...i.enabledApiProposals])),u}validate(e,t){let n=e.isValid,r=this.environmentService.isBuilt&&this.extensionsEnabledWithApiProposalVersion.includes(e.identifier.id.toLowerCase()),i=M9(t.productVersion,t.productDate,t.location,e.manifest,e.isBuiltin,r);for(let[e,r]of i)e===Lx.Error&&(n=!1,this.logService.error(this.formatMessage(t.location,r)));return e.isValid=n,e.validations=[...e.validations,...i],e}async scanExtensionManifest(e){let t=Fs(e,`package.json`),n;try{n=await this.extensionResourceLoaderService.readExtensionResource(t)}catch(n){throw mb(n)!==Sb.FILE_NOT_FOUND&&this.logService.error(this.formatMessage(e,D(1881,`Cannot read file {0}: {1}.`,t.path,n.message))),n}let r;try{r=JSON.parse(n)}catch(r){let i=[];bU(n,i);for(let n of i)this.logService.error(this.formatMessage(e,D(1882,`Failed to parse {0}: [{1}, {2}] {3}.`,t.path,n.offset,n.length,O9(n.error))));throw r}if(wU(r)!==`object`){let n=this.formatMessage(e,D(1883,`Invalid manifest file {0}: Not a JSON object.`,t.path));throw this.logService.error(n),Error(n)}return r}};G9=t([n(0,v9),n(1,ox),n(2,y9),n(3,Ib),n(4,YU),n(5,Ly),n(6,Lb)],G9);var K9=class extends G9{constructor(e,t,n,r,i,a,o,s,c){super(n,r,i,a,o,s,c),this.currentProfile=e,this.userDataProfilesService=t,this.cacheValidatorThrottler=this._register(new lc(3e3)),this._onDidChangeCache=this._register(new E),this.onDidChangeCache=this._onDidChangeCache.event}async scanExtensions(e){let t=this.getCacheFile(e),n=await this.readExtensionCache(t);if(this.input=e,n&&n.input&&U9.equals(n.input,this.input))return this.logService.debug(`Using cached extensions scan result`,e.type===rW.System?`system`:`user`,e.location.toString()),this.cacheValidatorThrottler.trigger(()=>this.validateCache()),n.result.map(e=>(e.location=k.revive(e.location),e));let r=await super.scanExtensions(e);return await this.writeExtensionCache(t,{input:e,result:r}),r}async readExtensionCache(e){try{let t=await this.fileService.readFile(e),n=JSON.parse(t.value.toString());return{result:n.result,input:jy(n.input)}}catch(t){mb(t)!==Sb.FILE_NOT_FOUND&&this.logService.debug(`Error while reading the extension cache file:`,e.path,oe(t))}return null}async writeExtensionCache(e,t){try{await this.fileService.writeFile(e,Up.fromString(JSON.stringify(t)))}catch(t){this.logService.debug(`Error while writing the extension cache file:`,e.path,oe(t))}}async validateCache(){if(!this.input)return;let e=this.getCacheFile(this.input),t=await this.readExtensionCache(e);if(!t)return;let n=t.result,r=JSON.parse(JSON.stringify(await super.scanExtensions(this.input)));if(!rk(r,n))try{this.logService.info(`Invalidating Cache`,n,r),await this.fileService.del(e),this._onDidChangeCache.fire()}catch(e){this.logService.error(e)}}getCacheFile(e){let t=this.getProfile(e);return this.uriIdentityService.extUri.joinPath(t.cacheHome,e.type===rW.System?QU:ZU)}getProfile(e){return e.type===rW.System||!e.profile?this.userDataProfilesService.defaultProfile:this.uriIdentityService.extUri.isEqual(e.location,this.currentProfile.extensionsResource)?this.currentProfile:this.userDataProfilesService.profiles.find(t=>this.uriIdentityService.extUri.isEqual(e.location,t.extensionsResource))??this.currentProfile}};K9=t([n(1,zq),n(2,v9),n(3,ox),n(4,y9),n(5,Ib),n(6,YU),n(7,Ly),n(8,Lb)],K9);var q9;function lce(e){q9=e}var J9;function uce(e){J9=e}function dce(e,t,n,r){let i=new C;i.add(Ss.registerStaticBrowserUri(Fs(e,t),k.parse(n)));let a=typeof r==`string`?{mimeType:r}:r;return i.add(Ese(new xse(Fs(e,t),n,a))),i}var Y9=Yse(async({toAdd:e,toRemove:t})=>{await U7(),await B5.get(dV).deltaExtensions(e,t)},(e,t)=>({toAdd:[...e.toAdd,...t.toAdd],toRemove:[...e.toRemove,...t.toRemove]}),0),X9=new Map,Z9=[];function fce(){return Z9}function pce(e){return X9.get(e)}function Q9(e,t,{path:n=`/extension`,system:r=!1,readmePath:i,changelogPath:a}={}){let o=mG(e.publisher,e.name),s=k.from({scheme:c9.extensionFile,authority:o,path:n}),c=U7(),l={manifest:e,type:r?rW.System:rW.User,isBuiltin:!0,identifier:{id:o},location:s,targetPlatform:iW.WEB,isValid:!0,validations:[],readmeUrl:i==null?void 0:k.joinPath(s,i),changelogUrl:a==null?void 0:k.joinPath(s,a),preRelease:!1};t!=null&&X9.set(o,t),!H7&&t!==S9.Remote?Z9.push(l):c=c.then(async()=>{let r=B5.get(Cy),i=B5.get(b9),a=B5.get(dV);if(i.isEnabled(l)&&a.canAddExtension(zG(l,!1))){let i=B5.get(jH).remoteAuthority,a=s;t===S9.Remote&&(a=k.from({scheme:A.vscodeRemote,authority:i,path:n}));let o=r.createInstance(W9),c={devMode:!1,language:yi,pseudo:yi===`pseudo`,translations:x9(yi)??{}};await Y9({toAdd:[{...l,manifest:await o.translateManifest(a,e,c)}],toRemove:[]})}});let u={id:o,async whenReady(){await c},async isEnabled(){await U7();let e=B5.get(b9);return await c,e.isEnabled(l)},async dispose(){await c,Z9.indexOf(l)>=0&&Z9.splice(Z9.indexOf(l),1),X9.delete(o),await Y9({toAdd:[],toRemove:[l]})}};if(t!==S9.Remote){function e(e,t,n){return dce(s,e,t,n)}u={...u,registerFileUrl:e}}if(t===S9.LocalProcess){async function e(){if(await c,q9==null)throw Error("The local api can't be used without registering the local extension host by importing `vscode/localExtensionHost`");return await q9(o)}u={...u,getApi:e,async setAsDefaultApi(){J9?.(await e())}}}return u}var $9=Wse();$9!=null&&Q9($9,S9.LocalWebWorker,{system:!0});export{Z7 as $,pee as $A,Bg as $C,rte as $D,wf as $E,t as $F,Nr as $M,xn as $N,jee as $O,Xe as $P,Wv as $S,hm as $T,EA as $_,uY as $a,Mx as $b,bW as $c,Cz as $d,FR as $f,sP as $g,GF as $h,iZ as $i,Ta as $j,lc as $k,DU as $l,lL as $m,a4 as $n,tq as $o,rR as $p,WZ as $r,kK as $s,K6 as $t,kV as $u,kT as $v,I_ as $w,Zy as $x,AC as $y,Ise as A,ks as AA,L_ as AC,Yu as AD,F as AE,y as AF,ji as AM,Tn as AN,Kee as AO,Bt as AP,ly as AS,vh as AT,$j as A_,CY as Aa,lS as Ab,gG as Ac,vB as Ad,JR as Af,HP as Ag,FI as Ah,BZ as Ai,oo as Aj,M as Ak,oW as Al,xL as Am,x3 as An,Qq as Ao,gR as Ap,I$ as Ar,X as As,D5 as At,dH as Au,fD as Av,n_ as Aw,tx as Ax,jne as Ay,i9 as B,Ss as BA,g_ as BC,Lu as BD,If as BE,re as BF,oi as BM,Un as BN,Ll as BO,St as BP,hy as BS,Fm as BT,Fj as B_,OY as Ba,Yx as Bb,aG as Bc,NB as Bd,Wre as Bf,IP as Bg,IF as Bh,wZ as Bi,Wo as Bj,Tc as Bk,YU as Bl,_L as Bm,Q4 as Bn,Pq as Bo,Kre as Bp,PQ as Br,IK as Bs,Q8 as Bt,rH as Bu,LE as Bv,Qte as Bw,Pb as Bx,Tne as By,Gse as C,Ws as CA,Cg as CC,kd as CD,ip as CE,Ie as CF,Ti as CM,Jn as CN,Hee as CO,Ut as CP,Dy as CS,wh as CT,hM as C_,aX as Ca,RS as Cb,dG as Cc,aB as Cd,kie as Cf,QP as Cg,JI as Ch,qZ as Ci,Ga as Cj,al as Ck,KW as Cl,FL as Cm,P3 as Cn,pJ as Co,die as Cp,t1 as Cr,Mq as Cs,n7 as Ct,AH as Cu,yD as Cv,b_ as Cw,qb as Cx,Kw as Cy,Fse as D,Ns as DA,pg as DC,Fu as DD,Yf as DE,he as DF,gi as DM,Hn as DN,Ql as DO,Vt as DP,V as DS,xh as DT,lM as D_,bY as Da,fS as Db,TG as Dc,Wie as Dd,bie as Df,KP as Dg,ure as Dh,LZ as Di,xo as Dj,ol as Dk,cW as Dl,kL as Dm,T3 as Dn,sJ as Do,BR as Dp,z$ as Dr,mq as Ds,Moe as Dt,mH as Du,pD as Dv,x_ as Dw,ix as Dx,One as Dy,Vse as E,Os as EA,Ag as EC,Pu as ED,ap as EE,de as EF,Pi as EM,w as EN,Hl as EO,eee as EP,Sy as ES,Sh as ET,dM as E_,WY as Ea,MS as Eb,CG as Ec,tV as Ed,qR as Ef,qP as Eg,tre as Eh,IZ as Ei,Za as Ej,P as Ek,nW as El,DL as Em,w3 as En,cJ as Eo,hie as Ep,U$ as Er,hq as Es,B5 as Et,gH as Eu,ED as Ev,T_ as Ew,Bb as Ex,Ww as Ey,_9 as F,ws as FA,h_ as FC,qu as FD,Jf as FE,te as FF,hi as FM,Nn as FN,Kl as FO,Lt as FP,uy as FS,_h as FT,Vj as F_,zY as Fa,Qx as Fb,wG as Fc,Hz as Fd,Bre as Ff,yP as Fg,OI as Fh,DZ as Fi,Ka as Fj,Rc as Fk,dW as Fl,CL as Fm,_3 as Fn,Vq as Fo,iie as Fp,LQ as Fr,RK as Fs,w5 as Ft,oH as Fu,NE as Fv,pv as Fw,Yb as Fx,sw as Fy,Dse as G,bs as GA,u_ as GC,id as GD,Of as GE,d as GF,wi as GM,mn as GN,ru as GO,ot as GP,$v as GS,Mm as GT,kj as G_,vY as Ga,Vx as Gb,YW as Gc,Az as Gd,Lre as Gf,PP as Gg,PF as Gh,tQ as Gi,Fo as Gj,Ac as Gk,JU as Gl,uL as Gm,$4 as Gn,Oq as Go,uR as Gp,kQ as Gr,bK as Gs,g8 as Gt,HV as Gu,CE as Gv,N_ as Gw,_b as Gx,LC as Gy,Cse as H,A as HA,Sg as HC,Ju as HD,xf as HE,v as HF,xi as HM,Cn as HN,fu as HO,rt as HP,by as HS,Gm as HT,Ij as H_,jY as Ha,zx as Hb,rG as Hc,Gz as Hd,Ire as Hf,FP as Hg,AF as Hh,QZ as Hi,Va as Hj,yc as Hk,GU as Hl,hL as Hm,V4 as Hn,Iq as Ho,PR as Hp,AQ as Hr,LK as Hs,J8 as Ht,tH as Hu,kE as Hv,P_ as Hw,Tb as Hx,GC as Hy,Mse as I,Ls as IA,v_ as IC,Mu as ID,ep as IE,ae as IF,li as IM,Pn as IN,Vl as IO,bt as IP,ay as IS,fh as IT,Bj as I_,BY as Ia,$x as Ib,$W as Ic,Bz as Id,Gre as If,xP as Ig,EI as Ih,AZ as Ii,Eo as Ij,Ic as Ik,uW as Il,OL as Im,g3 as In,Hq as Io,kR as Ip,qQ as Ir,zK as Is,S5 as It,aH as Iu,ME as Iv,$h as Iw,Hb as Ix,Dw as Iy,gse as J,ns as JA,Mg as JC,Eu as JD,kf as JE,l as JF,Lr as JM,dn as JN,kl as JO,et as JP,Bv as JS,Om as JT,VA as J_,mY as Ja,Lx as Jb,UW as Jc,Ez as Jd,Rre as Jf,TP as Jg,_I as Jh,bZ as Ji,Ao as Jj,bc as Jk,VU as Jl,cL as Jm,A4 as Jn,Tq as Jo,_ie as Jp,DQ as Jr,CK as Js,Z6 as Jt,UV as Ju,_E as Jv,U_ as Jw,hb as Jx,FC as Jy,f9 as K,k as KA,i_ as KC,Ou as KD,Ef as KE,h as KF,O as KM,_n as KN,nu as KO,tt as KP,ty as KS,Im as KT,hj as K_,_Y as Ka,Bx as Kb,qW as Kc,jz as Kd,Fre as Kf,VP as Kg,wI as Kh,rQ as Ki,Ua as Kj,hc as Kk,KU as Kl,RI as Km,N4 as Kn,kq as Ko,dR as Kp,TQ as Kr,SK as Ks,i8 as Kt,$V as Ku,xE as Kv,xg as Kw,vb as Kx,RC as Ky,jse as L,Hs as LA,y_ as LC,Ku as LD,Rf as LE,ne as LF,Mi as LM,Mn as LN,Bl as LO,nn as LP,dy as LS,eh as LT,Lj as L_,RY as La,eS as Lb,tG as Lc,eB as Ld,Hre as Lf,bP as Lg,hI as Lh,kZ as Li,La as Lj,uc as Lk,fW as Ll,AL as Lm,h3 as Ln,zq as Lo,oie as Lp,GQ as Lr,PK as Ls,x5 as Lt,iH as Lu,GE as Lv,tg as Lw,Lb as Lx,Ow as Ly,v9 as M,As as MA,og as MC,nd as MD,Qf as ME,le as MF,ci as MM,Rn as MN,Wee as MO,Mt as MP,oy as MS,xte as MT,Wj as M_,PY as Ma,iS as Mb,pG as Mc,$z as Md,GR as Mf,_P as Mg,NI as Mh,CZ as Mi,Qa as Mj,Hc as Mk,iW as Ml,NL as Mm,b3 as Mn,Jq as Mo,eie as Mp,f$ as Mr,BK as Ms,T5 as Mt,lH as Mu,qE as Mv,O_ as Mw,Gb as Mx,dw as My,Nse as N,Fs as NA,q_ as NC,Au as ND,Wf as NE,se as NF,ki as NM,zn as NN,Wl as NO,Ft as NP,fy as NS,yh as NT,Kj as N_,xY as Na,oS as Nb,vG as Nc,YB as Nd,WR as Nf,MP as Ng,MF as Nh,MZ as Ni,$a as Nj,j as Nk,tW as Nl,yL as Nm,v3 as Nn,Uq as No,MR as Np,m$ as Nr,UK as Ns,C5 as Nt,cH as Nu,QE as Nv,Tg as Nw,Kb as Nx,bne as Ny,Lse as O,Vs as OA,mg as OC,rd as OD,Xf as OE,ue as OF,Ai as OM,Wn as ON,Zl as OO,Et as OP,Ty as OS,Ete as OT,tM as O_,wY as Oa,dS as Ob,xG as Oc,jB as Od,XR as Of,GP as Og,cre as Oh,RZ as Oi,Ea as Oj,fl as Ok,aW as Ol,bL as Om,A3 as On,oJ as Oo,LR as Op,B$ as Or,gq as Os,k5 as Ot,fH as Ou,gD as Ov,w_ as Ow,zb as Ox,kw as Oy,Ase as P,Is as PA,lv as PC,ju as PD,I as PE,ce as PF,si as PM,Fn as PN,Iee as PO,Zt as PP,iy as PS,bte as PT,Hj as P_,TY as Pa,Zx as Pb,_G as Pc,K as Pd,fie as Pf,NP as Pg,DI as Ph,OZ as Pi,Ha as Pj,Pc as Pk,lW as Pl,ML as Pm,S3 as Pn,Bq as Po,Jre as Pp,JQ as Pr,HK as Ps,moe as Pt,sH as Pu,$E as Pv,Eg as Pw,Ub as Px,Cw as Py,yse as Q,lee as QA,Rg as QC,xu as QD,Af as QE,i as QF,D as QM,cn as QN,Aee as QO,ct as QP,Iv as QS,Tm as QT,DA as Q_,sY as Qa,jx as Qb,gW as Qc,bz as Qd,IR as Qf,oP as Qg,HF as Qh,tZ as Qi,Ca as Qj,Ec as Qk,OU as Ql,UI as Qm,d4 as Qn,eq as Qo,iR as Qp,UZ as Qr,TK as Qs,G6 as Qt,IV as Qu,IT as Qv,dv as Qw,Yy as Qx,une as Qy,c9 as R,Ks as RA,m_ as RC,Hu as RD,Lf as RE,u as RF,di as RM,jn as RN,Il as RO,lt as RP,yy as RS,$m as RT,zj as R_,NY as Ra,nS as Rb,QW as Rc,eV as Rd,Ure as Rf,DP as Rg,LF as Rh,ZZ as Ri,Jo as Rj,kc as Rk,mW as Rl,jL as Rm,l3 as Rn,Lq as Ro,vR as Rp,KQ as Rr,NK as Rs,l5 as Rt,YV as Ru,PE as Rv,Lg as Rw,Rb as Rx,aw as Ry,qse as S,Ps as SA,yg as SC,Ed as SD,hp as SE,Ee as SF,Ei as SM,Zn as SN,Uee as SO,Pt as SP,Oy as SS,Eh as ST,_M as S_,rX as Sa,aC as Sb,bG as Sc,Mz as Sd,Aie as Sf,$P as Sg,qI as Sh,TZ as Si,go as Sj,nl as Sk,EW as Sl,LL as Sm,I3 as Sn,dJ as So,uie as Sp,s1 as Sr,XK as Ss,r7 as St,jH as Su,SD as Sv,fv as Sw,Wb as Sx,qw as Sy,Use as T,Ds as TA,L as TC,cd as TD,cp as TE,me as TF,ii as TM,Bn as TN,Ul as TO,Ot as TP,Cy as TS,Tte as TT,pM as T_,tX as Ta,W as Tb,lG as Tc,J as Td,ZR as Tf,JP as Tg,fL as Th,FZ as Ti,Po as Tj,sl as Tk,eW as Tl,TL as Tm,M3 as Tn,lJ as To,RR as Tp,G$ as Tr,_q as Ts,M5 as Tt,bH as Tu,xD as Tv,j_ as Tw,ax as Tx,Uw as Ty,Ose as U,gs as UA,K_ as UC,Xu as UD,bf as UE,p as UF,_i as UM,vn as UN,hu as UO,nt as UP,Jv as US,Km as UT,Mj as U_,DY as Ua,Hx as Ub,nG as Uc,BB as Ud,wR as Uf,CP as Ug,zF as Uh,jZ as Ui,Oo as Uj,Mc as Uk,UU as Ul,mL as Um,U4 as Un,uq as Uo,$re as Up,MQ as Ur,jK as Us,v8 as Ut,eH as Uu,OE as Uv,bg as Uw,Eb as Ux,dne as Uy,n9 as V,vs as VA,rv as VC,Ru as VD,Ff as VE,ie as VF,yi as VM,S as VN,du as VO,At as VP,py as VS,qm as VT,Pj as V_,MY as Va,Jx as Vb,iG as Vc,zB as Vd,Pre as Vf,zP as Vg,jF as Vh,JZ as Vi,ho as Vj,Dc as Vk,qU as Vl,fre as Vm,W4 as Vn,Fq as Vo,NR as Vp,NQ as Vr,FK as Vs,X8 as Vt,BV as Vu,AE as Vv,z_ as Vw,jb as Vx,iw as Vy,Tse as W,_s as WA,$g as WC,sd as WD,jf as WE,m as WF,Si as WM,gn as WN,gu as WO,it as WP,ry as WS,Rm as WT,jj as W_,AY as Wa,Rx as Wb,eG as Wc,Uie as Wd,TR as Wf,SP as Wg,BF as Wh,$Z as Wi,Ra as Wj,mc as Wk,WU as Wl,VI as Wm,H4 as Wn,wq as Wo,_R as Wp,jQ as Wr,AK as Ws,h8 as Wt,XV as Wu,wE as Wv,vg as Ww,Xy as Wx,KC as Wy,mse as X,mee as XA,Wg as XC,Du as XD,Pf as XE,r as XF,kr as XM,bn as XN,El as XO,$e as XP,Kv as XS,jm as XT,UA as X_,dY as Xa,Px as Xb,zW as Xc,Dz as Xd,aie as Xf,wP as Xg,UF as Xh,vZ as Xi,Fa as Xj,ic as Xk,zU as Xl,$I as Xm,w4 as Xn,nq as Xo,kre as Xp,VZ as Xr,wK as Xs,q6 as Xt,LV as Xu,jT as Xv,W_ as Xw,gb as Xx,kC as Xy,hse as Y,gee as YA,jg as YC,bu as YD,Nf as YE,s as YF,Rr as YM,fn as YN,Ol as YO,at as YP,Gv as YS,Em as YT,BA as Y_,hY as Ya,Fx as Yb,RW as Yc,Tz as Yd,mie as Yf,RP as Yg,VF as Yh,lZ as Yi,Ia as Yj,xc as Yk,RU as Yl,LI as Ym,O4 as Yn,Eq as Yo,cR as Yp,wQ as Yr,EK as Ys,Q6 as Yt,nH as Yu,LT as Yv,f_ as Yw,yb as Yx,MC as Yy,_se as Z,$o as ZA,Hg as ZC,Su as ZD,Df as ZE,a as ZF,Or as ZM,pn as ZN,Dl as ZO,st as ZP,qv as ZS,Dm as ZT,AA as Z_,lY as Za,Nx as Zb,hW as Zc,kz as Zd,pie as Zf,hP as Zg,WF as Zh,oZ as Zi,No as Zj,ac as Zk,kU as Zl,HI as Zm,S4 as Zn,Z as Zo,nR as Zp,HZ as Zr,OK as Zs,J6 as Zt,FV as Zu,MT as Zv,Ig as Zw,Sb as Zx,NC as Zy,S9 as _,Gs as _A,Pg as _C,hd as _D,wp as _E,xe as _F,Li as _M,sr as _N,Vee as _O,_t as _P,Iy as _S,kte as _T,EM as __,mX as _a,nne as _b,DG as _c,sV as _d,Sie as _f,sF as _g,ere as _h,pQ as _i,Na as _j,$c as _k,WW as _l,vre as _m,d6 as _n,SJ as _o,xR as _p,B1 as _r,fq as _s,a7 as _t,IH as _u,kD as _v,s_ as _w,ox as _x,Zw as _y,lce as a,fc as aA,Xv as aC,Ad as aD,pm as aE,x as aF,pa as aM,Er as aN,$ee as aO,ft as aP,ub as aS,Nte as aT,rP as a_,BX as aa,xC as ab,hK as ac,SV as ad,Iie as af,hF as ag,sL as ah,sQ as ai,io as aj,Sl as ak,LW as al,wre as am,I6 as an,JJ as ao,jR as ap,d2 as ar,xq as as,dse as at,dU as au,QO as av,Gg as aw,Sx as ax,_T as ay,Xse as b,Ms as bA,R as bC,ud as bD,vp as bE,_e as bF,zr as bM,dr as bN,Yl as bO,ht as bP,ky as bS,Ote as bT,bM as b_,sX as ba,cC as bb,OG as bc,Nz as bd,az as bf,tF as bg,GI as bh,gQ as bi,Aa as bj,Xc as bk,wW as bl,IL as bm,V3 as bn,_J as bo,Qre as bp,x1 as br,vq as bs,Koe as bt,zH as bu,OD as bv,Qg as bw,Qb as bx,Bne as by,B9 as c,Qs as cA,Lv as cC,Ld as cD,im as cE,ke as cF,ca as cM,_r as cN,Pl as cO,wt as cP,Qy as cS,Lte as cT,vN as c_,DX as ca,DC as cb,LG as cc,xV as cd,mz as cf,_F as cg,pL as ch,YZ as ci,Ya as cj,gl as ck,IW as cl,Dre as cm,F6 as cn,BJ as co,gie as cp,j0 as cr,lq as cs,L7 as ct,SU as cu,ok as cv,ene as cw,bx as cx,iT as cy,oce as d,Xs as dA,Fv as dC,jd as dD,$p as dE,Le as dF,ha as dM,hr as dN,Lee as dO,qt as dP,pb as dS,Mte as dT,VM as d_,EX as da,_C as db,AG as dc,hV as dd,$R as df,EF as dg,ore as dh,yQ as di,Mo as dj,hl as dk,MW as dl,Ere as dm,cae as dn,VJ as do,DR as dp,S0 as dr,jq as ds,j7 as dt,bU as du,ik as dv,Zh as dw,fx as dx,$w as dy,rc as eA,Zv as eC,Sf as eD,ym as eE,qe as eF,n as eI,wa as eM,wr as eN,$l as eO,$t as eP,lb as eS,ev as eT,mP as e_,eZ as ea,PC as eb,UG as ec,jV as ed,xz as ef,NF as eg,dL as eh,GZ as ei,_ee as ej,kee as ek,vW as el,aR as em,hae as en,fY as eo,cie as ep,V2 as er,iq as es,G7 as et,jU as eu,wA as ev,a_ as ew,kx as ex,NT as ey,j9 as f,Zs as fA,Pv as fC,Kd as fD,tm as fE,ve as fF,oa as fM,rr as fN,Ree as fO,Qt as fP,Nb as fS,Fh as fT,HM as f_,CX as fa,fC as fb,IG as fc,mV as fd,Eie as ff,pF as fg,are as fh,bQ as fi,Pa as fj,yl as fk,HW as fl,Sre as fm,A6 as fn,iY as fo,Nre as fp,C0 as fr,Sq as fs,E7 as ft,xU as fu,KO as fv,sv as fw,px as fx,tT as fy,D9 as g,qs as gA,B as gC,fd as gD,Np as gE,Me as gF,Bi as gM,T as gN,Bee as gO,ut as gP,Ly as gS,jte as gT,TM as g_,xX as ga,dC as gb,NG as gc,uV as gd,wie as gf,TF as gg,dre as gh,fQ as gi,Ma as gj,el as gk,SW as gl,BL as gm,m6 as gn,EJ as go,SR as gp,G1 as gr,oq as gs,_7 as gt,YH as gu,YO as gv,l_ as gw,ux as gx,Rne as gy,O9 as h,dc as hA,kv as hC,md as hD,Mp as hE,je as hF,aa as hM,E as hN,zee as hO,kt as hP,Hy as hS,Ah as hT,jM as h_,pX as ha,hC as hb,PG as hc,dV as hd,ez as hf,CF as hg,ire as hh,dQ as hi,eo as hj,wl as hk,jW as hl,VL as hm,Zie as hn,PJ as ho,OR as hp,t0 as hr,cq as hs,b7 as ht,JH as hu,JO as hv,G_ as hw,cx as hx,Yw as hy,Q9 as i,Ys as iA,Uv as iC,Md as iD,sm as iE,Je as iF,ya as iM,Cr as iN,Qee as iO,Ht as iP,bb as iS,Q_ as iT,lP as i_,zX as ia,EC as ib,mK as ic,TV as id,_z as if,fF as ig,QI as ih,oQ as ii,Ko as ij,Ml as ik,xW as il,Tre as im,z6 as in,qJ as io,tie as ip,M2 as ir,Nq as is,use as it,EU as iu,ZO as iv,Fg as iw,Ex as ix,gT as iy,y9 as j,Bs as jA,z as jC,td as jD,Zf as jE,ee as jF,mi as jM,Ln as jN,Gee as jO,mt as jP,cy as jS,Ste as jT,Qj as j_,yY as ja,aS as jb,yG as jc,Zz as jd,KR as jf,gP as jg,PI as jh,xZ as ji,so as jj,Vc as jk,rW as jl,SL as jm,y3 as jn,$q as jo,HR as jp,YQ as jr,KK as js,E5 as jt,uH as ju,rD as jv,k_ as jw,ex as jx,Vw as jy,b9 as k,zs as kA,fg as kC,Wu as kD,$f as kE,pe as kF,ui as kM,C as kN,qee as kO,Yt as kP,sy as kS,wte as kT,Zj as k_,EY as ka,uS as kb,mG as kc,hB as kd,YR as kf,vP as kg,II as kh,zZ as ki,wo as kj,Kc as kk,sW as kl,wL as km,C3 as kn,aJ as ko,zR as kp,R$ as kr,qK as ks,_oe as kt,pH as ku,hD as kv,C_ as kw,rx as kx,Gw as ky,R9 as l,nc as lA,ey as lC,Fd as lD,am as lE,Oe as lF,la as lM,yr as lN,Mee as lO,Tt as lP,fb as lS,Ph as lT,gN as l_,kX as la,ane as lb,FG as lc,bV as ld,jie as lf,dF as lg,rre as lh,_Q as li,Ja as lj,_l as lk,VW as ll,Cre as lm,lae as ln,HJ as lo,yR as lp,A0 as lr,sq as ls,fse as lt,yU as lu,sk as lv,Qh as lw,vx as lx,rT as ly,M9 as m,Sc as mA,Av as mC,qd as mD,Ep as mE,Te as mF,ga as mM,cr as mN,Jl as mO,xt as mP,Ky as mS,Mh as mT,XM as m_,SX as ma,mC as mb,BG as mc,fV as md,tz as mf,vF as mg,iL as mh,SQ as mi,to as mj,Tl as mk,kW as ml,UL as mm,y6 as mn,FJ as mo,sie as mp,r0 as mr,rq as ms,S7 as mt,$H as mu,XO as mv,e_ as mw,lx as mx,Hne as my,pce as n,tc as nA,Yv as nC,hf as nD,em as nE,We as nF,_a as nM,Sr as nN,Yee as nO,tn as nP,Jy as nS,J_ as nT,aP as n_,WX as na,jC as nb,HG as nc,PV as nd,yz as nf,DF as ng,zI as nh,iQ as ni,Zo as nj,Nl as nk,PW as nl,Ore as nm,B6 as nn,WJ as no,Yre as np,L2 as nr,dq as ns,lse as nt,FU as nu,dA as nv,o_ as nw,Ox as nx,vT as ny,H9 as o,pc as oA,zv as oC,Nd as oD,um as oE,Ve as oF,fa as oM,br as oN,Xee as oO,pt as oP,Mb as oS,Pte as oT,XN as o_,jX as oa,cne as ob,YG as oc,EV as od,gz as of,bF as og,BI as oh,cQ as oi,ao as oj,xl as ok,FW as ol,KL as om,R6 as on,KJ as oo,mR as op,l2 as or,$K as os,V7 as ot,fU as ou,ak as ov,Vg as ow,gx as ox,uT as oy,A9 as p,ec as pA,jv as pC,Jd as pD,jp as pE,Ce as pF,da as pM,ar as pN,ql as pO,yt as pP,By as pS,Fte as pT,ZM as p_,TX as pa,gC as pb,kG as pc,_V as pd,Tie as pf,mF as pg,tL as ph,xQ as pi,Ba as pj,Cl as pk,OW as pl,GL as pm,w6 as pn,NJ as po,CR as pp,i0 as pr,Cq as ps,w7 as pt,CU as pu,HO as pv,ag as pw,mx as px,Qw as py,kse as q,as as qA,d_ as qC,ku as qD,Cf as qE,g as qF,Fr as qM,Sn as qN,tu as qO,Ze as qP,ny as qS,Wm as qT,_j as q_,gY as qa,Wx as qb,XW as qc,Hie as qd,zre as qf,EP as qg,gI as qh,eQ as qi,no as qj,gc as qk,BU as ql,aL as qm,M4 as qn,Dq as qo,vie as qp,EQ as qr,xK as qs,t8 as qt,zV as qu,sE as qv,Xg as qw,Ab as qx,IC as qy,uce as r,Fc as rA,Hv as rC,gf as rD,rm as rE,Ge as rF,ba as rM,Dr as rN,Zee as rO,It as rP,xb as rS,Z_ as rT,cP as r_,RX as ra,one as rb,gK as rc,DV as rd,vz as rf,xF as rg,ZI as rh,aQ as ri,Go as rj,jl as rk,NW as rl,bre as rm,mae as rn,GJ as ro,nie as rp,j2 as rr,QK as rs,F7 as rt,TU as ru,ek as rv,r_ as rw,Dx as rx,mT as ry,W9 as s,Js as sA,Rv as sC,Id as sD,fm as sE,Ne as sF,ma as sM,gr as sN,Fee as sO,Xt as sP,Fb as sS,Ite as sT,AN as s_,MX as sa,rne as sb,VG as sc,CV as sd,Pie as sf,gF as sg,XI as sh,lQ as si,qa as sj,vl as sk,GW as sl,QL as sm,L6 as sn,zJ as so,pR as sp,s2 as sr,Aq as ss,I7 as st,hU as su,rk as sv,Yh as sw,yx as sx,aT as sy,fce as t,vc as tA,Qv as tC,_f as tD,Up as tE,Ke as tF,Sa as tM,xr as tN,eu as tO,Kt as tP,H as tS,tv as tT,iP as t_,$X as ta,lne as tb,WG as tc,AV as td,Rie as tf,vI as tg,oL as th,KZ as ti,bee as tj,Al as tk,yW as tl,oR as tm,_ae as tn,aY as to,hR as tp,B2 as tr,pq as ts,W7 as tt,AU as tu,yA as tv,qg as tw,Ax as tx,DT as ty,N9 as u,$s as uA,Nv as uC,Rd as uD,om as uE,De as uF,sa as uM,vr as uN,zl as uO,jt as uP,mb as uS,Rte as uT,hN as u_,AX as ua,bC as ub,jG as uc,yV as ud,QR as uf,SF as ug,WI as uh,vQ as ui,yo as uj,bl as uk,AW as ul,JL as um,N6 as un,UJ as uo,bR as up,b0 as ur,aq as us,U7 as ut,wU as uu,nk as uv,Xh as uw,Cx as ux,nT as uy,C9 as v,Ts as vA,av as vC,ld as vD,Tp as vE,ye as vF,Ri as vM,ir as vN,Fl as vO,vt as vP,Fy as vS,Oh as vT,yM as v_,cX as va,sC as vb,RG as vc,iV as vd,Cie as vf,rF as vg,$ne as vh,mQ as vi,Wa as vj,N as vk,_W as vl,zL as vm,Q3 as vn,bJ as vo,AR as vp,F1 as vr,Q as vs,p7 as vt,RH as vu,AD as vv,Jg as vw,$b as vx,Lne as vy,x9 as w,Es as wA,hg as wC,Od as wD,op as wE,Fe as wF,ri as wM,Kn as wN,Gl as wO,Dt as wP,Ey as wS,bh as wT,mM as w_,nX as wa,jS as wb,hG as wc,gB as wd,Oie as wf,XP as wg,nL as wh,SZ as wi,Bo as wj,cl as wk,CW as wl,EL as wm,F3 as wn,fJ as wo,fR as wp,J$ as wr,ZK as ws,t7 as wt,xH as wu,bD as wv,zg as ww,Jb as wx,Jw as wy,Zse as x,js as xA,iv as xC,gd as xD,mp as xE,we as xF,bi as xM,tr as xN,Xl as xO,Nt as xP,jy as xS,Dte as xT,vM as x_,oX as xa,iC as xb,EG as xc,Gie as xd,rz as xf,eF as xg,YI as xh,EZ as xi,jo as xj,il as xk,TW as xl,RL as xm,L3 as xn,hJ as xo,lie as xp,c1 as xr,bq as xs,i7 as xt,BH as xu,DD as xv,A_ as xw,Zb as xx,Fne as xy,Qse as y,Us as yA,M_ as yC,dd as yD,Sp as yE,ge as yF,zi as yM,ur as yN,Pee as yO,gt as yP,Ny as yS,Dh as yT,xM as y_,dX as ya,lC as yb,zG as yc,Fz as yd,iz as yf,nF as yg,KI as yh,hQ as yi,Oa as yj,Yc as yk,BW as yl,yre as ym,H3 as yn,vJ as yo,ER as yp,S1 as yr,yq as ys,m7 as yt,PH as yu,vD as yv,c_ as yw,Xb as yx,Vne as yy,wse as z,Cs as zA,p_ as zC,Uu as zD,yf as zE,oe as zF,fi as zM,En as zN,Rl as zO,Jt as zP,vy as zS,Pm as zT,Rj as z_,kY as za,Xx as zb,cG as zc,PB as zd,Vre as zf,BP as zg,FF as zh,XZ as zi,mo as zj,cc as zk,XU as zl,gre as zm,u3 as zn,Rq as zo,qre as zp,FQ as zr,MK as zs,c5 as zt,KV as zu,BE as zv,R_ as zw,Ib as zx,cw as zy};